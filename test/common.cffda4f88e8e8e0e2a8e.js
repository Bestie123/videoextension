/*! For license information please see common.cffda4f88e8e8e0e2a8e.js.LICENSE.txt */
(self.webpackChunkvk = self.webpackChunkvk || []).push([[68592], {
    306610: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        n.d(t, {
            default: ()=>r
        })
    }
    ,
    5991: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function i(e, t, n) {
            return t && r(e.prototype, t),
            n && r(e, n),
            e
        }
        n.d(t, {
            default: ()=>i
        })
    }
    ,
    896156: (e,t,n)=>{
        "use strict";
        function r(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        n.d(t, {
            default: ()=>r
        })
    }
    ,
    190484: (e,t,n)=>{
        "use strict";
        function r(e) {
            return r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            ,
            r(e)
        }
        n.d(t, {
            default: ()=>r
        })
    }
    ,
    468518: (e,t,n)=>{
        "use strict";
        function r() {
            return "undefined" != typeof __SENTRY_NO_DEBUG__ && !__SENTRY_BROWSER_BUNDLE__
        }
        function i() {
            return "undefined" != typeof __SENTRY_BROWSER_BUNDLE__ && !!__SENTRY_BROWSER_BUNDLE__
        }
        n.d(t, {
            isDebugBuild: ()=>r,
            isBrowserBundle: ()=>i
        })
    }
    ,
    82991: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getGlobalObject: ()=>o
        });
        var r = n(361422)
          , i = {};
        function o() {
            return (0,
            r.isNodeEnv)() ? n.g : "undefined" != typeof window ? window : "undefined" != typeof self ? self : i
        }
    }
    ,
    361422: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isNodeEnv: ()=>i,
            dynamicRequire: ()=>o,
            loadModule: ()=>a
        });
        var r = n(468518);
        function i() {
            return !(0,
            r.isBrowserBundle)() && "[object process]" === Object.prototype.toString.call("undefined" != typeof process ? process : 0)
        }
        function o(e, t) {
            return e.require(t)
        }
        function a(t) {
            var n;
            try {
                n = o(e, t)
            } catch (e) {}
            try {
                var r = o(e, "process").cwd;
                n = o(e, r() + "/node_modules/" + t)
            } catch (e) {}
            return n
        }
        e = n.hmd(e)
    }
    ,
    130360: (e,t,n)=>{
        "use strict";
        n.d(t, {
            createStackParser: ()=>i,
            stripSentryFramesAndReverse: ()=>o,
            getFunctionName: ()=>s
        });
        var r = n(750832);
        function i() {
            for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
            return function(t, n) {
                var i, a, s, c;
                void 0 === n && (n = 0);
                var _ = [];
                try {
                    for (var l = (0,
                    r.__values)(t.split("\n").slice(n)), u = l.next(); !u.done; u = l.next()) {
                        var d = u.value;
                        try {
                            for (var p = (s = void 0,
                            (0,
                            r.__values)(e)), h = p.next(); !h.done; h = p.next()) {
                                var m = (0,
                                h.value)(d);
                                if (m) {
                                    _.push(m);
                                    break
                                }
                            }
                        } catch (e) {
                            s = {
                                error: e
                            }
                        } finally {
                            try {
                                h && !h.done && (c = p.return) && c.call(p)
                            } finally {
                                if (s)
                                    throw s.error
                            }
                        }
                    }
                } catch (e) {
                    i = {
                        error: e
                    }
                } finally {
                    try {
                        u && !u.done && (a = l.return) && a.call(l)
                    } finally {
                        if (i)
                            throw i.error
                    }
                }
                return o(_)
            }
        }
        function o(e) {
            if (!e.length)
                return [];
            var t = e
              , n = t[0].function || ""
              , i = t[t.length - 1].function || "";
            return -1 === n.indexOf("captureMessage") && -1 === n.indexOf("captureException") || (t = t.slice(1)),
            -1 !== i.indexOf("sentryWrapped") && (t = t.slice(0, -1)),
            t.slice(0, 50).map((function(e) {
                return (0,
                r.__assign)((0,
                r.__assign)({}, e), {
                    filename: e.filename || t[0].filename,
                    function: e.function || "?"
                })
            }
            )).reverse()
        }
        var a = "<anonymous>";
        function s(e) {
            try {
                return e && "function" == typeof e && e.name || a
            } catch (e) {
                return a
            }
        }
    }
    ,
    170890: (e,t,n)=>{
        "use strict";
        n.d(t, {
            api: ()=>_,
            setApiConfig: ()=>c,
            upload: ()=>l
        });
        var r = n(646217)
          , i = {
            domain: "api.vk.com",
            maxRetries: 10
        }
          , o = new r.R
          , a = new r.R
          , s = null;
        function c(e) {
            e = Object.assign({}, i, e),
            i = e
        }
        function _(e, t, n, l) {
            void 0 === l && (l = {});
            var u = i;
            n && (u = Object.assign({}, i, n));
            var d = t.captcha_sid;
            if (s && s.sid !== d)
                return Promise.reject({
                    type: "api_error",
                    error: {
                        error_code: 0,
                        error_msg: "Ddos limit execced"
                    }
                });
            var p, h, m = u.domain, f = (0,
            r.m)((h = {
                v: (p = u).version || "5.131"
            },
            p.appId && (h.client_id = p.appId),
            h)), g = function(e) {
                return {
                    access_token: e.accessToken
                }
            }(u), v = "https://" + m + "/method/" + e + "?" + f, E = Object.assign({}, t, g), y = function(e, t) {
                return void 0 === t && (t = {}),
                e + "-" + (0,
                r.m)(Object.assign({}, t))
            }(v, t), w = a.get(y) || a.create(y, u.maxRetries), b = o.get(y) || o.create(y, u.maxRetries);
            return (0,
            r.w)(w.get() || b.get()).then((function() {
                return (0,
                r.c)(v, E, l)
            }
            )).then((function(i) {
                var l, p;
                if (i.response)
                    return a.delete(y),
                    o.delete(y),
                    s && s.sid === d && (null === (l = s.task) || void 0 === l || l.resolve(void 0),
                    s = null),
                    i.execute_errors ? (0,
                    r._)((0,
                    r._)({}, i.response), {
                        execute_errors: i.execute_errors
                    }) : i.response;
                var h = i.error;
                if (!h)
                    return Promise.reject({
                        type: "api_error",
                        error: {
                            error_code: 0,
                            error_msg: "Unknown"
                        }
                    });
                if (u.onCaptcha && 14 === h.error_code) {
                    var m = h
                      , f = m.captcha_sid
                      , g = m.captcha_img;
                    if (s) {
                        if (s.sid !== d)
                            return s.task.get().then((function() {
                                return _(e, t, n)
                            }
                            ));
                        var v = new r.P;
                        v.get().then(s.task.resolve).catch(s.task.reject),
                        s = {
                            sid: f,
                            task: v
                        }
                    } else
                        s = {
                            sid: f,
                            task: new r.P
                        };
                    return u.onCaptcha({
                        captcha_sid: f,
                        captcha_img: g
                    }).then((function(r) {
                        var i = Object.assign({}, t, r);
                        return _(e, i, n)
                    }
                    ))
                }
                if (s && s.sid === d && (null === (p = s.task) || void 0 === p || p.resolve(void 0),
                s = null),
                w.isExceeded() || b.isExceeded())
                    return a.delete(y),
                    o.delete(y),
                    Promise.reject({
                        type: "api_error",
                        error: {
                            error_code: 0,
                            error_msg: "Maximum of api retries exceeded"
                        }
                    });
                if (29 === h.error_code)
                    return b.increment(),
                    a.delete(y),
                    _(e, t, n);
                o.delete(y);
                var E = !(null == n ? void 0 : n.accessToken) && (5 === h.error_code || 28 === h.error_code);
                return u.onTokenExpired && E ? u.onTokenExpired().then((function(r) {
                    return w.increment(),
                    c({
                        accessToken: r
                    }),
                    _(e, t, n)
                }
                )) : (a.delete(y),
                Promise.reject({
                    type: "api_error",
                    error: i.error
                }))
            }
            ), (function(e) {
                return Promise.reject({
                    type: "network_error",
                    error: e
                })
            }
            ))
        }
        function l(e, t) {
            return fetch(e, {
                method: "POST",
                body: t,
                mode: "cors"
            }).then((function(e) {
                return e.json()
            }
            ))
        }
    }
    ,
    470751: (e,t,n)=>{
        "use strict";
        n.d(t, {
            login: ()=>u,
            removeLoginCache: ()=>d,
            setLoginConfig: ()=>c
        });
        var r = n(646217)
          , i = function() {
            function e() {}
            return e.setItemToStorage = function(e, t) {
                try {
                    localStorage.setItem(e, t)
                } catch (e) {}
            }
            ,
            e.getItemFromStorage = function(e) {
                try {
                    return localStorage.getItem(e)
                } catch (e) {}
            }
            ,
            e.removeItemFromStorage = function(e) {
                try {
                    localStorage.removeItem(e)
                } catch (e) {}
            }
            ,
            e
        }()
          , o = /\d+:[a-zA-Z_]+:login:auth/
          , a = new r.R
          , s = {
            domain: "login.vk.com",
            maxRetries: 3
        };
        function c(e) {
            e = Object.assign({}, s, e),
            s = e
        }
        var _ = new Map
          , l = new Map;
        function u(e, t, n, o, c) {
            void 0 === n && (n = {}),
            void 0 === o && (o = !1),
            void 0 === c && (c = {});
            var p = Object.assign({}, s, n)
              , h = p.appId + ":" + e + ":login:auth"
              , m = h + "--request"
              , f = _.get(m);
            if (f)
                return f.get();
            var g, v = a.get(m) || a.create(m, p.maxRetries);
            return f = new r.P,
            _.set(m, f),
            (g = m,
            new Promise((function(e) {
                null === i.getItemFromStorage(g) ? (i.setItemToStorage(g, "1"),
                e()) : setTimeout(e, (0,
                r.g)())
            }
            ))).then((function() {
                return (0,
                r.w)(v.get())
            }
            )).then((function() {
                var s = !l.get(m) || o
                  , g = function(e) {
                    var t = i.getItemFromStorage(e)
                      , n = {};
                    if (t)
                        try {
                            n = JSON.parse(t)
                        } catch (e) {}
                    return n
                }(h);
                if (!s && g.expires && 1e3 * Number(g.expires) - Date.now() >= r.O)
                    return i.removeItemFromStorage(m),
                    _.delete(m),
                    f.resolve(g);
                var E = p.domain
                  , y = p.onCaptcha
                  , w = "https://" + E + "/?act=" + e
                  , b = function(e) {
                    return {
                        version: e.version || "1",
                        app_id: e.appId
                    }
                }(p)
                  , C = Object.assign({}, t, b, {
                    access_token: null == g ? void 0 : g.access_token
                });
                d(e, n),
                (0,
                r.c)(w, C, c).then((function(o) {
                    var s;
                    if ("error" === o.type)
                        return _.delete(m),
                        "check result failure" === o.error_info ? v.isExceeded() ? (a.delete(m),
                        f.reject({
                            type: "login_error",
                            error: {
                                error_code: 0,
                                error_msg: "Maximum of login retries exceeded"
                            }
                        })) : (v.increment(),
                        u(e, t, n).then(f.resolve).catch(f.reject)) : (a.delete(m),
                        f.reject({
                            type: "login_error",
                            error: o.error_info,
                            errorCode: null !== (s = o.error_code) && void 0 !== s ? s : "unknown_error"
                        }));
                    if (a.delete(m),
                    "captcha" === o.type) {
                        if (!y)
                            return f.reject({
                                type: "login_error",
                                error: "captcha"
                            });
                        var c = o.captcha_sid
                          , d = o.captcha_img
                          , p = o.captcha_type;
                        return y({
                            captcha_sid: c,
                            captcha_img: d,
                            captcha_type: p
                        }).then((function(r) {
                            var i = Object.assign({}, t, r);
                            return _.delete(m),
                            u(e, i, n).then(f.resolve).catch(f.reject)
                        }
                        ))
                    }
                    var g = o.data.expires || 1 / 0;
                    i.setItemToStorage(h, JSON.stringify((0,
                    r._)((0,
                    r._)({}, o.data), {
                        expires: g
                    }))),
                    i.removeItemFromStorage(m),
                    l.set(m, !0),
                    _.delete(m),
                    f.resolve(o.data)
                }
                ), (function(e) {
                    a.delete(m),
                    _.delete(m),
                    f.reject({
                        type: "network_error",
                        error: e
                    })
                }
                ))
            }
            )),
            f.get()
        }
        function d(e, t) {
            if (e) {
                var n = s;
                t && (n = Object.assign({}, s, t));
                var r = n.appId + ":" + e + ":login:auth";
                i.removeItemFromStorage(r)
            } else
                Object.keys(localStorage).forEach((function(e) {
                    o.test(e) && i.removeItemFromStorage(e)
                }
                ))
        }
    }
    ,
    646217: (e,t,n)=>{
        "use strict";
        n.d(t, {
            O: ()=>_,
            P: ()=>i,
            R: ()=>a,
            _: ()=>r,
            c: ()=>c,
            g: ()=>l,
            m: ()=>s,
            w: ()=>u
        });
        var r = function() {
            return (r = Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                    for (var i in t = arguments[n])
                        Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                return e
            }
            ).apply(this, arguments)
        }
          , i = function() {
            var e = this;
            this.get = function() {
                return e.promise
            }
            ,
            this.resolve = function(t) {
                return e.resolveHandler(t)
            }
            ,
            this.reject = function(t) {
                return e.rejectHandler(t)
            }
            ,
            this.promise = new Promise((function(t, n) {
                e.resolveHandler = t,
                e.rejectHandler = n
            }
            ))
        }
          , o = function(e) {
            var t = this;
            void 0 === e && (e = 1 / 0),
            this.tries = 0,
            this.increment = function() {
                t.tries++
            }
            ,
            this.get = function() {
                return t.tries
            }
            ,
            this.isExceeded = function() {
                return t.tries >= t.maxTries
            }
            ,
            this.maxTries = e
        }
          , a = function() {
            var e = this;
            this.retries = new Map,
            this.get = function(t) {
                return e.retries.get(t)
            }
            ,
            this.create = function(t, n) {
                return e.retries.set(t, new o(n)),
                e.retries.get(t)
            }
            ,
            this.delete = function(t) {
                e.retries.delete(t)
            }
        };
        function s(e) {
            return Object.keys(e).map((function(t) {
                var n = e[t];
                return (t = encodeURIComponent(t || "")) + "=" + encodeURIComponent(n || "")
            }
            )).join("&")
        }
        function c(e, t, n) {
            void 0 === n && (n = {});
            var i = s(t);
            return fetch(e, r({
                method: "POST",
                body: i,
                mode: "cors",
                credentials: "include",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                }
            }, n)).then((function(e) {
                return e.json()
            }
            ))
        }
        var _ = 6e4
          , l = function(e, t) {
            return void 0 === e && (e = 500),
            void 0 === t && (t = 1500),
            ~~(Math.random() * (t - e + 1) + e)
        }
          , u = function(e) {
            return 0 === e ? Promise.resolve() : new Promise((function(t) {
                var n = function(e) {
                    if (0 === e)
                        return 0;
                    var t = Math.random()
                      , n = 100 * Math.pow(2, e) / 2;
                    return n + n * t
                }(e);
                setTimeout((function() {
                    return t()
                }
                ), n)
            }
            ))
        }
    }
    ,
    624823: (e,t,n)=>{
        "use strict";
        n.d(t, {
            Embedded: ()=>r
        });
        var r = function() {
            function e(e) {
                var t = this;
                this.receiver = !1,
                this._requestId = 1,
                this._requests = {},
                this._onMessage = function(e) {
                    if (e.origin === t.origin && e.data && e.data.embeddedName === t.name) {
                        t.target = e.source;
                        var n = e.data
                          , r = n.response;
                        if (r) {
                            var i = t._requests[r];
                            i && i(n.data),
                            t._requests[r] = null
                        } else
                            n.request && n.action && Promise.resolve(t.onMessage(n.action, n.data)).then((function(e) {
                                t._sendResponse(n.request, n.action, e)
                            }
                            ))
                    }
                }
                ,
                this.name = e.name,
                this.target = e.target,
                this.origin = e.origin || "https://" + e.host,
                this.receiver = e.receiver || !1,
                this.onMessage = e.onMessage,
                window.addEventListener("message", this._onMessage, !1)
            }
            return e.prototype._sendResponse = function(e, t, n) {
                this.target && this.target.postMessage({
                    embeddedName: this.name,
                    action: t,
                    response: e,
                    data: n
                }, this.origin)
            }
            ,
            e.prototype.sendMessage = function(e, t) {
                var n = this;
                if (void 0 === t && (t = {}),
                !this.target)
                    return Promise.reject();
                var r = this._requestId
                  , i = new Promise((function(e) {
                    n._requestId++,
                    n._requests[r] = e
                }
                ));
                return this.target.postMessage({
                    embeddedName: this.name,
                    action: e,
                    data: t,
                    request: r
                }, this.origin),
                i
            }
            ,
            e.prototype.destroy = function() {
                window.removeEventListener("message", this._onMessage, !1),
                this.target = void 0
            }
            ,
            e
        }()
    }
    ,
    464380: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            Api: ()=>Yn,
            BaseApi: ()=>v,
            BaseLogger: ()=>E,
            BaseSignaling: ()=>w,
            CallDirection: ()=>C,
            CallType: ()=>D,
            ChatRoomEventType: ()=>S,
            ConversationOption: ()=>M,
            DebugMessageType: ()=>Gt,
            ExternalIdType: ()=>zt,
            FacingMode: ()=>ht,
            FatalError: ()=>U,
            HangupReason: ()=>We,
            HangupType: ()=>F,
            MediaOption: ()=>V,
            MediaTrackKind: ()=>Ke,
            MediaType: ()=>Xt,
            MuteState: ()=>j,
            ParticipantState: ()=>q,
            ParticipantStatus: ()=>Ut,
            RecordRole: ()=>ir,
            Signaling: ()=>er,
            SignalingCommandType: ()=>Xn,
            SignalingConnectionType: ()=>Y,
            SignalingNotification: ()=>J,
            UserRole: ()=>ae,
            UserType: ()=>_e,
            Utils: ()=>Ye,
            acceptCall: ()=>gr,
            addMovie: ()=>oi,
            addParticipant: ()=>Cr,
            addParticipantInternal: ()=>Tr,
            authorize: ()=>fr,
            browser: ()=>ar,
            callInternal: ()=>pr,
            callTo: ()=>dr,
            captureScreen: ()=>Pr,
            changeConversationOptions: ()=>Hr,
            changeDevice: ()=>Sr,
            changeParticipantState: ()=>kr,
            changePriorities: ()=>Lr,
            changeVideoEffect: ()=>ui,
            chatHistory: ()=>qr,
            chatMessage: ()=>jr,
            chatMessageInternal: ()=>Gr,
            createJoinLink: ()=>Xr,
            customData: ()=>$r,
            customDataInternal: ()=>Yr,
            debug: ()=>_i,
            debugMessage: ()=>li,
            declineCall: ()=>vr,
            forceRelayPolicy: ()=>ei,
            getAnonymTokenByLink: ()=>Jr,
            getStreamInfo: ()=>ii,
            getWaitingHall: ()=>pi,
            grantRoles: ()=>xr,
            grantRolesInternal: ()=>Nr,
            hangup: ()=>br,
            init: ()=>ur,
            joinCall: ()=>Er,
            joinCallByLink: ()=>wr,
            joinCallInternal: ()=>yr,
            muteParticipant: ()=>Ur,
            muteParticipantInternal: ()=>Wr,
            pinParticipant: ()=>Fr,
            pinParticipantInternal: ()=>Kr,
            processPush: ()=>hr,
            processPushInternal: ()=>mr,
            promoteParticipant: ()=>hi,
            recordSetRole: ()=>ri,
            removeHistoryRecords: ()=>mi,
            removeJoinLink: ()=>Qr,
            removeMovie: ()=>si,
            removeParticipant: ()=>Dr,
            removeParticipantInternal: ()=>Ar,
            setApi: ()=>sr,
            setAudioStream: ()=>di,
            setLocalResolution: ()=>Rr,
            setLogger: ()=>_r,
            setMediaModifiers: ()=>Vr,
            setSignalingFactory: ()=>cr,
            setStatisticsInterval: ()=>ci,
            setVideoEffects: ()=>lr,
            setVideoStream: ()=>Or,
            setVolume: ()=>Zr,
            startConversation: ()=>zr,
            startStream: ()=>ti,
            stopStream: ()=>ni,
            toggleLocalAudio: ()=>Mr,
            toggleLocalVideo: ()=>Ir,
            updateDisplayLayout: ()=>Br,
            updateMovie: ()=>ai
        });
        var r, i, o = n(545580), a = n(406257), s = n.n(a), c = n(538797), _ = n(36090), l = n(535557), u = Object.defineProperty, d = Object.getOwnPropertySymbols, p = Object.prototype.hasOwnProperty, h = Object.prototype.propertyIsEnumerable, m = Math.pow, f = (e,t,n)=>t in e ? u(e, t, {
            enumerable: !0,
            configurable: !0,
            writable: !0,
            value: n
        }) : e[t] = n, g = (e,t,n)=>new Promise(((r,i)=>{
            var o = e=>{
                try {
                    s(n.next(e))
                } catch (e) {
                    i(e)
                }
            }
              , a = e=>{
                try {
                    s(n.throw(e))
                } catch (e) {
                    i(e)
                }
            }
              , s = e=>e.done ? r(e.value) : Promise.resolve(e.value).then(o, a);
            s((n = n.apply(e, t)).next())
        }
        )), v = class {
            createJoinLink(e) {
                return g(this, null, (function*() {
                    return {
                        join_link: "nop"
                    }
                }
                ))
            }
            removeJoinLink(e) {
                return g(this, null, (function*() {
                    return {
                        success: !0
                    }
                }
                ))
            }
            getAnonymTokenByLink(e, t) {
                return g(this, null, (function*() {
                    return ""
                }
                ))
            }
            log(e) {}
            prepareUserIds(e) {
                return g(this, null, (function*() {}
                ))
            }
            getCachedOkIdByExternalId(e) {
                return null
            }
            cacheExternalId(e, t) {}
            hangupConversation(e) {}
            removeHistoryRecords(e) {
                return g(this, null, (function*() {}
                ))
            }
            cleanup() {}
        }
        , E = class {
            log(e, t, n=!1) {}
            destroy() {}
        }
        , y = class {
            constructor() {
                this._handlers = {},
                this._listeners = []
            }
            _triggerEvent(e, ...t) {
                if (this._handlers.hasOwnProperty(e))
                    for (let n of this._handlers[e])
                        n.apply(this, t)
            }
            addEventListener(e, t) {
                if ("function" != typeof t)
                    throw new Error("Listener should be a function");
                return this._handlers.hasOwnProperty(e) || (this._handlers[e] = []),
                this._handlers[e].push(t),
                {
                    dispose: this.removeEventListener.bind(this, e, t)
                }
            }
            removeEventListener(e, t) {
                if (!this._handlers.hasOwnProperty(e))
                    return;
                t || delete this._handlers[e];
                let n = this._handlers[e].indexOf(t);
                n >= 0 && this._handlers[e].splice(n, 1)
            }
            subscribe(e, t, n) {
                let r = e.addEventListener(t, n);
                this._listeners.push(r)
            }
            unsubscribe() {
                this._listeners.forEach((e=>{
                    e.dispose()
                }
                ))
            }
        }
        , w = class extends y {
            get ready() {
                return !0
            }
            setParticipantIdRegistry(e) {}
            requestRealloc() {}
            setEndpoint(e) {}
            setConversationId(e) {}
            readyToSend() {}
            cleanup() {}
            requestTestMode(e) {}
            getNextCommandSequenceNumber() {
                return 0
            }
        }
        , b = ((r = b || {}).INCOMING = "INCOMING",
        r.OUTGOING = "OUTGOING",
        r.JOINING = "JOINING",
        r), C = b, T = (e=>(e.USER = "USER",
        e.GROUP = "GROUP",
        e.CHAT = "CHAT",
        e))(T || {}), D = T, A = ((i = A || {}).ATTENDEE = "ATTENDEE",
        i.HAND_UP = "HAND_UP",
        i), S = A, P = (e=>(e.ADD_PARTICIPANT = "ADD_PARTICIPANT",
        e.RECORD = "RECORD",
        e))(P || {}), O = P, I = (e=>(e.REQUIRE_AUTH_TO_JOIN = "REQUIRE_AUTH_TO_JOIN",
        e.AUDIENCE_MODE = "AUDIENCE_MODE",
        e.WAITING_HALL = "WAITING_HALL",
        e))(I || {}), M = I;
        var R, L, k, B, x, N = ((R = N || {}).CAMERA_PERMISSION = "camera",
        R.MIC_PERMISSION = "mic",
        R.CAMERA_ACCESS = "cameralock",
        R.MIC_ACCESS = "miclock",
        R.MIC_NOT_FOUND = "nomic",
        R.SCREEN_PERMISSION = "screenpermission",
        R.SCREEN_ACCESS = "screenlock",
        R.CONNECTION = "connection",
        R.NETWORK = "network",
        R.UNKNOWN = "unknown",
        R.UNSUPPORTED = "unsupported",
        R.SIGNALING_FAILED = "signalingfailed",
        R.API = "api",
        R.AUTH = "auth",
        R), U = N, W = ((L = W || {}).CANCELED = "CANCELED",
        L.REJECTED = "REJECTED",
        L.REMOVED = "REMOVED",
        L.HUNGUP = "HUNGUP",
        L.MISSED = "MISSED",
        L.BUSY = "BUSY",
        L.FAILED = "FAILED",
        L.NETWORK_ERROR = "NETWORK_ERROR",
        L.KILLED = "KILLED",
        L.BANNED = "BANNED",
        L.HAS_ACTIVE_CALL = "HAS_ACTIVE_CALL",
        L.CALLER_IS_BLOCKED = "CALLER_IS_BLOCKED",
        L.NOT_FRIENDS = "NOT_FRIENDS",
        L.CALLEE_IS_OFFLINE = "CALLEE_IS_OFFLINE",
        L.UNKNOWN_ERROR = "UNKNOWN_ERROR",
        L.UNSUPPORTED = "UNSUPPORTED",
        L.OLD_VERSION = "OLD_VERSION",
        L.SERVICE_DISABLED = "SERVICE_DISABLED",
        L.EXTERNAL_API_ERROR = "EXTERNAL_API_ERROR",
        L.SOCKET_CLOSED = "SOCKET_CLOSED",
        L.ENDED = "ENDED",
        L), F = W, K = (e=>(e.AUDIO = "AUDIO",
        e.VIDEO = "VIDEO",
        e.SCREEN_SHARING = "SCREEN_SHARING",
        e))(K || {}), V = K, H = (e=>(e.UNMUTE = "UNMUTE",
        e.MUTE = "MUTE",
        e.MUTE_PERMANENT = "MUTE_PERMANENT",
        e))(H || {}), j = H, G = ((k = G || {}).CALLED = "CALLED",
        k.ACCEPTED = "ACCEPTED",
        k.REJECTED = "REJECTED",
        k.HUNGUP = "HUNGUP",
        k), q = G, $ = (e=>(e.START = "start",
        e.ACCEPT = "accept",
        e.JOIN = "join",
        e.RETRY = "retry",
        e))($ || {}), Y = $, z = (e=>(e.NOTIFICATION = "NOTIFICATION",
        e.FAILED = "FAILED",
        e.RECONNECT = "RECONNECT",
        e))(z || {}), X = z, Q = ((B = Q || {}).TRANSMITTED_DATA = "transmitted-data",
        B.ACCEPTED_CALL = "accepted-call",
        B.HUNGUP = "hungup",
        B.PARTICIPANT_ADDED = "participant-added",
        B.PARTICIPANT_JOINED = "participant-joined",
        B.CLOSED_CONVERSATION = "closed-conversation",
        B.MEDIA_SETTINGS_CHANGED = "media-settings-changed",
        B.PARTICIPANT_STATE_CHANGED = "participant-state-changed",
        B.RATE_CALL_DATA = "rate-call-data",
        B.FEATURE_SET_CHANGED = "feature-set-changed",
        B.TOPOLOGY_CHANGED = "topology-changed",
        B.PRODUCER_UPDATED = "producer-updated",
        B.CONSUMER_ANSWERED = "consumer-answered",
        B.MULTIPARTY_CHAT_CREATED = "multiparty-chat-created",
        B.FORCE_MEDIA_SETTINGS_CHANGE = "force-media-settings-change",
        B.SETTINGS_UPDATE = "settings-update",
        B.VIDEO_QUALITY_UPDATE = "video-quality-update",
        B.REGISTERED_PEER = "registered-peer",
        B.SWITCH_MICRO = "switch-micro",
        B.RECORD_STARTED = "record-started",
        B.RECORD_STOPPED = "record-stopped",
        B.REALLOC_CON = "realloc-con",
        B.AUDIO_ACTIVITY = "audio-activity",
        B.SPEAKER_CHANGED = "speaker-changed",
        B.STALLED_ACTIVITY = "stalled-activity",
        B.CHAT_MESSAGE = "chat-message",
        B.CUSTOM_DATA = "custom-data",
        B.ROLES_CHANGED = "roles-changed",
        B.MUTE_PARTICIPANT = "mute-participant",
        B.PIN_PARTICIPANT = "pin-participant",
        B.OPTIONS_CHANGED = "options-changed",
        B.NETWORK_STATUS = "network-status",
        B.PARTICIPANT_SOURCES_UPDATE = "participant-sources-update",
        B.PROMOTE_PARTICIPANT = "promote-participant",
        B.CHAT_ROOM_UPDATED = "chat-room-updated",
        B.PROMOTION_APPROVED = "promotion-approved",
        B.JOIN_LINK_CHANGED = "join-link-changed",
        B), J = Q, Z = ((x = Z || {}).ERROR = "callError",
        x.DEVICES = "callDevices",
        x.CALL_SPEC_ERROR = "callSpecError",
        x.ICE_CONNECTION_STATE = "callIceConnectionState",
        x.ICE_CONNECTION_TYPE = "callIceConnectionType",
        x.ICE_RESTART = "callIceRestart",
        x.PUSH = "callPush",
        x.OUTGOING_CALL = "callStart",
        x.OUTGOING_MULTIPARTY_CALL = "callStartMultiparty",
        x.JOIN_CONVERSATION = "callJoinConversation",
        x.ACCEPTED_OUTGOING = "callAcceptedOutgoing",
        x.ACCEPT_INCOMING = "callAcceptIncoming",
        x.DECLINE_INCOMING = "callDeclineIncoming",
        x.ACCEPT_CONCURRENT = "callAcceptConcurrent",
        x.HANGUP = "callHangup",
        x.MEDIA_STATUS = "callMediaStatus",
        x.DEVICE_CHANGED = "callDeviceChanged",
        x.SOCKET_ACTION = "callSocketAction",
        x.ADD_PARTICIPANT = "callAddParticipant",
        x.REMOVE_PARTICIPANT = "callRemoveParticipant",
        x.POOR_CONNECTION = "callPoorConnection",
        x.TOPOLOGY_CHANGE_REQUESTED = "callTopologyChangeRequested",
        x.RELAY_POLICY = "callForceRelay",
        x.PAT_ALLOCATED = "patAllocate",
        x.PAT_DEALLOCATED = "patDeallocate",
        x.PAT_ERROR = "patError",
        x.PAT_WAITING_TIME_ERROR = "patWaitingTimeError",
        x.PAT_OUTDATED_RESPONSE = "patOutdatedResponse",
        x), ee = Z, te = (e=>(e.AUDIO_MIX = "audio-mix",
        e.PARTICIPANT_AGNOSTIC_TRACK_PREFIX = "pat",
        e))(te || {}), ne = te, re = (e=>(e.NO_AVAILABLE_TRACKS = "no-available-tracks",
        e.UNKNOWN_ERROR = "unknown-error",
        e))(re || {}), ie = re;
        var oe = (e=>(e.CREATOR = "CREATOR",
        e.ADMIN = "ADMIN",
        e))(oe || {})
          , ae = oe;
        function se(e, t) {
            if (e.length !== t.length)
                return !1;
            for (let n of e)
                if (!t.includes(n))
                    return !1;
            return !0
        }
        var ce = (e=>(e.USER = "USER",
        e.GROUP = "GROUP",
        e))(ce || {})
          , _e = ce
          , le = 2097152
          , ue = 102400
          , de = "_okcls_logs_session_";
        function pe() {
            return `${de}${Date.now()}`
        }
        function he(e) {
            return new Blob([e]).size
        }
        function me(e) {
            try {
                window.localStorage.removeItem(e)
            } catch (e) {
                console.error("Failed to remove log from storage", e)
            }
        }
        function fe() {
            let e = we.toString();
            if (!ye.available || !e)
                return;
            let t = he(e);
            ye.cleanup(t);
            try {
                window.localStorage.setItem(be, e)
            } catch (e) {
                return console.warn("Failed to write log to storage", e),
                ye.storageSize = ye.size + t,
                ye.cleanup(ue + t),
                ye.available >= ue + t ? void fe() : t > ue ? (we.bisect(),
                void fe()) : void (ye.storageSize = 0)
            }
            t > 524288 && (ye.add(be, t),
            be = pe(),
            we.clear(),
            ye.cleanup(ue))
        }
        function ge() {
            !ye.available || !we.length || fe()
        }
        function ve(e=!1) {
            let t = [];
            try {
                let e = window.localStorage;
                for (let n of ye.items) {
                    let r = e.getItem(n.key);
                    t.push(r)
                }
                let n = we.toString();
                n && t.push(n)
            } catch (e) {
                console.error("Storage is blocked", e)
            }
            let n = `[${t.join(",")}]`;
            if (e)
                return n;
            let r = `logs_${Date.now()}.json`;
            return function(e, t) {
                let n = document.createElement("a")
                  , r = new Blob([e],{
                    type: "text/json"
                });
                n.href = URL.createObjectURL(r),
                n.download = t,
                n.click()
            }(n, r),
            r
        }
        function Ee() {
            ye || (ye = new class {
                constructor() {
                    this._items = [],
                    this._itemsSize = 0,
                    this._storageSize = le;
                    try {
                        let e = window.localStorage;
                        for (let t of Object.keys(e)) {
                            if (0 !== t.indexOf(de))
                                continue;
                            let n = e.getItem(t);
                            if (!n) {
                                me(t);
                                continue
                            }
                            let r = he(n);
                            this.add(t, r)
                        }
                    } catch (e) {
                        console.error("Storage is blocked", e),
                        this._storageSize = 0
                    }
                    this._items.sort(((e,t)=>e.date - t.date)),
                    this.cleanup(ue)
                }
                get size() {
                    return this._itemsSize
                }
                get length() {
                    return this._items.length
                }
                get available() {
                    return Math.max(this._storageSize - this._itemsSize, 0)
                }
                get items() {
                    return this._items
                }
                set storageSize(e) {
                    this._storageSize = e
                }
                add(e, t) {
                    let n = parseInt(e.replace(de, ""), 10);
                    this._itemsSize += t,
                    this._items.push({
                        key: e,
                        size: t,
                        date: n
                    })
                }
                deleteOldestItem() {
                    let e = this._items.shift();
                    e && (me(e.key),
                    this._itemsSize -= e.size)
                }
                cleanup(e) {
                    for (; this.length && (this.size > le || this.length > 4 || this.size + e > this.available); )
                        this.deleteOldestItem()
                }
            }
            ,
            we = new class {
                constructor() {
                    this._items = []
                }
                get length() {
                    return this._items.length
                }
                push(e) {
                    this._items.push(e)
                }
                shift() {
                    return this._items.shift() || null
                }
                bisect() {
                    let e = this.length > 1 ? Math.floor(this.length / 2) : 1;
                    this._items = this._items.slice(e)
                }
                clear() {
                    this._items = []
                }
                toString() {
                    return this._items.length ? JSON.stringify(this._items, ((e,t)=>t instanceof Error ? String(t) : t)) : ""
                }
            }
            ,
            be = pe(),
            window.addEventListener("beforeunload", ge))
        }
        var ye, we, be, Ce = null;
        window.__VKCallsSDKLogs__ = (e=!1)=>(ye || Ee(),
        ge(),
        ve(e));
        var Te, De, Ae = ((Te = Ae || {}).INIT = "init",
        Te.READY = "ready",
        Te.FRAME = "frame",
        Te.ERROR = "error",
        Te.DEBUG = "debug",
        Te.LOG_ERROR = "log_error",
        Te), Se = class extends E {
            constructor(e, t) {
                super(),
                this._batchInterval = 3e3,
                this._batch = [],
                this._batchTimeout = null,
                this._api = e,
                this._externalLogger = t
            }
            _send(e) {
                this._api.log(e)
            }
            _sendBatch() {
                this._stopTimeout(),
                this._batch.length > 0 && (this._send(this._batch),
                this._batch = [],
                this._startTimeout())
            }
            _startTimeout() {
                this._batchTimeout = window.setTimeout((()=>this._sendBatch()), this._batchInterval)
            }
            _stopTimeout() {
                this._batchTimeout && (clearTimeout(this._batchTimeout),
                this._batchTimeout = null)
            }
            _onUnload() {
                this._sendBatch(),
                this._stopTimeout()
            }
            log(e, t, n=!1) {
                let r = {};
                void 0 !== t && (r.param = t),
                this._logInternal(e, r, n),
                this._externalLogger && this._externalLogger.log(e, t, n)
            }
            logCustom(e, t, n=!1) {
                this._logInternal(e, t, n)
            }
            _logInternal(e, t, n) {
                let r = {
                    type: 1,
                    time: 0,
                    operation: e,
                    timestamp: Date.now(),
                    custom: t,
                    uid: this._api.getUserId()
                };
                this._batch.push(r),
                (n || !this._batchTimeout) && this._sendBatch()
            }
            destroy() {
                this._sendBatch(),
                this._stopTimeout(),
                this._externalLogger && this._externalLogger.destroy()
            }
            static create(e, t) {
                Se._instance || (Se._instance = new Se(e,t))
            }
            static log(e, t, n=!1) {
                Se._instance && Se._instance.log(e, t, n)
            }
            static logCustom(e, t, n=!1) {
                Se._instance && Se._instance.logCustom(e, t, n)
            }
            static destroy() {
                Se._instance && Se._instance.destroy(),
                Se._instance = null
            }
        }
        , Pe = class {
            constructor() {
                this._worker = null
            }
            _createWorker(e, t) {
                return g(this, arguments, (function*(e, t, n=[], r={}, i=[]) {
                    return new Promise(((o,a)=>{
                        let s = n.join(",")
                          , c = new Blob([e, `exports.default(${s});`],{
                            type: "application/javascript; charset=utf-8"
                        })
                          , _ = window.URL.createObjectURL(c);
                        this._worker = new Worker(_),
                        this._worker.onmessage = e=>{
                            switch (e.data.type) {
                            case Ae.READY:
                                o();
                                break;
                            case Ae.ERROR:
                                a(e.data.error);
                                break;
                            case Ae.FRAME:
                                t(e.data);
                                break;
                            case Ae.DEBUG:
                                Yt.debug(e.data.message);
                                break;
                            case Ae.LOG_ERROR:
                                Se.log(ee.ERROR, e.data.message)
                            }
                        }
                        ,
                        this._sendToWorker(Ae.INIT, r, i)
                    }
                    ))
                }
                ))
            }
            _removeWorker() {
                var e;
                null == (e = this._worker) || e.terminate(),
                this._worker = null
            }
            _sendToWorker(e, t={}, n=[]) {
                var r;
                null == (r = this._worker) || r.postMessage(Object.assign({
                    type: e
                }, t), n)
            }
            static isBrowserSupported() {
                throw new Error("Not implemented")
            }
        }
        , Oe = class extends Pe {
            init(e) {
                return g(this, null, (function*() {
                    Yt.debug("LibVPxDecoder started"),
                    yield this._createWorker('var exports=(()=>{var y=Object.defineProperty;var E=a=>y(a,"__esModule",{value:!0});var M=(a,p)=>{E(a);for(var e in p)y(a,e,{get:p[e],enumerable:!0})};var D={};M(D,{default:()=>V});var t=(s=>(s.INIT="init",s.READY="ready",s.FRAME="frame",s.ERROR="error",s.DEBUG="debug",s.LOG_ERROR="log_error",s))(t||{});var V=(a,p)=>{let e=null,n=null,g=!0;function b(){return a({locateFile:p}).then(r=>n=r)}function s(r,m,l,R,x){if(!n){self.postMessage({type:t.LOG_ERROR,message:"decoder-init-fail-libvpx"}),self.postMessage({type:t.FRAME,error:"Fatal initialization error"});return}if(g!==l&&(g=l,e&&(e=null,self.postMessage({type:t.DEBUG,message:`LibVPxDecoder codec changed to ${l?"VP9":"VP8"} - reinitialize`}))),!e&&(self.postMessage({type:t.DEBUG,message:`LibVPxDecoder codec ${l?"VP9":"VP8"}`}),e=new n.VpxDecoder,e.debug(x),!e.init(l?n.VpxType.VP9:n.VpxType.VP8))){e=null,self.postMessage({type:t.FRAME,error:"Decoder failed to create"});return}try{e.allocateBuffer(m.byteLength).set(new Uint8Array(m))}catch(o){self.postMessage({type:t.DEBUG,message:o}),e=null,self.postMessage({type:t.FRAME,error:String(o)});return}if(!(e.decode()&&e.nextImage())){self.postMessage({type:t.FRAME,error:"Decode failed"});return}let d=e.getImageBuffer();if(!d){self.postMessage({type:t.FRAME,error:"No decoded data"});return}let c=e.getImageWidth(),f=e.getImageHeight();e.nextImage()&&(self.postMessage({type:t.DEBUG,message:"LibVPxDecoder dropped frame"}),self.postMessage({type:t.LOG_ERROR,message:"LibVPxDecoder-drop"}));let i=new Uint8ClampedArray(d.byteLength);if(i.set(d),R){let o=new ImageData(i,c,f);createImageBitmap(o,0,0,c,f).then(u=>{self.postMessage({type:t.FRAME,data:u},[u]),u.close()})}else self.postMessage({type:t.FRAME,data:i.buffer,width:c,height:f},[i.buffer])}b().then(()=>{self.onmessage=r=>{switch(r.data.type){case t.FRAME:s(r.data.timestamp,r.data.data,r.data.isVP9,r.data.useImageBitmap,r.data.debug);break}},self.postMessage({type:t.READY})}).catch(r=>{self.postMessage({type:t.ERROR,error:String(r)})})};return D;})();\n', (t=>{
                        if (t.error)
                            Yt.warn("LibVPxDecoder", t.error);
                        else if (t.data instanceof ArrayBuffer) {
                            let n = new ImageData(new Uint8ClampedArray(t.data),t.width,t.height);
                            e(n)
                        } else
                            e(t.data)
                    }
                    ), [s(), s().getUrl])
                }
                ))
            }
            decodeFrame(e, t, n, r) {
                let i = "ImageBitmap"in window;
                this._sendToWorker(Ae.FRAME, {
                    timestamp: e,
                    data: t.buffer,
                    isVP9: n,
                    keyFrame: r,
                    useImageBitmap: i,
                    debug: Yt.enabled()
                }, [t.buffer])
            }
            destroy() {
                this._removeWorker(),
                Yt.debug("LibVPxDecoder destroyed")
            }
            static isBrowserSupported() {
                return "WebAssembly"in window && "Worker"in window
            }
        }
        , Ie = class extends Pe {
            init(e) {
                return g(this, null, (function*() {
                    Yt.debug("WebCodecsDecoder started"),
                    yield this._createWorker('var exports=(()=>{var l=Object.defineProperty;var f=e=>l(e,"__esModule",{value:!0});var E=(e,d)=>{f(e);for(var a in d)l(e,a,{get:d[a],enumerable:!0})};var y={};E(y,{default:()=>g});var c=(a=>(a.VP9="vp09.00.50.08",a.VP8="vp8",a))(c||{}),o=(t=>(t.INIT="init",t.READY="ready",t.FRAME="frame",t.ERROR="error",t.DEBUG="debug",t.LOG_ERROR="log_error",t))(o||{});var g=()=>{let e=null,d=!0;function a(){self.postMessage({type:o.READY})}function p(r,m,t,n=!1){if(!e||d!==t){if(!n){self.postMessage({type:o.DEBUG,message:"WebCodecsDecoder dropped frame - waiting for keyframe"});return}d=t,e?self.postMessage({type:o.DEBUG,message:`WebCodecsDecoder codec changed to ${t?"VP9":"VP8"}`}):(self.postMessage({type:o.DEBUG,message:`WebCodecsDecoder codec ${t?"VP9":"VP8"}`}),e=new VideoDecoder({output:s=>{("createImageBitmap"in s?s.createImageBitmap():createImageBitmap(s)).then(i=>{self.postMessage({type:o.FRAME,data:i}),i.close()}).finally(()=>s.close())},error:s=>{e&&e.state!=="closed"&&e.close(),e=null,self.postMessage({type:o.FRAME,error:"WebCodecsDecoder failed, reinitialize"})}})),e.configure({codec:t?c.VP9:c.VP8})}let u=new EncodedVideoChunk({type:n?"key":"delta",timestamp:r,data:m});e.decode(u)}self.onmessage=r=>{switch(r.data.type){case o.INIT:a();break;case o.FRAME:p(r.data.timestamp,r.data.data,r.data.isVP9,r.data.keyFrame);break}}};return y;})();\n', (t=>{
                        t.error ? Yt.warn("WebCodecsDecoder", t.error) : e(t.data)
                    }
                    ))
                }
                ))
            }
            decodeFrame(e, t, n, r=!1) {
                this._sendToWorker(Ae.FRAME, {
                    timestamp: e,
                    data: t.buffer,
                    isVP9: n,
                    keyFrame: r
                }, [t.buffer])
            }
            destroy() {
                this._removeWorker(),
                Yt.debug("WebCodecsDecoder destroyed")
            }
            static isBrowserSupported() {
                return "VideoDecoder"in window && "Worker"in window && "VideoFrame"in window && "ImageBitmap"in window && "createImageBitmap"in window
            }
        }
        , Me = "_okcls_", Re = (()=>{
            try {
                let e = Date.now().toString()
                  , t = window.localStorage
                  , n = !1;
                return t.setItem(e, e),
                n = t.getItem(e) === e,
                t.removeItem(e),
                n ? t : null
            } catch (e) {
                return null
            }
        }
        )();
        (e=>{
            e.get = function(e) {
                return function(e) {
                    let t = Re ? Re.getItem(Me + e) : null;
                    if (null === t)
                        return null;
                    try {
                        return JSON.parse(t)
                    } catch (e) {
                        return null
                    }
                }(e) || null
            }
            ,
            e.set = function(e, t) {
                !function(e, t) {
                    try {
                        Re && Re.setItem(Me + e, JSON.stringify(t))
                    } catch (e) {}
                }(e, t)
            }
            ,
            e.remove = function(e) {
                !function(e) {
                    Re && Re.removeItem(Me + e)
                }(e)
            }
        }
        )(De || (De = {}));
        var Le = De;
        function ke(e, t) {
            if (e.isAudioEnabled !== t.isAudioEnabled || e.isVideoEnabled !== t.isVideoEnabled || e.isScreenSharingEnabled !== t.isScreenSharingEnabled || e.videoStreams.length !== t.videoStreams.length)
                return !1;
            for (let n of e.videoStreams)
                if (!t.videoStreams.find((e=>e.id === n.id && e.source === n.source)))
                    return !1;
            return !0
        }
        function Be(e) {
            return Object.assign({
                isAudioEnabled: !1,
                isVideoEnabled: !1,
                isScreenSharingEnabled: !1,
                videoStreams: []
            }, e || {})
        }
        var xe, Ne = e=>e.stop(), Ue = e=>e.getVideoTracks().forEach(Ne), We = class extends Error {
            constructor(e, t) {
                super(),
                this.name = "HangupReason",
                this.code = t && t.code || 0,
                this.remote = t && t.remote || !1,
                Object.values(F).indexOf(e) > -1 ? this.hangup = e : this.error = e;
                let n = [];
                this.error && n.push("error"),
                this.remote && n.push("remote"),
                this.code && n.push(`code: ${this.code}`),
                t && t.message && n.push(`message: '${t.message}'`),
                this.message = e + (n.length ? ` (${n.join(", ")})` : ""),
                Error.captureStackTrace && Error.captureStackTrace(this, We)
            }
        }
        , Fe = (e=>(e.SOURCE_CHANGED = "SOURCE_CHANGED",
        e.TRACK_REPLACED = "TRACK_REPLACED",
        e.SCREEN_STATUS = "SCREEN_STATUS",
        e))(Fe || {}), Ke = (e=>(e.audio = "audio",
        e.video = "video",
        e.screen = "screen",
        e))(Ke || {}), Ve = class extends y {
            constructor() {
                super(),
                this._stream = null,
                this._trackVideoStreamBackup = null,
                this._screenTrack = null,
                this._sendVideoTrack = null,
                this._mediaSettings = Be(),
                this._videoStatusOnScreenCapturingEnabled = !1,
                this._effect = null,
                this._initDeviceChangeListener()
            }
            request() {
                return g(this, arguments, (function*(e=[V.AUDIO], t=!0) {
                    if (this._stream)
                        return;
                    let n = e.includes(V.VIDEO)
                      , r = e.includes(V.AUDIO);
                    if (!wt.isBrowserSupported())
                        throw new We(U.UNSUPPORTED);
                    try {
                        this._stream = yield wt.getUserMedia(n, r, t),
                        this._mediaSettings.isVideoEnabled = n && this._stream.getVideoTracks().filter((e=>e.enabled)).length > 0 || !1,
                        this._mediaSettings.isAudioEnabled = r && this._stream.getAudioTracks().filter((e=>e.enabled)).length > 0 || !1
                    } catch (e) {
                        throw new We(e)
                    }
                }
                ))
            }
            getStream() {
                return this._stream
            }
            getScreenTrack() {
                return this._screenTrack
            }
            getSendVideoTrack(e=!1) {
                return this._sendVideoTrack && !e ? this._sendVideoTrack : this._stream ? this._stream.getVideoTracks()[0] : null
            }
            _getSendAudioTrack() {
                var e;
                return (null == (e = this._stream) ? void 0 : e.getAudioTracks()[0]) || null
            }
            addTrackToPeerConnection(e, t, n, r) {
                let i = this.getStream()
                  , o = this._getSendAudioTrack()
                  , a = this.getSendVideoTrack(n);
                if (!i || !o && !a && !t)
                    throw new Error("No local stream found");
                if (o && !t) {
                    if (r) {
                        let {codecs: t} = RTCRtpSender.getCapabilities("audio")
                          , n = "audio/red"
                          , r = 48e3
                          , i = t.findIndex((e=>e.mimeType === n && e.clockRate === r));
                        if (i >= 0) {
                            let n = [];
                            n.push(t[i]);
                            for (let e = 0; e < t.length; e++)
                                e !== i && n.push(t[e]);
                            e.getTransceivers().forEach((e=>e.setCodecPreferences(n)))
                        }
                    }
                    e.addTrack(o, i)
                }
                a && !t && e.addTrack(a, i)
            }
            getMediaSettings() {
                return this._mediaSettings
            }
            changeDevice(e) {
                return g(this, null, (function*() {
                    switch (e) {
                    case "videoinput":
                        return this._changeVideoInput();
                    case "audioinput":
                        return this._changeAudioInput();
                    default:
                        return Promise.reject()
                    }
                }
                ))
            }
            setVideoStream(e, t) {
                return g(this, null, (function*() {
                    return t ? this._changeScreen(e) : this._changeVideoInput(e)
                }
                ))
            }
            _initDeviceChangeListener() {
                if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices || !navigator.mediaDevices.addEventListener)
                    return;
                let e = !1
                  , t = !1
                  , n = Ye.throttle((()=>{
                    t && this._changeVideoInput().catch((()=>{}
                    )),
                    e && this._changeAudioInput().catch((()=>{}
                    )),
                    e = !1,
                    t = !1
                }
                ), 1e3);
                this._onDeviceChange = ()=>g(this, null, (function*() {
                    if (!this._stream)
                        return;
                    let r = this._stream.getAudioTracks()[0]
                      , i = r && r.enabled && r.getSettings()
                      , o = i && i.deviceId
                      , a = this._stream.getVideoTracks()[0]
                      , s = a && a.enabled && a.getSettings()
                      , c = s && s.deviceId;
                    if (!o && !c)
                        return;
                    let _ = yield navigator.mediaDevices.enumerateDevices();
                    !e && o && (e = !_.find((e=>e.deviceId === o))),
                    !t && c && (t = !_.find((e=>e.deviceId === c))),
                    n()
                }
                )),
                navigator.mediaDevices.addEventListener("devicechange", this._onDeviceChange)
            }
            _destroyDeviceChangeListener() {
                this._onDeviceChange && navigator.mediaDevices.removeEventListener("devicechange", this._onDeviceChange)
            }
            _changeVideoInput(e=null) {
                return g(this, null, (function*() {
                    try {
                        let t = e ? "stream" : "video"
                          , n = e || (yield wt.getUserVideo(void 0, !!this._effect));
                        if (this._stream) {
                            kt.consumerScreenTrack || this._disableScreenCapture();
                            let e = this._getVideoEffectTrack(n)
                              , r = yield this._videoEffect(this._effect, e);
                            this._stopLocalTrack("video"),
                            Se.log(ee.DEVICE_CHANGED, t),
                            Yt.log("Video stream changed"),
                            yield this._replaceLocalTrack(r),
                            this._mediaSettings.isVideoEnabled = !0,
                            this._triggerEvent("SOURCE_CHANGED", {
                                kind: "video",
                                mediaSettings: this._mediaSettings
                            })
                        } else
                            n.getTracks().forEach((e=>e.stop()))
                    } catch (e) {
                        throw Se.log(ee.ERROR, "change_video"),
                        Yt.warn("Camera change failed", e),
                        e
                    }
                }
                ))
            }
            _getVideoEffectTrack(e) {
                let t;
                return this._effect ? (this._trackVideoStreamBackup || (this._trackVideoStreamBackup = e.getVideoTracks()[0].clone()),
                t = this._trackVideoStreamBackup.clone(),
                Ue(e)) : this._trackVideoStreamBackup ? (t = this._trackVideoStreamBackup.clone(),
                this._stopAndRemoveTrackVideoStreamBackup(),
                Ue(e)) : t = e.getVideoTracks()[0],
                t
            }
            setAudioStream(e) {
                return g(this, null, (function*() {
                    return this._changeAudioInput(e)
                }
                ))
            }
            _changeAudioInput(e=null) {
                return g(this, null, (function*() {
                    try {
                        if (e = e || (yield wt.getUserAudio()),
                        this._stream) {
                            let t = e.getAudioTracks()[0];
                            this._stopLocalTrack("audio"),
                            Se.log(ee.DEVICE_CHANGED, "audio"),
                            Yt.log("Audio stream changed"),
                            yield this._replaceLocalTrack(t),
                            this._mediaSettings.isAudioEnabled = !0,
                            this._triggerEvent("SOURCE_CHANGED", {
                                kind: "audio",
                                mediaSettings: this._mediaSettings
                            })
                        } else
                            e.getTracks().forEach((e=>e.stop()))
                    } catch (e) {
                        throw Se.log(ee.ERROR, "change_audio"),
                        Yt.error("Microphone change failed", e),
                        e
                    }
                }
                ))
            }
            _changeScreen(e) {
                return g(this, null, (function*() {
                    try {
                        if ((e = e || (yield wt.getScreenMedia())).addEventListener("inactive", (()=>{
                            this._mediaSettings.isScreenSharingEnabled && this.toggleScreenCapturing(!1)
                        }
                        ), !1),
                        this._stream) {
                            let t = e.getVideoTracks()[0]
                              , n = kt.consumerScreenTrack ? t : yield this._videoEffect(null, t);
                            Se.log(ee.DEVICE_CHANGED, "screen"),
                            Yt.log("Screen capturing started"),
                            this._screenTrack = n,
                            this._mediaSettings.isScreenSharingEnabled = !0,
                            kt.consumerScreenTrack || (this._videoStatusOnScreenCapturingEnabled = this._mediaSettings.isVideoEnabled,
                            this._mediaSettings.isVideoEnabled = !0,
                            this._stopLocalTrack("video"),
                            this._sendVideoTrack = kt.consumerScreenDataChannel ? wt.getBlackMediaTrack(kt.videoMinWidth, kt.videoMinHeight) : n,
                            yield this._replaceLocalTrack(n, this._sendVideoTrack)),
                            this._triggerEvent("SCREEN_STATUS", {
                                track: n,
                                mediaSettings: this._mediaSettings
                            }),
                            this._triggerEvent("SOURCE_CHANGED", {
                                kind: "screen",
                                mediaSettings: this._mediaSettings
                            })
                        } else
                            e.getTracks().forEach((e=>e.stop()))
                    } catch (e) {
                        throw Se.log(ee.ERROR, "screen"),
                        Yt.warn("Screen capturing failed", e),
                        e
                    }
                }
                ))
            }
            _disableScreenCapture() {
                this._sendVideoTrack && (this._sendVideoTrack.stop(),
                this._sendVideoTrack = null),
                this._screenTrack && (this._screenTrack.stop(),
                this._screenTrack = null),
                this._mediaSettings.isScreenSharingEnabled && (this._mediaSettings.isScreenSharingEnabled = !1,
                this._triggerEvent("SCREEN_STATUS", {
                    mediaSettings: this._mediaSettings
                }),
                this._triggerEvent("SOURCE_CHANGED", {
                    kind: "screen",
                    mediaSettings: this._mediaSettings
                }))
            }
            _replaceLocalTrack(e, t) {
                return g(this, null, (function*() {
                    !this._stream || this._stream.getTracks().forEach((n=>{
                        var r, i;
                        n.kind === e.kind && (null == (r = this._stream) || r.removeTrack(n),
                        null == (i = this._stream) || i.addTrack(e),
                        this._triggerEvent("TRACK_REPLACED", e, t))
                    }
                    ))
                }
                ))
            }
            _stopLocalTrack(e) {
                this._stream && this._stream.getTracks().forEach((t=>{
                    t.kind === e && t.stop()
                }
                ))
            }
            _videoEffect(e, t) {
                return g(this, null, (function*() {
                    if (!kt.videoEffects)
                        return t;
                    try {
                        return Se.log(ee.DEVICE_CHANGED, `effect_${e}`),
                        kt.videoEffects.setEffect(e, t)
                    } catch (e) {
                        return Yt.warn("Video effect failed", e),
                        t
                    }
                }
                ))
            }
            _stopAndRemoveTrackVideoStreamBackup() {
                this._trackVideoStreamBackup && (this._trackVideoStreamBackup.stop(),
                this._trackVideoStreamBackup = null)
            }
            destroy() {
                this._destroyDeviceChangeListener(),
                kt.videoEffects && (this._effect = null,
                kt.videoEffects.destroy()),
                this._stream && (this._stream.getTracks().forEach(Ne),
                this._stream = null),
                this._stopAndRemoveTrackVideoStreamBackup(),
                this._disableScreenCapture()
            }
            toggleScreenCapturing(e) {
                return g(this, null, (function*() {
                    return e ? this._changeScreen() : kt.consumerScreenTrack ? this._disableScreenCapture() : this._videoStatusOnScreenCapturingEnabled ? this._changeVideoInput() : this.toggleVideo(!1)
                }
                ))
            }
            toggleVideo(e) {
                return g(this, null, (function*() {
                    if (!this._stream)
                        return;
                    let t;
                    if (kt.consumerScreenTrack || this._disableScreenCapture(),
                    e) {
                        let e = yield wt.getUserVideo(void 0, !!this._effect);
                        t = this._getVideoEffectTrack(e),
                        t = yield this._videoEffect(this._effect, t)
                    } else
                        t = wt.getBlackMediaTrack(kt.videoMinWidth, kt.videoMinHeight),
                        t = yield this._videoEffect(null, t),
                        this._stopAndRemoveTrackVideoStreamBackup();
                    this._stopLocalTrack("video"),
                    yield this._replaceLocalTrack(t),
                    this._mediaSettings.isVideoEnabled = e,
                    this._triggerEvent("SOURCE_CHANGED", {
                        kind: "video",
                        mediaSettings: this._mediaSettings
                    })
                }
                ))
            }
            toggleAudio(e) {
                return g(this, null, (function*() {
                    if (!this._stream)
                        return;
                    let t;
                    t = e ? (yield wt.getUserAudio()).getAudioTracks()[0] : wt.getSilentMediaTrack(),
                    this._stopLocalTrack("audio"),
                    yield this._replaceLocalTrack(t),
                    this._mediaSettings.isAudioEnabled = e,
                    this._triggerEvent("SOURCE_CHANGED", {
                        kind: "audio",
                        mediaSettings: this._mediaSettings
                    })
                }
                ))
            }
            setResolution(e, t) {
                return g(this, null, (function*() {
                    if (!kt.consumerScreenTrack && this._mediaSettings.isScreenSharingEnabled)
                        return;
                    if (!this._stream)
                        throw new Error("Local stream not found");
                    let n = this._stream.getVideoTracks()[0];
                    if (!n)
                        throw new Error("Local video track not found");
                    if (n.enabled) {
                        if (!this._effect)
                            return n.applyConstraints({
                                width: {
                                    ideal: e
                                },
                                height: {
                                    ideal: t
                                }
                            });
                        yield this.toggleVideo(!1),
                        yield this.toggleVideo(!0)
                    }
                }
                ))
            }
            updateNoiseSuppression() {
                return g(this, null, (function*() {
                    if (!this._stream || !this._mediaSettings.isAudioEnabled)
                        return;
                    let e = this._stream.getAudioTracks()[0];
                    if (!e)
                        throw new Error("Local audio track not found");
                    return e.enabled ? e.applyConstraints({
                        noiseSuppression: kt.noiseSuppression
                    }) : void 0
                }
                ))
            }
            videoEffect(e) {
                return g(this, null, (function*() {
                    if (!kt.videoEffects)
                        throw new Error("Video Effects library is not set");
                    if (!kt.consumerScreenTrack && this._mediaSettings.isScreenSharingEnabled)
                        throw new Error("Can't apply effect to screensharing");
                    if (this._mediaSettings.isVideoEnabled)
                        return this._stream && e !== this._effect ? (this._effect = e,
                        this._changeVideoInput(this._stream)) : void 0;
                    this._effect = e
                }
                ))
            }
        }
        , He = ":";
        (e=>{
            e.patchSDP = function(e, t, n, r, i=!1, o=!1) {
                let a = /[\r\n]+/
                  , s = "\r\n";
                if (!(t || n || r || o))
                    return i ? c(e.split(a)).join(s) : e;
                function c(e) {
                    let t = e.findIndex((e=>e.startsWith("a=rtcp-fb:111")));
                    return ~t && (e[t] = e[t] + s + ["a=rtcp-fb:111 nack", "a=rtcp-fb:111 nack pli"].join(s)),
                    e
                }
                function _(e, t, n) {
                    let r, i = e.split(" "), o = i.slice(0, 3);
                    for (r = 3; r < i.length; r++)
                        n.includes(i[r]) && o.push(i[r]);
                    for (r = 3; r < i.length; r++)
                        !n.includes(i[r]) && !t.includes(i[r]) && o.push(i[r]);
                    return o.join(" ")
                }
                function l(e, t) {
                    let n, r = new RegExp("a=rtpmap:(\\d+) ([a-zA-Z0-9-]+)\\/\\d+"), i = [];
                    for (n = 0; n < e.length; ++n) {
                        let o = e[n].match(r);
                        o && 3 === o.length && o[2] === t && i.push(o[1])
                    }
                    return i
                }
                function u(e, t, n, r) {
                    let i, o = "m=" + t;
                    for (i = 0; i < e.length; ++i)
                        if (e[i].startsWith(o)) {
                            e[i] = _(e[i], n, r);
                            break
                        }
                }
                let d = []
                  , p = e.split(a);
                (n || t) && (d = l(p, "H264"));
                let h = [];
                r && (h = l(p, "VP9"));
                let m = [];
                if (o && (m = l(p, "red")),
                n) {
                    let e, t = d.slice(0), n = new RegExp("a=fmtp:(\\d+) apt=(\\d+)");
                    for (e = 0; e < p.length; ++e) {
                        let r = p[e].match(n);
                        r && 3 === r.length && t.includes(r[2]) && t.push(r[1])
                    }
                    let r = new RegExp("a=(rtpmap|rtcp-fb|fmtp):(\\d+) .*");
                    for (e = p.length; e--; ) {
                        let n = p[e].match(r);
                        n && 3 === n.length && t.includes(n[2]) && p.splice(e, 1)
                    }
                    u(p, "video", t, [])
                } else
                    t && u(p, "video", [], d);
                return r && u(p, "video", [], h),
                o && m.length > 0 && u(p, "audio", [], m),
                i && c(p),
                p.join(s)
            }
            ,
            e.getPeerIdString = function(e) {
                return e ? `${e.type || "WEB_SOCKET"}_${e.id}` : "_"
            }
            ,
            e.comparePeerId = function(e, t) {
                return e && e.id === t.id && (e.type || "WEB_SOCKET") === (t.type || "WEB_SOCKET")
            }
            ,
            e.getPeerConnectionHostInfo = function(e) {
                return g(this, null, (function*() {
                    return e && e.getStats ? e.getStats(null).then((e=>{
                        let t = null
                          , n = null;
                        if (e.forEach((t=>{
                            "transport" === t.type && t.selectedCandidatePairId ? n = e.get(t.selectedCandidatePairId) : "candidate-pair" === t.type && "succeeded" === t.state && !n && (!t.hasOwnProperty("selected") || t.selected) && (n = t)
                        }
                        )),
                        n && n.localCandidateId) {
                            let r = e.get(n.localCandidateId);
                            r && (t = {
                                type: r.candidateType,
                                ip: r.ip || r.ipAddress,
                                port: r.port || r.portNumber
                            })
                        }
                        return t
                    }
                    )).catch((()=>null)) : Promise.resolve(null)
                }
                ))
            }
            ;
            let t = /^[0-9]+$/
              , n = /^([gu])([0-9]+)$/;
            function r(e, r) {
                let i = String(e);
                return n.test(i) ? (Yt.warn(`Already composite id [${e}] type supplied [${r}]`),
                i) : r === _e.GROUP ? "g" + i : r === _e.USER ? "u" + i : (Yt.warn(`Unknown type [${r}] for id [${e}]`),
                i.match(t) ? "u" + i : i)
            }
            function i(e, t, n) {
                return o(r(e, t), n)
            }
            function o(e, t) {
                return t ? e + He + "d" + t : e
            }
            function a(e) {
                return i(e.id, e.idType || _e.USER, e.deviceIdx || 0)
            }
            function s(e, t, n, r, i) {
                if (e && n && n.kind === Ke.video) {
                    let o = n.getSettings();
                    if (o) {
                        let a = e.maxBitrateK ? 1024 * e.maxBitrateK : null
                          , s = o.width
                          , c = o.height
                          , _ = s && c && e.maxDimension ? Math.max(1, Math.max(s, c) / e.maxDimension) : null
                          , l = e.maxFramerate ? e.maxFramerate : null
                          , u = e.degradationPreference ? e.degradationPreference : "balanced"
                          , d = r[n.id];
                        if (d && d.bitrate === a && d.scaleResolutionDownBy === _ && d.maxFramerate === l && d.degradationPreference === u)
                            return void (i[n.id] = d);
                        i[n.id] = {
                            bitrate: a,
                            scaleResolutionDownBy: _,
                            maxFramerate: l,
                            degradationPreference: u
                        };
                        let p = t.getParameters();
                        p.encodings || (p.encodings = [{}]),
                        p.encodings.forEach((e=>{
                            a ? e.maxBitrate = a : delete e.maxBitrate,
                            _ ? e.scaleResolutionDownBy = _ : delete e.scaleResolutionDownBy,
                            l ? e.maxFramerate = l : delete e.maxFramerate
                        }
                        )),
                        p.degradationPreference = u,
                        t.setParameters(p)
                    }
                }
            }
            e.composeUserId = r,
            e.composeParticipantId = i,
            e.compose = o,
            e.composeId = a,
            e.composeMessageId = function(e) {
                return e.participant ? a(e.participant) : i(e.participantId, e.participantType || _e.USER, e.deviceIdx || 0)
            }
            ,
            e.decomposeId = function(e) {
                let t = String(e)
                  , r = t.match(n);
                return r ? {
                    id: Number(r[2]),
                    type: "g" === r[1] ? _e.GROUP : _e.USER
                } : (Yt.warn(`Unsupported compositeId [${e}]`),
                {
                    id: Number(t),
                    type: _e.USER
                })
            }
            ,
            e.decomposeParticipantId = function(e) {
                let t = e.split(":d");
                return {
                    compositeUserId: t[0],
                    deviceIdx: t.length > 1 ? parseInt(t[1], 10) : 0
                }
            }
            ,
            e.uuid = function() {
                var e, t;
                let n = null == (t = null == (e = window.crypto) ? void 0 : e.randomUUID) ? void 0 : t.call(e);
                if (n)
                    return n;
                let r, i, o = "0123456789abcdefghijklmnopqrstuvwxyz".split(""), a = new Array(36), s = 0;
                for (i = 0; i < 36; i++)
                    8 === i || 13 === i || 18 === i || 23 === i ? a[i] = "-" : 14 === i ? a[i] = "4" : (s <= 2 && (s = 33554432 + 16777216 * Math.random() | 0),
                    r = 15 & s,
                    s >>= 4,
                    a[i] = o[19 === i ? 3 & r | 8 : r]);
                return a.join("")
            }
            ,
            e.throttle = function(e, t) {
                let n;
                return function() {
                    let r = this
                      , i = arguments;
                    n && window.clearTimeout(n),
                    n = window.setTimeout((()=>{
                        e.apply(r, i)
                    }
                    ), t)
                }
            }
            ,
            e.sdpFingerprint = function(e) {
                if (!window.BigInt)
                    return null;
                let t = ""
                  , n = e.split("\n");
                for (let e of n)
                    if (e.startsWith("a=fingerprint")) {
                        let n = e.split(" ");
                        if (2 === n.length) {
                            t = n[1];
                            break
                        }
                    }
                if (!t)
                    return BigInt(-1);
                let r = t.split(":")
                  , i = BigInt(0);
                for (let e = Math.min(7, r.length - 1); e >= 0; e--) {
                    let t = BigInt(parseInt(r[e], 16));
                    i <<= BigInt(8),
                    i |= t
                }
                return BigInt.asIntN(64, i)
            }
            ,
            e.delay = function(e) {
                return g(this, null, (function*() {
                    return new Promise((t=>window.setTimeout(t, e)))
                }
                ))
            }
            ,
            e.applySettings = function(e, t, n) {
                let r = [];
                return e.getSenders().forEach((e=>s(t, e, e.track, n, r))),
                r
            }
            ,
            e.applyVideoTrackSettings = s,
            e.includesOneOf = function(e, t) {
                Array.isArray(t) || (t = [t]);
                for (let n of t)
                    if (e.includes(n))
                        return !0;
                return !1
            }
            ,
            e.mapParticipantState = function(e) {
                var t;
                return Object.entries((null == (t = e.participantState) ? void 0 : t.state) || {}).reduce(((t,[n,r])=>(e.participantState && (t[n] = {
                    ts: e.participantState.stateUpdateTs[n],
                    state: r
                }),
                t)), {})
            }
            ,
            e.mapSharedParticipants = function(e) {
                let t = e.map((e=>({
                    uid: e.externalId,
                    mediaSettings: e.mediaSettings,
                    status: e.status,
                    muteStates: e.muteStates,
                    unmuteOptions: e.unmuteOptions,
                    participantState: e.participantState
                })));
                return kt.filterObservers ? t.filter((e=>!e.uid.observer)) : t
            }
            ,
            e.isEqualParticipantState = function(e, t) {
                let n = Object.keys(e)
                  , r = Object.keys(t);
                if (n.length !== r.length)
                    return !1;
                for (let i of n)
                    if (!r.hasOwnProperty(i) || e[i].state !== t[i].state || e[i].ts !== t[i].ts)
                        return !1;
                return !0
            }
            ,
            e.isObjectsEquals = function(e, t) {
                let n = Object.keys(e)
                  , r = Object.keys(t);
                if (n.length !== r.length)
                    return !1;
                for (let r of n)
                    if (!t.hasOwnProperty(r) || e[r] !== t[r])
                        return !1;
                return !0
            }
            ,
            e.isArraysEquals = function(e, t) {
                if (e.length !== t.length)
                    return !1;
                for (let n of e)
                    if (t.indexOf(n) < 0)
                        return !1;
                return !0
            }
            ,
            e.isEmptyObject = function(e) {
                return !Object.keys(e).length
            }
        }
        )(xe || (xe = {}));
        var je, Ge, qe, $e, Ye = xe, ze = null, Xe = null, Qe = [], Je = [], Ze = [], et = null, tt = null, nt = null, rt = !1, it = !1, ot = !1, at = !1, st = null, ct = "", _t = [], lt = null, ut = navigator.appVersion, dt = navigator.appName, pt = navigator.userAgent, ht = (e=>(e.USER = "user",
        e.ENVIRONMENT = "environment",
        e.LEFT = "left",
        e.RIGHT = "right",
        e))(ht || {}), mt = class {
            constructor(e, t=!1, n=kt.videoMaxWidth, r=kt.videoMaxHeight) {
                let i = !1;
                if (e) {
                    let t;
                    i = {
                        noiseSuppression: kt.noiseSuppression,
                        echoCancellation: !0,
                        autoGainControl: !0
                    },
                    tt && (t = tt.deviceId),
                    "string" == typeof e && (t = e),
                    t && (i.deviceId = {
                        ideal: t
                    })
                }
                let o = !1;
                if (t) {
                    let e;
                    o = {
                        width: {
                            min: kt.videoMinWidth,
                            max: n,
                            ideal: n
                        },
                        height: {
                            min: kt.videoMinHeight,
                            max: r,
                            ideal: r
                        },
                        aspectRatio: {
                            ideal: kt.videoAspectRatio
                        },
                        frameRate: {
                            ideal: kt.videoFrameRate
                        }
                    },
                    et && (e = et.deviceId),
                    "string" == typeof t && (e = t),
                    e && (o.deviceId = {
                        ideal: e
                    }),
                    kt.videoFacingMode && (o.facingMode = {
                        ideal: kt.videoFacingMode
                    })
                }
                this.audio = i,
                this.video = o,
                this.needVideo = !!o
            }
            getNative() {
                return Object.assign({}, {
                    audio: this.audio,
                    video: this.video
                })
            }
            simplify() {
                return "object" == typeof this.video && (this.video.width || this.video.height ? (delete this.video.width,
                delete this.video.height) : this.video.aspectRatio ? delete this.video.aspectRatio : this.video.frameRate ? delete this.video.frameRate : (this.video.deviceId || this.video.facingMode) && (delete this.video.deviceId,
                delete this.video.facingMode)),
                "object" == typeof this.audio && (this.audio.echoCancellation || this.audio.autoGainControl || this.audio.noiseSuppression ? (delete this.audio.echoCancellation,
                delete this.audio.autoGainControl,
                delete this.audio.noiseSuppression) : this.audio.deviceId && delete this.audio.deviceId),
                !0 === this.video && !0 === this.audio ? this.video = !1 : !1 === this.video && !0 === this.audio ? (this.audio = !1,
                this.video = this.needVideo) : !0 === this.video && !1 === this.audio && (this.video = !1),
                this.video && !Object.keys(this.video).length && (this.video = !0),
                this.audio && !Object.keys(this.audio).length && (this.audio = !0),
                this
            }
            canSimplify() {
                let e = "object" == typeof this.video && (this.video.width || this.video.height || this.video.aspectRatio || this.video.frameRate || this.video.facingMode || this.video.deviceId) || this.video;
                return !!("object" == typeof this.audio && (this.audio.deviceId || this.audio.noiseSuppression || this.audio.echoCancellation || this.audio.autoGainControl) || this.audio || e)
            }
            isVideo() {
                return !!this.video
            }
            isAudio() {
                return !!this.audio
            }
        }
        , ft = class extends mt {
            constructor(e, t) {
                super(!1, !0),
                "object" == typeof this.video ? (delete this.video.deviceId,
                delete this.video.aspectRatio,
                delete this.video.frameRate,
                delete this.video.facingMode) : this.video = {},
                this.video.cursor = "motion",
                this.video.width = e,
                this.video.height = t,
                this.video.frameRate = kt.screenFrameRate
            }
        }
        ;
        function gt() {
            ze = null,
            vt().then((()=>jt.onDeviceChange()))
        }
        function vt() {
            return g(this, null, (function*() {
                return ze || (navigator.mediaDevices && navigator.mediaDevices.enumerateDevices ? (!Xe && navigator.mediaDevices.addEventListener && (Xe = Ye.throttle(gt, 1e3),
                navigator.mediaDevices.addEventListener("devicechange", Xe)),
                ze = navigator.mediaDevices.enumerateDevices().then((e=>{
                    Qe = e.filter((e=>"videoinput" === e.kind && (e.label && (rt = !0),
                    !0))),
                    Je = e.filter((e=>"audioinput" === e.kind && (e.label ? it = !0 : $e.isMobile() && "Firefox" === $e.browserName() && (it = rt),
                    !0))),
                    Ze = e.filter((e=>"audiooutput" === e.kind));
                    let t = Le.get("videoinput")
                      , n = Le.get("audioinput")
                      , r = Le.get("audiooutput");
                    return et = Qe.find((e=>e.deviceId === t)) || null,
                    tt = Je.find((e=>e.deviceId === n)) || null,
                    nt = Ze.find((e=>e.deviceId === r)) || null,
                    ze = Promise.resolve(e),
                    e
                }
                )).catch((()=>(ze = null,
                [])))) : [])
            }
            ))
        }
        function Et(e, t) {
            return g(this, null, (function*() {
                Yt.debug("Try to get media", e.getNative());
                let n = $e.hasPermissions(e.isVideo());
                !n && !t && jt.onPermissionsRequested();
                try {
                    let t = yield navigator.mediaDevices.getUserMedia(e.getNative());
                    return n || (yield function() {
                        return g(this, null, (function*() {
                            ze = null,
                            yield vt()
                        }
                        ))
                    }()),
                    t
                } catch (n) {
                    switch (n.name) {
                    case "PermissionDeniedError":
                    case "PermissionDismissedError":
                    case "NotAllowedError":
                    case "SecurityError":
                    case "DOMException":
                        t = e.isVideo() ? U.CAMERA_PERMISSION : U.MIC_PERMISSION;
                        break;
                    case "OverconstrainedError":
                    case "TypeError":
                    case "NotFoundError":
                        break;
                    case "AbortError":
                    case "NotReadableError":
                        t = e.isVideo() ? U.CAMERA_ACCESS : U.MIC_ACCESS
                    }
                    if (e.canSimplify())
                        return Et(e.simplify(), t);
                    let r = t || U.UNKNOWN;
                    throw jt.onPermissionsError(r),
                    r
                }
            }
            ))
        }
        function yt() {
            return _t.length || (_t = (()=>{
                let e, t = !1, n = 0, r = "0", i = pt.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
                if (/trident/i.test(i[1]))
                    return e = /\brv[ :]+(\d+)/g.exec(pt),
                    ["IE", e && e[1] || "Unknown", t, n, r];
                if ("Safari" === i[1]) {
                    if (e = pt.match(/\bEdge\/(\d+)/),
                    e)
                        return ["Edge", e[1] || "Unknown", t, n, r];
                    if (e = pt.match(/\bCriOS\/(\d+)/),
                    e)
                        return ["Chrome", e[1], !0, Number(e[1]), r];
                    if (e = pt.match(/\bFxiOS\/(\d+)/),
                    e)
                        return ["Firefox", e[1], !1, n, r];
                    if (e = pt.match(/\bYaBrowser\/(\d+)/),
                    e)
                        return ["Yandex", e[1], !1, n, r];
                    if (e = pt.match(/\bOPT\/(\d+)/),
                    e)
                        return ["Opera", e[1], !1, n, r]
                }
                if ("Chrome" === i[1]) {
                    if (t = !0,
                    n = Number(i[2]),
                    e = pt.match(/\bOPR\/(\d+)/),
                    e)
                        return ["Opera", e[1] || "Unknown", t, n, r];
                    if (e = pt.match(/\bYaBrowser\/(\d+)/),
                    e)
                        return ["Yandex", e[1] || "Unknown", t, n, r];
                    if (e = pt.match(/\bSferum\/((\d+)(?:\.\d+)*)/),
                    e)
                        return ["Sferum", e[1] || "Unknown", t, n, r];
                    if (e = pt.match(/\bEdge?\/(\d+)/),
                    e)
                        return ["Edge", e[1] || "Unknown", t, n, r];
                    if (void 0 !== window.opr && /^(.+\.)?ok.ru$/.test(window.location.host))
                        return ["Opera", "Hidden", t, n, r]
                }
                return e = pt.match(/version\/(\d+)(?:(?:\.)(\d+))?/i),
                e && void 0 !== e[2] && (r = e[2]),
                [i[2] ? i[1] : dt, e && e[1] || i[2] || ut, t, n, r]
            }
            )()),
            _t
        }
        (e=>{
            function t() {
                return Qe.length > 0
            }
            function n() {
                return Je.length > 0
            }
            function r() {
                return rt
            }
            function i() {
                return it
            }
            function o() {
                if (!qe || "ended" === qe.readyState) {
                    let e = _()
                      , t = e.createMediaStreamDestination()
                      , n = e.createGain();
                    n.gain.value = 1e-5,
                    n.connect(t),
                    n.connect(e.destination);
                    let r = e.createOscillator();
                    r.type = "sine",
                    r.frequency.value = 0,
                    r.connect(n),
                    r.start(),
                    qe = t.stream.getAudioTracks()[0]
                }
                return Object.assign(qe.clone(), {
                    enabled: !1
                })
            }
            function a(e=kt.videoMinWidth, t=kt.videoMinHeight) {
                return Ge || (Ge = document.createElement("canvas")).getContext("2d"),
                Ge.width = e,
                Ge.height = t,
                (!je || "ended" === je.readyState) && (je = Ge.captureStream(kt.videoFrameRate).getVideoTracks()[0]),
                Object.assign(je.clone(), {
                    enabled: !1
                })
            }
            function s() {
                return yt()[0]
            }
            function c() {
                return yt()[1]
            }
            function _() {
                return lt || (lt = new (window.AudioContext || window.webkitAudioContext)),
                lt
            }
            e.init = function() {
                return g(this, null, (function*() {
                    return yield function() {
                        return g(this, null, (function*() {
                            return $e.isBrowserSupported() ? new Promise((e=>{
                                (new window.RTCPeerConnection).createOffer({
                                    offerToReceiveVideo: !0
                                }).then((t=>{
                                    /^a=rtpmap:\d+ VP8\/\d+$/m.test(t.sdp) && (ot = !0),
                                    /^a=mid:0$/m.test(t.sdp) && (at = !0),
                                    e()
                                }
                                )).catch(e)
                            }
                            )) : Promise.resolve()
                        }
                        ))
                    }(),
                    vt()
                }
                ))
            }
            ,
            e.getCameras = function() {
                return Qe
            }
            ,
            e.getMicrophones = function() {
                return Je
            }
            ,
            e.getOutput = function() {
                return Ze
            }
            ,
            e.hasCamera = t,
            e.hasMicrophone = n,
            e.getSavedCamera = function() {
                return et
            }
            ,
            e.getSavedMicrophone = function() {
                return tt
            }
            ,
            e.getSavedOutput = function() {
                return nt
            }
            ,
            e.hasCameraPermission = r,
            e.hasMicrophonePermission = i,
            e.hasPermissions = function(e=!1) {
                return !!i() && (!t() || !e || r())
            }
            ,
            e.getUserMedia = function(e=!1, r=!0, i=!0) {
                return g(this, null, (function*() {
                    let s, c = n() && r, _ = t() && e;
                    if (c || _)
                        try {
                            s = yield Et(new mt(c,_))
                        } catch (e) {
                            s = new MediaStream
                        }
                    else
                        s = new MediaStream;
                    return !s.getVideoTracks().length && i && s.addTrack(a()),
                    !s.getAudioTracks().length && i && s.addTrack(o()),
                    s
                }
                ))
            }
            ,
            e.getScreenMedia = function() {
                return g(this, null, (function*() {
                    return function(e) {
                        return g(this, null, (function*() {
                            Yt.debug("Try to get screen", e.getNative());
                            try {
                                let t = yield navigator.mediaDevices.getDisplayMedia(e.getNative())
                                  , n = null == t ? void 0 : t.getVideoTracks()[0];
                                return n && (Yt.debug("Got display media track", n.id),
                                n.contentHint = "text"),
                                t
                            } catch (e) {
                                switch (e.name) {
                                case "PermissionDeniedError":
                                case "NotAllowedError":
                                case "SecurityError":
                                    throw U.SCREEN_PERMISSION;
                                default:
                                    throw U.SCREEN_ACCESS
                                }
                            }
                        }
                        ))
                    }(new ft(window.screen.width,window.screen.height))
                }
                ))
            }
            ,
            e.getUserVideo = function(e, t=!1) {
                return g(this, null, (function*() {
                    let n = t ? kt.videoEffectMaxWidth : kt.videoMaxWidth
                      , r = t ? kt.videoEffectMaxHeight : kt.videoMaxHeight;
                    return Et(new mt(!1,e || !0,n,r))
                }
                ))
            }
            ,
            e.getUserAudio = function(e) {
                return g(this, null, (function*() {
                    return Et(new mt(e || !0,!1))
                }
                ))
            }
            ,
            e.saveDeviceId = function(e, t) {
                return g(this, null, (function*() {
                    let n = (yield vt()).find((n=>n.kind === e && n.deviceId === t));
                    return n ? ("videoinput" === e ? et = n : "audioinput" === e ? tt = n : "audiooutput" === e && (nt = n),
                    Le.set(e, t),
                    n) : null
                }
                ))
            }
            ,
            e.getSilentMediaTrack = o,
            e.getBlackMediaTrack = a,
            e.isBrowserSupported = function() {
                if ("Edge" === s() && Number(c()) < 70)
                    return !1;
                try {
                    let e = window;
                    return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia && e.RTCPeerConnection && e.RTCIceCandidate && e.RTCSessionDescription && e.HTMLCanvasElement && e.HTMLCanvasElement.prototype.captureStream && e.RTCRtpSender && e.RTCRtpSender.prototype.replaceTrack && e.RTCRtpSender.prototype.getParameters && navigator.sendBeacon)
                } catch (e) {
                    return !1
                }
            }
            ,
            e.isScreenCapturingSupported = function() {
                return !!navigator.mediaDevices.getDisplayMedia
            }
            ,
            e.canVP8 = function() {
                return ot
            }
            ,
            e.isUnifiedPlan = function() {
                return at
            }
            ,
            e.isBrokenH264 = function() {
                let t = "Safari" === e.browserName() && "15" === e.browserVersion() && "1" === e.browserSubVersion()
                  , n = "Opera" === e.browserName() && "Windows" === e.os();
                return t || n
            }
            ,
            e.canPreferH264 = function() {
                return !(e.baseChromeVersion() && e.isMobile())
            }
            ,
            e.canPreferRed = function() {
                var e;
                return (null == (e = window.RTCRtpTransceiver) ? void 0 : e.prototype) && "setCodecPreferences"in window.RTCRtpTransceiver.prototype
            }
            ,
            e.os = function() {
                return ct || (ct = (()=>{
                    let e = {
                        Windows: /Win/,
                        Android: /Android/,
                        OpenBSD: /OpenBSD/,
                        SunOS: /SunOS/,
                        Linux: /(Linux|X11)/,
                        iPad: /(iPad)/,
                        iPhone: /(iPhone)/,
                        iPod: /(iPod)/,
                        MacOS: /(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/,
                        QNX: /QNX/,
                        UNIX: /UNIX/,
                        BeOS: /BeOS/,
                        OS2: /OS\/2/,
                        Bot: /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/
                    };
                    for (let t in e)
                        if (e.hasOwnProperty(t) && e[t].test(pt))
                            return t;
                    return "Unknown"
                }
                )()),
                ct
            }
            ,
            e.isMobile = function() {
                return null === st && (st = /Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(ut)),
                st
            }
            ,
            e.browserName = s,
            e.browserVersion = c,
            e.baseChromeVersion = function() {
                return yt()[3]
            }
            ,
            e.getAudioContext = _,
            e.browserSubVersion = function() {
                return yt()[4]
            }
        }
        )($e || ($e = {}));
        var wt = $e
          , bt = class {
            constructor(e, t) {
                this._chunks = [],
                this._participantId = e,
                this._onStream = t
            }
            appendChunk(e) {
                let t = this._chunks.length;
                if (e.start)
                    t && (Yt.warn("[FrameBuilder] Cleanup buffer", Array.prototype.slice.call(this._chunks)),
                    this._chunks = []);
                else if (!t || (this._chunks[t - 1].sequence + 1) % 65536 !== e.sequence)
                    return void Yt.warn("[FrameBuilder] Got incorrect chunk");
                if (this._chunks.push(e),
                e.end) {
                    let t = this._processFrameData()
                      , {width: n, height: r} = bt.getFrameSize(t);
                    this._processFrame({
                        timestamp: e.timestamp,
                        frameData: t,
                        isVP9: e.isVP9,
                        keyframe: e.keyframe,
                        width: n,
                        height: r
                    })
                }
            }
            destroy() {
                this._chunks = []
            }
            _processFrameData() {
                let e = this._chunks;
                this._chunks = [];
                let t = e.reduce(((e,t)=>e + t.data.byteLength), 0)
                  , n = new Uint8Array(t)
                  , r = 0;
                for (let t of e)
                    n.set(new Uint8Array(t.data), r),
                    r += t.data.byteLength;
                return n
            }
            static getFrameSize(e) {
                let t = {
                    width: 0,
                    height: 0
                }
                  , n = new c.BitStream(e.buffer);
                n.bigEndian = !0,
                n.index += 2;
                let r = n.readBits(1)
                  , i = n.readBits(1) << 1 | r;
                return 3 === i && n.index++,
                1 === n.readBits(1) || 0 !== n.readBits(1) || (n.index++,
                n.index++,
                n.index += 24,
                i >= 2 && n.index++,
                7 !== n.readBits(3) ? (n.index++,
                (1 === i || 3 === i) && (n.index += 3)) : (1 === i || 3 === i) && n.index++,
                t.width = n.readBits(16) + 1,
                t.height = n.readBits(16) + 1),
                t
            }
            static isBrowserSupported() {
                throw new Error("Method `isBrowserSupported` is not implemented")
            }
        }
          , Ct = class extends bt {
            constructor(e, t) {
                super(e, t),
                this._decoderReady = !1,
                this._decoderQueue = [],
                this._canvas = null,
                this._canvasContext = null,
                this._stream = null,
                this._track = null,
                Yt.debug(`StreamBuilder started for participant [${e}]`),
                this._useImageBitmap = "ImageBitmap"in window,
                Ie.isBrowserSupported() ? this._decoder = new Ie : this._decoder = new Oe,
                this._decoder.init((e=>this._drawImage(e))).then((()=>{
                    this._decoderReady = !0,
                    this._decodeQueue()
                }
                ))
            }
            _createStream(e, t) {
                this._canvas || (this._canvas = document.createElement("canvas"),
                this._canvas.width = e,
                this._canvas.height = t,
                this._canvas.style.pointerEvents = "none",
                this._canvas.style.visibility = "hidden",
                this._canvas.style.position = "absolute",
                this._canvas.style.width = "160px",
                this._canvas.style.height = "90px",
                this._canvas.style.bottom = "0",
                this._canvas.style.right = "0",
                this._canvas.style.zIndex = "5000",
                document.body.appendChild(this._canvas),
                this._useImageBitmap ? this._canvasContext = this._canvas.getContext("bitmaprenderer") : this._canvasContext = this._canvas.getContext("2d"),
                this._stream = this._canvas.captureStream(0),
                this._track = this._stream.getVideoTracks()[0],
                this._track.contentHint = "text")
            }
            _removeStream() {
                this._stream && (this._stream.getTracks().forEach((e=>e.stop())),
                this._stream = null,
                this._track = null),
                this._canvasContext = null;
                try {
                    this._canvas && document.body.removeChild(this._canvas)
                } catch (e) {}
                this._canvas = null
            }
            _requestCanvasFrame() {
                this._track && this._track.requestFrame ? this._track.requestFrame() : this._stream && this._stream.requestFrame && this._stream.requestFrame()
            }
            _drawImage(e) {
                this._track || (this._createStream(e.width, e.height),
                this._onStream(this._stream));
                let t = this._canvas;
                if (t.width = e.width,
                t.height = e.height,
                e instanceof ImageData) {
                    let n = this._canvasContext;
                    n.clearRect(0, 0, t.width, t.height),
                    n.putImageData(e, 0, 0)
                } else
                    this._canvasContext.transferFromImageBitmap(e);
                this._requestCanvasFrame()
            }
            _processFrame(e) {
                !this._decoderReady || this._decoderQueue.length ? (this._decoderQueue.push(e),
                this._decodeQueue()) : this._decoder.decodeFrame(e.timestamp, e.frameData, e.isVP9, e.keyframe)
            }
            _decodeQueue() {
                if (!this._decoderReady)
                    return;
                let e = this._decoderQueue;
                this._decoderQueue = [],
                e.forEach((e=>{
                    this._decoder.decodeFrame(e.timestamp, e.frameData, e.isVP9, e.keyframe)
                }
                ))
            }
            destroy() {
                super.destroy(),
                this._decoder.destroy(),
                this._removeStream(),
                Yt.debug(`StreamBuilder destroyed for participant ${this._participantId}`)
            }
            static isBrowserSupported() {
                return ("CanvasCaptureMediaStream"in window || "CanvasCaptureMediaStreamTrack"in window) && !("Safari" === wt.browserName() && Number(wt.browserVersion()) >= 15)
            }
        }
        ;
        var Tt = m(2, 15) - 1
          , Dt = class {
            constructor(e) {
                this._queue = [],
                this._clearBufferTill = 0,
                this._mediaSource = new MediaSource,
                this._codec = e;
                let t = ()=>{
                    this._mediaSource.removeEventListener("sourceopen", t),
                    this._initBuffer(),
                    this._handleQueue()
                }
                ;
                this._mediaSource.addEventListener("sourceopen", t, !1)
            }
            _handleQueue() {
                if (!this._sourceBuffer || this._sourceBuffer.updating || !this._queue.length)
                    return;
                if (this._clearBufferTill && this._sourceBuffer.buffered.length) {
                    let e = this._sourceBuffer.buffered.start(0);
                    return e < this._clearBufferTill && (this._sourceBuffer.remove(e, this._clearBufferTill),
                    Yt.debug(`[WebmBuilder] SourceBuffer cleanup from ${e} to ${this._clearBufferTill}`)),
                    void (this._clearBufferTill = 0)
                }
                let e = this._queue;
                this._queue = [];
                let t = Dt._buildQueue(e);
                this._sourceBuffer.appendBuffer(t)
            }
            static _buildQueue(e) {
                if (!e.length)
                    return new Uint8Array;
                if (1 === e.length)
                    return _.build(e[0]);
                let t = e.reduce(((e,t)=>e + t.countSize()), 0)
                  , n = new Uint8Array(t)
                  , r = 0;
                for (let t of e) {
                    let e = _.build(t);
                    n.set(e, r),
                    r += e.byteLength
                }
                return n
            }
            _initBuffer() {
                this._sourceBuffer = this._mediaSource.addSourceBuffer(`video/webm; codecs="${this._codec}"`),
                this._sourceBuffer.mode = "sequence",
                this._sourceBuffer.addEventListener("updateend", (()=>this._handleQueue()))
            }
            changeType(e) {
                var t;
                return this._codec = e,
                null == (t = this._sourceBuffer) ? void 0 : t.changeType(e)
            }
            append(e, t=!1) {
                this._queue.push(e),
                t && this._handleQueue()
            }
            cleanup() {
                var e, t, n;
                "open" === (null == (e = this._mediaSource) ? void 0 : e.readyState) && (null == (t = this._sourceBuffer) || t.abort());
                let r = null == (n = this._sourceBuffer) ? void 0 : n.buffered
                  , i = null == r ? void 0 : r.length;
                if (!i)
                    return;
                let o = r.start(0)
                  , a = Math.max(0, r.end(i - 1) - 5);
                a - o > 5 && (this._clearBufferTill = a)
            }
            destroy() {
                this._queue = [],
                "open" === this._mediaSource.readyState && (this._sourceBuffer.abort(),
                this._mediaSource.endOfStream()),
                this._sourceBuffer = null,
                this._clearBufferTill = 0
            }
            get codec() {
                return this._codec
            }
            get mediaSource() {
                return this._mediaSource
            }
            get buffered() {
                var e;
                return null == (e = this._sourceBuffer) ? void 0 : e.buffered
            }
        }
          , At = class extends bt {
            constructor(e, t) {
                super(e, t),
                this._video = null,
                this._stream = null,
                this._earliestTimestamp = 0,
                this._clusterStartTime = 0,
                this._lastFrameTimestamp = 0,
                Yt.debug(`[WebmBuilder] started for participant [${e}]`)
            }
            static _intToU16BE(e) {
                return new Uint8Array([e >> 8, e])
            }
            static _genWebmHeader() {
                return _.element(_.ID.EBML, [_.element(_.ID.EBMLVersion, _.number(1)), _.element(_.ID.EBMLReadVersion, _.number(1)), _.element(_.ID.EBMLMaxIDLength, _.number(4)), _.element(_.ID.EBMLMaxSizeLength, _.number(8)), _.element(_.ID.DocType, _.string("webm")), _.element(_.ID.DocTypeVersion, _.number(2)), _.element(_.ID.DocTypeReadVersion, _.number(2))])
            }
            static _genSegmentHeader(e, t, n) {
                let r = _.element(_.ID.Info, [_.element(_.ID.TimecodeScale, _.number(1e6)), _.element(_.ID.MuxingApp, _.string("vk-webm-builder")), _.element(_.ID.WritingApp, _.string("vk-webm-builder"))])
                  , i = [_.element(_.ID.PixelWidth, _.number(e)), _.element(_.ID.PixelHeight, _.number(t))]
                  , o = _.element(_.ID.Tracks, _.element(_.ID.TrackEntry, [_.element(_.ID.TrackNumber, _.number(1)), _.element(_.ID.TrackUID, _.number(1)), _.element(_.ID.TrackType, _.number(1)), _.element(_.ID.FlagLacing, _.number(0)), _.element(_.ID.DefaultDuration, _.number(1e9)), _.element(_.ID.CodecID, _.string(`V_${n.toUpperCase()}`)), _.element(_.ID.Video, i)]));
                return _.unknownSizeElement(_.ID.Segment, [r, o])
            }
            static _genClusterHeader(e) {
                return _.unknownSizeElement(_.ID.Cluster, [_.element(_.ID.Timecode, _.number(Math.round(e)))])
            }
            _createVideo(e) {
                this._mediaBuffer = new Dt(e),
                this._video = document.createElement("video"),
                this._video.autoplay = !0,
                this._video.controls = !1,
                this._video.muted = !0,
                this._video.style.pointerEvents = "none",
                this._video.style.visibility = "hidden",
                this._video.style.position = "absolute",
                this._video.style.width = "160px",
                this._video.style.height = "90px",
                this._video.style.bottom = "0",
                this._video.style.right = "0",
                this._video.style.zIndex = "5000",
                this._video.src = URL.createObjectURL(this._mediaBuffer.mediaSource),
                document.body.appendChild(this._video);
                let t = ()=>{
                    if (this._video.src) {
                        Yt.warn(`[WebmBuilder] Video paused for participant [${this._participantId}], try to play again`);
                        let e = this._video.seekable;
                        e.length && (this._video.currentTime = e.end(e.length - 1) - .1),
                        this._video.play().catch((()=>{}
                        ))
                    }
                }
                ;
                this._video.onpause = t,
                this._video.onwaiting = t,
                this._video.onstalled = t,
                this._video.onerror = ()=>Yt.warn(`[WebmBuilder] Video Error for participant [${this._participantId}]`, this._video.error),
                this._stream = this._video.captureStream(),
                this._onStream(this._stream)
            }
            _processFrame(e) {
                let t = e.isVP9 ? "vp9" : "vp8";
                this._mediaBuffer ? this._mediaBuffer.codec !== t && this._mediaBuffer.changeType(t) : this._createVideo(t);
                let n = e.timestamp;
                if (n <= this._lastFrameTimestamp && (n = this._lastFrameTimestamp + 10,
                Yt.debug(`[WebmBuilder] Fixup timestamp for participant [${this._participantId}]`)),
                this._lastFrameTimestamp = n,
                this._earliestTimestamp)
                    n -= this._earliestTimestamp;
                else {
                    if (!e.keyframe)
                        return;
                    this._earliestTimestamp = n,
                    n = 0
                }
                if (e.keyframe) {
                    this._clusterStartTime = n,
                    this._mediaBuffer.cleanup(),
                    Yt.debug(`[WebmBuilder] Segment header for participant [${this._participantId}]`);
                    let r = At._genWebmHeader();
                    this._mediaBuffer.append(r);
                    let i = At._genSegmentHeader(e.width, e.height, t);
                    this._mediaBuffer.append(i)
                }
                let r = Math.round(n - this._clusterStartTime);
                if (r > Tt && (this._clusterStartTime = n,
                r = 0),
                0 === r) {
                    Yt.debug(`[WebmBuilder] Cluster header for participant [${this._participantId}]`);
                    let e = At._genClusterHeader(this._clusterStartTime);
                    this._mediaBuffer.append(e)
                }
                let i = _.element(_.ID.SimpleBlock, [_.vintEncodedNumber(1), _.bytes(At._intToU16BE(r)), _.number((e.keyframe ? 1 : 0) << 7), _.bytes(e.frameData)]);
                this._mediaBuffer.append(i, !0)
            }
            destroy() {
                super.destroy(),
                this._video && (this._video.onpause = null,
                this._video.onwaiting = null,
                this._video.onstalled = null,
                this._video.onerror = null,
                this._video.pause(),
                this._video.src = "",
                document.body.removeChild(this._video)),
                this._mediaBuffer && (this._mediaBuffer.destroy(),
                this._mediaBuffer = null),
                this._stream && (this._stream.getTracks().forEach((e=>e.stop())),
                this._stream = null),
                Yt.debug(`[WebmBuilder] destroyed for participant [${this._participantId}]`)
            }
            static isBrowserSupported() {
                var e, t, n;
                return "captureStream"in (null == (e = window.HTMLVideoElement) ? void 0 : e.prototype) && (null == (t = window.MediaSource) ? void 0 : t.isTypeSupported('video/webm; codecs="vp8"')) && (null == (n = window.MediaSource) ? void 0 : n.isTypeSupported('video/webm; codecs="vp9"'))
            }
        }
          , St = class {
            constructor(e, t, n, r) {
                this._participantIdRegistry = null,
                this._streamBuilders = {},
                this._onStream = ()=>{}
                ,
                this._onEos = ()=>{}
                ,
                Yt.debug("ScreenCaptureReceiver started"),
                this._datachannel = e,
                this._participantIdRegistry = t,
                this._onStream = n,
                this._onEos = r,
                this._datachannel.onmessage = e=>this._onDataChannelMessage(e.data)
            }
            _onDataChannelMessage(e) {
                var t, n;
                let r = function(e) {
                    let t = new DataView(e)
                      , n = t.getUint8(0)
                      , r = t.getUint16(1)
                      , i = t.getUint32(3)
                      , o = 1 === t.getUint8(7)
                      , a = t.getUint16(8)
                      , s = t.getUint8(10)
                      , c = !!(1 & s)
                      , _ = !!(2 & s)
                      , l = !!(4 & s)
                      , u = !!(8 & s);
                    if (1 !== n)
                        throw new Error(`Unexpected protocol version. Got ${n}, expected 1`);
                    return {
                        timestamp: i,
                        start: c,
                        end: _,
                        keyframe: l,
                        sequence: r,
                        isVP9: o,
                        ssrc: a,
                        eos: u,
                        data: e.slice(11)
                    }
                }(e)
                  , i = null == (n = null == (t = this._participantIdRegistry) ? void 0 : t.getStreamDescription(r.ssrc)) ? void 0 : n.participantId;
                if (!i)
                    return void Yt.warn(`Participant id for ssrc ${r.ssrc} not found in registry`);
                if (r.eos)
                    return this.close(i),
                    void this._onEos(i);
                let o = this._streamBuilders[i];
                if (!o) {
                    let e = e=>this._onStream(i, e);
                    o = kt.screenShareWebmBuilder && At.isBrowserSupported() ? new At(i,e) : new Ct(i,e),
                    this._streamBuilders[i] = o
                }
                o.appendChunk(r)
            }
            close(e) {
                let t = this._streamBuilders[e];
                t && (t.destroy(),
                delete this._streamBuilders[e])
            }
            destroy() {
                this._datachannel.onbufferedamountlow = null,
                this._datachannel.onmessage = null,
                this._onStream = ()=>{}
                ,
                Object.values(this._streamBuilders).forEach((e=>e.destroy())),
                this._streamBuilders = {},
                this._participantIdRegistry = null,
                Yt.debug("ScreenCaptureReceiver destroyed")
            }
            static isBrowserSupported() {
                return (Ie.isBrowserSupported() || Oe.isBrowserSupported()) && (Ct.isBrowserSupported() || At.isBrowserSupported())
            }
        }
          , Pt = class extends Pe {
            constructor(e, t) {
                super(),
                this._video = null,
                this._imageCapture = null,
                this._canvas = null,
                this._canvasCtx = null,
                this._stream = null,
                this._track = null,
                this._frameReadTimeout = 0,
                this._lastFrame = null,
                this._sourceTrack = e,
                this._onFrame = t,
                this._useImageCapture = "ImageCapture"in window && "ImageBitmap"in window,
                ("live" !== e.readyState || !e.enabled || e.muted) && (this._useImageCapture = !1)
            }
            _createDom() {
                this._canvas || (this._canvas = document.createElement("canvas"),
                this._canvas.style.pointerEvents = "none",
                this._canvas.style.visibility = "hidden",
                this._canvas.style.position = "absolute",
                this._canvas.style.width = "160px",
                this._canvas.style.height = "90px",
                this._canvas.style.bottom = "0",
                this._canvas.style.right = "160px",
                this._canvas.style.zIndex = "5000",
                this._canvasCtx = this._canvas.getContext("2d"),
                document.body.appendChild(this._canvas)),
                !this._video && !this._useImageCapture && (this._video = document.createElement("video"),
                this._video.controls = !1,
                this._video.autoplay = !1,
                this._video.preload = "auto",
                this._video.muted = !0,
                this._video.style.pointerEvents = "none",
                this._video.style.visibility = "hidden",
                this._video.style.position = "absolute",
                this._video.style.width = "160px",
                this._video.style.height = "90px",
                this._video.style.bottom = "0",
                this._video.style.right = "0",
                this._video.style.zIndex = "5000",
                document.body.appendChild(this._video))
            }
            _removeDom() {
                try {
                    this._canvas && document.body.removeChild(this._canvas),
                    this._video && document.body.removeChild(this._video)
                } catch (e) {}
                this._canvasCtx = null,
                this._canvas = null,
                this._video = null
            }
            _createStream(e) {
                return g(this, null, (function*() {
                    if (!this._canvas)
                        throw new Error("Canvas not found");
                    if (!this._video && !this._useImageCapture)
                        throw new Error("Video element not found");
                    return this._stream = this._canvas.captureStream(0),
                    this._track = this._stream.getVideoTracks()[0],
                    new Promise(((t,n)=>{
                        if (this._useImageCapture)
                            this._imageCapture = new ImageCapture(e),
                            t();
                        else {
                            let r = this._video;
                            r.srcObject = new MediaStream([e]),
                            r.onloadeddata = e=>t(),
                            r.onerror = ()=>n(new Error("Video element error"));
                            let i = r.play()
                              , o = ()=>n(new Error("Autoplay is disabled"));
                            i ? i.catch(o) : o()
                        }
                    }
                    ))
                }
                ))
            }
            _removeStream() {
                var e;
                window.clearTimeout(this._frameReadTimeout),
                null == (e = this._lastFrame) || e.close(),
                this._stream && (this._stream.getTracks().forEach((e=>e.stop())),
                this._stream = null,
                this._track = null),
                this._video && (this._video.pause(),
                this._video.srcObject = null),
                this._imageCapture && (this._imageCapture = null)
            }
            _drawFrameVideo() {
                if (!(this._canvas && this._canvasCtx && this._video && this._track))
                    throw new Error("Fatal error");
                let e = this._video.videoWidth
                  , t = this._video.videoHeight;
                return this._canvas.width = this._video.width = e,
                this._canvas.height = this._video.height = t,
                this._canvasCtx.clearRect(0, 0, e, t),
                this._canvasCtx.drawImage(this._video, 0, 0, e, t),
                this._requestCanvasFrame(),
                this._canvasCtx.getImageData(0, 0, e, t)
            }
            _getFrameBitmap() {
                return g(this, null, (function*() {
                    if (!this._imageCapture)
                        throw new Error("Destroyed");
                    return this._imageCapture.grabFrame()
                }
                ))
            }
            _drawFrameData(e) {
                var t;
                if (!this._canvas || !this._canvasCtx || !this._track)
                    throw new Error("Destroyed");
                let n = e.width
                  , r = e.height;
                return this._canvas.width = n,
                this._canvas.height = r,
                this._canvasCtx.clearRect(0, 0, n, r),
                this._canvasCtx.drawImage(e, 0, 0, n, r),
                this._requestCanvasFrame(),
                null == (t = this._canvasCtx) ? void 0 : t.getImageData(0, 0, n, r)
            }
            _requestCanvasFrame() {
                this._track && this._track.requestFrame ? this._track.requestFrame() : this._stream && this._stream.requestFrame && this._stream.requestFrame()
            }
            init() {
                return g(this, null, (function*() {
                    this._createDom();
                    let e = this._sourceTrack.getSettings().width
                      , t = this._sourceTrack.getSettings().height;
                    Yt.debug(`LibVPxEncoder started ${e}x${t}, codec ${this.isVP9() ? "VP9" : "VP8"}`),
                    yield this._createStream(this._sourceTrack),
                    yield this._createWorker('var exports=(()=>{var u=Object.defineProperty;var b=o=>u(o,"__esModule",{value:!0});var g=(o,n)=>{b(o);for(var t in n)u(o,t,{get:n[t],enumerable:!0})};var y={};g(y,{default:()=>R});var e=(r=>(r.INIT="init",r.READY="ready",r.FRAME="frame",r.ERROR="error",r.DEBUG="debug",r.LOG_ERROR="log_error",r))(e||{});var R=(o,n)=>{let t;function m(a,r){return o({locateFile:n}).then(s=>{if(t=new s.VpxEncoder,t.debug(r),!t.init(a?s.VpxType.VP9:s.VpxType.VP8))throw self.postMessage({type:e.LOG_ERROR,message:"encoder-init-fail-libvpx"}),new Error("LibVPxEncoder failed to create");t.setMaxQuantizer(10),t.setTargetBitrate(1024)})}function E(a,r,s,i){let c=t.allocateImage(a,r);if(!c){self.postMessage({type:e.FRAME,error:"No buffer data"});return}c.set(new Uint8Array(s));let f=Math.round(performance.now()),l=150;if(!t.encode(f,l,i)){self.postMessage({type:e.FRAME,error:"Encode failed"});return}let p=t.readFrame();if(!p){self.postMessage({type:e.FRAME,error:"No encoded data"});return}t.readFrame()&&(self.postMessage({type:e.DEBUG,message:"LibVPxEncoder dropped frame"}),self.postMessage({type:e.LOG_ERROR,message:"LibVPxEncoder-drop"}));let d=new Uint8Array(p.byteLength);d.set(p),self.postMessage({type:e.FRAME,frameType:i?"key":"delta",timestamp:f,duration:l,data:d.buffer},[d.buffer])}self.onmessage=a=>{switch(a.data.type){case e.INIT:m(a.data.isVP9,a.data.debug).then(()=>self.postMessage({type:e.READY})).catch(r=>self.postMessage({type:e.ERROR,error:String(r)}));break;case e.FRAME:E(a.data.width,a.data.height,a.data.imageData,a.data.keyFrame);break}}};return y;})();\n', (e=>{
                        var t;
                        e.error ? this._onFrame(null, e.error) : this._onFrame({
                            type: e.frameType,
                            timestamp: e.timestamp,
                            duration: e.duration,
                            data: e.data,
                            byteLength: null == (t = e.data) ? void 0 : t.byteLength
                        })
                    }
                    ), [s(), s().getUrl], {
                        isVP9: this.isVP9(),
                        debug: Yt.enabled()
                    })
                }
                ))
            }
            _encode(e, t) {
                let n = e.data.buffer;
                this._sendToWorker(Ae.FRAME, {
                    width: e.width,
                    height: e.height,
                    imageData: n,
                    keyFrame: t
                }, [n])
            }
            _requestFrameVideo(e) {
                let t = this._drawFrameVideo();
                this._encode(t, e)
            }
            _requestFrameBitmap(e) {
                this._frameReadTimeout = window.setTimeout((()=>{
                    if (this._lastFrame) {
                        let t = this._drawFrameData(this._lastFrame);
                        this._encode(t, e)
                    } else
                        this._onFrame(null)
                }
                ), 1e3),
                this._getFrameBitmap().then((t=>{
                    var n;
                    window.clearTimeout(this._frameReadTimeout),
                    null == (n = this._lastFrame) || n.close(),
                    this._lastFrame = t;
                    let r = this._drawFrameData(t);
                    this._encode(r, e)
                }
                )).catch((()=>{}
                ))
            }
            requestFrame(e=!1) {
                this._useImageCapture ? this._requestFrameBitmap(e) : this._requestFrameVideo(e)
            }
            isVP9() {
                return !1
            }
            destroy() {
                this._removeWorker(),
                this._removeStream(),
                this._removeDom(),
                Yt.debug("LibVPxEncoder destroyed")
            }
            static isBrowserSupported() {
                return "WebAssembly"in window && "Worker"in window && ("CanvasCaptureMediaStream"in window || "CanvasCaptureMediaStreamTrack"in window)
            }
        }
          , Ot = class extends Pe {
            constructor(e, t) {
                super(),
                this._sourceTrack = e,
                this._onFrame = t,
                this._trackProcessor = new MediaStreamTrackProcessor(e)
            }
            init() {
                return g(this, null, (function*() {
                    let e = this._sourceTrack.getSettings().width
                      , t = this._sourceTrack.getSettings().height
                      , n = this._trackProcessor.readable;
                    Yt.debug(`WebCodecsEncoder started ${e}x${t}, codec ${this.isVP9() ? "VP9" : "VP8"}`),
                    yield this._createWorker('var exports=(()=>{var b=Object.defineProperty;var g=i=>b(i,"__esModule",{value:!0});var F=(i,n)=>{g(i);for(var r in n)b(i,r,{get:n[r],enumerable:!0})};var A={};F(A,{default:()=>h});var l=(r=>(r.VP9="vp09.00.50.08",r.VP8="vp8",r))(l||{}),d=(t=>(t.INIT="init",t.READY="ready",t.FRAME="frame",t.ERROR="error",t.DEBUG="debug",t.LOG_ERROR="log_error",t))(d||{});var h=()=>{let i=1e3,n,r,c,s,f,t,a=null,p=0,u=!1;function V(e){n=e.readable,r=n.getReader(),c=e.width,s=e.height,f=e.isVP9,t=e.framerate,m.configure({framerate:t,codec:f?l.VP9:l.VP8,width:c,height:s,latencyMode:"realtime"}),self.postMessage({type:d.READY})}function y(e){p=self.setTimeout(()=>{a&&E(a,e)},i),!u&&(u=!0,r.read().finally(()=>{u=!1,self.clearTimeout(p)}).then(({done:o,value:R})=>{if(a==null||a.close(),a=null,!(o||!R)){if(!m){r.releaseLock(),n.cancel();return}a=R,E(R,e)}}))}function E(e,o){(e.codedWidth!==c||e.codedHeight!==s)&&(c=e.codedWidth,s=e.codedHeight,m.configure({framerate:t,codec:f?l.VP9:l.VP8,width:c,height:s,latencyMode:"realtime"})),m.encode(e,{keyFrame:o})}let m=new VideoEncoder({output:e=>{let o;e.data?o=e.data:(o=new ArrayBuffer(e.byteLength),e.copyTo(o)),self.postMessage({type:d.FRAME,frameType:e.type,timestamp:e.timestamp,duration:e.duration,data:o},[o])},error:e=>{self.postMessage({type:d.FRAME,error:String(e)})}});self.onmessage=e=>{switch(e.data.type){case d.INIT:V(e.data);break;case d.FRAME:y(e.data.keyFrame);break}}};return A;})();\n', (e=>{
                        var t;
                        e.error ? this._onFrame(null, e.error) : this._onFrame({
                            type: e.frameType,
                            timestamp: e.timestamp,
                            duration: e.duration,
                            data: e.data,
                            byteLength: null == (t = e.data) ? void 0 : t.byteLength
                        })
                    }
                    ), [], {
                        readable: n,
                        width: e,
                        height: t,
                        isVP9: this.isVP9(),
                        framerate: kt.screenFrameRate
                    }, [n])
                }
                ))
            }
            requestFrame(e=!1) {
                this._sendToWorker(Ae.FRAME, {
                    keyFrame: e
                })
            }
            isVP9() {
                return !0
            }
            destroy() {
                this._removeWorker(),
                Yt.debug("WebCodecsEncoder destroyed")
            }
            static isBrowserSupported() {
                return "VideoEncoder"in window && "Worker"in window && "EncodedVideoChunk"in window && "MediaStreamTrackProcessor"in window
            }
        }
          , It = 0
          , Mt = class {
            constructor(e, t) {
                this._destroyed = !1,
                this._needKeyframe = !0,
                Yt.debug("ScreenCaptureSender started"),
                this._datachannel = t;
                let n = (e,t)=>{
                    if (!this._destroyed) {
                        if (!e)
                            return Yt.warn("requestFrame failed, keyFrame: " + this._needKeyframe, t),
                            this._needKeyframe = !0,
                            void this._requestFrame();
                        this._send(e).catch((e=>{
                            Yt.warn("sendFrame failed", e),
                            this._needKeyframe = !0
                        }
                        )).finally((()=>this._requestFrame()))
                    }
                }
                ;
                Ot.isBrowserSupported() ? this._encoder = new Ot(e,n) : this._encoder = new Pt(e,n),
                this._datachannel.onmessage = e=>{
                    (function(e) {
                        if (!e || !e.byteLength || 4 !== e.byteLength)
                            return !1;
                        let t = new DataView(e);
                        return !(1 !== t.getUint8(0) || 1 !== t.getUint8(1) || 0 !== t.getUint16(2))
                    }
                    )(e.data) && (Yt.debug(`[${this._datachannel.label}] Requested keyframe`),
                    this._needKeyframe = !0)
                }
                ,
                this._encoder.init().then((()=>this._requestFrame())).catch((e=>Yt.warn("ScreenCaptureSender init failed", e)))
            }
            _requestFrame() {
                this._destroyed || (this._encoder.requestFrame(this._needKeyframe),
                this._needKeyframe = !1)
            }
            _wrapHeader(e, t, n, r, i) {
                let o = function(e, t, n, r, i, o, a) {
                    let s = 0;
                    t && (s |= 1),
                    n && (s |= 2),
                    r && (s |= 4),
                    a || (s |= 8);
                    let c = new ArrayBuffer(11)
                      , _ = new DataView(c);
                    if (_.setUint8(0, 1),
                    _.setUint16(1, i),
                    _.setUint32(3, e),
                    _.setUint8(7, o ? 1 : 0),
                    _.setUint16(8, 0),
                    _.setUint8(10, s),
                    !a)
                        return c;
                    let l = new Uint8Array(c.byteLength + a.byteLength);
                    return l.set(new Uint8Array(c), 0),
                    l.set(new Uint8Array(a), c.byteLength),
                    l.buffer
                }(e, t, n, r, It, this._encoder.isVP9(), i);
                return It = (It + 1) % 65536,
                o
            }
            _stopPacket() {
                return this._wrapHeader(Date.now(), !1, !1, !1, null)
            }
            _send(e) {
                return g(this, null, (function*() {
                    return new Promise(((t,n)=>{
                        this._sendChunk(e, 0, t, n)
                    }
                    ))
                }
                ))
            }
            _sendChunk(e, t, n, r) {
                if (!this._datachannel || "open" !== this._datachannel.readyState)
                    return void r();
                let i = e.data.slice(t, t + 16373)
                  , o = e.data.byteLength <= t + i.byteLength
                  , a = this._wrapHeader(e.timestamp, !t, o, "key" === e.type, i);
                this._datachannel.onbufferedamountlow = o ? ()=>{
                    this._datachannel.bufferedAmount <= this._datachannel.bufferedAmountLowThreshold && n()
                }
                : null;
                try {
                    this._datachannel.send(a)
                } catch (e) {
                    return Yt.warn("Error send data to DataChannel", e),
                    void r()
                }
                o || window.setTimeout((()=>this._sendChunk(e, t + 16373, n, r)), 0)
            }
            destroy() {
                this._datachannel.onbufferedamountlow = null,
                this._datachannel.onmessage = null,
                "open" === this._datachannel.readyState && this._datachannel.send(this._stopPacket()),
                this._destroyed = !0,
                this._encoder.destroy(),
                Yt.debug("ScreenCaptureSender destroyed")
            }
            static isBrowserSupported() {
                return Ot.isBrowserSupported() || Pt.isBrowserSupported()
            }
        }
          , Rt = class {
            static get sessionKey() {
                return Rt._sessionKey
            }
            static set sessionKey(e) {
                Rt._sessionKey = e
            }
            static get sessionSecretKey() {
                return Rt._sessionSecretKey
            }
            static set sessionSecretKey(e) {
                Rt._sessionSecretKey = e
            }
            static get accessToken() {
                return Rt._accessToken
            }
            static set accessToken(e) {
                Rt._accessToken = e
            }
            static isEmpty() {
                return !Rt._sessionKey || !Rt._sessionSecretKey
            }
        }
          , Lt = class {
            static set(e) {
                e.hasOwnProperty("voiceParams") && (Object.assign(Lt._params.voiceParams, e.voiceParams),
                delete e.voiceParams),
                e.hasOwnProperty("specListenerParams") && (Object.assign(Lt._params.specListenerParams, e.specListenerParams),
                delete e.specListenerParams),
                e.hasOwnProperty("unifiedPlanBrowsers") && (Object.assign(Lt._params.unifiedPlanBrowsers, e.unifiedPlanBrowsers),
                delete e.unifiedPlanBrowsers),
                e.hasOwnProperty("apiAuth") && (Rt.accessToken = e.apiAuth.accessToken,
                Rt.sessionKey = e.apiAuth.sessionKey,
                Rt.sessionSecretKey = e.apiAuth.sessionSecretKey),
                Object.assign(Lt._params, e)
            }
            static get(e) {
                return Lt._params[e]
            }
            static get appName() {
                return "ok.calls.sdk.js"
            }
            static get appVersion() {
                return 1.1
            }
            static get sdkVersion() {
                return "2.5.3-beta.7"
            }
            static get debug() {}
            static get protocolVersion() {
                return Lt._params.joinFromMultipleDevices ? 6 : 5
            }
            static get platform() {
                return Lt._params.platform
            }
            static set platform(e) {
                Lt._params.platform = e
            }
            static get clientType() {
                return Lt._params.clientType
            }
            static set clientType(e) {
                Lt._params.clientType = e
            }
            static get device() {
                return Lt._params.device
            }
            static get apiKey() {
                return Lt._params.apiKey
            }
            static get apiEnv() {
                return Lt._params.apiEnv
            }
            static get apiEndpoint() {
                switch (Lt.apiEnv) {
                case "AUTO":
                case "PROD":
                    return "https://api.mycdn.me";
                case "PROD_OK":
                    return "https://api.ok.ru";
                case "TEST":
                    return "https://apitest.ok.ru/api";
                case "VIDEOTEST":
                    return "https://videotestapi.ok.ru/api";
                default:
                    return Lt._params.apiEnv
                }
            }
            static get authToken() {
                return Lt._params.authToken
            }
            static set authToken(e) {
                Lt._params.authToken = e
            }
            static get anonymToken() {
                return Lt._params.anonymToken
            }
            static set anonymToken(e) {
                Lt._params.anonymToken = e
            }
            static get domain() {
                return Lt._params.domain
            }
            static get iceServers() {
                return Lt._params.iceServers
            }
            static set iceServers(e) {
                Lt._params.iceServers = e
            }
            static get wssBase() {
                return Lt._params.wssBase
            }
            static set wssBase(e) {
                Lt._params.wssBase = e
            }
            static get wssToken() {
                return Lt._params.wssToken
            }
            static set wssToken(e) {
                Lt._params.wssToken = e
            }
            static get signalingReconnectDelay() {
                return Lt._params.signalingReconnectDelay
            }
            static get signalingReconnectMaxDelay() {
                return Lt._params.signalingReconnectMaxDelay
            }
            static get signalingReconnectMaxCount() {
                return Lt._params.signalingReconnectMaxCount
            }
            static get waitConnectionDelay() {
                return Lt._params.waitConnectionDelay
            }
            static get waitResponseDelay() {
                return Lt._params.waitResponseDelay
            }
            static get waitMessageDelay() {
                return Lt._params.waitMessageDelay
            }
            static get waitAnotherTabDelay() {
                return Lt._params.waitAnotherTabDelay
            }
            static get debugLog() {
                return Lt._params.debugLog
            }
            static get forceRelayPolicy() {
                return Lt._params.forceRelayPolicy
            }
            static set forceRelayPolicy(e) {
                Lt._params.forceRelayPolicy = e
            }
            static get videoMinWidth() {
                return Lt._params.videoMinWidth
            }
            static get videoMaxWidth() {
                return Lt._params.videoMaxWidth
            }
            static set videoMaxWidth(e) {
                Lt._params.videoMaxWidth = e
            }
            static get videoMinHeight() {
                return Lt._params.videoMinHeight
            }
            static get videoMaxHeight() {
                return Lt._params.videoMaxHeight
            }
            static set videoMaxHeight(e) {
                Lt._params.videoMaxHeight = e
            }
            static get videoAspectRatio() {
                return Lt._params.videoAspectRatio
            }
            static get videoFrameRate() {
                return Lt._params.videoFrameRate
            }
            static get videoFacingMode() {
                return Lt._params.videoFacingMode
            }
            static get screenFrameRate() {
                return Lt._params.screenFrameRate
            }
            static get videoEffects() {
                return Lt._params.videoEffects
            }
            static set videoEffects(e) {
                Lt._params.videoEffects = e
            }
            static get videoEffectMaxWidth() {
                return Lt._params.videoEffectMaxWidth
            }
            static set videoEffectMaxWidth(e) {
                Lt._params.videoEffectMaxWidth = e
            }
            static get videoEffectMaxHeight() {
                return Lt._params.videoEffectMaxHeight
            }
            static set videoEffectMaxHeight(e) {
                Lt._params.videoEffectMaxHeight = e
            }
            static get voiceParams() {
                return Lt._params.voiceParams
            }
            static get specListenerParams() {
                return Lt._params.specListenerParams
            }
            static get iceRestartWaitTime() {
                return Lt._params.iceRestartWaitTime
            }
            static get transportConnectionWaitTime() {
                return Lt._params.transportConnectionWaitTime
            }
            static get statisticsInterval() {
                return Lt._params.statisticsInterval
            }
            static set statisticsInterval(e) {
                Lt._params.statisticsInterval = e
            }
            static get networkStatisticsInterval() {
                return Lt._params.networkStatisticsInterval
            }
            static get perfStatReportEnabled() {
                return Lt._params.perfStatReportEnabled
            }
            static get callStatReportEnabled() {
                return Lt._params.callStatReportEnabled
            }
            static get producerNotificationDataChannel() {
                return Lt._params.producerNotificationDataChannel && St.isBrowserSupported()
            }
            static get producerCommandDataChannel() {
                return Lt._params.producerCommandDataChannel
            }
            static get consumerScreenDataChannel() {
                return Lt._params.consumerScreenDataChannel && Mt.isBrowserSupported()
            }
            static get producerScreenDataChannel() {
                return Lt._params.producerScreenDataChannel && Lt.producerNotificationDataChannel
            }
            static get screenShareWebmBuilder() {
                return Lt._params.screenShareWebmBuilder
            }
            static get noiseSuppression() {
                return Lt._params.noiseSuppression
            }
            static set noiseSuppression(e) {
                Lt._params.noiseSuppression = e
            }
            static get preferH264() {
                return Lt._params.preferH264
            }
            static get preferVP9() {
                return Lt._params.preferVP9
            }
            static get audioNack() {
                return Lt._params.audioNack
            }
            static get consumerScreenTrack() {
                return Lt._params.consumerScreenTrack && Lt.consumerScreenDataChannel
            }
            static get producerScreenTrack() {
                return Lt._params.producerScreenTrack && Lt.producerScreenDataChannel
            }
            static isUnifiedPlanSupported(e, t) {
                let n = Lt._params.unifiedPlanBrowsers;
                return !!n.hasOwnProperty(e) && t >= n[e]
            }
            static get movieShare() {
                return Lt._params.movieShare && Lt.videoTracksCount > 0
            }
            static get videoTracksCount() {
                return Lt.producerNotificationDataChannel ? Lt._params.videoTracksCount : 0
            }
            static get breakVideoPayloadTypes() {
                return Lt._params.breakVideoPayloadTypes
            }
            static get filteredMessages() {
                return Lt._params.filteredMessages
            }
            static get serverAudioRed() {
                return Lt._params.serverAudioRed && wt.canPreferRed()
            }
            static get p2pAudioRed() {
                return Lt._params.p2pAudioRed && wt.canPreferRed()
            }
            static get batchParticipantsOnStart() {
                return Lt._params.batchParticipantsOnStart
            }
            static get filterObservers() {
                return Lt._params.filterObservers
            }
            static get muteMode() {
                return Lt._params.muteMode
            }
        }
          , kt = Lt;
        kt._params = {
            platform: "WEB",
            clientType: "PORTAL",
            device: "browser",
            apiKey: "",
            authToken: "",
            anonymToken: "",
            apiEnv: "AUTO",
            domain: "",
            iceServers: [],
            wssBase: "",
            wssToken: "",
            signalingReconnectDelay: 1e3,
            signalingReconnectMaxDelay: 5e3,
            signalingReconnectMaxCount: 20,
            waitConnectionDelay: 1e4,
            waitResponseDelay: 1e4,
            waitMessageDelay: 15e3,
            waitAnotherTabDelay: 200,
            debugLog: !1,
            forceRelayPolicy: !1,
            videoMinWidth: 428,
            videoMinHeight: 240,
            videoMaxWidth: 1280,
            videoMaxHeight: 720,
            videoAspectRatio: 16 / 9,
            videoFrameRate: 25,
            screenFrameRate: 15,
            videoEffects: null,
            videoEffectMaxWidth: 640,
            videoEffectMaxHeight: 360,
            iceRestartWaitTime: 2e4,
            transportConnectionWaitTime: 5e3,
            statisticsInterval: 5e3,
            networkStatisticsInterval: 2e4,
            perfStatReportEnabled: !0,
            callStatReportEnabled: !1,
            voiceParams: {
                smoothing: .8,
                minFreq: 200,
                maxFreq: 5e3,
                interval: 500,
                threshold: .35,
                speakerLevelMultiplier: 1.8
            },
            specListenerParams: {
                connectionTimeout: 1e4,
                volumeTimeout: 1e4
            },
            unifiedPlanBrowsers: {
                Firefox: 10,
                Chrome: 76,
                Safari: 12
            },
            producerNotificationDataChannel: !0,
            producerCommandDataChannel: !0,
            consumerScreenDataChannel: !0,
            producerScreenDataChannel: !0,
            screenShareWebmBuilder: !1,
            noiseSuppression: !0,
            preferH264: !1,
            preferVP9: !0,
            audioNack: !0,
            consumerScreenTrack: !0,
            producerScreenTrack: !0,
            videoTracksCount: 0,
            movieShare: !1,
            filteredMessages: !0,
            serverAudioRed: !1,
            p2pAudioRed: !1,
            breakVideoPayloadTypes: !1,
            batchParticipantsOnStart: !0,
            joinFromMultipleDevices: !0,
            filterObservers: !1,
            muteMode: !1
        };
        var Bt, xt, Nt, Ut = ((Bt = Ut || {}).WAITING_HALL = "WAITING_HALL",
        Bt.WAITING = "WAITING",
        Bt.CONNECTING = "CONNECTING",
        Bt.CONNECTED = "CONNECTED",
        Bt.RECONNECT = "RECONNECT",
        Bt.ERROR = "ERROR",
        Bt.HANGUP = "HANGUP",
        Bt.PERMISSIONS = "PERMISSIONS",
        Bt);
        function Wt(e, ...t) {
            let n = kt.get(e);
            n && setTimeout(n, 0, ...t)
        }
        function Ft(e, t, ...n) {
            if (kt.filterObservers)
                if (Array.isArray(t)) {
                    if (t = t.filter((e=>!e.observer)),
                    !t.length)
                        return
                } else if (t.observer)
                    return;
            Wt(e, t, ...n)
        }
        function Kt(e) {
            return Object.assign({}, e)
        }
        function Vt(e) {
            return e.slice()
        }
        (Nt = xt || (xt = {})).onLocalStream = function(e, t) {
            Wt("onLocalStream", e, Kt(t))
        }
        ,
        Nt.onScreenStream = function(e, t) {
            Wt("onScreenStream", e, Kt(t))
        }
        ,
        Nt.onLocalStreamUpdate = function(e, t) {
            Wt("onLocalStreamUpdate", Kt(e), t)
        }
        ,
        Nt.onLocalStatus = function(e) {
            Wt("onLocalStatus", e)
        }
        ,
        Nt.onRemoteStream = function(e, t) {
            Ft("onRemoteStream", e, t)
        }
        ,
        Nt.onRemoteLive = function(e, t, n) {
            Ft("onRemoteLive", e, t, n)
        }
        ,
        Nt.onRemoteScreenStream = function(e, t) {
            Ft("onRemoteScreenStream", e, t)
        }
        ,
        Nt.onConversation = function(e, t, n, r) {
            Ft("onConversation", e, Kt(t), Kt(n), r)
        }
        ,
        Nt.onRemoteMediaSettings = function(e, t) {
            Ft("onRemoteMediaSettings", e, Kt(t))
        }
        ,
        Nt.onRemoteParticipantState = function(e, t) {
            Ft("onRemoteParticipantState", e, Kt(t))
        }
        ,
        Nt.onRemoteStatus = function(e, t, n=null) {
            Ft("onRemoteStatus", e, t, n)
        }
        ,
        Nt.onParticipantStatus = function(e, t, n=null) {
            Ft("onParticipantStatus", e, t, n)
        }
        ,
        Nt.onPermissionsRequested = function() {
            Wt("onPermissionsRequested")
        }
        ,
        Nt.onPermissionsError = function(e) {
            Wt("onPermissionsError", e)
        }
        ,
        Nt.onRemoteRemoved = function(e) {
            Ft("onRemoteRemoved", e)
        }
        ,
        Nt.onCallState = function(e, t, n) {
            Wt("onCallState", e, t, Kt(n))
        }
        ,
        Nt.onDeviceSwitched = function(e, t) {
            Wt("onDeviceSwitched", e, t)
        }
        ,
        Nt.onMuteStates = function(e, t, n, r=!1, i=!1, o=null, a=null) {
            Wt("onMuteStates", Kt(e), Vt(t), Vt(n), r, i, o, a)
        }
        ,
        Nt.onRolesChanged = function(e, t) {
            Ft("onRolesChanged", e, Vt(t))
        }
        ,
        Nt.onLocalRolesChanged = function(e) {
            Wt("onLocalRolesChanged", Vt(e))
        }
        ,
        Nt.onPinnedParticipant = function(e, t) {
            Ft("onPinnedParticipant", e, t)
        }
        ,
        Nt.onLocalPin = function(e) {
            Wt("onLocalPin", e)
        }
        ,
        Nt.onOptionsChanged = function(e) {
            Wt("onOptionsChanged", Vt(e))
        }
        ,
        Nt.onCallAccepted = function() {
            Wt("onCallAccepted")
        }
        ,
        Nt.onRateNeeded = function() {
            Wt("onRateNeeded")
        }
        ,
        Nt.onSpeakerChanged = function(e) {
            Ft("onSpeakerChanged", e)
        }
        ,
        Nt.onVolumesDetected = function(e) {
            Wt("onVolumesDetected", Vt(e))
        }
        ,
        Nt.onLocalVolume = function(e, t) {
            Wt("onLocalVolume", e, t)
        }
        ,
        Nt.onJoinStatus = function(e, t) {
            Wt("onJoinStatus", e, t)
        }
        ,
        Nt.onHangup = function(e, t) {
            Wt("onHangup", e, t)
        }
        ,
        Nt.onMultipartyChatCreated = function(e) {
            Wt("onMultipartyChatCreated", Kt(e))
        }
        ,
        Nt.onDeviceChange = function() {
            Wt("onDeviceChange")
        }
        ,
        Nt.onFingerprintChange = function(e) {
            Wt("onFingerprintChange", e)
        }
        ,
        Nt.onTokenExpired = function() {
            Wt("onTokenExpired")
        }
        ,
        Nt.onChatMessage = function(e, t, n=!1) {
            Wt("onChatMessage", e, t, n)
        }
        ,
        Nt.onCustomData = function(e, t, n=!1) {
            Wt("onCustomData", e, t, n)
        }
        ,
        Nt.onRecordStarted = function(e, t, n, r, i, o) {
            Wt("onRecordStarted", e, t, n, r, i, o)
        }
        ,
        Nt.onRecordStopped = function() {
            Wt("onRecordStopped")
        }
        ,
        Nt.onLocalNetworkStatusChanged = function(e) {
            Wt("onLocalNetworkStatusChanged", e)
        }
        ,
        Nt.onNetworkStatusChanged = function(e) {
            Wt("onNetworkStatusChanged", e)
        }
        ,
        Nt.onDebugMessage = function(e, ...t) {
            Wt("onDebugMessage", e, ...t)
        }
        ,
        Nt.onStatistics = function(e, t) {
            Wt("onStatistics", Object.assign({}, e, {
                memory: t
            }))
        }
        ,
        Nt.onAutoplayError = function() {
            Wt("onAutoplayError")
        }
        ,
        Nt.onChatRoomUpdated = function(e, t, n) {
            Wt("onChatRoomUpdated", e, t, n)
        }
        ;
        var Ht, jt = xt, Gt = (e=>(e.DEBUG = "DEBUG",
        e.LOG = "LOG",
        e.WARN = "WARN",
        e.ERROR = "ERROR",
        e))(Gt || {});
        (e=>{
            let t = ""
              , n = (e,...t)=>{
                jt.onDebugMessage(e, ...t)
            }
              , r = !1
              , i = (e,t)=>(...n)=>{
                e(...n),
                function(e, t) {
                    !ye.available || (we.push({
                        t: Date.now(),
                        l: e,
                        d: t
                    }),
                    Ce || (Ce = window.setTimeout((()=>{
                        Ce = null,
                        ge()
                    }
                    ), 3e4)))
                }(t, n)
            }
              , o = console.debug.bind(console, t)
              , a = console.log.bind(console, t)
              , s = console.warn.bind(console, t)
              , c = console.error.bind(console, t)
              , _ = n.bind(null, "DEBUG")
              , l = n.bind(null, "LOG")
              , u = n.bind(null, "WARN")
              , d = n.bind(null, "ERROR");
            e.debug = _,
            e.log = l,
            e.warn = u,
            e.error = d,
            e.enabled = function() {
                return r
            }
            ,
            e.toggle = function(t) {
                r = t,
                kt.debugLog && Ee(),
                t ? (e.debug = kt.debugLog ? i(o, "DEBUG") : o,
                e.log = kt.debugLog ? i(a, "LOG") : a,
                e.warn = kt.debugLog ? i(s, "WARN") : s,
                e.error = kt.debugLog ? i(c, "ERROR") : c) : (e.debug = kt.debugLog ? i(_, "DEBUG") : _,
                e.log = kt.debugLog ? i(l, "LOG") : l,
                e.warn = kt.debugLog ? i(u, "WARN") : u,
                e.error = kt.debugLog ? i(d, "ERROR") : d)
            }
            ,
            e.send = function(t, ...n) {
                switch (t) {
                case "DEBUG":
                    e.debug(...n);
                    break;
                case "LOG":
                    e.log(...n);
                    break;
                case "WARN":
                    e.warn(...n);
                    break;
                case "ERROR":
                    e.error(...n)
                }
            }
        }
        )(Ht || (Ht = {}));
        var qt, $t, Yt = Ht, zt = (e=>(e.USER = "USER",
        e.ANONYM = "ANONYM",
        e.GROUP = "GROUP",
        e))(zt || {});
        (e=>{
            function t(e, t="USER") {
                return {
                    id: e,
                    type: t
                }
            }
            function n(e) {
                return `{"id":"${e.id}","type":"${e.type}"}`
            }
            e.fromIds = function(e) {
                return e.length ? "object" == typeof e[0] ? e : e.map((e=>t(e))) : []
            }
            ,
            e.fromId = t,
            e.fromSignaling = function(e) {
                return {
                    id: e.id,
                    type: "ANONYM" === e.type ? "ANONYM" : "USER"
                }
            }
            ,
            e.toString = n,
            e.fromIdToString = function(e, r="USER") {
                return n(t(e, r))
            }
            ,
            e.fromString = function(e) {
                try {
                    return JSON.parse(e)
                } catch (t) {
                    throw new Error(`Failed to parse ExternalId from string '${e}'`)
                }
            }
            ,
            e.compare = function(e, t) {
                return e.id === t.id && e.type === t.type
            }
        }
        )(qt || (qt = {})),
        (e=>{
            e.fromId = function(e, t="USER", n=0) {
                return {
                    id: e,
                    type: t,
                    deviceIdx: n
                }
            }
            ,
            e.toString = function(e) {
                return `{"id":"${e.id}","type":"${e.type}","deviceIdx":"${e.deviceIdx}"}`
            }
            ,
            e.fromSignaling = function(e, t) {
                return Object.assign({
                    deviceIdx: t
                }, qt.fromSignaling(e))
            }
            ,
            e.getDeviceIdx = function(e) {
                return e && "object" == typeof e ? e.deviceIdx : 0
            }
        }
        )($t || ($t = {}));
        var Xt = (e=>(e.CAMERA = "CAMERA",
        e.SCREEN = "SCREEN",
        e.STREAM = "STREAM",
        e.MOVIE = "MOVIE",
        e))(Xt || {});
        function Qt(e) {
            return e.participantId + (e.mediaType ? ":s" + e.mediaType : "") + (e.streamName ? ":m" + e.streamName : "")
        }
        function Jt(e) {
            let t = e.split(He)
              , n = t.shift();
            if (!n)
                throw new Error("Illegal stream description: " + e);
            let r, i = null, o = 0;
            for (let n of t)
                switch (n.charAt(0)) {
                case "s":
                    i = Zt(n.slice(1));
                    break;
                case "m":
                    r = n.slice(1);
                    break;
                case "d":
                    o = Number.parseInt(n.slice(1), 10);
                    break;
                default:
                    throw new Error("Unexpected parameter type " + n.charAt(0) + " in stream description " + e)
                }
            return {
                participantId: Ye.compose(n, o),
                mediaType: i,
                streamName: r
            }
        }
        function Zt(e) {
            for (let t of Object.keys(Xt))
                if (t === e)
                    return Xt[t];
            return null
        }
        function en(e, t) {
            return null === e || null === t ? null === e && null === t : !(e.maxDimension !== t.maxDimension || e.maxBitrateK !== t.maxBitrateK || e.maxFramerate !== t.maxFramerate || e.degradationPreference !== t.degradationPreference)
        }
        function tn(e, t) {
            return !(!en(e.camera, t.camera) || !en(e.screenSharing, t.screenSharing))
        }
        function nn(e, t) {
            return {
                camera: Object.assign({}, e.camera, t.camera),
                screenSharing: Object.assign({}, e.screenSharing, t.screenSharing)
            }
        }
        var rn = class {
            constructor(e) {
                this._fixNoPacketsApplied = !1,
                this._fixNoPacketsChecked = !1,
                this._fixTooManyPacketsApplied = !1,
                this._fixTooManyPacketsSucceeded = !1,
                this._fixTooManyPacketsFailed = !1,
                this._mediaSource = e
            }
            _fixAudioDeviceNoPackets(e) {
                if (!this._fixNoPacketsApplied || !this._fixNoPacketsChecked) {
                    if (this._fixNoPacketsApplied && !this._fixNoPacketsChecked)
                        return this._fixNoPacketsChecked = !0,
                        void Se.log(ee.ERROR, "audio_device_recover_" + (e.bandwidth ? "success" : "fail"));
                    !this._fixNoPacketsApplied && !e.bandwidth && (this._fixNoPacketsApplied = !0,
                    Se.log(ee.ERROR, "audio_device_recover"),
                    this._mediaSource.toggleAudio(!0))
                }
            }
            _fixAudioDeviceTooManyPackets(e) {
                if (this._fixTooManyPacketsSucceeded || this._fixTooManyPacketsFailed)
                    return;
                let t = Date.now();
                if (this._lastPacketsSentTime) {
                    if (t - this._lastPacketsSentTime > 500) {
                        let n = 1e3 * (e.packetsSent - this._lastPacketsSent) / (t - this._lastPacketsSentTime);
                        this._lastPacketsSentTime = t,
                        this._lastPacketsSent = e.packetsSent,
                        this._fixTooManyPacketsApplied ? n > 75 ? (Yt.log("Failed to fix RV"),
                        Se.log(ee.ERROR, "audio_device_recover_rv_fail"),
                        this._fixTooManyPacketsFailed = !0) : t - this._fixTooManyPacketsTime > 6e4 && (Yt.log("Fixed RV"),
                        Se.log(ee.ERROR, "audio_device_recover_rv_success"),
                        this._fixTooManyPacketsSucceeded = !0) : n > 75 && (this._fixTooManyPacketsApplied = !0,
                        Yt.log("Trying to fix RV"),
                        this._mediaSource.toggleAudio(!0),
                        this._fixTooManyPacketsTime = t)
                    }
                } else
                    e.packetsSent > 0 && (this._lastPacketsSentTime = t,
                    this._lastPacketsSent = e.packetsSent)
            }
            fix(e) {
                if (!this._mediaSource)
                    return;
                let t = e.find((e=>e.kind === Ke.audio));
                !t || (this._fixAudioDeviceNoPackets(t),
                this._fixAudioDeviceTooManyPackets(t))
            }
        }
          , on = class extends y {
            constructor() {
                super(...arguments),
                this._lastMemoryStat = {
                    percent: 0,
                    bytes: 0
                }
            }
            onRemoteDataStats(e, t) {
                this._calcMemory(),
                e.inbound.rtps.map((e=>{
                    let n = "string" == typeof e.userId && t[e.userId] || null;
                    e.userId = null == n ? void 0 : n.externalId
                }
                )),
                jt.onStatistics(e, this._lastMemoryStat)
            }
            _calcMemory() {
                var e;
                let t = null == (e = null == window ? void 0 : window.performance) ? void 0 : e.memory;
                if (!t || !t.usedJSHeapSize || !t.jsHeapSizeLimit)
                    return;
                let n = Number((100 * t.usedJSHeapSize / t.jsHeapSizeLimit).toFixed(2))
                  , r = Number((t.usedJSHeapSize / 1024 / 1024).toFixed(1));
                n > 90 ? Yt.warn(`High memory usage: ${n}% (${r} MiB)`) : (!this._lastMemoryStat.percent || Math.abs(n - this._lastMemoryStat.percent) >= 3) && (Yt.debug(`Memory usage: ${n}% (${r} MiB)`),
                this._lastMemoryStat.percent = n,
                this._lastMemoryStat.bytes = t.usedJSHeapSize)
            }
        }
          , an = class {
            constructor(e, t) {
                this._analyser = null,
                this._gainNode = null,
                this._fftBins = null,
                this._mediaStreamSource = null,
                this._lastSmoothedLevel = 0,
                this._trackId = e,
                this._stream = t;
                try {
                    let e = wt.getAudioContext();
                    this._gainNode = e.createGain(),
                    this._gainNode.gain.value = 1e-5,
                    this._gainNode.connect(e.destination),
                    this._analyser = e.createAnalyser(),
                    this._analyser.fftSize = 1024,
                    this._analyser.smoothingTimeConstant = 0,
                    this._analyser.connect(this._gainNode),
                    this._fftBins = new Uint8Array(this._analyser.frequencyBinCount),
                    this._mediaStreamSource = e.createMediaStreamSource(t),
                    this._mediaStreamSource.connect(this._analyser)
                } catch (e) {}
            }
            get stream() {
                return this._stream
            }
            get trackId() {
                return this._trackId
            }
            _getBins() {
                if (!this._fftBins || !this._analyser)
                    return new Uint8Array;
                this._analyser.getByteFrequencyData(this._fftBins);
                let e = 44100 / this._fftBins.length
                  , t = Math.ceil(kt.voiceParams.minFreq / e)
                  , n = Math.floor(kt.voiceParams.maxFreq / e);
                return this._fftBins.subarray(t, n)
            }
            getLevel() {
                let e = this._getBins()
                  , t = e.reduce(((e,t)=>e + t), 0) / e.length / 255
                  , n = this._lastSmoothedLevel * kt.voiceParams.smoothing + t * (1 - kt.voiceParams.smoothing);
                return this._lastSmoothedLevel = n,
                {
                    real: t,
                    smoothed: n
                }
            }
            destroy() {
                this._mediaStreamSource && (this._mediaStreamSource.disconnect(),
                this._mediaStreamSource = null),
                this._gainNode && (this._gainNode.disconnect(),
                this._gainNode = null),
                this._analyser && (this._analyser.disconnect(),
                this._analyser = null,
                this._fftBins = null,
                this._lastSmoothedLevel = 0)
            }
        }
          , sn = class extends y {
            constructor(e) {
                super(),
                this._detector = null,
                this._track = null,
                this._interval = null;
                let t = ()=>{
                    this._detector && jt.onLocalVolume(this._detector.getLevel().real, e.getMediaSettings().isAudioEnabled),
                    this._interval = window.setTimeout(t, kt.voiceParams.interval)
                }
                ;
                this._interval = window.setTimeout(t, kt.voiceParams.interval);
                let n = ()=>{
                    let t = e.getStream();
                    t && this.init(t)
                }
                ;
                this.subscribe(e, Fe.SOURCE_CHANGED, (e=>{
                    e.kind === Ke.audio && e.mediaSettings.isAudioEnabled && n()
                }
                )),
                n()
            }
            init(e) {
                this._stopDetector();
                let t = e.getAudioTracks();
                t.length && (this._track = t[0].clone(),
                this._detector = new an("local",new MediaStream([this._track])))
            }
            _stopDetector() {
                this._detector && (this._detector.destroy(),
                this._detector = null),
                this._track && (this._track.stop(),
                this._track = null)
            }
            destroy() {
                this.unsubscribe(),
                this._interval && (window.clearTimeout(this._interval),
                this._interval = null),
                this._stopDetector()
            }
        }
          , cn = "videochat-epi"
          , _n = class extends y {
            constructor(e, t, n=!1) {
                super(),
                this._previousTimestamp = 0,
                this._previousCallStatReportTimestamp = 0,
                this._previousCallStatReport = {
                    nack_sent: 0,
                    nack_received: 0,
                    pli_sent: 0,
                    pli_received: 0,
                    fir_sent: 0,
                    fir_received: 0,
                    frames_dropped: 0,
                    jitter_video: 0,
                    jitter_audio: 0,
                    interframe_delay_variance: 0,
                    total_audio_samples_received: 0,
                    concealed_audio_samples: 0,
                    inserted_audio_samples_for_deceleration: 0,
                    removed_audio_samples_for_acceleration: 0,
                    silent_concealed_audio_samples: 0,
                    audio_concealment_events: 0,
                    total_audio_energy: 0
                },
                this._signaling = t,
                this._directTopology = n,
                this.subscribe(e, In.REMOTE_DATA_STATS, this._handleStats.bind(this))
            }
            destroy() {
                this.unsubscribe()
            }
            static getEstimatedPerformanceIndex() {
                try {
                    let e = parseInt(localStorage.getItem(cn) || "", 10);
                    return isNaN(e) ? 0 : e
                } catch (e) {
                    return 0
                }
            }
            _handleStats(e) {
                return g(this, null, (function*() {
                    if (!e.inbound || !e.inbound.rtps)
                        return;
                    let t = Date.now();
                    !this._directTopology && kt.perfStatReportEnabled && this._previousTimestamp + 5e3 <= t && (yield this.reportPerfStats(e),
                    this._previousTimestamp = t),
                    kt.callStatReportEnabled && this._previousCallStatReportTimestamp + 3e4 <= t && (this._reportCallStats(e),
                    this._previousCallStatReportTimestamp = t)
                }
                ))
            }
            reportPerfStats(e) {
                return g(this, null, (function*() {
                    let t = e.inbound.rtps.reduce(((e,t)=>("video" === t.kind && (e.framesDecoded += t.framesDecoded || 0,
                    e.framesReceived += t.framesReceived || 0),
                    e)), {
                        framesDecoded: 0,
                        framesReceived: 0
                    });
                    if (t.framesDecoded)
                        try {
                            let e = yield this._signaling.reportPerfStat(t);
                            localStorage.setItem(cn, e.estimatedPerformanceIndex)
                        } catch (e) {}
                }
                ))
            }
            _reportCallStats(e) {
                let t = {
                    nack_received: 0,
                    pli_received: 0,
                    fir_received: 0,
                    frames_dropped: 0,
                    jitter_video: 0,
                    jitter_audio: 0,
                    interframe_delay_variance: 0,
                    nack_sent: 0,
                    pli_sent: 0,
                    fir_sent: 0,
                    total_audio_samples_received: 0,
                    concealed_audio_samples: 0,
                    silent_concealed_audio_samples: 0,
                    inserted_audio_samples_for_deceleration: 0,
                    removed_audio_samples_for_acceleration: 0,
                    audio_concealment_events: 0,
                    total_audio_energy: 0,
                    inbound_video_count: 0,
                    inbound_audio_count: 0
                };
                e.inbound.rtps.reduce(((e,t)=>("video" === t.kind ? (t.framesReceived && (e.jitter_video = e.jitter_video * e.inbound_video_count / (e.inbound_video_count + 1) + 1e3 * t.jitter / (e.inbound_video_count + 1),
                e.interframe_delay_variance = e.interframe_delay_variance * e.inbound_video_count / (e.inbound_video_count + 1) + 1e6 * t.interframeDelayVariance / (e.inbound_video_count + 1),
                e.inbound_video_count++),
                e.frames_dropped += t.framesDropped,
                e.nack_sent += t.nackCount,
                e.pli_sent += t.pliCount,
                e.fir_sent += t.firCount) : (t.totalSamplesReceived && (e.jitter_audio = e.jitter_audio * e.inbound_audio_count / (e.inbound_audio_count + 1) + 1e3 * t.jitter / (e.inbound_audio_count + 1),
                e.total_audio_energy = e.total_audio_energy * e.inbound_audio_count / (e.inbound_audio_count + 1) + t.totalAudioEnergy / (e.inbound_audio_count + 1),
                e.inbound_audio_count++),
                e.total_audio_samples_received += t.totalSamplesReceived,
                e.inserted_audio_samples_for_deceleration += t.insertedSamplesForDeceleration,
                e.removed_audio_samples_for_acceleration += t.removedSamplesForAcceleration,
                e.concealed_audio_samples += t.concealedSamples,
                e.silent_concealed_audio_samples += t.silentConcealedSamples,
                e.audio_concealment_events += t.concealmentEvents),
                e)), t),
                e.outbound.rtps.reduce(((e,t)=>("video" === t.kind && (e.nack_received += t.nackCount,
                e.pli_received += t.pliCount,
                e.fir_received += t.firCount),
                e)), t);
                let n = {
                    call_topology: this._directTopology ? "D" : "S",
                    nack_sent: t.nack_sent - this._previousCallStatReport.nack_sent,
                    nack_received: t.nack_received - this._previousCallStatReport.nack_received,
                    pli_sent: t.pli_sent - this._previousCallStatReport.pli_sent,
                    pli_received: t.pli_received - this._previousCallStatReport.pli_received,
                    fir_sent: t.fir_sent - this._previousCallStatReport.fir_sent,
                    fir_received: t.fir_received - this._previousCallStatReport.fir_received,
                    frames_dropped: t.frames_dropped - this._previousCallStatReport.frames_dropped
                };
                if (t.jitter_video && (n.jitter_video = t.jitter_video),
                t.jitter_audio && (n.jitter_audio = t.jitter_audio),
                t.interframe_delay_variance && (n.interframe_delay_variance = t.interframe_delay_variance),
                t.total_audio_samples_received) {
                    let e = t.total_audio_samples_received - this._previousCallStatReport.total_audio_samples_received
                      , r = t.inserted_audio_samples_for_deceleration - this._previousCallStatReport.inserted_audio_samples_for_deceleration
                      , i = t.removed_audio_samples_for_acceleration - this._previousCallStatReport.removed_audio_samples_for_acceleration
                      , o = t.concealed_audio_samples - this._previousCallStatReport.concealed_audio_samples
                      , a = t.silent_concealed_audio_samples - this._previousCallStatReport.silent_concealed_audio_samples
                      , s = t.audio_concealment_events - this._previousCallStatReport.audio_concealment_events;
                    n.inserted_audio_samples_for_deceleration = r / e * 1e3,
                    n.removed_audio_samples_for_acceleration = i / e * 1e3,
                    n.concealed_audio_samples = o / e * 1e3,
                    n.concealed_silent_audio_samples = a / e * 1e3,
                    n.concealment_audio_avg_size = o / s,
                    n.total_audio_energy = t.total_audio_energy
                }
                Se.logCustom("callStat", n),
                Yt.log("Sent call stats", n),
                this._previousCallStatReport = t
            }
        }
        ;
        function ln(e, t, n=0) {
            return t in e && e[t] ? e[t] : n
        }
        function un(...e) {
            return t=>{
                for (let n of e)
                    if (n(t))
                        return !0;
                return !1
            }
        }
        function dn(e, t) {
            return n=>n[e] === t
        }
        function pn(e, t) {
            return t.reduce(((t,n)=>(t[n[e]] = n,
            t)), {})
        }
        function hn(e) {
            let t = {}
              , n = [];
            for (let r of e)
                t[r.id] || (t[r.id] = !0,
                n.push(r));
            return n
        }
        function mn(e) {
            return Object.keys(e).filter((t=>void 0 !== e[t])).map((t=>[t, e[t]])).reduce(((e,t)=>(e[t[0]] = function(e) {
                return null !== e && "object" == typeof e && !Array.isArray(e)
            }(t[1]) ? mn(t[1]) : t[1],
            e)), {})
        }
        function fn(e) {
            let t = [];
            for (let n of e)
                n.forEach((e=>t.push(e)));
            return t
        }
        function gn(e) {
            return g(this, null, (function*() {
                let t = [];
                return RTCRtpReceiver.prototype.getStats ? (t.push(...e.getReceivers().map((e=>e.getStats()))),
                t.push(...e.getSenders().map((e=>e.getStats())))) : t.push(e.getStats()),
                Promise.all(t).then(fn).then(hn)
            }
            ))
        }
        function vn(e) {
            let t = e.filter(dn("type", "candidate-pair")).sort(function(e) {
                return (t,n)=>t[e] - n[e]
            }("priority")).find(un(dn("nominated", !0), dn("selected", !0)));
            if (!t)
                return {
                    totalRoundTripTime: 0,
                    currentRoundTripTime: 0,
                    bytesSent: 0,
                    bytesReceived: 0
                };
            let n = {
                totalRoundTripTime: t.totalRoundTripTime || 0,
                currentRoundTripTime: t.currentRoundTripTime || 0,
                bytesSent: t.bytesSent,
                bytesReceived: t.bytesReceived
            }
              , r = e.find(dn("id", t.remoteCandidateId));
            r && (n = Object.assign({}, n, {
                remote: {
                    type: r.candidateType,
                    address: r.ip || r.address,
                    port: r.port,
                    protocol: r.protocol
                }
            }));
            let i = e.find(dn("id", t.localCandidateId));
            return i && (n = Object.assign({}, n, {
                local: {
                    type: i.candidateType,
                    address: i.ip || i.address,
                    port: i.port,
                    protocol: i.protocol,
                    relayProtocol: i.relayProtocol,
                    networkType: i.networkType
                }
            })),
            mn(n)
        }
        function En(e, t) {
            let n = pn("id", e)
              , r = e.filter(un(dn("type", "inbound-rtp"), dn("type", "outbound-rtp")));
            "Firefox" === wt.browserName() && (r = Object.values(r.reduce(((e,t)=>{
                if (e[t.ssrc]) {
                    let n = Object.assign({}, e[t.ssrc], t)
                      , r = e[t.ssrc].isRemote ? t : e[t.ssrc];
                    n.id = r.id,
                    n.type = r.type,
                    delete n.isRemote,
                    delete n.remoteId,
                    e[n.ssrc] = n
                } else
                    e[t.ssrc] = t;
                return e
            }
            ), {})));
            let i = {};
            if ("Safari" === wt.browserName()) {
                let t = e.filter(dn("type", "track"));
                i = pn("trackIdentifier", t)
            }
            return r.map((e=>{
                let r = Number(e.ssrc)
                  , o = e.mediaType || e.kind
                  , a = e.trackId
                  , s = e.type
                  , c = e.codecId;
                if ("Safari" === wt.browserName()) {
                    let n = /^.+_([\d]+)$/.exec(e.id);
                    if (n && (r = parseInt(n[1], 10)),
                    o = e.id.indexOf("Audio") > 0 ? "audio" : "video",
                    t[r]) {
                        let e = o + "-" + t[r];
                        i[e] && (a = i[e].id)
                    }
                }
                if (!s || !r || !o)
                    return null;
                let _ = {
                    ssrc: r,
                    type: s,
                    kind: o,
                    bytesReceived: ln(e, "bytesReceived"),
                    bytesSent: ln(e, "bytesSent"),
                    jitter: ln(e, "jitter"),
                    packetsLost: ln(e, "packetsLost"),
                    packetsReceived: ln(e, "packetsReceived"),
                    packetsSent: ln(e, "packetsSent"),
                    fractionLost: ln(e, "fractionLost"),
                    pliCount: ln(e, "pliCount"),
                    firCount: ln(e, "firCount"),
                    nackCount: ln(e, "nackCount"),
                    userId: t[r]
                };
                if ("video" === o) {
                    let t = ln(e, "framesDecoded")
                      , n = ln(e, "totalInterFrameDelay")
                      , r = ln(e, "totalSquaredInterFrameDelay");
                    _.interframeDelayVariance = (r - n * n / t) / t
                }
                if ("audio" === o && (_.totalSamplesReceived = ln(e, "totalSamplesReceived"),
                _.concealedSamples = ln(e, "concealedSamples"),
                _.insertedSamplesForDeceleration = ln(e, "insertedSamplesForDeceleration"),
                _.removedSamplesForAcceleration = ln(e, "removedSamplesForAcceleration"),
                _.silentConcealedSamples = ln(e, "silentConcealedSamples"),
                _.concealmentEvents = ln(e, "concealmentEvents"),
                _.totalAudioEnergy = ln(e, "totalAudioEnergy")),
                c && n[c]) {
                    let e = n[c];
                    _.clockRate = e.clockRate,
                    _.mimeType = e.mimeType
                }
                if (a && n[a]) {
                    let e = n[a];
                    _.frameHeight = e.frameHeight,
                    _.frameWidth = e.frameWidth,
                    _.framesDecoded = e.framesDecoded,
                    _.framesReceived = e.framesReceived,
                    _.framesDropped = e.framesDropped
                }
                return mn(_)
            }
            )).filter((e=>!!e))
        }
        function yn(e, t) {
            if (!t || !t.rtps || !e.rtps)
                return e;
            let n = pn("ssrc", e.rtps)
              , r = pn("ssrc", t.rtps)
              , i = (e.timestamp - t.timestamp) / 1e3;
            return !n || !r || Object.keys(n).forEach((e=>{
                let t = n[e]
                  , o = r[e];
                if (t && o) {
                    if (t.bytesReceived && t.bytesReceived > o.bytesReceived && (t.bandwidth = Math.round((t.bytesReceived - o.bytesReceived) / i)),
                    t.bytesSent && t.bytesSent > o.bytesSent && (t.bandwidth = Math.round((t.bytesSent - o.bytesSent) / i)),
                    t.packetsReceived)
                        if (t.packetsReceived > o.packetsReceived || t.packetsLost > o.packetsLost) {
                            let e = t.packetsLost - o.packetsLost
                              , n = t.packetsReceived - o.packetsReceived;
                            t.packetLoss = parseFloat((100 * e / (e + n)).toFixed(2))
                        } else
                            t.packetLoss = 0;
                    t.framesDropped && o.framesDropped && t.framesDropped > o.framesDropped && (t.framesDroppedDelta = parseFloat(((t.framesDropped - o.framesDropped) / i).toFixed(0)))
                }
            }
            )),
            e
        }
        function wn(e, t) {
            return g(this, arguments, (function*(e, t, n={}) {
                let r = yield gn(e)
                  , i = {
                    timestamp: Date.now(),
                    transport: vn(r),
                    rtps: En(r, n)
                };
                return t ? yn(i, t) : (yield Ye.delay(1e3),
                wn(e, i, n))
            }
            ))
        }
        var bn, Cn, Tn, Dn = .8, An = class extends y {
            constructor(e, t, n, r, i) {
                if (super(),
                this._remoteSDP = {},
                this._remoteCandidates = {},
                this._state = Mn.IDLE,
                this._isOpen = !1,
                this._remotePeerId = null,
                this._statInterval = null,
                this._settingsInterval = null,
                this._failedOnCreate = null,
                this._remoteStream = null,
                this._iceRestartTimeout = null,
                this._reconnectionTimeout = null,
                this._reconnectionPrevented = !1,
                this._fingerprint = null,
                this._neverConnected = !0,
                this._prevConsumerSettings = {},
                this._lastNetworkStat = {
                    rtt: 0,
                    loss: 0,
                    date: 0
                },
                this._remoteNetworkStat = {
                    rtt: 0,
                    loss: 0
                },
                this._networkLimits = {
                    badNet: {
                        loss: 3,
                        rtt: 1e3
                    },
                    goodNet: {
                        loss: .5,
                        rtt: 600
                    }
                },
                this._signaling = n,
                this._mediaSource = r,
                this._participantId = e,
                this._isMaster = t,
                this._serverSettings = i,
                this._perfStatReporter = new _n(this,n,!0),
                this.subscribe(this._signaling, X.NOTIFICATION, this._onSignalingNotification.bind(this)),
                this.subscribe(this._mediaSource, Fe.TRACK_REPLACED, this._onReplacedTrack.bind(this)),
                this.subscribe(this._mediaSource, Fe.SOURCE_CHANGED, this._applySettings.bind(this)),
                this._pc = new RTCPeerConnection({
                    iceServers: kt.iceServers,
                    iceTransportPolicy: kt.forceRelayPolicy ? "relay" : "all"
                },{
                    optional: [{
                        googSuspendBelowMinBitrate: !1
                    }]
                }),
                this._pc.onicecandidate = this._handleIceCandidate.bind(this),
                this._pc.ontrack = this._onAddTrack.bind(this),
                this._pc.oniceconnectionstatechange = this._onIceConnectionStateChange.bind(this),
                this._pc.onconnectionstatechange = this._onConnectionStateChange.bind(this),
                this._pc.onsignalingstatechange = this._onSignalingStateChange.bind(this),
                this._prevConsumerSettings = {},
                this._isMaster) {
                    try {
                        this._mediaSource.addTrackToPeerConnection(this._pc, !1, !0, kt.p2pAudioRed),
                        this._applySettings()
                    } catch (e) {
                        return Se.log(ee.ERROR, "addTrack-direct"),
                        Yt.error("Unable to add media source tracks", e, {
                            participantId: this._participantId
                        }),
                        void (this._failedOnCreate = e)
                    }
                    this._createOffer(!1).catch((e=>{
                        this._state === Mn.IDLE ? this._failedOnCreate = e : this.close(e)
                    }
                    ))
                }
                this._startSettingsInterval(),
                this._startStatInterval()
            }
            getState() {
                return this._state
            }
            updateStatisticsInterval() {
                this._stopStatInterval();
                let e = this.getState();
                e !== Mn.IDLE && e !== Mn.CLOSED && e !== Mn.FAILED && this._startStatInterval()
            }
            open(e=null) {
                return g(this, null, (function*() {
                    if (this._isOpen)
                        return void Yt.warn("DirectTransport: Already opened", {
                            participantId: this._participantId
                        });
                    if (this._failedOnCreate)
                        return void this.close(this._failedOnCreate);
                    if (Yt.debug("DirectTransport: Open transport", {
                        participantId: this._participantId
                    }),
                    this._isOpen = !0,
                    this._remotePeerId = e,
                    !this._isMaster)
                        try {
                            this._mediaSource.addTrackToPeerConnection(this._pc, !1, !0, kt.p2pAudioRed),
                            this._applySettings()
                        } catch (e) {
                            return Se.log(ee.ERROR, "addTrack-direct"),
                            Yt.error("DirectTransport: Unable to add media source tracks", e, {
                                participantId: this._participantId
                            }),
                            void this.close(e)
                        }
                    this._setState(Mn.OPENED);
                    let t = e;
                    if (!e) {
                        let e = Object.keys(this._remoteSDP);
                        t = e[e.length - 1]
                    }
                    if (t && this._remoteSDP[t])
                        try {
                            yield this._setRemoteDescription(t, this._remoteSDP[t])
                        } catch (e) {
                            return void this.close()
                        }
                    this._remoteSDP = {},
                    this._remoteCandidates = {}
                }
                ))
            }
            updateSettings(e) {
                tn(e, this._serverSettings) || (this._serverSettings = e,
                this._applySettings())
            }
            preventRestart() {
                this._reconnectionPrevented = !0
            }
            allowRestart() {
                this._reconnectionPrevented = !1
            }
            close(e) {
                this._isOpen = !1,
                this._stopReconnection(),
                this._remoteStream && (this._remoteStream.getTracks().forEach((e=>{
                    e.stop(),
                    this._triggerEvent(In.REMOTE_TRACK_REMOVED, this._remoteStream, e)
                }
                )),
                this._remoteStream = null),
                this._stopStatInterval(),
                this._stopSettingsInterval(),
                this._pc && (this._pc.onicecandidate = null,
                this._pc.ontrack = null,
                this._pc.oniceconnectionstatechange = null,
                this._pc.onconnectionstatechange = null,
                this._pc.onsignalingstatechange = null,
                this._pc.close()),
                this.unsubscribe(),
                e ? (Yt.error("DirectTransport: Closed", e, {
                    participantId: this._participantId
                }),
                this._setState(Mn.FAILED)) : (Yt.debug("DirectTransport: Closed", {
                    participantId: this._participantId
                }),
                this._setState(Mn.CLOSED)),
                this._triggerEvent(In.PEER_CONNECTION_CLOSED)
            }
            _setState(e) {
                this._state !== e && (Yt.debug(`DirectTransport: State changed to ${e}`, {
                    participantId: this._participantId
                }),
                this._state = e,
                this._triggerEvent(In.STATE_CHANGED, e))
            }
            _onSignalingNotification(e) {
                var t, n, r, i;
                switch (e.notification) {
                case J.TRANSMITTED_DATA:
                    this._handleTransmittedData(e);
                    break;
                case J.SETTINGS_UPDATE:
                    Object.assign(this._networkLimits.badNet, (null == (t = e.settings) ? void 0 : t.badNet) || {}),
                    Object.assign(this._networkLimits.goodNet, (null == (n = e.settings) ? void 0 : n.goodNet) || {});
                    break;
                case J.CUSTOM_DATA:
                    e.data.hasOwnProperty("sdk") && (this._remoteNetworkStat.rtt = (null == (r = e.data.sdk) ? void 0 : r.rtt) || 0,
                    this._remoteNetworkStat.loss = (null == (i = e.data.sdk) ? void 0 : i.loss) || 0)
                }
            }
            _handleTransmittedData(e) {
                let t = e.data
                  , n = Ye.getPeerIdString(e.peerId);
                Ye.composeMessageId(e) === this._participantId && (t.candidate && t.candidate.candidate ? this._addIceCandidate(n, t.candidate).catch(this.close.bind(this)) : t.sdp && this._setRemoteDescription(n, t.sdp).catch(this.close.bind(this)))
            }
            _addIceCandidate(e, t) {
                return g(this, null, (function*() {
                    if (this._isOpen && (!this._remotePeerId || this._remotePeerId === e) && this._pc && this._pc.remoteDescription) {
                        Yt.debug("Add remote ice candidate", {
                            participantId: this._participantId,
                            candidate: t
                        });
                        try {
                            yield this._pc.addIceCandidate(new RTCIceCandidate(t))
                        } catch (e) {
                            throw Se.log(ee.ERROR, "addIceCandidate-direct"),
                            Yt.error("Unable to add remote ice candidate", e, {
                                participantId: this._participantId,
                                candidate: t
                            }),
                            e
                        }
                    } else
                        Yt.debug("Cache remote ice candidate", {
                            participantId: this._participantId,
                            candidate: t
                        }),
                        this._remoteCandidates[e] = this._remoteCandidates[e] || [],
                        this._remoteCandidates[e].push(t)
                }
                ))
            }
            _setRemoteCandidates(e) {
                return g(this, null, (function*() {
                    if (!this._remoteCandidates[e])
                        return void Yt.log(`No cached candidates found for peer ${e}`);
                    let t = this._remoteCandidates[e];
                    this._remoteCandidates[e] = [];
                    for (let n of t)
                        try {
                            yield this._addIceCandidate(e, n)
                        } catch (e) {}
                }
                ))
            }
            _setRemoteDescription(e, t) {
                return g(this, null, (function*() {
                    if (!this._isOpen || this._remotePeerId && this._remotePeerId !== e || !this._pc)
                        this._remoteSDP[e] = t;
                    else {
                        Yt.debug("Add remote description", {
                            participantId: this._participantId,
                            sdp: t
                        }),
                        this._calcFingerprint(t.sdp);
                        try {
                            yield this._pc.setRemoteDescription(new RTCSessionDescription(t)),
                            yield this._setRemoteCandidates(e)
                        } catch (e) {
                            throw Se.log(ee.ERROR, "setRemoteDescription-direct"),
                            Yt.error("Unable to set remote description", e, {
                                participantId: this._participantId,
                                sdp: t
                            }),
                            e
                        }
                    }
                }
                ))
            }
            _onAddTrack(e) {
                Yt.debug("Added remote track", {
                    participantId: this._participantId,
                    kind: e.track.kind
                }),
                this._remoteStream ? this._remoteStream.addTrack(e.track) : (this._remoteStream = new MediaStream([e.track]),
                this._remoteStream.onremovetrack = e=>{
                    this._triggerEvent(In.REMOTE_TRACK_REMOVED, this._remoteStream, e.track)
                }
                ),
                this._triggerEvent(In.REMOTE_TRACK_ADDED, this._remoteStream, e.track)
            }
            _handleIceCandidate(e) {
                return g(this, null, (function*() {
                    e.candidate && this._signaling.ready && (Yt.debug("Local ice candidate", {
                        participantId: this._participantId,
                        candidate: e.candidate
                    }),
                    yield this._signaling.sendCandidate(this._participantId, e.candidate))
                }
                ))
            }
            _onSignalingStateChange() {
                switch (Yt.debug(`DirectTransport: Signaling state changed to ${this._pc.signalingState}`, {
                    participantId: this._participantId
                }),
                this._pc.signalingState) {
                case "have-local-offer":
                    let e = this._pc.localDescription;
                    e ? this._signaling.sendSdp(this._participantId, e).catch(this.close.bind(this)) : this.close(new Error);
                    break;
                case "have-remote-offer":
                    this._createAnswer().catch(this.close.bind(this)).then((e=>g(this, null, (function*() {
                        return this._signaling.sendSdp(this._participantId, e)
                    }
                    )))).catch(this.close.bind(this))
                }
            }
            _onIceConnectionStateChange() {
                if ("checking" === (Yt.debug(`DirectTransport: Ice Connection state changed to ${this._pc.iceConnectionState}`, {
                    participantId: this._participantId
                }),
                this._pc.iceConnectionState)) {
                    let e = this.getState();
                    e === Mn.IDLE || e === Mn.OPENED ? this._setState(Mn.CONNECTING) : this._setState(Mn.RECONNECTING)
                }
            }
            _onConnectionStateChange() {
                switch (Yt.debug(`DirectTransport: Connection state changed to ${this._pc.connectionState}`, {
                    participantId: this._participantId
                }),
                Se.log(ee.ICE_CONNECTION_STATE, this._pc.connectionState),
                this._pc.connectionState) {
                case "connected":
                    this._neverConnected = !1,
                    this._setState(Mn.CONNECTED),
                    this._stopReconnection(),
                    Ye.getPeerConnectionHostInfo(this._pc).then((e=>{
                        e && Se.log(ee.ICE_CONNECTION_TYPE, e.type)
                    }
                    ));
                    break;
                case "failed":
                case "disconnected":
                    this._reconnectionPrevented ? this.close(new Error(`Ice connection ${this._pc.connectionState}`)) : (this._setState(Mn.RECONNECTING),
                    this._startReconnection());
                    break;
                case "closed":
                    this.close(new Error("Ice connection closed"))
                }
            }
            _startReconnection() {
                this._reconnectionTimeout || this._iceRestartTimeout || (Yt.log("Waiting for reconnection...", {
                    participantId: this._participantId
                }),
                this._reconnectionTimeout = window.setTimeout((()=>{
                    this._reconnectionTimeout = null,
                    this._neverConnected ? this._requestTopologySwitch() : this._startIceRestart()
                }
                ), kt.transportConnectionWaitTime))
            }
            _requestTopologySwitch() {
                this._isMaster && this._signaling.ready && (Yt.log("Switch topology DIRECT to SERVER", {
                    participantId: this._participantId
                }),
                this._signaling.switchTopology(Rn.SERVER))
            }
            _stopReconnection() {
                this._reconnectionTimeout && (clearTimeout(this._reconnectionTimeout),
                this._reconnectionTimeout = null),
                this._iceRestartTimeout && (clearTimeout(this._iceRestartTimeout),
                this._iceRestartTimeout = null)
            }
            _startIceRestart() {
                this._isMaster ? (Se.log(ee.ICE_RESTART),
                Yt.log("Ice restart", {
                    participantId: this._participantId
                }),
                this._createOffer(!0).catch(this.close.bind(this))) : Yt.debug("Waiting for ice restart...", {
                    participantId: this._participantId
                }),
                this._iceRestartTimeout = window.setTimeout((()=>{
                    this._iceRestartTimeout = null,
                    Yt.error("Ice restart failed", {
                        participantId: this._participantId
                    }),
                    Se.log(ee.ERROR, "iceRestart-direct"),
                    this._requestTopologySwitch()
                }
                ), kt.iceRestartWaitTime)
            }
            _createOffer(e) {
                return g(this, null, (function*() {
                    let t = {
                        iceRestart: e,
                        offerToReceiveAudio: !0,
                        offerToReceiveVideo: !0
                    };
                    return Yt.debug("Create offer", {
                        participantId: this._participantId,
                        options: t
                    }),
                    this._pc.createOffer(t).catch((e=>{
                        throw Yt.error("Unable to create offer", e, {
                            participantId: this._participantId
                        }),
                        Se.log(ee.ERROR, "createOffer-direct"),
                        e
                    }
                    )).then((e=>g(this, null, (function*() {
                        return Yt.debug("Created offer", {
                            participantId: this._participantId,
                            offer: e
                        }),
                        e = An._patchDescription(e),
                        Yt.debug("Set local description", {
                            participantId: this._participantId,
                            offer: e
                        }),
                        this._calcFingerprint(e.sdp),
                        this._pc.setLocalDescription(e).then((()=>this._pc.localDescription))
                    }
                    )))).catch((e=>{
                        throw Yt.error("Unable to set local description", e, {
                            participantId: this._participantId
                        }),
                        Se.log(ee.ERROR, "setLocalDescription-direct"),
                        e
                    }
                    ))
                }
                ))
            }
            _createAnswer() {
                return g(this, null, (function*() {
                    return Yt.debug("Create answer", {
                        participantId: this._participantId
                    }),
                    this._pc.createAnswer().catch((e=>{
                        throw Yt.error("Unable to create answer", e, {
                            participantId: this._participantId
                        }),
                        Se.log(ee.ERROR, "createAnswer-direct"),
                        e
                    }
                    )).then((e=>g(this, null, (function*() {
                        return Yt.debug("Created answer", {
                            participantId: this._participantId,
                            answer: e
                        }),
                        e = An._patchDescription(e),
                        Yt.debug("Set local description", {
                            participantId: this._participantId,
                            answer: e
                        }),
                        this._calcFingerprint(e.sdp),
                        this._pc.setLocalDescription(e)
                    }
                    )))).then((()=>this._pc.localDescription)).catch((e=>{
                        throw Yt.error("Unable to set local description", e, {
                            participantId: this._participantId
                        }),
                        Se.log(ee.ERROR, "setLocalDescription-direct"),
                        e
                    }
                    ))
                }
                ))
            }
            static _patchDescription(e) {
                let t = !!wt.baseChromeVersion();
                return e.sdp = Ye.patchSDP(e.sdp, kt.preferH264 && wt.canPreferH264(), wt.isBrokenH264(), kt.preferVP9, t && kt.audioNack, kt.p2pAudioRed),
                e
            }
            _onReplacedTrack(e) {
                this._pc && (this._pc.getSenders().forEach((t=>{
                    t.track && t.track.kind === e.kind && (t.track.enabled = e.enabled,
                    t.replaceTrack(e).catch((e=>{
                        Yt.error("DirectTransport: Unable to replace track", e, {
                            participantId: this._participantId
                        }),
                        Se.log(ee.ERROR, "replaceTrack-direct")
                    }
                    )))
                }
                )),
                this._applySettings())
            }
            _startStatInterval() {
                if (this._statInterval)
                    return;
                let e = ()=>{
                    this._pc ? wn(this._pc, this._lastStat).then((t=>{
                        this._lastStat = t;
                        let n = {
                            inbound: {
                                topology: Rn.DIRECT,
                                transport: t.transport,
                                rtps: t.rtps.filter((e=>"inbound-rtp" === e.type && (e.userId = this._participantId,
                                !0)))
                            },
                            outbound: {
                                topology: Rn.DIRECT,
                                transport: t.transport,
                                rtps: t.rtps.filter((e=>"outbound-rtp" === e.type))
                            }
                        };
                        this._checkBadNetwork(n),
                        this._triggerEvent(In.REMOTE_DATA_STATS, n),
                        this._statInterval = window.setTimeout(e, kt.statisticsInterval)
                    }
                    )) : this._stopStatInterval()
                }
                ;
                this._statInterval = window.setTimeout(e, kt.statisticsInterval)
            }
            _stopStatInterval() {
                this._statInterval && (window.clearTimeout(this._statInterval),
                this._statInterval = null)
            }
            _checkBadNetwork(e) {
                if (!this._signaling.ready)
                    return;
                let t = e=>e.rtt <= this._networkLimits.goodNet.rtt && e.loss <= this._networkLimits.goodNet.loss
                  , n = e=>e.rtt >= this._networkLimits.badNet.rtt || e.loss >= this._networkLimits.badNet.loss
                  , r = Math.round(1e3 * e.outbound.transport.currentRoundTripTime) || 0
                  , i = e.inbound.rtps.reduce(((e,t)=>Math.max(e, t.packetLoss || 0)), 0)
                  , o = {
                    rtt: this._lastNetworkStat.rtt * (1 - Dn) + r * Dn,
                    loss: this._lastNetworkStat.loss * (1 - Dn) + i * Dn
                }
                  , a = n(o)
                  , s = t(o)
                  , c = n(this._remoteNetworkStat)
                  , _ = t(this._remoteNetworkStat)
                  , l = n(this._lastNetworkStat)
                  , u = t(this._lastNetworkStat)
                  , d = a || c ? .2 : s && _ ? 1 : 0
                  , p = Date.now();
                if ((l !== a || u !== s || p - this._lastNetworkStat.date > kt.networkStatisticsInterval) && (this._lastNetworkStat.date = Date.now(),
                this._signaling.customData({
                    sdk: Object.assign({
                        type: "bad-net"
                    }, o)
                }, null).catch((e=>{
                    Yt.warn("Unable to send [bad-net]", e)
                }
                ))),
                d) {
                    let e = {};
                    e[this._participantId] = e[""] = d,
                    this._triggerEvent(In.NETWORK_STATUS, e)
                }
                this._lastNetworkStat.rtt = o.rtt,
                this._lastNetworkStat.loss = o.loss
            }
            _startSettingsInterval() {
                if (this._settingsInterval)
                    return;
                let e = ()=>{
                    this._pc ? (this._applySettings(),
                    this._settingsInterval = window.setTimeout(e, 2e3)) : this._stopSettingsInterval()
                }
                ;
                this._settingsInterval = window.setTimeout(e, 2e3)
            }
            _stopSettingsInterval() {
                this._settingsInterval && (window.clearTimeout(this._settingsInterval),
                this._settingsInterval = null)
            }
            _calcFingerprint(e) {
                let t = Ye.sdpFingerprint(e);
                null !== t ? null === this._fingerprint ? this._fingerprint = t : (jt.onFingerprintChange((this._fingerprint ^ t).toString()),
                this._fingerprint = null) : Yt.warn("Fingerprint calculation is unsupported")
            }
            _applySettings() {
                var e;
                let t = this._mediaSource.getMediaSettings().isScreenSharingEnabled ? this._serverSettings.screenSharing : this._serverSettings.camera;
                t && "connected" === (null == (e = this._pc) ? void 0 : e.connectionState) && (this._prevConsumerSettings = Ye.applySettings(this._pc, t, this._prevConsumerSettings))
            }
        }
        , Sn = (e=>(e.producerNotification = "producerNotification",
        e.producerCommand = "producerCommand",
        e.consumerScreenShare = "consumerScreenShare",
        e.producerScreenShare = "producerScreenShare",
        e))(Sn || {}), Pn = Sn, On = class extends y {
            constructor(e, t, n) {
                super(),
                this._pc = null,
                this._producerNotification = null,
                this._producerCommand = null,
                this._producerScreen = null,
                this._consumerScreen = null,
                this._isOpen = !1,
                this._observer = !1,
                this._reconnectionPrevented = !1,
                this._state = Mn.IDLE,
                this._statInterval = null,
                this._settingsInterval = null,
                this._statBytes = {},
                this._ssrcMap = {},
                this._producerOfferIsProcessing = !1,
                this._producerNextOffer = null,
                this._prevConsumerSettings = {},
                this._captureSender = null,
                this._captureReceiver = null,
                this._participantIdRegistry = null,
                this._disabledSenders = new Set,
                this._rtpReceiversByStreamId = {},
                this._producerSessionId = "",
                this._signaling = e,
                this._mediaSource = t,
                this.subscribe(this._signaling, X.NOTIFICATION, this._onSignalingNotification.bind(this)),
                this.subscribe(this._mediaSource, Fe.TRACK_REPLACED, this._onReplacedTrack.bind(this)),
                this.subscribe(this._mediaSource, Fe.SOURCE_CHANGED, this._applyConsumerSettings.bind(this)),
                this.subscribe(this._mediaSource, Fe.SCREEN_STATUS, this._onScreenSharingStatus.bind(this)),
                this._perfStatReporter = new _n(this,e),
                this._serverSettings = n,
                Yt.debug("ServerTransport: Created")
            }
            getState() {
                return this._state || Mn.IDLE
            }
            updateStatisticsInterval() {
                this._stopStatInterval();
                let e = this.getState();
                e !== Mn.IDLE && e !== Mn.CLOSED && e !== Mn.FAILED && this._startStatInterval()
            }
            open(e=!1) {
                this._isOpen ? Yt.log("ServerTransport: Already opened connections") : (this._isOpen = !0,
                this._observer = e,
                this._openConnection())
            }
            close(e) {
                this._isOpen = !1,
                this._closeConnection(),
                this.unsubscribe(),
                e ? (Yt.error("ServerTransport: Closed", e),
                this._setState(Mn.FAILED)) : (Yt.debug("ServerTransport: Closed"),
                this._setState(Mn.CLOSED))
            }
            removeParticipant(e) {
                var t;
                null == (t = this._captureReceiver) || t.close(e)
            }
            preventRestart() {
                this._reconnectionPrevented = !0
            }
            allowRestart() {
                this._reconnectionPrevented = !1
            }
            updateSettings(e) {
                tn(e, this._serverSettings) || (this._serverSettings = e,
                this._applyConsumerSettings())
            }
            _closeConnection() {
                this._stopStatInterval(),
                this._stopSettingsInterval(),
                this._removeCaptureSender(),
                this._removeCaptureReceiver(),
                this._pc && (this._rtpReceiversByStreamId = {},
                this._disabledSenders.forEach((e=>{
                    var t;
                    return null == (t = e.track) ? void 0 : t.stop()
                }
                )),
                this._disabledSenders.clear(),
                this._pc.ontrack = null,
                this._pc.onconnectionstatechange = null,
                this._pc.onsignalingstatechange = null,
                this._participantIdRegistry = null,
                On._closeDataChannel(this._producerNotification),
                On._closeDataChannel(this._producerCommand),
                On._closeDataChannel(this._producerScreen),
                On._closeDataChannel(this._consumerScreen),
                this._pc.close(),
                this._pc = null,
                this._producerOfferIsProcessing = !1,
                this._producerNextOffer = null),
                this._triggerEvent(In.PEER_CONNECTION_CLOSED)
            }
            static _closeDataChannel(e) {
                e && (e.onopen = null,
                e.onmessage = null,
                e.onerror = null,
                e.close())
            }
            _createDataChannel(e, t, n) {
                Yt.debug(`[${t}] data channel opening`);
                let r = e.createDataChannel(t, {
                    ordered: !0
                });
                r.onopen = ()=>{
                    let e = r.readyState;
                    "open" === e ? (Yt.debug(`[${t}] data channel opened`),
                    r.onerror = e=>{
                        Yt.error(`[${t}] data channel error`, e)
                    }
                    ,
                    n(r)) : Yt.error(`[${t}] data channel open failed, state [${e}]`)
                }
            }
            _openConnection(e=!1) {
                Yt.debug("ServerTransport: Open single connection");
                let t = {};
                wt.baseChromeVersion() && (t.sdpSemantics = On._isUnifiedPlanSupported() ? "unified-plan" : "plan-b"),
                this._pc = new RTCPeerConnection(t,{
                    optional: [{
                        googSuspendBelowMinBitrate: !1
                    }]
                }),
                this._pc.ontrack = this._onAddTrack.bind(this, this._pc),
                this._pc.onconnectionstatechange = Ye.throttle((e=>{
                    this._pc && this._onConnectionStateChange(this._pc, e)
                }
                ), 500),
                this._pc.onsignalingstatechange = On._onSignalingStateChange.bind(this, this._pc),
                kt.producerNotificationDataChannel && this._createDataChannel(this._pc, Pn.producerNotification, (e=>{
                    this._producerNotification = e,
                    this._producerNotification.binaryType = "arraybuffer",
                    this._participantIdRegistry = new class {
                        constructor() {
                            this.streamDescriptionByCompactId = new Map
                        }
                        getStreamDescription(e) {
                            return this.streamDescriptionByCompactId.get(e)
                        }
                        handleMessage(e) {
                            var t, n;
                            let r = new Uint8Array(e)
                              , i = r[0]
                              , o = r.subarray(1);
                            switch (i) {
                            case 1:
                                let e = (0,
                                l.decode)(o);
                                return Object.entries(e).forEach((([e,t])=>{
                                    let n = Jt(e);
                                    this.streamDescriptionByCompactId.set(t, n)
                                }
                                )),
                                null;
                            case 2:
                            case 4:
                                let r = (0,
                                l.decode)(o)
                                  , a = [];
                                for (let e of r) {
                                    let t = this.getStreamDescription(e);
                                    t && a.push(t.participantId)
                                }
                                return 2 === i ? {
                                    type: "notification",
                                    notification: J.AUDIO_ACTIVITY,
                                    activeParticipants: a
                                } : {
                                    type: "notification",
                                    notification: J.STALLED_ACTIVITY,
                                    stalledParticipants: a
                                };
                            case 3:
                                let s = (0,
                                l.decode)(o);
                                return {
                                    type: "notification",
                                    notification: J.SPEAKER_CHANGED,
                                    speaker: null == (t = this.getStreamDescription(s)) ? void 0 : t.participantId
                                };
                            case 5:
                                let c = (0,
                                l.decode)(o);
                                return {
                                    type: "notification",
                                    notification: J.VIDEO_QUALITY_UPDATE,
                                    quality: {
                                        maxBitrate: c[0],
                                        maxDimension: c[1]
                                    }
                                };
                            case 6:
                                let _ = (0,
                                l.decode)(o)
                                  , u = {};
                                for (let[e,t] of Object.entries(_)) {
                                    let r = null == (n = this.getStreamDescription(Number(e))) ? void 0 : n.participantId;
                                    r && (u[r] = t / 100)
                                }
                                return {
                                    type: "notification",
                                    notification: J.NETWORK_STATUS,
                                    statuses: u
                                };
                            case 7:
                                return this._createParticipantSourcesUpdateNotification(o);
                            default:
                                return Yt.debug("unsupported message type: " + i),
                                null
                            }
                        }
                        _createParticipantSourcesUpdateNotification(e) {
                            let t = (0,
                            l.decode)(e)
                              , n = [];
                            for (let[e,r] of Object.entries(t)) {
                                let t, i = r[0], o = r[1], a = r[2];
                                if (null !== i) {
                                    if (t = this.getStreamDescription(i),
                                    !t) {
                                        Yt.error(`could not uncompress participant ID ${i}`);
                                        continue
                                    }
                                } else
                                    t = null;
                                if (null === a) {
                                    Yt.error("unexpected null sequenceNumber", e, r);
                                    continue
                                }
                                let s = ne.PARTICIPANT_AGNOSTIC_TRACK_PREFIX + "-" + e
                                  , c = o ? o >>> 0 : null;
                                n.push({
                                    participantStreamDescription: t,
                                    streamId: s,
                                    rtpTimestamp: c,
                                    sequenceNumber: a
                                })
                            }
                            return {
                                type: "notification",
                                notification: J.PARTICIPANT_SOURCES_UPDATE,
                                participantUpdateInfos: n
                            }
                        }
                    }
                    ,
                    this._signaling.setParticipantIdRegistry(this._participantIdRegistry),
                    this._signaling.setProducerNotificationDataChannel(e)
                }
                )),
                kt.producerCommandDataChannel && this._createDataChannel(this._pc, Pn.producerCommand, (e=>{
                    this._producerCommand = e,
                    this._signaling.setProducerCommandDataChannel(e)
                }
                )),
                kt.producerScreenDataChannel && this._createDataChannel(this._pc, Pn.producerScreenShare, (e=>{
                    this._producerScreen = e,
                    this._producerScreen.binaryType = "arraybuffer",
                    this._createCaptureReceiver()
                }
                ));
                try {
                    this._mediaSource.addTrackToPeerConnection(this._pc, this._observer, !1, kt.serverAudioRed),
                    this._prevConsumerSettings = {},
                    this._applyConsumerSettings()
                } catch (e) {
                    return Yt.error("ServerTransport: Unable to add media source tracks", e),
                    Se.log(ee.ERROR, "addTrack-single"),
                    void this.close(e)
                }
                kt.consumerScreenDataChannel && this._createDataChannel(this._pc, Pn.consumerScreenShare, (e=>{
                    this._consumerScreen = e,
                    this._consumerScreen.binaryType = "arraybuffer";
                    let t = this._mediaSource.getScreenTrack();
                    t && this._createCaptureSender(t)
                }
                )),
                e || this._allocateConsumer(),
                this._setState(Mn.OPENED),
                this._startStatInterval(),
                this._startSettingsInterval()
            }
            _reconnect() {
                this.getState() !== Mn.OPENED && (this._setState(Mn.RECONNECTING),
                this._closeConnection(),
                this._openConnection(!0))
            }
            _signalActiveParticipants(e) {
                this._triggerEvent(In.SIGNALLED_ACTIVE_PARTICIPANTS, e)
            }
            _signalStalledParticipants(e) {
                this._triggerEvent(In.SIGNALLED_STALLED_PARTICIPANTS, e)
            }
            _signalSpeakerChanged(e) {
                this._triggerEvent(In.SIGNALLED_SPEAKER_CHANGED, e)
            }
            _signalNetworkStatus(e) {
                this._triggerEvent(In.NETWORK_STATUS, e)
            }
            _updateSSRCMap(e) {
                e && e.sdp.split("\n").forEach((e=>{
                    let t = `a=ssrc:([0-9]+) label:(audio|video)-((?:[ug]?[\\d]+)|(?:mix)|(?:${ne.PARTICIPANT_AGNOSTIC_TRACK_PREFIX}-[0-9]+))`
                      , n = new RegExp(t).exec(e);
                    n && (this._ssrcMap[n[1]] = n[3])
                }
                ))
            }
            _createCaptureSender(e) {
                !e || !kt.consumerScreenDataChannel || !this._consumerScreen || !this._mediaSource.getMediaSettings().isScreenSharingEnabled || (this._captureSender && this._removeCaptureSender(),
                this._captureSender = new Mt(e,this._consumerScreen))
            }
            _removeCaptureSender() {
                var e;
                null == (e = this._captureSender) || e.destroy(),
                this._captureSender = null
            }
            _createCaptureReceiver() {
                !kt.producerScreenDataChannel || !this._producerScreen || !this._participantIdRegistry || (this._captureReceiver && this._removeCaptureReceiver(),
                this._captureReceiver = new St(this._producerScreen,this._participantIdRegistry,((e,t)=>{
                    this._triggerEvent(In.REMOTE_STREAM_SECOND, e, t)
                }
                ),(e=>{
                    this._triggerEvent(In.REMOTE_STREAM_SECOND, e, null)
                }
                )))
            }
            _removeCaptureReceiver() {
                var e;
                null == (e = this._captureReceiver) || e.destroy(),
                this._captureReceiver = null
            }
            _applyConsumerSettings() {
                let e = this._mediaSource.getMediaSettings().isScreenSharingEnabled && !kt.consumerScreenDataChannel ? this._serverSettings.screenSharing : this._serverSettings.camera;
                if (e && this._pc) {
                    let t = [];
                    this._pc.getSenders().forEach((n=>{
                        if (!n.track || n.track.kind !== Ke.video)
                            return;
                        let r = !this._disabledSenders.has(n)
                          , i = 0 !== e.maxDimension;
                        if (r && !i)
                            return Yt.log("Disabling video upload"),
                            this._disabledSenders.add(n),
                            void n.replaceTrack(wt.getBlackMediaTrack()).catch((e=>{
                                Yt.error("Could not disable video upload", e)
                            }
                            ));
                        let o = this._mediaSource.getSendVideoTrack();
                        if (!r && i && o) {
                            Yt.log("Enabling video upload"),
                            this._disabledSenders.delete(n);
                            let e = n.track;
                            e.enabled = o.enabled,
                            n.replaceTrack(o).then((()=>e.stop())).catch((e=>{
                                Yt.error("Could not enable video upload", e)
                            }
                            ))
                        }
                        Ye.applyVideoTrackSettings(e, n, null != o ? o : n.track, this._prevConsumerSettings, t)
                    }
                    )),
                    this._prevConsumerSettings = t
                }
            }
            _onScreenSharingStatus(e) {
                e.track ? this._createCaptureSender(e.track) : this._removeCaptureSender()
            }
            _setState(e) {
                this._state !== e && (this._state = e,
                this._triggerEvent(In.STATE_CHANGED, e))
            }
            _startStatInterval() {
                if (this._statInterval)
                    return;
                let e = ()=>{
                    this._pc ? (this._collectStat().then((e=>{
                        this._reportStats(e),
                        this._detectStaleTracks(e)
                    }
                    )).catch((()=>{}
                    )),
                    this._statInterval = window.setTimeout(e, kt.statisticsInterval)) : this._stopStatInterval()
                }
                ;
                this._statInterval = window.setTimeout(e, kt.statisticsInterval)
            }
            _stopStatInterval() {
                this._statInterval && (window.clearTimeout(this._statInterval),
                this._statInterval = null),
                this._statBytes = {}
            }
            _startSettingsInterval() {
                if (this._settingsInterval)
                    return;
                let e = ()=>{
                    this._pc ? (this._applyConsumerSettings(),
                    this._settingsInterval = window.setTimeout(e, 2e3)) : this._stopSettingsInterval()
                }
                ;
                this._settingsInterval = window.setTimeout(e, 2e3)
            }
            _stopSettingsInterval() {
                this._settingsInterval && (window.clearTimeout(this._settingsInterval),
                this._settingsInterval = null)
            }
            _collectStat() {
                return g(this, null, (function*() {
                    if (!this._pc)
                        return Promise.reject();
                    let e = yield wn(this._pc, this._lastStat, this._ssrcMap);
                    return this._lastStat = e,
                    e
                }
                ))
            }
            _reportStats(e) {
                this._triggerEvent(In.REMOTE_DATA_STATS, {
                    inbound: {
                        topology: Rn.SERVER,
                        transport: e.transport,
                        rtps: e.rtps.filter((e=>"inbound-rtp" === e.type))
                    },
                    outbound: {
                        topology: Rn.SERVER,
                        transport: e.transport,
                        rtps: e.rtps.filter((e=>"outbound-rtp" === e.type))
                    }
                })
            }
            _detectStaleTracks(e) {
                let t = e.rtps.find((e=>"inbound-rtp" === e.type && "audio" === e.kind && "mix" === this._ssrcMap[e.ssrc]));
                if (!t)
                    return;
                let n = ne.AUDIO_MIX
                  , r = this._statBytes[n]
                  , i = !1;
                if (r) {
                    let e = t.bytesReceived - r.bytesReceived;
                    e >= 0 && e <= 5 && (i = !0),
                    r.stalled !== i && this._triggerEvent(In.REMOTE_ALL_STALL, i)
                }
                this._statBytes[n] = {
                    bytesReceived: t.bytesReceived,
                    stalled: i
                }
            }
            _allocateConsumer() {
                if (!this._signaling.ready)
                    return;
                let e = {
                    estimatedPerformanceIndex: _n.getEstimatedPerformanceIndex(),
                    audioMix: !0,
                    consumerUpdate: !0,
                    producerNotificationDataChannelVersion: kt.producerNotificationDataChannel ? 6 : 0,
                    producerCommandDataChannelVersion: kt.producerCommandDataChannel ? 2 : 0,
                    consumerScreenDataChannelVersion: kt.consumerScreenDataChannel ? 1 : 0,
                    producerScreenDataChannelVersion: kt.producerScreenDataChannel ? 1 : 0,
                    onDemandTracks: !0,
                    unifiedPlan: On._isUnifiedPlanSupported(),
                    singleSession: !0,
                    videoTracksCount: kt.videoTracksCount,
                    red: kt.serverAudioRed
                };
                this._signaling.allocateConsumer(null, e)
            }
            _acceptProducer(e) {
                return g(this, null, (function*() {
                    if (this._producerOfferIsProcessing)
                        return this._producerNextOffer = e,
                        void Yt.debug("[single] wait until other remote offer is processed");
                    this._producerOfferIsProcessing = !0;
                    let t = new RTCSessionDescription({
                        type: "offer",
                        sdp: e
                    });
                    if (Yt.debug("[single] set remote offer", {
                        offer: t
                    }),
                    !this._pc)
                        throw new Error("Interrupt allocation");
                    this._pc.setRemoteDescription(t).catch((e=>{
                        throw Yt.error("[single] unable to set remote offer", e),
                        Se.log(ee.ERROR, "setRemoteDescription-single"),
                        e
                    }
                    )).then((()=>g(this, null, (function*() {
                        if (Yt.debug("[single] create local answer"),
                        !this._pc)
                            throw new Error("Interrupt allocation");
                        return this._pc.createAnswer()
                    }
                    )))).catch((e=>{
                        throw Yt.error("[single] unable to create answer", e),
                        Se.log(ee.ERROR, "createAnswer-single"),
                        e
                    }
                    )).then((e=>(e.sdp = Ye.patchSDP(e.sdp, !1, wt.isBrokenH264(), !1),
                    e))).then((e=>g(this, null, (function*() {
                        if (Yt.debug("[single] set local answer", {
                            answer: e
                        }),
                        !this._pc)
                            throw new Error("Interrupt allocation");
                        return yield this._pc.setLocalDescription(e),
                        e
                    }
                    )))).catch((e=>{
                        throw Yt.error("[single] unable to set local answer", e),
                        Se.log(ee.ERROR, "setLocalDescription-single"),
                        e
                    }
                    )).then((e=>g(this, null, (function*() {
                        Yt.debug("[single] transmit local answer", {
                            answer: e
                        }),
                        this._updateSSRCMap(t),
                        yield this._signaling.acceptProducer(e, Object.keys(this._ssrcMap)),
                        Yt.debug("[single] remote offer has been processed")
                    }
                    )))).catch((e=>{
                        Yt.warn("[single] unable to send local answer", e),
                        Se.log(ee.ERROR, "acceptProducer")
                    }
                    )).then((()=>g(this, null, (function*() {
                        if (this._producerOfferIsProcessing = !1,
                        this._producerNextOffer) {
                            Yt.debug("[single] there is other unprocessed remote offer, process it");
                            let e = this._producerNextOffer;
                            return this._producerNextOffer = null,
                            this._acceptProducer(e)
                        }
                    }
                    )))).catch((e=>this.close(e)))
                }
                ))
            }
            _onSignalingNotification(e) {
                return g(this, null, (function*() {
                    if (this._isOpen)
                        switch (e.notification) {
                        case J.PRODUCER_UPDATED:
                            yield this._onProducerUpdated(e);
                            break;
                        case J.REALLOC_CON:
                            this._reconnect();
                            break;
                        case J.AUDIO_ACTIVITY:
                            this._signalActiveParticipants(e.activeParticipants);
                            break;
                        case J.SPEAKER_CHANGED:
                            this._signalSpeakerChanged(e.speaker);
                            break;
                        case J.STALLED_ACTIVITY:
                            this._signalStalledParticipants(e.stalledParticipants);
                            break;
                        case J.NETWORK_STATUS:
                            this._signalNetworkStatus(e.statuses)
                        }
                }
                ))
            }
            _onProducerUpdated(e) {
                return g(this, null, (function*() {
                    this._producerSessionId && this._producerSessionId !== e.sessionId && this._reconnect(),
                    kt.breakVideoPayloadTypes && (Yt.log("test mode enabled, video switched off"),
                    this._signaling.requestTestMode("breakVideoPayloadTypes")),
                    this._producerSessionId = e.sessionId,
                    yield this._acceptProducer(e.description)
                }
                ))
            }
            _onAddTrack(e, t) {
                Yt.debug("[single] remote track (added)", {
                    track: t.track
                });
                let n = t.streams[0];
                n ? (n.onremovetrack || (n.onremovetrack = e=>{
                    this._triggerEvent(In.REMOTE_TRACK_REMOVED, n.id, n, e.track)
                }
                ),
                n.getTracks().find((e=>e.id === t.track.id)) || n.addTrack(t.track),
                this._rtpReceiversByStreamId[n.id] = t.receiver,
                this._triggerEvent(In.REMOTE_TRACK_ADDED, n.id, n, t.track)) : Yt.error("[single] unable to get media stream from track event")
            }
            static _onSignalingStateChange(e, t) {
                Yt.debug("[single] signaling state changed", {
                    state: e.signalingState
                }, t)
            }
            _onConnectionStateChange(e, t) {
                switch (Yt.debug("[single] connection state changed", {
                    state: e.connectionState
                }, t),
                Se.log(ee.ICE_CONNECTION_STATE, e.connectionState),
                e.connectionState) {
                case "failed":
                    this._reconnectionPrevented ? this.close(new Error("Ice connection failed")) : this._reconnect();
                    break;
                case "connecting":
                    let t = this.getState();
                    t === Mn.IDLE || t === Mn.OPENED ? this._setState(Mn.CONNECTING) : "checking" === e.iceConnectionState && this._setState(Mn.RECONNECTING);
                    break;
                case "disconnected":
                    this._reconnectionPrevented ? this.close(new Error("Ice connection disconnected")) : this._setState(Mn.RECONNECTING);
                    break;
                case "connected":
                    this._setState(Mn.CONNECTED),
                    Ye.getPeerConnectionHostInfo(e).then((e=>{
                        e && Se.log(ee.ICE_CONNECTION_TYPE, e.type)
                    }
                    ))
                }
            }
            _onReplacedTrack(e, t) {
                this._pc && (kt.consumerScreenDataChannel && t && (e = t),
                this._pc.getSenders().forEach((t=>{
                    t.track && t.track.kind === e.kind && !this._disabledSenders.has(t) && (t.track.enabled = e.enabled,
                    t.replaceTrack(e).catch((e=>{
                        Yt.error("ServerTransport: Unable to replace track", e),
                        Se.log(ee.ERROR, "replaceTrack-single")
                    }
                    )))
                }
                ))),
                this._applyConsumerSettings()
            }
            static _isUnifiedPlanSupported() {
                let e = wt.baseChromeVersion();
                return e ? kt.isUnifiedPlanSupported("Chrome", e) : kt.isUnifiedPlanSupported(wt.browserName(), Number(wt.browserVersion()))
            }
            getStreamWaitingTimeMs(e, t) {
                if (!this._pc)
                    return Se.log(ee.PAT_WAITING_TIME_ERROR, "noConnection"),
                    Yt.error("Cannot get stream waiting time, peer connection is not initialized"),
                    0;
                let n = this._rtpReceiversByStreamId[e];
                if (!n)
                    return Se.log(ee.PAT_WAITING_TIME_ERROR, "noReceiver"),
                    Yt.error(`Cannot get stream waiting time, cannot find RTP receiver by stream ID: ${e}`),
                    0;
                let r = n.getSynchronizationSources();
                if (!r || !r.length)
                    return Yt.log(`Cannot get stream waiting time, ${e} receiver has no synchronization sources`),
                    0;
                let i = r[0].rtpTimestamp;
                if (!Number.isInteger(i))
                    return Se.log(ee.PAT_WAITING_TIME_ERROR, "timestampNotInteger"),
                    Yt.error(`Cannot get stream waiting time, ${e} receiver's RTP timestamp is not an integer: ${i}`),
                    0;
                let o = t - i & 4294967295
                  , a = Math.ceil(o / 90);
                return Math.min(100, Math.max(0, a))
            }
        }
        , In = ((Cn = In || {}).REMOTE_TRACK_ADDED = "REMOTE_TRACK_ADDED",
        Cn.REMOTE_TRACK_REMOVED = "REMOTE_TRACK_REMOVED",
        Cn.REMOTE_STREAM_SECOND = "REMOTE_STREAM_SECOND",
        Cn.REMOTE_ALL_STALL = "REMOTE_ALL_STALL",
        Cn.REMOTE_DATA_STATS = "REMOTE_DATA_STATS",
        Cn.STATE_CHANGED = "STATE_CHANGED",
        Cn.LOCAL_STATE_CHANGED = "LOCAL_STATE_CHANGED",
        Cn.SIGNALLED_ACTIVE_PARTICIPANTS = "SIGNALLED_ACTIVE_PARTICIPANTS",
        Cn.SIGNALLED_SPEAKER_CHANGED = "SIGNALLED_SPEAKER_CHANGED",
        Cn.SIGNALLED_STALLED_PARTICIPANTS = "SIGNALLED_STALLED_PARTICIPANTS",
        Cn.TOPOLOGY_CHANGED = "TOPOLOGY_CHANGED",
        Cn.NETWORK_STATUS = "NETWORK_STATUS",
        Cn.PEER_CONNECTION_CLOSED = "PEER_CONNECTION_CLOSED",
        Cn), Mn = ((bn = Mn || {}).IDLE = "IDLE",
        bn.OPENED = "OPENED",
        bn.CONNECTING = "CONNECTING",
        bn.RECONNECTING = "RECONNECTING",
        bn.CONNECTED = "CONNECTED",
        bn.CLOSED = "CLOSED",
        bn.FAILED = "FAILED",
        bn), Rn = (e=>(e.DIRECT = "DIRECT",
        e.SERVER = "SERVER",
        e))(Rn || {}), Ln = class extends y {
            constructor(e, t, n, r) {
                super(),
                this._allocated = [],
                this._opened = [],
                this._directTransport = null,
                this._serverTransport = null,
                this._dtListeners = [],
                this._stListeners = [],
                this._states = {},
                this._localState = "IDLE",
                this._signaling = t,
                this._mediaSource = n,
                this._topology = e,
                this._serverSettings = r,
                this.subscribe(this._signaling, X.NOTIFICATION, this._onSignalingNotification.bind(this)),
                "SERVER" === e && (this._serverTransport = this._createServerTransport())
            }
            updateSettings(e) {
                this._serverSettings = e,
                this._directTransport && this._directTransport.updateSettings(e),
                this._serverTransport && this._serverTransport.updateSettings(e)
            }
            updateStatisticsInterval() {
                this._directTransport && this._directTransport.updateStatisticsInterval(),
                this._serverTransport && this._serverTransport.updateStatisticsInterval()
            }
            allocate(e, t=!1) {
                -1 === this._allocated.indexOf(e) ? (this._allocated.push(e),
                "DIRECT" === this._topology && !this._directTransport && (this._directTransport = this._createDirectTransport(e, t)),
                "SERVER" === this._topology && !this._serverTransport && (this._serverTransport = this._createServerTransport())) : Yt.warn(`The participant [${e}] has already had allocated transport`)
            }
            open(e, t=null, n=!1) {
                let r = !1;
                for (let t of e)
                    -1 === this._opened.indexOf(t) ? -1 !== this._allocated.indexOf(t) ? (this._opened.push(t),
                    r = !0) : Yt.warn(`The participant [${t}] has no allocated transport`) : Yt.warn(`The participant [${t}] has already had opened transport`);
                !r || ("DIRECT" === this._topology && this._directTransport && this._directTransport.open(t),
                "SERVER" === this._topology && this._serverTransport && (this._serverTransport.open(n),
                this._setStates(e, this._serverTransport.getState()),
                this._setLocalState(this._serverTransport.getState())),
                Yt.debug("The transport has been opened", e))
            }
            close(e) {
                var t;
                let n = this._allocated.indexOf(e)
                  , r = this._opened.indexOf(e);
                n < 0 && Yt.warn(`The participant [${e}] transport has already deallocated`),
                "DIRECT" === this._topology && this._directTransport && (this._directTransport.close(),
                this._directTransport = null),
                "SERVER" === this._topology && (null == (t = this._serverTransport) || t.removeParticipant(e),
                this._setState(e, "CLOSED")),
                r >= 0 && this._opened.splice(r, 1),
                n >= 0 && this._allocated.splice(n, 1)
            }
            destroy() {
                this.unsubscribe(),
                this._dtListeners && this._dtListeners.forEach((e=>{
                    e.dispose()
                }
                )),
                this._stListeners && this._stListeners.forEach((e=>{
                    e.dispose()
                }
                )),
                this._directTransport && (this._directTransport.close(),
                this._directTransport = null),
                this._serverTransport && (this._serverTransport.close(),
                this._serverTransport = null),
                this._allocated = [],
                this._opened = []
            }
            getTopology() {
                return this._topology
            }
            isAllocated(e) {
                return this._allocated.indexOf(e) >= 0
            }
            allocated() {
                return this._allocated.slice()
            }
            opened() {
                return this._opened.slice()
            }
            _setStates(e, t) {
                let n = e.filter((e=>this._states[e] !== t && (this._states[e] = t,
                !0)));
                n.length && this._triggerEvent("STATE_CHANGED", n, t)
            }
            _setState(e, t) {
                this._states[e] !== t && (this._states[e] = t,
                this._triggerEvent("STATE_CHANGED", [e], t))
            }
            _setLocalState(e) {
                this._localState !== e && (this._localState = e,
                this._triggerEvent("LOCAL_STATE_CHANGED", e))
            }
            _onSignalingNotification(e) {
                return e.notification === J.TOPOLOGY_CHANGED ? this._onTopologyChanged(e) : e.notification === J.RECORD_STARTED ? this._onRecordStarted(e) : void 0
            }
            _onTopologyChanged(e) {
                var t;
                if (e.topology !== this._topology) {
                    if (Yt.log(`Topology changed ${this._topology} -> ${e.topology}`),
                    Se.log(ee.TOPOLOGY_CHANGE_REQUESTED, e.topology),
                    this._topology = e.topology,
                    "SERVER" === this._topology && (this._serverTransport ? this._serverTransport.allowRestart() : (this._serverTransport = this._createServerTransport(),
                    this._opened.length > 0 && (null == (t = this._directTransport) || t.preventRestart(),
                    this._serverTransport.open()))),
                    "DIRECT" === this._topology) {
                        let t = e.offerTo || []
                          , n = e.offerToTypes || []
                          , r = e.offerToDeviceIdxs || []
                          , i = t.length && n.length ? Ye.composeParticipantId(t[0], n[0], r[0]) : null;
                        if (this._serverTransport && this._serverTransport.preventRestart(),
                        !this._allocated || 0 === this._allocated.length)
                            return void Yt.error("Topology changed to DIRECT, but the list of allocated participants is empty");
                        this._allocated.length > 1 && Yt.warn("Topology changed to DIRECT, but the allocated participants count more then one");
                        let o = this._allocated[0];
                        if (this._directTransport)
                            this._directTransport.allowRestart();
                        else {
                            let e = i === o;
                            this._directTransport = this._createDirectTransport(o, e)
                        }
                        this._opened.indexOf(o) >= 0 && this._directTransport.open()
                    }
                    this._triggerEvent("TOPOLOGY_CHANGED", this._topology)
                }
            }
            _onRecordStarted(e) {
                this._serverTransport && this._serverTransport.open()
            }
            _createDirectTransport(e, t=!1) {
                let n = new An(e,t,this._signaling,this._mediaSource,this._serverSettings);
                return this._dtListeners && this._dtListeners.length > 0 && Yt.warn(`The list of direct listeners for the participant [${e}] is not empty`),
                this._dtListeners = [],
                this._dtListeners.push(n.addEventListener("REMOTE_TRACK_ADDED", this._onDirectRemoteTrackAdded.bind(this, e)), n.addEventListener("REMOTE_TRACK_REMOVED", this._onDirectRemoteTrackRemoved.bind(this, e)), n.addEventListener("REMOTE_DATA_STATS", this._onDirectRemoteDataStats.bind(this)), n.addEventListener("STATE_CHANGED", this._onDirectTransportChanged.bind(this, e)), n.addEventListener("NETWORK_STATUS", this._onTransportNetworkStatus.bind(this)), n.addEventListener("PEER_CONNECTION_CLOSED", this._onPeerConnectionClosed.bind(this, "DIRECT"))),
                n
            }
            _createServerTransport() {
                let e = new On(this._signaling,this._mediaSource,this._serverSettings);
                return this._stListeners && this._stListeners.length > 0 && Yt.warn("The list of server transport listeners is not empty"),
                this._stListeners = [],
                this._stListeners.push(e.addEventListener("REMOTE_TRACK_ADDED", this._onServerRemoteTrackAdded.bind(this)), e.addEventListener("REMOTE_TRACK_REMOVED", this._onServerRemoteTrackRemoved.bind(this)), e.addEventListener("REMOTE_ALL_STALL", this._onServerRemoteAllStall.bind(this)), e.addEventListener("REMOTE_DATA_STATS", this._onServerRemoteDataStats.bind(this)), e.addEventListener("STATE_CHANGED", this._onServerTransportChanged.bind(this)), e.addEventListener("SIGNALLED_ACTIVE_PARTICIPANTS", this._onTransportActiveParticipants.bind(this)), e.addEventListener("SIGNALLED_SPEAKER_CHANGED", this._onTransportSpeakerChanged.bind(this)), e.addEventListener("SIGNALLED_STALLED_PARTICIPANTS", this._onTransportStalledParticipants.bind(this)), e.addEventListener("NETWORK_STATUS", this._onTransportNetworkStatus.bind(this)), e.addEventListener("REMOTE_STREAM_SECOND", this._onRemoteStreamSecond.bind(this)), e.addEventListener("PEER_CONNECTION_CLOSED", this._onPeerConnectionClosed.bind(this, "SERVER"))),
                e
            }
            _releaseDirectTransport(e) {
                this._directTransport && (e && this._directTransport.close(),
                this._directTransport = null),
                this._dtListeners && (this._dtListeners.forEach((e=>{
                    e.dispose()
                }
                )),
                this._dtListeners = [])
            }
            _releaseServerTransport(e) {
                this._serverTransport && (e && this._serverTransport.close(),
                this._serverTransport = null),
                this._stListeners && (this._stListeners.forEach((e=>{
                    e.dispose()
                }
                )),
                this._stListeners = [])
            }
            _setLocalNoiseSuppression(e) {
                var t;
                kt.noiseSuppression !== e && (kt.noiseSuppression = e,
                null == (t = this._mediaSource) || t.updateNoiseSuppression())
            }
            _onDirectTransportChanged(e, t) {
                if ("CONNECTED" === t && "DIRECT" === this._topology && this._releaseServerTransport(!0),
                ("CLOSED" === t || "FAILED" === t) && (this._releaseDirectTransport(!1),
                "DIRECT" === this._topology)) {
                    let t = this._opened.indexOf(e);
                    t >= 0 && this._opened.splice(t, 1);
                    let n = this._allocated.indexOf(e);
                    n >= 0 && this._allocated.splice(n, 1)
                }
                "DIRECT" === this._topology && (this._setState(e, t),
                this._setLocalState(t))
            }
            _onServerTransportChanged(e) {
                let t = this._opened.slice();
                "CONNECTED" === e && "SERVER" === this._topology && this._releaseDirectTransport(!0),
                ("CLOSED" === e || "FAILED" === e) && (this._releaseServerTransport(!1),
                "SERVER" === this._topology && (this._allocated = [],
                this._opened = [])),
                "SERVER" === this._topology && (this._setStates(t, e),
                this._setLocalState(e))
            }
            _onTransportActiveParticipants(e) {
                "SERVER" === this._topology && this._triggerEvent("SIGNALLED_ACTIVE_PARTICIPANTS", e)
            }
            _onTransportStalledParticipants(e) {
                "SERVER" === this._topology && this._triggerEvent("SIGNALLED_STALLED_PARTICIPANTS", e)
            }
            _onTransportSpeakerChanged(e) {
                "SERVER" === this._topology && this._triggerEvent("SIGNALLED_SPEAKER_CHANGED", e)
            }
            _onTransportNetworkStatus(e) {
                this._triggerEvent("NETWORK_STATUS", e)
            }
            _onRemoteStreamSecond(e, t) {
                this._triggerEvent("REMOTE_STREAM_SECOND", e, t)
            }
            _onPeerConnectionClosed(e) {
                this._triggerEvent("PEER_CONNECTION_CLOSED", e)
            }
            _onServerRemoteAllStall(e) {
                "SERVER" === this._topology && this._triggerEvent("REMOTE_ALL_STALL", e)
            }
            _onServerRemoteDataStats(e) {
                this._triggerEvent("REMOTE_DATA_STATS", e)
            }
            _onDirectRemoteTrackAdded(e, t, n) {
                this._triggerEvent("REMOTE_TRACK_ADDED", e, t, n)
            }
            _onDirectRemoteTrackRemoved(e, t, n) {
                this._triggerEvent("REMOTE_TRACK_REMOVED", e, t, n)
            }
            _onDirectRemoteDataStats(e) {
                this._triggerEvent("REMOTE_DATA_STATS", e)
            }
            _onServerRemoteTrackAdded(e, t, n) {
                this._triggerEvent("REMOTE_TRACK_ADDED", e, t, n)
            }
            _onServerRemoteTrackRemoved(e, t, n) {
                this._triggerEvent("REMOTE_TRACK_REMOVED", e, t, n)
            }
            getStreamWaitingTimeMs(e, t) {
                return "SERVER" !== this._topology ? (Se.log(ee.PAT_WAITING_TIME_ERROR, "wrongTopology"),
                Yt.error(`Cannot get stream waiting time, incorrect topology: ${this._topology}`),
                0) : this._serverTransport ? this._serverTransport.getStreamWaitingTimeMs(e, t) : (Se.log(ee.PAT_WAITING_TIME_ERROR, "noTransport"),
                Yt.error("Cannot get stream waiting time, server transport is not initialized"),
                0)
            }
        }
        , kn = ((Tn = kn || {}).VOLUMES_DETECTED = "VOLUMES_DETECTED",
        Tn), Bn = class extends y {
            constructor(e) {
                super(),
                this._detector = null,
                this._interval = null,
                this.subscribe(e, In.REMOTE_TRACK_ADDED, this._onRemoteTrackAdded.bind(this)),
                this.subscribe(e, In.REMOTE_TRACK_REMOVED, this._onRemoteTrackRemoved.bind(this)),
                this.subscribe(e, In.SIGNALLED_ACTIVE_PARTICIPANTS, this._onSignalledActiveParticipants.bind(this)),
                this.subscribe(e, In.TOPOLOGY_CHANGED, this._onTopologyChanged.bind(this))
            }
            destroy() {
                var e;
                this._interval && (window.clearTimeout(this._interval),
                this._interval = null),
                this.unsubscribe(),
                null == (e = this._detector) || e.destroy(),
                this._detector = null
            }
            _onRemoteTrackAdded(e, t, n) {
                var r;
                if (n.kind === Ke.audio && (null == (r = this._detector) || r.destroy(),
                this._detector = new an(e,t),
                !this._interval)) {
                    let e = ()=>{
                        this._collectVolumes(),
                        this._interval = window.setTimeout(e, kt.voiceParams.interval)
                    }
                    ;
                    this._interval = window.setTimeout(e, kt.voiceParams.interval)
                }
            }
            _onRemoteTrackRemoved(e, t, n) {
                n.kind === Ke.audio && (!this._detector || this._detector.stream !== t || (this._detector.destroy(),
                this._detector = null))
            }
            _collectVolumes() {
                if (!this._detector)
                    return;
                let e = {}
                  , t = this._detector.trackId
                  , n = this._detector.getLevel();
                if (t === ne.AUDIO_MIX) {
                    if (this._activeParticipants)
                        for (let t of this._activeParticipants)
                            e[t] = n
                } else
                    e[t] = n;
                this._triggerEvent("VOLUMES_DETECTED", e)
            }
            _onSignalledActiveParticipants(e) {
                this._activeParticipants = e
            }
            _onTopologyChanged(e) {
                e === Rn.DIRECT && (this._activeParticipants = null)
            }
        }
        , xn = (e=>(e.SPEAKER_CHANGED = "SPEAKER_CHANGED",
        e))(xn || {}), Nn = class extends y {
            constructor(e, t, n) {
                super(),
                this._speakerId = null,
                this._serverSideSpeakerDetection = !1,
                this._serverSideSpeakerDetection = n === Rn.SERVER,
                this.subscribe(e, kn.VOLUMES_DETECTED, this._onVolumesDetected.bind(this)),
                this.subscribe(t, In.SIGNALLED_SPEAKER_CHANGED, this._onServerSpeakerChanged.bind(this)),
                this.subscribe(t, In.TOPOLOGY_CHANGED, this._onTopologyChanged.bind(this))
            }
            destroy() {
                this.unsubscribe()
            }
            _onVolumesDetected(e) {
                if (this._serverSideSpeakerDetection)
                    return;
                let t = 0
                  , n = null;
                if (Object.keys(e).forEach((r=>{
                    let i = e[r].smoothed;
                    i > t && i > kt.voiceParams.threshold && (t = i,
                    n = r)
                }
                )),
                n && n !== this._speakerId) {
                    let r = this._speakerId && e.hasOwnProperty(this._speakerId) ? e[this._speakerId].smoothed : 0;
                    t > r * kt.voiceParams.speakerLevelMultiplier && (this._speakerId = n,
                    this._triggerEvent("SPEAKER_CHANGED", n))
                }
            }
            _onServerSpeakerChanged(e) {
                this._serverSideSpeakerDetection && this._triggerEvent("SPEAKER_CHANGED", e)
            }
            _onTopologyChanged(e) {
                this._serverSideSpeakerDetection = e === Rn.SERVER
            }
        }
        , Un = class extends y {
            constructor(e, t, n) {
                super(),
                this._states = {},
                this._volumes = {},
                this._participants = {},
                this._connectionTimeout = 0,
                this._volumeTimeout = 0,
                this._transport = e,
                this._participants = n,
                this.subscribe(e, In.STATE_CHANGED, this._onTransportStateChanged.bind(this)),
                this.subscribe(t, kn.VOLUMES_DETECTED, this._onVolumesDetected.bind(this))
            }
            destroy() {
                this.unsubscribe(),
                this._connectionTimeout && window.clearTimeout(this._connectionTimeout),
                this._volumeTimeout && window.clearTimeout(this._volumeTimeout)
            }
            onChangeRemoteMediaSettings(e, t) {
                t.isAudioEnabled || (this._volumes[e] = 1),
                t.isAudioEnabled && (this._volumes[e] = 0)
            }
            _onTransportStateChanged(e, t) {
                e.forEach((e=>this._states[e] = t)),
                t === Mn.OPENED && (this._connectionTimeout || (this._connectionTimeout = window.setTimeout(this._onConnectionTimeout.bind(this), kt.specListenerParams.connectionTimeout)),
                this._volumeTimeout || (this._volumeTimeout = window.setTimeout(this._onVolumeTimeout.bind(this), kt.specListenerParams.volumeTimeout))),
                t === Mn.FAILED && this._connectionTimeout && (Yt.warn("Transport failed, send callSpecError"),
                Se.log(ee.CALL_SPEC_ERROR, `${this._transport.getTopology()}_CONNECTION_TIMEOUT`))
            }
            _onVolumesDetected(e) {
                Object.keys(e).forEach((t=>{
                    this._volumes[t] = Math.max(e[t].real, this._volumes[t] || 0)
                }
                ))
            }
            _onConnectionTimeout() {
                let e = e=>e !== Mn.CONNECTED;
                (()=>Object.values(this._states).filter(e).length > 0)() && (Yt.warn("There is not connected transport, send callSpecError"),
                Se.log(ee.CALL_SPEC_ERROR, `${this._transport.getTopology()}_CONNECTION_TIMEOUT`)),
                this._connectionTimeout = 0
            }
            _onVolumeTimeout() {
                let e = [];
                Object.keys(this._volumes).forEach((t=>{
                    if (this._volumes[t] > 0)
                        return;
                    let n = "UNKNOWN"
                      , r = this._participants[t];
                    r && r.platform && (n = r.platform),
                    e.indexOf(n) < 0 && (e.push(n),
                    Se.log(ee.CALL_SPEC_ERROR, `${this._transport.getTopology()}_VOLUME_TIMEOUT_${n}`))
                }
                )),
                e.length && Yt.warn("There is silent participant, send callSpecError"),
                this._volumeTimeout = 0
            }
        }
        , Wn = class extends y {
            constructor(e, t, n) {
                super(),
                this._mediaSource = null,
                this._conversation = null,
                this._state = "IDLE",
                this._participantState = q.CALLED,
                this._participants = {},
                this._transport = null,
                this._debugInfo = null,
                this._volumesDetector = null,
                this._speakerDetector = null,
                this._localVolumeDetector = null,
                this._specListener = null,
                this._activeSpeakerId = null,
                this._lastSignalledActiveSpeakerId = null,
                this._serverSettings = {
                    camera: null,
                    screenSharing: null
                },
                this._lastStalled = {},
                this._remoteAllStalled = !1,
                this._audioFix = null,
                this._streamByStreamId = new Map,
                this._streamIdByStreamDescription = new Map,
                this._streamWaitTimerByStreamDescription = new Map,
                this._sequenceNumberByStreamDescription = new Map,
                this._cooldownTimestampByStreamDescription = new Map,
                this._cooldownQueueCleanupTimer = null,
                Se.create(e, n),
                this._api = e,
                this._signaling = t,
                this._onUnload = ()=>{
                    this._conversation && this._api && this._api.hangupConversation(this._conversation.id),
                    Se.destroy()
                }
                ,
                window.addEventListener("unload", this._onUnload),
                this._audioOutput = new class {
                    constructor() {
                        this._output = null,
                        this._volume = 1,
                        this._features = {
                            setSinkId: !!Audio.prototype.setSinkId
                        }
                    }
                    add(e) {
                        this.destroy(),
                        this._output = {},
                        this._output.audioTrack = e,
                        this._initAudioElement()
                    }
                    remove(e) {
                        !this._output || this._output.audioTrack !== e || this.destroy()
                    }
                    get volume() {
                        return this._volume
                    }
                    set volume(e) {
                        this._volume = Math.max(0, Math.min(1, e)),
                        this._output && this._output.audioElement && (this._output.audioElement.volume = this._volume)
                    }
                    _initAudioElement() {
                        var e;
                        if (kt.muteMode || !(null == (e = this._output) ? void 0 : e.audioTrack))
                            return;
                        let t = "Safari" !== wt.browserName()
                          , n = document.createElement(t ? "audio" : "video");
                        n.muted = !1,
                        n.volume = this._volume,
                        n.preload = "auto";
                        let r = ()=>{
                            Yt.warn("Error on play audio"),
                            jt.onAutoplayError()
                        }
                          , i = e=>{
                            n.srcObject = new MediaStream([e]),
                            n.load();
                            let t = n.play();
                            t ? t.catch(r) : r()
                        }
                          , o = ()=>{
                            var e;
                            Yt.debug("Recover audio playback");
                            let t = null == (e = this._output) ? void 0 : e.audioTrack;
                            t ? i(t) : Yt.warn("Broken audio track")
                        }
                        ;
                        n.onpause = o,
                        n.onstalled = o,
                        n.onerror = o,
                        i(this._output.audioTrack),
                        this._output.audioElement = n
                    }
                    _stopAudioElement() {
                        var e, t, n;
                        (null == (e = this._output) ? void 0 : e.audioElement) && (this._output.audioElement.pause(),
                        this._output.audioElement.srcObject = null),
                        null == (n = null == (t = this._output) ? void 0 : t.audioTrack) || n.stop()
                    }
                    destroy() {
                        !this._output || (this._stopAudioElement(),
                        this._output = null)
                    }
                    changeOutput() {
                        return g(this, null, (function*() {
                            var e, t, n;
                            try {
                                if (!this._features.setSinkId)
                                    throw new Error('Feature "setSinkId" is not supported');
                                if (!(null == (e = this._output) ? void 0 : e.audioElement))
                                    throw new Error("Audio Element is not initialized");
                                let r = wt.getSavedOutput();
                                r && (yield null == (n = (t = this._output.audioElement).setSinkId) ? void 0 : n.call(t, r.deviceId))
                            } catch (e) {
                                throw Se.log(ee.ERROR, "change_output"),
                                Yt.error("Output change failed", e),
                                e
                            }
                        }
                        ))
                    }
                }
                ,
                kt.videoTracksCount > 0 && (this._cooldownQueueCleanupTimer = window.setInterval(this._cleanupCooldownQueue.bind(this), 1e3))
            }
            static current() {
                return Wn._current
            }
            static hangupAfterInit() {
                Wn._activationMutex && !Wn._current && (Wn._delayedHangup = !0)
            }
            static id() {
                var e, t;
                return (null == (t = null == (e = Wn._current) ? void 0 : e._conversation) ? void 0 : t.id) || null
            }
            onStart(e, t, n, r="", i=!1, o=!1) {
                return g(this, null, (function*() {
                    if (Wn._activationMutex)
                        throw Se.log(ee.ERROR, "startCall"),
                        Yt.warn("Conversation: there is already running activation"),
                        new We(F.FAILED);
                    Wn._activationMutex = !0;
                    try {
                        this._mediaSource = this._createMediaSource(),
                        yield this._mediaSource.request(n);
                        let a = this._mediaSource.getMediaSettings();
                        t === D.CHAT || e.length > 1 ? this._logWithMediaSettings(ee.OUTGOING_MULTIPARTY_CALL, a) : this._logWithMediaSettings(ee.OUTGOING_CALL, a);
                        let s = yield this._startConversation(e, t, C.OUTGOING, n, r, i, o);
                        if (!this._conversation)
                            throw new We(F.UNKNOWN_ERROR);
                        if (this._participantState = q.ACCEPTED,
                        this._signaling.changeMediaSettings(a),
                        yield this._registerParticipants(s.conversation.participants),
                        this._processConnectionData(s),
                        this._allocateTransport(),
                        this._createSpeakerDetector(),
                        this._createSpecListener(),
                        this._signaling.readyToSend(),
                        Wn._delayedHangup)
                            throw new We(F.CANCELED);
                        Yt.debug("Outgoing call", {
                            opponentIds: e,
                            opponentType: t,
                            mediaOptions: n
                        });
                        let c, _ = Object.values(this._participants);
                        return kt.batchParticipantsOnStart && (c = Ye.mapSharedParticipants(_)),
                        jt.onLocalStream(this._mediaSource.getStream(), this._mediaSource.getMediaSettings()),
                        jt.onConversation(this._conversation.externalId, this._conversation.mediaModifiers, this._conversation.muteStates, c),
                        jt.onLocalStatus(Ut.WAITING),
                        this._toggleJoinAvailability(),
                        this._changeFeatureSet(),
                        this._changeNeedRate(),
                        Wn._current = this,
                        this._conversation.concurrent ? yield this._acceptConcurrent() : kt.batchParticipantsOnStart || this._setParticipantsStatus(_, Ut.WAITING),
                        this._conversation
                    } catch (e) {
                        throw this._close(e, "Unable to start conversation"),
                        e
                    } finally {
                        Wn._activationMutex = !1
                    }
                }
                ))
            }
            onJoin(e) {
                return g(this, null, (function*() {
                    var t;
                    if (Wn._activationMutex)
                        throw Se.log(ee.ERROR, "joinCall"),
                        Yt.warn("Conversation: there is already running activation"),
                        new We(F.FAILED);
                    Wn._activationMutex = !0,
                    this._state = "PROCESSING";
                    try {
                        let n = !!(null == (t = e.observedIds) ? void 0 : t.length);
                        this._mediaSource = this._createMediaSource(),
                        yield this._mediaSource.request(e.mediaOptions, !n);
                        let r = this._mediaSource.getMediaSettings();
                        this._logWithMediaSettings(ee.JOIN_CONVERSATION, r);
                        let i = yield this._joinConversation(e);
                        if (!this._conversation)
                            throw new We(F.UNKNOWN_ERROR);
                        return this._conversation.observer = n,
                        jt.onLocalStream(this._mediaSource.getStream(), r),
                        this._conversation.waitingHall ? (Yt.log("In waiting hall"),
                        Wn._current = this,
                        Wn._activationMutex = !1,
                        this._signaling.readyToSend(),
                        jt.onLocalStatus(Ut.WAITING_HALL),
                        this._conversation) : this._onJoinPart2(i)
                    } catch (e) {
                        throw Wn._activationMutex = !1,
                        this._close(e, "Unable to join conversation"),
                        e
                    }
                }
                ))
            }
            _onJoinPart2(e) {
                return g(this, null, (function*() {
                    Yt.debug("Join conversation part 2"),
                    Wn._activationMutex = !0;
                    try {
                        if (this._participantState = q.ACCEPTED,
                        !this._conversation || !this._mediaSource)
                            throw new We(F.UNKNOWN_ERROR);
                        if (this._conversation.observer || this._signaling.changeMediaSettings(this._mediaSource.getMediaSettings()),
                        yield this._registerParticipants(e.conversation.participants),
                        this._processConnectionData(e),
                        this._allocateTransport(),
                        this._createSpeakerDetector(),
                        this._createSpecListener(),
                        this._signaling.readyToSend(),
                        Wn._delayedHangup)
                            throw new We(F.CANCELED);
                        let t, n = Object.values(this._participants);
                        return kt.batchParticipantsOnStart && (t = Ye.mapSharedParticipants(n)),
                        jt.onConversation(this._conversation.externalId, this._conversation.mediaModifiers, this._conversation.muteStates, t),
                        jt.onLocalStatus(Ut.WAITING),
                        this._toggleJoinAvailability(),
                        this._changeNeedRate(),
                        this._state = "ACTIVE",
                        this._changeFeatureSet(),
                        Wn._current = this,
                        kt.batchParticipantsOnStart || this._setParticipantsStatus(n, Ut.WAITING),
                        this._openTransport(n, !1),
                        this._conversation
                    } catch (e) {
                        throw this._close(e, "Unable to join conversation"),
                        e
                    } finally {
                        Wn._activationMutex = !1
                    }
                }
                ))
            }
            onPush(e) {
                return g(this, arguments, (function*(e, t=_e.USER, n) {
                    if (Wn._activationMutex)
                        throw Yt.warn("Conversation: there is already running activation"),
                        new We(F.REJECTED);
                    Wn._activationMutex = !0;
                    try {
                        let r = yield this._prepareConversation(e, t, n);
                        if (this._mediaSource = this._createMediaSource(),
                        !this._conversation)
                            throw new We(F.UNKNOWN_ERROR);
                        if (!r.conversation.participants.find((e=>{
                            var t;
                            return e.state === q.CALLED && e.id === (null == (t = this._conversation) ? void 0 : t.userId)
                        }
                        )))
                            throw Yt.log("Push rejected (there is an active call)"),
                            Se.log(ee.PUSH, "rejected"),
                            new We(F.REJECTED);
                        if (yield this._registerParticipants(r.conversation.participants),
                        this._processConnectionData(r),
                        this._allocateTransport(),
                        this._createSpeakerDetector(),
                        this._createSpecListener(),
                        this._signaling.readyToSend(),
                        Se.log(ee.PUSH, "accepted"),
                        Wn._current = this,
                        Wn._delayedHangup)
                            throw new We(F.CANCELED);
                        Wn._activationMutex = !1
                    } catch (e) {
                        throw Wn._activationMutex = !1,
                        this._close(e, "Unable to handle inbound call push"),
                        e
                    }
                }
                ))
            }
            _isInWaitingHall(e) {
                if (!e.conversation || (e.conversation.options || []).indexOf(M.WAITING_HALL) < 0)
                    return !1;
                let t = (e.conversation.participants || []).find((t=>Ye.comparePeerId(t.peerId, e.peerId)));
                return t && t.restricted || !1
            }
            _acceptConcurrent() {
                return g(this, null, (function*() {
                    if (!this._mediaSource || !this._conversation)
                        throw new We(F.UNKNOWN_ERROR);
                    this._state = "PROCESSING";
                    let e = this._mediaSource.getMediaSettings();
                    this._logWithMediaSettings(ee.ACCEPT_CONCURRENT, e),
                    Yt.debug("Concurrent call", {
                        conversationId: this._conversation.id
                    });
                    try {
                        yield this._signaling.acceptCall(this._mediaSource.getMediaSettings()),
                        jt.onCallAccepted(),
                        this._state = "ACTIVE",
                        this._participantState = q.ACCEPTED,
                        this._changeFeatureSet(),
                        this._openTransport(Object.values(this._participants), !0)
                    } catch (e) {
                        this._close(e, "Unable to accept concurrent call")
                    }
                }
                ))
            }
            accept(e) {
                return g(this, null, (function*() {
                    if ("IDLE" !== this._state)
                        throw Se.log(ee.ERROR, "acceptIncoming"),
                        Yt.error("Unable to accept a call - invalid state"),
                        new Error("Unable to accept a call - invalid state");
                    if (!this._mediaSource || !this._conversation)
                        throw new We(F.UNKNOWN_ERROR);
                    this._state = "PROCESSING",
                    Yt.debug("Accept incoming call", e);
                    try {
                        yield this._mediaSource.request(e);
                        let t = this._mediaSource.getMediaSettings();
                        this._logWithMediaSettings(ee.ACCEPT_INCOMING, t),
                        this._signaling.changeMediaSettings(t),
                        yield this._signaling.acceptCall(t),
                        this._participantState = q.ACCEPTED;
                        let n, r = Object.values(this._participants);
                        kt.batchParticipantsOnStart && (n = Ye.mapSharedParticipants(r)),
                        jt.onCallAccepted(),
                        jt.onLocalStream(this._mediaSource.getStream(), t),
                        jt.onConversation(this._conversation.externalId, this._conversation.mediaModifiers, this._conversation.muteStates, n),
                        jt.onLocalStatus(Ut.WAITING),
                        this._toggleJoinAvailability(),
                        this._changeNeedRate();
                        let i = Object.values(this._conversation.muteStates);
                        return (i.includes(j.MUTE) || i.includes(j.MUTE_PERMANENT)) && (yield this._processMuteState(Object.keys(this._conversation.muteStates))),
                        this._state = "ACTIVE",
                        this._changeFeatureSet(),
                        kt.batchParticipantsOnStart || this._setParticipantsStatus(r, Ut.WAITING),
                        this._openTransport(r, !0),
                        this._conversation
                    } catch (e) {
                        throw this._close(e, "Unable to accept call"),
                        e
                    }
                }
                ))
            }
            decline() {
                return g(this, null, (function*() {
                    var e;
                    if ("IDLE" !== this._state)
                        throw Se.log(ee.ERROR, "declineIncoming"),
                        Yt.error("Unable to decline a call - invalid state"),
                        new Error("Unable to decline a call - invalid state");
                    this._state = "PROCESSING",
                    Yt.debug("Decline incoming call"),
                    this._logWithMediaSettings(ee.DECLINE_INCOMING, null == (e = this._mediaSource) ? void 0 : e.getMediaSettings()),
                    this._participantState = q.HUNGUP,
                    this._signaling.ready && (yield this._signaling.hangup(F.REJECTED)),
                    this._close(new We(F.REJECTED))
                }
                ))
            }
            hangup() {
                return g(this, null, (function*() {
                    Yt.debug("Hangup");
                    let e = "ACTIVE" === this._state ? F.HUNGUP : F.CANCELED;
                    Se.log(ee.HANGUP, e),
                    this._signaling.ready ? (yield this._signaling.hangup(e),
                    this._close(new We(e))) : jt.onHangup(new We(F.HUNGUP), this._conversation && this._conversation.id)
                }
                ))
            }
            addParticipant(e, t) {
                return g(this, null, (function*() {
                    if (!this._signaling.ready)
                        return void this._close(new We(F.UNKNOWN_ERROR), "Unable to add participant");
                    let n = yield this._signaling.addParticipant(e, t)
                      , r = null;
                    "error" === n.type && (r = "call-unfeasible" === n.error ? n.status : F.UNKNOWN_ERROR);
                    let i = n.participant;
                    yield this._onAddParticipant(Ye.composeId(i), i, r)
                }
                ))
            }
            removeParticipant(e, t=!1) {
                return g(this, null, (function*() {
                    this._signaling.ready && (yield this._signaling.removeParticipant(e, t),
                    this._onRemoveParticipant(e))
                }
                ))
            }
            setVolume(e) {
                this._audioOutput.volume = e
            }
            updateStatisticsInterval() {
                this._transport && this._transport.updateStatisticsInterval()
            }
            _openTransport(e, t) {
                var n;
                if (!this._transport)
                    return;
                let r = [];
                for (let n of e)
                    (n.state === q.CALLED || n.state === q.ACCEPTED) && (this._transport.isAllocated(n.id) || this._transport.allocate(n.id, t)),
                    n.state === q.ACCEPTED && r.push(n.id);
                r.length && this._transport.open(r, null, !!(null == (n = this._conversation) ? void 0 : n.observer))
            }
            _close(e, t) {
                t && Yt.error(t, e),
                Yt.debug("Close conversation", e),
                e.error ? this._signaling.ready && this._signaling.hangup(F.FAILED) : Se.log(ee.ERROR, e.hangup),
                Wn._activationMutex = !1;
                let n = this._conversation && this._conversation.id;
                return -1 !== [F.CANCELED, F.NOT_FRIENDS, F.CALLEE_IS_OFFLINE, F.CALLER_IS_BLOCKED].indexOf(e.hangup) || e.hangup === F.REJECTED && !e.remote ? (jt.onHangup(e, n),
                void this.destroy()) : (e.hangup !== F.HUNGUP || e.remote && this._participantState !== q.CALLED) && (e.hangup !== F.MISSED || e.remote) ? e.hangup === F.SOCKET_CLOSED && Wn._current && !this._conversation ? (this._cleanupSignaling(),
                void this._cleanupMediaSource()) : e.hangup !== F.BUSY || e.remote ? (this._state = "CLOSE",
                this._participantState = q.HUNGUP,
                this._changeFeatureSet(),
                this._cleanupMediaSource(),
                this._cleanupParticipants(),
                this._cleanupParticipantAgnosticStreams(),
                this._cleanupTransport(),
                this._cleanupSpeakerDetector(),
                this._cleanupSpecListener(),
                this._cleanupSignaling(),
                this._api.cleanup(),
                Se.destroy(),
                this._conversation = null,
                Wn._current = null,
                Wn._delayedHangup = !1,
                jt.onHangup(e || new We(F.UNKNOWN_ERROR), n),
                void (null !== this._cooldownQueueCleanupTimer && (window.clearInterval(this._cooldownQueueCleanupTimer),
                this._cooldownQueueCleanupTimer = null))) : (this._cleanupSignaling(),
                void this._cleanupMediaSource()) : (jt.onHangup(e, n),
                void this.destroy())
            }
            destroy() {
                let e = this._conversation && this._conversation.id;
                Yt.debug("Destroy conversation", {
                    conversationId: e
                }),
                this._cleanupMediaSource(),
                this._cleanupParticipants(),
                this._cleanupParticipantAgnosticStreams(),
                this._cleanupTransport(),
                this._cleanupSpeakerDetector(),
                this._cleanupSpecListener(),
                this._cleanupSignaling(),
                this._api.cleanup(),
                this._cleanupListeners(),
                Se.destroy(),
                this._conversation = null,
                Wn._current = null,
                Wn._delayedHangup = !1,
                null !== this._cooldownQueueCleanupTimer && (window.clearInterval(this._cooldownQueueCleanupTimer),
                this._cooldownQueueCleanupTimer = null)
            }
            _getConversationParams(e) {
                return g(this, null, (function*() {
                    let t = yield this._api.getConversationParams(e);
                    Yt.debug("Api.getConversationParams", t);
                    let n = []
                      , {turn_server: r, stun_server: i} = t;
                    if (i && n.push(i),
                    r) {
                        let e = r.urls.filter(((e,t,n)=>n.indexOf(e) === t));
                        e.push(`${e[e.length - 1]}?transport=tcp`),
                        n.push({
                            urls: e,
                            username: r.username,
                            credential: r.credential
                        })
                    }
                    return kt.iceServers = n,
                    kt.wssBase = t.endpoint,
                    kt.wssToken = t.token,
                    t.client_type && (kt.clientType = t.client_type),
                    t
                }
                ))
            }
            _startConversation(e, t, n, r, i="", o=!1, a=!1) {
                return g(this, null, (function*() {
                    let s = Ye.uuid();
                    Yt.debug("Conversation: start", {
                        conversationId: s,
                        opponentIds: e,
                        opponentType: t,
                        direction: n
                    });
                    let c = r.includes(V.VIDEO)
                      , _ = yield this._api.startConversation(s, e, t, c, i, o, a);
                    Yt.debug("Api.startConversation", _),
                    yield this._getConversationParams(_.id);
                    let l = yield this._connectSignaling(Y.START, _);
                    return yield this._setConversation(_, l, n),
                    l
                }
                ))
            }
            _joinConversation(e) {
                return g(this, null, (function*() {
                    let {conversationId: t, mediaOptions: n, chatId: r, joinLink: i, observedIds: o} = e;
                    Yt.debug("Conversation: join", {
                        conversationId: t,
                        joinLink: i,
                        observedIds: o
                    });
                    let a, s = n.includes(V.VIDEO);
                    if (t)
                        a = yield this._api.joinConversation(t, s, r);
                    else {
                        if (!i)
                            throw new We(F.UNKNOWN_ERROR);
                        a = yield this._api.joinConversationByLink(i, s, o)
                    }
                    Yt.debug("Api.joinConversation", a),
                    yield this._getConversationParams(a.id);
                    let c = yield this._connectSignaling(Y.JOIN, a);
                    return yield this._setConversation(a, c, C.JOINING),
                    c
                }
                ))
            }
            _prepareConversation(e) {
                return g(this, arguments, (function*(e, t=_e.USER, n) {
                    Yt.debug("Conversation: push", {
                        conversationId: e,
                        type: t,
                        peerId: n
                    });
                    let r = this._api.getUserId();
                    if (!r)
                        throw new We(F.UNKNOWN_ERROR);
                    let i = (yield this._getConversationParams(e)).device_idx || 0
                      , o = {
                        id: e,
                        peerId: n,
                        endpoint: `${kt.wssBase}?userId=${r}&entityType=${t}&deviceIdx=${i}&conversationId=${e}&token=${kt.wssToken}`,
                        is_concurrent: !1,
                        p2p_forbidden: !1,
                        device_idx: i
                    }
                      , a = yield this._connectSignaling(Y.ACCEPT, o);
                    return !Wn._current || Wn._current._participantState !== q.ACCEPTED && Wn._current._participantState !== q.CALLED ? (Wn._current && (Wn._current.destroy(),
                    Wn._current = null),
                    yield this._setConversation(o, a, C.INCOMING, t),
                    a) : (Yt.log("Push rejected (busy)"),
                    Se.log(ee.PUSH, "busy"),
                    this._signaling.ready && this._signaling.hangup(F.BUSY),
                    Promise.reject({
                        hangup: F.BUSY
                    }))
                }
                ))
            }
            _createParticipant(e) {
                return g(this, null, (function*() {
                    var t;
                    let n = Object.assign({
                        id: null,
                        externalId: null,
                        mediaSettings: Be(),
                        participantState: {},
                        state: q.CALLED,
                        status: null,
                        remoteStream: null,
                        mediaSource: null,
                        platform: null,
                        clientType: null,
                        roles: [],
                        networkRating: 1,
                        lastRequestedLayouts: {},
                        muteStates: {},
                        unmuteOptions: [],
                        observedIds: []
                    }, e);
                    if (e.externalId) {
                        let t = Ye.decomposeParticipantId(n.id).compositeUserId;
                        this._api.cacheExternalId(t, e.externalId)
                    } else
                        n.externalId = yield this._getParticipantId(n.id);
                    return (null == (t = n.observedIds) ? void 0 : t.length) && (n.externalId.observer = !0),
                    n
                }
                ))
            }
            _getParticipantId(e) {
                return g(this, null, (function*() {
                    try {
                        let t = Ye.decomposeParticipantId(e)
                          , n = yield this._api.userId(t.compositeUserId);
                        return Object.assign({
                            deviceIdx: t.deviceIdx
                        }, n)
                    } catch (e) {
                        throw this._close(new We(F.NETWORK_ERROR), e),
                        e
                    }
                }
                ))
            }
            _setConversation(e, t, n) {
                return g(this, arguments, (function*(e, t, n, r=_e.USER) {
                    let i = t.conversation.participants.map((e=>e.id));
                    yield this._api.prepareUserIds(i);
                    let o = this._api.getUserId()
                      , a = e.device_idx || 0;
                    if (!o) {
                        let e = (t.conversation.participants || []).find((e=>Ye.comparePeerId(e.peerId, t.peerId)));
                        if (!e)
                            throw new We(F.UNKNOWN_ERROR);
                        o = Number(e.id),
                        e.idType && (r = e.idType),
                        e.deviceIdx && (a = e.deviceIdx),
                        this._api.setUserId(o)
                    }
                    let s = Ye.composeParticipantId(o, r, a)
                      , c = yield this._getParticipantId(s);
                    this._conversation = {
                        userId: o,
                        compositeUserId: s,
                        externalId: c,
                        acceptTime: t.conversation.acceptTime,
                        features: t.conversation.features || [],
                        id: t.conversation.id || e.id,
                        participantsLimit: t.conversation.participantsLimit || 30,
                        topology: t.conversation.topology || Rn.DIRECT,
                        direction: n,
                        concurrent: t.isConcurrent || e.is_concurrent || !1,
                        needRate: !1,
                        chatId: t.conversation.multichatId,
                        roles: [],
                        recordInfo: null,
                        joinLink: e.join_link,
                        pinnedParticipantId: null,
                        mediaModifiers: t.mediaModifiers,
                        options: [],
                        muteStates: {},
                        unmuteOptions: [],
                        networkRating: 1,
                        waitingHall: this._isInWaitingHall(t),
                        observer: !1
                    },
                    this._signaling.setConversationId(e.id),
                    e.p2p_forbidden && (kt.forceRelayPolicy = e.p2p_forbidden),
                    Se.log(ee.RELAY_POLICY, kt.forceRelayPolicy ? "1" : "0"),
                    this._changeFeatureSet(),
                    this._logDevices()
                }
                ))
            }
            _updateConversation(e) {
                if (!this._conversation)
                    throw new We(F.UNKNOWN_ERROR);
                this._conversation.acceptTime = e.conversation.acceptTime,
                this._conversation.features = e.conversation.features || [],
                this._conversation.participantsLimit = e.conversation.participantsLimit || 30,
                this._conversation.topology = e.conversation.topology || Rn.DIRECT,
                this._conversation.concurrent = e.isConcurrent || !1,
                this._conversation.chatId = e.conversation.multichatId,
                this._conversation.mediaModifiers = e.mediaModifiers,
                this._conversation.waitingHall = !1
            }
            _createMediaSource() {
                let e = new Ve;
                return this.subscribe(e, Fe.SOURCE_CHANGED, this._onLocalMediaStreamChanged.bind(this)),
                this.subscribe(e, Fe.SCREEN_STATUS, this._onScreenSharingStatus.bind(this)),
                this._audioFix = new rn(e),
                e
            }
            _connectSignaling(e, t) {
                return g(this, null, (function*() {
                    return this._signaling.setEndpoint(t.endpoint),
                    this.subscribe(this._signaling, X.NOTIFICATION, this._onSignalingNotification.bind(this)),
                    this.subscribe(this._signaling, X.FAILED, this._onSignalingFailed.bind(this)),
                    this.subscribe(this._signaling, X.RECONNECT, this._onSignalingReconnect.bind(this)),
                    this._signaling.connect(e, t)
                }
                ))
            }
            _registerParticipants(e) {
                return g(this, null, (function*() {
                    if (this._conversation)
                        for (let t of e) {
                            let e = Ye.composeId(t);
                            e !== this._conversation.compositeUserId ? t.state !== q.HUNGUP && t.state !== q.REJECTED ? (this._participants[e] = yield this._createParticipant({
                                id: e,
                                externalId: t.externalId && $t.fromSignaling(t.externalId, t.deviceIdx || 0),
                                mediaSettings: Be(t.mediaSettings),
                                participantState: Ye.mapParticipantState(t),
                                state: t.state,
                                roles: t.roles || [],
                                status: kt.batchParticipantsOnStart ? Ut.WAITING : null,
                                muteStates: t.muteStates || {},
                                unmuteOptions: t.unmuteOptions || [],
                                observedIds: t.observedIds || []
                            }),
                            t.roles && t.roles.length && (Yt.debug(`Roles for participant [${e}] changed: ${t.roles}`),
                            jt.onRolesChanged(this._participants[e].externalId, t.roles))) : this._participants[t.id] && this._removeParticipant(this._participants[t.id], F.HUNGUP) : (this._conversation.roles = t.roles || [],
                            this._conversation.roles.length && (Yt.debug(`Local roles changed: ${t.roles}`),
                            jt.onLocalRolesChanged(this._conversation.roles)),
                            t.muteStates && (yield this._onMuteParticipant({
                                muteStates: t.muteStates,
                                unmuteOptions: t.unmuteOptions,
                                mediaOptions: Object.keys(t.muteStates)
                            })))
                        }
                }
                ))
            }
            _processConnectionData(e) {
                Ye.isEmptyObject(this._conversation.muteStates) && e.conversation.muteStates && this._onMuteParticipant({
                    muteStates: e.conversation.muteStates,
                    unmuteOptions: e.unmuteOptions,
                    mediaOptions: Object.keys(e.conversation.muteStates),
                    muteAll: !0
                }),
                e.conversation.pinnedParticipantId && this._onPinParticipant(e.conversation.pinnedParticipantId),
                this._onRecordInfo(e.conversation.recordInfo),
                this._onOptionsChanged(e.conversation.options),
                e.chatRoom && e.chatRoom.totalCount && this._onChatRoomUpdated(S.ATTENDEE, e.chatRoom.totalCount, e.chatRoom.firstParticipants)
            }
            _allocateTransport() {
                if (!this._conversation || !this._mediaSource)
                    return;
                this._transport = new Ln(this._conversation.topology,this._signaling,this._mediaSource,this._serverSettings),
                this._debugInfo = new on,
                this.subscribe(this._transport, In.STATE_CHANGED, this._onTransportStateChanged.bind(this)),
                this.subscribe(this._transport, In.LOCAL_STATE_CHANGED, this._onTransportLocalStateChanged.bind(this)),
                this.subscribe(this._transport, In.REMOTE_TRACK_ADDED, this._onRemoteTrackAdded.bind(this)),
                this.subscribe(this._transport, In.REMOTE_TRACK_REMOVED, this._onRemoteTrackRemoved.bind(this)),
                this.subscribe(this._transport, In.REMOTE_ALL_STALL, this._onRemoteAllStall.bind(this)),
                this.subscribe(this._transport, In.REMOTE_DATA_STATS, this._onRemoteDataStats.bind(this)),
                this.subscribe(this._transport, In.SIGNALLED_STALLED_PARTICIPANTS, this._onRemoteSignalledStall.bind(this)),
                this.subscribe(this._transport, In.TOPOLOGY_CHANGED, this._onTopologyChanged.bind(this)),
                this.subscribe(this._transport, In.NETWORK_STATUS, this._onNetworkStatus.bind(this)),
                this.subscribe(this._transport, In.REMOTE_STREAM_SECOND, this._onRemoteStreamSecond.bind(this)),
                this.subscribe(this._transport, In.PEER_CONNECTION_CLOSED, this._onPeerConnectionClosed.bind(this));
                let e = this._conversation.direction === C.OUTGOING && !this._conversation.concurrent;
                for (let t of Object.values(this._participants))
                    (t.state === q.ACCEPTED || t.state === q.CALLED) && this._transport.allocate(t.id, e)
            }
            _createSpeakerDetector() {
                this._transport && (this._volumesDetector = new Bn(this._transport),
                this.subscribe(this._volumesDetector, kn.VOLUMES_DETECTED, this._onVolumesDetected.bind(this)),
                this._speakerDetector = new Nn(this._volumesDetector,this._transport,this._conversation.topology),
                this.subscribe(this._speakerDetector, xn.SPEAKER_CHANGED, this._onSpeakerChanged.bind(this)),
                this._localVolumeDetector = new sn(this._mediaSource))
            }
            _createSpecListener() {
                this._transport && this._volumesDetector && (this._specListener = new Un(this._transport,this._volumesDetector,this._participants))
            }
            _logDevices() {
                let e = wt.getCameras().length
                  , t = wt.getMicrophones().length;
                Yt.debug("Cameras: " + e + (wt.hasCameraPermission() ? "" : "") + ", Microphones: " + t + (wt.hasMicrophonePermission() ? "" : "")),
                Se.log(ee.DEVICES, `${e}_${t}`)
            }
            _logWithMediaSettings(e, t) {
                Se.log(e, [(null == t ? void 0 : t.isAudioEnabled) && "audio", (null == t ? void 0 : t.isVideoEnabled) && "video"].filter(Boolean).join("_"))
            }
            _removeParticipant(e, t) {
                var n;
                e.state === q.CALLED || e.state === q.ACCEPTED || "CLOSE" === this._state || (e.id === this._lastSignalledActiveSpeakerId && (this._lastSignalledActiveSpeakerId = null),
                this._participants[e.id] && (t === F.HUNGUP ? this._setParticipantsStatus([e], Ut.HANGUP) : this._setParticipantsStatus([e], Ut.ERROR, t),
                null == (n = e.mediaSource) || n.disconnect(),
                this._conversation && this._conversation.pinnedParticipantId === e.id && (this._conversation.pinnedParticipantId = null),
                this.updateDisplayLayout([{
                    uid: e.externalId,
                    mediaType: Xt.CAMERA,
                    stopStream: !0
                }]),
                delete this._participants[e.id],
                jt.onRemoteRemoved(e.externalId)))
            }
            _cleanupListeners() {
                this.unsubscribe(),
                window.removeEventListener("unload", this._onUnload)
            }
            _cleanupMediaSource() {
                this._mediaSource && (this._mediaSource.destroy(),
                this._mediaSource = null)
            }
            _cleanupParticipants() {
                Object.values(this._participants).forEach((e=>{
                    var t, n, r;
                    null == (t = e.remoteStream) || t.getTracks().forEach((e=>e.stop())),
                    null == (n = e.secondStream) || n.getTracks().forEach((e=>e.stop())),
                    null == (r = e.mediaSource) || r.disconnect()
                }
                )),
                this._participants = {},
                this._audioOutput && this._audioOutput.destroy()
            }
            _cleanupParticipantAgnosticStreams() {
                Yt.debug("cleaning up participant-agnostic streams"),
                this._streamByStreamId.forEach((e=>{
                    e.getTracks().forEach((e=>{
                        e.stop()
                    }
                    ))
                }
                )),
                this._streamByStreamId = new Map,
                this._streamWaitTimerByStreamDescription.forEach((e=>{
                    window.clearTimeout(e)
                }
                )),
                this._streamWaitTimerByStreamDescription = new Map,
                this._streamIdByStreamDescription = new Map,
                this._sequenceNumberByStreamDescription = new Map,
                this._cooldownTimestampByStreamDescription = new Map
            }
            _cleanupTransport() {
                this._transport && (this._transport.destroy(),
                this._transport = null),
                this._debugInfo && (this._debugInfo = null)
            }
            _cleanupSpeakerDetector() {
                this._speakerDetector && (this._speakerDetector.destroy(),
                this._speakerDetector = null),
                this._volumesDetector && (this._volumesDetector.destroy(),
                this._volumesDetector = null),
                this._localVolumeDetector && (this._localVolumeDetector.destroy(),
                this._localVolumeDetector = null)
            }
            _cleanupSpecListener() {
                this._specListener && (this._specListener.destroy(),
                this._specListener = null)
            }
            _cleanupSignaling() {
                this._signaling.close(),
                this._signaling.cleanup()
            }
            _onAddParticipant(e, t, n) {
                return g(this, null, (function*() {
                    Yt.debug(`Add new participant [${e}]`);
                    let r = this._participants[e];
                    !r || r.state !== q.ACCEPTED && r.state !== q.CALLED ? (r || (this._participants[e] = yield this._createParticipant({
                        id: e,
                        externalId: t.externalId && $t.fromSignaling(t.externalId, t.deviceIdx || 0),
                        mediaSettings: Be(t.mediaSettings),
                        state: t.state,
                        roles: t.roles || [],
                        muteStates: t.muteStates || {},
                        unmuteOptions: t.unmuteOptions || [],
                        observedIds: t.observedIds || []
                    }),
                    r = this._participants[e]),
                    this._setParticipantsStatus([r], Ut.WAITING),
                    n ? (r.state = q.HUNGUP,
                    this._removeParticipant(r, n)) : this._transport && (r.state = q.CALLED,
                    this._transport.allocate(r.id, !0),
                    Se.log(ee.ADD_PARTICIPANT),
                    this._invokeRolesChangedCallbackIfNeeded(r))) : Yt.warn(`Participant [${r.id}:${r.state}] is already in conversation`)
                }
                ))
            }
            _onRemoveParticipant(e) {
                Yt.debug(`Remove participant [${e}]`);
                let t = [];
                for (let n = 0; n <= 15; n++) {
                    let r = Ye.compose(e, n)
                      , i = this._participants[r];
                    i && t.push(i)
                }
                if (t.length) {
                    if (this._transport)
                        for (let e of t)
                            this._transport.close(e.id);
                    Se.log(ee.REMOVE_PARTICIPANT)
                } else
                    Yt.warn(`Participant [${e}] isn't in conversation`)
            }
            changeDevice(e) {
                return g(this, null, (function*() {
                    return "audiooutput" === e ? this._audioOutput.changeOutput() : this._mediaSource ? ("audioinput" === e && (this._audioFix = new rn(this._mediaSource)),
                    this._mediaSource.changeDevice(e)) : Promise.reject(U.UNKNOWN)
                }
                ))
            }
            toggleScreenCapturing(e) {
                return g(this, null, (function*() {
                    return this._mediaSource ? this._mediaSource.toggleScreenCapturing(e) : Promise.reject(U.UNKNOWN)
                }
                ))
            }
            setVideoStream(e, t=!1) {
                return g(this, null, (function*() {
                    if (this._mediaSource)
                        return this._mediaSource.setVideoStream(e, t)
                }
                ))
            }
            setAudioStream(e) {
                return g(this, null, (function*() {
                    if (this._mediaSource)
                        return this._mediaSource.setAudioStream(e)
                }
                ))
            }
            toggleLocalVideo(e) {
                return g(this, null, (function*() {
                    if (this._mediaSource)
                        return Se.log(ee.MEDIA_STATUS, e ? "video_1" : "video_0"),
                        this._mediaSource.toggleVideo(e)
                }
                ))
            }
            toggleLocalAudio(e) {
                return g(this, null, (function*() {
                    if (this._mediaSource)
                        return Se.log(ee.MEDIA_STATUS, e ? "audio_1" : "audio_0"),
                        this._mediaSource.toggleAudio(e)
                }
                ))
            }
            changePriorities(e) {
                return g(this, null, (function*() {
                    if (e.length < 2 || !this._signaling.ready)
                        return;
                    let t = {}
                      , n = {};
                    for (let t of e) {
                        let e = "object" == typeof t.uid ? t.uid : $t.fromId(t.uid);
                        n[$t.toString(e)] = t.priority
                    }
                    for (let e of Object.values(this._participants)) {
                        let r = $t.toString(e.externalId);
                        n.hasOwnProperty(r) && (t[e.id] = n[r])
                    }
                    yield this._signaling.changePriorities(t)
                }
                ))
            }
            changeParticipantState(e) {
                return g(this, null, (function*() {
                    for (let[t,n] of Object.entries(e))
                        if (t.length > 5 || n.length > 5)
                            throw new Error("key/value max length is 5 chars, mappings with empty values (null or empty string) are discarded");
                    yield this._signaling.changeParticipantState(e)
                }
                ))
            }
            requestKeyFrame(e) {
                return g(this, null, (function*() {
                    let t = {};
                    return t[Qt(e)] = "kf",
                    this._signaling.updateDisplayLayout(t)
                }
                ))
            }
            updateDisplayLayout(e) {
                return g(this, null, (function*() {
                    if (e.length < 1 || !this._signaling.ready)
                        return;
                    Yt.log(`Update display layout [${this._signaling.getNextCommandSequenceNumber()}]`, e);
                    let t = {};
                    for (let n of e) {
                        let e = "object" == typeof n.uid ? n.uid : $t.fromId(n.uid)
                          , r = this._api.getCachedOkIdByExternalId(e);
                        if (!r) {
                            let t = $t.toString(e);
                            Yt.log(`Unknown participant external ID ${t}`);
                            continue
                        }
                        let i = Ye.compose(r, e.deviceIdx)
                          , o = Qt({
                            participantId: i,
                            mediaType: n.mediaType,
                            streamName: n.streamName
                        })
                          , a = this._participants[i];
                        a && (a.lastRequestedLayouts[o] = n),
                        Wn._isStopStreaming(n) ? this._streamIdByStreamDescription.has(o) && !this._cooldownTimestampByStreamDescription.has(o) && this._cooldownTimestampByStreamDescription.set(o, Date.now()) : (this._cooldownTimestampByStreamDescription.delete(o),
                        !this._streamIdByStreamDescription.has(o) && kt.videoTracksCount > 0 && this._streamIdByStreamDescription.set(o, null),
                        t[o] = Wn._layoutToString(n))
                    }
                    let n = this._cooldownTimestampByStreamDescription.keys();
                    for (; this._streamIdByStreamDescription.size > kt.videoTracksCount; ) {
                        let e = n.next();
                        if (e.done) {
                            Yt.error("Cannot accommodate all streaming requests: tracks available " + kt.videoTracksCount + "; requested streams: " + Array.from(this._streamIdByStreamDescription.keys()));
                            break
                        }
                        this._stopStreaming(e.value),
                        t[e.value] = Wn._layoutToString({
                            stopStream: !0
                        })
                    }
                    yield this._sendUpdateDisplayLayout(t)
                }
                ))
            }
            _stopStreaming(e) {
                if (this._cooldownTimestampByStreamDescription.delete(e),
                this._sequenceNumberByStreamDescription.set(e, this._signaling.getNextCommandSequenceNumber()),
                this._streamWaitTimerByStreamDescription.has(e) && (Yt.log("Client asked to stop streaming before stream became available", e),
                window.clearTimeout(this._streamWaitTimerByStreamDescription.get(e)),
                this._streamWaitTimerByStreamDescription.delete(e)),
                this._streamIdByStreamDescription.get(e)) {
                    let t = Jt(e)
                      , n = this._participants[t.participantId];
                    n ? (!t.streamName || t.mediaType !== Xt.STREAM && t.mediaType !== Xt.SCREEN ? jt.onRemoteStream(n.externalId, null) : jt.onRemoteLive(n.externalId, t.streamName, null),
                    Se.log(ee.PAT_DEALLOCATED)) : Yt.log(`Cannot find participant to stop streaming: ${t.participantId}`)
                }
                this._streamIdByStreamDescription.delete(e)
            }
            _sendUpdateDisplayLayout(e) {
                return g(this, null, (function*() {
                    if (0 === Object.keys(e).length)
                        return;
                    let t = yield this._signaling.updateDisplayLayout(e);
                    if (!t)
                        return;
                    let n = [];
                    for (let[e,r] of Object.entries(t.errorCodeByParticipantId || {})) {
                        let t = Jt(e)
                          , i = this._participants[t.participantId];
                        if (i) {
                            let e;
                            "number" != typeof r ? (Yt.warn(`Unexpected error code ${r} received for participant ${t.participantId}`),
                            e = ie.UNKNOWN_ERROR) : e = 1 === r ? "no-available-tracks" : "unknown-error",
                            n.push({
                                externalId: i.externalId,
                                errorReason: e
                            })
                        }
                    }
                    if (n && n.length)
                        throw new Vn("Could not allocate one or more participants",n)
                }
                ))
            }
            _cleanupCooldownQueue() {
                let e = {}
                  , t = this._cooldownTimestampByStreamDescription.entries();
                for (; ; ) {
                    let n = t.next();
                    if (n.done)
                        break;
                    let r = n.value;
                    if (r[1] + 1e4 > Date.now())
                        break;
                    let i = r[0];
                    this._stopStreaming(i),
                    e[i] = Wn._layoutToString({
                        stopStream: !0
                    })
                }
                this._sendUpdateDisplayLayout(e)
            }
            static _isStopStreaming(e) {
                return e.stopStream
            }
            static _layoutToString(e) {
                if (Wn._isStopStreaming(e))
                    return "ss";
                let t = "";
                return void 0 !== e.priority && (t += "p=" + e.priority),
                void 0 !== e.width && void 0 !== e.height && ("" !== t && (t += ":"),
                t += "sz=" + Math.round(e.width) + "x" + Math.round(e.height)),
                void 0 !== e.fit && ("" !== t && (t += ":"),
                t += "fit=" + e.fit),
                t
            }
            _onParticipantSourcesUpdate(e) {
                if (this._conversation) {
                    Yt.log("Received participant sources update notification", e);
                    for (let t of e)
                        this._waitForStreamIfNeeded(t)
                }
            }
            _onParticipantPromoted(e) {
                return g(this, null, (function*() {
                    Yt.log("Promoted in waiting hall", !e.demote),
                    e.demote ? (Yt.log("Kicked from waiting hall"),
                    this._close(new We(F.REMOVED))) : (this._updateConversation(e),
                    yield this._onJoinPart2(e))
                }
                ))
            }
            _onChatRoomUpdated(e) {
                return g(this, arguments, (function*(e, t=0, n=[]) {
                    Yt.log(`Chat room updated: ${e}`);
                    let r = []
                      , i = [];
                    n.length && (n.forEach((e=>{
                        if (e.externalId) {
                            let t = qt.fromSignaling(e.externalId);
                            r.push(t),
                            this._api.cacheExternalId(e.id.id, t)
                        } else
                            i.push(Ye.decomposeId(e.id.id).id)
                    }
                    )),
                    i.length && !r.length && (r = yield this._api.getExternalIdsByOkIds(i))),
                    jt.onChatRoomUpdated(e, t, r)
                }
                ))
            }
            _waitForStreamIfNeeded(e) {
                var t, n;
                let r = this._matchStreamDescription(e.participantStreamDescription);
                if (!r || kt.producerScreenTrack && r.mediaType === Xt.SCREEN)
                    return;
                let i = Qt(r)
                  , o = this._sequenceNumberByStreamDescription.get(i);
                if (o && o > e.sequenceNumber)
                    return Yt.warn(`Participant ${r.participantId} received outdated PAT response: sequence number ${e.sequenceNumber}; last sent sequence number for given participant is ${o}`),
                    void Se.log(ee.PAT_OUTDATED_RESPONSE);
                let a = e.streamId
                  , s = e.rtpTimestamp ? this._getWaitingTime(a, e.rtpTimestamp) : 0;
                if (s <= 0) {
                    this._streamWaitTimerByStreamDescription.delete(i);
                    let o = r.participantId
                      , s = this._participants[o];
                    if (!s)
                        return Se.log(ee.PAT_ERROR, "participantMissing"),
                        void Yt.error(`Could not find participant by ID: ${o}`);
                    let c = this._streamByStreamId.get(a);
                    if (!c)
                        return Se.log(ee.PAT_ERROR, "streamNotFound"),
                        void Yt.error(`Could not find stream by ID: ${a}`);
                    Se.log(ee.PAT_ALLOCATED),
                    this._streamIdByStreamDescription.set(i, a);
                    let _ = null == (t = e.participantStreamDescription) ? void 0 : t.mediaType;
                    if (_ === Xt.STREAM || _ === Xt.MOVIE)
                        (null == (n = e.participantStreamDescription) ? void 0 : n.streamName) && jt.onRemoteLive(s.externalId, e.participantStreamDescription.streamName, c);
                    else {
                        let e = (kt.producerScreenTrack ? null : s.secondStream) || c;
                        jt.onRemoteStream(s.externalId, e)
                    }
                } else {
                    Yt.debug(`Waiting for ${s} until stream ${a} for ${i} is switched`);
                    let t = window.setTimeout(this._waitForStreamIfNeeded.bind(this, e), s);
                    this._streamWaitTimerByStreamDescription.set(i, t)
                }
            }
            _matchStreamDescription(e) {
                if (!e)
                    return null;
                if (this._streamIdByStreamDescription.has(Qt(e)))
                    return e;
                let t = e.participantId;
                if (e.mediaType) {
                    let e = {
                        participantId: t,
                        mediaType: null
                    };
                    if (this._streamIdByStreamDescription.has(Qt(e)))
                        return e
                } else {
                    let e = {
                        participantId: t,
                        mediaType: Xt.CAMERA
                    };
                    if (this._streamIdByStreamDescription.has(Qt(e)))
                        return e;
                    let n = {
                        participantId: t,
                        mediaType: Xt.SCREEN
                    };
                    if (this._streamIdByStreamDescription.has(Qt(n)))
                        return n
                }
                return Yt.error("Received unrequested allocation", e),
                null
            }
            _getWaitingTime(e, t) {
                if (this._transport)
                    return this._transport.getStreamWaitingTimeMs(e, t);
                throw new Error("transport is not initialized")
            }
            _isCallAdmin() {
                return !!this._conversation && Ye.includesOneOf(this._conversation.roles, [ae.ADMIN, ae.CREATOR])
            }
            _checkAdminRole() {
                if (this._conversation && !Ye.includesOneOf(this._conversation.roles, [ae.ADMIN, ae.CREATOR]))
                    throw new Error("You don't have the required permission")
            }
            grantRoles(e, t, n) {
                return g(this, null, (function*() {
                    this._checkAdminRole(),
                    yield this._signaling.grantRoles(e, t, n)
                }
                ))
            }
            muteParticipant() {
                return g(this, arguments, (function*(e=null, t, n=[]) {
                    this._checkAdminRole(),
                    yield this._signaling.muteParticipant(e, t, n)
                }
                ))
            }
            pinParticipant(e, t) {
                return g(this, null, (function*() {
                    this._checkAdminRole(),
                    yield this._signaling.pinParticipant(e, t)
                }
                ))
            }
            updateMediaModifiers(e) {
                return g(this, null, (function*() {
                    this._signaling.ready && this._conversation && (this._conversation.mediaModifiers = e,
                    yield this._signaling.updateMediaModifiers(e))
                }
                ))
            }
            changeOptions(e) {
                return g(this, null, (function*() {
                    if (this._signaling.ready && this._conversation) {
                        this._checkAdminRole(),
                        yield this._signaling.changeOptions(e);
                        let t = function(e, t) {
                            let n = new Set(e);
                            for (let[e,r] of Object.entries(t))
                                r ? n.add(e) : n.delete(e);
                            return Array.from(n)
                        }(this._conversation.options, e);
                        this._onOptionsChanged(t)
                    }
                }
                ))
            }
            getWaitingHall(e, t, n) {
                return g(this, null, (function*() {
                    if (!this._signaling)
                        return Promise.reject();
                    let r = null;
                    e && (r = function(e) {
                        try {
                            return JSON.parse(atob(e))
                        } catch (t) {
                            Yt.warn("WaitingParticipant: failed convert from string", e, t)
                        }
                        return null
                    }(e));
                    let i = yield this._signaling.getWaitingHall(r, t, n);
                    if (i.error)
                        return Promise.reject(i.message);
                    let o = i.participants || []
                      , a = []
                      , s = []
                      , c = null;
                    return o.length && (o.forEach((e=>{
                        if (e.externalId) {
                            let t = qt.fromSignaling(e.externalId);
                            a.push(t),
                            this._api.cacheExternalId(e.id.id, t)
                        } else
                            s.push(Ye.decomposeId(e.id.id).id)
                    }
                    )),
                    s.length && !a.length && (a = yield this._api.getExternalIdsByOkIds(s)),
                    i.hasMore && (c = function(e) {
                        try {
                            return btoa(JSON.stringify(e))
                        } catch (t) {
                            Yt.warn("WaitingParticipant: failed convert to string", e, t)
                        }
                        return null
                    }(o[o.length - 1].id))),
                    {
                        participants: a,
                        pageMarker: c,
                        totalCount: i.totalCount || 0
                    }
                }
                ))
            }
            promoteParticipant(e, t) {
                return g(this, null, (function*() {
                    this._signaling && (yield this._signaling.promoteParticipant(e, t))
                }
                ))
            }
            chatMessage(e, t=null) {
                return g(this, null, (function*() {
                    this._signaling.ready && (yield this._signaling.chatMessage(e, t))
                }
                ))
            }
            chatHistory(e) {
                return g(this, null, (function*() {
                    if (this._signaling.ready) {
                        let t = yield this._signaling.chatHistory(e);
                        for (let e = t.messages.length - 1; e >= 0; e--) {
                            let n = t.messages[e];
                            yield this._onChatMessage(n)
                        }
                    }
                }
                ))
            }
            customData(e, t=null) {
                return g(this, null, (function*() {
                    this._signaling.ready && (yield this._signaling.customData(e, t))
                }
                ))
            }
            createJoinLink() {
                return g(this, null, (function*() {
                    if (this._conversation) {
                        let e = (yield this._api.createJoinLink(this._conversation.id)).join_link;
                        if (e)
                            return this._conversation.joinLink = e,
                            e
                    }
                    return Promise.reject()
                }
                ))
            }
            removeJoinLink() {
                return g(this, null, (function*() {
                    if (!this._conversation || !(yield this._api.removeJoinLink(this._conversation.id)).success)
                        return Promise.reject();
                    delete this._conversation.joinLink
                }
                ))
            }
            addMovie(e) {
                return g(this, null, (function*() {
                    var t;
                    let n = {
                        movieId: e,
                        participantId: null == (t = this._conversation) ? void 0 : t.compositeUserId
                    }
                      , r = yield this._signaling.addMovie(n);
                    if (r.error)
                        throw new Error(r.error);
                    return {
                        movieId: r.movieId,
                        streamType: r.streamType
                    }
                }
                ))
            }
            updateMovie(e, t, n, r) {
                return g(this, null, (function*() {
                    var i;
                    let o = {
                        movieId: e,
                        participantId: null == (i = this._conversation) ? void 0 : i.compositeUserId
                    };
                    (t || 0 === t) && (o.gain = t),
                    n && (o.offset = n),
                    void 0 !== typeof r && (o.pause = r);
                    let a = yield this._signaling.updateMovie(o);
                    if (a.error)
                        throw new Error(a.error)
                }
                ))
            }
            removeMovie(e) {
                return g(this, null, (function*() {
                    var t;
                    let n = {
                        movieId: e,
                        participantId: null == (t = this._conversation) ? void 0 : t.compositeUserId
                    }
                      , r = yield this._signaling.removeMovie(n);
                    if (r.error)
                        throw new Error(r.error)
                }
                ))
            }
            startStream(e=!1, t=null, n=null, r="DIRECT_LINK", i=null) {
                return g(this, null, (function*() {
                    let o = {
                        movieId: n,
                        name: t,
                        privacy: r,
                        groupId: i,
                        streamMovie: !e
                    }
                      , a = yield this._signaling.startStream(o);
                    return a.error ? Promise.reject(a.message) : a
                }
                ))
            }
            stopStream() {
                return g(this, null, (function*() {
                    let e = yield this._signaling.stopStream();
                    return e.error ? Promise.reject() : e
                }
                ))
            }
            recordSetRole(e, t) {
                return g(this, null, (function*() {
                    let n = yield this._signaling.recordSetRole(e, t);
                    if (n.error)
                        throw new Error(n.error)
                }
                ))
            }
            getStreamInfo() {
                return g(this, null, (function*() {
                    let e = yield this._signaling.getRecordStatus();
                    return {
                        movieId: e.recordMovieId,
                        preview: e.recordMoviePreviewUrl
                    }
                }
                ))
            }
            setLocalResolution(e, t, n) {
                return g(this, null, (function*() {
                    var r;
                    if (e < kt.videoMinWidth || t < kt.videoMinHeight)
                        throw new Error("Sizes received are less than the `videoMinWidth` or `videoMinHeight`");
                    if (null == n ? void 0 : n.effect) {
                        if (n.effect.width < kt.videoMinWidth || n.effect.height < kt.videoMinHeight)
                            throw new Error("Sizes of effect received are less than the `videoMinWidth` or `videoMinHeight`");
                        kt.videoEffectMaxHeight = n.effect.height,
                        kt.videoEffectMaxWidth = n.effect.width
                    }
                    return kt.videoMaxWidth = e,
                    kt.videoMaxHeight = t,
                    null == (r = this._mediaSource) ? void 0 : r.setResolution(e, t)
                }
                ))
            }
            videoEffect(e) {
                return g(this, null, (function*() {
                    var t;
                    return null == (t = this._mediaSource) ? void 0 : t.videoEffect(e)
                }
                ))
            }
            _onLocalMediaStreamChanged(e) {
                return g(this, null, (function*() {
                    var t, n;
                    !this._conversation || (Yt.debug("Local media stream changed", e.mediaSettings),
                    jt.onLocalStreamUpdate(e.mediaSettings, e.kind),
                    this._signaling.ready && !(null == (t = this._conversation) ? void 0 : t.waitingHall) && !(null == (n = this._conversation) ? void 0 : n.observer) && (yield this._signaling.changeMediaSettings(e.mediaSettings)))
                }
                ))
            }
            _onScreenSharingStatus(e) {
                return g(this, null, (function*() {
                    var t, n;
                    if (Yt.log("Screen sharing changed", e.track, e.mediaSettings),
                    kt.consumerScreenTrack) {
                        let r = e.track ? new MediaStream([e.track]) : null;
                        jt.onScreenStream(r, e.mediaSettings),
                        this._signaling.ready && !(null == (t = this._conversation) ? void 0 : t.waitingHall) && !(null == (n = this._conversation) ? void 0 : n.observer) && (yield this._signaling.changeMediaSettings(e.mediaSettings))
                    }
                }
                ))
            }
            _changeRemoteMediaSettings(e, t) {
                Yt.debug(`Remote media settings changed [${e}]`, t);
                let n = this._participants[e];
                !n || (n.mediaSettings = t,
                "ACTIVE" === this._state && jt.onRemoteMediaSettings(n.externalId, t),
                this._specListener && this._specListener.onChangeRemoteMediaSettings(e, t))
            }
            _changeRemoteParticipantState(e, t) {
                Yt.debug(`Remote participant state changed [${e}]`, t);
                let n = this._participants[e];
                !n || (n.participantState = t || {},
                "ACTIVE" === this._state && jt.onRemoteParticipantState(n.externalId, n.participantState))
            }
            _invokeRolesChangedCallbackIfNeeded(e) {
                "ACTIVE" === this._state && e.roles && e.roles.length && (Yt.debug(`Roles for participant [${e.id}] changed: ${e.roles}`),
                jt.onRolesChanged(e.externalId, e.roles))
            }
            _onSignalingNotification(e) {
                switch (e.notification) {
                case J.ACCEPTED_CALL:
                    return this._onAcceptedCall(e);
                case J.HUNGUP:
                    return this._onHungup(e);
                case J.PARTICIPANT_ADDED:
                    return this._onAddedParticipant(e);
                case J.PARTICIPANT_JOINED:
                    return this._onJoinedParticipant(e);
                case J.CLOSED_CONVERSATION:
                    return this._onClosedConversation(e);
                case J.MEDIA_SETTINGS_CHANGED:
                    return this._onMediaSettingsChanged(e);
                case J.PARTICIPANT_STATE_CHANGED:
                    return this._onParticipantStateChanged(e);
                case J.RATE_CALL_DATA:
                    return this._onNeedRate();
                case J.FEATURE_SET_CHANGED:
                    return this._onFeatureSetChanged(e);
                case J.MULTIPARTY_CHAT_CREATED:
                    return this._onMultipartyChatCreated(e);
                case J.FORCE_MEDIA_SETTINGS_CHANGE:
                    return this._onForceMediaSettingsChange(e);
                case J.SETTINGS_UPDATE:
                    return this._onSettingsUpdate(e);
                case J.VIDEO_QUALITY_UPDATE:
                    return this._onVideoQualityUpdate(e);
                case J.REGISTERED_PEER:
                    return this._onPeerRegistered(e);
                case J.SWITCH_MICRO:
                    return this._onMicSwitched(e);
                case J.CHAT_MESSAGE:
                    return this._onChatMessage(e);
                case J.CUSTOM_DATA:
                    return this._onCustomData(e);
                case J.RECORD_STARTED:
                    return this._onRecordInfo(e.recordInfo);
                case J.RECORD_STOPPED:
                    return this._onRecordInfo(null);
                case J.ROLES_CHANGED:
                    return this._onRolesChanged(e.participantId, e.roles || []);
                case J.MUTE_PARTICIPANT:
                    return this._onMuteParticipant(e);
                case J.PIN_PARTICIPANT:
                    return this._onPinParticipant(e.participantId, e.unpin);
                case J.OPTIONS_CHANGED:
                    return this._onOptionsChanged(e.options || []);
                case J.PARTICIPANT_SOURCES_UPDATE:
                    return this._onParticipantSourcesUpdate(e.participantUpdateInfos);
                case J.PROMOTE_PARTICIPANT:
                    return this._onParticipantPromoted(e);
                case J.CHAT_ROOM_UPDATED:
                    return this._onChatRoomUpdated(e.eventType, e.totalCount, e.firstParticipants)
                }
            }
            _onSignalingReconnect(e) {
                return g(this, null, (function*() {
                    if (!this._conversation)
                        return;
                    e.conversation.acceptTime && (this._conversation.acceptTime = e.conversation.acceptTime),
                    e.conversation.participantsLimit && (this._conversation.participantsLimit = e.conversation.participantsLimit),
                    e.conversation.features && (this._conversation.features = e.conversation.features,
                    this._changeFeatureSet()),
                    e.conversation.pinnedParticipantId !== this._conversation.pinnedParticipantId && (e.conversation.pinnedParticipantId ? this._onPinParticipant(e.conversation.pinnedParticipantId, !1) : this._conversation.pinnedParticipantId && this._onPinParticipant(this._conversation.pinnedParticipantId, !0)),
                    e.conversation.state;
                    let t = null;
                    if (e.conversation.participants) {
                        let n = Object.keys(this._participants)
                          , r = [];
                        for (let n of e.conversation.participants) {
                            let e = Ye.composeId(n)
                              , i = n.roles || [];
                            if (e === this._conversation.compositeUserId) {
                                t = Be(n.mediaSettings),
                                se(this._conversation.roles, i) || this._onRolesChanged(e, i);
                                continue
                            }
                            r.push(e);
                            let o = this._participants[e];
                            if (o) {
                                let t = Be(n.mediaSettings);
                                ke(t, o.mediaSettings) || this._changeRemoteMediaSettings(e, t);
                                let r = Ye.mapParticipantState(n)
                                  , a = o.participantState;
                                Ye.isEqualParticipantState(r, a) || this._changeRemoteParticipantState(e, r),
                                se(i, o.roles) || this._onRolesChanged(o.id, i)
                            } else
                                yield this._onJoinedParticipant({
                                    participantId: n.id,
                                    participant: n,
                                    mediaSettings: n.mediaSettings
                                })
                        }
                        for (let e of n)
                            r.indexOf(e) < 0 && this._removeParticipant(this._participants[e], F.HUNGUP)
                    }
                    this._onMuteParticipant({
                        muteStates: e.conversation.muteStates,
                        unmuteOptions: e.unmuteOptions,
                        mediaOptions: []
                    }, t),
                    this._onRecordInfo(e.conversation.recordInfo),
                    this._onOptionsChanged(e.conversation.options)
                }
                ))
            }
            _onSignalingFailed(e) {
                Yt.error("Signaling failed", e),
                this._close(e)
            }
            _onAcceptedCall(e) {
                return g(this, null, (function*() {
                    let t = Ye.composeMessageId(e)
                      , n = Ye.getPeerIdString(e.peerId);
                    if (Yt.debug(`Participant accepted call [${t}]`),
                    this._conversation && t === this._conversation.compositeUserId)
                        return void this._close(new We(F.MISSED), "Call accepted on other device");
                    let r = this._participants[t];
                    r || (this._participants[t] = yield this._createParticipant({
                        id: t,
                        mediaSettings: Be(e.mediaSettings)
                    }),
                    r = this._participants[t]),
                    r.state = q.ACCEPTED,
                    r.mediaSettings = Be(e.mediaSettings),
                    this._logWithMediaSettings(ee.ACCEPTED_OUTGOING, r.mediaSettings),
                    this._conversation && this._conversation.direction === C.OUTGOING && ("IDLE" === this._state || "PROCESSING" === this._state) && (this._state = "ACTIVE",
                    this._changeFeatureSet()),
                    "ACTIVE" === this._state && this._transport && this._transport.open([r.id], n),
                    this._changeRemoteMediaSettings(t, r.mediaSettings),
                    this._changeRemoteParticipantState(t)
                }
                ))
            }
            _onHungup(e) {
                Yt.debug(`Participant hungup [${e.participantId}]`, {
                    reason: e.reason
                });
                let t = Ye.composeMessageId(e);
                if (this._conversation && this._conversation.compositeUserId === t)
                    return void this._close(new We(e.reason,{
                        remote: !0
                    }));
                let n = this._participants[t];
                n ? (this._transport && this._transport.close(t),
                n.state = e.reason === F.REJECTED ? q.REJECTED : q.HUNGUP,
                "CLOSE" !== this._state && this._removeParticipant(n, F.HUNGUP)) : Yt.warn(`Participant [${t}] isn't in conversation`)
            }
            _onAddedParticipant(e) {
                return g(this, null, (function*() {
                    var t, n;
                    Yt.debug(`Participant added [${e.participantId}]`);
                    let r = Ye.composeMessageId(e)
                      , i = this._participants[r];
                    i && i.state !== q.HUNGUP && i.state !== q.REJECTED ? Yt.debug(`Participant [${r}] is already in conversation and is active`) : (i || (this._participants[r] = yield this._createParticipant({
                        id: r,
                        externalId: e.participant.externalId && $t.fromSignaling(e.participant.externalId, e.participant.deviceIdx || 0),
                        mediaSettings: Be(e.participant.mediaSettings),
                        state: e.participant.state,
                        participantState: Ye.mapParticipantState(e.participant),
                        roles: e.participant.roles || [],
                        muteStates: e.participant.muteStates || {},
                        unmuteOptions: e.participant.unmuteOptions || [],
                        observedIds: e.participant.observedIds || []
                    }),
                    i = this._participants[r]),
                    i.state = q.CALLED,
                    i.mediaSettings = Be(null == (t = e.participant) ? void 0 : t.mediaSettings),
                    i.participantState = Ye.mapParticipantState(e.participant),
                    i.roles = (null == (n = e.participant) ? void 0 : n.roles) || [],
                    this._setParticipantsStatus([i], Ut.WAITING),
                    "ACTIVE" === this._state && this._transport && this._transport.allocate(i.id, !0),
                    this._changeRemoteMediaSettings(r, i.mediaSettings),
                    this._changeRemoteParticipantState(r, i.participantState),
                    this._invokeRolesChangedCallbackIfNeeded(i))
                }
                ))
            }
            _onJoinedParticipant(e) {
                return g(this, null, (function*() {
                    var t, n;
                    Yt.debug(`Participant joined [${e.participantId}]`);
                    let r = Ye.composeMessageId(e)
                      , i = this._participants[r];
                    i && i.state === q.ACCEPTED ? Yt.warn(`Participant [${r}] is already in conversation and is active`) : (i || (this._participants[r] = yield this._createParticipant({
                        id: r,
                        externalId: e.participant.externalId && $t.fromSignaling(e.participant.externalId, e.participant.deviceIdx || 0),
                        mediaSettings: Be(e.participant.mediaSettings),
                        state: e.participant.state,
                        participantState: Ye.mapParticipantState(e.participant),
                        roles: e.participant.roles || [],
                        muteStates: e.participant.muteStates || {},
                        unmuteOptions: e.participant.unmuteOptions || [],
                        observedIds: e.participant.observedIds || []
                    }),
                    i = this._participants[r]),
                    this._conversation && this._conversation.direction === C.OUTGOING && ("IDLE" === this._state || "PROCESSING" === this._state) && (this._state = "ACTIVE",
                    this._changeFeatureSet()),
                    i.state = q.ACCEPTED,
                    i.mediaSettings = Be(e.mediaSettings),
                    i.participantState = Ye.mapParticipantState(e.participant),
                    i.roles = e.participant.roles || [],
                    (null == (t = this._transport) ? void 0 : t.isAllocated(i.id)) ? this._setParticipantsStatus([i], Ut.CONNECTED) : this._setParticipantsStatus([i], Ut.WAITING),
                    "ACTIVE" === this._state && this._transport && (this._transport.isAllocated(i.id) || this._transport.allocate(i.id, !0),
                    this._transport.open([i.id], null, !!(null == (n = this._conversation) ? void 0 : n.observer))),
                    this._changeRemoteMediaSettings(r, i.mediaSettings),
                    this._changeRemoteParticipantState(r, i.participantState),
                    this._invokeRolesChangedCallbackIfNeeded(i))
                }
                ))
            }
            _onClosedConversation(e) {
                this._toggleJoinAvailability(),
                this._close(new We(e.reason,{
                    remote: !0
                }))
            }
            _onMediaSettingsChanged(e) {
                let t = Ye.composeMessageId(e);
                this._changeRemoteMediaSettings(t, Be(e.mediaSettings))
            }
            _onParticipantStateChanged(e) {
                let t = Ye.composeMessageId(e);
                this._changeRemoteParticipantState(t, Ye.mapParticipantState(e))
            }
            _onNeedRate() {
                this._conversation && (this._conversation.needRate = !0,
                this._changeNeedRate())
            }
            _onFeatureSetChanged(e) {
                this._conversation && (this._conversation.features = e.features,
                this._changeFeatureSet())
            }
            _onMultipartyChatCreated(e) {
                this._conversation && (this._conversation.chatId = e.chatId,
                this._toggleJoinAvailability(),
                jt.onMultipartyChatCreated(this._conversation))
            }
            _onForceMediaSettingsChange(e) {
                return g(this, null, (function*() {
                    if (!this._mediaSource)
                        return;
                    let t = this._mediaSource.getMediaSettings()
                      , n = Be(e.mediaSettings);
                    t.isAudioEnabled !== n.isAudioEnabled && (yield this._mediaSource.toggleAudio(n.isAudioEnabled)),
                    t.isVideoEnabled !== n.isVideoEnabled && (yield this._mediaSource.toggleVideo(n.isVideoEnabled)),
                    kt.consumerScreenTrack && t.isScreenSharingEnabled !== n.isScreenSharingEnabled && (yield this._mediaSource.toggleScreenCapturing(n.isScreenSharingEnabled))
                }
                ))
            }
            _onSettingsUpdate(e) {
                let t = {
                    camera: e.camera,
                    screenSharing: e.screenSharing
                };
                this._serverSettings = nn(this._serverSettings, t),
                this._transport && this._transport.updateSettings(this._serverSettings)
            }
            _onVideoQualityUpdate(e) {
                let t = Math.round(e.quality.maxBitrate / 1024)
                  , n = e.quality.maxDimension
                  , r = {
                    camera: Object.assign({}, this._serverSettings.camera, {
                        maxBitrateK: t,
                        maxDimension: n
                    }),
                    screenSharing: null
                };
                this._serverSettings = nn(this._serverSettings, r),
                Yt.log("Got video quality update notification", this._serverSettings),
                this._transport && this._transport.updateSettings(this._serverSettings)
            }
            _onPeerRegistered(e) {
                let t = Ye.composeMessageId(e);
                this._participants[t] && (this._participants[t].clientType = e.clientType,
                this._participants[t].platform = e.platform)
            }
            _onMicSwitched(e) {
                return g(this, null, (function*() {
                    jt.onDeviceSwitched(V.AUDIO, !e.mute),
                    yield this.toggleLocalAudio(!e.mute)
                }
                ))
            }
            _onChatMessage(e) {
                return g(this, null, (function*() {
                    let t, n = Ye.composeMessageId(e);
                    t = this._participants[n] ? this._participants[n].externalId : yield this._getParticipantId(n),
                    jt.onChatMessage(e.message, t, e.direct)
                }
                ))
            }
            _onCustomData(e) {
                return g(this, null, (function*() {
                    if (e.data.hasOwnProperty("sdk"))
                        return;
                    let t, n = Ye.composeMessageId(e);
                    t = this._participants[n] ? this._participants[n].externalId : yield this._getParticipantId(n),
                    jt.onCustomData(e.data, t, e.direct)
                }
                ))
            }
            _onRecordInfo(e) {
                return g(this, null, (function*() {
                    if (!this._conversation)
                        return;
                    let t = !1;
                    if (!this._conversation.recordInfo != !e ? t = !0 : this._conversation.recordInfo && e && (t = this._conversation.recordInfo.recordMovieId !== e.recordMovieId),
                    t)
                        if (e) {
                            let t = yield this._getParticipantId(e.initiator);
                            jt.onRecordStarted(t, e.recordMovieId, e.recordStartTime, e.recordType, e.recordExternalMovieId, e.recordExternalOwnerId)
                        } else
                            jt.onRecordStopped();
                    this._conversation.recordInfo = e
                }
                ))
            }
            _onRolesChanged(e, t) {
                if (this._conversation && e === this._conversation.compositeUserId && !se(this._conversation.roles, t))
                    return Yt.debug(`Local roles changed: ${t}`),
                    this._conversation.roles = t,
                    jt.onLocalRolesChanged(t),
                    void this._processMuteState(Object.keys(this._conversation.muteStates));
                let n = this._participants[e];
                n && !se(n.roles, t) && (Yt.debug(`Roles for participant [${e}] changed: ${t}`),
                n.roles = t,
                jt.onRolesChanged(n.externalId, t))
            }
            _onMuteParticipant(e, t=null) {
                return g(this, null, (function*() {
                    if (!this._conversation)
                        return;
                    let n = e.muteStates || {}
                      , r = e.unmuteOptions || []
                      , i = e.mediaOptions || []
                      , o = e.adminId ? this._participants[e.adminId] : null;
                    if (e.participantId && e.participantId !== this._conversation.compositeUserId) {
                        if (!this._isCallAdmin())
                            return void Yt.warn(`Not admin got mute states for participant [${e.participantId}]`);
                        let t = this._participants[e.participantId];
                        t && (Yt.debug(`Mute states for participant [${e.participantId}] changed`, n),
                        jt.onMuteStates(n, r, i, e.muteAll, e.unmute, t.externalId, null == o ? void 0 : o.externalId))
                    } else
                        Ye.isObjectsEquals(this._conversation.muteStates, n) && Ye.isArraysEquals(this._conversation.unmuteOptions, r) && !i.length || (this._conversation.muteStates = n,
                        this._conversation.unmuteOptions = r,
                        e.adminId !== this._conversation.compositeUserId && (yield this._processMuteState(i, e.muteAll, e.unmute, t, o)))
                }
                ))
            }
            _processMuteState() {
                return g(this, arguments, (function*(e=[], t=!1, n=!1, r=null, i=null) {
                    if (!this._conversation || !this._mediaSource || this._participantState !== q.ACCEPTED)
                        return;
                    let o = Object.assign({}, this._conversation.muteStates)
                      , a = this._conversation.unmuteOptions
                      , s = this._mediaSource.getMediaSettings()
                      , c = Object.entries(o);
                    for (let[t,i] of c)
                        if ((i === j.MUTE || i === j.MUTE_PERMANENT) && (this._isCallAdmin() && i === j.MUTE_PERMANENT && (o[t] = j.MUTE),
                        e.includes(t) && !n))
                            switch (t) {
                            case V.VIDEO:
                                s.isVideoEnabled && !(null == r ? void 0 : r.isVideoEnabled) && (jt.onDeviceSwitched(V.VIDEO, !1),
                                yield this.toggleLocalVideo(!1));
                                break;
                            case V.AUDIO:
                                s.isAudioEnabled && !(null == r ? void 0 : r.isAudioEnabled) && (jt.onDeviceSwitched(V.AUDIO, !1),
                                yield this.toggleLocalAudio(!1));
                                break;
                            case V.SCREEN_SHARING:
                                s.isScreenSharingEnabled && !(null == r ? void 0 : r.isScreenSharingEnabled) && (jt.onDeviceSwitched(V.SCREEN_SHARING, !1),
                                yield this.toggleScreenCapturing(!1))
                            }
                    jt.onMuteStates(o, a, e, t, n, null, null == i ? void 0 : i.externalId)
                }
                ))
            }
            _onPinParticipant(e, t=!1) {
                if (!this._conversation)
                    return;
                let n = this._conversation.pinnedParticipantId;
                n && n !== e && (this._participants[n] ? jt.onPinnedParticipant(this._participants[n].externalId, !0) : this._conversation.compositeUserId === n && jt.onLocalPin(!0)),
                this._participants[e] ? jt.onPinnedParticipant(this._participants[e].externalId, t) : this._conversation.compositeUserId === e && jt.onLocalPin(t),
                this._conversation.pinnedParticipantId = t ? null : e
            }
            _onOptionsChanged(e) {
                this._conversation && !function(e, t) {
                    if (e.length !== t.length)
                        return !1;
                    for (let n of e)
                        if (!t.includes(n))
                            return !1;
                    return !0
                }(this._conversation.options, e) && (this._conversation.options = e,
                jt.onOptionsChanged(e))
            }
            _onNetworkStatus(e) {
                if (this._conversation) {
                    let t = [];
                    for (let[n,r] of Object.entries(e)) {
                        let e;
                        if (n === this._conversation.compositeUserId || "" === n)
                            e = this._conversation.networkRating;
                        else {
                            if (!this._participants[n])
                                continue;
                            e = this._participants[n].networkRating
                        }
                        if (e !== r)
                            if (n === this._conversation.compositeUserId || "" === n)
                                this._conversation.networkRating = r,
                                jt.onLocalNetworkStatusChanged(r);
                            else {
                                let e = this._participants[n];
                                e.networkRating = r,
                                t.push({
                                    uid: e.externalId,
                                    rating: r
                                })
                            }
                    }
                    if (0 === t.length)
                        return;
                    Yt.log("Received network status update: ", e),
                    jt.onNetworkStatusChanged(t)
                }
            }
            _onRemoteStreamSecond(e, t) {
                let n = this._participants[e];
                if (n) {
                    if (kt.producerScreenTrack)
                        return void jt.onRemoteScreenStream(n.externalId, t);
                    if (n.secondStream = t,
                    kt.videoTracksCount > 0) {
                        let t = e;
                        if (!this._streamIdByStreamDescription.has(t))
                            return void Yt.error("Received remote stream notification for a participant that has no track associated with it", t);
                        let r = this._streamIdByStreamDescription.get(t);
                        if (!r || this._streamWaitTimerByStreamDescription.has(t))
                            return void Yt.log("Delaying secondary stream start/stop until main stream becomes available", t);
                        let i = this._streamByStreamId.get(r);
                        if (!i)
                            return Se.log(ee.PAT_ERROR, "streamNotFound"),
                            void Yt.error(`Could not find stream by ID: ${r}`);
                        jt.onRemoteStream(n.externalId, n.secondStream || i)
                    } else {
                        let e = t || n.remoteStream;
                        e && jt.onRemoteStream(n.externalId, e)
                    }
                }
            }
            _onPeerConnectionClosed(e) {
                e === Rn.SERVER && this._cleanupParticipantAgnosticStreams()
            }
            _changeFeatureSet() {
                if (this._conversation) {
                    let e = "ACTIVE" === this._state
                      , t = this._conversation.features.includes(O.ADD_PARTICIPANT);
                    jt.onCallState(e, t, this._conversation)
                }
            }
            _changeNeedRate() {
                this._conversation && this._conversation.needRate && jt.onRateNeeded()
            }
            _onVolumesDetected(e) {
                let t = [];
                for (let[n,r] of Object.entries(e)) {
                    let e = this._participants[n];
                    e && e.externalId && t.push({
                        uid: e.externalId,
                        volume: r.real
                    })
                }
                jt.onVolumesDetected(t)
            }
            _onSpeakerChanged(e) {
                this._activeSpeakerId = e,
                this._participants[e] && this._lastSignalledActiveSpeakerId !== e && (jt.onSpeakerChanged(this._participants[e].externalId),
                this._lastSignalledActiveSpeakerId = e)
            }
            _onTransportStateChanged(e, t) {
                return g(this, null, (function*() {
                    let n;
                    if (Yt.debug(`Transport state has changed: ${t}`, e),
                    t === Mn.CONNECTED ? n = Ut.CONNECTED : t === Mn.CONNECTING || t === Mn.OPENED ? n = Ut.CONNECTING : t === Mn.RECONNECTING && (n = Ut.RECONNECT),
                    !n)
                        return;
                    let r = e.reduce(((e,n)=>{
                        if (n in this._participants) {
                            let r = this._participants[n];
                            e.push(r),
                            t === Mn.CONNECTED && (r.remoteStream || (r.mediaSettings && this._changeRemoteMediaSettings(n, r.mediaSettings),
                            this._changeRemoteParticipantState(n, r.participantState)),
                            this._updateDisplayLayoutFromCache(n))
                        } else
                            Yt.warn(`Participant [${n}] isn't in conversation`);
                        return e
                    }
                    ), []);
                    !r.length || this._setParticipantsStatus(r, n)
                }
                ))
            }
            _onTransportLocalStateChanged(e) {
                return g(this, null, (function*() {
                    Yt.debug(`Local transport state has changed: ${e}`),
                    e === Mn.CONNECTED && jt.onLocalStatus(Ut.CONNECTED),
                    e === Mn.CONNECTING && jt.onLocalStatus(Ut.CONNECTING),
                    e === Mn.RECONNECTING && jt.onLocalStatus(Ut.RECONNECT),
                    e === Mn.FAILED && this._transport && 0 === this._transport.allocated().length && (this._signaling.ready && (yield this._signaling.hangup(F.FAILED)),
                    this._close(new We(F.FAILED), "Transport failed"))
                }
                ))
            }
            _onRemoteTrackAdded(e, t, n) {
                return g(this, null, (function*() {
                    if (e.endsWith(ne.AUDIO_MIX))
                        Yt.debug("Remote audio mix track added"),
                        this._audioOutput.add(n);
                    else if (e.startsWith(ne.PARTICIPANT_AGNOSTIC_TRACK_PREFIX))
                        Yt.debug(`Participant-agnostic track added: ${e}`),
                        this._streamByStreamId.set(e, t);
                    else {
                        Yt.debug(`Remote track added on the participant [${e}]`, {
                            kind: n.kind
                        });
                        let r = this._participants[e];
                        if (r || (Yt.warn(`Conversation: track added before participant [${e}]`),
                        this._participants[e] = yield this._createParticipant({
                            id: e
                        }),
                        r = this._participants[e],
                        this._setParticipantsStatus([r], Ut.WAITING),
                        this._activeSpeakerId === e && this._lastSignalledActiveSpeakerId !== e && (jt.onSpeakerChanged(r.externalId),
                        this._lastSignalledActiveSpeakerId = e)),
                        this._transport && !this._transport.isAllocated(r.id) && this._transport.allocate(r.id, !1),
                        n.kind === Ke.audio && (this._audioOutput.add(n),
                        t.removeTrack(n)),
                        r.remoteStream !== t) {
                            if (r.remoteStream = t,
                            r.secondStream)
                                return;
                            jt.onRemoteStream(r.externalId, t)
                        }
                        r.mediaSettings && this._changeRemoteMediaSettings(e, r.mediaSettings),
                        kt.batchParticipantsOnStart || this._changeRemoteParticipantState(e, r.participantState)
                    }
                }
                ))
            }
            _onRemoteTrackRemoved(e, t, n) {
                switch (Yt.debug(`[${e}] remote track (removed)`, {
                    track: n
                }),
                n.kind) {
                case Ke.audio:
                    this._removeAudioTrack(e, t, n);
                    break;
                case Ke.video:
                case Ke.screen:
                    this._removeVideoTrack(e, t, n)
                }
            }
            _removeAudioTrack(e, t, n) {
                if (e !== ne.AUDIO_MIX) {
                    let n = this._participants[e];
                    if (!n || n.remoteStream && n.remoteStream !== t)
                        return
                }
                this._audioOutput.remove(n)
            }
            _removeVideoTrack(e, t, n) {}
            _onTopologyChanged(e) {
                e === Rn.DIRECT && (this._onRemoteSignalledStall([]),
                this._onRemoteAllStall(!1)),
                this._conversation && (this._conversation.topology = e,
                this._changeFeatureSet())
            }
            _onRemoteAllStall(e) {
                if (this._remoteAllStalled === e)
                    return;
                this._remoteAllStalled = e;
                let t = []
                  , n = [];
                for (let r in this._participants)
                    if (this._participants.hasOwnProperty(r)) {
                        let i = this._participants[r];
                        e || this._lastStalled[r] ? t.push(i) : n.push(i)
                    }
                t.length && this._setParticipantsStatus(t, Ut.RECONNECT),
                n.length && this._setParticipantsStatus(n, Ut.CONNECTED)
            }
            _onRemoteSignalledStall(e) {
                let t = {}
                  , n = []
                  , r = [];
                e.forEach((e=>{
                    if (t[e] = !0,
                    !this._lastStalled[e]) {
                        let t = this._participants[e];
                        t && !this._remoteAllStalled && n.push(t)
                    }
                    delete this._lastStalled[e]
                }
                )),
                Object.keys(this._lastStalled).forEach((e=>{
                    let t = this._participants[e];
                    t && !this._remoteAllStalled && r.push(t)
                }
                )),
                n.length && this._setParticipantsStatus(n, Ut.RECONNECT),
                r.length && this._setParticipantsStatus(r, Ut.CONNECTED),
                this._lastStalled = t
            }
            _onRemoteDataStats(e) {
                this._debugInfo && this._debugInfo.onRemoteDataStats(e, this._participants),
                this._fixAudioDevice(e.outbound.rtps)
            }
            _fixAudioDevice(e) {
                var t;
                !wt.hasMicrophone() || !this._audioFix || !(null == (t = this._mediaSource) ? void 0 : t.getMediaSettings().isAudioEnabled) || this._audioFix.fix(e)
            }
            _toggleJoinAvailability() {
                let e = this._conversation && this._conversation.chatId
                  , t = e && "CLOSE" !== this._state || !1;
                e && (Yt.debug("Toggle join availability", {
                    available: t,
                    chatId: e
                }),
                jt.onJoinStatus(t, e))
            }
            _updateDisplayLayoutFromCache(e) {
                return g(this, null, (function*() {
                    var t;
                    if ((null == (t = this._transport) ? void 0 : t.getTopology()) !== Rn.SERVER)
                        return;
                    let n = this._participants[e];
                    n && n.lastRequestedLayouts && Object.keys(n.lastRequestedLayouts).length && (yield this.updateDisplayLayout(Object.values(n.lastRequestedLayouts)))
                }
                ))
            }
            _setParticipantsStatus(e, t, n=null) {
                if (!e.length)
                    return;
                let r = e.reduce(((e,r)=>(r.status !== t && (r.status = t,
                kt.batchParticipantsOnStart ? e.push(r.externalId) : jt.onParticipantStatus(r.externalId, t, n)),
                e)), []);
                !r.length || kt.batchParticipantsOnStart && jt.onRemoteStatus(r, t, n)
            }
        }
        , Fn = Wn;
        Fn._delayedHangup = !1;
        var Kn, Vn = class extends Error {
            constructor(e, t) {
                super(e),
                Object.setPrototypeOf(this, Vn.prototype),
                this.participantErrors = t
            }
        }
        ;
        function Hn() {
            return g(this, null, (function*() {
                var e;
                if ("AUTO" !== kt.apiEnv)
                    return kt.apiEndpoint;
                try {
                    let t = atob("aHR0cHM6Ly9kbnMuZ29vZ2xlL3Jlc29sdmU/bmFtZT12aWRlby5fZW5kcG9pbnQub2sucnUmdHlwZT1UWFQ=")
                      , n = yield(yield fetch(t, {
                        method: "GET",
                        mode: "cors",
                        cache: "no-cache"
                    })).json()
                      , r = null == (e = null == n ? void 0 : n.Answer[0]) ? void 0 : e.data;
                    if (!r)
                        throw new Error("Wrong DNS response");
                    return Yt.debug("Resolved API endpoint", r),
                    r
                } catch (e) {
                    return Yt.warn("Failed to resolve API endpoint using DNS, default is used", e),
                    kt.apiEndpoint
                }
            }
            ))
        }
        function jn(e, t={}, n=!1) {
            if (!window.Blob || !window.navigator.sendBeacon)
                return;
            let r = qn(e, t, n)
              , i = new window.Blob([r],{
                type: "application/x-www-form-urlencoded"
            });
            window.navigator.sendBeacon(`${Kn}/fb.do`, i)
        }
        function Gn(e) {
            return g(this, null, (function*() {
                return new Promise(((t,n)=>{
                    let r = new XMLHttpRequest;
                    r.open("POST", `${Kn}/fb.do`, !0),
                    r.setRequestHeader("Content-type", "application/x-www-form-urlencoded"),
                    r.onreadystatechange = ()=>{
                        if (r.readyState !== XMLHttpRequest.DONE)
                            return;
                        let e;
                        try {
                            e = JSON.parse(r.responseText)
                        } catch (t) {
                            e = {
                                result: r.responseText
                            }
                        }
                        200 !== r.status || e.hasOwnProperty("error_msg") ? n(e) : t(e)
                    }
                    ,
                    r.send(e)
                }
                ))
            }
            ))
        }
        function qn(e, t={}, n=!1) {
            t.method = e,
            t.format = "JSON",
            t.application_key || (t.application_key = kt.apiKey),
            n || (Rt.sessionKey ? t.session_key = Rt.sessionKey : Rt.accessToken && (t.access_token = Rt.accessToken));
            for (let[e,n] of Object.entries(t))
                "object" == typeof n && (t[e] = JSON.stringify(n));
            let r = "";
            for (let[e,n] of Object.entries(t))
                r && (r += "&"),
                r += `${e}=${encodeURIComponent(n)}`;
            return r
        }
        var $n, Yn = class extends v {
            constructor() {
                super(...arguments),
                this._userId = null,
                this._externalUidsCache = {}
            }
            _callUnsafe(e) {
                return g(this, arguments, (function*(e, t={}, n=!1) {
                    let r = i=>g(this, null, (function*() {
                        try {
                            return yield function(e) {
                                return g(this, arguments, (function*(e, t={}, n=!1) {
                                    return Kn || (Kn = yield Hn()),
                                    Gn(qn(e, t, n))
                                }
                                ))
                            }(e, t, n)
                        } catch (t) {
                            if (!t.hasOwnProperty("error_msg") && (i++,
                            Yt.debug(`${e} network error, attempt ${i}...`),
                            i < 10))
                                return yield Ye.delay(Math.min(700 * i, 3e3)),
                                r(i);
                            throw Yt.warn(e, "error", t),
                            t
                        }
                    }
                    ));
                    return r(0)
                }
                ))
            }
            _call(e) {
                return g(this, arguments, (function*(e, t={}, n=!1) {
                    try {
                        return yield this._callUnsafe(e, t, n)
                    } catch (r) {
                        Yt.warn("Api call error", r);
                        let i = U.API;
                        switch (r.error_code) {
                        case 102:
                        case 103:
                        case 104:
                            return yield this.authorize(),
                            this._callUnsafe(e, t, n);
                        case 1101:
                            i = F.SERVICE_DISABLED;
                            break;
                        case 1102:
                            i = F.CALLEE_IS_OFFLINE;
                            break;
                        case 1103:
                            i = F.NOT_FRIENDS;
                            break;
                        case 1104:
                        case 1106:
                            i = F.EXTERNAL_API_ERROR
                        }
                        throw new We(i,{
                            message: r.error_msg,
                            code: r.error_code
                        })
                    }
                }
                ))
            }
            userId(e) {
                return g(this, null, (function*() {
                    let t = Ye.decomposeId(e).id;
                    return Rt.isEmpty() ? qt.fromId(String(t)) : (this._externalUidsCache.hasOwnProperty(t) || Object.assign(this._externalUidsCache, yield this._getExternalIdsByOkIds([t])),
                    qt.fromString(this._externalUidsCache[t]))
                }
                ))
            }
            prepareUserIds(e) {
                return g(this, null, (function*() {
                    Rt.isEmpty() || Object.assign(this._externalUidsCache, yield this._getExternalIdsByOkIds(e))
                }
                ))
            }
            authorize() {
                return g(this, null, (function*() {
                    if (!this._uuid) {
                        let e = Le.get("uuid");
                        e || (e = Ye.uuid(),
                        Le.set("uuid", e)),
                        this._uuid = String(e)
                    }
                    let e = {
                        session_data: {
                            version: 2,
                            device_id: this._uuid,
                            client_version: kt.appVersion,
                            client_type: "SDK_JS"
                        }
                    };
                    return kt.authToken && (e.session_data.auth_token = kt.authToken,
                    e.session_data.version = 3),
                    this._callUnsafe("auth.anonymLogin", e, !0).then((e=>{
                        e.uid && (this._userId = Number(e.uid)),
                        Rt.sessionKey = e.session_key,
                        Rt.sessionSecretKey = e.session_secret_key
                    }
                    )).catch((e=>{
                        throw 401 === e.error_code && jt.onTokenExpired(),
                        new We(U.AUTH,{
                            message: e.error_msg,
                            code: e.error_code
                        })
                    }
                    ))
                }
                ))
            }
            log(e) {
                jn("log.externalLog", {
                    collector: "ok.mobile.apps.video",
                    data: JSON.stringify({
                        application: `${kt.appName}:${kt.sdkVersion}`,
                        platform: kt.platform,
                        items: e
                    })
                })
            }
            init() {
                !function() {
                    if (!kt.apiKey)
                        throw new We(U.API,{
                            message: "Required argument apiAppKey not passed"
                        })
                }()
            }
            joinConversation(e, t=!1, n) {
                return g(this, null, (function*() {
                    let r = {
                        conversationId: e,
                        isVideo: t,
                        protocolVersion: kt.protocolVersion
                    };
                    return n && (r.chatId = n),
                    this._call("vchat.joinConversation", r)
                }
                ))
            }
            createConversation(e, t="", n=!1) {
                return g(this, null, (function*() {
                    let r = {
                        conversationId: e,
                        createJoinLink: !0,
                        isVideo: !1
                    };
                    return t && (r.payload = t),
                    kt.domain && (r.domainId = kt.domain),
                    n && (r.requireAuthToJoin = !0),
                    this._startConversation(r)
                }
                ))
            }
            startConversation(e, t, n, r=!1, i="", o=!1, a=!1) {
                return g(this, null, (function*() {
                    let s = {
                        conversationId: e,
                        isVideo: r
                    };
                    if (t && t.length)
                        switch (n) {
                        case D.USER:
                            s.uids = t.join(",");
                            break;
                        case D.GROUP:
                            s.gid = t[0];
                            break;
                        case D.CHAT:
                            s.chatId = t[0]
                        }
                    return o && (s.createJoinLink = !0),
                    i && (s.payload = i),
                    kt.domain && (s.domainId = kt.domain),
                    a && (s.requireAuthToJoin = !0),
                    this._startConversation(s)
                }
                ))
            }
            _startConversation(e) {
                return g(this, null, (function*() {
                    return this._call("vchat.startConversation", e)
                }
                ))
            }
            createJoinLink(e) {
                return g(this, null, (function*() {
                    return this._call("vchat.createJoinLink", {
                        conversationId: e
                    })
                }
                ))
            }
            removeJoinLink(e) {
                return g(this, null, (function*() {
                    return this._call("vchat.removeJoinLink", {
                        conversationId: e
                    })
                }
                ))
            }
            getAnonymTokenByLink(e, t) {
                return g(this, null, (function*() {
                    let n = {
                        joinLink: e
                    };
                    t && (n.anonymName = t);
                    let r = yield this._call("vchat.getAnonymTokenByLink", n);
                    return this._userId = Number(r.uid),
                    r.token
                }
                ))
            }
            joinConversationByLink(e, t=!1, n) {
                return g(this, null, (function*() {
                    let r = {
                        joinLink: e,
                        isVideo: t,
                        protocolVersion: kt.protocolVersion
                    };
                    return (null == n ? void 0 : n.length) && (r.observedIds = n.join(",")),
                    kt.anonymToken && (r.anonymToken = kt.anonymToken),
                    this._call("vchat.joinConversationByLink", r)
                }
                ))
            }
            getOkIdsByExternalIds(e) {
                return g(this, null, (function*() {
                    let t = qt.fromIds(e)
                      , n = []
                      , r = {
                        methods: []
                    }
                      , i = []
                      , o = Object.keys(this._externalUidsCache)
                      , a = Object.values(this._externalUidsCache);
                    for (let e of t) {
                        let t = qt.toString(e)
                          , s = a.indexOf(t);
                        s > -1 ? n.push(Number(o[s])) : (i.push(t),
                        r.methods.push({
                            "vchat.getOkIdByExternalId": {
                                params: {
                                    externalId: e.id,
                                    anonym: e.type === zt.ANONYM
                                },
                                onError: "SKIP"
                            }
                        }))
                    }
                    return r.methods.length && (yield this._call("batch.executeV2", r)).forEach(((e,t)=>{
                        if (e.ok) {
                            let r = Number(e.ok.ok_id);
                            this._externalUidsCache[r] = i[t],
                            n.push(r)
                        }
                    }
                    )),
                    n
                }
                ))
            }
            getExternalIdsByOkIds(e) {
                return g(this, null, (function*() {
                    let t = []
                      , n = [];
                    for (let r of e)
                        this._externalUidsCache.hasOwnProperty(r) ? t.push(qt.fromString(this._externalUidsCache[r])) : n.push(r);
                    if (!n.length)
                        return t;
                    let r = yield this._getExternalIdsByOkIds(n);
                    Object.assign(this._externalUidsCache, r);
                    for (let e of n)
                        r.hasOwnProperty(e) && t.push(qt.fromString(r[e]));
                    return t
                }
                ))
            }
            getCachedOkIdByExternalId(e) {
                let t = Object.keys(this._externalUidsCache)
                  , n = Object.values(this._externalUidsCache)
                  , r = qt.toString(e)
                  , i = n.indexOf(r);
                return i > -1 ? Ye.composeUserId(t[i], _e.USER) : null
            }
            cacheExternalId(e, t) {
                let n = Ye.decomposeId(e).id;
                this._externalUidsCache[n] = qt.toString(t)
            }
            getConversationParams(e) {
                return g(this, null, (function*() {
                    let t = {};
                    return kt.anonymToken && (t.anonymToken = kt.anonymToken),
                    e && (t.conversationId = e),
                    this._call("vchat.getConversationParams", t)
                }
                ))
            }
            getUserId() {
                return this._userId
            }
            setUserId(e) {
                this._userId = e
            }
            hangupConversation(e) {
                let t = {
                    conversationId: e,
                    reason: F.HUNGUP
                };
                kt.anonymToken && (t.anonymToken = kt.anonymToken),
                jn("vchat.hangupConversation", t)
            }
            removeHistoryRecords(e) {
                return g(this, null, (function*() {
                    yield this._call("vchat.removeHistoryRecords", {
                        recordIds: e.join(",")
                    })
                }
                ))
            }
            cleanup() {}
            _getExternalIdsByOkIds(e) {
                return g(this, null, (function*() {
                    let t = {};
                    try {
                        let n = yield this._call("vchat.getExternalIdsByOkIds", {
                            uids: e.join(",")
                        });
                        if (n.external_ids)
                            for (let[e,r] of Object.entries(n.external_ids))
                                t[e] = qt.fromIdToString(r, zt.USER);
                        if (n.anonym_ids)
                            for (let[e,r] of Object.entries(n.anonym_ids))
                                t[e] = qt.fromIdToString(r, zt.ANONYM);
                        return t
                    } catch (e) {
                        return t
                    }
                }
                ))
            }
        }
        , zn = (($n = zn || {}).RECOVER = "recover",
        $n.ACCEPT_CALL = "accept-call",
        $n.ADD_PARTICIPANT = "add-participant",
        $n.REMOVE_PARTICIPANT = "remove-participant",
        $n.HANGUP = "hangup",
        $n.TRANSMIT_DATA = "transmit-data",
        $n.ACCEPT_PRODUCER = "accept-producer",
        $n.ALLOCATE_CONSUMER = "allocate-consumer",
        $n.CHANGE_MEDIA_SETTINGS = "change-media-settings",
        $n.CHANGE_PARTICIPANT_STATE = "change-participant-state",
        $n.CHANGE_STREAM_PRIORITIES = "change-streams-priorities",
        $n.UPDATE_DISPLAY_LAYOUT = "update-display-layout",
        $n.REPORT_PERF_STAT = "report-perf-stat",
        $n.RECORD_START = "record-start",
        $n.RECORD_STOP = "record-stop",
        $n.RECORD_SET_ROLE = "record-set-role",
        $n.RECORD_GET_STATUS = "record-get-status",
        $n.SWITCH_MICRO = "switch-micro",
        $n.SWITCH_TOPOLOGY = "switch-topology",
        $n.REQUEST_REALLOC = "request-realloc",
        $n.CHAT_MESSAGE = "chat-message",
        $n.CHAT_HISTORY = "chat-history",
        $n.CUSTOM_DATA = "custom-data",
        $n.GRANT_ROLES = "grant-roles",
        $n.MUTE_PARTICIPANT = "mute-participant",
        $n.PIN_PARTICIPANT = "pin-participant",
        $n.UPDATE_MEDIA_MODIFIERS = "update-media-modifiers",
        $n.CHANGE_OPTIONS = "change-options",
        $n.GET_WAITING_HALL = "get-waiting-hall",
        $n.PROMOTE_PARTICIPANT = "promote-participant",
        $n.REQUEST_TEST_MODE = "request-test-mode",
        $n.ADD_MOVIE = "add-movie",
        $n.UPDATE_MOVIE = "update-movie",
        $n.REMOVE_MOVIE = "remove-movie",
        $n), Xn = zn, Qn = "open", Jn = [()=>kt.producerScreenTrack, ()=>kt.videoTracksCount > 0, ()=>!0, ()=>kt.filteredMessages, ()=>kt.consumerScreenTrack, ()=>!0, ()=>kt.movieShare], Zn = class extends w {
            constructor() {
                super(...arguments),
                this.socket = null,
                this.sequence = 1,
                this.lastStamp = 0,
                this.websocketCommandsQueue = [],
                this.datachannelCommandsQueue = [],
                this.incomingCache = [],
                this.responseHandlers = {},
                this.reconnectCount = 0,
                this.conversationResolve = null,
                this.conversationReject = null,
                this.connected = !1,
                this.listenersReady = !1,
                this.postfix = "&platform=" + kt.platform + "&appVersion=" + kt.appVersion + "&version=" + kt.protocolVersion + "&device=" + kt.device + "&capabilities=" + Zn._getCapabilityFlags(),
                this.peerId = null,
                this.conversationId = null,
                this.reconnectTimer = 0,
                this.connectionMessageWaitTimer = 0,
                this.doctorTimer = 0,
                this.participantIdRegistry = null,
                this.producerNotificationDataChannel = null,
                this.producerCommandDataChannel = null
            }
            static _getCapabilityFlags() {
                let e = 0;
                for (let t = 0; t < Jn.length; t++)
                    Jn[t]() && (e |= 1 << t);
                return e.toString(16).toUpperCase()
            }
            get ready() {
                return null !== this.socket
            }
            setEndpoint(e) {
                this.endpoint = e
            }
            setConversationId(e) {
                this.conversationId = e
            }
            setParticipantIdRegistry(e) {
                this.participantIdRegistry = e
            }
            setProducerNotificationDataChannel(e) {
                this.producerNotificationDataChannel = e,
                this.producerNotificationDataChannel.onmessage = e=>{
                    var t;
                    let n = null == (t = this.participantIdRegistry) ? void 0 : t.handleMessage(e.data);
                    n && this._handleMessage(n)
                }
            }
            setProducerCommandDataChannel(e) {
                this.producerCommandDataChannel = e,
                this.producerCommandDataChannel.onmessage = this._onMessage.bind(this),
                this._handleCommandsQueue(this.datachannelCommandsQueue)
            }
            cleanup() {
                this.datachannelCommandsQueue = []
            }
            connect(e) {
                return g(this, null, (function*() {
                    return this.postfix += `&clientType=${kt.clientType}`,
                    new Promise(((t,n)=>{
                        if (this.socket && this.socket.readyState < WebSocket.CLOSING)
                            return Se.log(ee.SOCKET_ACTION, "already_opened"),
                            void n(Error("Socket already opened"));
                        this.conversationResolve = e=>{
                            t(e),
                            this.conversationResolve = null,
                            this.conversationReject = null
                        }
                        ,
                        this.conversationReject = e=>{
                            n(e),
                            this.conversationResolve = null,
                            this.conversationReject = null
                        }
                        ,
                        this._connect(e)
                    }
                    ))
                }
                ))
            }
            _send(e) {
                return g(this, arguments, (function*(e, t={}, n=0) {
                    if (t.participantId) {
                        let e = Ye.decomposeParticipantId(t.participantId)
                          , n = Ye.decomposeId(e.compositeUserId);
                        t = Object.assign({}, t, {
                            participantId: n.id,
                            participantType: n.type
                        }),
                        e.deviceIdx && (t.deviceIdx = e.deviceIdx)
                    }
                    return this._sendRaw(e, t, n)
                }
                ))
            }
            _sendRaw(e) {
                return g(this, arguments, (function*(e, t={}, n=0) {
                    let r = t=>{
                        var n;
                        if (this._isDataChannelCommand(e))
                            this.datachannelCommandsQueue.push(t),
                            (null == (n = this.producerCommandDataChannel) ? void 0 : n.readyState) === Qn && this._handleCommandsQueue(this.datachannelCommandsQueue);
                        else {
                            if (!this.socket)
                                return Se.log(ee.SOCKET_ACTION, "not_opened"),
                                Yt.warn("Socket not opened"),
                                void t.reject(new Error(`Socket not opened [${e}]`), !0);
                            this.socket.readyState > WebSocket.OPEN && (Se.log(ee.SOCKET_ACTION, "invalid_state"),
                            Yt.warn(`Socket is not opened, state ${this.socket.readyState}`)),
                            this.websocketCommandsQueue.push(t),
                            this.socket && this.socket.readyState === WebSocket.OPEN && this._handleCommandsQueue(this.websocketCommandsQueue)
                        }
                    }
                    ;
                    return new Promise(((i,o)=>{
                        let a = {
                            sequence: this.sequence++,
                            name: e,
                            params: t,
                            responseTimer: 0,
                            resolve: i,
                            reject: (t,i=!1)=>{
                                !n || i ? o(t) : (Yt.debug("Resending a signaling message", e, a.sequence),
                                n--,
                                r(a))
                            }
                        };
                        r(a)
                    }
                    ))
                }
                ))
            }
            _isDataChannelCommand(e) {
                return !!this.producerCommandDataChannel && (e === Xn.UPDATE_DISPLAY_LAYOUT || e === Xn.REPORT_PERF_STAT)
            }
            static _isDataChannelResponseRequired(e) {
                return e === Xn.UPDATE_DISPLAY_LAYOUT || e === Xn.REPORT_PERF_STAT
            }
            getNextCommandSequenceNumber() {
                return this.sequence
            }
            hangup(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.HANGUP, {
                        reason: e
                    }).catch((()=>{}
                    ))
                }
                ))
            }
            sendCandidate(e, t) {
                return g(this, null, (function*() {
                    return this._send(Xn.TRANSMIT_DATA, {
                        participantId: e,
                        data: {
                            candidate: t
                        }
                    })
                }
                ))
            }
            requestTestMode(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.REQUEST_TEST_MODE, {
                        consumerCommand: e
                    })
                }
                ))
            }
            sendSdp(e, t) {
                return g(this, null, (function*() {
                    return this._send(Xn.TRANSMIT_DATA, {
                        participantId: e,
                        data: {
                            sdp: t
                        }
                    })
                }
                ))
            }
            acceptCall(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.ACCEPT_CALL, {
                        mediaSettings: e
                    })
                }
                ))
            }
            changeMediaSettings(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.CHANGE_MEDIA_SETTINGS, {
                        mediaSettings: e
                    }, 10)
                }
                ))
            }
            changeParticipantState(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.CHANGE_PARTICIPANT_STATE, {
                        participantState: {
                            state: e
                        }
                    })
                }
                ))
            }
            addParticipant(e, t) {
                return g(this, null, (function*() {
                    return this._send(Xn.ADD_PARTICIPANT, ((e,t)=>{
                        for (var n in t || (t = {}))
                            p.call(t, n) && f(e, n, t[n]);
                        if (d)
                            for (var n of d(t))
                                h.call(t, n) && f(e, n, t[n]);
                        return e
                    }
                    )({
                        participantId: e
                    }, t))
                }
                ))
            }
            removeParticipant(e, t=!1) {
                return g(this, null, (function*() {
                    return this._send(Xn.REMOVE_PARTICIPANT, {
                        participantId: e,
                        ban: t
                    })
                }
                ))
            }
            allocateConsumer(e, t) {
                return g(this, null, (function*() {
                    let n = {
                        capabilities: t
                    };
                    return e && (n.description = e.sdp),
                    this._send(Xn.ALLOCATE_CONSUMER, n)
                }
                ))
            }
            acceptProducer(e, t) {
                return g(this, null, (function*() {
                    let n = {
                        description: e.sdp
                    };
                    return t && (n.ssrcs = t),
                    this._send(Xn.ACCEPT_PRODUCER, n)
                }
                ))
            }
            changePriorities(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.CHANGE_STREAM_PRIORITIES, {
                        typedPriorities: e
                    }).catch((()=>{}
                    ))
                }
                ))
            }
            updateDisplayLayout(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.UPDATE_DISPLAY_LAYOUT, {
                        layouts: e
                    })
                }
                ))
            }
            addMovie(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.ADD_MOVIE, e)
                }
                ))
            }
            updateMovie(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.UPDATE_MOVIE, e)
                }
                ))
            }
            removeMovie(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.REMOVE_MOVIE, e)
                }
                ))
            }
            startStream(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.RECORD_START, e)
                }
                ))
            }
            stopStream() {
                return g(this, null, (function*() {
                    return this._send(Xn.RECORD_STOP)
                }
                ))
            }
            recordSetRole(e, t) {
                return g(this, null, (function*() {
                    return this._send(Xn.RECORD_SET_ROLE, {
                        participantId: e,
                        role: t
                    })
                }
                ))
            }
            getRecordStatus() {
                return g(this, null, (function*() {
                    return this._send(Xn.RECORD_GET_STATUS)
                }
                ))
            }
            switchTopology(e, t=!1) {
                return g(this, null, (function*() {
                    return this._send(Xn.SWITCH_TOPOLOGY, {
                        topology: e,
                        force: t
                    })
                }
                ))
            }
            requestRealloc() {
                return g(this, null, (function*() {
                    return this._send(Xn.REQUEST_REALLOC)
                }
                ))
            }
            reportPerfStat(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.REPORT_PERF_STAT, {
                        report: e
                    })
                }
                ))
            }
            chatMessage(e, t=null) {
                return g(this, null, (function*() {
                    return this._send(Xn.CHAT_MESSAGE, {
                        message: e,
                        participantId: t
                    })
                }
                ))
            }
            chatHistory(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.CHAT_HISTORY, {
                        count: e
                    })
                }
                ))
            }
            customData(e, t) {
                return g(this, null, (function*() {
                    return this._send(Xn.CUSTOM_DATA, {
                        data: e,
                        participantId: t
                    })
                }
                ))
            }
            grantRoles(e, t, n) {
                return g(this, null, (function*() {
                    let r = {
                        participantId: e,
                        roles: t
                    };
                    return n && (r.revoke = !0),
                    this._sendRaw(Xn.GRANT_ROLES, r)
                }
                ))
            }
            muteParticipant(e, t, n) {
                return g(this, null, (function*() {
                    return this._sendRaw(Xn.MUTE_PARTICIPANT, {
                        participantId: e,
                        muteStates: t,
                        requestedMedia: n
                    })
                }
                ))
            }
            pinParticipant(e, t) {
                return g(this, null, (function*() {
                    let n = {
                        participantId: e
                    };
                    return t && (n.unpin = !0),
                    this._sendRaw(Xn.PIN_PARTICIPANT, n)
                }
                ))
            }
            updateMediaModifiers(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.UPDATE_MEDIA_MODIFIERS, {
                        mediaModifiers: e
                    })
                }
                ))
            }
            changeOptions(e) {
                return g(this, null, (function*() {
                    return this._send(Xn.CHANGE_OPTIONS, {
                        options: e
                    })
                }
                ))
            }
            getWaitingHall(e=null, t, n=!1) {
                return g(this, null, (function*() {
                    let r = {};
                    return e && (r.fromId = e),
                    t && (r.count = t),
                    n && (r.backward = n),
                    this._send(Xn.GET_WAITING_HALL, r)
                }
                ))
            }
            promoteParticipant(e, t=!1) {
                return g(this, null, (function*() {
                    let n = {
                        participantId: e
                    };
                    return t && (n.demote = t),
                    this._sendRaw(Xn.PROMOTE_PARTICIPANT, n)
                }
                ))
            }
            close() {
                this.socket && this.socket.readyState < WebSocket.CLOSING && this._closeSocket(),
                this._stopWaitConnectionMessage(),
                this._stopDoctor(),
                clearTimeout(this.reconnectTimer)
            }
            readyToSend() {
                this.listenersReady = !0,
                this._handleCachedMessages()
            }
            _connect(e) {
                if (this.socket && this.socket.readyState < WebSocket.CLOSING)
                    return;
                let t = "";
                e && (t += `&tgt=${e}`),
                e === Y.RETRY && this.lastStamp && (t += `&recoverTs=${this.lastStamp}`),
                Yt.debug("Connecting to " + this.endpoint + this.postfix + t),
                this.socket = new WebSocket(this.endpoint + this.postfix + t),
                this.socket.onopen = this._onOpen.bind(this),
                this.socket.onmessage = this._onMessage.bind(this),
                this.socket.onerror = this._onError.bind(this),
                this.socket.onclose = this._onClose.bind(this),
                this._startDoctor()
            }
            _disconnect() {
                this.socket && this.socket.readyState < WebSocket.CLOSING && (this.socket.onopen = null,
                this.socket.onmessage = null,
                this.socket.onerror = null,
                this.socket.onclose = null,
                this.socket.close(),
                this.socket = null),
                this._stopWaitConnectionMessage(),
                this._stopDoctor(),
                clearTimeout(this.reconnectTimer)
            }
            _onOpen() {
                Yt.debug("Socket opened"),
                Se.log(ee.SOCKET_ACTION, "opened"),
                this._waitConnectionMessage(),
                this._startDoctor()
            }
            _onMessage(e) {
                if (this._startDoctor(),
                "ping" !== e.data)
                    try {
                        this._handleMessage(JSON.parse(e.data))
                    } catch (t) {
                        Se.log(ee.SOCKET_ACTION, "parse_error"),
                        Yt.error("Unable to parse message", t, e.data)
                    }
                else
                    this.socket && this.socket.readyState === WebSocket.OPEN && this.socket.send("pong")
            }
            _handleMessage(e) {
                var t;
                "notification" === e.type ? "connection" === e.notification ? (Yt.debug("Signaling connected", e),
                this.connected = !0,
                this.reconnectCount = 0,
                this.endpoint = e.endpoint,
                e.peerId && this.peerId !== e.peerId.id && (this.postfix += `&peerId=${e.peerId.id}`,
                this.peerId = e.peerId.id),
                this._stopWaitConnectionMessage(),
                this.conversationResolve ? this.conversationResolve(e) : (this._triggerEvent(X.RECONNECT, e),
                e.conversation.topology && this._triggerEvent(X.NOTIFICATION, {
                    type: "notification",
                    notification: J.TOPOLOGY_CHANGED,
                    topology: e.conversation.topology
                })),
                this.lastStamp && this._handleCachedMessages(),
                null == (t = e.recoverMessages) || t.forEach((e=>this._handleMessage(e))),
                this._handleCommandsQueue(this.websocketCommandsQueue)) : this.connected && this.listenersReady ? this._triggerEvent(X.NOTIFICATION, e) : this.incomingCache.push(e) : "response" === e.type && this.responseHandlers[e.sequence] ? this._handleCommandResponse(!0, e) : "error" === e.type && this.responseHandlers[e.sequence] ? (Se.log(ee.SOCKET_ACTION, `error-${e.error}`),
                this._handleCommandResponse(!1, e)) : "error" === e.type ? (Se.log(ee.SOCKET_ACTION, `error-${e.error}`),
                "service-unavailable" === e.error ? this._reconnect() : "conversation-ended" === e.error ? this.conversationReject ? this.conversationReject(new We(F.SOCKET_CLOSED,{
                    message: `Unable to connect to the signaling: ${e.error}`
                })) : this._triggerEvent(X.NOTIFICATION, {
                    notification: J.CLOSED_CONVERSATION,
                    reason: e.reason
                }) : this.connected || "invalid-token" === e.error ? this._throwError(new Error(`Signaling error: ${e.error}`)) : e.sequence || (this.conversationReject && this.conversationReject(new We(U.SIGNALING_FAILED,{
                    message: `Unable to connect to the signaling: ${e.error}`
                })),
                this._closeSocket())) : (Se.log(ee.SOCKET_ACTION, "unknown_message"),
                Yt.warn("Unhandled message", e)),
                this.lastStamp = e.stamp || this.lastStamp
            }
            _handleCachedMessages() {
                let e = [...this.incomingCache];
                for (this.incomingCache = []; e.length > 0; ) {
                    let t = e.shift();
                    this._handleMessage(t)
                }
            }
            _throwError(e) {
                this._triggerEvent(X.FAILED, e)
            }
            _onError(e) {
                Se.log(ee.SOCKET_ACTION, "error"),
                Yt.error("Signaling error", e)
            }
            _onClose(e) {
                Se.log(ee.SOCKET_ACTION, "closed"),
                Yt.debug("Connection closed", {
                    code: e.code,
                    reason: e.reason
                }),
                this.connected = !1,
                this._stopDoctor(),
                this.socket && this.reconnectCount++ < Zn.RECONNECT_MAX_COUNT ? this._reconnect() : this.socket && this._closeSocket(new Error("Connection closed"))
            }
            _closeSocket(e=null) {
                !this.socket || (this._disconnect(),
                Object.values(this.responseHandlers).forEach((t=>{
                    window.clearTimeout(t.responseTimer),
                    e && t.reject(new Error("Connection closed"), !0)
                }
                )),
                this.websocketCommandsQueue = [],
                this.responseHandlers = {},
                this.lastStamp = 0,
                e && this._throwError(new Error("Connection closed")))
            }
            _reconnect() {
                let e = Math.min(Zn.RECONNECT_MAX_DELAY, Zn.RECONNECT_DELAY * Math.pow(2, this.reconnectCount - 1));
                Yt.log(`Reconnect websocket after ${e}ms (${this.reconnectCount})`),
                Se.log(ee.SOCKET_ACTION, "reconnect"),
                this.reconnectTimer = window.setTimeout(this._connect.bind(this, Y.RETRY), e)
            }
            _handleCommandResponse(e, t) {
                var n;
                if (!this.responseHandlers.hasOwnProperty(t.sequence))
                    return;
                let r = this.responseHandlers[t.sequence];
                window.clearTimeout(r.responseTimer),
                e ? (delete this.responseHandlers[t.sequence],
                r.resolve(t)) : (null == (n = this.socket) ? void 0 : n.readyState) === WebSocket.OPEN ? (delete this.responseHandlers[t.sequence],
                Se.log(ee.SOCKET_ACTION, "response-timeout"),
                r.reject(new Error(t.error || `Response timeout [${r.name}]`))) : r.responseTimer = window.setTimeout((()=>this._handleCommandResponse(!1, t)), Zn.WAIT_RESPONSE_DELAY)
            }
            _handleCommandsQueue(e) {
                for (var t, n; e.length > 0; ) {
                    let r = e.shift()
                      , i = Object.assign({
                        command: r.name,
                        sequence: r.sequence
                    }, r.params);
                    if (this._isDataChannelCommand(r.name)) {
                        if ((null == (t = this.producerCommandDataChannel) ? void 0 : t.readyState) !== Qn)
                            return void r.reject(new Error(`Invalid data channel state: ${null == (n = this.producerCommandDataChannel) ? void 0 : n.readyState}`));
                        Zn._isDataChannelResponseRequired(r.name) && (r.responseTimer = window.setTimeout((()=>this._handleCommandResponse(!1, i)), Zn.WAIT_RESPONSE_DELAY),
                        this.responseHandlers[r.sequence] = r),
                        this.producerCommandDataChannel.send(JSON.stringify(i))
                    } else {
                        if (!this.socket || this.socket.readyState !== WebSocket.OPEN) {
                            r.reject(new Error("Invalid state or socket already closed"));
                            continue
                        }
                        r.responseTimer = window.setTimeout((()=>this._handleCommandResponse(!1, i)), Zn.WAIT_RESPONSE_DELAY),
                        this.responseHandlers[r.sequence] = r,
                        this.socket.send(JSON.stringify(i))
                    }
                }
            }
            _waitConnectionMessage() {
                this.connectionMessageWaitTimer = window.setTimeout((()=>{
                    this.conversationReject && this.conversationReject(new We(U.SIGNALING_FAILED,{
                        message: "Unable to connect to the signaling: connection timeout"
                    }))
                }
                ), Zn.WAIT_CONNECTION_DELAY)
            }
            _stopWaitConnectionMessage() {
                window.clearTimeout(this.connectionMessageWaitTimer),
                this.connectionMessageWaitTimer = 0
            }
            _startDoctor() {
                this._stopDoctor(),
                this.doctorTimer = window.setTimeout((()=>{
                    Yt.warn("Socket is dead, trying to reconnect"),
                    this._disconnect(),
                    this._connect(Y.RETRY)
                }
                ), Zn.WAIT_MESSAGE_DELAY)
            }
            _stopDoctor() {
                window.clearTimeout(this.doctorTimer),
                this.doctorTimer = 0
            }
        }
        , er = Zn;
        er.RECONNECT_DELAY = kt.signalingReconnectDelay,
        er.RECONNECT_MAX_DELAY = kt.signalingReconnectMaxDelay,
        er.RECONNECT_MAX_COUNT = kt.signalingReconnectMaxCount,
        er.WAIT_CONNECTION_DELAY = kt.waitConnectionDelay,
        er.WAIT_RESPONSE_DELAY = kt.waitResponseDelay,
        er.WAIT_MESSAGE_DELAY = kt.waitMessageDelay;
        var tr, nr, rr = (e=>(e.KING = "KING",
        e.PAWN = "PAWN",
        e))(rr || {}), ir = rr, or = null, ar = {
            getCameras: wt.getCameras,
            getMicrophones: wt.getMicrophones,
            getOutput: wt.getOutput,
            hasCamera: wt.hasCamera,
            hasMicrophone: wt.hasMicrophone,
            getSavedCamera: wt.getSavedCamera,
            getSavedMicrophone: wt.getSavedMicrophone,
            getSavedOutput: wt.getSavedOutput,
            hasCameraPermission: wt.hasCameraPermission,
            hasMicrophonePermission: wt.hasMicrophonePermission,
            hasPermissions: wt.hasPermissions,
            getUserMedia: wt.getUserMedia,
            getUserVideo: wt.getUserVideo,
            getUserAudio: wt.getUserAudio,
            saveDeviceId: wt.saveDeviceId,
            isBrowserSupported: wt.isBrowserSupported,
            isScreenCapturingSupported: wt.isScreenCapturingSupported,
            os: wt.os,
            isMobile: wt.isMobile,
            browserName: wt.browserName,
            browserVersion: wt.browserVersion,
            baseChromeVersion: wt.baseChromeVersion,
            getAudioContext: wt.getAudioContext
        };
        function sr(e) {
            nr = e
        }
        function cr(e) {
            tr = e
        }
        function _r(e) {
            or = e
        }
        function lr(e) {
            kt.videoEffects = e
        }
        function ur(e) {
            return g(this, null, (function*() {
                if (kt.set(e),
                "Sferum" === wt.browserName() && (kt.platform = `SFERUM:${wt.browserVersion()}`),
                nr || sr(new Yn),
                tr || cr((()=>new er)),
                kt.debug && (o.default.disableLog(!1),
                Yt.toggle(!0)),
                Yt.log(`Calls SDK ${kt.sdkVersion}`, e),
                yield wt.init(),
                !wt.isBrowserSupported())
                    throw new We(U.UNSUPPORTED);
                nr.init()
            }
            ))
        }
        function dr(e) {
            return g(this, arguments, (function*(e, t=[V.AUDIO], n="", r=!1, i=!1) {
                let o = []
                  , a = [];
                if (Array.isArray(e) ? o = e.length ? e : [] : e && (o = [e]),
                o.length && (a = yield nr.getOkIdsByExternalIds(o),
                !a.length))
                    throw new We(F.CALLEE_IS_OFFLINE);
                return pr(a, D.USER, t, n, r, i)
            }
            ))
        }
        function pr(e) {
            return g(this, arguments, (function*(e, t=D.USER, n, r="", i=!1, o=!1) {
                if (Fn.current())
                    throw Yt.error("There is already active call"),
                    new We(F.FAILED);
                return new Fn(nr,tr(),or).onStart(e, t, n, r, i, o)
            }
            ))
        }
        function hr(e) {
            return g(this, null, (function*() {
                return mr(e)
            }
            ))
        }
        function mr(e) {
            return g(this, arguments, (function*(e, t=_e.USER, n) {
                if (e === Fn.id())
                    throw new Error("Push has already been processed");
                return new Fn(nr,tr(),or).onPush(e, t, n)
            }
            ))
        }
        function fr(e) {
            return g(this, null, (function*() {
                return e && (kt.authToken = e),
                nr.authorize()
            }
            ))
        }
        function gr() {
            return g(this, arguments, (function*(e=[V.AUDIO]) {
                let t = Fn.current();
                if (t)
                    return t.accept(e);
                throw new Error("Conversation not found")
            }
            ))
        }
        function vr() {
            return g(this, null, (function*() {
                let e = Fn.current();
                if (e)
                    return e.decline()
            }
            ))
        }
        function Er(e) {
            return g(this, arguments, (function*(e, t=[V.AUDIO]) {
                return yr(e, t)
            }
            ))
        }
        function yr(e, t, n) {
            return g(this, null, (function*() {
                if (Fn.current())
                    throw Yt.error("There is already active call"),
                    new We(F.FAILED);
                return new Fn(nr,tr(),or).onJoin({
                    conversationId: e,
                    mediaOptions: t,
                    chatId: n
                })
            }
            ))
        }
        function wr(e) {
            return g(this, arguments, (function*(e, t=[V.AUDIO], n, r) {
                if (Fn.current())
                    throw Yt.error("There is already active call"),
                    new We(F.FAILED);
                return n && (kt.anonymToken = n),
                new Fn(nr,tr(),or).onJoin({
                    joinLink: e,
                    mediaOptions: t,
                    observedIds: r
                })
            }
            ))
        }
        function br() {
            return g(this, null, (function*() {
                let e = Fn.current();
                if (e)
                    return e.hangup();
                Fn.hangupAfterInit()
            }
            ))
        }
        function Cr(e, t) {
            return g(this, null, (function*() {
                let n = yield nr.getOkIdsByExternalIds([e]);
                if (!n.length)
                    throw new Error("User not found");
                return Tr(n[0], t)
            }
            ))
        }
        function Tr(e, t) {
            return g(this, null, (function*() {
                let n = Fn.current();
                n && (yield n.addParticipant(Ye.composeUserId(e, _e.USER), t))
            }
            ))
        }
        function Dr(e, t=!1) {
            return g(this, null, (function*() {
                return Ar((yield nr.getOkIdsByExternalIds([e]))[0], t)
            }
            ))
        }
        function Ar(e, t=!1) {
            return g(this, null, (function*() {
                let n = Fn.current();
                n && (yield n.removeParticipant(Ye.composeUserId(e, _e.USER), t))
            }
            ))
        }
        function Sr(e, t) {
            return g(this, null, (function*() {
                let n = yield wt.saveDeviceId(e, t)
                  , r = Fn.current();
                return n && r ? r.changeDevice(e) : Promise.reject()
            }
            ))
        }
        function Pr(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                return t ? t.toggleScreenCapturing(e) : Promise.reject()
            }
            ))
        }
        function Or(e, t=!1) {
            return g(this, null, (function*() {
                let n = Fn.current();
                n && (yield n.setVideoStream(e, t))
            }
            ))
        }
        function Ir(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.toggleLocalVideo(e))
            }
            ))
        }
        function Mr(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.toggleLocalAudio(e))
            }
            ))
        }
        function Rr(e, t, n) {
            return g(this, null, (function*() {
                let r = Fn.current();
                if (r)
                    return r.setLocalResolution(e, t, n)
            }
            ))
        }
        function Lr(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.changePriorities(e))
            }
            ))
        }
        function kr(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.changeParticipantState(e))
            }
            ))
        }
        function Br(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.updateDisplayLayout(e))
            }
            ))
        }
        function xr(e, t, n=!1) {
            return g(this, null, (function*() {
                return Nr((yield nr.getOkIdsByExternalIds([e]))[0], t, n)
            }
            ))
        }
        function Nr(e, t, n=!1) {
            return g(this, null, (function*() {
                let r = Fn.current();
                r && (yield r.grantRoles(Ye.composeUserId(e, _e.USER), t, n))
            }
            ))
        }
        function Ur() {
            return g(this, arguments, (function*(e=null, t, n=[]) {
                let r = null;
                return e && (r = (yield nr.getOkIdsByExternalIds([e]))[0]),
                Wr(r, t, n, $t.getDeviceIdx(e))
            }
            ))
        }
        function Wr() {
            return g(this, arguments, (function*(e=null, t, n=[], r=0) {
                let i = Fn.current();
                if (i) {
                    let o = e ? Ye.composeParticipantId(e, _e.USER, r) : null;
                    yield i.muteParticipant(o, t, n)
                }
            }
            ))
        }
        function Fr(e, t=!1) {
            return g(this, null, (function*() {
                return Kr((yield nr.getOkIdsByExternalIds([e]))[0], t, $t.getDeviceIdx(e))
            }
            ))
        }
        function Kr(e, t=!1, n=0) {
            return g(this, null, (function*() {
                let r = Fn.current();
                r && (yield r.pinParticipant(Ye.composeParticipantId(e, _e.USER, n), t))
            }
            ))
        }
        function Vr(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.updateMediaModifiers(e))
            }
            ))
        }
        function Hr(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.changeOptions(e))
            }
            ))
        }
        function jr(e, t=null) {
            return g(this, null, (function*() {
                let n = null;
                return t && (n = (yield nr.getOkIdsByExternalIds([t]))[0]),
                Gr(e, n)
            }
            ))
        }
        function Gr(e, t=null) {
            return g(this, null, (function*() {
                let n = Fn.current();
                if (n) {
                    let r = t ? Ye.composeUserId(t, _e.USER) : null;
                    yield n.chatMessage(e, r)
                }
            }
            ))
        }
        function qr(e=10) {
            return g(this, null, (function*() {
                let t = Fn.current();
                if (t)
                    return t.chatHistory(e)
            }
            ))
        }
        function $r(e, t=null) {
            return g(this, null, (function*() {
                let n = null;
                return t && (n = (yield nr.getOkIdsByExternalIds([t]))[0]),
                Yr(e, n, $t.getDeviceIdx(t))
            }
            ))
        }
        function Yr(e, t=null, n=0) {
            return g(this, null, (function*() {
                let r = Fn.current();
                if (r) {
                    let i = t ? Ye.composeParticipantId(t, _e.USER, n) : null;
                    yield r.customData(e, i)
                }
            }
            ))
        }
        function zr(e="", t=!1) {
            return g(this, null, (function*() {
                return (yield nr.createConversation(Ye.uuid(), e, t)).join_link
            }
            ))
        }
        function Xr() {
            return g(this, null, (function*() {
                let e = Fn.current();
                return e ? e.createJoinLink() : Promise.reject()
            }
            ))
        }
        function Qr() {
            return g(this, null, (function*() {
                let e = Fn.current();
                return e ? e.removeJoinLink() : Promise.reject()
            }
            ))
        }
        function Jr(e, t) {
            return g(this, null, (function*() {
                return nr.getAnonymTokenByLink(e, t)
            }
            ))
        }
        function Zr(e) {
            let t = Fn.current();
            t && t.setVolume(e)
        }
        function ei(e) {
            kt.forceRelayPolicy = e
        }
        function ti(e=!1, t=null, n=null, r="DIRECT_LINK", i=null) {
            return g(this, null, (function*() {
                let o = Fn.current();
                return o ? o.startStream(e, t, n, r, i) : Promise.reject()
            }
            ))
        }
        function ni() {
            return g(this, null, (function*() {
                let e = Fn.current();
                return e ? e.stopStream() : Promise.reject()
            }
            ))
        }
        function ri(e, t) {
            return g(this, null, (function*() {
                let n = Fn.current();
                if (n) {
                    let r = yield nr.getOkIdsByExternalIds([e])
                      , i = $t.getDeviceIdx(e);
                    return n.recordSetRole(Ye.composeParticipantId(r[0], _e.USER, i), t)
                }
                return Promise.reject()
            }
            ))
        }
        function ii() {
            return g(this, null, (function*() {
                let e = Fn.current();
                return e ? e.getStreamInfo() : Promise.reject()
            }
            ))
        }
        function oi(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                return t ? t.addMovie(e) : Promise.reject()
            }
            ))
        }
        function ai(e, t, n, r) {
            return g(this, null, (function*() {
                let i = Fn.current();
                return i ? i.updateMovie(e, t, n, r) : Promise.reject()
            }
            ))
        }
        function si(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                return t ? t.removeMovie(e) : Promise.reject()
            }
            ))
        }
        function ci(e) {
            kt.statisticsInterval = e;
            let t = Fn.current();
            if (t)
                return t.updateStatisticsInterval()
        }
        function _i(e) {
            o.default.disableLog(!e),
            Yt.toggle(e)
        }
        function li(e, ...t) {
            !kt.debugLog || Yt.send(e, "[external]", ...t)
        }
        function ui(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                if (t)
                    return t.videoEffect(e)
            }
            ))
        }
        function di(e) {
            return g(this, null, (function*() {
                let t = Fn.current();
                t && (yield t.setAudioStream(e))
            }
            ))
        }
        function pi(e=null, t, n=!1) {
            return g(this, null, (function*() {
                let r = Fn.current();
                if (!r)
                    throw new Error("Conversation not found");
                return r.getWaitingHall(e, t, n)
            }
            ))
        }
        function hi(e, t=!1) {
            return g(this, null, (function*() {
                let n = Fn.current();
                if (!n)
                    throw new Error("Conversation not found");
                let r = yield nr.getOkIdsByExternalIds([e]);
                return n.promoteParticipant(Ye.composeUserId(r[0], _e.USER), t)
            }
            ))
        }
        function mi(e) {
            return g(this, null, (function*() {
                yield nr.removeHistoryRecords(e)
            }
            ))
        }
    }
    ,
    733024: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>r
        });
        const r = (0,
        n(379333).makeIcon)("Icon24Cancel", "cancel_24", "0 0 24 24", '<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="cancel_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M18.3 5.7a.99.99 0 0 0-1.4 0L12 10.6 7.1 5.7a.99.99 0 0 0-1.4 1.4l4.9 4.9-4.9 4.9a.99.99 0 0 0 1.4 1.4l4.9-4.9 4.9 4.9a.99.99 0 0 0 1.4-1.4L13.4 12l4.9-4.9a.99.99 0 0 0 0-1.4Z" fill="currentColor" /></g></symbol>', 24, 24)
    }
    ,
    76854: (e,t,n)=>{
        "use strict";
        n.d(t, {
            IconSettingsContext: ()=>o,
            IconSettingsProvider: ()=>a
        });
        var r = n(667294);
        function i(e, t) {
            if (null == e)
                return {};
            var n, r, i = function(e, t) {
                if (null == e)
                    return {};
                var n, r, i = {}, o = Object.keys(e);
                for (r = 0; r < o.length; r++)
                    n = o[r],
                    t.indexOf(n) >= 0 || (i[n] = e[n]);
                return i
            }(e, t);
            if (Object.getOwnPropertySymbols) {
                var o = Object.getOwnPropertySymbols(e);
                for (r = 0; r < o.length; r++)
                    n = o[r],
                    t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (i[n] = e[n])
            }
            return i
        }
        var o = r.createContext({})
          , a = function(e) {
            var t = e.children
              , n = i(e, ["children"])
              , a = r.useMemo((function() {
                return n
            }
            ), [n.classPrefix, n.globalClasses]);
            return r.createElement(o.Provider, {
                value: a
            }, t)
        }
    }
    ,
    379333: (e,t,n)=>{
        "use strict";
        n.d(t, {
            makeIcon: ()=>h
        });
        var r = n(667294)
          , i = n(450302)
          , o = n.n(i)
          , a = n(76854)
          , s = n(634777);
        function c(e, t, n) {
            return t in e ? Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = n,
            e
        }
        function _() {
            return _ = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            _.apply(this, arguments)
        }
        function l(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = null != arguments[t] ? arguments[t] : {}
                  , r = Object.keys(n);
                "function" == typeof Object.getOwnPropertySymbols && (r = r.concat(Object.getOwnPropertySymbols(n).filter((function(e) {
                    return Object.getOwnPropertyDescriptor(n, e).enumerable
                }
                )))),
                r.forEach((function(t) {
                    c(e, t, n[t])
                }
                ))
            }
            return e
        }
        function u(e, t) {
            if (null == e)
                return {};
            var n, r, i = function(e, t) {
                if (null == e)
                    return {};
                var n, r, i = {}, o = Object.keys(e);
                for (r = 0; r < o.length; r++)
                    n = o[r],
                    t.indexOf(n) >= 0 || (i[n] = e[n]);
                return i
            }(e, t);
            if (Object.getOwnPropertySymbols) {
                var o = Object.getOwnPropertySymbols(e);
                for (r = 0; r < o.length; r++)
                    n = o[r],
                    t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (i[n] = e[n])
            }
            return i
        }
        var d = {
            display: "block"
        };
        var p = function(e) {
            var t = e.width
              , n = e.height
              , i = e.viewBox
              , o = e.id
              , s = e.className
              , c = void 0 === s ? "" : s
              , p = e.style
              , h = void 0 === p ? {} : p
              , m = e.fill
              , f = e.getRootRef
              , g = e.Component
              , v = void 0 === g ? "div" : g
              , E = e.role
              , y = e["aria-label"]
              , w = e["aria-hidden"]
              , b = u(e, ["width", "height", "viewBox", "id", "className", "style", "fill", "getRootRef", "Component", "role", "aria-label", "aria-hidden"])
              , C = Math.max(t, n)
              , T = r.useContext(a.IconSettingsContext)
              , D = function(e, t) {
                for (var n = t.classPrefix, r = t.globalClasses, i = "", o = 0; o < e.length; o++)
                    n && (i += " " + (n + e[o])),
                    n && !r || (i += " " + e[o]);
                return i
            }(["Icon", "Icon--".concat(C), "Icon--w-".concat(t), "Icon--h-".concat(n), "Icon--".concat(o)], T);
            return r.createElement(v, _({
                role: "presentation"
            }, b, {
                ref: f,
                className: "".concat(D, " ").concat(c),
                style: l({}, h, {
                    width: t,
                    height: n
                })
            }), r.createElement("svg", {
                viewBox: i,
                width: t,
                height: n,
                style: d,
                role: E,
                "aria-label": y,
                "aria-hidden": w
            }, r.createElement("use", {
                xlinkHref: "#".concat(o),
                style: {
                    fill: "currentColor",
                    color: m
                }
            })))
        };
        function h(e, t, n, i, a, c) {
            var l = !1;
            function u() {
                l || ((0,
                s.addSpriteSymbol)(new (o())({
                    id: t,
                    viewBox: n,
                    content: i
                })),
                l = !0)
            }
            var d = function(e) {
                return (0,
                s.useIsomorphicLayoutEffect)(u, []),
                r.createElement(p, _({}, e, {
                    viewBox: n,
                    id: t,
                    width: isNaN(e.width) ? a : +e.width,
                    height: isNaN(e.height) ? c : +e.height
                }))
            };
            return d.mountIcon = u,
            d.displayName = e,
            d
        }
    }
    ,
    634777: (e,t,n)=>{
        "use strict";
        n.d(t, {
            addSpriteSymbol: ()=>l,
            useIsomorphicLayoutEffect: ()=>u
        });
        var r, i = n(243703), o = n.n(i), a = n(667294), s = !("undefined" == typeof window || !window.document || !window.document.createElement);
        if (s) {
            var c = "__SVG_SPRITE_NODE__";
            r = new (o())({
                attrs: {
                    id: c
                }
            });
            var _ = function() {
                var e = document.getElementById(c);
                e ? r.attach(e) : r.mount(),
                document.removeEventListener("DOMContentLoaded", _)
            };
            document.querySelector("body") ? _() : document.addEventListener("DOMContentLoaded", _)
        } else
            r = null;
        function l(e) {
            r && r.add(e)
        }
        var u = s ? a.useLayoutEffect : a.useEffect
    }
    ,
    243703: function(e, t, n) {
        e.exports = function() {
            "use strict";
            function e(e, t) {
                return e(t = {
                    exports: {}
                }, t.exports),
                t.exports
            }
            "undefined" != typeof window ? window : void 0 !== n.g ? n.g : "undefined" != typeof self && self;
            var t = e((function(e, t) {
                !function(t, n) {
                    e.exports = n()
                }(0, (function() {
                    function e(e) {
                        return e && "object" == typeof e && "[object RegExp]" !== Object.prototype.toString.call(e) && "[object Date]" !== Object.prototype.toString.call(e)
                    }
                    function t(e) {
                        return Array.isArray(e) ? [] : {}
                    }
                    function n(n, r) {
                        return r && !0 === r.clone && e(n) ? o(t(n), n, r) : n
                    }
                    function r(t, r, i) {
                        var a = t.slice();
                        return r.forEach((function(r, s) {
                            void 0 === a[s] ? a[s] = n(r, i) : e(r) ? a[s] = o(t[s], r, i) : -1 === t.indexOf(r) && a.push(n(r, i))
                        }
                        )),
                        a
                    }
                    function i(t, r, i) {
                        var a = {};
                        return e(t) && Object.keys(t).forEach((function(e) {
                            a[e] = n(t[e], i)
                        }
                        )),
                        Object.keys(r).forEach((function(s) {
                            e(r[s]) && t[s] ? a[s] = o(t[s], r[s], i) : a[s] = n(r[s], i)
                        }
                        )),
                        a
                    }
                    function o(e, t, o) {
                        var a = Array.isArray(t)
                          , s = (o || {
                            arrayMerge: r
                        }).arrayMerge || r;
                        return a ? Array.isArray(e) ? s(e, t, o) : n(t, o) : i(e, t, o)
                    }
                    return o.all = function(e, t) {
                        if (!Array.isArray(e) || e.length < 2)
                            throw new Error("first argument should be an array with at least two elements");
                        return e.reduce((function(e, n) {
                            return o(e, n, t)
                        }
                        ))
                    }
                    ,
                    o
                }
                ))
            }
            ));
            function r(e) {
                return e = e || Object.create(null),
                {
                    on: function(t, n) {
                        (e[t] || (e[t] = [])).push(n)
                    },
                    off: function(t, n) {
                        e[t] && e[t].splice(e[t].indexOf(n) >>> 0, 1)
                    },
                    emit: function(t, n) {
                        (e[t] || []).map((function(e) {
                            e(n)
                        }
                        )),
                        (e["*"] || []).map((function(e) {
                            e(t, n)
                        }
                        ))
                    }
                }
            }
            var i = e((function(e, t) {
                var n = {
                    svg: {
                        name: "xmlns",
                        uri: "http://www.w3.org/2000/svg"
                    },
                    xlink: {
                        name: "xmlns:xlink",
                        uri: "http://www.w3.org/1999/xlink"
                    }
                };
                t.default = n,
                e.exports = t.default
            }
            ))
              , o = function(e) {
                return Object.keys(e).map((function(t) {
                    return t + '="' + e[t].toString().replace(/"/g, "&quot;") + '"'
                }
                )).join(" ")
            }
              , a = i.svg
              , s = i.xlink
              , c = {};
            c[a.name] = a.uri,
            c[s.name] = s.uri;
            var _, l = function(e, n) {
                void 0 === e && (e = "");
                var r = t(c, n || {});
                return "<svg " + o(r) + ">" + e + "</svg>"
            }, u = i.svg, d = i.xlink, p = {
                attrs: (_ = {
                    style: ["position: absolute", "width: 0", "height: 0"].join("; "),
                    "aria-hidden": "true"
                },
                _[u.name] = u.uri,
                _[d.name] = d.uri,
                _)
            }, h = function(e) {
                this.config = t(p, e || {}),
                this.symbols = []
            };
            h.prototype.add = function(e) {
                var t = this.symbols
                  , n = this.find(e.id);
                return n ? (t[t.indexOf(n)] = e,
                !1) : (t.push(e),
                !0)
            }
            ,
            h.prototype.remove = function(e) {
                var t = this.symbols
                  , n = this.find(e);
                return !!n && (t.splice(t.indexOf(n), 1),
                n.destroy(),
                !0)
            }
            ,
            h.prototype.find = function(e) {
                return this.symbols.filter((function(t) {
                    return t.id === e
                }
                ))[0] || null
            }
            ,
            h.prototype.has = function(e) {
                return null !== this.find(e)
            }
            ,
            h.prototype.stringify = function() {
                var e = this.config.attrs
                  , t = this.symbols.map((function(e) {
                    return e.stringify()
                }
                )).join("");
                return l(t, e)
            }
            ,
            h.prototype.toString = function() {
                return this.stringify()
            }
            ,
            h.prototype.destroy = function() {
                this.symbols.forEach((function(e) {
                    return e.destroy()
                }
                ))
            }
            ;
            var m = function(e) {
                var t = e.id
                  , n = e.viewBox
                  , r = e.content;
                this.id = t,
                this.viewBox = n,
                this.content = r
            };
            m.prototype.stringify = function() {
                return this.content
            }
            ,
            m.prototype.toString = function() {
                return this.stringify()
            }
            ,
            m.prototype.destroy = function() {
                var e = this;
                ["id", "viewBox", "content"].forEach((function(t) {
                    return delete e[t]
                }
                ))
            }
            ;
            var f = function(e) {
                var t = !!document.importNode
                  , n = (new DOMParser).parseFromString(e, "image/svg+xml").documentElement;
                return t ? document.importNode(n, !0) : n
            }
              , g = function(e) {
                function t() {
                    e.apply(this, arguments)
                }
                e && (t.__proto__ = e),
                t.prototype = Object.create(e && e.prototype),
                t.prototype.constructor = t;
                var n = {
                    isMounted: {}
                };
                return n.isMounted.get = function() {
                    return !!this.node
                }
                ,
                t.createFromExistingNode = function(e) {
                    return new t({
                        id: e.getAttribute("id"),
                        viewBox: e.getAttribute("viewBox"),
                        content: e.outerHTML
                    })
                }
                ,
                t.prototype.destroy = function() {
                    this.isMounted && this.unmount(),
                    e.prototype.destroy.call(this)
                }
                ,
                t.prototype.mount = function(e) {
                    if (this.isMounted)
                        return this.node;
                    var t = "string" == typeof e ? document.querySelector(e) : e
                      , n = this.render();
                    return this.node = n,
                    t.appendChild(n),
                    n
                }
                ,
                t.prototype.render = function() {
                    var e = this.stringify();
                    return f(l(e)).childNodes[0]
                }
                ,
                t.prototype.unmount = function() {
                    this.node.parentNode.removeChild(this.node)
                }
                ,
                Object.defineProperties(t.prototype, n),
                t
            }(m)
              , v = {
                autoConfigure: !0,
                mountTo: "body",
                syncUrlsWithBaseTag: !1,
                listenLocationChangeEvent: !0,
                locationChangeEvent: "locationChange",
                locationChangeAngularEmitter: !1,
                usagesToUpdate: "use[*|href]",
                moveGradientsOutsideSymbol: !1
            }
              , E = function(e) {
                return Array.prototype.slice.call(e, 0)
            }
              , y = {
                isChrome: function() {
                    return /chrome/i.test(navigator.userAgent)
                },
                isFirefox: function() {
                    return /firefox/i.test(navigator.userAgent)
                },
                isIE: function() {
                    return /msie/i.test(navigator.userAgent) || /trident/i.test(navigator.userAgent)
                },
                isEdge: function() {
                    return /edge/i.test(navigator.userAgent)
                }
            }
              , w = function(e, t) {
                var n = document.createEvent("CustomEvent");
                n.initCustomEvent(e, !1, !1, t),
                window.dispatchEvent(n)
            }
              , b = function(e) {
                var t = [];
                return E(e.querySelectorAll("style")).forEach((function(e) {
                    e.textContent += "",
                    t.push(e)
                }
                )),
                t
            }
              , C = function(e) {
                return (e || window.location.href).split("#")[0]
            }
              , T = function(e) {
                angular.module("ng").run(["$rootScope", function(t) {
                    t.$on("$locationChangeSuccess", (function(t, n, r) {
                        w(e, {
                            oldUrl: r,
                            newUrl: n
                        })
                    }
                    ))
                }
                ])
            }
              , D = "linearGradient, radialGradient, pattern, mask, clipPath"
              , A = function(e, t) {
                return void 0 === t && (t = D),
                E(e.querySelectorAll("symbol")).forEach((function(e) {
                    E(e.querySelectorAll(t)).forEach((function(t) {
                        e.parentNode.insertBefore(t, e)
                    }
                    ))
                }
                )),
                e
            };
            function S(e, t) {
                return E(e).reduce((function(e, n) {
                    if (!n.attributes)
                        return e;
                    var r = E(n.attributes)
                      , i = t ? r.filter(t) : r;
                    return e.concat(i)
                }
                ), [])
            }
            var P = i.xlink.uri
              , O = "xlink:href"
              , I = /[{}|\\\^\[\]`"<>]/g;
            function M(e) {
                return e.replace(I, (function(e) {
                    return "%" + e[0].charCodeAt(0).toString(16).toUpperCase()
                }
                ))
            }
            function R(e) {
                return e.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")
            }
            function L(e, t, n) {
                return E(e).forEach((function(e) {
                    var r = e.getAttribute(O);
                    if (r && 0 === r.indexOf(t)) {
                        var i = r.replace(t, n);
                        e.setAttributeNS(P, O, i)
                    }
                }
                )),
                e
            }
            var k = ["clipPath", "colorProfile", "src", "cursor", "fill", "filter", "marker", "markerStart", "markerMid", "markerEnd", "mask", "stroke", "style"]
              , B = k.map((function(e) {
                return "[" + e + "]"
            }
            )).join(",")
              , x = function(e, t, n, r) {
                var i = M(n)
                  , o = M(r);
                S(e.querySelectorAll(B), (function(e) {
                    var t = e.localName
                      , n = e.value;
                    return -1 !== k.indexOf(t) && -1 !== n.indexOf("url(" + i)
                }
                )).forEach((function(e) {
                    return e.value = e.value.replace(new RegExp(R(i),"g"), o)
                }
                )),
                L(t, i, o)
            }
              , N = {
                MOUNT: "mount",
                SYMBOL_MOUNT: "symbol_mount"
            };
            return function(e) {
                function n(n) {
                    var i = this;
                    void 0 === n && (n = {}),
                    e.call(this, t(v, n));
                    var o = r();
                    this._emitter = o,
                    this.node = null;
                    var a = this.config;
                    if (a.autoConfigure && this._autoConfigure(n),
                    a.syncUrlsWithBaseTag) {
                        var s = document.getElementsByTagName("base")[0].getAttribute("href");
                        o.on(N.MOUNT, (function() {
                            return i.updateUrls("#", s)
                        }
                        ))
                    }
                    var c = this._handleLocationChange.bind(this);
                    this._handleLocationChange = c,
                    a.listenLocationChangeEvent && window.addEventListener(a.locationChangeEvent, c),
                    a.locationChangeAngularEmitter && T(a.locationChangeEvent),
                    o.on(N.MOUNT, (function(e) {
                        a.moveGradientsOutsideSymbol && A(e)
                    }
                    )),
                    o.on(N.SYMBOL_MOUNT, (function(e) {
                        a.moveGradientsOutsideSymbol && A(e.parentNode),
                        (y.isIE() || y.isEdge()) && b(e)
                    }
                    ))
                }
                e && (n.__proto__ = e),
                n.prototype = Object.create(e && e.prototype),
                n.prototype.constructor = n;
                var i = {
                    isMounted: {}
                };
                return i.isMounted.get = function() {
                    return !!this.node
                }
                ,
                n.prototype._autoConfigure = function(e) {
                    var t = this.config;
                    void 0 === e.syncUrlsWithBaseTag && (t.syncUrlsWithBaseTag = void 0 !== document.getElementsByTagName("base")[0]),
                    void 0 === e.locationChangeAngularEmitter && (t.locationChangeAngularEmitter = void 0 !== window.angular),
                    void 0 === e.moveGradientsOutsideSymbol && (t.moveGradientsOutsideSymbol = y.isFirefox())
                }
                ,
                n.prototype._handleLocationChange = function(e) {
                    var t = e.detail
                      , n = t.oldUrl
                      , r = t.newUrl;
                    this.updateUrls(n, r)
                }
                ,
                n.prototype.add = function(t) {
                    var n = this
                      , r = e.prototype.add.call(this, t);
                    return this.isMounted && r && (t.mount(n.node),
                    this._emitter.emit(N.SYMBOL_MOUNT, t.node)),
                    r
                }
                ,
                n.prototype.attach = function(e) {
                    var t = this
                      , n = this;
                    if (n.isMounted)
                        return n.node;
                    var r = "string" == typeof e ? document.querySelector(e) : e;
                    return n.node = r,
                    this.symbols.forEach((function(e) {
                        e.mount(n.node),
                        t._emitter.emit(N.SYMBOL_MOUNT, e.node)
                    }
                    )),
                    E(r.querySelectorAll("symbol")).forEach((function(e) {
                        var t = g.createFromExistingNode(e);
                        t.node = e,
                        n.add(t)
                    }
                    )),
                    this._emitter.emit(N.MOUNT, r),
                    r
                }
                ,
                n.prototype.destroy = function() {
                    var e = this
                      , t = e.config
                      , n = e.symbols
                      , r = e._emitter;
                    n.forEach((function(e) {
                        return e.destroy()
                    }
                    )),
                    r.off("*"),
                    window.removeEventListener(t.locationChangeEvent, this._handleLocationChange),
                    this.isMounted && this.unmount()
                }
                ,
                n.prototype.mount = function(e, t) {
                    void 0 === e && (e = this.config.mountTo),
                    void 0 === t && (t = !1);
                    var n = this;
                    if (n.isMounted)
                        return n.node;
                    var r = "string" == typeof e ? document.querySelector(e) : e
                      , i = n.render();
                    return this.node = i,
                    t && r.childNodes[0] ? r.insertBefore(i, r.childNodes[0]) : r.appendChild(i),
                    this._emitter.emit(N.MOUNT, i),
                    i
                }
                ,
                n.prototype.render = function() {
                    return f(this.stringify())
                }
                ,
                n.prototype.unmount = function() {
                    this.node.parentNode.removeChild(this.node)
                }
                ,
                n.prototype.updateUrls = function(e, t) {
                    if (!this.isMounted)
                        return !1;
                    var n = document.querySelectorAll(this.config.usagesToUpdate);
                    return x(this.node, n, C(e) + "#", C(t) + "#"),
                    !0
                }
                ,
                Object.defineProperties(n.prototype, i),
                n
            }(h)
        }()
    },
    450302: function(e, t, n) {
        e.exports = function() {
            "use strict";
            var e = function(e) {
                var t = e.id
                  , n = e.viewBox
                  , r = e.content;
                this.id = t,
                this.viewBox = n,
                this.content = r
            };
            e.prototype.stringify = function() {
                return this.content
            }
            ,
            e.prototype.toString = function() {
                return this.stringify()
            }
            ,
            e.prototype.destroy = function() {
                var e = this;
                ["id", "viewBox", "content"].forEach((function(t) {
                    return delete e[t]
                }
                ))
            }
            ;
            var t = function(e) {
                var t = !!document.importNode
                  , n = (new DOMParser).parseFromString(e, "image/svg+xml").documentElement;
                return t ? document.importNode(n, !0) : n
            };
            function r(e, t) {
                return e(t = {
                    exports: {}
                }, t.exports),
                t.exports
            }
            "undefined" != typeof window ? window : void 0 !== n.g ? n.g : "undefined" != typeof self && self;
            var i = r((function(e, t) {
                !function(t, n) {
                    e.exports = n()
                }(0, (function() {
                    function e(e) {
                        return e && "object" == typeof e && "[object RegExp]" !== Object.prototype.toString.call(e) && "[object Date]" !== Object.prototype.toString.call(e)
                    }
                    function t(e) {
                        return Array.isArray(e) ? [] : {}
                    }
                    function n(n, r) {
                        return r && !0 === r.clone && e(n) ? o(t(n), n, r) : n
                    }
                    function r(t, r, i) {
                        var a = t.slice();
                        return r.forEach((function(r, s) {
                            void 0 === a[s] ? a[s] = n(r, i) : e(r) ? a[s] = o(t[s], r, i) : -1 === t.indexOf(r) && a.push(n(r, i))
                        }
                        )),
                        a
                    }
                    function i(t, r, i) {
                        var a = {};
                        return e(t) && Object.keys(t).forEach((function(e) {
                            a[e] = n(t[e], i)
                        }
                        )),
                        Object.keys(r).forEach((function(s) {
                            e(r[s]) && t[s] ? a[s] = o(t[s], r[s], i) : a[s] = n(r[s], i)
                        }
                        )),
                        a
                    }
                    function o(e, t, o) {
                        var a = Array.isArray(t)
                          , s = (o || {
                            arrayMerge: r
                        }).arrayMerge || r;
                        return a ? Array.isArray(e) ? s(e, t, o) : n(t, o) : i(e, t, o)
                    }
                    return o.all = function(e, t) {
                        if (!Array.isArray(e) || e.length < 2)
                            throw new Error("first argument should be an array with at least two elements");
                        return e.reduce((function(e, n) {
                            return o(e, n, t)
                        }
                        ))
                    }
                    ,
                    o
                }
                ))
            }
            ))
              , o = r((function(e, t) {
                var n = {
                    svg: {
                        name: "xmlns",
                        uri: "http://www.w3.org/2000/svg"
                    },
                    xlink: {
                        name: "xmlns:xlink",
                        uri: "http://www.w3.org/1999/xlink"
                    }
                };
                t.default = n,
                e.exports = t.default
            }
            ))
              , a = function(e) {
                return Object.keys(e).map((function(t) {
                    return t + '="' + e[t].toString().replace(/"/g, "&quot;") + '"'
                }
                )).join(" ")
            }
              , s = o.svg
              , c = o.xlink
              , _ = {};
            _[s.name] = s.uri,
            _[c.name] = c.uri;
            var l = function(e, t) {
                void 0 === e && (e = "");
                var n = i(_, t || {});
                return "<svg " + a(n) + ">" + e + "</svg>"
            }
              , u = function(e) {
                function n() {
                    e.apply(this, arguments)
                }
                e && (n.__proto__ = e),
                n.prototype = Object.create(e && e.prototype),
                n.prototype.constructor = n;
                var r = {
                    isMounted: {}
                };
                return r.isMounted.get = function() {
                    return !!this.node
                }
                ,
                n.createFromExistingNode = function(e) {
                    return new n({
                        id: e.getAttribute("id"),
                        viewBox: e.getAttribute("viewBox"),
                        content: e.outerHTML
                    })
                }
                ,
                n.prototype.destroy = function() {
                    this.isMounted && this.unmount(),
                    e.prototype.destroy.call(this)
                }
                ,
                n.prototype.mount = function(e) {
                    if (this.isMounted)
                        return this.node;
                    var t = "string" == typeof e ? document.querySelector(e) : e
                      , n = this.render();
                    return this.node = n,
                    t.appendChild(n),
                    n
                }
                ,
                n.prototype.render = function() {
                    var e = this.stringify();
                    return t(l(e)).childNodes[0]
                }
                ,
                n.prototype.unmount = function() {
                    this.node.parentNode.removeChild(this.node)
                }
                ,
                Object.defineProperties(n.prototype, r),
                n
            }(e);
            return u
        }()
    },
    406257: e=>{
        var t = function() {
            "undefined" != typeof document && document.currentScript && document.currentScript.src;
            return function(e) {
                var t, n, r = void 0 !== (e = e || {}) ? e : {};
                r.ready = new Promise((function(e, r) {
                    t = e,
                    n = r
                }
                ));
                var i, o = {};
                for (i in r)
                    r.hasOwnProperty(i) && (o[i] = r[i]);
                var a, s = [], c = "";
                "undefined" != typeof document && document.currentScript && (c = document.currentScript.src),
                c = 0 !== c.indexOf("blob:") ? c.substr(0, c.lastIndexOf("/") + 1) : "";
                var _ = r.print || console.log.bind(console)
                  , l = r.printErr || console.warn.bind(console);
                for (i in o)
                    o.hasOwnProperty(i) && (r[i] = o[i]);
                o = null,
                r.arguments && (s = r.arguments),
                r.thisProgram && r.thisProgram,
                r.quit && r.quit;
                var u, d = 0;
                r.wasmBinary && (u = r.wasmBinary);
                var p;
                r.noExitRuntime;
                "object" != typeof WebAssembly && V("no native wasm support detected");
                var h = !1;
                var m = "undefined" != typeof TextDecoder ? new TextDecoder("utf8") : void 0;
                function f(e, t, n) {
                    for (var r = t + n, i = t; e[i] && !(i >= r); )
                        ++i;
                    if (i - t > 16 && e.subarray && m)
                        return m.decode(e.subarray(t, i));
                    for (var o = ""; t < i; ) {
                        var a = e[t++];
                        if (128 & a) {
                            var s = 63 & e[t++];
                            if (192 != (224 & a)) {
                                var c = 63 & e[t++];
                                if ((a = 224 == (240 & a) ? (15 & a) << 12 | s << 6 | c : (7 & a) << 18 | s << 12 | c << 6 | 63 & e[t++]) < 65536)
                                    o += String.fromCharCode(a);
                                else {
                                    var _ = a - 65536;
                                    o += String.fromCharCode(55296 | _ >> 10, 56320 | 1023 & _)
                                }
                            } else
                                o += String.fromCharCode((31 & a) << 6 | s)
                        } else
                            o += String.fromCharCode(a)
                    }
                    return o
                }
                function g(e, t) {
                    return e ? f(y, e, t) : ""
                }
                var v, E, y, w, b, C, T, D, A, S = "undefined" != typeof TextDecoder ? new TextDecoder("utf-16le") : void 0;
                function P(e, t) {
                    for (var n = e, r = n >> 1, i = r + t / 2; !(r >= i) && b[r]; )
                        ++r;
                    if ((n = r << 1) - e > 32 && S)
                        return S.decode(y.subarray(e, n));
                    for (var o = "", a = 0; !(a >= t / 2); ++a) {
                        var s = w[e + 2 * a >> 1];
                        if (0 == s)
                            break;
                        o += String.fromCharCode(s)
                    }
                    return o
                }
                function O(e, t, n) {
                    if (void 0 === n && (n = 2147483647),
                    n < 2)
                        return 0;
                    for (var r = t, i = (n -= 2) < 2 * e.length ? n / 2 : e.length, o = 0; o < i; ++o) {
                        var a = e.charCodeAt(o);
                        w[t >> 1] = a,
                        t += 2
                    }
                    return w[t >> 1] = 0,
                    t - r
                }
                function I(e) {
                    return 2 * e.length
                }
                function M(e, t) {
                    for (var n = 0, r = ""; !(n >= t / 4); ) {
                        var i = C[e + 4 * n >> 2];
                        if (0 == i)
                            break;
                        if (++n,
                        i >= 65536) {
                            var o = i - 65536;
                            r += String.fromCharCode(55296 | o >> 10, 56320 | 1023 & o)
                        } else
                            r += String.fromCharCode(i)
                    }
                    return r
                }
                function R(e, t, n) {
                    if (void 0 === n && (n = 2147483647),
                    n < 4)
                        return 0;
                    for (var r = t, i = r + n - 4, o = 0; o < e.length; ++o) {
                        var a = e.charCodeAt(o);
                        if (a >= 55296 && a <= 57343)
                            a = 65536 + ((1023 & a) << 10) | 1023 & e.charCodeAt(++o);
                        if (C[t >> 2] = a,
                        (t += 4) + 4 > i)
                            break
                    }
                    return C[t >> 2] = 0,
                    t - r
                }
                function L(e) {
                    for (var t = 0, n = 0; n < e.length; ++n) {
                        var r = e.charCodeAt(n);
                        r >= 55296 && r <= 57343 && ++n,
                        t += 4
                    }
                    return t
                }
                function k(e) {
                    v = e,
                    r.HEAP8 = E = new Int8Array(e),
                    r.HEAP16 = w = new Int16Array(e),
                    r.HEAP32 = C = new Int32Array(e),
                    r.HEAPU8 = y = new Uint8Array(e),
                    r.HEAPU16 = b = new Uint16Array(e),
                    r.HEAPU32 = T = new Uint32Array(e),
                    r.HEAPF32 = D = new Float32Array(e),
                    r.HEAPF64 = A = new Float64Array(e)
                }
                r.INITIAL_MEMORY;
                var B, x = [], N = [], U = [];
                var W = 0
                  , F = null
                  , K = null;
                function V(e) {
                    r.onAbort && r.onAbort(e),
                    l(e += ""),
                    h = !0,
                    1,
                    e = "abort(" + e + "). Build with -s ASSERTIONS=1 for more info.";
                    var t = new WebAssembly.RuntimeError(e);
                    throw n(t),
                    t
                }
                r.preloadedImages = {},
                r.preloadedAudios = {};
                var H, j;
                function G(e) {
                    return e.startsWith("data:application/octet-stream;base64,")
                }
                function q(e) {
                    try {
                        if (e == H && u)
                            return new Uint8Array(u);
                        if (a)
                            return a(e);
                        throw "both async and sync fetching of the wasm failed"
                    } catch (e) {
                        V(e)
                    }
                }
                function $(e) {
                    for (; e.length > 0; ) {
                        var t = e.shift();
                        if ("function" != typeof t) {
                            var n = t.func;
                            "number" == typeof n ? void 0 === t.arg ? B.get(n)() : B.get(n)(t.arg) : n(void 0 === t.arg ? null : t.arg)
                        } else
                            t(r)
                    }
                }
                function Y(e) {
                    switch (e) {
                    case 1:
                        return 0;
                    case 2:
                        return 1;
                    case 4:
                        return 2;
                    case 8:
                        return 3;
                    default:
                        throw new TypeError("Unknown type size: " + e)
                    }
                }
                G(H = "libvpx.wasm") || (j = H,
                H = r.locateFile ? r.locateFile(j, c) : c + j);
                var z = void 0;
                function X(e) {
                    for (var t = "", n = e; y[n]; )
                        t += z[y[n++]];
                    return t
                }
                var Q = {}
                  , J = {}
                  , Z = {};
                function ee(e) {
                    if (void 0 === e)
                        return "_unknown";
                    var t = (e = e.replace(/[^a-zA-Z0-9_]/g, "$")).charCodeAt(0);
                    return t >= 48 && t <= 57 ? "_" + e : e
                }
                function te(e, t) {
                    return e = ee(e),
                    function() {
                        return t.apply(this, arguments)
                    }
                }
                function ne(e, t) {
                    var n = te(t, (function(e) {
                        this.name = t,
                        this.message = e;
                        var n = new Error(e).stack;
                        void 0 !== n && (this.stack = this.toString() + "\n" + n.replace(/^Error(:[^\n]*)?\n/, ""))
                    }
                    ));
                    return n.prototype = Object.create(e.prototype),
                    n.prototype.constructor = n,
                    n.prototype.toString = function() {
                        return void 0 === this.message ? this.name : this.name + ": " + this.message
                    }
                    ,
                    n
                }
                var re = void 0;
                function ie(e) {
                    throw new re(e)
                }
                var oe = void 0;
                function ae(e) {
                    throw new oe(e)
                }
                function se(e, t, n) {
                    function r(t) {
                        var r = n(t);
                        r.length !== e.length && ae("Mismatched type converter count");
                        for (var i = 0; i < e.length; ++i)
                            ce(e[i], r[i])
                    }
                    e.forEach((function(e) {
                        Z[e] = t
                    }
                    ));
                    var i = new Array(t.length)
                      , o = []
                      , a = 0;
                    t.forEach((function(e, t) {
                        J.hasOwnProperty(e) ? i[t] = J[e] : (o.push(e),
                        Q.hasOwnProperty(e) || (Q[e] = []),
                        Q[e].push((function() {
                            i[t] = J[e],
                            ++a === o.length && r(i)
                        }
                        )))
                    }
                    )),
                    0 === o.length && r(i)
                }
                function ce(e, t, n) {
                    if (n = n || {},
                    !("argPackAdvance"in t))
                        throw new TypeError("registerType registeredInstance requires argPackAdvance");
                    var r = t.name;
                    if (e || ie('type "' + r + '" must have a positive integer typeid pointer'),
                    J.hasOwnProperty(e)) {
                        if (n.ignoreDuplicateRegistrations)
                            return;
                        ie("Cannot register type '" + r + "' twice")
                    }
                    if (J[e] = t,
                    delete Z[e],
                    Q.hasOwnProperty(e)) {
                        var i = Q[e];
                        delete Q[e],
                        i.forEach((function(e) {
                            e()
                        }
                        ))
                    }
                }
                function _e(e) {
                    if (!(this instanceof be))
                        return !1;
                    if (!(e instanceof be))
                        return !1;
                    for (var t = this.$$.ptrType.registeredClass, n = this.$$.ptr, r = e.$$.ptrType.registeredClass, i = e.$$.ptr; t.baseClass; )
                        n = t.upcast(n),
                        t = t.baseClass;
                    for (; r.baseClass; )
                        i = r.upcast(i),
                        r = r.baseClass;
                    return t === r && n === i
                }
                function le(e) {
                    ie(e.$$.ptrType.registeredClass.name + " instance already deleted")
                }
                var ue = !1;
                function de(e) {}
                function pe(e) {
                    e.count.value -= 1,
                    0 === e.count.value && function(e) {
                        e.smartPtr ? e.smartPtrType.rawDestructor(e.smartPtr) : e.ptrType.registeredClass.rawDestructor(e.ptr)
                    }(e)
                }
                function he(e) {
                    return "undefined" == typeof FinalizationGroup ? (he = function(e) {
                        return e
                    }
                    ,
                    e) : (ue = new FinalizationGroup((function(e) {
                        for (var t = e.next(); !t.done; t = e.next()) {
                            var n = t.value;
                            n.ptr ? pe(n) : console.warn("object already deleted: " + n.ptr)
                        }
                    }
                    )),
                    he = function(e) {
                        return ue.register(e, e.$$, e.$$),
                        e
                    }
                    ,
                    de = function(e) {
                        ue.unregister(e.$$)
                    }
                    ,
                    he(e))
                }
                function me() {
                    if (this.$$.ptr || le(this),
                    this.$$.preservePointerOnDelete)
                        return this.$$.count.value += 1,
                        this;
                    var e, t = he(Object.create(Object.getPrototypeOf(this), {
                        $$: {
                            value: (e = this.$$,
                            {
                                count: e.count,
                                deleteScheduled: e.deleteScheduled,
                                preservePointerOnDelete: e.preservePointerOnDelete,
                                ptr: e.ptr,
                                ptrType: e.ptrType,
                                smartPtr: e.smartPtr,
                                smartPtrType: e.smartPtrType
                            })
                        }
                    }));
                    return t.$$.count.value += 1,
                    t.$$.deleteScheduled = !1,
                    t
                }
                function fe() {
                    this.$$.ptr || le(this),
                    this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && ie("Object already scheduled for deletion"),
                    de(this),
                    pe(this.$$),
                    this.$$.preservePointerOnDelete || (this.$$.smartPtr = void 0,
                    this.$$.ptr = void 0)
                }
                function ge() {
                    return !this.$$.ptr
                }
                var ve = void 0
                  , Ee = [];
                function ye() {
                    for (; Ee.length; ) {
                        var e = Ee.pop();
                        e.$$.deleteScheduled = !1,
                        e.delete()
                    }
                }
                function we() {
                    return this.$$.ptr || le(this),
                    this.$$.deleteScheduled && !this.$$.preservePointerOnDelete && ie("Object already scheduled for deletion"),
                    Ee.push(this),
                    1 === Ee.length && ve && ve(ye),
                    this.$$.deleteScheduled = !0,
                    this
                }
                function be() {}
                var Ce = {};
                function Te(e, t, n) {
                    if (void 0 === e[t].overloadTable) {
                        var r = e[t];
                        e[t] = function() {
                            return e[t].overloadTable.hasOwnProperty(arguments.length) || ie("Function '" + n + "' called with an invalid number of arguments (" + arguments.length + ") - expects one of (" + e[t].overloadTable + ")!"),
                            e[t].overloadTable[arguments.length].apply(this, arguments)
                        }
                        ,
                        e[t].overloadTable = [],
                        e[t].overloadTable[r.argCount] = r
                    }
                }
                function De(e, t, n) {
                    r.hasOwnProperty(e) ? ((void 0 === n || void 0 !== r[e].overloadTable && void 0 !== r[e].overloadTable[n]) && ie("Cannot register public name '" + e + "' twice"),
                    Te(r, e, e),
                    r.hasOwnProperty(n) && ie("Cannot register multiple overloads of a function with the same number of arguments (" + n + ")!"),
                    r[e].overloadTable[n] = t) : (r[e] = t,
                    void 0 !== n && (r[e].numArguments = n))
                }
                function Ae(e, t, n, r, i, o, a, s) {
                    this.name = e,
                    this.constructor = t,
                    this.instancePrototype = n,
                    this.rawDestructor = r,
                    this.baseClass = i,
                    this.getActualType = o,
                    this.upcast = a,
                    this.downcast = s,
                    this.pureVirtualFunctions = []
                }
                function Se(e, t, n) {
                    for (; t !== n; )
                        t.upcast || ie("Expected null or instance of " + n.name + ", got an instance of " + t.name),
                        e = t.upcast(e),
                        t = t.baseClass;
                    return e
                }
                function Pe(e, t) {
                    if (null === t)
                        return this.isReference && ie("null is not a valid " + this.name),
                        0;
                    t.$$ || ie('Cannot pass "' + at(t) + '" as a ' + this.name),
                    t.$$.ptr || ie("Cannot pass deleted object as a pointer of type " + this.name);
                    var n = t.$$.ptrType.registeredClass;
                    return Se(t.$$.ptr, n, this.registeredClass)
                }
                function Oe(e, t) {
                    var n;
                    if (null === t)
                        return this.isReference && ie("null is not a valid " + this.name),
                        this.isSmartPointer ? (n = this.rawConstructor(),
                        null !== e && e.push(this.rawDestructor, n),
                        n) : 0;
                    t.$$ || ie('Cannot pass "' + at(t) + '" as a ' + this.name),
                    t.$$.ptr || ie("Cannot pass deleted object as a pointer of type " + this.name),
                    !this.isConst && t.$$.ptrType.isConst && ie("Cannot convert argument of type " + (t.$$.smartPtrType ? t.$$.smartPtrType.name : t.$$.ptrType.name) + " to parameter type " + this.name);
                    var r = t.$$.ptrType.registeredClass;
                    if (n = Se(t.$$.ptr, r, this.registeredClass),
                    this.isSmartPointer)
                        switch (void 0 === t.$$.smartPtr && ie("Passing raw pointer to smart pointer is illegal"),
                        this.sharingPolicy) {
                        case 0:
                            t.$$.smartPtrType === this ? n = t.$$.smartPtr : ie("Cannot convert argument of type " + (t.$$.smartPtrType ? t.$$.smartPtrType.name : t.$$.ptrType.name) + " to parameter type " + this.name);
                            break;
                        case 1:
                            n = t.$$.smartPtr;
                            break;
                        case 2:
                            if (t.$$.smartPtrType === this)
                                n = t.$$.smartPtr;
                            else {
                                var i = t.clone();
                                n = this.rawShare(n, rt((function() {
                                    i.delete()
                                }
                                ))),
                                null !== e && e.push(this.rawDestructor, n)
                            }
                            break;
                        default:
                            ie("Unsupporting sharing policy")
                        }
                    return n
                }
                function Ie(e, t) {
                    if (null === t)
                        return this.isReference && ie("null is not a valid " + this.name),
                        0;
                    t.$$ || ie('Cannot pass "' + at(t) + '" as a ' + this.name),
                    t.$$.ptr || ie("Cannot pass deleted object as a pointer of type " + this.name),
                    t.$$.ptrType.isConst && ie("Cannot convert argument of type " + t.$$.ptrType.name + " to parameter type " + this.name);
                    var n = t.$$.ptrType.registeredClass;
                    return Se(t.$$.ptr, n, this.registeredClass)
                }
                function Me(e) {
                    return this.fromWireType(T[e >> 2])
                }
                function Re(e) {
                    return this.rawGetPointee && (e = this.rawGetPointee(e)),
                    e
                }
                function Le(e) {
                    this.rawDestructor && this.rawDestructor(e)
                }
                function ke(e) {
                    null !== e && e.delete()
                }
                function Be(e, t, n) {
                    if (t === n)
                        return e;
                    if (void 0 === n.baseClass)
                        return null;
                    var r = Be(e, t, n.baseClass);
                    return null === r ? null : n.downcast(r)
                }
                function xe() {
                    return Object.keys(We).length
                }
                function Ne() {
                    var e = [];
                    for (var t in We)
                        We.hasOwnProperty(t) && e.push(We[t]);
                    return e
                }
                function Ue(e) {
                    ve = e,
                    Ee.length && ve && ve(ye)
                }
                var We = {};
                function Fe(e, t) {
                    return t = function(e, t) {
                        for (void 0 === t && ie("ptr should not be undefined"); e.baseClass; )
                            t = e.upcast(t),
                            e = e.baseClass;
                        return t
                    }(e, t),
                    We[t]
                }
                function Ke(e, t) {
                    return t.ptrType && t.ptr || ae("makeClassHandle requires ptr and ptrType"),
                    !!t.smartPtrType !== !!t.smartPtr && ae("Both smartPtrType and smartPtr must be specified"),
                    t.count = {
                        value: 1
                    },
                    he(Object.create(e, {
                        $$: {
                            value: t
                        }
                    }))
                }
                function Ve(e) {
                    var t = this.getPointee(e);
                    if (!t)
                        return this.destructor(e),
                        null;
                    var n = Fe(this.registeredClass, t);
                    if (void 0 !== n) {
                        if (0 === n.$$.count.value)
                            return n.$$.ptr = t,
                            n.$$.smartPtr = e,
                            n.clone();
                        var r = n.clone();
                        return this.destructor(e),
                        r
                    }
                    function i() {
                        return this.isSmartPointer ? Ke(this.registeredClass.instancePrototype, {
                            ptrType: this.pointeeType,
                            ptr: t,
                            smartPtrType: this,
                            smartPtr: e
                        }) : Ke(this.registeredClass.instancePrototype, {
                            ptrType: this,
                            ptr: e
                        })
                    }
                    var o, a = this.registeredClass.getActualType(t), s = Ce[a];
                    if (!s)
                        return i.call(this);
                    o = this.isConst ? s.constPointerType : s.pointerType;
                    var c = Be(t, this.registeredClass, o.registeredClass);
                    return null === c ? i.call(this) : this.isSmartPointer ? Ke(o.registeredClass.instancePrototype, {
                        ptrType: o,
                        ptr: c,
                        smartPtrType: this,
                        smartPtr: e
                    }) : Ke(o.registeredClass.instancePrototype, {
                        ptrType: o,
                        ptr: c
                    })
                }
                function He(e, t, n, r, i, o, a, s, c, _, l) {
                    this.name = e,
                    this.registeredClass = t,
                    this.isReference = n,
                    this.isConst = r,
                    this.isSmartPointer = i,
                    this.pointeeType = o,
                    this.sharingPolicy = a,
                    this.rawGetPointee = s,
                    this.rawConstructor = c,
                    this.rawShare = _,
                    this.rawDestructor = l,
                    i || void 0 !== t.baseClass ? this.toWireType = Oe : r ? (this.toWireType = Pe,
                    this.destructorFunction = null) : (this.toWireType = Ie,
                    this.destructorFunction = null)
                }
                function je(e, t, n) {
                    return e.includes("j") ? function(e, t, n) {
                        var i = r["dynCall_" + e];
                        return n && n.length ? i.apply(null, [t].concat(n)) : i.call(null, t)
                    }(e, t, n) : B.get(t).apply(null, n)
                }
                function Ge(e, t) {
                    var n, r, i, o = (e = X(e)).includes("j") ? (n = e,
                    r = t,
                    i = [],
                    function() {
                        i.length = arguments.length;
                        for (var e = 0; e < arguments.length; e++)
                            i[e] = arguments[e];
                        return je(n, r, i)
                    }
                    ) : B.get(t);
                    return "function" != typeof o && ie("unknown function pointer with signature " + e + ": " + t),
                    o
                }
                var qe = void 0;
                function $e(e) {
                    var t = mt(e)
                      , n = X(t);
                    return pt(t),
                    n
                }
                function Ye(e, t) {
                    var n = []
                      , r = {};
                    throw t.forEach((function e(t) {
                        r[t] || J[t] || (Z[t] ? Z[t].forEach(e) : (n.push(t),
                        r[t] = !0))
                    }
                    )),
                    new qe(e + ": " + n.map($e).join([", "]))
                }
                function ze(e, t) {
                    for (var n = [], r = 0; r < e; r++)
                        n.push(C[(t >> 2) + r]);
                    return n
                }
                function Xe(e) {
                    for (; e.length; ) {
                        var t = e.pop();
                        e.pop()(t)
                    }
                }
                function Qe(e, t, n, r, i) {
                    var o = t.length;
                    o < 2 && ie("argTypes array size mismatch! Must at least get return value and 'this' types!");
                    for (var a = null !== t[1] && null !== n, s = !1, c = 1; c < t.length; ++c)
                        if (null !== t[c] && void 0 === t[c].destructorFunction) {
                            s = !0;
                            break
                        }
                    var _ = "void" !== t[0].name
                      , l = o - 2
                      , u = new Array(l)
                      , d = []
                      , p = [];
                    return function() {
                        var n;
                        arguments.length !== l && ie("function " + e + " called with " + arguments.length + " arguments, expected " + l + " args!"),
                        p.length = 0,
                        d.length = a ? 2 : 1,
                        d[0] = i,
                        a && (n = t[1].toWireType(p, this),
                        d[1] = n);
                        for (var o = 0; o < l; ++o)
                            u[o] = t[o + 2].toWireType(p, arguments[o]),
                            d.push(u[o]);
                        var c = r.apply(null, d);
                        function h(e) {
                            if (s)
                                Xe(p);
                            else
                                for (var r = a ? 1 : 2; r < t.length; r++) {
                                    var i = 1 === r ? n : u[r - 2];
                                    null !== t[r].destructorFunction && t[r].destructorFunction(i)
                                }
                            if (_)
                                return t[0].fromWireType(e)
                        }
                        return h(c)
                    }
                }
                var Je = []
                  , Ze = [{}, {
                    value: void 0
                }, {
                    value: null
                }, {
                    value: !0
                }, {
                    value: !1
                }];
                function et(e) {
                    e > 4 && 0 == --Ze[e].refcount && (Ze[e] = void 0,
                    Je.push(e))
                }
                function tt() {
                    for (var e = 0, t = 5; t < Ze.length; ++t)
                        void 0 !== Ze[t] && ++e;
                    return e
                }
                function nt() {
                    for (var e = 5; e < Ze.length; ++e)
                        if (void 0 !== Ze[e])
                            return Ze[e];
                    return null
                }
                function rt(e) {
                    switch (e) {
                    case void 0:
                        return 1;
                    case null:
                        return 2;
                    case !0:
                        return 3;
                    case !1:
                        return 4;
                    default:
                        var t = Je.length ? Je.pop() : Ze.length;
                        return Ze[t] = {
                            refcount: 1,
                            value: e
                        },
                        t
                    }
                }
                function it(e, t, n) {
                    switch (t) {
                    case 0:
                        return function(e) {
                            var t = n ? E : y;
                            return this.fromWireType(t[e])
                        }
                        ;
                    case 1:
                        return function(e) {
                            var t = n ? w : b;
                            return this.fromWireType(t[e >> 1])
                        }
                        ;
                    case 2:
                        return function(e) {
                            var t = n ? C : T;
                            return this.fromWireType(t[e >> 2])
                        }
                        ;
                    default:
                        throw new TypeError("Unknown integer type: " + e)
                    }
                }
                function ot(e, t) {
                    var n = J[e];
                    return void 0 === n && ie(t + " has unknown type " + $e(e)),
                    n
                }
                function at(e) {
                    if (null === e)
                        return "null";
                    var t = typeof e;
                    return "object" === t || "array" === t || "function" === t ? e.toString() : "" + e
                }
                function st(e, t) {
                    switch (t) {
                    case 2:
                        return function(e) {
                            return this.fromWireType(D[e >> 2])
                        }
                        ;
                    case 3:
                        return function(e) {
                            return this.fromWireType(A[e >> 3])
                        }
                        ;
                    default:
                        throw new TypeError("Unknown float type: " + e)
                    }
                }
                function ct(e, t, n) {
                    switch (t) {
                    case 0:
                        return n ? function(e) {
                            return E[e]
                        }
                        : function(e) {
                            return y[e]
                        }
                        ;
                    case 1:
                        return n ? function(e) {
                            return w[e >> 1]
                        }
                        : function(e) {
                            return b[e >> 1]
                        }
                        ;
                    case 2:
                        return n ? function(e) {
                            return C[e >> 2]
                        }
                        : function(e) {
                            return T[e >> 2]
                        }
                        ;
                    default:
                        throw new TypeError("Unknown integer type: " + e)
                    }
                }
                function _t(e) {
                    try {
                        return p.grow(e - v.byteLength + 65535 >>> 16),
                        k(p.buffer),
                        1
                    } catch (e) {}
                }
                var lt = {
                    mappings: {},
                    buffers: [null, [], []],
                    printChar: function(e, t) {
                        var n = lt.buffers[e];
                        0 === t || 10 === t ? ((1 === e ? _ : l)(f(n, 0)),
                        n.length = 0) : n.push(t)
                    },
                    varargs: void 0,
                    get: function() {
                        return lt.varargs += 4,
                        C[lt.varargs - 4 >> 2]
                    },
                    getStr: function(e) {
                        return g(e)
                    },
                    get64: function(e, t) {
                        return e
                    }
                };
                !function() {
                    for (var e = new Array(256), t = 0; t < 256; ++t)
                        e[t] = String.fromCharCode(t);
                    z = e
                }(),
                re = r.BindingError = ne(Error, "BindingError"),
                oe = r.InternalError = ne(Error, "InternalError"),
                be.prototype.isAliasOf = _e,
                be.prototype.clone = me,
                be.prototype.delete = fe,
                be.prototype.isDeleted = ge,
                be.prototype.deleteLater = we,
                He.prototype.getPointee = Re,
                He.prototype.destructor = Le,
                He.prototype.argPackAdvance = 8,
                He.prototype.readValueFromPointer = Me,
                He.prototype.deleteObject = ke,
                He.prototype.fromWireType = Ve,
                r.getInheritedInstanceCount = xe,
                r.getLiveInheritedInstances = Ne,
                r.flushPendingDeletes = ye,
                r.setDelayFunction = Ue,
                qe = r.UnboundTypeError = ne(Error, "UnboundTypeError"),
                r.count_emval_handles = tt,
                r.get_first_emval = nt;
                var ut, dt = {
                    y: function(e, t, n, r, i) {},
                    H: function(e, t, n, r, i) {
                        var o = Y(n);
                        ce(e, {
                            name: t = X(t),
                            fromWireType: function(e) {
                                return !!e
                            },
                            toWireType: function(e, t) {
                                return t ? r : i
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: function(e) {
                                var r;
                                if (1 === n)
                                    r = E;
                                else if (2 === n)
                                    r = w;
                                else {
                                    if (4 !== n)
                                        throw new TypeError("Unknown boolean type size: " + t);
                                    r = C
                                }
                                return this.fromWireType(r[e >> o])
                            },
                            destructorFunction: null
                        })
                    },
                    t: function(e, t, n, i, o, a, s, c, _, l, u, d, p) {
                        u = X(u),
                        a = Ge(o, a),
                        c && (c = Ge(s, c)),
                        l && (l = Ge(_, l)),
                        p = Ge(d, p);
                        var h = ee(u);
                        De(h, (function() {
                            Ye("Cannot construct " + u + " due to unbound types", [i])
                        }
                        )),
                        se([e, t, n], i ? [i] : [], (function(t) {
                            var n, o;
                            t = t[0],
                            o = i ? (n = t.registeredClass).instancePrototype : be.prototype;
                            var s = te(h, (function() {
                                if (Object.getPrototypeOf(this) !== _)
                                    throw new re("Use 'new' to construct " + u);
                                if (void 0 === d.constructor_body)
                                    throw new re(u + " has no accessible constructor");
                                var e = d.constructor_body[arguments.length];
                                if (void 0 === e)
                                    throw new re("Tried to invoke ctor of " + u + " with invalid number of parameters (" + arguments.length + ") - expected (" + Object.keys(d.constructor_body).toString() + ") parameters instead!");
                                return e.apply(this, arguments)
                            }
                            ))
                              , _ = Object.create(o, {
                                constructor: {
                                    value: s
                                }
                            });
                            s.prototype = _;
                            var d = new Ae(u,s,_,p,n,a,c,l)
                              , m = new He(u,d,!0,!1,!1)
                              , f = new He(u + "*",d,!1,!1,!1)
                              , g = new He(u + " const*",d,!1,!0,!1);
                            return Ce[e] = {
                                pointerType: f,
                                constPointerType: g
                            },
                            function(e, t, n) {
                                r.hasOwnProperty(e) || ae("Replacing nonexistant public symbol"),
                                void 0 !== r[e].overloadTable && void 0 !== n ? r[e].overloadTable[n] = t : (r[e] = t,
                                r[e].argCount = n)
                            }(h, s),
                            [m, f, g]
                        }
                        ))
                    },
                    p: function(e, t, n, r, i, o) {
                        var a;
                        t > 0 || V("Assertion failed: " + a);
                        var s = ze(t, n);
                        i = Ge(r, i),
                        se([], [e], (function(e) {
                            var n = "constructor " + (e = e[0]).name;
                            if (void 0 === e.registeredClass.constructor_body && (e.registeredClass.constructor_body = []),
                            void 0 !== e.registeredClass.constructor_body[t - 1])
                                throw new re("Cannot register multiple constructors with identical number of parameters (" + (t - 1) + ") for class '" + e.name + "'! Overload resolution is currently only performed using the parameter count, not actual type info!");
                            return e.registeredClass.constructor_body[t - 1] = function() {
                                Ye("Cannot construct " + e.name + " due to unbound types", s)
                            }
                            ,
                            se([], s, (function(r) {
                                return r.splice(1, 0, null),
                                e.registeredClass.constructor_body[t - 1] = Qe(n, r, null, i, o),
                                []
                            }
                            )),
                            []
                        }
                        ))
                    },
                    e: function(e, t, n, r, i, o, a, s) {
                        var c = ze(n, r);
                        t = X(t),
                        o = Ge(i, o),
                        se([], [e], (function(e) {
                            var r = (e = e[0]).name + "." + t;
                            function i() {
                                Ye("Cannot call " + r + " due to unbound types", c)
                            }
                            t.startsWith("@@") && (t = Symbol[t.substring(2)]),
                            s && e.registeredClass.pureVirtualFunctions.push(t);
                            var _ = e.registeredClass.instancePrototype
                              , l = _[t];
                            return void 0 === l || void 0 === l.overloadTable && l.className !== e.name && l.argCount === n - 2 ? (i.argCount = n - 2,
                            i.className = e.name,
                            _[t] = i) : (Te(_, t, r),
                            _[t].overloadTable[n - 2] = i),
                            se([], c, (function(i) {
                                var s = Qe(r, i, e, o, a);
                                return void 0 === _[t].overloadTable ? (s.argCount = n - 2,
                                _[t] = s) : _[t].overloadTable[n - 2] = s,
                                []
                            }
                            )),
                            []
                        }
                        ))
                    },
                    G: function(e, t) {
                        ce(e, {
                            name: t = X(t),
                            fromWireType: function(e) {
                                var t = Ze[e].value;
                                return et(e),
                                t
                            },
                            toWireType: function(e, t) {
                                return rt(t)
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: Me,
                            destructorFunction: null
                        })
                    },
                    L: function(e, t, n, r) {
                        var i = Y(n);
                        function o() {}
                        t = X(t),
                        o.values = {},
                        ce(e, {
                            name: t,
                            constructor: o,
                            fromWireType: function(e) {
                                return this.constructor.values[e]
                            },
                            toWireType: function(e, t) {
                                return t.value
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: it(t, i, r),
                            destructorFunction: null
                        }),
                        De(t, o)
                    },
                    x: function(e, t, n) {
                        var r = ot(e, "enum");
                        t = X(t);
                        var i = r.constructor
                          , o = Object.create(r.constructor.prototype, {
                            value: {
                                value: n
                            },
                            constructor: {
                                value: te(r.name + "_" + t, (function() {}
                                ))
                            }
                        });
                        i.values[n] = o,
                        i[t] = o
                    },
                    r: function(e, t, n) {
                        var r = Y(n);
                        ce(e, {
                            name: t = X(t),
                            fromWireType: function(e) {
                                return e
                            },
                            toWireType: function(e, t) {
                                if ("number" != typeof t && "boolean" != typeof t)
                                    throw new TypeError('Cannot convert "' + at(t) + '" to ' + this.name);
                                return t
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: st(t, r),
                            destructorFunction: null
                        })
                    },
                    h: function(e, t, n, r, i) {
                        t = X(t),
                        -1 === i && (i = 4294967295);
                        var o = Y(n)
                          , a = function(e) {
                            return e
                        };
                        if (0 === r) {
                            var s = 32 - 8 * n;
                            a = function(e) {
                                return e << s >>> s
                            }
                        }
                        var c = t.includes("unsigned");
                        ce(e, {
                            name: t,
                            fromWireType: a,
                            toWireType: function(e, n) {
                                if ("number" != typeof n && "boolean" != typeof n)
                                    throw new TypeError('Cannot convert "' + at(n) + '" to ' + this.name);
                                if (n < r || n > i)
                                    throw new TypeError('Passing a number "' + at(n) + '" from JS side to C/C++ side to an argument of type "' + t + '", which is outside the valid range [' + r + ", " + i + "]!");
                                return c ? n >>> 0 : 0 | n
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: ct(t, o, 0 !== r),
                            destructorFunction: null
                        })
                    },
                    g: function(e, t, n) {
                        var r = [Int8Array, Uint8Array, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array][t];
                        function i(e) {
                            var t = T
                              , n = t[e >>= 2]
                              , i = t[e + 1];
                            return new r(v,i,n)
                        }
                        ce(e, {
                            name: n = X(n),
                            fromWireType: i,
                            argPackAdvance: 8,
                            readValueFromPointer: i
                        }, {
                            ignoreDuplicateRegistrations: !0
                        })
                    },
                    s: function(e, t) {
                        var n = "std::string" === (t = X(t));
                        ce(e, {
                            name: t,
                            fromWireType: function(e) {
                                var t, r = T[e >> 2];
                                if (n)
                                    for (var i = e + 4, o = 0; o <= r; ++o) {
                                        var a = e + 4 + o;
                                        if (o == r || 0 == y[a]) {
                                            var s = g(i, a - i);
                                            void 0 === t ? t = s : (t += String.fromCharCode(0),
                                            t += s),
                                            i = a + 1
                                        }
                                    }
                                else {
                                    var c = new Array(r);
                                    for (o = 0; o < r; ++o)
                                        c[o] = String.fromCharCode(y[e + 4 + o]);
                                    t = c.join("")
                                }
                                return pt(e),
                                t
                            },
                            toWireType: function(e, t) {
                                var r;
                                t instanceof ArrayBuffer && (t = new Uint8Array(t));
                                var i = "string" == typeof t;
                                i || t instanceof Uint8Array || t instanceof Uint8ClampedArray || t instanceof Int8Array || ie("Cannot pass non-string to std::string"),
                                r = n && i ? function() {
                                    return function(e) {
                                        for (var t = 0, n = 0; n < e.length; ++n) {
                                            var r = e.charCodeAt(n);
                                            r >= 55296 && r <= 57343 && (r = 65536 + ((1023 & r) << 10) | 1023 & e.charCodeAt(++n)),
                                            r <= 127 ? ++t : t += r <= 2047 ? 2 : r <= 65535 ? 3 : 4
                                        }
                                        return t
                                    }(t)
                                }
                                : function() {
                                    return t.length
                                }
                                ;
                                var o = r()
                                  , a = ht(4 + o + 1);
                                if (T[a >> 2] = o,
                                n && i)
                                    (function(e, t, n, r) {
                                        if (!(r > 0))
                                            return 0;
                                        for (var i = n, o = n + r - 1, a = 0; a < e.length; ++a) {
                                            var s = e.charCodeAt(a);
                                            if (s >= 55296 && s <= 57343 && (s = 65536 + ((1023 & s) << 10) | 1023 & e.charCodeAt(++a)),
                                            s <= 127) {
                                                if (n >= o)
                                                    break;
                                                t[n++] = s
                                            } else if (s <= 2047) {
                                                if (n + 1 >= o)
                                                    break;
                                                t[n++] = 192 | s >> 6,
                                                t[n++] = 128 | 63 & s
                                            } else if (s <= 65535) {
                                                if (n + 2 >= o)
                                                    break;
                                                t[n++] = 224 | s >> 12,
                                                t[n++] = 128 | s >> 6 & 63,
                                                t[n++] = 128 | 63 & s
                                            } else {
                                                if (n + 3 >= o)
                                                    break;
                                                t[n++] = 240 | s >> 18,
                                                t[n++] = 128 | s >> 12 & 63,
                                                t[n++] = 128 | s >> 6 & 63,
                                                t[n++] = 128 | 63 & s
                                            }
                                        }
                                        t[n] = 0
                                    }
                                    )(t, y, a + 4, o + 1);
                                else if (i)
                                    for (var s = 0; s < o; ++s) {
                                        var c = t.charCodeAt(s);
                                        c > 255 && (pt(a),
                                        ie("String has UTF-16 code units that do not fit in 8 bits")),
                                        y[a + 4 + s] = c
                                    }
                                else
                                    for (s = 0; s < o; ++s)
                                        y[a + 4 + s] = t[s];
                                return null !== e && e.push(pt, a),
                                a
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: Me,
                            destructorFunction: function(e) {
                                pt(e)
                            }
                        })
                    },
                    m: function(e, t, n) {
                        var r, i, o, a, s;
                        n = X(n),
                        2 === t ? (r = P,
                        i = O,
                        a = I,
                        o = function() {
                            return b
                        }
                        ,
                        s = 1) : 4 === t && (r = M,
                        i = R,
                        a = L,
                        o = function() {
                            return T
                        }
                        ,
                        s = 2),
                        ce(e, {
                            name: n,
                            fromWireType: function(e) {
                                for (var n, i = T[e >> 2], a = o(), c = e + 4, _ = 0; _ <= i; ++_) {
                                    var l = e + 4 + _ * t;
                                    if (_ == i || 0 == a[l >> s]) {
                                        var u = r(c, l - c);
                                        void 0 === n ? n = u : (n += String.fromCharCode(0),
                                        n += u),
                                        c = l + t
                                    }
                                }
                                return pt(e),
                                n
                            },
                            toWireType: function(e, r) {
                                "string" != typeof r && ie("Cannot pass non-string to C++ string type " + n);
                                var o = a(r)
                                  , c = ht(4 + o + t);
                                return T[c >> 2] = o >> s,
                                i(r, c + 4, o + t),
                                null !== e && e.push(pt, c),
                                c
                            },
                            argPackAdvance: 8,
                            readValueFromPointer: Me,
                            destructorFunction: function(e) {
                                pt(e)
                            }
                        })
                    },
                    I: function(e, t) {
                        ce(e, {
                            isVoid: !0,
                            name: t = X(t),
                            argPackAdvance: 0,
                            fromWireType: function() {},
                            toWireType: function(e, t) {}
                        })
                    },
                    F: function() {
                        throw "longjmp"
                    },
                    k: et,
                    l: function(e) {
                        e > 4 && (Ze[e].refcount += 1)
                    },
                    j: function(e, t) {
                        return rt((e = ot(e, "_emval_take_value")).readValueFromPointer(t))
                    },
                    E: function() {
                        V()
                    },
                    C: function(e, t, n) {
                        y.copyWithin(e, t, t + n)
                    },
                    D: function(e) {
                        var t, n, r = y.length, i = 2147483648;
                        if ((e >>>= 0) > i)
                            return !1;
                        for (var o = 1; o <= 4; o *= 2) {
                            var a = r * (1 + .2 / o);
                            if (a = Math.min(a, e + 100663296),
                            _t(Math.min(i, ((t = Math.max(e, a)) % (n = 65536) > 0 && (t += n - t % n),
                            t))))
                                return !0
                        }
                        return !1
                    },
                    q: function(e, t, n, r) {
                        for (var i = 0, o = 0; o < n; o++) {
                            for (var a = C[t + 8 * o >> 2], s = C[t + (8 * o + 4) >> 2], c = 0; c < s; c++)
                                lt.printChar(e, y[a + c]);
                            i += s
                        }
                        return C[r >> 2] = i,
                        0
                    },
                    a: function() {
                        return d
                    },
                    f: function(e) {
                        var t = Date.now();
                        return C[e >> 2] = t / 1e3 | 0,
                        C[e + 4 >> 2] = t % 1e3 * 1e3 | 0,
                        0
                    },
                    d: function(e, t, n) {
                        var r = ft();
                        try {
                            return B.get(e)(t, n)
                        } catch (e) {
                            if (gt(r),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    n: function(e, t, n, r) {
                        var i = ft();
                        try {
                            return B.get(e)(t, n, r)
                        } catch (e) {
                            if (gt(i),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    o: function(e, t, n, r, i) {
                        var o = ft();
                        try {
                            return B.get(e)(t, n, r, i)
                        } catch (e) {
                            if (gt(o),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    u: function(e, t, n, r, i, o) {
                        var a = ft();
                        try {
                            return B.get(e)(t, n, r, i, o)
                        } catch (e) {
                            if (gt(a),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    K: function(e, t, n, r, i, o, a, s, c) {
                        var _ = ft();
                        try {
                            return B.get(e)(t, n, r, i, o, a, s, c)
                        } catch (e) {
                            if (gt(_),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    B: function(e, t, n, r, i, o, a, s) {
                        var c = ft();
                        try {
                            return Et(e, t, n, r, i, o, a, s)
                        } catch (e) {
                            if (gt(c),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    z: function(e, t, n, r) {
                        var i = ft();
                        try {
                            return wt(e, t, n, r)
                        } catch (e) {
                            if (gt(i),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    i: function(e, t) {
                        var n = ft();
                        try {
                            B.get(e)(t)
                        } catch (e) {
                            if (gt(n),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    w: function(e, t, n) {
                        var r = ft();
                        try {
                            B.get(e)(t, n)
                        } catch (e) {
                            if (gt(r),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    c: function(e, t, n, r, i) {
                        var o = ft();
                        try {
                            B.get(e)(t, n, r, i)
                        } catch (e) {
                            if (gt(o),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    J: function(e, t, n, r, i, o, a) {
                        var s = ft();
                        try {
                            B.get(e)(t, n, r, i, o, a)
                        } catch (e) {
                            if (gt(s),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    v: function(e, t, n, r, i, o, a, s, c) {
                        var _ = ft();
                        try {
                            B.get(e)(t, n, r, i, o, a, s, c)
                        } catch (e) {
                            if (gt(_),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    A: function(e, t, n, r, i, o, a, s, c, _) {
                        var l = ft();
                        try {
                            yt(e, t, n, r, i, o, a, s, c, _)
                        } catch (e) {
                            if (gt(l),
                            e !== e + 0 && "longjmp" !== e)
                                throw e;
                            vt(1, 0)
                        }
                    },
                    b: function(e) {
                        d = e
                    }
                }, pt = (function() {
                    var e = {
                        a: dt
                    };
                    function t(e, t) {
                        var n, i = e.exports;
                        r.asm = i,
                        k((p = r.asm.M).buffer),
                        B = r.asm.Q,
                        n = r.asm.N,
                        N.unshift(n),
                        function(e) {
                            if (W--,
                            r.monitorRunDependencies && r.monitorRunDependencies(W),
                            0 == W && (null !== F && (clearInterval(F),
                            F = null),
                            K)) {
                                var t = K;
                                K = null,
                                t()
                            }
                        }()
                    }
                    function i(e) {
                        t(e.instance)
                    }
                    function o(t) {
                        return (u || "function" != typeof fetch ? Promise.resolve().then((function() {
                            return q(H)
                        }
                        )) : fetch(H, {
                            credentials: "same-origin"
                        }).then((function(e) {
                            if (!e.ok)
                                throw "failed to load wasm binary file at '" + H + "'";
                            return e.arrayBuffer()
                        }
                        )).catch((function() {
                            return q(H)
                        }
                        ))).then((function(t) {
                            return WebAssembly.instantiate(t, e)
                        }
                        )).then(t, (function(e) {
                            l("failed to asynchronously prepare wasm: " + e),
                            V(e)
                        }
                        ))
                    }
                    if (W++,
                    r.monitorRunDependencies && r.monitorRunDependencies(W),
                    r.instantiateWasm)
                        try {
                            return r.instantiateWasm(e, t)
                        } catch (e) {
                            return l("Module.instantiateWasm callback failed with error: " + e),
                            !1
                        }
                    (u || "function" != typeof WebAssembly.instantiateStreaming || G(H) || "function" != typeof fetch ? o(i) : fetch(H, {
                        credentials: "same-origin"
                    }).then((function(t) {
                        return WebAssembly.instantiateStreaming(t, e).then(i, (function(e) {
                            return l("wasm streaming compile failed: " + e),
                            l("falling back to ArrayBuffer instantiation"),
                            o(i)
                        }
                        ))
                    }
                    ))).catch(n)
                }(),
                r.___wasm_call_ctors = function() {
                    return (r.___wasm_call_ctors = r.asm.N).apply(null, arguments)
                }
                ,
                r._free = function() {
                    return (pt = r._free = r.asm.O).apply(null, arguments)
                }
                ), ht = r._malloc = function() {
                    return (ht = r._malloc = r.asm.P).apply(null, arguments)
                }
                , mt = r.___getTypeName = function() {
                    return (mt = r.___getTypeName = r.asm.R).apply(null, arguments)
                }
                , ft = (r.___embind_register_native_and_builtin_types = function() {
                    return (r.___embind_register_native_and_builtin_types = r.asm.S).apply(null, arguments)
                }
                ,
                r.stackSave = function() {
                    return (ft = r.stackSave = r.asm.T).apply(null, arguments)
                }
                ), gt = r.stackRestore = function() {
                    return (gt = r.stackRestore = r.asm.U).apply(null, arguments)
                }
                , vt = r._setThrew = function() {
                    return (vt = r._setThrew = r.asm.V).apply(null, arguments)
                }
                , Et = r.dynCall_iiiijj = function() {
                    return (Et = r.dynCall_iiiijj = r.asm.W).apply(null, arguments)
                }
                , yt = (r.dynCall_iiijiii = function() {
                    return (r.dynCall_iiijiii = r.asm.X).apply(null, arguments)
                }
                ,
                r.dynCall_vijjjid = function() {
                    return (yt = r.dynCall_vijjjid = r.asm.Y).apply(null, arguments)
                }
                ), wt = r.dynCall_iij = function() {
                    return (wt = r.dynCall_iij = r.asm.Z).apply(null, arguments)
                }
                ;
                r.dynCall_jiji = function() {
                    return (r.dynCall_jiji = r.asm._).apply(null, arguments)
                }
                ;
                function bt(e) {
                    function n() {
                        ut || (ut = !0,
                        r.calledRun = !0,
                        h || (!0,
                        $(N),
                        t(r),
                        r.onRuntimeInitialized && r.onRuntimeInitialized(),
                        function() {
                            if (r.postRun)
                                for ("function" == typeof r.postRun && (r.postRun = [r.postRun]); r.postRun.length; )
                                    e = r.postRun.shift(),
                                    U.unshift(e);
                            var e;
                            $(U)
                        }()))
                    }
                    e = e || s,
                    W > 0 || (!function() {
                        if (r.preRun)
                            for ("function" == typeof r.preRun && (r.preRun = [r.preRun]); r.preRun.length; )
                                e = r.preRun.shift(),
                                x.unshift(e);
                        var e;
                        $(x)
                    }(),
                    W > 0 || (r.setStatus ? (r.setStatus("Running..."),
                    setTimeout((function() {
                        setTimeout((function() {
                            r.setStatus("")
                        }
                        ), 1),
                        n()
                    }
                    ), 1)) : n()))
                }
                if (K = function e() {
                    ut || bt(),
                    ut || (K = e)
                }
                ,
                r.run = bt,
                r.preInit)
                    for ("function" == typeof r.preInit && (r.preInit = [r.preInit]); r.preInit.length > 0; )
                        r.preInit.pop()();
                return bt(),
                e.ready
            }
        }();
        e.exports = t,
        t.getUrl = function(e) {
            return "https://st.mycdn.me/static/libvpx/2-0-9/" + e
        }
    }
    ,
    988882: (e,t,n)=>{
        "use strict";
        function r(e) {
            return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        n.d(t, {
            Config: ()=>Y,
            Connect: ()=>fe,
            ConnectEvents: ()=>ge,
            Messenger: ()=>Ce
        });
        var i = ["vk.com", "vk.ru"]
          , o = ["agreements", "promo", "vkc_behavior", "vkc_auth_action", "vkc_brand", "vkc_display_mode", "service_groups", "external_device_id"]
          , a = !("undefined" == typeof window || !window.document || !window.document.createElement)
          , s = a && !!window.addEventListener;
        function c(e) {
            return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e
        }
        function _(e, t) {
            return e(t = {
                exports: {}
            }, t.exports),
            t.exports
        }
        var l = c(_((function(e) {
            function t(n) {
                return "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? (e.exports = t = function(e) {
                    return typeof e
                }
                ,
                e.exports.default = e.exports,
                e.exports.__esModule = !0) : (e.exports = t = function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                ,
                e.exports.default = e.exports,
                e.exports.__esModule = !0),
                t(n)
            }
            e.exports = t,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        )))
          , u = function() {};
        if (s)
            try {
                var d = Object.defineProperty({}, "passive", {
                    get: function() {}
                });
                window.addEventListener("test", u, d),
                window.removeEventListener("test", u, d)
            } catch (r) {}
        !function() {
            if (!a)
                return !1;
            try {
                document.createElement("div").scrollTo({
                    top: 0,
                    get behavior() {
                        return !0,
                        "smooth"
                    }
                })
            } catch (e) {}
        }();
        var p = _((function(e) {
            e.exports = function(e, t) {
                (null == t || t > e.length) && (t = e.length);
                for (var n = 0, r = new Array(t); n < t; n++)
                    r[n] = e[n];
                return r
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        ));
        c(p);
        var h = _((function(e) {
            e.exports = function(e) {
                if (Array.isArray(e))
                    return p(e)
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        ));
        c(h);
        var m = _((function(e) {
            e.exports = function(e) {
                if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                    return Array.from(e)
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        ));
        c(m);
        var f = _((function(e) {
            e.exports = function(e, t) {
                if (e) {
                    if ("string" == typeof e)
                        return p(e, t);
                    var n = Object.prototype.toString.call(e).slice(8, -1);
                    return "Object" === n && e.constructor && (n = e.constructor.name),
                    "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? p(e, t) : void 0
                }
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        ));
        c(f);
        var g = _((function(e) {
            e.exports = function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        ));
        c(g),
        c(_((function(e) {
            e.exports = function(e) {
                return h(e) || m(e) || f(e) || g()
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        )));
        var v = c(_((function(e) {
            e.exports = function(e, t, n) {
                return t in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n,
                e
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        )));
        function E(e, t) {
            var n = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                n.push.apply(n, r)
            }
            return n
        }
        function y(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = null != arguments[t] ? arguments[t] : {};
                t % 2 ? E(Object(n), !0).forEach((function(t) {
                    v(e, t, n[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : E(Object(n)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t))
                }
                ))
            }
            return e
        }
        var w = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            if ("object" !== l(e) || null === e)
                return "";
            t = y({
                encode: !0
            }, t);
            var n = function(e) {
                return t.encode ? encodeURIComponent(e) : String(e)
            };
            return Object.keys(e).reduce((function(r, i) {
                var o = e[i];
                return void 0 === o ? r : null === o ? (t.skipNull || r.push([n(i), ""].join("=")),
                r) : Array.isArray(o) ? (o.map((function(e) {
                    r.push("".concat(n(i), "[]=").concat(n(e)))
                }
                )).join(),
                r) : (r.push([n(i), n(o)].join("=")),
                r)
            }
            ), []).join("&")
        };
        function b(e) {
            return w(e)
        }
        function C(e) {
            return Object.keys(e).filter((function(e) {
                return o.includes(e)
            }
            ))
        }
        function T(e) {
            var t;
            return Boolean(null === (t = C(e)) || void 0 === t ? void 0 : t.length)
        }
        function D(e) {
            var t = function(e) {
                return C(e).reduce((function(t, n) {
                    return t[n] = e[n],
                    t
                }
                ), {})
            }(e);
            return btoa(JSON.stringify(t))
        }
        function A(e, t) {
            var n, r, i = document.createElement("iframe");
            for (var o in e && (i.src = e),
            i.style.cssText = null !== (n = null == t ? void 0 : t.cssText) && void 0 !== n ? n : "",
            i.width = "100%",
            i.height = "100%",
            i.style.border = "none",
            null == t ? void 0 : t.properties)
                t && t.properties.hasOwnProperty(o) && (i[o] = null !== (r = t.properties[o]) && void 0 !== r ? r : "");
            return i
        }
        function S() {
            for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
            var n = function(e) {
                return e && "object" === r(e)
            };
            return e.reduce((function(e, t) {
                return Object.keys(t).forEach((function(r) {
                    var i = e[r]
                      , o = t[r];
                    Array.isArray(i) && Array.isArray(o) ? e[r] = i.concat.apply(i, o) : n(i) && n(o) ? e[r] = S(i, o) : e[r] = o
                }
                )),
                e
            }
            ), {})
        }
        function P(e, t) {
            return void 0 === e ? t : "number" != typeof e ? e ? 1 : 0 : e
        }
        function O(e, t) {
            return e && "object" === r(e) ? Object.keys(e).reduce((function(n, r) {
                return t.includes(r) ? (n[r] = e[r],
                n) : n
            }
            ), {}) : e
        }
        c(_((function(e) {
            e.exports = function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        ))),
        c(_((function(e) {
            function t(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var r = t[n];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            e.exports = function(e, n, r) {
                return n && t(e.prototype, n),
                r && t(e, r),
                e
            }
            ,
            e.exports.default = e.exports,
            e.exports.__esModule = !0
        }
        )));
        var I, M, R, L = new (function() {
            function e() {
                this.savedStyles = [],
                this.bodyScrollYValue = 0,
                this.isFreezed = !1
            }
            return e.prototype.freezeBodyOverflow = function() {
                if (!this.isFreezed) {
                    this.isFreezed = !0;
                    var e = (n = window.document.documentElement.clientWidth,
                    Math.abs(window.innerWidth - n))
                      , t = parseInt(window.getComputedStyle(window.document.body).paddingRight, 10) || 0;
                    this.bodyScrollYValue = window.pageYOffset || window.scrollY,
                    this.savedStyles = [],
                    this.savedStyles.push({
                        value: window.document.body.style.paddingRight,
                        property: "padding-right"
                    }, {
                        value: window.document.body.style.overflow,
                        property: "overflow"
                    }, {
                        value: window.document.body.style.overflowX,
                        property: "overflow-x"
                    }, {
                        value: window.document.body.style.overflowY,
                        property: "overflow-y"
                    }),
                    window.document.body.style.setProperty("overflow", "hidden"),
                    window.document.body.style.setProperty("padding-right", e + t + "px")
                }
                var n
            }
            ,
            e.prototype.restoreBodyOverflow = function() {
                this.isFreezed && (this.savedStyles.forEach((function(e) {
                    var t = e.value
                      , n = e.property;
                    t ? window.document.body.style.setProperty(n, t) : window.document.body.style.removeProperty(n)
                }
                )),
                window.scrollTo(0, this.bodyScrollYValue),
                this.isFreezed = !1)
            }
            ,
            e
        }());
        !function(e) {
            e.OPEN = "VKSDKOpen",
            e.CLOSE = "VKSDKClose",
            e.LOGOUT = "VKSDKLogout",
            e.GET_CAPTCHA = "VKSDKGetCaptcha",
            e.AUTH_NEEDED = "VKSDKAuthNeeded",
            e.UPDATE_PARAMS = "VKSDKUpdateParams",
            e.REQUEST_SUPERAPP_TOKEN = "VKSDKRequestSuperAppToken",
            e.ERROR = "VKSDKError"
        }(I || (I = {})),
        function(e) {
            e.INIT = "VKSDKInit"
        }(M || (M = {})),
        function(e) {
            e[e.UNKNOWN = 1] = "UNKNOWN",
            e[e.MISSING_PARAM = 2] = "MISSING_PARAM",
            e[e.CONNECTION_LOST = 3] = "CONNECTION_LOST",
            e[e.USER_DENIED = 4] = "USER_DENIED",
            e[e.INVALID_PARAMS = 5] = "INVALID_PARAMS",
            e[e.CUSTOM = 6] = "CUSTOM",
            e[e.LOADING_ERROR = 7] = "LOADING_ERROR",
            e[e.CONNECT_WINDOW_CLOSED = 7] = "CONNECT_WINDOW_CLOSED",
            e[e.CONNECT_WINDOW_NOT_OPENED = 8] = "CONNECT_WINDOW_NOT_OPENED",
            e[e.CONNECT_DOMAIN_NOT_ALLOWED = 9] = "CONNECT_DOMAIN_NOT_ALLOWED",
            e[e.CONNECT_UNKNOWN_SDK_MESSAGE = 10] = "CONNECT_UNKNOWN_SDK_MESSAGE",
            e[e.CONNECT_CLIENT_SDK_ERROR = 11] = "CONNECT_CLIENT_SDK_ERROR",
            e[e.OLD_MISSING_PARAM = 100] = "OLD_MISSING_PARAM"
        }(R || (R = {}));
        var k, B, x, N, U = function(e, t) {
            return 'Wrong "' + e + '" param. ' + (t || "")
        }, W = function(e) {
            return 'URL domain "' + e + '" is not allowed.'
        }, F = function(e) {
            return "This SDK message is unknown: " + e
        }, K = function(e) {
            return e.error + ";" + e.errorCode
        }, V = function(e, t) {
            return (V = Object.setPrototypeOf || {
                __proto__: []
            }instanceof Array && function(e, t) {
                e.__proto__ = t
            }
            || function(e, t) {
                for (var n in t)
                    Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n])
            }
            )(e, t)
        }, H = function() {
            return (H = Object.assign || function(e) {
                for (var t, n = 1, r = arguments.length; n < r; n++)
                    for (var i in t = arguments[n])
                        Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                return e
            }
            ).apply(this, arguments)
        };
        function j(e) {
            return e = e || Object.create(null),
            {
                on: function(t, n) {
                    (e[t] || (e[t] = [])).push(n)
                },
                off: function(t, n) {
                    e[t] && e[t].splice(e[t].indexOf(n) >>> 0, 1)
                },
                emit: function(t, n) {
                    (e[t] || []).slice().map((function(e) {
                        e(n)
                    }
                    )),
                    (e["*"] || []).slice().map((function(e) {
                        e(t, n)
                    }
                    ))
                }
            }
        }
        !function(e) {
            e.APP_CLOSE = "VKWebAppClose",
            e.APP_READY = "VKSDKMiniAppReady",
            e.RESIZE = "VKSDKMiniAppResize",
            e.APP_INIT_CONFIG = "VKSDKMiniAppInitConfig",
            e.OPEN_APP = "VKWebAppOpenApp",
            e.OPEN_PAY_FORM = "VKWebAppOpenPayForm",
            e.ACTION_DONE = "VKWebAppActionDone",
            e.SET_TITLE = "VKWebAppSetTitle",
            e.AUTH_BY_EXCHANGE_TOKEN = "VKWebAppAuthByExchangeToken",
            e.FORCE_LOGOUT = "VKWebAppForceLogout"
        }(k || (k = {})),
        function(e) {
            e.OPEN = "open",
            e.HIDE = "hide",
            e.CLOSE = "close",
            e.SHOW = "show",
            e.MESSAGE = "message",
            e.CREATE_APP = "createapp"
        }(B || (B = {})),
        function(e) {
            e.SUPERAPP_TOKEN = "VKSDKGeneralSuperAppToken",
            e.AUTH_NEEDED = "VKSDKGeneralAuthNeeded",
            e.OPEN_APP = "VKSDKGeneralOpenApp"
        }(x || (x = {})),
        function(e) {
            e.SUPERAPP_TOKEN_CHANGE_V2 = "superAppTokenV2",
            e.SUPERAPP_TOKEN_CHANGE = "superAppToken"
        }(N || (N = {}));
        var G, q = {
            appId: 0,
            superAppToken: "",
            superAppTokenV2: "",
            loginDomain: "login.vk.com",
            oauthDomain: "oauth.vk.com",
            connectDomain: "id.vk.com",
            _debug: !1,
            _localhost: !1
        }, $ = {}, Y = function() {
            function e() {}
            return e.init = function(e) {
                if (!e.appId)
                    throw new Error("appId required");
                q.appId = e.appId,
                q.superAppToken = e.superAppToken || "",
                q.superAppTokenV2 = e.superAppTokenV2 || "",
                q.loginDomain = e.loginDomain || "login.vk.com",
                q.oauthDomain = e.oauthDomain || "oauth.vk.com",
                q.connectDomain = e.connectDomain || "id.vk.com",
                q.appSettings = e.appSettings,
                q._debug = !!e._debug,
                q._localhost = !!e._localhost
            }
            ,
            e.get = function() {
                return q
            }
            ,
            e.setSuperAppToken = function(t, n) {
                void 0 === n && (n = {}),
                2 === n.version ? (q.superAppTokenV2 = t,
                e.events.emit(N.SUPERAPP_TOKEN_CHANGE_V2, t)) : (q.superAppToken = t,
                e.events.emit(N.SUPERAPP_TOKEN_CHANGE, t))
            }
            ,
            e.onRequestSuperAppToken = function(e) {
                $.requestSuperAppToken = e
            }
            ,
            e._requestSuperAppToken = function(t, n) {
                var r;
                void 0 === n && (n = {}),
                $.requestSuperAppToken && (r = $.requestSuperAppToken(t, n)),
                r && r.then((function(t) {
                    return e.setSuperAppToken(t, n)
                }
                )).catch(console.error)
            }
            ,
            e.onAuth = function(e) {
                $.auth = e
            }
            ,
            e._auth = function(t) {
                var n;
                void 0 === t && (t = {}),
                $.auth && (n = $.auth()),
                n && n.then((function(n) {
                    e.setSuperAppToken(n, t)
                }
                )).catch(console.error)
            }
            ,
            e.onOpenApp = function(e) {
                $.openApp = e
            }
            ,
            e._openApp = function(e) {
                $.openApp && $.openApp(e.app)
            }
            ,
            e.onLogout = function(e) {
                $.logout = e
            }
            ,
            e._logout = function() {
                $.logout && $.logout()
            }
            ,
            e.events = j(),
            e
        }(), z = function(e) {
            var t = this;
            this.handler = function() {
                return {}
            }
            ,
            this.destroy = function() {
                delete t.config,
                window.removeEventListener("message", t.handleMessage)
            }
            ,
            this.onMessage = function(e) {
                t.handler = e
            }
            ,
            this.sendMessage = function(e) {
                var n;
                null === (n = t.config.iframe.contentWindow) || void 0 === n || n.postMessage(H({
                    type: "vk-sak-sdk"
                }, e), t.config.origin)
            }
            ,
            this.handleMessage = function(e) {
                t.config.origin && e.origin === t.config.origin && e.source === t.config.iframe.contentWindow && e.data && "vk-sak-sdk" === e.data.type && t.handler(e.data)
            }
            ,
            this.config = e,
            window.addEventListener("message", this.handleMessage)
        }, X = function e(t) {
            var n = this;
            this.readyPromiseResolve = null,
            this.readyPromise = null,
            this.child = null,
            this.initialTitle = window.document.title,
            this.open = function(e, t) {
                return n.loading ? (n.iframe.src = n.getMiniAppUrl(e, t),
                n.loading = new Promise((function(e) {
                    n.iframe.onload = function() {
                        n.iframe.onload = null,
                        e()
                    }
                }
                )),
                n.readyPromise = new Promise((function(e) {
                    return n.readyPromiseResolve = e
                }
                ))) : n.preload(e, t).catch(console.error),
                n.iframe.style.display = "block",
                n.params.stackMode || L.freezeBodyOverflow(),
                n.loading.then(n.handleResize).catch(console.error),
                n.events.emit(B.OPEN),
                n.readyPromise
            }
            ,
            this.hide = function() {
                n.iframe.style.display = "none",
                n.params.stackMode || L.restoreBodyOverflow(),
                n.events.emit(B.HIDE)
            }
            ,
            this.close = function(e) {
                window.document.title !== n.initialTitle && (window.document.title = n.initialTitle),
                n.params.stackMode || L.restoreBodyOverflow(),
                n.iframe && n.iframe.remove(),
                n.bridge && n.bridge.destroy(),
                delete n.iframe,
                delete n.bridge,
                Y.events.off(N.SUPERAPP_TOKEN_CHANGE, n.onSuperAppToken),
                window.removeEventListener("resize", n.handleResize),
                n.events.emit(B.CLOSE, e)
            }
            ,
            this.show = function() {
                if (!n.loading)
                    throw new Error('App is not loaded, use "open" or "preload" methods');
                n.iframe.style.display = "block",
                n.params.stackMode || L.freezeBodyOverflow(),
                n.events.emit(B.SHOW)
            }
            ,
            this.preload = function(e, t) {
                var r = document.createElement("iframe")
                  , i = window.innerHeight
                  , o = isFinite(n.params.zIndex) ? n.params.zIndex : 999999;
                return r.src = n.getMiniAppUrl(e, t),
                r.setAttribute("allow", "geolocation"),
                r.style.cssText = "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + i + "px;\n      min-height: " + i + "px;\n      border: none;\n      z-index: " + o + ";\n    ",
                n.iframe = r,
                document.body.appendChild(n.iframe),
                n.bridge = new z({
                    iframe: n.iframe,
                    origin: "https://" + Y.get().connectDomain
                }),
                n.loading = new Promise((function(e) {
                    r.onload = function() {
                        r.onload = null,
                        e()
                    }
                }
                )),
                n.readyPromise = new Promise((function(e) {
                    return n.readyPromiseResolve = e
                }
                )),
                n.bridge.onMessage(n.handleMessage),
                Y.events.on(N.SUPERAPP_TOKEN_CHANGE, n.onSuperAppToken),
                window.addEventListener("resize", n.handleResize),
                n.loading
            }
            ,
            this.sendMessage = function(e) {
                n.bridge.sendMessage(e)
            }
            ,
            this.onSuperAppToken = function(e) {
                n.bridge.sendMessage({
                    handler: x.SUPERAPP_TOKEN,
                    params: {
                        result: e
                    }
                })
            }
            ,
            this.handleMessage = function(e) {
                switch (e.handler) {
                case k.APP_CLOSE:
                    n.hide();
                    break;
                case k.APP_READY:
                    n.resolveReadyPromise(),
                    n.handleUpdateConfig();
                    break;
                case k.OPEN_APP:
                    n.openMiniapp(e.params);
                    break;
                case k.OPEN_PAY_FORM:
                    n.openPayForm(e.params);
                    break;
                case k.SET_TITLE:
                    n.setTitle(e.params);
                    break;
                case k.AUTH_BY_EXCHANGE_TOKEN:
                    n.onAuthByExchangeToken();
                    break;
                case k.FORCE_LOGOUT:
                    n.onForceLogout();
                    break;
                case x.SUPERAPP_TOKEN:
                    Y._requestSuperAppToken(e.params);
                    break;
                case x.AUTH_NEEDED:
                    Y._auth();
                    break;
                default:
                    n.events.emit(B.MESSAGE, e)
                }
            }
            ,
            this.handleResize = function() {
                if (n.iframe) {
                    var e = innerWidth
                      , t = innerHeight;
                    n.iframe.style.height = t + "px",
                    n.iframe.style.minHeight = t + "px",
                    n.bridge.sendMessage({
                        handler: k.RESIZE,
                        params: {
                            viewport_width: e,
                            viewport_height: t
                        }
                    })
                }
            }
            ,
            this.handleUpdateConfig = function() {
                n.bridge.sendMessage({
                    handler: k.APP_INIT_CONFIG,
                    params: {
                        fullMode: n.params.fullMode,
                        hideMenu: n.params.hideMenu
                    }
                })
            }
            ,
            this.getMiniAppUrl = function(e, t) {
                var r = Y.get()
                  , i = r.connectDomain
                  , o = r.appId
                  , a = r.superAppToken
                  , s = r._debug;
                return "https://" + i + "/mini_app?" + b({
                    app: n.params.app,
                    host_app_id: o,
                    debug: s ? "1" : "",
                    localhost: s ? "1" : "",
                    superapp_token: a,
                    app_query: e ? JSON.stringify(e) : "",
                    app_hash: t || ""
                })
            }
            ,
            this.resolveReadyPromise = function() {
                n.readyPromise && n.readyPromiseResolve && (n.readyPromiseResolve(),
                n.readyPromise = null,
                n.readyPromiseResolve = null)
            }
            ,
            this.openMiniapp = function(t) {
                n.child = new e({
                    app: t.app_id,
                    stackMode: n.params.stackMode
                }),
                n.events.emit(B.CREATE_APP, {
                    app: n.child,
                    location: t.location
                })
            }
            ,
            this.openPayForm = function(t) {
                var r = H({}, t.params);
                r.data && (r.data = JSON.stringify(r.data));
                var i = H(H({}, r), {
                    app_id: t.app_id,
                    action: t.action
                })
                  , o = new e({
                    app: 6217559,
                    stackMode: n.params.stackMode
                });
                o.open(i).then((function() {
                    return n.hide()
                }
                )).catch(console.error),
                o.events.on(B.MESSAGE, (function(e) {
                    n.handleVKPayFormMessage(e),
                    o.close(),
                    n.show()
                }
                )),
                o.events.on(B.HIDE, (function() {
                    o.close(),
                    n.close()
                }
                ))
            }
            ,
            this.setTitle = function(e) {
                window.document.title = e.title
            }
            ,
            this.onAuthByExchangeToken = function() {
                n.close({
                    closedByExchangeToken: !0
                })
            }
            ,
            this.onForceLogout = function() {
                n.close({
                    closedByForceLogout: !0
                })
            }
            ,
            this.handleVKPayFormMessage = function(e) {
                e.handler === k.ACTION_DONE && n.sendMessage(e)
            }
            ,
            this.params = H(H({}, t), {
                app: "number" == typeof t.app ? "app" + t.app : t.app
            }),
            this.events = j()
        }, Q = (function() {
            function e() {
                this.stack = []
            }
            e.prototype.removeMiniApp = function(e) {
                var t = e.app
                  , n = this.stack.lastIndexOf(t);
                if (n > -1 && n === this.stack.length - 1)
                    if (this.stack.splice(n, 1),
                    this.stack.length) {
                        this.stack[this.stack.length - 1].show();
                        var r = this.stack[this.stack.length - 2];
                        setTimeout((function() {
                            return null == r ? void 0 : r.hide()
                        }
                        ), 0)
                    } else
                        L.restoreBodyOverflow()
            }
            ,
            e.prototype.makeHandleMiniAppClose = function(e) {
                var t = this
                  , n = e.app;
                return function() {
                    t.removeMiniApp({
                        app: n
                    })
                }
            }
            ,
            e.prototype.makeHandleMiniAppHide = function(e) {
                var t = this
                  , n = e.app;
                return function() {
                    var e = t.stack.lastIndexOf(n);
                    e > -1 && e === t.stack.length - 1 && setTimeout((function() {
                        return n.close()
                    }
                    ), 0)
                }
            }
            ,
            e.prototype.handleMiniAppCreate = function(e) {
                var t = e.app
                  , n = e.query
                  , r = e.hash;
                this.stack.push(t),
                t.open(n, r).catch(console.error),
                t.events.on(B.CREATE_APP, this.handleMiniAppCreate.bind(this)),
                t.events.on(B.HIDE, this.makeHandleMiniAppHide({
                    app: t
                })),
                t.events.on(B.CLOSE, this.makeHandleMiniAppClose({
                    app: t
                })),
                L.freezeBodyOverflow();
                var i = this.stack[this.stack.length - 2];
                return setTimeout((function() {
                    null == i || i.hide()
                }
                ), 0),
                t
            }
            ,
            Object.defineProperty(e.prototype, "length", {
                get: function() {
                    return this.stack.length
                },
                enumerable: !1,
                configurable: !0
            }),
            e.prototype.open = function(e) {
                var t = e.app
                  , n = e.query
                  , r = e.hash
                  , i = new X({
                    app: t,
                    stackMode: !0
                });
                return this.handleMiniAppCreate({
                    app: i,
                    query: n,
                    hash: r
                }),
                i
            }
            ,
            e.prototype.close = function() {
                var e = this.stack;
                this.stack.splice(0),
                e.reverse().forEach((function(e) {
                    return e.close()
                }
                )),
                L.restoreBodyOverflow()
            }
        }(),
        "ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"), J = function() {
            for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 21, t = "", n = e; n--; )
                t += Q[64 * Math.random() | 0];
            return t
        };
        !function(e) {
            e.STATIC_MAP = "VKSDKRequestToGeoservice:staticmap/png/",
            e.SEARCH = "VKSDKRequestToGeoservice:search",
            e.OVERALL = "VKSDKRequestToGeoservice:overall",
            e.DIRECTIONS = "VKSDKRequestToGeoservice:directions",
            e.ISO = "VKSDKRequestToGeoservice:iso"
        }(G || (G = {}));
        !function() {
            function e(e) {
                var t = this;
                this.apiKey = e.apiKey;
                var n = document.createElement("iframe")
                  , r = Y.get().appId;
                n.src = this.getGeoserviceProxyUrl({
                    app_id: r
                }),
                n.style.cssText = "\n      display: none;\n    ",
                this.iframe = n,
                document.body.appendChild(this.iframe),
                this.bridge = new z({
                    iframe: this.iframe,
                    origin: "https://" + Y.get().connectDomain
                }),
                this.requestMap = {},
                this.bridge.onMessage((function(e) {
                    var n = e.params
                      , r = n.requestID
                      , i = n.response;
                    t.requestMap[r].resolve(i),
                    delete t.requestMap[r]
                }
                ))
            }
            e.prototype.setApiKey = function(e) {
                this.apiKey = e
            }
            ,
            e.prototype.getGeoserviceProxyUrl = function(e) {
                var t = Y.get()
                  , n = t.connectDomain
                  , r = t._debug;
                return "https://" + n + "/geoservice?" + b(H(H({}, e || {}), {
                    origin: location.protocol + "//" + location.host,
                    localhost: String(location.host.includes("localhost")),
                    debug: location.host.includes("localhost") ? 1 : String(r)
                }))
            }
            ,
            e.prototype.prepareAnswer = function(e, t, n) {
                var r = this
                  , i = J();
                return this.bridge.sendMessage({
                    handler: "VKSDKRequestToGeoservice:" + e,
                    params: H(H({}, t), {
                        api_key: this.apiKey,
                        wrapRequestInJSON: n,
                        requestID: i
                    })
                }),
                new Promise((function(e, t) {
                    r.requestMap[i] = {
                        resolve: e,
                        reject: t
                    }
                }
                ))
            }
            ,
            e.prototype.getStaticMap = function(e) {
                return this.prepareAnswer("staticmap/png/", e)
            }
            ,
            e.prototype.encodeCoords = function(e) {
                return this.prepareAnswer("search", e)
            }
            ,
            e.prototype.decodeCoords = function(e) {
                return this.prepareAnswer("overall", e)
            }
            ,
            e.prototype.getDirections = function(e) {
                return this.prepareAnswer("directions", e, !0)
            }
            ,
            e.prototype.getISO = function(e) {
                return this.prepareAnswer("iso", e, !0)
            }
        }();
        var Z = ["extend_token", "login_with_user", "login_silent_user", "__sferum_invite_link", "registration_with_phone", "registration_with_email", "validate_phone", "bind_ok_account", "no_password_flow"];
        function ee(e) {
            return e && Z.includes(e.name) ? btoa(JSON.stringify(e)) : ""
        }
        function te(e, t) {
            void 0 === t && (t = "auth");
            var n = Y.get()
              , r = n.appId
              , i = n.connectDomain
              , o = n.appSettings
              , a = H({
                app_id: r,
                response_type: "silent_token",
                v: "1.46.0"
            }, e);
            return o && T(o) && (a.app_settings = D(o)),
            "https://" + i + "/" + t + "?" + b(a)
        }
        var ne, re = [0, 1, 3, 4, 6, 15, 16, 82];
        !function(e) {
            e.Default = "default",
            e.NamePhone = "name_phone",
            e.PhoneName = "phone_name"
        }(ne || (ne = {}));
        var ie, oe = [ne.Default, ne.NamePhone, ne.PhoneName];
        !function(e) {
            e.Primary = "primary",
            e.Flat = "flat"
        }(ie || (ie = {}));
        var ae, se, ce, _e, le, ue, de, pe = [ie.Primary, ie.Flat];
        !function(e) {
            e.SHOW_DATA_POLICY = "VKSDKOneTapAuthConnectDataPolicy",
            e.HIDE_DATA_POLICY = "VKSDKOneTapAuthDataPolicyClose",
            e.DATA_POLICY_RESULT = "VKSDKOneTapAuthDataPolicyResult",
            e.SHOW_CAPTCHA = "VKSDKOneTapAuthDataPolicyShowCaptcha"
        }(ae || (ae = {})),
        function(e) {
            e.SHOW_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsShow",
            e.HIDE_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsHide",
            e.ACCEPT_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsAccept",
            e.DECLINE_POLICY_AGREEMENTS = "VKSDKOneTapAuthPolicyAgreementsDecline",
            e.POLICY_AGREEMENTS_ERROR = "VKSDKOneTapAuthPolicyAgreementsError",
            e.SHOW_DATA_POLICY = "VKSDKOneTapAuthPolicyAgreementsShowDataPolicy"
        }(se || (se = {})),
        function(e) {
            e.CAPTCHA_SUCCESS = "VKSDKAuthCaptchaSuccess",
            e.CAPTCHA_FAIL = "VKSDKAuthCaptchaFail"
        }(ce || (ce = {})),
        function(e) {
            e.PHONE_VALIDATION_NEEDED = "VKSDKOneTapAuthPhoneValidationNeeded",
            e.FULL_AUTH_NEEDED = "VKSDKOneTapAuthFullAuthNeeded",
            e.AUTH_DATA_LOADED = "VKSDKOneTapAuthDataLoaded",
            e.NOT_AUTHORIZED = "VKSDKOneTapAuthNotAuthorized",
            e.LOGIN_SUCCESS = "VKSDKOneTapAuthLoginSuccess",
            e.RESIZE_FRAME = "VKSDKOneTapResizeFrame",
            e.SHOW_CAPTCHA = "VKSDKOneTapShowCaptcha",
            e.VALIDATE_CAPTCHA = "VKSDKOneTapValidateCaptcha"
        }(_e || (_e = {})),
        function(e) {
            e.CLOSE_AUTH = "VKSDKOneTapAuthClose",
            e.ADAPTIVITY_CHANGE = "VKSDKFloatingOneTapAdaptivityChange",
            e.ADAPTIVITY_CHANGED = "VKSDKFloatingOneTapAdaptivityChanged"
        }(le || (le = {})),
        function(e) {
            e.SHOW_LOGIN = "VKSDKButtonOneTapAuthShowLogin",
            e.SHOW_LOGIN_OPTIONS = "VKSDKButtonOneTapAuthShowLoginOptions",
            e.SHOW_AGREEMENTS_DIALOG = "VKSDKButtonOneTapAuthShowAgreementsDialog",
            e.START_AUTHORIZE = "VKSDKButtonOneTapAuthStartAuthorize"
        }(ue || (ue = {})),
        function(e) {
            e.WRONG_TOKEN = "VKSDKBindAccountErrorWrongToken",
            e.ALREADY_BIND = "VKSDKBindAccountErrorAlreadyBind"
        }(de || (de = {}));
        var he, me, fe = function() {
            function e() {}
            return e.flags = null,
            e.silentAuth = function() {
                var e = Y.get()
                  , t = "https://" + e.loginDomain + "/?act=connect&app_id=" + e.appId + "&response_type=silent_token&uuid=" + J() + "&v=1.46.0"
                  , n = new XMLHttpRequest;
                return n.open("GET", t, !0),
                n.responseType = "json",
                n.withCredentials = !0,
                new Promise((function(e, t) {
                    n.onload = function() {
                        var r = n.response
                          , i = n.status >= 200 && n.status < 300;
                        r && i ? e({
                            provider: "vk",
                            payload: n.response
                        }) : t()
                    }
                    ,
                    n.onerror = function() {
                        t()
                    }
                    ,
                    n.send()
                }
                ))
            }
            ,
            e.oneTapAuth = function(t, n) {
                if (console.warn("Connect.oneTapAuth method is deprecated. Use Connect.floatingOneTapAuth and Connect.buttonOneTapAuth methods."),
                !["floating", "button"].includes(t))
                    return null;
                switch (t) {
                case "button":
                    return e.buttonOneTapAuth(n);
                case "floating":
                    return e.floatingOneTapAuth(n);
                default:
                    return null
                }
            }
            ,
            e.floatingOneTapAuth = function(t) {
                var n = function() {
                    var e, t = window.innerWidth, n = t <= 768;
                    return {
                        destroy: function() {
                            return window.removeEventListener("resize", e)
                        },
                        isAdaptive: function() {
                            return n
                        },
                        observe: function(r) {
                            e = function() {
                                var e = window.innerWidth;
                                t > 768 && e <= 768 ? r(n = !0) : t <= 768 && e > 768 && r(n = !1),
                                t = e
                            }
                            ,
                            window.addEventListener("resize", e)
                        }
                    }
                }()
                  , r = function(e, t) {
                    var n, r, i, o = {}, a = e ? "314px" : "334px", s = e ? "\n      display: none;\n      position: fixed;\n      bottom: 0;\n      right: 50%;\n      transform: translate(50%, 0);\n      max-width: 468px;\n      width: 100%;\n      height: " + a + ";\n    " : "\n        display: none;\n        position: fixed;\n        top: 0;\n        right: 0;\n        max-width: 400px;\n        width: 100%;\n        height: " + a + ";\n      ";
                    return (null === (n = null == t ? void 0 : t.styles) || void 0 === n ? void 0 : n.zIndex) && isFinite(null === (r = null == t ? void 0 : t.styles) || void 0 === r ? void 0 : r.zIndex) && (s += "z-index: " + (null === (i = null == t ? void 0 : t.styles) || void 0 === i ? void 0 : i.zIndex) + ";"),
                    t && (o.skip_success = P(t.skipSuccess, 0)),
                    {
                        pageUrl: "floating_one_tap_auth",
                        pageUrlParams: H({
                            adaptive: e ? 1 : 0
                        }, o),
                        frameStyles: s
                    }
                }(n.isAdaptive(), t.options);
                if (!r)
                    throw new Error("options were not set");
                var i = J()
                  , o = A(te(H({
                    origin: location.protocol + "//" + location.host,
                    uuid: i
                }, r.pageUrlParams), r.pageUrl), {
                    cssText: r.frameStyles
                })
                  , a = new z({
                    iframe: o,
                    origin: "https://" + Y.get().connectDomain
                });
                n.observe((function(e) {
                    a.sendMessage({
                        handler: le.ADAPTIVITY_CHANGE,
                        params: {
                            uuid: i,
                            is_adaptive: e
                        }
                    }),
                    e ? (o.style.maxWidth = "468px",
                    o.style.top = "auto",
                    o.style.bottom = "0",
                    o.style.right = "50%",
                    o.style.transform = "translate(50%, 0)") : (o.style.maxWidth = "400px",
                    o.style.top = "0",
                    o.style.bottom = "auto",
                    o.style.right = "0",
                    o.style.transform = "none"),
                    o.style.display = "none"
                }
                )),
                document.body.appendChild(o);
                var s = function() {
                    a.sendMessage({
                        handler: _e.RESIZE_FRAME,
                        params: {
                            uuid: i
                        }
                    })
                };
                window.addEventListener("resize", s);
                var c = function() {
                    o && (o.remove(),
                    o = null),
                    window.removeEventListener("resize", s),
                    n && n.destroy(),
                    a.destroy()
                }
                  , _ = new Promise((function(n) {
                    a.onMessage((function(r) {
                        if (r.params.uuid === i)
                            switch (r.handler) {
                            case _e.NOT_AUTHORIZED:
                                t.callback({
                                    type: r.handler,
                                    payload: {
                                        uuid: i,
                                        error: "not_authorized"
                                    }
                                }),
                                c(),
                                n(r.handler);
                                break;
                            case _e.RESIZE_FRAME:
                                o.style.height = r.params.height + "px";
                                break;
                            case le.CLOSE_AUTH:
                                t.callback({
                                    type: r.handler,
                                    payload: {
                                        uuid: i
                                    }
                                }),
                                c();
                                break;
                            case le.ADAPTIVITY_CHANGED:
                                o.style.display = "block";
                                break;
                            case _e.AUTH_DATA_LOADED:
                                o.style.display = "block",
                                n(r.handler);
                            default:
                                e.handleOneTapEvents(r, a, t)
                            }
                    }
                    ))
                }
                ));
                return {
                    getFrame: function() {
                        return o
                    },
                    destroy: c,
                    authReadyPromise: _
                }
            }
            ,
            e.buttonOneTapAuth = function(t) {
                var n = function(e) {
                    var t, n, r, i, o, a, s = {}, c = 44, _ = 56;
                    return e && (s.display = e.displayMode && oe.includes(e.displayMode) ? e.displayMode : ne.Default,
                    s.button_skin = e.buttonSkin && pe.includes(e.buttonSkin) ? e.buttonSkin : ie.Primary,
                    s.show_agreements = P(e.showAgreements, 0),
                    s.show_alternative_login = P(e.showAlternativeLogin, 0),
                    s.show_agreements_dialog = P(e.showAgreementsDialog, 1),
                    void 0 !== (null === (t = e.buttonStyles) || void 0 === t ? void 0 : t.height) && (c = Number(null === (n = e.buttonStyles) || void 0 === n ? void 0 : n.height),
                    _ = Number(null === (r = e.buttonStyles) || void 0 === r ? void 0 : r.height) + 12,
                    s.style_height = null === (i = e.buttonStyles) || void 0 === i ? void 0 : i.height),
                    void 0 !== (null === (o = e.buttonStyles) || void 0 === o ? void 0 : o.borderRadius) && (s.style_border_radius = null === (a = e.buttonStyles) || void 0 === a ? void 0 : a.borderRadius),
                    void 0 !== e.langId && (s.lang_id = re.includes(e.langId) ? e.langId : 0),
                    c += s.show_alternative_login ? _ : 0,
                    c += s.show_agreements ? 80 : 0),
                    {
                        pageUrl: "button_one_tap_auth",
                        pageUrlParams: s,
                        frameStyles: "\n        height: " + c + "px;\n      "
                    }
                }(t.options);
                if (!n)
                    throw new Error("options were not set");
                var r = J()
                  , i = A(te(H({
                    origin: location.protocol + "//" + location.host,
                    uuid: r
                }, n.pageUrlParams), n.pageUrl), {
                    cssText: n.frameStyles
                })
                  , o = t.container;
                o && o.appendChild(i);
                var a = new z({
                    iframe: i,
                    origin: "https://" + Y.get().connectDomain
                })
                  , s = function() {
                    a.sendMessage({
                        handler: _e.RESIZE_FRAME,
                        params: {
                            uuid: r
                        }
                    })
                };
                return window.addEventListener("resize", s),
                {
                    getFrame: function() {
                        return i
                    },
                    destroy: function() {
                        i && (i.remove(),
                        i = null),
                        window.removeEventListener("resize", s),
                        a.destroy()
                    },
                    authReadyPromise: new Promise((function(n) {
                        a.onMessage((function(o) {
                            if (o.params.uuid === r)
                                switch (o.handler) {
                                case _e.RESIZE_FRAME:
                                    i.style.height = o.params.height + "px";
                                    break;
                                case _e.NOT_AUTHORIZED:
                                    n(o.handler);
                                    break;
                                case ue.SHOW_LOGIN:
                                case ue.SHOW_LOGIN_OPTIONS:
                                    t.callback({
                                        type: o.handler,
                                        payload: {
                                            uuid: r
                                        }
                                    });
                                    break;
                                case ue.SHOW_AGREEMENTS_DIALOG:
                                    e.userPolicyAgreements(r).show().then((function(e) {
                                        e && e.accepted && a.sendMessage({
                                            handler: ue.START_AUTHORIZE,
                                            params: {
                                                uuid: r
                                            }
                                        })
                                    }
                                    )).catch((function() {
                                        a.sendMessage({
                                            handler: se.DECLINE_POLICY_AGREEMENTS,
                                            params: {
                                                uuid: r
                                            }
                                        })
                                    }
                                    ));
                                    break;
                                case _e.AUTH_DATA_LOADED:
                                    n(o.handler);
                                default:
                                    e.handleOneTapEvents(o, a, t)
                                }
                        }
                        ))
                    }
                    ))
                }
            }
            ,
            e.handleOneTapEvents = function(t, n, r) {
                var i = t.params.uuid;
                switch (t.handler) {
                case _e.AUTH_DATA_LOADED:
                    n.sendMessage({
                        handler: _e.RESIZE_FRAME,
                        params: {
                            uuid: i
                        }
                    });
                    break;
                case _e.LOGIN_SUCCESS:
                    r.callback({
                        type: t.handler,
                        provider: "vk",
                        payload: t.params
                    });
                    break;
                case _e.SHOW_CAPTCHA:
                    var o = e.captcha(i, {
                        captcha_sid: t.params.captcha_sid,
                        captcha_img: t.params.captcha_img
                    });
                    o.show().then((function(e) {
                        n.sendMessage({
                            handler: ce.CAPTCHA_SUCCESS,
                            params: H({
                                uuid: i
                            }, e)
                        })
                    }
                    )).catch((function() {
                        n.sendMessage({
                            handler: ce.CAPTCHA_FAIL,
                            params: {
                                uuid: i
                            }
                        }),
                        o.destroy()
                    }
                    ));
                    break;
                case ae.SHOW_DATA_POLICY:
                    e.userDataPolicy(i).show().then((function() {
                        r.callback({
                            type: ae.DATA_POLICY_RESULT,
                            payload: {
                                uuid: i,
                                policyAccepted: !0
                            }
                        })
                    }
                    )).catch((function() {
                        r.callback({
                            type: ae.DATA_POLICY_RESULT,
                            payload: {
                                uuid: i,
                                policyAccepted: !1
                            }
                        })
                    }
                    ));
                    break;
                case _e.FULL_AUTH_NEEDED:
                case _e.PHONE_VALIDATION_NEEDED:
                    r.callback({
                        type: t.handler,
                        payload: {
                            uuid: i
                        }
                    })
                }
            }
            ,
            e.userDataPolicy = function(t) {
                var n = te({
                    origin: location.protocol + "//" + location.host,
                    uuid: t
                }, "user_data_policy")
                  , r = window.innerHeight
                  , i = A(n, {
                    properties: {
                        height: r + "px"
                    },
                    cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + r + "px;\n      min-height: " + r + "px;\n      border: none;\n      z-index: 99999;\n    "
                });
                document.body.appendChild(i);
                var o = new z({
                    iframe: i,
                    origin: "https://" + Y.get().connectDomain
                })
                  , a = function() {
                    i.style.display = "none"
                };
                return {
                    show: function() {
                        return i.style.display = "block",
                        new Promise((function(n, r) {
                            o.onMessage((function(s) {
                                switch (s.handler) {
                                case ae.HIDE_DATA_POLICY:
                                    a(),
                                    n(void 0);
                                    break;
                                case ae.SHOW_CAPTCHA:
                                    var c = e.captcha(t, {
                                        captcha_sid: s.params.captcha_sid,
                                        captcha_img: s.params.captcha_img
                                    });
                                    c.show().then((function(e) {
                                        o.sendMessage({
                                            handler: ce.CAPTCHA_SUCCESS,
                                            params: H({
                                                uuid: t
                                            }, e)
                                        }),
                                        i.style.display = "block"
                                    }
                                    )).catch((function() {
                                        o.sendMessage({
                                            handler: ce.CAPTCHA_FAIL,
                                            params: {
                                                uuid: t
                                            }
                                        }),
                                        c.destroy()
                                    }
                                    )),
                                    a();
                                    break;
                                default:
                                    a(),
                                    r()
                                }
                            }
                            ))
                        }
                        ))
                    },
                    hide: a,
                    destroy: function() {
                        document.body.removeChild(i),
                        o.destroy()
                    }
                }
            }
            ,
            e.userPolicyAgreements = function(t) {
                var n, r = A(te({
                    origin: location.protocol + "//" + location.host,
                    uuid: t
                }, "user_policy_agreements"), {
                    properties: {
                        height: (n = window.innerHeight) + "px"
                    },
                    cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + n + "px;\n      min-height: " + n + "px;\n      border: none;\n      z-index: 99999;\n    "
                });
                document.body.appendChild(r);
                var i = new z({
                    iframe: r,
                    origin: "https://" + Y.get().connectDomain
                })
                  , o = function() {
                    r.style.display = "none"
                };
                return {
                    show: function() {
                        return r.style.display = "block",
                        new Promise((function(n, a) {
                            i.onMessage((function(i) {
                                switch (i.handler) {
                                case se.ACCEPT_POLICY_AGREEMENTS:
                                    o(),
                                    n({
                                        accepted: !0
                                    });
                                    break;
                                case se.DECLINE_POLICY_AGREEMENTS:
                                    o(),
                                    n({
                                        accepted: !1
                                    });
                                    break;
                                case se.SHOW_DATA_POLICY:
                                    o();
                                    var s = function() {
                                        r.style.display = "block"
                                    };
                                    e.userDataPolicy(t).show().then(s).catch(s);
                                    break;
                                case se.POLICY_AGREEMENTS_ERROR:
                                case se.HIDE_POLICY_AGREEMENTS:
                                default:
                                    o(),
                                    a()
                                }
                            }
                            ))
                        }
                        ))
                    },
                    hide: o,
                    destroy: function() {
                        document.body.removeChild(r),
                        i.destroy()
                    }
                }
            }
            ,
            e.captcha = function(e, t) {
                var n = te(H({
                    origin: location.protocol + "//" + location.host,
                    uuid: e
                }, t), "auth_captcha")
                  , r = window.innerHeight
                  , i = A(n, {
                    cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + r + "px;\n      min-height: " + r + "px;\n      border: none;\n      z-index: 99999;\n    "
                });
                document.body.appendChild(i);
                var o = new z({
                    iframe: i,
                    origin: "https://" + Y.get().connectDomain
                })
                  , a = function() {
                    document.body.removeChild(i),
                    o.destroy()
                };
                return {
                    show: function() {
                        return i.style.display = "block",
                        new Promise((function(e, t) {
                            o.onMessage((function(n) {
                                if (n.handler === ce.CAPTCHA_SUCCESS)
                                    e(n.params),
                                    a();
                                else
                                    t(),
                                    a()
                            }
                            ))
                        }
                        ))
                    },
                    destroy: a
                }
            }
            ,
            e.userVisibleAuth = function(t) {
                var n = J()
                  , r = Y.get()
                  , o = H({
                    origin: location.protocol + "//" + location.host,
                    uuid: n,
                    debug: P(r._debug, 0),
                    localhost: P(r._debug, 0)
                }, O(t, ["screen", "source"]))
                  , a = ee(null == t ? void 0 : t.action);
                a && (o.action = a);
                var s = te(o);
                e.flags && (s = s + "#" + b(e.flags));
                var c = screen.height / 2 - 280
                  , _ = screen.width / 2 - 410
                  , l = window.open(s, "_blank", "top=" + c + ",left=" + _ + ",width=820,height=560,location");
                if (!l) {
                    var u = {
                        code: R.CONNECT_WINDOW_NOT_OPENED,
                        reason: "Connect window was not opened."
                    };
                    return Promise.reject(u)
                }
                return new Promise((function(e, t) {
                    var r = setInterval((function() {
                        if (!l || l.closed) {
                            window.removeEventListener("message", o),
                            clearInterval(r);
                            var e = {
                                code: R.CONNECT_WINDOW_CLOSED,
                                reason: "Connect window was closed."
                            };
                            t(e)
                        }
                    }
                    ), 1e3);
                    function o(a) {
                        if (a.source === l && l)
                            if (window.removeEventListener("message", o),
                            clearInterval(r),
                            function(e) {
                                for (var t = 0; t < i.length; t++) {
                                    var n = i[t];
                                    if (e.slice(e.length - n.length) === n)
                                        return !0
                                }
                                return !1
                            }(a.origin))
                                if (a.data.action === "vk_connect_response" + n) {
                                    var s = a.data.payload;
                                    l.close(),
                                    s.error ? (_ = {
                                        code: R.CONNECT_CLIENT_SDK_ERROR,
                                        reason: K(s.error)
                                    },
                                    t(_)) : e({
                                        provider: "vk",
                                        payload: s
                                    })
                                } else if (a.data.action === "oauth_callback" + n)
                                    e({
                                        provider: a.data.payload.name
                                    }),
                                    l.close();
                                else if (a.data.action === "skip_callback" + n) {
                                    var c = a.data.payload.redirectURL;
                                    c && (window.location.href = c),
                                    l.close()
                                } else
                                    a.data.action === "bind_ok_account" + n ? (e(a.data.payload),
                                    l.close()) : (l.close(),
                                    _ = {
                                        code: R.CONNECT_UNKNOWN_SDK_MESSAGE,
                                        reason: F(JSON.stringify(a.data))
                                    },
                                    t(_));
                            else {
                                l.close();
                                var _ = {
                                    code: R.CONNECT_DOMAIN_NOT_ALLOWED,
                                    reason: W(a.origin)
                                };
                                t(_)
                            }
                    }
                    window.addEventListener("message", o)
                }
                ))
            }
            ,
            e.redirectAuth = function(e) {
                var t = J()
                  , n = H({
                    redirect_uri: e.url,
                    uuid: t
                }, O(e, ["screen", "source"]))
                  , r = ee(null == e ? void 0 : e.action);
                r && (n.action = r),
                (null == e ? void 0 : e.state) && (n.redirect_state = e.state);
                var i = te(n);
                location.assign(i)
            }
            ,
            e.logout = function() {
                var e = Y.get()
                  , t = e.connectDomain
                  , n = e.appId
                  , r = e.superAppTokenV2;
                if (!r)
                    return Promise.reject(U("superappToken", "SuperappToken is undefined"));
                var i = b({
                    origin: location.protocol + "//" + location.host,
                    host_app_id: n,
                    superapp_token: r
                })
                  , o = fetch("https://" + t + "/logout?" + i, {
                    credentials: "include"
                });
                return Y.events.emit(I.LOGOUT),
                Y.setSuperAppToken(""),
                Y.setSuperAppToken("", {
                    version: 2
                }),
                o
            }
            ,
            e
        }(), ge = {
            OneTapAuthEventsSDK: _e,
            FloatingOneTapAuthEventsSDK: le,
            ButtonOneTapAuthEventsSDK: ue,
            DataPolicyEventsSDK: ae,
            AuthCaptchaEventsSDK: ce
        }, ve = ["open_account"];
        !function() {
            function e() {}
            e.open = function(e) {
                var t, n = J(), r = Y.get(), i = H({
                    origin: location.protocol + "//" + location.host,
                    uuid: n,
                    debug: P(r._debug, 0),
                    localhost: P(r._localhost, 0)
                }, O(e, ["screen", "source"])), o = (t = null == e ? void 0 : e.action) && ve.includes(t.name) ? btoa(JSON.stringify(t)) : "";
                o && (i.action = o);
                var a = function(e) {
                    var t = Y.get()
                      , n = t.appId
                      , r = t.connectDomain
                      , i = t.appSettings
                      , o = H({
                        app_id: n,
                        response_type: "silent_token",
                        v: "1.46.0"
                    }, e);
                    return i && T(i) && (o.app_settings = D(i)),
                    "https://" + r + "/open_account?" + b(o)
                }(i);
                if (!window.open(a, "_blank")) {
                    var s = {
                        code: R.CONNECT_WINDOW_NOT_OPENED,
                        reason: "Connect window was not opened."
                    };
                    return Promise.reject(s)
                }
                return Promise.resolve()
            }
        }();
        !function(e) {
            e.INTERNAL_RESIZE = "VKSDKMessengerInternalResize",
            e.INTERNAL_LOGOUT = "VKSDKMessengerInternalLogout"
        }(he || (he = {})),
        function(e) {
            e.CLOSE_CHAT = "VKSDKMessengerCloseChat"
        }(me || (me = {}));
        var Ee = function() {
            function e() {
                var e = this;
                this.resolve = function(t) {
                    if (Boolean(e.promise))
                        return e.finished = !0,
                        e.active = !1,
                        e.resolveHandler(t)
                }
                ,
                this.reject = function(t) {
                    if (Boolean(e.promise))
                        return e.finished = !0,
                        e.active = !1,
                        e.rejectHandler(t)
                }
            }
            return e.prototype.start = function() {
                var e = this;
                this.active = !0,
                this.finished = !1,
                this.promise = new Promise((function(t, n) {
                    e.resolveHandler = t,
                    e.rejectHandler = n
                }
                ))
            }
            ,
            e.prototype.get = function() {
                return this.promise
            }
            ,
            e
        }()
          , ye = function() {
            function e() {}
            return e.log = function() {
                for (var e = [], t = 0; t < arguments.length; t++)
                    e[t] = arguments[t]
            }
            ,
            e
        }()
          , we = function() {
            function e() {
                var e = this;
                this.config = {},
                this.params = {},
                this.loadingTask = new Ee,
                this.initTask = new Ee,
                this.cssText = "",
                this.handleError = function(t) {
                    var n = {
                        data: t,
                        code: R.CUSTOM
                    };
                    e.events.emit(I.ERROR, n)
                }
                ,
                this.events = j(),
                this.handleBridgeMessage = this.handleBridgeMessage.bind(this),
                this.handleChangeSuperAppToken = this.handleChangeSuperAppToken.bind(this),
                this.close = this.close.bind(this),
                this.handleLogout = this.handleLogout.bind(this)
            }
            return e.prototype.preload = function(e) {
                var t = this;
                return this.validateParams(e).then((function() {
                    return t.updateParams(e),
                    t.createIframe(),
                    t.initTask.start(),
                    t.loadingTask.start(),
                    t.timeoutTimer = setTimeout((function() {
                        if (!t.initTask.finished) {
                            var e = {
                                code: R.LOADING_ERROR,
                                reason: "Loading timeout"
                            };
                            t.initTask.reject(e)
                        }
                    }
                    ), 5e3),
                    t.iframe.onload = function() {
                        t.iframe.onload = null,
                        t.loadingTask.resolve()
                    }
                    ,
                    t.bridge = new z({
                        iframe: t.iframe,
                        origin: "https://" + Y.get().connectDomain
                    }),
                    t.bridge.onMessage(t.handleBridgeMessage),
                    Y.events.on(N.SUPERAPP_TOKEN_CHANGE_V2, t.handleChangeSuperAppToken),
                    Y.events.on(I.LOGOUT, t.close),
                    window.document.body.appendChild(t.iframe),
                    t.loadingTask.get()
                }
                ))
            }
            ,
            e.prototype.open = function(e) {
                var t = this;
                return this.validateParams(e).then((function() {
                    return t.initTask.finished ? (t.updateParams(e),
                    Promise.resolve()) : t.initTask.active || t.initTask.finished ? (t.updateParams(e),
                    t.initTask.get()) : t.preload(e).then((function() {
                        return t.initTask.get()
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.update = function(e, t) {
                e && this.updateParams(e),
                t && this.updateConfig(t)
            }
            ,
            e.prototype.close = function() {
                this.iframe && this.iframe.remove(),
                this.bridge && this.bridge.destroy(),
                Y.events.off(N.SUPERAPP_TOKEN_CHANGE_V2, this.handleChangeSuperAppToken),
                Y.events.off(I.LOGOUT, this.close),
                delete this.iframe,
                delete this.bridge,
                this.loadingTask = new Ee,
                this.initTask = new Ee,
                this.events.emit(I.CLOSE)
            }
            ,
            e.prototype.sendMessage = function(e) {
                this.bridge.sendMessage(e)
            }
            ,
            e.prototype.on = function(e, t) {
                this.events.on(e, t)
            }
            ,
            e.prototype.off = function(e, t) {
                this.events.off(e, t)
            }
            ,
            e.prototype.handleInit = function() {
                this.initTask.finished || (clearTimeout(this.timeoutTimer),
                this.initTask.resolve()),
                this.sendUpdateParamsMessage(),
                this.iframe.style.display = "block"
            }
            ,
            e.prototype.handleRequestAuth = function() {
                Y._auth({
                    version: 2
                })
            }
            ,
            e.prototype.handleRequestSuperAppToken = function(e) {
                Y._requestSuperAppToken(e, {
                    version: 2
                })
            }
            ,
            e.prototype.handleChangeSuperAppToken = function(e) {
                this.bridge.sendMessage({
                    handler: I.REQUEST_SUPERAPP_TOKEN + "Success",
                    params: {
                        result: e
                    }
                })
            }
            ,
            e.prototype.handleBridgeMessage = function(e) {
                switch (ye.log(e),
                e.handler) {
                case M.INIT:
                    this.handleInit();
                    break;
                case I.REQUEST_SUPERAPP_TOKEN:
                    this.handleRequestSuperAppToken(e.params);
                    break;
                case I.AUTH_NEEDED:
                    this.handleRequestAuth();
                    break;
                case I.CLOSE:
                    this.close();
                    break;
                case I.ERROR:
                    this.handleError(e.params);
                    break;
                default:
                    return
                }
            }
            ,
            e.prototype.handleLogout = function() {
                Y._logout()
            }
            ,
            e.prototype.handleAfterUpdateParams = function() {
                this.sendUpdateParamsMessage()
            }
            ,
            e.prototype.handleAfterUpdateConfig = function() {}
            ,
            e.prototype.handleAfterCreateIframe = function() {}
            ,
            e.prototype.validateParams = function(e) {
                return Promise.resolve(e)
            }
            ,
            e.prototype.createIframe = function() {
                var e = this.getIframeUrl();
                this.iframe = A(e, {
                    cssText: this.cssText
                }),
                this.handleAfterCreateIframe()
            }
            ,
            e.prototype.getIframeUrl = function() {
                return ""
            }
            ,
            e.prototype.getIframeUrlParams = function() {
                var e = Y.get()
                  , t = e._debug
                  , n = e.superAppTokenV2
                  , r = e.appId;
                return b(H(H({}, this.params), {
                    host_app_id: r,
                    superapp_token: n,
                    debug: P(t, 0),
                    localhost: P(t, 0),
                    origin: location.protocol + "//" + location.host
                }))
            }
            ,
            e.prototype.updateConfig = function(e) {
                this.config = S(this.config, e),
                this.handleAfterUpdateConfig()
            }
            ,
            e.prototype.updateParams = function(e) {
                this.params = S(this.params, e || {}),
                this.handleAfterUpdateParams()
            }
            ,
            e.prototype.sendUpdateParamsMessage = function() {
                this.bridge && this.initTask.finished && this.bridge.sendMessage({
                    params: this.params,
                    handler: I.UPDATE_PARAMS
                })
            }
            ,
            e
        }()
          , be = {
            styles: {
                bottom: "0",
                right: "0",
                zIndex: 99999
            }
        }
          , Ce = function(e) {
            function t(t) {
                var n = e.call(this) || this;
                return n.config = be,
                n.cssText = "\n    border: none;\n    display: none;\n    position: fixed;\n  ",
                n.updateStyles = function() {
                    if (n.iframe) {
                        var e = n.config.styles
                          , t = isFinite(e.zIndex) ? e.zIndex : 999999;
                        n.iframe.style.zIndex = "" + t,
                        n.iframe.style.bottom = e.bottom,
                        n.iframe.style.right = e.right
                    }
                }
                ,
                n.createCaptcha = function(e, t) {
                    var n = te(H({
                        origin: location.protocol + "//" + location.host,
                        uuid: e
                    }, t), "auth_captcha")
                      , r = window.innerHeight
                      , i = A(n, {
                        cssText: "\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: " + r + "px;\n      min-height: " + r + "px;\n      border: none;\n      z-index: 99999;\n    "
                    });
                    document.body.appendChild(i);
                    var o = new z({
                        iframe: i,
                        origin: "https://" + Y.get().connectDomain
                    })
                      , a = function() {
                        document.body.removeChild(i),
                        o.destroy()
                    };
                    return {
                        show: function() {
                            return i.style.display = "block",
                            new Promise((function(e, t) {
                                o.onMessage((function(n) {
                                    if (n.handler === ce.CAPTCHA_SUCCESS)
                                        e(n.params),
                                        a();
                                    else
                                        t(),
                                        a()
                                }
                                ))
                            }
                            ))
                        },
                        destroy: a
                    }
                }
                ,
                n.updateConfig(t),
                n
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
                function n() {
                    this.constructor = e
                }
                V(e, t),
                e.prototype = null === t ? Object.create(t) : (n.prototype = t.prototype,
                new n)
            }(t, e),
            t.prototype.handleBridgeMessage = function(t) {
                var n = this;
                switch (e.prototype.handleBridgeMessage.call(this, t),
                t.handler) {
                case I.GET_CAPTCHA:
                    var r = t.params.uuid
                      , i = this.createCaptcha(r, {
                        captcha_sid: t.params.captcha_sid,
                        captcha_img: t.params.captcha_img
                    });
                    i.show().then((function(e) {
                        n.bridge.sendMessage({
                            handler: I.GET_CAPTCHA + "Success",
                            params: H({
                                uuid: r
                            }, e)
                        })
                    }
                    )).catch((function() {
                        n.bridge.sendMessage({
                            handler: I.GET_CAPTCHA + "Fail",
                            params: {
                                uuid: r
                            }
                        }),
                        i.destroy()
                    }
                    ));
                    break;
                case he.INTERNAL_RESIZE:
                    this.handleInternalIframeResize(t);
                    break;
                case he.INTERNAL_LOGOUT:
                    this.handleLogout();
                    break;
                case me.CLOSE_CHAT:
                    this.events.emit(me.CLOSE_CHAT, t.params);
                    break;
                default:
                    return
                }
            }
            ,
            t.prototype.handleInternalIframeResize = function(e) {
                var t = e.params;
                this.iframe.width = t.width + "px",
                this.iframe.height = t.height + "px"
            }
            ,
            t.prototype.handleAfterUpdateConfig = function() {
                this.updateStyles()
            }
            ,
            t.prototype.handleAfterCreateIframe = function() {
                this.updateStyles()
            }
            ,
            t.prototype.validateParams = function(e) {
                return e.peer_id >= 0 ? Promise.reject(U("peer_id", "Peer id can`t be positive")) : Promise.resolve(e)
            }
            ,
            t.prototype.getIframeUrl = function() {
                return "https://" + Y.get().connectDomain + "/messenger?" + this.getIframeUrlParams()
            }
            ,
            t
        }(we)
    }
    ,
    376624: function(e) {
        e.exports = function() {
            "use strict";
            var e = function() {
                return e = Object.assign || function(e) {
                    for (var t, n = 1, r = arguments.length; n < r; n++)
                        for (var i in t = arguments[n])
                            Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i]);
                    return e
                }
                ,
                e.apply(this, arguments)
            }
              , t = 1
              , n = 7
              , r = 96 * t
              , i = 96 * t
              , o = 25
              , a = function(e, t, r, i, a) {
                if (e < n && t < n)
                    return !1;
                if (e >= r - n && t < n)
                    return !1;
                if (e < n && t >= r - n)
                    return !1;
                if (a) {
                    var s = n + 2;
                    r <= o && s--;
                    var c = (r - 2 * n - s) / 2 - 1;
                    return r <= o && c++,
                    !(e > n + c && e < r - n - c - 1 && t > n + c && t < r - n - c - 1) && 0 <= e && e < r && 0 <= t && t < r && i[t][e]
                }
                return i[t] && i[t][e]
            }
              , s = function(e, t, n, r, i) {
                return void 0 === i && (i = !0),
                {
                    l: a(e - 1, t, n, r, i),
                    r: a(e + 1, t, n, r, i),
                    t: a(e, t - 1, n, r, i),
                    b: a(e, t + 1, n, r, i),
                    current: a(e, t, n, r, i)
                }
            }
              , c = function(e, c) {
                if ("number" != typeof c.qrSize)
                    throw new Error("Size should be a number");
                if ("string" != typeof c.className)
                    throw new Error("Classname should be a string");
                for (var _ = 2 * t, l = 12.7 * t, u = 12.8 * t, d = 14.7 * t, p = 14.8 * t, h = 15.9 * t, m = 28.6 * t, f = 30.5 * t, g = 84.7776815 * t, v = 87.3 * t, E = 71.4 * t, y = 42.9 * t, w = 87.2 * t, b = 85.2 * t, C = 85.3 * t, T = 69.5 * t, D = 98 * t, A = 100 * t, S = [], P = 0, O = 0, I = 0, M = 0, R = 0; R < e.size; R++) {
                    P = 0;
                    for (var L = 0; L < e.size; L++) {
                        I = L + P,
                        P += r,
                        M = R + O;
                        var k = s(L, R, e.size, e.modules, c.isShowLogo)
                          , B = ""
                          , x = "";
                        k.current ? (x = !(x = x || k.l || k.r || k.t || k.b ? "" : "empty") && k.l && k.r || k.t && k.b ? "rect" : "") || (x += k.l ? "l" : k.r ? "r" : "",
                        (x += k.t ? "t" : k.b ? "b" : "") || (x = "empty")) : x = !(x = !(x = !(x = !x && k.l && k.t && a(L - 1, R - 1, e.size, e.modules, c.isShowLogo) ? "n_lt" : "") && k.l && k.b && a(L - 1, R + 1, e.size, e.modules, c.isShowLogo) ? "n_lb" : "") && k.r && k.t && a(L + 1, R - 1, e.size, e.modules, c.isShowLogo) ? "n_rt" : "") && k.r && k.b && a(L + 1, R + 1, e.size, e.modules, c.isShowLogo) ? "n_rb" : "",
                        x && (B = '<use xlink:href="#' + x + "-" + c.suffix + '"/>',
                        S.push('<g transform="translate(' + I + "," + M + ')">' + B + "</g>"))
                    }
                    O += r
                }
                var N = ""
                  , U = (e.size - 3 * n) / 2 * r + r * n - 10;
                e.size <= o && (N = "scale(0.85)",
                U += 50);
                var W = (e.size - n) * i;
                S.push('<use fill-rule="evenodd" transform="translate(0,0)" xlink:href="#point-' + c.suffix + '"/>'),
                S.push('<use fill-rule="evenodd" transform="translate(' + W + ',0)" xlink:href="#point-' + c.suffix + '"/>'),
                S.push('<use fill-rule="evenodd" transform="translate(0,' + W + ')" xlink:href="#point-' + c.suffix + '"/>'),
                c.isShowLogo && (c.logoData ? S.push('\n        <image\n          preserveAspectRatio="xMidYMid slice" clip-path="url(#logo-mask-' + c.suffix + ')"\n          style="width: 750px; height: 750px;" width="750" height="750"\n          transform="translate(' + U + "," + U + ") " + N + '"\n          xlink:href="' + c.logoData + '"\n        />\n      ') : S.push('\n        <use style="width: 750px; height: 750px;" width="750" height="750"\n          fill="none"\n          fill-rule="evenodd"\n          transform="translate(' + U + "," + U + ") " + N + '" xlink:href="#vk_logo-' + c.suffix + '"\n        />\n      '));
                var F = 99 * e.size
                  , K = ""
                  , V = "translate(0,0)";
                if (c.isShowBackground) {
                    var H = (c.qrSize - 40) / c.qrSize
                      , j = F / c.qrSize * 21;
                    K = '\n      <rect\n        x="0"\n        width="' + F + '"\n        height="' + F + '"\n        rx="' + Math.ceil(F / (c.qrSize / 36)) + '"\n        fill="' + c.backgroundColor + '"\n      />',
                    V = "translate(" + j + ", " + j + ") scale(" + H + ")"
                }
                var G = "M0,0 L66,0 C" + g + ",-3.44940413e-15 " + A + ",15.2223185 " + A + ",34 L" + A + ",66 C" + A + "," + g + " " + g + "," + A + " 66," + A + " L0," + A + " L0,0 Z"
                  , q = "M0,0 L" + A + ",0 L" + A + ",66 C" + A + "," + g + " " + g + "," + A + " 66," + A + " L0," + A + " L0,0 Z";
                return '\n  <svg\n    version="1.1"\n    viewBox="0 0 ' + F + " " + F + '"\n    width="' + c.qrSize + 'px"\n    height="' + c.qrSize + 'px"\n    ' + (c.className ? 'class="' + c.className + '"' : "") + '\n    xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <defs>\n      <rect id="rect-' + c.suffix + '" width="100" height="100" fill="' + c.foregroundColor + '"/>\n      <path\n        id="empty-' + c.suffix + '"\n        d="M0,' + m + "v" + y + "C0," + v + "," + u + "," + A + "," + m + "," + A + "h" + y + "c" + h + ",0," + m + "-" + u + "," + m + "-" + m + "V" + m + "C" + A + "," + l + "," + w + ",0," + E + ",0H" + m + " C" + u + ",0,0," + u + ",0," + m + 'z"\n        fill="' + c.foregroundColor + '"\n      />\n      <path id="b-' + c.suffix + '" d="' + G + '" transform="rotate(-90 50 50)" fill="' + c.foregroundColor + '"/>\n      <path id="r-' + c.suffix + '" d="' + G + '" transform="rotate(-180 50 50)" fill="' + c.foregroundColor + '"/>\n      <path id="l-' + c.suffix + '" d="' + G + '" fill="' + c.foregroundColor + '"/>\n      <path id="t-' + c.suffix + '" d="' + G + '" transform="rotate(90 50 50)" fill="' + c.foregroundColor + '"/>\n      <path id="l-' + c.suffix + '" d="' + q + '" transform="rotate(-90 50 50)" fill="' + c.foregroundColor + '"/>\n      <path id="lt-' + c.suffix + '" d="' + q + '" fill="' + c.foregroundColor + '"/>\n      <path id="lb-' + c.suffix + '" d="' + q + '" transform="rotate(-90 50 50)" fill="' + c.foregroundColor + '"/>\n      <path id="rb-' + c.suffix + '" d="' + q + '" transform="rotate(-180 50 50)" fill="' + c.foregroundColor + '"/>\n      <path id="rt-' + c.suffix + '" d="' + q + '" transform="rotate(90 50 50)" fill="' + c.foregroundColor + '"/>\n      <path\n        id="n_lt-' + c.suffix + '"\n        d="M' + f + "," + _ + "V0H0v" + f + "h" + _ + "C" + _ + "," + d + "," + p + "," + _ + "," + f + "," + _ + 'z"\n        fill="' + c.foregroundColor + '"\n      />\n      <path\n        id="n_lb-' + c.suffix + '"\n        d="M' + _ + "," + T + "H0V" + A + "h" + f + "v-" + _ + "C" + d + "," + D + "," + _ + "," + b + "," + _ + "," + T + 'z"\n        fill="' + c.foregroundColor + '"\n      />\n      <path\n        id="n_rt-' + c.suffix + '"\n        d="M' + D + "," + f + "h" + _ + "V0H" + T + "v" + _ + "C" + C + "," + _ + "," + D + "," + p + "," + D + "," + f + 'z"\n        fill="' + c.foregroundColor + '"\n      />\n      <path id="n_rb-' + c.suffix + '"\n        d="M' + T + "," + D + "v" + _ + "H" + A + "V" + T + "h-" + _ + "C" + D + "," + C + "," + b + "," + D + "," + T + "," + D + 'z"\n        fill="' + c.foregroundColor + '"\n      />\n      <path\n        id="point-' + c.suffix + '"\n        fill="' + c.foregroundColor + '"\n        d="M600.001786,457.329333 L600.001786,242.658167 C600.001786,147.372368 587.039517,124.122784 581.464617,118.535383 C575.877216,112.960483 552.627632,99.9982143 457.329333,99.9982143 L242.670667,99.9982143 C147.372368,99.9982143 124.122784,112.960483 118.547883,118.535383 C112.972983,124.122784 99.9982143,147.372368 99.9982143,242.658167 L99.9982143,457.329333 C99.9982143,552.627632 112.972983,575.877216 118.547883,581.464617 C124.122784,587.027017 147.372368,600.001786 242.670667,600.001786 L457.329333,600.001786 C552.627632,600.001786 575.877216,587.027017 581.464617,581.464617 C587.039517,575.877216 600.001786,552.627632 600.001786,457.329333 Z M457.329333,0 C653.338333,0 700,46.6616668 700,242.658167 C700,438.667167 700,261.332833 700,457.329333 C700,653.338333 653.338333,700 457.329333,700 C261.332833,700 438.667167,700 242.670667,700 C46.6616668,700 0,653.338333 0,457.329333 C0,261.332833 0,352.118712 0,242.658167 C0,46.6616668 46.6616668,0 242.670667,0 C438.667167,0 261.332833,0 457.329333,0 Z M395.996667,200 C480.004166,200 500,220.008332 500,303.990835 C500,387.998334 500,312.001666 500,395.996667 C500,479.991668 480.004166,500 395.996667,500 C312.001666,500 387.998334,500 304.003333,500 C220.008332,500 200,479.991668 200,395.996667 C200,312.001666 200,350.906061 200,303.990835 C200,220.008332 220.008332,200 304.003333,200 C387.998334,200 312.001666,200 395.996667,200 Z"\n      />\n      <g id="vk_logo-' + c.suffix + '">\n        <path\n          fill="' + c.logoColor + '"\n          d="M83.3334 363.333C83.3334 231.34 83.3334 165.343 124.338 124.338C165.343 83.3333 231.34              83.3333 363.333 83.3333H386.667C518.66 83.3333 584.657 83.3333 625.662 124.338C666.667 165.343              666.667 231.34 666.667 363.333V386.667C666.667 518.66 666.667 584.657 625.662 625.662C584.657              666.667 518.66 666.667 386.667 666.667H363.333C231.34 666.667 165.343 666.667 124.338 625.662C83.3334              584.657 83.3334 518.66 83.3334 386.667V363.333Z"\n        />\n        <path\n          fill="#FFF"\n          d="M394.907 508.681C263.293 508.681 183.442 417.365 180.313 265.625H246.972C249.05 377.09              299.763 424.323 338.638 434.036V265.625H402.519V361.82C440.016 357.664 479.264 313.909              492.456 265.625H555.333C545.27 325 502.543 368.754 472.353 386.803C502.566 401.395 551.177              439.593 569.926 508.681H500.815C486.222 462.498 450.476 426.728 402.542 421.872V508.681H394.907Z"\n        />\n      </g>\n      <clipPath id="logo-mask-' + c.suffix + '">\n        <rect x="0" y="0" width="750" height="750" />\n      </clipPath>\n    </defs>\n\n    ' + K + '\n\n    <g transform="' + V + '">\n      ' + S.join("\n") + "\n    </g>\n  </svg>"
            }
              , _ = function() {
                function e(t, n, r, i) {
                    if (this.version = t,
                    this.errorCorrectionLevel = n,
                    this.mask = i,
                    this.modules = [],
                    this.isFunction = [],
                    t < e.MIN_VERSION || t > e.MAX_VERSION)
                        throw "Version value out of range";
                    if (i < -1 || i > 7)
                        throw "Mask value out of range";
                    this.size = 4 * t + 17;
                    for (var o = [], a = 0; a < this.size; a++)
                        o.push(!1);
                    for (a = 0; a < this.size; a++)
                        this.modules.push(o.slice()),
                        this.isFunction.push(o.slice());
                    this.drawFunctionPatterns();
                    var s = this.addEccAndInterleave(r);
                    if (this.drawCodewords(s),
                    -1 == i) {
                        var c = 1e9;
                        for (a = 0; a < 8; a++) {
                            this.applyMask(a),
                            this.drawFormatBits(a);
                            var _ = this.getPenaltyScore();
                            _ < c && (i = a,
                            c = _),
                            this.applyMask(a)
                        }
                    }
                    if (i < 0 || i > 7)
                        throw "Assertion error";
                    this.mask = i,
                    this.applyMask(i),
                    this.drawFormatBits(i),
                    this.isFunction = []
                }
                return e.encodeText = function(t, n) {
                    var r = u.makeSegments(t);
                    return e.encodeSegments(r, n)
                }
                ,
                e.encodeBinary = function(t, n) {
                    var r = u.makeBytes(t);
                    return e.encodeSegments([r], n)
                }
                ,
                e.encodeSegments = function(t, n, r, i, o, a) {
                    if (void 0 === r && (r = 1),
                    void 0 === i && (i = 40),
                    void 0 === o && (o = -1),
                    void 0 === a && (a = !0),
                    !(e.MIN_VERSION <= r && r <= i && i <= e.MAX_VERSION) || o < -1 || o > 7)
                        throw "Invalid value";
                    var s, c;
                    for (s = r; ; s++) {
                        var _ = 8 * e.getNumDataCodewords(s, n)
                          , l = u.getTotalBits(t, s);
                        if (l <= _) {
                            c = l;
                            break
                        }
                        if (s >= i)
                            throw "Data too long"
                    }
                    for (var d = 0, h = [e.Ecc.MEDIUM, e.Ecc.QUARTILE, e.Ecc.HIGH]; d < h.length; d++) {
                        var m = h[d];
                        a && c <= 8 * e.getNumDataCodewords(s, m) && (n = m)
                    }
                    for (var f = new p, g = 0, v = t; g < v.length; g++) {
                        var E = v[g];
                        f.appendBits(E.mode.modeBits, 4),
                        f.appendBits(E.numChars, E.mode.numCharCountBits(s));
                        for (var y = 0, w = E.getData(); y < w.length; y++) {
                            var b = w[y];
                            f.array.push(b)
                        }
                    }
                    if (f.array.length != c)
                        throw "Assertion error";
                    var C = 8 * e.getNumDataCodewords(s, n);
                    if (f.array.length > C)
                        throw "Assertion error";
                    if (f.appendBits(0, Math.min(4, C - f.array.length)),
                    f.appendBits(0, (8 - f.array.length % 8) % 8),
                    f.array.length % 8 != 0)
                        throw "Assertion error";
                    for (var T = 236; f.array.length < C; T ^= 253)
                        f.appendBits(T, 8);
                    for (var D = []; 8 * D.length < f.array.length; )
                        D.push(0);
                    return f.array.forEach((function(e, t) {
                        return D[t >>> 3] |= e << 7 - (7 & t)
                    }
                    )),
                    new e(s,n,D,o)
                }
                ,
                e.prototype.getModule = function(e, t) {
                    return 0 <= e && e < this.size && 0 <= t && t < this.size && this.modules[t][e]
                }
                ,
                e.prototype.drawCanvas = function(e, t, n) {
                    if (e <= 0 || t < 0)
                        throw "Value out of range";
                    var r = (this.size + 2 * t) * e;
                    n.width = r,
                    n.height = r;
                    for (var i = n.getContext("2d"), o = -t; o < this.size + t; o++)
                        for (var a = -t; a < this.size + t; a++)
                            i.fillStyle = this.getModule(a, o) ? "#000000" : "#FFFFFF",
                            i.fillRect((a + t) * e, (o + t) * e, e, e)
                }
                ,
                e.prototype.toSvgString = function(e) {
                    if (e < 0)
                        throw "Border must be non-negative";
                    for (var t = [], n = 0; n < this.size; n++)
                        for (var r = 0; r < this.size; r++)
                            this.getModule(r, n) && t.push("M" + (r + e) + "," + (n + e) + "h1v1h-1z");
                    return '<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 ' + (this.size + 2 * e) + " " + (this.size + 2 * e) + '" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="' + t.join(" ") + '" fill="#000000"/>\n</svg>\n'
                }
                ,
                e.prototype.drawFunctionPatterns = function() {
                    for (var e = 0; e < this.size; e++)
                        this.setFunctionModule(6, e, e % 2 == 0),
                        this.setFunctionModule(e, 6, e % 2 == 0);
                    this.drawFinderPattern(3, 3),
                    this.drawFinderPattern(this.size - 4, 3),
                    this.drawFinderPattern(3, this.size - 4);
                    var t = this.getAlignmentPatternPositions()
                      , n = t.length;
                    for (e = 0; e < n; e++)
                        for (var r = 0; r < n; r++)
                            0 == e && 0 == r || 0 == e && r == n - 1 || e == n - 1 && 0 == r || this.drawAlignmentPattern(t[e], t[r]);
                    this.drawFormatBits(0),
                    this.drawVersion()
                }
                ,
                e.prototype.drawFormatBits = function(e) {
                    for (var t = this.errorCorrectionLevel.formatBits << 3 | e, n = t, r = 0; r < 10; r++)
                        n = n << 1 ^ 1335 * (n >>> 9);
                    var i = 21522 ^ (t << 10 | n);
                    if (i >>> 15 != 0)
                        throw "Assertion error";
                    for (r = 0; r <= 5; r++)
                        this.setFunctionModule(8, r, l(i, r));
                    for (this.setFunctionModule(8, 7, l(i, 6)),
                    this.setFunctionModule(8, 8, l(i, 7)),
                    this.setFunctionModule(7, 8, l(i, 8)),
                    r = 9; r < 15; r++)
                        this.setFunctionModule(14 - r, 8, l(i, r));
                    for (r = 0; r < 8; r++)
                        this.setFunctionModule(this.size - 1 - r, 8, l(i, r));
                    for (r = 8; r < 15; r++)
                        this.setFunctionModule(8, this.size - 15 + r, l(i, r));
                    this.setFunctionModule(8, this.size - 8, !0)
                }
                ,
                e.prototype.drawVersion = function() {
                    if (!(this.version < 7)) {
                        for (var e = this.version, t = 0; t < 12; t++)
                            e = e << 1 ^ 7973 * (e >>> 11);
                        var n = this.version << 12 | e;
                        if (n >>> 18 != 0)
                            throw "Assertion error";
                        for (t = 0; t < 18; t++) {
                            var r = l(n, t)
                              , i = this.size - 11 + t % 3
                              , o = Math.floor(t / 3);
                            this.setFunctionModule(i, o, r),
                            this.setFunctionModule(o, i, r)
                        }
                    }
                }
                ,
                e.prototype.drawFinderPattern = function(e, t) {
                    for (var n = -4; n <= 4; n++)
                        for (var r = -4; r <= 4; r++) {
                            var i = Math.max(Math.abs(r), Math.abs(n))
                              , o = e + r
                              , a = t + n;
                            0 <= o && o < this.size && 0 <= a && a < this.size && this.setFunctionModule(o, a, 2 != i && 4 != i)
                        }
                }
                ,
                e.prototype.drawAlignmentPattern = function(e, t) {
                    for (var n = -2; n <= 2; n++)
                        for (var r = -2; r <= 2; r++)
                            this.setFunctionModule(e + r, t + n, 1 != Math.max(Math.abs(r), Math.abs(n)))
                }
                ,
                e.prototype.setFunctionModule = function(e, t, n) {
                    this.modules[t][e] = n,
                    this.isFunction[t][e] = !0
                }
                ,
                e.prototype.addEccAndInterleave = function(t) {
                    var n = this.version
                      , r = this.errorCorrectionLevel;
                    if (t.length != e.getNumDataCodewords(n, r))
                        throw "Invalid argument";
                    for (var i = e.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n], o = e.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n], a = Math.floor(e.getNumRawDataModules(n) / 8), s = i - a % i, c = Math.floor(a / i), _ = [], l = new d(o), u = 0, p = 0; u < i; u++) {
                        var h = t.slice(p, p + c - o + (u < s ? 0 : 1));
                        p += h.length;
                        var m = l.getRemainder(h);
                        u < s && h.push(0),
                        _.push(h.concat(m))
                    }
                    var f = [];
                    for (u = 0; u < _[0].length; u++)
                        for (var g = 0; g < _.length; g++)
                            (u != c - o || g >= s) && f.push(_[g][u]);
                    if (f.length != a)
                        throw "Assertion error";
                    return f
                }
                ,
                e.prototype.drawCodewords = function(t) {
                    if (t.length != Math.floor(e.getNumRawDataModules(this.version) / 8))
                        throw "Invalid argument";
                    for (var n = 0, r = this.size - 1; r >= 1; r -= 2) {
                        6 == r && (r = 5);
                        for (var i = 0; i < this.size; i++)
                            for (var o = 0; o < 2; o++) {
                                var a = r - o
                                  , s = 0 == (r + 1 & 2) ? this.size - 1 - i : i;
                                !this.isFunction[s][a] && n < 8 * t.length && (this.modules[s][a] = l(t[n >>> 3], 7 - (7 & n)),
                                n++)
                            }
                    }
                    if (n != 8 * t.length)
                        throw "Assertion error"
                }
                ,
                e.prototype.applyMask = function(e) {
                    if (e < 0 || e > 7)
                        throw "Mask value out of range";
                    for (var t = 0; t < this.size; t++)
                        for (var n = 0; n < this.size; n++) {
                            var r = void 0;
                            switch (e) {
                            case 0:
                                r = (n + t) % 2 == 0;
                                break;
                            case 1:
                                r = t % 2 == 0;
                                break;
                            case 2:
                                r = n % 3 == 0;
                                break;
                            case 3:
                                r = (n + t) % 3 == 0;
                                break;
                            case 4:
                                r = (Math.floor(n / 3) + Math.floor(t / 2)) % 2 == 0;
                                break;
                            case 5:
                                r = n * t % 2 + n * t % 3 == 0;
                                break;
                            case 6:
                                r = (n * t % 2 + n * t % 3) % 2 == 0;
                                break;
                            case 7:
                                r = ((n + t) % 2 + n * t % 3) % 2 == 0;
                                break;
                            default:
                                throw "Assertion error"
                            }
                            !this.isFunction[t][n] && r && (this.modules[t][n] = !this.modules[t][n])
                        }
                }
                ,
                e.prototype.getPenaltyScore = function() {
                    for (var t = 0, n = 0; n < this.size; n++) {
                        for (var r = [0, 0, 0, 0, 0, 0, 0], i = !1, o = 0, a = 0; a < this.size; a++)
                            this.modules[n][a] == i ? 5 == ++o ? t += e.PENALTY_N1 : o > 5 && t++ : (e.addRunToHistory(o, r),
                            !i && e.hasFinderLikePattern(r) && (t += e.PENALTY_N3),
                            i = this.modules[n][a],
                            o = 1);
                        e.addRunToHistory(o, r),
                        i && e.addRunToHistory(0, r),
                        e.hasFinderLikePattern(r) && (t += e.PENALTY_N3)
                    }
                    for (a = 0; a < this.size; a++) {
                        r = [0, 0, 0, 0, 0, 0, 0],
                        i = !1;
                        var s = 0;
                        for (n = 0; n < this.size; n++)
                            this.modules[n][a] == i ? 5 == ++s ? t += e.PENALTY_N1 : s > 5 && t++ : (e.addRunToHistory(s, r),
                            !i && e.hasFinderLikePattern(r) && (t += e.PENALTY_N3),
                            i = this.modules[n][a],
                            s = 1);
                        e.addRunToHistory(s, r),
                        i && e.addRunToHistory(0, r),
                        e.hasFinderLikePattern(r) && (t += e.PENALTY_N3)
                    }
                    for (n = 0; n < this.size - 1; n++)
                        for (a = 0; a < this.size - 1; a++)
                            (i = this.modules[n][a]) == this.modules[n][a + 1] && i == this.modules[n + 1][a] && i == this.modules[n + 1][a + 1] && (t += e.PENALTY_N2);
                    for (var c = 0, _ = 0, l = this.modules; _ < l.length; _++)
                        for (var u = 0, d = l[_]; u < d.length; u++)
                            (i = d[u]) && c++;
                    var p = this.size * this.size;
                    return t += (Math.ceil(Math.abs(20 * c - 10 * p) / p) - 1) * e.PENALTY_N4
                }
                ,
                e.prototype.getAlignmentPatternPositions = function() {
                    if (1 == this.version)
                        return [];
                    for (var e = Math.floor(this.version / 7) + 2, t = 32 == this.version ? 26 : 2 * Math.ceil((this.size - 13) / (2 * e - 2)), n = [6], r = this.size - 7; n.length < e; r -= t)
                        n.splice(1, 0, r);
                    return n
                }
                ,
                e.getNumRawDataModules = function(t) {
                    if (t < e.MIN_VERSION || t > e.MAX_VERSION)
                        throw "Version number out of range";
                    var n = (16 * t + 128) * t + 64;
                    if (t >= 2) {
                        var r = Math.floor(t / 7) + 2;
                        n -= (25 * r - 10) * r - 55,
                        t >= 7 && (n -= 36)
                    }
                    return n
                }
                ,
                e.getNumDataCodewords = function(t, n) {
                    return Math.floor(e.getNumRawDataModules(t) / 8) - e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t] * e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]
                }
                ,
                e.addRunToHistory = function(e, t) {
                    t.pop(),
                    t.unshift(e)
                }
                ,
                e.hasFinderLikePattern = function(e) {
                    var t = e[1];
                    return t > 0 && e[2] == t && e[4] == t && e[5] == t && e[3] == 3 * t && Math.max(e[0], e[6]) >= 4 * t
                }
                ,
                e.MIN_VERSION = 1,
                e.MAX_VERSION = 40,
                e.PENALTY_N1 = 3,
                e.PENALTY_N2 = 3,
                e.PENALTY_N3 = 40,
                e.PENALTY_N4 = 10,
                e.ECC_CODEWORDS_PER_BLOCK = [[-1, 7, 10, 15, 20, 26, 18, 20, 24, 30, 18, 20, 24, 26, 30, 22, 24, 28, 30, 28, 28, 28, 28, 30, 30, 26, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30], [-1, 10, 16, 26, 18, 24, 16, 18, 22, 22, 26, 30, 22, 22, 24, 24, 28, 28, 26, 26, 26, 26, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28], [-1, 13, 22, 18, 26, 18, 24, 18, 22, 20, 24, 28, 26, 24, 20, 30, 24, 28, 28, 26, 30, 28, 30, 30, 30, 30, 28, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30], [-1, 17, 28, 22, 16, 22, 28, 26, 26, 24, 28, 24, 28, 22, 24, 24, 30, 28, 28, 26, 28, 30, 24, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30]],
                e.NUM_ERROR_CORRECTION_BLOCKS = [[-1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 4, 4, 4, 4, 4, 6, 6, 6, 6, 7, 8, 8, 9, 9, 10, 12, 12, 12, 13, 14, 15, 16, 17, 18, 19, 19, 20, 21, 22, 24, 25], [-1, 1, 1, 1, 2, 2, 4, 4, 4, 5, 5, 5, 8, 9, 9, 10, 10, 11, 13, 14, 16, 17, 17, 18, 20, 21, 23, 25, 26, 28, 29, 31, 33, 35, 37, 38, 40, 43, 45, 47, 49], [-1, 1, 1, 2, 2, 4, 4, 6, 6, 8, 8, 8, 10, 12, 16, 12, 17, 16, 18, 21, 20, 23, 23, 25, 27, 29, 34, 34, 35, 38, 40, 43, 45, 48, 51, 53, 56, 59, 62, 65, 68], [-1, 1, 1, 2, 4, 4, 4, 5, 6, 8, 8, 11, 11, 16, 16, 18, 16, 19, 21, 25, 25, 25, 34, 30, 32, 35, 37, 40, 42, 45, 48, 51, 54, 57, 60, 63, 66, 70, 74, 77, 81]],
                e
            }();
            function l(e, t) {
                return 0 != (e >>> t & 1)
            }
            var u = function() {
                function e(e, t, n) {
                    if (this.mode = e,
                    this.numChars = t,
                    this.bitData = n,
                    t < 0)
                        throw "Invalid argument";
                    this.bitData = n.slice()
                }
                return e.makeBytes = function(t) {
                    for (var n = new p, r = 0, i = t; r < i.length; r++) {
                        var o = i[r];
                        n.appendBits(o, 8)
                    }
                    return new e(e.Mode.BYTE,t.length,n.array)
                }
                ,
                e.makeNumeric = function(t) {
                    if (!this.NUMERIC_REGEX.test(t))
                        throw "String contains non-numeric characters";
                    for (var n = new p, r = 0; r < t.length; ) {
                        var i = Math.min(t.length - r, 3);
                        n.appendBits(parseInt(t.substr(r, i), 10), 3 * i + 1),
                        r += i
                    }
                    return new e(e.Mode.NUMERIC,t.length,n.array)
                }
                ,
                e.makeAlphanumeric = function(t) {
                    if (!this.ALPHANUMERIC_REGEX.test(t))
                        throw "String contains unencodable characters in alphanumeric mode";
                    var n, r = new p;
                    for (n = 0; n + 2 <= t.length; n += 2) {
                        var i = 45 * e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));
                        i += e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n + 1)),
                        r.appendBits(i, 11)
                    }
                    return n < t.length && r.appendBits(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)), 6),
                    new e(e.Mode.ALPHANUMERIC,t.length,r.array)
                }
                ,
                e.makeSegments = function(t) {
                    return "" == t ? [] : this.NUMERIC_REGEX.test(t) ? [e.makeNumeric(t)] : this.ALPHANUMERIC_REGEX.test(t) ? [e.makeAlphanumeric(t)] : [e.makeBytes(e.toUtf8ByteArray(t))]
                }
                ,
                e.makeEci = function(t) {
                    var n = new p;
                    if (t < 0)
                        throw "ECI assignment value out of range";
                    if (t < 128)
                        n.appendBits(t, 8);
                    else if (t < 16384)
                        n.appendBits(2, 2),
                        n.appendBits(t, 14);
                    else {
                        if (!(t < 1e6))
                            throw "ECI assignment value out of range";
                        n.appendBits(6, 3),
                        n.appendBits(t, 21)
                    }
                    return new e(e.Mode.ECI,0,n.array)
                }
                ,
                e.prototype.getData = function() {
                    return this.bitData.slice()
                }
                ,
                e.getTotalBits = function(e, t) {
                    for (var n = 0, r = 0, i = e; r < i.length; r++) {
                        var o = i[r]
                          , a = o.mode.numCharCountBits(t);
                        if (o.numChars >= 1 << a)
                            return 1 / 0;
                        n += 4 + a + o.bitData.length
                    }
                    return n
                }
                ,
                e.toUtf8ByteArray = function(e) {
                    e = encodeURI(e);
                    for (var t = [], n = 0; n < e.length; n++)
                        "%" != e.charAt(n) ? t.push(e.charCodeAt(n)) : (t.push(parseInt(e.substr(n + 1, 2), 16)),
                        n += 2);
                    return t
                }
                ,
                e.NUMERIC_REGEX = /^[0-9]*$/,
                e.ALPHANUMERIC_REGEX = /^[A-Z0-9 $%*+.\/:-]*$/,
                e.ALPHANUMERIC_CHARSET = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",
                e
            }()
              , d = function() {
                function e(t) {
                    if (this.coefficients = [],
                    t < 1 || t > 255)
                        throw "Degree out of range";
                    for (var n = this.coefficients, r = 0; r < t - 1; r++)
                        n.push(0);
                    n.push(1);
                    var i = 1;
                    for (r = 0; r < t; r++) {
                        for (var o = 0; o < n.length; o++)
                            n[o] = e.multiply(n[o], i),
                            o + 1 < n.length && (n[o] ^= n[o + 1]);
                        i = e.multiply(i, 2)
                    }
                }
                return e.prototype.getRemainder = function(t) {
                    for (var n = this.coefficients.map((function(e) {
                        return 0
                    }
                    )), r = function(t) {
                        var r = t ^ n.shift();
                        n.push(0),
                        i.coefficients.forEach((function(t, i) {
                            return n[i] ^= e.multiply(t, r)
                        }
                        ))
                    }, i = this, o = 0, a = t; o < a.length; o++)
                        r(a[o]);
                    return n
                }
                ,
                e.multiply = function(e, t) {
                    if (e >>> 8 != 0 || t >>> 8 != 0)
                        throw "Byte out of range";
                    for (var n = 0, r = 7; r >= 0; r--)
                        n = n << 1 ^ 285 * (n >>> 7),
                        n ^= (t >>> r & 1) * e;
                    if (n >>> 8 != 0)
                        throw "Assertion error";
                    return n
                }
                ,
                e
            }()
              , p = function() {
                function e() {
                    this.array = []
                }
                return e.prototype.appendBits = function(e, t) {
                    if (t < 0 || t > 31 || e >>> t != 0)
                        throw "Value out of range";
                    for (var n = t - 1; n >= 0; n--)
                        this.array.push(e >>> n & 1)
                }
                ,
                e
            }();
            (function(e) {
                var t = function() {
                    function e(e, t) {
                        this.ordinal = e,
                        this.formatBits = t
                    }
                    return e.LOW = new e(0,1),
                    e.MEDIUM = new e(1,0),
                    e.QUARTILE = new e(2,3),
                    e.HIGH = new e(3,2),
                    e
                }();
                e.Ecc = t
            }
            )(_ || (_ = {})),
            function(e) {
                var t = function() {
                    function e(e, t) {
                        this.modeBits = e,
                        this.numBitsCharCount = t
                    }
                    return e.prototype.numCharCountBits = function(e) {
                        return this.numBitsCharCount[Math.floor((e + 7) / 17)]
                    }
                    ,
                    e.NUMERIC = new e(1,[10, 12, 14]),
                    e.ALPHANUMERIC = new e(2,[9, 11, 13]),
                    e.BYTE = new e(4,[8, 16, 16]),
                    e.KANJI = new e(8,[8, 10, 12]),
                    e.ECI = new e(7,[0, 0, 0]),
                    e
                }();
                e.Mode = t
            }(u || (u = {}));
            var h = 128
              , m = "#ffffff"
              , f = "#000000"
              , g = "#07f";
            function v(t, n, r, i) {
                if ("string" != typeof t)
                    throw new TypeError("Enter text for encoding");
                var o = e(e(e({}, "object" == typeof n && null !== n ? n : {}), "object" == typeof i && null !== i ? i : {}), {
                    qrSize: "object" == typeof n && null !== n && "number" == typeof n.qrSize ? n.qrSize : n,
                    className: "object" == typeof n && null !== n && "string" == typeof n.className ? n.className : r
                })
                  , a = [_.Ecc.LOW, _.Ecc.MEDIUM, _.Ecc.QUARTILE, _.Ecc.HIGH]
                  , s = {
                    qrSize: "number" == typeof o.qrSize ? o.qrSize : h,
                    className: "string" == typeof o.className ? o.className : r || "",
                    isShowLogo: !!o.isShowLogo || !1,
                    isShowBackground: !!o.isShowBackground || !1,
                    foregroundColor: "string" == typeof o.foregroundColor ? o.foregroundColor : f,
                    backgroundColor: "string" == typeof o.backgroundColor ? o.backgroundColor : m,
                    logoColor: "string" == typeof o.logoColor ? o.logoColor : g,
                    suffix: o.suffix ? o.suffix.toString() : "0",
                    logoData: "string" == typeof o.logoData ? o.logoData : null,
                    ecc: "number" == typeof o.ecc && a[o.ecc] ? o.ecc : 3
                }
                  , l = u.makeSegments(t)
                  , d = _.encodeSegments(l, a[s.ecc], 1, 40, -1, !0);
                return c(d, s)
            }
            return {
                createQR: v
            }
        }()
    },
    489588: (e,t,n)=>{
        "use strict";
        t.isIPadOS = t.isIPad = void 0;
        var r = n(279405);
        function i(e) {
            e || (e = r.canUseDOM ? navigator.userAgent.toLowerCase() : "");
            var t = m(e)
              , n = t || -1 !== e.indexOf("ipad")
              , i = !n && -1 !== e.search(/iphone|ipod/)
              , o = i || n
              , a = o && e.match(/OS ([\d_]+) like Mac OS X/i)
              , s = 0
              , c = 0;
            t ? (s = 13,
            c = 0) : a && (s = +(a = a[1].split("_"))[0],
            c = +a[1]),
            a = null;
            var _ = s < 13 && !(11 === s && c < 3)
              , l = o && function(e) {
                if (!r.canUseDOM)
                    return !1;
                var t = window.webkit;
                if (t && t.messageHandlers)
                    return !0;
                var n = /constructor/i.test(String(window.HTMLElement))
                  , i = !!window.indexedDB;
                if (-1 === e.indexOf("safari") || -1 === e.indexOf("version") || navigator.standalone) {
                    if (!i && n || !window.statusbar || !window.statusbar.visible)
                        ;
                    else if (!n || i)
                        return !0
                } else
                    ;return !1
            }(e)
              , u = !1;
            return r.canUseDOM && (u = o && 375 === screen.width && 812 === screen.height && 3 === window.devicePixelRatio),
            {
                isIPad: n,
                isIPhone: i,
                isIOS: o,
                isIPadOS: t,
                iosMajor: s,
                iosMinor: c,
                isWKWebView: l,
                isScrollBasedViewport: _,
                isIPhoneX: u,
                isIOSChrome: -1 !== e.search(/crios/i)
            }
        }
        var o = i()
          , a = o.isIPad
          , s = o.isIPhone
          , c = o.isIOS
          , _ = o.isIPadOS
          , l = o.iosMajor
          , u = o.iosMinor
          , d = o.isWKWebView
          , p = o.isScrollBasedViewport
          , h = o.isIPhoneX;
        function m(e) {
            if (!r.canUseDOM)
                return !1;
            var t = !/ipad|iphone|ipod/.test(e);
            return !(!/mac os/.test(e) || !t || "boolean" != typeof navigator.standalone)
        }
        o.isIOSChrome,
        t.isIPadOS = _,
        t.isIPad = a
    }
    ,
    279405: (e,t)=>{
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.onDOMLoaded = function(e) {
            "loading" !== document.readyState ? e() : document.addEventListener("DOMContentLoaded", e)
        }
        ,
        t.canUseEventListeners = t.canUseDOM = void 0;
        var n = !("undefined" == typeof window || !window.document || !window.document.createElement);
        t.canUseDOM = n;
        var r = n && !!window.addEventListener;
        t.canUseEventListeners = r
    }
    ,
    349598: (e,t,n)=>{
        "use strict";
        n.d(t, {
            classNames: ()=>i
        });
        var r = n(190484);
        function i() {
            for (var e = [], t = arguments.length, n = new Array(t), i = 0; i < t; i++)
                n[i] = arguments[i];
            return n.forEach((function(t) {
                if (t)
                    switch ((0,
                    r.default)(t)) {
                    case "string":
                        e.push(t);
                        break;
                    case "object":
                        Object.keys(t).forEach((function(n) {
                            t[n] && e.push(n)
                        }
                        ));
                        break;
                    default:
                        e.push("".concat(t))
                    }
            }
            )),
            e.join(" ")
        }
    }
    ,
    812226: (e,t,n)=>{
        "use strict";
        function r(e) {
            return navigator.clipboard ? function(e) {
                return navigator.clipboard.writeText(e).then((function() {
                    return !0
                }
                ))
            }(e) : function(e) {
                return new Promise((function(t, n) {
                    var r = document.createElement("textarea")
                      , i = document.createRange();
                    r.value = e,
                    r.style.position = "fixed",
                    r.contentEditable = "true",
                    document.body.appendChild(r),
                    r.focus(),
                    r.select(),
                    i.selectNodeContents(r);
                    var o = window.getSelection();
                    o && (o.removeAllRanges(),
                    o.addRange(i)),
                    r.setSelectionRange(0, 999999);
                    try {
                        document.execCommand("copy") ? t(!0) : n(new Error("copy failed"))
                    } catch (e) {
                        n(e)
                    }
                    o && o.removeAllRanges(),
                    document.body.removeChild(r)
                }
                ))
            }(e)
        }
        n.d(t, {
            copyTextToClipboard: ()=>r
        })
    }
    ,
    898520: (e,t,n)=>{
        "use strict";
        function r(e) {
            return !isNaN(parseFloat(e)) && isFinite(e) && !Array.isArray(e)
        }
        n.d(t, {
            isNumeric: ()=>r
        })
    }
    ,
    992888: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isDateToday: ()=>r,
            getLastDayOfMonth: ()=>i
        });
        n(221058);
        function r(e) {
            var t = new Date
              , n = t.getDate()
              , r = t.getMonth()
              , i = t.getFullYear();
            return e.getFullYear() === i && e.getMonth() === r && e.getDate() === n
        }
        function i(e, t) {
            return 2 == +t ? function(e) {
                return e % 4 == 0 && e % 100 != 0 || e % 400 == 0
            }(e) ? 29 : 28 : t > 0 && (t < 8 && t % 2 == 0 || t > 7 && t % 2 == 1) ? 30 : 31
        }
    }
    ,
    936212: (e,t,n)=>{
        "use strict";
        n.d(t, {
            formatDuration: ()=>i
        });
        var r = n(221058);
        function i(e) {
            if (!e)
                return "";
            var t = Math.floor(e / 3600)
              , n = Math.floor(e / 60) % 60
              , i = e % 60;
            return e >= 3600 ? [t, (0,
            r.leadingZero)(n), (0,
            r.leadingZero)(i)].join(":") : [n, (0,
            r.leadingZero)(i)].join(":")
        }
    }
    ,
    229327: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isEqual: ()=>i
        });
        var r = n(677270);
        function i(e, t) {
            if (e === t)
                return !0;
            if (null == e || null == t || !(0,
            r.isObjectLike)(e) && !(0,
            r.isObjectLike)(t))
                return e != e && t != t;
            if ((0,
            r.isObjectLike)(e) && (0,
            r.isObjectLike)(t)) {
                if (Object.keys(e).length !== Object.keys(t).length)
                    return !1;
                for (var n in e) {
                    if (!e.hasOwnProperty(n) || !t.hasOwnProperty(n))
                        return !1;
                    if (!i(e[n], t[n]))
                        return !1
                }
                return !0
            }
            return !1
        }
    }
    ,
    610628: (e,t,n)=>{
        "use strict";
        function r(e) {
            var t, n, r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 50, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : window;
            return function() {
                for (var o = arguments.length, a = new Array(o), s = 0; s < o; s++)
                    a[s] = arguments[s];
                var c = i
                  , _ = Date.now();
                t && _ < t + r ? (clearTimeout(n),
                n = setTimeout((function() {
                    t = _,
                    e.apply(c, a)
                }
                ), r)) : (t = _,
                e.apply(c, a))
            }
        }
        function i(e, t) {
            var n, r, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : window, o = function() {
                return e.apply(i, r)
            };
            return function() {
                for (var e = arguments.length, i = new Array(e), a = 0; a < e; a++)
                    i[a] = arguments[a];
                r = i,
                clearTimeout(n),
                n = setTimeout(o, t)
            }
        }
        n.d(t, {
            throttle: ()=>r,
            debounce: ()=>i
        })
    }
    ,
    677453: (e,t,n)=>{
        "use strict";
        function r(e) {
            var t = e instanceof HTMLElement;
            if ("undefined" == typeof window || !t)
                return {
                    top: 0,
                    left: 0,
                    width: 0,
                    height: 0
                };
            var n = e
              , r = n.getBoundingClientRect()
              , i = document.body
              , o = document.documentElement
              , a = window.pageYOffset || o.scrollTop || i.scrollTop
              , s = window.pageXOffset || o.scrollLeft || i.scrollLeft
              , c = o.clientTop || i.clientTop || 0
              , _ = o.clientLeft || i.clientLeft || 0;
            return {
                top: Math.round(r.top + a - c),
                left: Math.round(r.left + s - _),
                width: n.offsetWidth,
                height: n.offsetHeight
            }
        }
        n.d(t, {
            getOffsetRect: ()=>r
        })
    }
    ,
    659397: (e,t,n)=>{
        "use strict";
        n.d(t, {
            classNames: ()=>r.classNames,
            copyTextToClipboard: ()=>i.copyTextToClipboard,
            isNumeric: ()=>o.isNumeric,
            isEqual: ()=>a.isEqual,
            isDateToday: ()=>s.isDateToday,
            getLastDayOfMonth: ()=>s.getLastDayOfMonth,
            formatDuration: ()=>c.formatDuration,
            throttle: ()=>_.throttle,
            debounce: ()=>_.debounce,
            getOffsetRect: ()=>l.getOffsetRect,
            leadingZero: ()=>u.leadingZero,
            isObjectLike: ()=>d.isObjectLike,
            isArray: ()=>d.isArray,
            isObject: ()=>d.isObject,
            isUndefined: ()=>d.isUndefined,
            isString: ()=>d.isString,
            localStorage: ()=>p.localStorage
        });
        var r = n(349598)
          , i = n(812226)
          , o = n(898520)
          , a = n(229327)
          , s = n(992888)
          , c = n(936212)
          , _ = n(610628)
          , l = n(677453)
          , u = n(221058)
          , d = n(677270)
          , p = n(933656)
    }
    ,
    221058: (e,t,n)=>{
        "use strict";
        function r(e) {
            return e >= 10 ? String(e) : "0" + String(e)
        }
        n.d(t, {
            leadingZero: ()=>r
        })
    }
    ,
    933656: (e,t,n)=>{
        "use strict";
        n.d(t, {
            localStorage: ()=>u
        });
        var r, i = n(306610), o = n(5991), a = n(896156), s = function() {
            function e() {
                var t = this;
                (0,
                i.default)(this, e),
                (0,
                a.default)(this, "data", {}),
                (0,
                a.default)(this, "getItem", (function(e) {
                    return t.data.hasOwnProperty(e) ? t.data[e] : null
                }
                )),
                (0,
                a.default)(this, "keys", (function() {
                    return Object.keys(t.data)
                }
                ))
            }
            return (0,
            o.default)(e, [{
                key: "setItem",
                value: function(e, t) {
                    this.data[e] = String(t)
                }
            }, {
                key: "removeItem",
                value: function(e) {
                    delete this.data[e]
                }
            }, {
                key: "clear",
                value: function() {
                    this.data = {}
                }
            }, {
                key: "key",
                value: function(e) {
                    return Object.keys(this.data)[e]
                }
            }, {
                key: "length",
                get: function() {
                    return Object.keys(this.data).length
                }
            }]),
            e
        }(), c = "vk-ls-dummy", _ = "test";
        function l() {
            if (r)
                return r;
            try {
                if (window.localStorage.setItem(c, _),
                _ !== window.localStorage.getItem(c))
                    throw new Error("localStorage is broken");
                window.localStorage.removeItem(c),
                r = window.localStorage
            } catch (e) {
                r = new s
            }
            return r
        }
        var u = {
            setItem: function(e, t) {
                return l().setItem(e, t)
            },
            getItem: function(e) {
                return l().getItem(e)
            },
            removeItem: function(e) {
                return l().removeItem(e)
            },
            clear: function() {
                return l().clear()
            },
            length: function() {
                return l().length
            },
            key: function(e) {
                return l().key(e)
            },
            keys: function() {
                var e = l();
                return e instanceof s ? e.keys() : Object.keys(e)
            },
            getPrefixedKeys: function(e) {
                return u.keys().filter((function(t) {
                    return t.startsWith(e)
                }
                ))
            }
        }
    }
    ,
    677270: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isObjectLike: ()=>i,
            isArray: ()=>o,
            isObject: ()=>a,
            isUndefined: ()=>s,
            isString: ()=>c
        });
        var r = n(190484);
        function i(e) {
            return "object" === (0,
            r.default)(e) && null !== e
        }
        function o(e) {
            return Array.isArray(e)
        }
        function a(e) {
            return "[object Object]" === Object.prototype.toString.call(e)
        }
        function s(e) {
            return void 0 === e
        }
        function c(e) {
            return "string" == typeof e
        }
    }
    ,
    467253: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.74 3.26a.9.9 0 0 1 0 1.28L9.27 8l3.47 3.46a.9.9 0 0 1 .08 1.18l-.08.1a.9.9 0 0 1-1.28 0L8 9.27l-3.46 3.47a.9.9 0 0 1-1.28-1.28L6.73 8 3.26 4.54a.9.9 0 0 1-.08-1.18l.08-.1a.9.9 0 0 1 1.28 0L8 6.73l3.46-3.47a.9.9 0 0 1 1.28 0Z"/></svg>',
                name: "cancel_16"
            }
        }
        n.d(t, {
            getIcon16Cancel: ()=>r
        })
    }
    ,
    169828: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" fill="none" viewBox="0 0 12 16"><path fill="currentColor" d="M7.23 8 3.86 4.64a.9.9 0 0 1 1.28-1.28l4 4a.9.9 0 0 1 0 1.28l-4 4a.9.9 0 0 1-1.28-1.28L7.23 8Z"/></svg>',
                name: "chevron_16"
            }
        }
        n.d(t, {
            getIcon16Chevron: ()=>r
        })
    }
    ,
    185563: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M5.63 13.23c.74.23 1.55.36 2.38.36 3.77 0 6.99-2.62 6.99-6.04 0-3.43-3.22-6.05-6.99-6.05S1.02 4.12 1.02 7.55c0 1.13.36 2.18.98 3.08a7.35 7.35 0 0 1-.78 2.32 57.53 57.53 0 0 0-.14.33.87.87 0 0 0 .83 1.22c1.56-.06 2.84-.45 3.72-1.27Zm-.38-1.7.83.27c.6.19 1.25.3 1.93.3 3.18 0 5.49-2.18 5.49-4.55S11.2 3 8.01 3C4.83 3 2.52 5.17 2.52 7.55c0 .8.26 1.56.72 2.23l.3.43-.04.52a6.09 6.09 0 0 1-.44 1.77 13.08 13.08 0 0 1-.16.39 3.35 3.35 0 0 0 1.7-.76l.65-.6Z" clip-rule="evenodd"/></svg>',
                name: "message_outline_16"
            }
        }
        n.d(t, {
            getIcon16MessageOutline: ()=>r
        })
    }
    ,
    62816: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.21 2.93a6 6 0 0 0-8.64 7.62 1 1 0 1 1-1.8.86A8 8 0 1 1 8 16a1 1 0 1 1 0-2 6 6 0 0 0 3.21-11.07z" fill="currentColor" fill-rule="evenodd"/></svg>',
                name: "spinner_16"
            }
        }
        n.d(t, {
            getIcon16Spinner: ()=>r
        })
    }
    ,
    743707: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M10 2c.41 0 .75.34.75.75v6.5h6.5a.75.75 0 0 1 0 1.5h-6.5v6.5a.75.75 0 0 1-1.5 0v-6.5h-6.5a.75.75 0 0 1 0-1.5h6.5v-6.5c0-.41.34-.75.75-.75z" fill="currentColor" fill-rule="evenodd"/></svg>',
                name: "add_20"
            }
        }
        n.d(t, {
            getIcon20Add: ()=>r
        })
    }
    ,
    784502: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.72 4.72c.3-.3.77-.3 1.06 0L10 8.94l4.22-4.22a.75.75 0 1 1 1.06 1.06L11.06 10l4.22 4.22a.75.75 0 1 1-1.06 1.06L10 11.06l-4.22 4.22a.75.75 0 0 1-1.06-1.06L8.94 10 4.72 5.78a.75.75 0 0 1 0-1.06z" fill="currentColor" fill-rule="evenodd"/></svg>',
                name: "cancel_20"
            }
        }
        n.d(t, {
            getIcon20Cancel: ()=>r
        })
    }
    ,
    244030: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M17.03 4.97c.3.3.3.77 0 1.06l-9 9c-.3.3-.77.3-1.06 0l-3.5-3.5a.75.75 0 1 1 1.06-1.06l2.97 2.97 8.47-8.47c.3-.3.77-.3 1.06 0z" fill="currentColor" fill-rule="evenodd"/></svg>',
                name: "check_20"
            }
        }
        n.d(t, {
            getIcon20Check: ()=>r
        })
    }
    ,
    385023: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h12.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75z"/><path clip-rule="evenodd" d="M19.28 12.22c.3.3.3.77 0 1.06l-4.5 4.5c-.29.29-.76.29-1.05 0l-2.5-2.5a.75.75 0 0 1 1.05-1.06l1.97 1.97 3.97-3.97c.3-.3.77-.3 1.06 0z" fill-rule="evenodd"/></g></svg>',
                name: "list_add_outline_20"
            }
        }
        n.d(t, {
            getIcon20ListAddOutline: ()=>r
        })
    }
    ,
    14377: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><clipPath id="list_play_outline_20__a"><path d="M0 0h20v20H0z"/></clipPath><g clip-path="url(#list_play_outline_20__a)" fill="currentColor"><path d="M19.68 11.43c.43.25.43.89 0 1.14l-4.73 2.84c-.42.25-.95-.06-.95-.57V9.16c0-.5.53-.82.95-.57zM2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75z"/></g></svg>',
                name: "list_play_outline_20"
            }
        }
        n.d(t, {
            getIcon20ListPlayOutline: ()=>r
        })
    }
    ,
    165266: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" fill="currentColor"/></svg>',
                name: "more_20"
            }
        }
        n.d(t, {
            getIcon20More: ()=>r
        })
    }
    ,
    685098: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#stars_20__clip0)" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 8.13a7.85 7.85 0 0 1-1.5 2.37A7.83 7.83 0 0 1 8.13 12c.83.37 1.72.86 2.37 1.51a7.83 7.83 0 0 1 1.5 2.37c.37-.84.86-1.72 1.51-2.37a7.83 7.83 0 0 1 2.37-1.5 7.85 7.85 0 0 1-2.37-1.51 7.83 7.83 0 0 1-1.5-2.37zm-.78-2.18c-.42 1.32-1.02 2.72-1.78 3.49-.77.77-2.17 1.36-3.49 1.78a21.07 21.07 0 0 1-1.16.34c-.38.1-.38.79 0 .9a27.15 27.15 0 0 1 .91.25l.25.08c1.32.42 2.72 1.01 3.49 1.78.76.77 1.36 2.17 1.78 3.49a20.84 20.84 0 0 1 .27.9l.07.26c.1.38.79.38.9 0a27.49 27.49 0 0 1 .25-.91l.08-.25c.42-1.32 1.01-2.72 1.78-3.49s2.17-1.36 3.49-1.78a20.84 20.84 0 0 1 .9-.27l.26-.07c.38-.1.38-.8 0-.9a27.49 27.49 0 0 1-.91-.25 20.84 20.84 0 0 1-.25-.08c-1.32-.42-2.72-1.01-3.49-1.78s-1.36-2.17-1.78-3.49a21.13 21.13 0 0 1-.34-1.16c-.1-.38-.8-.38-.9 0a27.15 27.15 0 0 1-.25.91 21.13 21.13 0 0 1-.08.25z"/><path d="M4.37.76a.39.39 0 0 0-.73 0L3.22 2A1.93 1.93 0 0 1 2 3.22l-1.24.41a.39.39 0 0 0 0 .74l1.24.4A1.93 1.93 0 0 1 3.22 6l.41 1.24a.39.39 0 0 0 .74 0L4.77 6A1.93 1.93 0 0 1 6 4.78l1.24-.42a.39.39 0 0 0 0-.73L6 3.24A1.93 1.93 0 0 1 4.78 2L4.36.76z"/></g><defs><clipPath id="stars_20__clip0"><path fill="#fff" d="M0 0h20v20H0z"/></clipPath></defs></svg>',
                name: "stars_20"
            }
        }
        n.d(t, {
            getIcon20Stars: ()=>r
        })
    }
    ,
    177801: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.08 2.65A2.21 2.21 0 0 1 14.64 2c.57 0 1.14.22 1.57.65l1.14 1.14a2.21 2.21 0 0 1 0 3.13l-.94.94-9.17 9.18A3.3 3.3 0 0 1 4.9 18H3a1 1 0 0 1-1-1v-1.9a3.29 3.29 0 0 1 .96-2.33l8.13-8.13 1.99-2zm2.28 4.13.93-.92a.71.71 0 0 0 0-1.02l-1.14-1.13a.71.71 0 0 0-.5-.21.71.71 0 0 0-.51.2l-.93.93 2.15 2.15zm-3.22-1.07-8.11 8.12a1.79 1.79 0 0 0-.53 1.26v1.11a.3.3 0 0 0 .3.3h1.11c.47 0 .93-.19 1.27-.53l8.1-8.11-2.15-2.15z" fill="currentColor"/></svg>',
                name: "write_outline_20"
            }
        }
        n.d(t, {
            getIcon20WriteOutline: ()=>r
        })
    }
    ,
    439026: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="browser_back_24__Master" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="browser_back_24__browser_back_24"><path id="browser_back_24__body" d="M0 0h24v24H0z"/><path d="m8.66 12 7.12 7.12a1.1 1.1 0 1 1-1.56 1.56l-7.9-7.9a1.1 1.1 0 0 1 0-1.56l7.9-7.9a1.1 1.1 0 0 1 1.56 1.56L8.66 12Z" id="browser_back_24__Path" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',
                name: "browser_back_24"
            }
        }
        n.d(t, {
            getIcon24BrowserBack: ()=>r
        })
    }
    ,
    420130: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="cancel_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="cancel_24__cancel_24"><path id="cancel_24__Bounds" d="M0 0h24v24H0z"/><path d="M18.3 5.7a.99.99 0 0 0-1.4 0L12 10.6 7.1 5.7a.99.99 0 0 0-1.4 1.4l4.9 4.9-4.9 4.9a.99.99 0 0 0 1.4 1.4l4.9-4.9 4.9 4.9a.99.99 0 0 0 1.4-1.4L13.4 12l4.9-4.9a.99.99 0 0 0 0-1.4Z" id="cancel_24__Mask" fill="currentColor"/></g></g></svg>',
                name: "cancel_24"
            }
        }
        n.d(t, {
            getIcon24Cancel: ()=>r
        })
    }
    ,
    806439: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21Z" fill="currentColor"/></svg>',
                name: "check_circle_off_24"
            }
        }
        n.d(t, {
            getIcon24CheckCircleOff: ()=>r
        })
    }
    ,
    219202: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24a12 12 0 1 0 0-24 12 12 0 0 0 0 24Zm6.2-14.8a1 1 0 0 0-1.4-1.4L10 14.58l-2.8-2.8a1 1 0 0 0-1.4 1.42l3.5 3.5a1 1 0 0 0 1.4 0l7.5-7.5Z" fill="currentColor"/></svg>',
                name: "check_circle_on_24"
            }
        }
        n.d(t, {
            getIcon24CheckCircleOn: ()=>r
        })
    }
    ,
    221324: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="favorite_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="favorite_24__favorite_24"><path id="favorite_24__Bounds" d="M0 0h24v24H0z"/><path d="m15.34 8.48 4.43.43c1.54.15 2.02 1.65.83 2.64l-3.47 2.88 1.29 4.7c.42 1.54-.9 2.48-2.2 1.55L12 17.7l-4.21 2.98c-1.31.92-2.63 0-2.2-1.55l1.28-4.7-3.47-2.88c-1.2-1-.72-2.5.83-2.64l4.43-.43 1.95-4.5c.6-1.4 2.17-1.4 2.78 0l1.95 4.5Z" id="favorite_24__Mask" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',
                name: "favorite_24"
            }
        }
        n.d(t, {
            getIcon24Favorite: ()=>r
        })
    }
    ,
    908928: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M12.55 4.7a.6.6 0 0 0-1.1 0L9.83 8.6a.9.9 0 0 1-.77.55l-4.13.26a.6.6 0 0 0-.35 1.05l3.26 2.86a.9.9 0 0 1 .29.9l-.94 3.84a.6.6 0 0 0 .89.66l3.47-2a.9.9 0 0 1 .9 0l3.47 2a.6.6 0 0 0 .88-.66l-.93-3.85a.9.9 0 0 1 .29-.89l3.26-2.85a.6.6 0 0 0-.35-1.06l-4.13-.26a.9.9 0 0 1-.77-.56zM9.78 4a2.4 2.4 0 0 1 4.44 0l1.4 3.39 3.56.23a2.4 2.4 0 0 1 1.43 4.2l-2.86 2.5.8 3.32a2.4 2.4 0 0 1-3.53 2.64L12 18.54l-3.02 1.74a2.4 2.4 0 0 1-3.54-2.64l.8-3.32-2.85-2.5a2.4 2.4 0 0 1 1.43-4.2l3.56-.23z" fill="currentColor" fill-rule="evenodd"/></svg>',
                name: "favorite_outline_24"
            }
        }
        n.d(t, {
            getIcon24FavoriteOutline: ()=>r
        })
    }
    ,
    563175: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="pause_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="pause_24__pause_24"><path id="pause_24__Rectangle-737" d="M0 0h24v24H0z"/><path d="M6.79 5H8.7c.45 0 .61.05.78.13.16.1.29.22.38.38.08.17.13.33.13.78V17.7c0 .45-.05.61-.13.78a.91.91 0 0 1-.38.38c-.17.08-.33.13-.78.13H6.8c-.45 0-.61-.05-.78-.13a.91.91 0 0 1-.38-.38c-.08-.17-.13-.33-.13-.78V6.3c0-.45.05-.61.13-.78.1-.16.22-.29.38-.38.17-.08.33-.13.78-.13Zm8 0h1.92c.45 0 .61.05.78.13.16.1.29.22.38.38.08.17.13.33.13.78V17.7c0 .45-.05.61-.13.78a.91.91 0 0 1-.38.38c-.17.08-.33.13-.78.13H14.8c-.45 0-.61-.05-.78-.13a.91.91 0 0 1-.38-.38c-.08-.17-.13-.33-.13-.78V6.3c0-.45.05-.61.13-.78.1-.16.22-.29.38-.38.17-.08.33-.13.78-.13Z" id="pause_24__Mask" fill="currentColor"/></g></g></svg>',
                name: "pause_24"
            }
        }
        n.d(t, {
            getIcon24Pause: ()=>r
        })
    }
    ,
    996512: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.67 10.92c.82.49.82 1.67 0 2.16l-8.79 5.17c-.83.5-1.88-.1-1.88-1.08V6.83c0-.97 1.05-1.57 1.88-1.08l8.8 5.17Z" fill="currentColor"/></svg>',
                name: "play_24"
            }
        }
        n.d(t, {
            getIcon24Play: ()=>r
        })
    }
    ,
    355645: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="song_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="song_24__song_24"><path id="song_24__Bounds" d="M0 0h24v24H0z"/><path d="M13 11.48v5.65c0 4.52-.87 5.39-4.37 5.85C6.96 23.19 5 22.44 5 19.8c0-1.28.8-2.5 2.46-2.81 1.27-.25-.09.02 2.78-.52.7-.13.77-.37.77-.9V3.97c0-1.24.67-1.69 2.66-2.09l4.68-.87c.37-.07.65.07.65.49v4.05c0 .42-.17.6-.59.68l-4.86.86c-.38.1-.55.36-.55.74v3.64Z" id="song_24__Mask" fill="currentColor"/></g></g></svg>',
                name: "song_24"
            }
        }
        n.d(t, {
            getIcon24Song: ()=>r
        })
    }
    ,
    60804: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M16.4 5.08A8.2 8.2 0 0 0 4.57 15.49a.9.9 0 0 1-1.63.77A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.4-15.12z" fill="currentColor" fill-rule="evenodd"/></svg>',
                name: "spinner_24"
            }
        }
        n.d(t, {
            getIcon24Spinner: ()=>r
        })
    }
    ,
    785039: (e,t,n)=>{
        "use strict";
        function r() {
            return {
                icon: '<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28 52a24 24 0 1 0 0-48 24 24 0 0 0 0 48z" fill="#FC3"/><path fill-rule="evenodd" clip-rule="evenodd" d="M31.86 40.86a1.29 1.29 0 0 1 0 2.57h-7.72a1.29 1.29 0 0 1 0-2.57h7.72zm-1.29-12c.86-.86 1.72 1.71 6 1.71 3.43 0 6.43-1.71 6.86-.86.43.86-2.57 4.29-6.86 4.29-5.14 0-6.86-4.29-6-5.14zm-5.14 0c.86.85-.86 5.14-6 5.14-4.29 0-7.29-3.43-6.86-4.29.43-.85 3.43.86 6.86.86 4.28 0 5.14-2.57 6-1.71zm9.43-10.29c.85-.86 2.57 2.14 6 3.43s4.28 1.29 4.28 2.57c0 .86-.85 1.72-5.14 0-4.29-1.71-6-5.14-5.14-6zm-13.72 0c.86.86-.85 4.29-5.14 6-4.29 1.72-5.14.86-5.14 0 0-1.28.85-1.28 4.28-2.57 3.43-1.29 5.15-4.29 6-3.43z" fill="#805446"/></svg>',
                name: "pensive_face_56"
            }
        }
        n.d(t, {
            getIcon56PensiveFace: ()=>r
        })
    }
    ,
    626555: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>i
        });
        n(751876);
        var r = n(667294);
        n(45697);
        class i extends r.Component {
            static mapFilterOptionsToDropdownOptions(e) {
                return e ? e.map((e=>[e.constant, e.name])) : []
            }
            constructor(e) {
                super(e),
                this.state = {
                    filterWrapElementId: this.props.config.id + "_filter_wrap",
                    filterElementId: this.props.config.id + "_filter"
                }
            }
            componentDidMount() {
                var e = this.props.config.placeholder || ""
                  , t = this.onChange.bind(this);
                this.state.input = new Dropdown(ge(this.state.filterElementId),i.mapFilterOptionsToDropdownOptions(this.props.config.options),{
                    selectedItems: this.props.config.selected,
                    onChange: t,
                    placeholder: e,
                    multiselect: !this.props.singleSelectCrutch,
                    autocomplete: !0,
                    width: this.props.width,
                    big: !0,
                    maxItems: this.props.maxItems
                })
            }
            componentDidUpdate(e, t, n) {
                if (this.props.config.selected !== e.config.selected && Array.isArray(this.props.config.selected) && 0 === this.props.config.selected.length)
                    this.state.input.clear();
                else if (this.props.singleSelectCrutch) {
                    var r = this.state.input.selectedItems()
                      , i = r && r[0] && r[0][0] ? r[0][0] : null;
                    if (!i)
                        return;
                    this.props.config.selected !== e.config.selected && i != this.props.config.selected && this.state.input.selectItem(this.props.config.selected[0])
                }
            }
            onChange(e) {
                var t = i.convertOldValueToJson(e);
                this.props.onFilterChange(this.props.config.id, t)
            }
            static convertOldValueToJson(e) {
                return e ? e.split(",") : null
            }
            render() {
                var e = this.props.config.header ? r.createElement("div", {
                    className: "search_filter_main"
                }, this.props.config.header) : "";
                return r.createElement("div", {
                    className: "filter"
                }, e, r.createElement("div", {
                    id: this.state.filterWrapElementId,
                    className: "search_control"
                }, r.createElement("input", {
                    id: this.state.filterElementId,
                    type: "text",
                    className: "dark"
                })))
            }
        }
        i.defaultProps = {
            width: 200,
            maxItems: 50,
            singleSelectCrutch: !1
        }
    }
    ,
    336680: (e,t,n)=>{
        "use strict";
        n.d(t, {
            SECOND: ()=>r,
            MINUTE: ()=>i,
            HOUR: ()=>o,
            DAY: ()=>a,
            WEEK: ()=>s,
            MONTH: ()=>c,
            ruLocale: ()=>_,
            EVENTS: ()=>l
        });
        var r = 1e3
          , i = 60 * r
          , o = 60 * i
          , a = 24 * o
          , s = 7 * a
          , c = 30 * a
          , _ = "ru-RU"
          , l = {
            MOUSE_DOWN: "mousedown",
            KEY_DOWN: "keydown",
            SCROLL: "scroll",
            CLICK: "click"
        }
    }
    ,
    222994: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AudioAds: ()=>c
        });
        n(66108),
        n(296253),
        n(751876),
        n(175115);
        var r = n(40906)
          , i = n(695690)
          , o = n(200134)
          , a = n(12733)
          , s = n(479957);
        class c {
            constructor(e, t, n) {
                this._isPlaying = !1,
                this._adsCurrentProgress = 0,
                this._adman = null,
                this._admanLoaded = !1,
                this._adEvents = [],
                this.player = e || {},
                this.playerVersion = t || null,
                this._startAdsTO = null,
                this._adsConfig = null,
                this._duration = 0,
                this.isMvk = Boolean(n),
                this.adsStatUrl = this.isMvk ? "audio" : "al_audio.php"
            }
            isPlaying() {
                return this._isPlaying
            }
            setAdsConfig(e) {
                this._adsConfig = e
            }
            getCurrentProgress() {
                return this._adsCurrentProgress
            }
            getDuration() {
                return this._duration
            }
            loadAdman(e) {
                var t = t=>e && e(t);
                if (this._admanLoaded)
                    t();
                else {
                    var n = 0;
                    (0,
                    i.loadScript)(c.ADMAN_SRC, {
                        onLoad: ()=>{
                            this._admanLoaded = !0,
                            t()
                        }
                        ,
                        onError: ()=>{
                            window.abp ? (this._admanLoaded = !0,
                            t()) : (3 === (n += 1) && (this._admanLoaded = !0),
                            t("script_load_fail"))
                        }
                    })
                }
            }
            _fetchAd(e, t, n, i, a) {
                this.loadAdman((s=>{
                    if (!window.AdmanHTML)
                        return this._sendEvent("no_adman", t, c.AD_TYPE, s),
                        i && i();
                    this._adman = new AdmanHTML;
                    var l = this._adsConfig || vk.audioAdsConfig || window.audioAdsConfig
                      , u = {
                        _SITEID: 276,
                        ver: 251116,
                        vk_id: vk.id,
                        duration: e.duration,
                        content_id: _(e.ownerId, e.id),
                        vk_catid: c.CAT_IDS[t] || c.CAT_IDS.other,
                        sign: l.sign || ""
                    };
                    Object.assign(u, e.ads || {}),
                    nav.objLoc && nav.objLoc.preview && (u.preview = (0,
                    r.intval)(nav.objLoc.preview)),
                    cur.adsPreview && (u.preview = 1,
                    u.vk_id = 398724832),
                    this._adman.setDebug(!!u.preview),
                    this._adman.onError((()=>i && i())),
                    this._adman.onReady((()=>{
                        if (this._adman) {
                            var e = this._adman.getBannersForSection(c.AD_TYPE);
                            e && e.length ? "statistics" === e[0].type ? (this._play(!0, t),
                            i && i()) : (this._sendEvent("received", t),
                            n ? (this._sendEvent("rejected", t, c.AD_TYPE, a),
                            this.deinit(),
                            i && i()) : (this._sendEvent("ready", t),
                            this.player.notify(o.events.AD_READY),
                            this._play(!1, t, i))) : (n || this._sendEvent("not_received", t),
                            i && i())
                        }
                    }
                    )),
                    this._adman.init({
                        slot: 3514,
                        wrapper: document.createElement("div"),
                        params: u,
                        browser: {
                            adBlock: !!window.abp,
                            mobile: !1
                        }
                    }),
                    this._sendEvent("requested", t)
                }
                ))
            }
            _sendEvent(e, t, n, i) {
                var o = n ? "/" + n : ""
                  , a = i ? "/" + i : "";
                this._adEvents.push(e + "/" + t + o + a),
                clearTimeout(this._adEventDelay),
                this._adEventDelay = setTimeout((()=>{
                    ajax.post(this.adsStatUrl, {
                        act: "ad_event",
                        events: this._adEvents.join(","),
                        v: this.playerVersion,
                        abp: (0,
                        r.intval)(window.abp)
                    }, {
                        onFail: ()=>!0
                    }),
                    this._adEvents = []
                }
                ), 500)
            }
            _play(e, t, n) {
                this._adman.onCompleted((()=>{
                    this.deinit(!0),
                    e ? this._sendEvent("statistics", t) : (this.player.notify(o.events.PROGRESS, 0),
                    this.player.notify(o.events.AD_COMPLETED),
                    this._isPlaying = !1,
                    this._adsCurrentProgress = 0,
                    this._sendEvent("completed", t),
                    window.setDocumentTitle && window.setDocumentTitle(this._adsPrevTitle),
                    n && n())
                }
                )),
                this._adman.onStarted((()=>{
                    e || (this.player.setIsPlaying(!0),
                    this.player.notify(o.events.PLAY),
                    this.player.notify(o.events.PROGRESS, 0),
                    this.player.notify(o.events.AD_STARTED),
                    this.updateVolume(),
                    this._sendEvent("started", t),
                    window.statlogsValueEvent && (0,
                    s.statlogsValueEvent)("audio_web_ad_link", "show"))
                }
                )),
                this._adman.onPaused((()=>{
                    this.player.setIsPlaying(!1),
                    this.player.notify(o.events.PAUSE)
                }
                )),
                this._adman.onPlayed((()=>{
                    this.player.setIsPlaying(!0),
                    this.player.notify(o.events.PLAY)
                }
                ));
                var i = [.25, .5, .75];
                if (this._adman.onTimeRemained((e=>{
                    this._duration = isNaN(e.duration) ? 0 : e.duration,
                    this._adsCurrentProgress = (isNaN(e.percent) ? 0 : e.percent) / 100,
                    this.player.notify(o.events.PROGRESS, this._adsCurrentProgress, this._duration),
                    (0,
                    r.each)(i, ((e,n)=>{
                        if (this._adsCurrentProgress >= n)
                            return i.shift(),
                            this._sendEvent("progress_" + (0,
                            r.intval)(100 * n), t),
                            !1
                    }
                    ))
                }
                )),
                this._adman.start(c.AD_TYPE),
                e)
                    return n && n();
                this._isPlaying = !0,
                this._adsPrevTitle = document.title,
                this.isMvk || window.setDocumentTitle(getLang("global_audio_ad"))
            }
            updateVolume() {
                this._adman && this._adman.setVolume(.7 * this.player.getVolume())
            }
            deinit(e) {
                this._adman = null,
                !e && this.player.notify(o.events.AD_DEINITED)
            }
            pause() {
                this._adman && (this.player.setIsPlaying(!1),
                this._adman.pause())
            }
            stop() {
                this._adman && (this.player.setIsPlaying(!1),
                this._adman.stop())
            }
            resume() {
                this._adman && (this.player.setIsPlaying(!0),
                this._adman.resume(),
                this.player.notify(o.events.PLAY))
            }
            checkPlay(e, t) {
                var n = this.player._getPlayingContextSection()
                  , r = this._isAllowed(e)
                  , i = r.type
                  , o = r.reason
                  , a = ()=>t && t();
                switch (i) {
                case c.ALLOW_ALLOWED:
                    this._fetchAd(e, n, !1, a);
                    break;
                case c.ALLOW_DISABLED:
                    a();
                    break;
                case c.ALLOW_REJECT:
                    this._fetchAd(e, n, !0, !1, o),
                    a()
                }
            }
            hasAdsSupport() {
                var e = (0,
                r.intval)(browser.version.split(".")[0]);
                return !(browser.safari && e < 14 || browser.chrome && e < 50)
            }
            _isAllowed(e) {
                if (vk.widget)
                    return {
                        type: c.ALLOW_DISABLED
                    };
                if ((0,
                a.isPodcast)(e))
                    return {
                        type: c.ALLOW_DISABLED
                    };
                var t = this._adsConfig || vk.audioAdsConfig || window.audioAdsConfig;
                if (t) {
                    if (!t.enabled || !this.hasAdsSupport())
                        return {
                            type: c.ALLOW_DISABLED
                        };
                    if (cur.adsPreview)
                        return {
                            type: c.ALLOW_ALLOWED
                        };
                    if (t.day_limit_reached)
                        return {
                            type: c.ALLOW_REJECT,
                            reason: c.REJECT_REASON_LIMIT
                        };
                    var n = this.player._getPlayingContextSection();
                    return t.sections.indexOf(n) > -1 ? {
                        type: c.ALLOW_ALLOWED
                    } : {
                        type: c.ALLOW_REJECT,
                        reason: c.REJECT_REASON_SECTION
                    }
                }
                return {
                    type: c.ALLOW_REJECT,
                    reason: c.REJECT_REASON_UNKNOWN
                }
            }
            startPlay(e, t) {
                this.checkPlay(e, t)
            }
        }
        function _(e, t) {
            for (var n = e.toString(16), r = t.toString(16); r.length < 8; )
                r = "0" + r;
            return n + r
        }
        c.ADMAN_SRC = "//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",
        c.CAT_IDS = {
            my: 101,
            my_playlists: 101,
            audio_feed: 109,
            recent: 113,
            user_wall: 104,
            group_wall: 104,
            user_list: 102,
            group_list: 103,
            user_playlists: 102,
            group_playlists: 103,
            feed: 105,
            search: 110,
            global_search: 110,
            replies: 104,
            im: 106,
            group_status: 104,
            user_status: 104,
            recs: 107,
            recs_audio: 107,
            recs_album: 107,
            other: 114
        },
        c.AD_TYPE = "preroll",
        c.ALLOW_DISABLED = 1,
        c.ALLOW_ALLOWED = 2,
        c.ALLOW_REJECT = 3,
        c.REJECT_REASON_UNKNOWN = "unknown",
        c.REJECT_REASON_LIMIT = "track_limit_exceeded",
        c.REJECT_REASON_SECTION = "section_not_allowed"
    }
    ,
    200134: (e,t,n)=>{
        "use strict";
        n.d(t, {
            events: ()=>r
        });
        var r = {
            CURRENT_CHANGED: "curr",
            PLAY: "start",
            PLAY_REQUESTED: "request_play",
            PAUSE: "pause",
            STOP: "stop",
            UPDATE: "update",
            LOADED: "loaded",
            ENDED: "ended",
            FAILED: "failed",
            BUFFERED: "buffered",
            PROGRESS: "progress",
            VOLUME: "volume",
            PLAYLIST_CHANGED: "plchange",
            ADDED: "added",
            REMOVED: "removed",
            FREQ_UPDATE: "freq",
            SEEK: "seek",
            PLAY_NEXT: "play_next",
            AD_READY: "ad_ready",
            AD_DEINITED: "ad_deinit",
            AD_STARTED: "ad_started",
            AD_COMPLETED: "ad_completed",
            START_LOADING: "start_load",
            CAN_PLAY: "actual_start",
            SELECT: "select",
            DESELECT: "deselect",
            EMPTY_PLAYLIST: "empty_playlist",
            NOT_FOUND_PLAYLIST: "not_found_playlist",
            INIT: "init",
            REQUEST_EXPANDED: "request_expanded",
            MUSIC_AUDIOS_ADD: "music_audios_add",
            MUSIC_AUDIOS_DELETE: "music_audios_delete",
            MUSIC_PLAYLISTS_ADD: "music_playlists_add",
            MUSIC_OWNERS_FOLLOW: "music_owners_follow",
            MUSIC_OWNERS_UNFOLLOW: "music_owners_unfollow",
            CURATOR_FOLLOW: "curator_follow",
            CURATOR_UNFOLLOW: "curator_unfollow",
            PLACEHOLDER_REMOVE: "placeholder_remove"
        }
    }
    ,
    615152: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AudioPlayerHTML5: ()=>a
        });
        n(940851),
        n(296253);
        var r = n(366792)
          , i = n(471323)
          , o = n(318941);
        class a {
            constructor(e) {
                this.type = "html5",
                this.opts = e || {},
                this._audioNodes = [],
                this._currentAudioEl = this._createAudioNode(),
                this._prefetchAudioEl = this._createAudioNode()
            }
            destroy() {}
            getPlayedTime() {
                for (var e = this._currentAudioEl.played, t = 0, n = 0; n < e.length; n++)
                    t += e.end(n) - e.start(n);
                return t
            }
            getCurrentTime() {
                return this._currentAudioEl.currentTime
            }
            clearAudioNode() {
                this._currentAudioEl = this._createAudioNode(i.SILENCE)
            }
            isCurrent(e) {
                return e === this._currentAudioEl
            }
            _createAudioNode(e) {
                var t = this
                  , n = new o.AudioHlsNode({
                    onBufferUpdate: ()=>{
                        this.isCurrent(n) && this.opts.onBufferUpdate(this.getCurrentBuffered())
                    }
                    ,
                    onProgressUpdate: ()=>{
                        this.isCurrent(n) && n.src !== i.SILENCE && this.opts.onProgressUpdate(this.getCurrentProgress(), this.getPlayedTime(), this.getCurrentTime())
                    }
                    ,
                    onEnd: ()=>{
                        this.isCurrent(n) && n.src !== i.SILENCE && this.opts.onEnd()
                    }
                    ,
                    onSeeked: ()=>{
                        this.isCurrent(n) && this.opts.onSeeked()
                    }
                    ,
                    onSeek: ()=>{
                        this.isCurrent(n) && this.opts.onSeek()
                    }
                    ,
                    onFail: e=>{
                        this._prefetchAudioEl === n ? this._prefetchAudioEl = this._createAudioNode() : this.isCurrent(n) && n.src !== i.SILENCE && (this._hlsError = e,
                        this.opts.onFail && this.opts.onFail())
                    }
                    ,
                    onDurationChange: ()=>{
                        this.isCurrent(n) && this._seekOnReady && n.duration > 0 && (this.seek(this._seekOnReady),
                        this._seekOnReady = !1)
                    }
                    ,
                    onCanPlay: ()=>{
                        this.isCurrent(n) && this.opts.onCanPlay && this.opts.onCanPlay()
                    }
                    ,
                    onPause: function() {
                        t.isCurrent(n) && n.src !== i.SILENCE && t.opts.onPause(...arguments)
                    },
                    onPlay: function() {
                        t.isCurrent(n) && n.src !== i.SILENCE && t.opts.onPlay(...arguments)
                    },
                    volume: this.hasOwnProperty("_volume") ? this._volume : this.opts.defaultVolume
                },e);
                return n
            }
            onReady(e) {
                e()
            }
            prefetch(e) {
                this._prefetchAudioEl && this._prefetchAudioEl.url === (0,
                r.audioUnmaskSource)(e) || (this._prefetchAudioEl = this._createAudioNode(e))
            }
            seek(e) {
                var t = this._currentAudioEl;
                t.duration > 0 && t.src && t.src !== i.SILENCE ? t.currentTime = t.duration * e : this._seekOnReady = e
            }
            setVolume(e) {
                void 0 === e && (e = this._currentAudioEl.volume),
                this._currentAudioEl.volume = e,
                this._prefetchAudioEl && (this._prefetchAudioEl.volume = e),
                this._volume = e
            }
            setPlaybackRate(e) {
                this._currentAudioEl.playbackRate = e
            }
            getCurrentProgress() {
                return this._currentAudioEl.currentProgress
            }
            getCurrentBuffered() {
                return this._currentAudioEl && this._currentAudioEl.currentBuffered
            }
            getDuration() {
                return this._currentAudioEl && this._currentAudioEl.duration
            }
            isFullyLoaded() {
                return this._currentAudioEl.isFullyLoaded
            }
            setUrl(e) {
                var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ()=>{}
                ;
                if (!e)
                    return n && n(!1);
                var o = (0,
                r.audioUnmaskSource)(e)
                  , a = this._currentAudioEl;
                if (this._currentAudioEl.src && this._currentAudioEl.src !== i.SILENCE && (this._seekOnReady = !1),
                this._currentAudioEl.src === o)
                    return this.opts.onCanPlay && this.opts.onCanPlay(),
                    void (n && n(!0));
                if (this._prefetchAudioEl) {
                    if (this._prefetchAudioEl.src === o)
                        return this._currentAudioEl.pause(),
                        this._currentAudioEl.setUrl(i.SILENCE),
                        this._prefetchAudioEl.readyState >= 3 && setTimeout((()=>this.opts.onCanPlay && this.opts.onCanPlay())),
                        this._currentAudioEl = this._prefetchAudioEl,
                        this._prefetchAudioEl = null,
                        void (n && n(!0));
                    o !== i.SILENCE && this._prefetchAudioEl.setUrl(i.SILENCE)
                }
                a.src !== o && (t = a.setUrl(o).then((()=>this._stopFrequencyAnalise()))),
                t ? t.then((()=>n(!0))).catch((()=>n(!1))) : n(!0)
            }
            play() {
                this._stopFrequencyAnalise();
                var e = this._currentAudioEl;
                if (e.src) {
                    var t = e.play();
                    return this._startFrequencyAnalise(),
                    t
                }
                return Promise.resolve()
            }
            preparePlay() {
                if (browser.safari)
                    return this._currentAudioEl.play()
            }
            _startFrequencyAnalise() {
                function e(e, t, n, r) {
                    return (n - t) * e / r + t
                }
                function t(e, t) {
                    return Math.random() * (t - e) + e
                }
                this._stopFrequencyAnalise();
                var n = 999
                  , r = null
                  , i = null;
                this._freqUpdateInterval = setInterval((()=>{
                    var o;
                    this._currentAudioEl.paused ? o = [0, 0, 0, 0] : (++n > 3 && (n = 0,
                    r = i,
                    i = [t(.7, 1), t(.55, .8), t(.3, .55), t(.03, .45)],
                    r || (r = [t(.7, 1), t(.55, .8), t(.3, .55), t(.03, .45)])),
                    o = [e(n, r[0], i[0], 3), e(n, r[1], i[1], 3), e(n, r[2], i[2], 3), e(n, r[3], i[3], 3)]),
                    this.opts.onFrequency && this.opts.onFrequency(o)
                }
                ), 50)
            }
            _stopFrequencyAnalise() {
                clearInterval(this._freqUpdateInterval),
                this.opts.onFrequency && this.opts.onFrequency([0, 0, 0, 0])
            }
            pause() {
                this._currentAudioEl.pause(),
                this._stopFrequencyAnalise()
            }
            stop() {
                this._currentAudioEl.pause(),
                this.seek(0),
                this._stopFrequencyAnalise()
            }
            _setFadeVolumeInterval(e) {
                if (e) {
                    if (!this._fadeVolumeWorker && window.Worker && window.Blob) {
                        var t = new Blob(["\n          var interval;\n          onmessage = function(e) {\n            clearInterval(interval);\n            if (e.data == 'start') {\n              interval = setInterval(function() { postMessage({}); }, 20);\n            }\n          }\n        "]);
                        try {
                            this._fadeVolumeWorker = new Worker(window.URL.createObjectURL(t))
                        } catch (e) {
                            this._fadeVolumeWorker = !1
                        }
                    }
                    this._fadeVolumeWorker ? (this._fadeVolumeWorker.onmessage = e,
                    this._fadeVolumeWorker.postMessage("start")) : this._fadeVolumeInterval = setInterval(e, 60)
                } else
                    this._fadeVolumeWorker && (this._fadeVolumeWorker.terminate(),
                    this._fadeVolumeWorker = null),
                    this._fadeVolumeInterval && clearInterval(this._fadeVolumeInterval)
            }
            fadeVolume(e, t, n) {
                e = Math.max(0, Math.min(1, e));
                var r = this._currentAudioEl
                  , i = 0;
                if (t) {
                    var o = e - r.volume;
                    i = o / (t / 20 || 1)
                } else
                    i = e < r.volume ? -.06 : .001;
                if (Math.abs(e - r.volume) <= .001)
                    return this._setFadeVolumeInterval(),
                    n && n();
                var a = r.volume;
                this._setFadeVolumeInterval((()=>{
                    !t && i > 0 && (i *= 1.35),
                    a += i;
                    if (i < 0 ? a <= e : a >= e)
                        return this.setVolume(e),
                        this._setFadeVolumeInterval(),
                        n && n();
                    this.setVolume(a)
                }
                ))
            }
            getErrorData() {
                var e = this._currentAudioEl.error || {};
                return {
                    is_hls: this._currentAudioEl.hls ? 1 : 0,
                    url: this._currentAudioEl.src,
                    error_code: e.code,
                    error_message: e.message,
                    hls_error: this._hlsError ? JSON.stringify(this._hlsError) : null
                }
            }
        }
    }
    ,
    185850: (e,t,n)=>{
        "use strict";
        n.d(t, {
            TYPE_ADDED: ()=>u,
            TYPE_REMOVED: ()=>d,
            TYPE_RECOMMENDATION_REMOVED: ()=>p,
            TYPE_SHOW_ALBUM: ()=>h,
            TYPE_SHARE_AUDIO: ()=>m,
            TYPE_BROADCASTING: ()=>w,
            SUBTYPE_UPLOAD: ()=>R,
            SUBTYPE_ON: ()=>L,
            SUBTYPE_OFF: ()=>k,
            AudioStats: ()=>W
        });
        n(175115),
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(751876);
        var r = n(343860)
          , i = n(609720)
          , o = n(479957)
          , a = n(171171)
          , s = n(26330);
        function c() {
            return c = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            c.apply(this, arguments)
        }
        function _(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return l(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return l(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function l(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var u = "added"
          , d = "removed"
          , p = "recommendation_removed"
          , h = "show_album"
          , m = "share_audio"
          , f = "start"
          , g = "stop"
          , v = "volume"
          , E = "rewind"
          , y = "play_further"
          , w = "broadcast"
          , b = "default"
          , C = "next_track"
          , T = "prev_track"
          , D = "auto"
          , A = "interruption"
          , S = "pause"
          , P = "new"
          , O = "close_app"
          , I = "queue"
          , M = "pause"
          , R = "upload"
          , L = "on"
          , k = "off"
          , B = "session_end"
          , x = {
            [f]: 1,
            [g]: 2,
            [v]: 3,
            [E]: 4,
            [y]: 5,
            [u]: 6,
            [d]: 7,
            [p]: 8,
            [h]: 9,
            [m]: 10,
            [w]: 11,
            curator: 12
        }
          , N = {
            [b]: 1,
            [C]: 2,
            [T]: 3,
            [D]: 4,
            [A]: 5,
            [S]: 6,
            [P]: 7,
            [O]: 8,
            [I]: 9,
            [M]: 10,
            [R]: 11,
            [L]: 12,
            [k]: 13,
            follow: 14,
            unfollow: 15
        }
          , U = "audio_unique_unauth_id";
        class W {
            constructor(e) {
                if (this.playerAdapter = e,
                this.listenedData = null,
                this.sendTimeout = null,
                this.currentAudioId = null,
                this.currentAudio = null,
                this.currentAudioTrackCode = null,
                this.pausedAudioId = null,
                this.playlistChanged = !1,
                this.currentPosition = 0,
                this.currentListened = 0,
                this.playedTime = 0,
                this.adsCompleted = !1,
                this.wasEnded = !1,
                vk.id)
                    this.uniqueUserId = null;
                else {
                    var t = s.default.get(U);
                    t ? this.uniqueUserId = t : (this.uniqueUserId = a(),
                    s.default.set(U, this.uniqueUserId))
                }
                this.debug = e.isDebug(),
                this.onVolume = (0,
                i.debounce)(this.onVolume.bind(this), 300),
                this.playerAdapter.listenPlay(this.onPlay, this),
                this.playerAdapter.listenPause(this.onPause, this),
                this.playerAdapter.listenStop(this.onPause, this),
                this.playerAdapter.listenProgress(this.onProgress, this),
                this.playerAdapter.listenVolume(this.onVolume, this),
                this.playerAdapter.listenSeek(this.onSeek, this),
                this.playerAdapter.listenPlaylistChanged(this.onPlaylistChanged, this),
                this.playerAdapter.listenEnded(this.onEnded, this),
                this.playerAdapter.listenPlayNext(this.onPlayNext, this),
                this.playerAdapter.listenAdCompleted(this.onAdCompleted, this),
                this.onPageClose = this.onPageClose.bind(this)
            }
            listenOnBeforeUnload() {
                addEvent(window, "beforeunload", this.onPageClose)
            }
            stopListenOnBeforeUnload() {
                removeEvent(window, "beforeunload", this.onPageClose)
            }
            canOperate() {
                return !this.playerAdapter.isPodcast() && !this.playerAdapter.isArticleTts() && !this.playerAdapter.isAdPlaying()
            }
            getCurrentAudioParams() {
                var e = this.currentAudioId || this.playerAdapter.getAudioId();
                if (e) {
                    var t = _(e.split("_"), 2);
                    return {
                        ownerId: t[0],
                        audioId: t[1],
                        trackCode: this.currentAudioTrackCode || this.playerAdapter.getAudioTrackCode()
                    }
                }
                return {}
            }
            getEnvParams() {
                return {
                    state: this.playerAdapter.getState(),
                    context: this.playerAdapter.getContext(),
                    ref: window.cur && vk.widget ? String(cur.widgetReferrer || "").substring(0, 20) : ""
                }
            }
            getListenedTime() {
                return Math.round(this.playerAdapter.getListenedTime()) || 0
            }
            getPlaySubtype() {
                if (this.playerAdapter.isAutoPlayed())
                    return D;
                var e = this.playerAdapter.getSequence();
                if (e)
                    return e > 0 ? C : T;
                var t = this.pausedAudioId
                  , n = this.playerAdapter.getAudioId();
                return t && n === t ? S : P
            }
            onPlay() {
                if (this.canOperate()) {
                    var e = this.playerAdapter.getAudio()
                      , t = e.fullId
                      , n = this.currentAudioId === t || !this.currentAudioId
                      , r = this.currentAudioId !== this.pausedAudioId
                      , i = this.playerAdapter.getListenedTime();
                    !n && r && this.onTrackSwitch(this.currentAudio, this.currentPlaylistId),
                    this.playedTime = Date.now(),
                    this.currentAudioId = t,
                    this.currentAudio = e,
                    this.currentAudioTrackCode = this.playerAdapter.getAudioTrackCode(),
                    this.currentPlaylistId = this.playerAdapter.getPlaylistId(),
                    this.wasEnded || this.playerAdapter.hasPrevAudio() && (!this.pausedAudioId || this.playerAdapter.isAutoPlayed()) ? (this.currentPosition = 0,
                    i = 0) : this.currentPosition = this.playerAdapter.getProgressInSeconds(),
                    this.currentListened = i,
                    this.sendCurrentAudioEvent({
                        type: f,
                        subtype: this.getPlaySubtype(),
                        position: this.currentPosition,
                        listened: i
                    }),
                    this.pausedAudioId = null,
                    this.playlistChanged = !1,
                    this.wasEnded = !1,
                    this.listenOnBeforeUnload()
                }
            }
            onPause() {
                var e = this.playerAdapter.getAudioId();
                if (this.canOperate() && e) {
                    var t = this.collectListenedData();
                    this.sendListenedDataDelayed(1e3, t),
                    setTimeout((()=>{
                        if (!(this.currentAudio && e !== this.currentAudio.fullId || Date.now() - this.playedTime < 150)) {
                            this.pausedAudioId = e;
                            var t = this.playerAdapter.getPausedBy(this.playedTime);
                            this.sendCurrentAudioEvent({
                                type: g,
                                subtype: t ? t === I ? I : A : M
                            })
                        }
                    }
                    ), 100),
                    this.stopListenOnBeforeUnload()
                }
            }
            onProgress() {
                this.playerAdapter.getProgress() < .01 || !this.playerAdapter.isPlaying() || (this.currentPosition = this.playerAdapter.getProgressInSeconds(),
                this.currentListened = this.playerAdapter.getListenedTime(),
                !this.pausedAudioId && Date.now() - this.playedTime > 150 && this.collectListenedData(),
                this.adsCompleted && (this.sendCurrentAudioEvent({
                    type: f,
                    subtype: this.getPlaySubtype(),
                    position: this.currentPosition
                }),
                this.adsCompleted = !1))
            }
            onVolume() {
                this.canOperate() && this.sendCurrentAudioEvent({
                    type: v,
                    subtype: b
                })
            }
            onSeek() {
                if (this.canOperate()) {
                    var e = {
                        position: this.currentPosition,
                        positionTo: this.playerAdapter.getProgressInSeconds()
                    };
                    e.position !== e.positionTo && this.sendCurrentAudioEvent(c({
                        type: E,
                        subtype: b
                    }, e))
                }
            }
            onPlaylistChanged() {
                this.canOperate() && (this.playlistChanged = !0)
            }
            onEnded() {
                this.listenedData && this.playerAdapter.isLastTrack() && (this.listenedData.end_stream_reason = B),
                this.wasEnded = !0,
                this.playerAdapter.isRepeatCurrentAudio() ? (this.sendCurrentAudioEvent({
                    type: g,
                    subtype: D
                }),
                this.collectListenedData(),
                this.sendListenedData()) : this.sendListenedDataDelayed(150)
            }
            onPlayNext(e, t) {
                if (this.canOperate()) {
                    var n = _(t.split("_"), 2)
                      , r = n[0]
                      , i = n[1];
                    this.sendAudioEvent({
                        type: y,
                        subtype: b,
                        ownerId: r,
                        audioId: i
                    })
                }
            }
            onAdCompleted() {
                this.adsCompleted = !0
            }
            onTrackSwitch(e, t) {
                if (e) {
                    var n = P
                      , r = this.playerAdapter.getSequence()
                      , i = _(e.fullId.split("_"), 2)
                      , o = i[0]
                      , a = i[1];
                    this.playerAdapter.isAutoPlayed() ? n = D : r && (n = r > 0 ? C : T),
                    this.sendCurrentAudioEvent({
                        type: g,
                        subtype: n,
                        position: this.currentPosition,
                        listened: this.currentListened,
                        trackCode: e.trackCode,
                        playlistId: t,
                        ownerId: o,
                        audioId: a
                    }),
                    this.wasEnded = !0,
                    this.collectListenedData(e),
                    this.collectListenedDataSwitch();
                    var s = this.listenedData;
                    this.listenedData = null,
                    this.sendListenedData(s)
                }
            }
            onPageClose() {
                this.playerAdapter.isPlaying() && (this.sendCurrentAudioEvent({
                    type: g,
                    subtype: O
                }),
                this.sendListenedData())
            }
            collectListenedDataSwitch() {
                if (this.listenedData) {
                    if (this.listenedData.end_stream_reason === B)
                        return;
                    var e = this.playerAdapter.isAutoPlayed()
                      , t = this.getListenedTime()
                      , n = this.playerAdapter.getSequence()
                      , r = null;
                    n && !e ? r = n > 0 ? "next_btn" : "prev" : this.playlistChanged && (r = "playlist_change"),
                    !r && e && (r = "playlist_next"),
                    this.listenedData.end_stream_reason = r || "new",
                    t && (this.listenedData.listened = t)
                }
            }
            collectListenedData() {
                var e = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null) || this.currentAudio;
                if (this.canOperate() && e) {
                    var t = e.fullId
                      , n = e.trackCode || this.playerAdapter.getAudioTrackCode()
                      , r = this.getListenedTime()
                      , i = e.urlHash;
                    if (i || console.log("no url hash"),
                    r && i) {
                        var o = {
                            audio_id: t,
                            listened: r,
                            context: this.playerAdapter.getContext(),
                            hash: i
                        };
                        return window.cur && vk.widget && (o.ref = cur.widgetReferrer || ""),
                        this.playerAdapter.hasSearchParams() && (o.search_params = JSON.stringify(this.playerAdapter.getSearchParams())),
                        this.playerAdapter.hasPlaylist() && (this.playerAdapter.isRealPlaylist() && (o.playlist_id = this.playerAdapter.getPlaylistId()),
                        this.playerAdapter.isShuffledPlaylist() && (o.shuffled = 1)),
                        n && (o.track_code = n),
                        this.playerAdapter.isRepeatCurrentAudio() ? o.repeat = "one" : this.playerAdapter.isRepeatAll() && (o.repeat = "all"),
                        this.playerAdapter.isAutoPlayed() && (o.auto = 1),
                        this.playerAdapter.hasPrevAudio() && (o.prev_audio_id = this.playerAdapter.getPrevAudioId()),
                        this.playerAdapter.hasPrevPlaylist() && this.playerAdapter.isRealPrevPlaylist() && (o.prev_playlist_id = this.playerAdapter.getPrevPlaylistId()),
                        this.playerAdapter.isPlaying() || (o.end_stream_reason = "stop_btn"),
                        o.state = document.hidden ? "background" : "app",
                        this.listenedData = o,
                        this.sendListenedDataDelayed(1e4, o),
                        o
                    }
                }
            }
            sendListenedData() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
                clearTimeout(this.sendTimeout);
                var t = e || this.listenedData;
                this.listenedData = null,
                t && t.listened && (this.uniqueUserId && (t.unique_id = this.uniqueUserId),
                this.playerAdapter.sendListenedData(t))
            }
            sendListenedDataDelayed() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0
                  , t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                clearTimeout(this.sendTimeout),
                this.sendTimeout = setTimeout((()=>this.sendListenedData(t)), e)
            }
            serializeEvent(e) {
                var t = [x[e.type], N[e.subtype], 1];
                return e.audioId ? t.push(e.ownerId + "_" + e.audioId) : t.push(0),
                e.trackCode ? t.push(e.trackCode) : t.push(0),
                e.state ? t.push(e.state) : t.push(r.UNKNOWN_STATE),
                e.ref ? t.push(e.ref) : t.push(""),
                e.context ? t.push(e.context) : t.push("other"),
                e.volume || 0 === e.volume ? t.push(e.volume) : t.push(this.playerAdapter.getVolume()),
                e.position || 0 === e.position ? t.push(e.position) : t.push(this.playerAdapter.getProgressInSeconds()),
                e.shuffle ? t.push(e.shuffle ? 1 : 0) : t.push(0),
                e.repeat ? t.push(e.repeat) : t.push(0),
                e.listened ? t.push(Math.max(e.listened, 0)) : t.push(0),
                e.playlistId ? t.push(e.playlistId) : t.push(""),
                e.targetOwnerId ? t.push(e.targetOwnerId) : t.push(0),
                this.uniqueUserId ? t.push(this.uniqueUserId) : t.push(""),
                e.positionTo ? t.push(e.positionTo) : t.push(null),
                t
            }
            sendEvent(e) {
                this.debug && (console.log("audio stats event", e.type, e.subtype, e),
                window._statForTest || (window._statForTest = []),
                window._statForTest.push(e)),
                (0,
                o.statlogsValueEvent)("audio_sts", ...this.serializeEvent(e))
            }
            sendCurrentAudioEvent(e) {
                this.sendEvent(c({
                    shuffle: this.playerAdapter.isShuffledPlaylist(),
                    repeat: this.playerAdapter.isRepeatCurrentAudio() ? 1 : this.playerAdapter.isRepeatAll() ? 2 : 0,
                    volume: this.playerAdapter.getVolume(),
                    position: this.playerAdapter.getProgressInSeconds(),
                    listened: this.getListenedTime(),
                    playlistId: this.playerAdapter.getPlaylistId()
                }, this.getEnvParams(), {}, this.getCurrentAudioParams(), {}, e))
            }
            sendAudioEvent(e) {
                var t = c({}, e, {}, this.getEnvParams());
                !vk.id && this.uniqueUserId && (t.uniqueUnauthId = this.uniqueUserId),
                this.sendEvent(t)
            }
            destroy() {
                this.playerAdapter.unListenAll(),
                this.stopListenOnBeforeUnload(),
                this.playerAdapter = null,
                this.listenedData = null,
                clearTimeout(this.sendTimeout)
            }
        }
    }
    ,
    343860: (e,t,n)=>{
        "use strict";
        n.d(t, {
            UNKNOWN_STATE: ()=>o,
            FULL_SCREEN_STATE: ()=>a,
            AudioStatsPlayerAdapter: ()=>s
        });
        var r = n(200134)
          , i = n(40906)
          , o = 0
          , a = 2;
        class s {
            constructor(e) {
                this.player = e,
                this.listeners = []
            }
            listen(e, t, n) {
                var r = t.bind(n || this);
                this.listeners.push({
                    event: e,
                    fn: t,
                    listener: r
                }),
                this.playerListen(e, r)
            }
            unListen(e, t) {
                var n = -1;
                if ((0,
                i.each)(this.listeners, ((r,i)=>{
                    if (i.event === e && i.listener === t)
                        return n = r,
                        !1
                }
                )),
                !(n < 0)) {
                    var r = this.listeners[n];
                    this.playerUnListen(e, r.listener),
                    this.listeners.splice(n, 1)
                }
            }
            unListenAll() {
                for (var e; e = this.listeners[0]; )
                    this.unListen(e.event, e.listener)
            }
            listenPlay(e, t) {
                this.listen(r.events.PLAY, e, t)
            }
            listenPause(e, t) {
                this.listen(r.events.PAUSE, e, t)
            }
            listenStop(e, t) {
                this.listen("stop", e, t)
            }
            listenProgress(e, t) {
                this.listen(r.events.PROGRESS, e, t)
            }
            listenVolume(e, t) {
                this.listen(r.events.VOLUME, e, t)
            }
            listenSeek(e, t) {
                this.listen(r.events.SEEK, e, t)
            }
            listenPlaylistChanged(e, t) {
                this.listen(r.events.PLAYLIST_CHANGED, e, t)
            }
            listenEnded(e, t) {
                this.listen(r.events.ENDED, e, t)
            }
            listenPlayNext(e, t) {
                this.listen(r.events.PLAY_NEXT, e, t)
            }
            listenAdCompleted(e, t) {
                this.listen(r.events.AD_COMPLETED, e, t)
            }
            playerListen(e, t) {
                this.player.subscribe(e, t)
            }
            playerUnListen(e, t) {
                this.player.unsubscribe(e, t)
            }
            getPausedBy() {
                return null
            }
            getState() {
                return document.hidden ? 1 : 3
            }
            getProgress() {
                return this.player.playerGetProgress()
            }
            getProgressInSeconds() {
                return this.player.getProgressInSeconds()
            }
            getVolume() {
                return this.player.getVolume()
            }
            getAudioId() {
                return this.player.getAudioId()
            }
            getAudio() {
                return this.player.getAudio()
            }
            getAudioTrackCode() {
                return this.player.getAudioTrackCode()
            }
            getPrevAudioId() {
                return this.player.getPrevAudioId()
            }
            getPrevPlaylistId() {
                return this.player.getPrevPlaylistId()
            }
            getPlaylistId() {
                return this.player.getPlaylistId()
            }
            getContext() {
                return this.player.getContext()
            }
            getSequence() {
                return this.player.getSequence()
            }
            getType() {
                return this.player.getType()
            }
            getListenedTime() {
                return isNaN(this.player.getListenedTime()) ? 0 : Math.round(this.player.getListenedTime())
            }
            getSearchParams() {
                return this.player.getSearchParams()
            }
            isPlaying() {
                return this.player.isPlaying()
            }
            isAutoPlayed() {
                return this.player.isAutoPlayed()
            }
            isRepeatCurrentAudio() {
                return this.player.isRepeatCurrentAudio()
            }
            isRepeatAll() {
                return this.player.isRepeatAll()
            }
            isShuffledPlaylist() {
                return this.player.isShuffledPlaylist()
            }
            isRealPlaylist() {
                return this.player.isRealPlaylist()
            }
            isRealPrevPlaylist() {
                return this.player.isRealPrevPlaylist()
            }
            isPodcast() {
                return this.player.isPodcast()
            }
            isArticleTts() {
                return this.player.isArticleTts()
            }
            isAdPlaying() {
                return this.player.ads.isPlaying()
            }
            isLastTrack() {
                return this.player.isLastTrack()
            }
            hasPrevAudio() {
                return this.player.hasPrevAudio()
            }
            hasPrevPlaylist() {
                return this.player.hasPrevPlaylist()
            }
            hasPlaylist() {
                return this.player.hasPlaylist()
            }
            hasSearchParams() {
                return this.player.hasSearchParams()
            }
            isDebug() {
                return !1
            }
            sendListenedData(e) {
                return this.player.sendListenedData(e)
            }
        }
    }
    ,
    471323: (e,t,n)=>{
        "use strict";
        n.d(t, {
            SILENCE: ()=>r,
            DEFAULT_VOLUME: ()=>i
        });
        var r = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"
          , i = .4761515102104643
    }
    ,
    820587: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AUDIO_PLAYER_ENUMS: ()=>r
        });
        var r = {
            AUDIO_ITEM_INDEX_ID: 0,
            AUDIO_ITEM_INDEX_OWNER_ID: 1,
            AUDIO_ITEM_INDEX_URL: 2,
            AUDIO_ITEM_INDEX_TITLE: 3,
            AUDIO_ITEM_INDEX_PERFORMER: 4,
            AUDIO_ITEM_INDEX_DURATION: 5,
            AUDIO_ITEM_INDEX_ALBUM_ID: 6,
            AUDIO_ITEM_INDEX_AUTHOR_LINK: 8,
            AUDIO_ITEM_INDEX_LYRICS: 9,
            AUDIO_ITEM_INDEX_FLAGS: 10,
            AUDIO_ITEM_INDEX_CONTEXT: 11,
            AUDIO_ITEM_INDEX_EXTRA: 12,
            AUDIO_ITEM_INDEX_HASHES: 13,
            AUDIO_ITEM_INDEX_COVER_URL: 14,
            AUDIO_ITEM_INDEX_ADS: 15,
            AUDIO_ITEM_INDEX_SUBTITLE: 16,
            AUDIO_ITEM_INDEX_MAIN_ARTISTS: 17,
            AUDIO_ITEM_INDEX_FEAT_ARTISTS: 18,
            AUDIO_ITEM_INDEX_ALBUM: 19,
            AUDIO_ITEM_INDEX_TRACK_CODE: 20,
            AUDIO_ITEM_INDEX_RESTRICTION: 21,
            AUDIO_ITEM_INDEX_ALBUM_PART: 22,
            AUDIO_ITEM_ACCESS_KEY: 24,
            AUDIO_ITEM_CHART_INFO_INDEX: 25,
            AUDIO_ITEM_INDEX_TRACK_PAGE_ID: 26,
            AUDIO_ITEM_HAS_LYRICS_BIT: 1,
            AUDIO_ITEM_CAN_ADD_BIT: 2,
            AUDIO_ITEM_CLAIMED_BIT: 4,
            AUDIO_ITEM_QUEUE_BIT: 8,
            AUDIO_ITEM_HQ_BIT: 16,
            AUDIO_ITEM_LONG_PERFORMER_BIT: 32,
            AUDIO_ITEM_UMA_BIT: 128,
            AUDIO_ITEM_REPLACEABLE: 512,
            AUDIO_ITEM_EXPLICIT_BIT: 1024,
            AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS: 500,
            AUDIO_RECOMS_TYPE_LISTENED: "recoms6",
            AUDIO_PLAYING_CLS: "audio_row__playing",
            AUDIO_CURRENT_CLS: "audio_row__current",
            AUDIO_DURATION_CLS: "audio_row__duration",
            AUDIO_LAYER_HEIGHT: 550,
            AUDIO_LAYER_MIN_WIDTH: 400,
            AUDIO_LAYER_MAX_WIDTH: 1e3,
            AUDIO_HQ_LABEL_CLS: "audio_hq_label_show",
            AUDIO_MAX_AUDIOS_IN_SNIPPET: 5,
            AUDIO_ROW_COVER_SIZE: 40,
            AUDIO_ROW_PLAY_SIZE: 24,
            AUDIO_ROW_ACTION_ROW_ITEM: '<button class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</button>',
            LOG_LS_KEY: "audiolog",
            ONBOARDING_ARTISTS_LS_KEY: "artists_onboarding"
        }
    }
    ,
    120290: (e,t,n)=>{
        "use strict";
        n.d(t, {
            asObject: ()=>a
        });
        n(751876);
        var r = n(820587)
          , i = n(844900)
          , o = n(40906);
        function a(e) {
            if (!e)
                return null;
            if ((0,
            o.isObject)(e))
                return e;
            if ("string" == typeof e)
                return {
                    id: e
                };
            var t = (e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES] || "").split("/")
              , n = (e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL] || "").split(",")
              , a = (0,
            i.getAudioPerformers)(e, !1);
            return {
                id: (0,
                o.intval)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]),
                owner_id: (0,
                o.intval)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]),
                ownerId: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID],
                fullId: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID] + "_" + e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID],
                title: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE] || "",
                subTitle: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE],
                performer: a,
                mainArtists: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],
                featArtists: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],
                authorLink: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK],
                duration: (0,
                o.intval)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]),
                lyrics: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS] || "",
                url: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL],
                flags: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS],
                context: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT],
                extra: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA],
                accessKey: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY],
                addHash: t[0] || "",
                editHash: t[1] || "",
                actionHash: t[2] || "",
                deleteHash: t[3] || "",
                replaceHash: t[4] || "",
                urlHash: t[5] || "",
                restoreHash: t[6] || "",
                canEdit: !!t[1],
                canDelete: !!t[3],
                isLongPerformer: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_LONG_PERFORMER_BIT,
                canAdd: !!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CAN_ADD_BIT),
                coverUrl_s: n[0],
                coverUrl_p: n[1],
                hasTrackPage: !!e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_PAGE_ID],
                trackPageId: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_PAGE_ID],
                isClaimed: !!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT),
                isFromQueue: !!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_QUEUE_BIT),
                isExplicit: !!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_EXPLICIT_BIT),
                isUMA: !!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_UMA_BIT),
                isReplaceable: !!(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] & r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_REPLACEABLE),
                ads: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS],
                album: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM],
                albumId: (0,
                o.intval)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]),
                albumPart: (0,
                o.intval)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]),
                trackCode: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE],
                restrictionStatus: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION],
                chartInfo: e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]
            }
        }
    }
    ,
    366792: (e,t,n)=>{
        "use strict";
        n.d(t, {
            audioUnmaskSource: ()=>a
        });
        n(751876);
        var r = n(40906)
          , i = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/="
          , o = {
            v: function(e) {
                return e.split("").reverse().join("")
            },
            r: function(e, t) {
                var n;
                e = e.split("");
                for (var r = i + i, o = e.length; o--; )
                    ~(n = r.indexOf(e[o])) && (e[o] = r.substr(n - t, 1));
                return e.join("")
            },
            s: function(e, t) {
                var n = e.length;
                if (n) {
                    var r = function(e, t) {
                        var n = e.length
                          , r = [];
                        if (n) {
                            var i = n;
                            for (t = Math.abs(t); i--; )
                                t = (n * (i + 1) ^ t + i) % n,
                                r[i] = t
                        }
                        return r
                    }(e, t)
                      , i = 0;
                    for (e = e.split(""); ++i < n; )
                        e[i] = e.splice(r[n - 1 - i], 1, e[i])[0];
                    e = e.join("")
                }
                return e
            },
            i: function(e, t) {
                return o.s(e, t ^ vk.id)
            },
            x: function(e, t) {
                var n = [];
                return t = t.charCodeAt(0),
                (0,
                r.each)(e.split(""), (function(e, r) {
                    n.push(String.fromCharCode(r.charCodeAt(0) ^ t))
                }
                )),
                n.join("")
            }
        };
        function a(e) {
            if ((!window.wbopen || !~(window.open + "").indexOf("wbopen")) && ~e.indexOf("audio_api_unavailable")) {
                var t, n, r = e.split("?extra=")[1].split("#"), i = "" === r[1] ? "" : s(r[1]);
                if (r = s(r[0]),
                "string" != typeof i || !r)
                    return e;
                for (var a = (i = i ? i.split(String.fromCharCode(9)) : []).length; a--; ) {
                    if (t = (n = i[a].split(String.fromCharCode(11))).splice(0, 1, r)[0],
                    !o[t])
                        return e;
                    r = o[t].apply(null, n)
                }
                if (r && "http" === r.substr(0, 4))
                    return r
            }
            return e
        }
        function s(e) {
            if (!e || e.length % 4 == 1)
                return !1;
            for (var t, n, r = 0, o = 0, a = ""; n = e.charAt(o++); )
                ~(n = i.indexOf(n)) && (t = r % 4 ? 64 * t + n : n,
                r++ % 4) && (a += String.fromCharCode(255 & t >> (-2 * r & 6)));
            return a
        }
    }
    ,
    597970: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            var n = "";
            return e.forEach((function(r, i) {
                var o = "/audio?performer=1&q=" + encodeURIComponent(r.name)
                  , a = window.getWebHost ? window.getWebHost() : "";
                r.id && (o = `/artist/${r.id}`),
                n += t ? `<a class="artist_link" href="${a}${o}">${r.name}</a>` : r.name,
                i < e.length - 1 && (n += ", ")
            }
            )),
            n
        }
        n.d(t, {
            getAudioArtistsString: ()=>r
        })
    }
    ,
    844900: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getAudioPerformers: ()=>a
        });
        n(59357);
        var r = n(12733)
          , i = n(597970)
          , o = n(820587);
        function a(e) {
            var t = !(arguments.length > 1 && void 0 !== arguments[1]) || arguments[1]
              , n = ""
              , a = !(0,
            r.isPodcast)(e) && t;
            if (Array.isArray(e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS]) && (n = (0,
            i.getAudioArtistsString)(e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS], a)),
            Array.isArray(e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS]) && (n += " feat. ",
            n += (0,
            i.getAudioArtistsString)(e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS], a)),
            !n) {
                var s = e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER] ? e[o.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g, "") : "";
                if (a) {
                    var c = "/audio?performer=1&q=" + encodeURIComponent(s);
                    n = `<a class="artist_link" data-performer="${s}" href="${c}">${s}</a>`
                } else
                    n = s
            }
            return n
        }
    }
    ,
    73665: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getCurrentAudio: ()=>i
        });
        var r = n(120290);
        function i() {
            try {
                return window.isMVK ? window.audio.getCurrent() : (0,
                r.asObject)(window.getAudioPlayer().getCurrentAudio())
            } catch (e) {
                return {
                    id: 0,
                    ownerId: 0
                }
            }
        }
    }
    ,
    849115: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isArticleTts: ()=>o
        });
        var r = n(820587)
          , i = n(40906);
        function o(e) {
            if (!e)
                return !1;
            var t = (0,
            i.isObject)(e) ? e.extra : e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];
            return (0,
            i.isObject)(t) || (t = JSON.parse(t || "{}")),
            !!t.articleTts
        }
    }
    ,
    12733: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isPodcast: ()=>o
        });
        var r = n(820587)
          , i = n(40906);
        function o(e) {
            if (!e)
                return !1;
            var t = (0,
            i.isObject)(e) ? e.extra : e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];
            return (0,
            i.isObject)(t) || (t = JSON.parse(t || "{}")),
            !!t.podcast
        }
    }
    ,
    893301: (e,t,n)=>{
        "use strict";
        n.d(t, {
            serializeAudio: ()=>i
        });
        n(176774);
        var r = n(820587);
        function i(e) {
            if (!e)
                return null;
            if (Array.isArray(e))
                return e;
            var t = [e.addHash, e.editHash, e.actionHash, e.deleteHash, e.replaceHash, e.urlHash, e.restoreHash].join("/")
              , n = [e.coverUrl_s, e.coverUrl_p].join(",")
              , i = [];
            return i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID] = e.id,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID] = e.owner_id,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL] = e.url,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE] = e.title,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER] = e.performer,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION] = e.duration,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID] = e.albumId,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK] = e.authorLink,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS] = e.lyrics,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS] = e.flags,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT] = e.context,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA] = e.extra,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES] = t,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL] = n,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS] = e.ads,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE] = e.subTitle,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS] = e.mainArtists,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS] = e.featArtists,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM] = e.album,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE] = e.trackCode,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION] = e.restrictionStatus,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART] = e.albumPart,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY] = e.accessKey,
            i[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX] = e.chartInfo,
            i
        }
    }
    ,
    804333: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            if (!window.Worker || !window.Blob)
                return setTimeout(e, t);
            var n = new Blob([`\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ${t});\n        }\n      }\n    `]);
            try {
                var r = new Worker(window.URL.createObjectURL(n));
                return r.onmessage = function() {
                    r.terminate(),
                    e()
                }
                ,
                r.postMessage("start"),
                r
            } catch (n) {
                return setTimeout(e, t)
            }
        }
        n.d(t, {
            setWorkerTimeout: ()=>r
        })
    }
    ,
    602227: (e,t,n)=>{
        "use strict";
        n.d(t, {
            wrapAudioPlay: ()=>r
        });
        n(940851),
        n(296253);
        function r(e) {
            try {
                return e.play() || Promise.resolve()
            } catch (e) {
                return Promise.reject(e)
            }
        }
    }
    ,
    80842: (e,t,n)=>{
        "use strict";
        n.d(t, {
            GROUPS_ADMIN_LEVEL_USER: ()=>r,
            GROUPS_ADMIN_LEVEL_ADMINISTRATOR: ()=>i,
            USER_META_FIELD_IS_DONUT_PAID_MEMBER: ()=>o,
            default: ()=>a,
            GROUPS_CLASS_EVENT: ()=>s
        });
        var r = 0
          , i = 3
          , o = "is_donut_paid_member";
        const a = {
            GROUPS_ADMIN_LEVEL_USER: r,
            GROUPS_ADMIN_LEVEL_MODERATOR: 1,
            GROUPS_ADMIN_LEVEL_EDITOR: 2,
            GROUPS_ADMIN_LEVEL_ADMINISTRATOR: i,
            GROUPS_ADMIN_LEVEL_HOST: 4,
            GROUPS_ADMIN_LEVEL_EVENT_CREATOR: 5,
            GROUPS_ADMIN_LEVEL_CREATOR: 6,
            GROUPS_ADMIN_PSEUDO_LEVEL_ADVERTISER: 100,
            GROUPS_ADMIN_FLAG_ADS: 8
        };
        var s = 2
    }
    ,
    889029: (e,t,n)=>{
        "use strict";
        n.d(t, {
            gemiusTrackPage: ()=>i
        });
        var r = n(19331);
        function i() {
            if ((0,
            r.partConfigEnabled)("geminus_counter")) {
                var e = "pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";
                if (window.pp_gemius_identifier)
                    window.pp_gemius_hit(e);
                else {
                    window.pp_gemius_identifier = e;
                    var t = function(e) {
                        window[e] = window[e] || function() {
                            var t = window[e + "_pdata"] = window[e + "_pdata"] || [];
                            t[t.length] = arguments
                        }
                    };
                    t("gemius_hit"),
                    t("gemius_event"),
                    t("pp_gemius_hit"),
                    t("pp_gemius_event"),
                    function(e, t) {
                        try {
                            var n = e.createElement(t)
                              , r = e.getElementsByTagName(t)[0]
                              , i = "http" + ("https:" == location.protocol ? "s" : "")
                              , o = "vkgalv";
                            if (window.vk && window.vk.countryISO)
                                switch (window.vk.countryISO) {
                                case "BY":
                                    o = "vkgaby";
                                    break;
                                case "MD":
                                    o = "vkgamd";
                                    break;
                                case "EE":
                                    o = "vkgaee"
                                }
                            n.setAttribute("async", "async"),
                            n.setAttribute("defer", "defer"),
                            n.src = i + "://" + o + ".hit.gemius.pl/xgemius.js",
                            r.parentNode.insertBefore(n, r)
                        } catch (e) {}
                    }(document, "script")
                }
            }
        }
    }
    ,
    328396: (e,t,n)=>{
        "use strict";
        n.d(t, {
            mediascopeTrackPage: ()=>c
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(283946),
        n(59357),
        n(751876);
        var r = n(40906)
          , i = n(479957)
          , o = n(19331);
        function a(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return s(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return s(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function s(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function c(e, t) {
            var n = location.protocol
              , s = `^https?:\\/\\/(?:(?:www|m)\\.)?(?:\\w+\\.)*${(0,
            r.escapeRE)("vk.com")}`
              , c = window._tns && (window._tns.tnsPixelSocdem || "83")
              , _ = t.replace(/\*/g, "%2a").split("#")[0]
              , l = window._tns && window._tns.tnsPixelType;
            if ((0,
            r.vkImage)().src = `${n}//www.tns-counter.ru/V13a**clid:${c}*${_}*vk_com/ru/UTF-8/tmsec=vksite_total/${Math.round(1e9 * Math.random())}`,
            (0,
            o.partConfigEnabled)("tns_track_sections")) {
                var u = "content"
                  , d = "photo"
                  , p = "music"
                  , h = "video"
                  , m = "clips"
                  , f = "ecomm"
                  , g = "games"
                  , v = "docs"
                  , E = [...[[/w=story-?\d+_\d+/, u, "story"], [/z=video-?\d+_\d+/, h, "videoview"], [/z=(photo(_tag)?-?\d+_\d+|albums?-?\d+)/, d, "photoview"], [/z=audio_playlist-?\d+_\d+/, p, "playlistview"], [/z=podcast-?\d+_\d+/, p, "podcastview"], [/z=clip-?\d+_\d+/, m, "clipsview"], [/w=app\d+/, g, "gamesappview"], [/w=product-?\d+_\d+/, f, "product"]].map((e=>{
                    var t = a(e, 3)
                      , n = t[0]
                      , r = t[1]
                      , i = t[2];
                    return [new RegExp(s + "\\b.*?\\b" + n.source), r, i]
                }
                )), ...[[/feed\?section=likes(\/|\&|$)/, u, "likes"], [/feed(\/|\?|$)/, u, "feed"], [/friends(\/|\?|$)/, u, "friends"], [/groups(\/|\?|$)/, u, "groups"], [/(id|public|club)\d+(\/|\?|$)/, u, "idpublicclub"], [/@[\w-\.]+(\/|\?|$)/, u, "longread"], [/bookmarks(\/|\?|$)/, u, "bookmarks"], [/stickers(\/|\?|$)/, u, "stickers"], [/im(\/|\?|$)/, "messenger", "messenger"], [/(photos|tag\d+|(albums|photos)-?\d+|(album|photo)-?\d+_\d+)(\/|\?|$)/, d, "photo"], [/(audio(s-?\d+)?|music)(\/|\?|$)/, p, "music"], [/podcasts(-?\d+)(\/|\?|$)/, "podcasts", "podcasts"], [/(videos-?\d+|video(-?\d+_\d+)?)(\/|\?|$)/, h, "video"], [/(clips(-?\d+)?|clip-?\d+_\d+)(\/|\?|$)/, m, "clips"], [/services(\/|\?|$)/, "services", "services"], [/taxi(\/|\?|$)/, "taxi", "taxi"], [/eda(\/|\?|$)/, "eda", "eda"], [/worki(\/|\?|$)/, "worki", "worki"], [/market(-?\d+)?(\/|\?|$)/, f, "ecomm"], [/apps(\/|\?|$)/, g, "gamesapp"], [/app\d+(_-?\d+)(\/|\?|$)/, g, "gamesapppage"], [/docs(\/|\?|$)/, v, "docs"], [/doc-?\d+_\d+(\/|\?|$)/, v, "docdoc"]].map((e=>{
                    var t = a(e, 3)
                      , n = t[0]
                      , r = t[1]
                      , i = t[2];
                    return [new RegExp(s + "\\/" + n.source), r, i]
                }
                ))]
                  , y = window.cur && window.cur.module || "other"
                  , w = "other"
                  , b = "other";
                E.some((t=>{
                    if (t[0].test(e))
                        return w = t[1],
                        b = t[2],
                        !0
                }
                )),
                (0,
                i.statlogsValueEvent)("counters_check_tns", w, b, y)
            }
            "unauth" === l ? (0,
            r.vkImage)().src = n + "//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184674/" + Math.round(1e9 * Math.random()) : "has_rough" === l ? (0,
            r.vkImage)().src = n + "//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184675/" + Math.round(1e9 * Math.random()) : "not_has_rough" === l && ((0,
            r.vkImage)().src = n + "//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184677/" + Math.round(1e9 * Math.random())),
            (0,
            o.partConfigEnabled)("tns_track_hosts") && ((0,
            r.vkImage)().src = `https://${function() {
                if (window.cur && window.cur.module && (0,
                r.isString)(window.cur.module)) {
                    var e = window.cur.module.trim().toLowerCase().replace(/[^a-z0-9_-]/g, "");
                    if (e)
                        return e
                }
                return "unknown"
            }()}.tns.vk-portal.net?v=${Math.round(1e9 * Math.random())}`)
        }
    }
    ,
    337668: (e,t,n)=>{
        "use strict";
        n.d(t, {
            tmrTrackPage: ()=>c,
            tmrTrackCustomGoal: ()=>_,
            tmrTrackMiniAppOpen: ()=>h,
            tmrTrackMiniAppClose: ()=>m,
            tmrTrackMiniAppCustom: ()=>f
        });
        n(175115);
        function r() {
            return r = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            r.apply(this, arguments)
        }
        var i = "2579437"
          , o = "miniAppEvent";
        function a() {
            return window.vk && window.vk.id ? window.vk.id : 0
        }
        function s(e) {
            window.vk && window.vk.zero || window.__dev || (window._tmr = window._tmr || [],
            window._tmr.push(e))
        }
        function c(e, t) {
            s({
                id: i,
                url: e,
                referrer: t,
                type: "pageView",
                start: (new Date).getTime(),
                pid: a(),
                userid: a()
            })
        }
        function _(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            s({
                id: i,
                type: "reachGoal",
                goal: e,
                userid: a(),
                params: t
            })
        }
        function l(e) {
            var t = a();
            a && s({
                id: i,
                type: o,
                params: r({}, e, {
                    platformUserId: String(t)
                })
            })
        }
        var u = "open"
          , d = "close"
          , p = "custom";
        function h(e, t) {
            l({
                eventType: u,
                miniAppId: e,
                queryParams: t
            })
        }
        function m(e) {
            l({
                eventType: d,
                miniAppId: e
            })
        }
        function f(e, t) {
            l(r({
                eventType: p,
                miniAppId: e
            }, t))
        }
    }
    ,
    533304: (e,t,n)=>{
        "use strict";
        n.d(t, {
            updateCounters: ()=>_
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(59357);
        var r = n(889029)
          , i = n(328396)
          , o = n(337668)
          , a = n(479957);
        function s(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return c(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return c(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function c(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function _(e, t) {
            if (!(window.__dev || window.vk && (window.vk.zero || window.vk.__dev))) {
                t = t || document.referrer || "";
                [[/(hash|dl)=\w+/g, "$1="], [/(\/(?:write|mail|im|al_im.php))(?:\?[a-z0-9&=_-]*)?$/, "$1"], [/(\/write)\d*(?:\?[a-zA-Z0-9&=_-]*)?$/, "$1"]].forEach((n=>{
                    var r = s(n, 2)
                      , i = r[0]
                      , o = r[1];
                    e = e.replace(i, o),
                    t = t.replace(i, o)
                }
                )),
                (0,
                o.tmrTrackPage)(e, t);
                var n = [/\/login\?.*$/];
                n.some((t=>t.test(e))) || n.some((e=>e.test(t))) || ((0,
                i.mediascopeTrackPage)(e, t),
                (0,
                r.gemiusTrackPage)(),
                (0,
                a.statlogsValueEvent)("counters_check", 1))
            }
        }
    }
    ,
    324816: (e,t,n)=>{
        "use strict";
        n.d(t, {
            emojiRegex: ()=>r,
            skinToneModifierRegex: ()=>i,
            EMOJI_PREFIXED_REPLACES: ()=>o,
            EMOJI_REPLACES: ()=>a,
            EMOJI_HINTS: ()=>s
        });
        var r = ()=>/(?:\uD83C\uDFF4)(?:(?:\uDB40\uDC67)(?:\uDB40\uDC62)(?:(?:\uDB40\uDC65)(?:\uDB40\uDC6E)(?:\uDB40\uDC67)|(?:\uDB40\uDC77)(?:\uDB40\uDC6C)(?:\uDB40\uDC73)|(?:\uDB40\uDC73)(?:\uDB40\uDC63)(?:\uDB40\uDC74))(?:\uDB40\uDC7F)|\u200D\u2620\uFE0F?)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC68)(?:\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D)?(?:\uD83D\uDC68)|(?:\uD83D[\uDC68\uDC69])\u200D(?:(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\u2764\uFE0F?\u200D(?:(?:\uD83D\uDC8B)\u200D(?:\uD83D[\uDC68\uDC69])|(?:\uD83D[\uDC68\uDC69]))|(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3]))|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)\u200D(?:\uD83D\uDC66)|(?:(?:\uD83D\uDC41)\uFE0F?\u200D(?:\uD83D\uDDE8)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|(?:\uD83D\uDC68)(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F?|(?:\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]))\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|(?:\uD83D\uDC69)\u200D[\u2695\u2696\u2708])\uFE0F?|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC69)\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC68)(?:\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC66\uDC67]))|(?:\uD83C[\uDFFB-\uDFFF]))|(?:\uD83C\uDFF3)\uFE0F?\u200D(?:\uD83C\uDF08)|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC67)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDB0-\uDDB3])|(?:\uD83D\uDC69)\u200D(?:\uD83D\uDC66)|(?:\uD83C\uDDF6)(?:\uD83C\uDDE6)|(?:\uD83C\uDDFD)(?:\uD83C\uDDF0)|(?:\uD83C\uDDF4)(?:\uD83C\uDDF2)|(?:\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C\uDDED)(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|(?:\uD83C\uDDEC)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|(?:\uD83C\uDDEA)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|(?:\uD83C\uDDE8)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\uD83C\uDDF2)(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|(?:\uD83C\uDDF3)(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|(?:\uD83C\uDDFC)(?:\uD83C[\uDDEB\uDDF8])|(?:\uD83C\uDDFA)(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|(?:\uD83C\uDDF0)(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|(?:\uD83C\uDDEF)(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C\uDDF8)(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|(?:\uD83C\uDDEE)(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|(?:\uD83C\uDDFF)(?:\uD83C[\uDDE6\uDDF2\uDDFC])|(?:\uD83C\uDDEB)(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|(?:\uD83C\uDDF5)(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|(?:\uD83C\uDDE9)(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|(?:\uD83C\uDDF9)(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|(?:\uD83C\uDDE7)(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|[#\*0-9]\uFE0F?\u20E3|(?:\uD83C\uDDF1)(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|(?:\uD83C\uDDE6)(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|(?:\uD83C\uDDF7)(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|(?:\uD83C\uDDFB)(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|(?:\uD83C\uDDFE)(?:\uD83C[\uDDEA\uDDF9])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])|(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF9]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD70\uDD73-\uDD76\uDD7A\uDD7C-\uDDA2\uDDB0-\uDDB9\uDDC0-\uDDC2\uDDD0-\uDDFF])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDD1-\uDDDD])/g
          , i = /\uFE0F?\uD83C[\uDFFB-\uDFFF]/
          , o = {
            e29da4: /(\s|^)([0O]:\))([\s\.,]|$)/g,
            f09f9887: /(\s|^)(;-\)+)([\s\.,]|$)/g,
            f09f9889: /(\s|^)([Xx]-?D)([\s\.,]|$)/g,
            f09f9886: /(\s|^)(B-\))([\s\.,]|$)/g,
            f09f988e: /(\s|^)(3-\))([\s\.,]|$)/g,
            f09f988c: /(\s|^)(&gt;\()([\s\.,]|$)/g,
            f09f98a0: /(\s|^)(;[oO])([\s\.,]|$)/g,
            f09f98b0: /(\s|^)(8\|)([\s\.,]|$)/g,
            f09f98b3: /(\s|^)(8-?[oO])([\s\.,]|$)/g,
            f09f98b2: /(\s|^)(8-\))([\s\.,]|$)/g,
            f09f988d: /(\s|^)(:[X])([\s\.,]|$)/g,
            f09f98b7: /(\s|^)(:[oO])([\s\.,]|$)/g,
            f09f98a8: /(\s|^)(&lt;3)([\s\.,]|$)/g
        }
          , a = {
            f09f988a: /(:-\))([\s\.,]|$)/g,
            f09f9883: /(:-D)([\s\.,]|$)/g,
            f09f989c: /(;-[P])([\s\.,]|$)/g,
            f09f988b: /(:-[p])([\s\.,]|$)/g,
            f09f9892: /(:-\()([\s\.,]|$)/g,
            e298ba: /(:-?\])([\s\.,]|$)/g,
            f09f988f: /(;-\])([\s\.,]|$)/g,
            f09f9894: /(3-?\()([\s\.,]|$)/g,
            f09f98a2: /(:&#039;\()([\s\.,]|$)/g,
            f09f98ad: /(:_\()([\s\.,]|$)/g,
            f09f98a9: /(:\(\()([\s\.,]|$)/g,
            f09f9890: /(:\|)([\s\.,]|$)/g,
            f09f98a1: /(&gt;\(\()([\s\.,]|$)/g,
            f09f989a: /(:-\*)([\s\.,]|$)/g,
            f09f9888: /(\}:\))([\s\.,]|$)/g,
            f09f918d: /(:like:)([\s\.,]|$)/g,
            f09f918e: /(:dislike:)([\s\.,]|$)/g,
            e2989d: /(:up:)([\s\.,]|$)/g,
            e29c8c: /(:v:)([\s\.,]|$)/g,
            f09f918c: /(:ok:|::)([\s\.,]|$)/g
        }
          , s = {
            e29da4: [0, "<3"],
            f09f988a: [1, ":-)"],
            f09f9883: [2, ":-D"],
            f09f9889: [3, ";-)"],
            f09f9886: [4, "xD"],
            f09f989c: [5, ";-P"],
            f09f988b: [6, ":-p"],
            f09f988d: [7, "8-)"],
            f09f988e: [8, "B-)"],
            f09f9892: [9, ":-("],
            f09f988f: [10, ";-]"],
            f09f9894: [11, "3("],
            f09f98a2: [12, ":'("],
            f09f98ad: [13, ":_("],
            f09f98a9: [14, ":(("],
            f09f98a8: [15, ":o"],
            f09f9890: [16, ":|"],
            f09f988c: [17, "3-)"],
            f09f98a0: [18, ">("],
            f09f98a1: [19, ">(("],
            f09f9887: [20, "O:)"],
            f09f98b0: [21, ";o"],
            f09f98b3: [22, "8|"],
            f09f98b2: [23, "8o"],
            f09f98b7: [24, ":X"],
            f09f989a: [25, ":-*"],
            f09f9888: [26, "}:)"],
            f09f918d: [27, ":like:"],
            f09f918e: [28, ":dislike:"],
            e2989d: [29, ":up:"],
            e29c8c: [30, ":v:"],
            f09f918c: [31, ":ok:"]
        }
    }
    ,
    898884: (e,t,n)=>{
        "use strict";
        n.d(t, {
            emojiToHTML: ()=>a,
            getEmojiHTML: ()=>s,
            emojiReplace: ()=>c
        });
        n(991181),
        n(296253),
        n(59357);
        var r = n(324816)
          , i = n(754259)
          , o = n(449849);
        function a(e, t) {
            if (browser.ipad || browser.iphone)
                return e;
            e = (e + "").replace(/&nbsp;/g, " ").replace(/<br>/g, "\n");
            for (var n = 0; n < 2; n++)
                Object.keys(r.EMOJI_PREFIXED_REPLACES).forEach((t=>{
                    e.replace(r.EMOJI_PREFIXED_REPLACES[t], ((e,n,r,i)=>(n || "") + s(t) + (i || "")))
                }
                ));
            return Object.keys(r.EMOJI_REPLACES).forEach((t=>{
                e = e.replace(r.EMOJI_REPLACES[t], ((e,n,r)=>s(t) + (r || "")))
            }
            )),
            e = e.replace(/\n/g, "<br>"),
            t && (e = e.replace(/\uFE0F/g, "").replace((0,
            r.emojiRegex)(), c)),
            e
        }
        function s(e, t, n, r) {
            return !n && t ? t : r ? `<i class="emoji @${e}" emoji="${e}"${t ? ` title="${t}"` : ""}></i>` : `<img class="emoji" src="/emoji/e/${e}${window.devicePixelRatio >= 2 ? "_2x" : ""}.png"${t ? ` alt="${t}"` : ""}${browser.msie && Number(browser.version) > 8 ? ' contenteditable="false"' : ""}>`
        }
        function c(e) {
            return s((0,
            i.emojiSymbolToByteHex)(e), (0,
            o.encodeHTMLEntities)(e), !0)
        }
    }
    ,
    754259: (e,t,n)=>{
        "use strict";
        n.d(t, {
            emojiSymbolToByteHex: ()=>i,
            emojiByteHexToSymbol: ()=>o,
            emojiRemoveSkinToneModifiers: ()=>a
        });
        n(751876),
        n(59357);
        var r = n(324816);
        function i(e) {
            return encodeURIComponent(e.replace(/\uFE0F/gi, "")).replace(/%/gi, "").toLowerCase()
        }
        function o(e) {
            var t, n = e.length % 2 == 1, r = n ? e.slice(0, 1) : "", i = n ? e.slice(1) : e, o = "";
            try {
                o = decodeURIComponent("%" + (t = i,
                t.split("").reduce(((e,t,n)=>e + t + ((n + 1) % 2 == 0 ? " " : "")), "").trim().split(/\s+/)).join("%"))
            } catch (e) {}
            return r + o
        }
        function a(e) {
            return e.replace((0,
            r.emojiRegex)(), s)
        }
        function s(e) {
            return e.replace(r.skinToneModifierRegex, "")
        }
    }
    ,
    449849: (e,t,n)=>{
        "use strict";
        n.d(t, {
            symbols: ()=>o,
            escape: ()=>a,
            encodeHTMLEntities: ()=>s,
            decodeHTMLEntities: ()=>c
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(283946),
        n(59357);
        function r(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return i(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return i(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function i(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var o = [["&amp;", "&"], ["&lt;", "<"], ["&gt;", ">"], ["&quot;", '"']];
        function a(e) {
            return o.reduce(((e,t)=>{
                var n = r(t, 2)
                  , i = n[0]
                  , o = n[1];
                return e.replace(new RegExp(o,"ig"), i)
            }
            ), e)
        }
        function s(e) {
            return a(e).replace(/[\u00A0-\u9999<>\&]/gim, (e=>`&#${e.charCodeAt(0)};`))
        }
        function c(e) {
            return o.reduce(((e,t)=>{
                var n = r(t, 2)
                  , i = n[0]
                  , o = n[1];
                return e.replace(new RegExp(i,"ig"), o)
            }
            ), e).replace(/&#(\d+);/g, ((e,t)=>String.fromCodePoint(t)))
        }
    }
    ,
    765256: (e,t,n)=>{
        "use strict";
        n.d(t, {
            SAKIntegration: ()=>i
        });
        n(976142),
        n(751876);
        var r = n(624823)
          , i = {
            isIntegrated: !1,
            origin: "",
            name: "",
            type: "",
            onMessage: new (n(761508).default),
            init(e) {
                if (i.isIntegrated = !0,
                i.origin = function(e) {
                    var t = e.origin;
                    if (!t)
                        try {
                            t = sessionStorage.getItem("_sak_embed_origin")
                        } catch (e) {}
                    if (t)
                        try {
                            sessionStorage.setItem("_sak_embed_origin", t)
                        } catch (e) {}
                    return t || ""
                }(e),
                i.type = e.type,
                i.isNewMail = e.isNewMail,
                i._cleanUrl(),
                i.origin || window.parent !== window) {
                    var t = e.name || (i.isNewMail ? "mvk_embedded_mail" : "mvk_embedded_other");
                    document.documentElement.style.setProperty("visibility", "hidden", "important"),
                    i.name = t,
                    i.embedded = new r.Embedded({
                        name: t,
                        target: window.parent,
                        origin: i.origin,
                        onMessage: (e,t)=>{
                            i.onMessage.emit("embed", e, t),
                            "click" === e && i.doClick(t.selector)
                        }
                    }),
                    i._ready = i.embedded.sendMessage("ready", {}).then((()=>{
                        document.documentElement.classList.remove("vk_sak_embed_hidden"),
                        document.documentElement.style.removeProperty("visibility")
                    }
                    ))
                } else
                    document.documentElement.classList.remove("vk_sak_embed_hidden")
            },
            sendMessage(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "";
                if (i.isIntegrated)
                    if (i._ready) {
                        if (!n || !i.name || i.name === n)
                            return i._ready.then((()=>i.embedded.sendMessage(e, t)))
                    } else
                        console.error("SAKIntegration not ready")
            },
            doClick(e) {
                if (e) {
                    var t = document.querySelector(e);
                    t && t.click()
                }
            },
            reauth: ()=>i.embedded.sendMessage("sak:reauth", {}).catch((()=>({}))),
            _cleanUrl() {
                var e = location.search.slice(1).split("&").reduce(((e,t)=>(t.startsWith("_sak_embed") || e.push(t),
                e)), []).join("&");
                history.replaceState(null, "", location.pathname + "?" + e + location.hash)
            }
        }
    }
    ,
    726271: (e,t,n)=>{
        "use strict";
        n.d(t, {
            browser: ()=>u,
            mobPlatforms: ()=>d,
            browserFeatures: ()=>p,
            redirectToMVK: ()=>h,
            initBrowserUtils: ()=>m
        });
        n(530522),
        n(991181),
        n(579665),
        n(95767),
        n(66108),
        n(296253),
        n(175115),
        n(283946),
        n(59357),
        n(751876),
        n(21466);
        var r = n(555971)
          , i = n(376567)
          , o = n(668040)
          , a = n(961540);
        function s(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || c(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function c(e, t) {
            if (e) {
                if ("string" == typeof e)
                    return _(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                return "Object" === n && e.constructor && (n = e.constructor.name),
                "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? _(e, t) : void 0
            }
        }
        function _(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var l = navigator.userAgent.toLowerCase()
          , u = {
            version: (l.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/) || [0, "0"])[1],
            opera: /opera/i.test(l) || /opr/i.test(l),
            vivaldi: /vivaldi/i.test(l),
            amigo: /amigo.*mrchrome soc/i.test(l),
            msie: /msie/i.test(l) && !/opera/i.test(l) || /trident\//i.test(l) || /edge/i.test(l),
            msie6: /msie 6/i.test(l) && !/opera/i.test(l),
            msie7: /msie 7/i.test(l) && !/opera/i.test(l),
            msie8: /msie 8/i.test(l) && !/opera/i.test(l),
            msie9: /msie 9/i.test(l) && !/opera/i.test(l),
            msie_edge: /edge/i.test(l) && !/opera/i.test(l),
            mozilla: /firefox/i.test(l),
            yabrowser: /yabrowser/i.test(l),
            whale: /whale/i.test(l),
            chrome: /chrome/i.test(l) && !/edge/i.test(l),
            safari: !/chrome/i.test(l) && /webkit|safari|khtml/i.test(l),
            iphone: /iphone/i.test(l),
            ipod: /ipod/i.test(l),
            iphone4: /iphone.*OS 4/i.test(l),
            ipod4: /ipod.*OS 4/i.test(l),
            ipad: /ipad/i.test(l),
            android: /android/i.test(l),
            bada: /bada/i.test(l),
            mobile: /iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(l),
            msie_mobile: /iemobile/i.test(l),
            safari_mobile: /iphone|ipod|ipad/i.test(l),
            opera_mobile: /opera mini|opera mobi/i.test(l),
            opera_mini: /opera mini/i.test(l),
            mac: /mac/i.test(l),
            windows7: /windows nt 6.1/i.test(l),
            windowsVista: /windows nt 6.0/i.test(l),
            windowsXp: /windows nt (5.2|5.1)/i.test(l),
            search_bot: /(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(l),
            smart_tv: /smart-tv|smarttv/i.test(l)
        }
          , d = {
            1: 1,
            2: 1,
            3: 1,
            4: 1,
            5: 1,
            8: 1
        }
          , p = (window,
        {
            wheelEvent: "onwheel"in document.createElement("div") ? "wheel" : void 0 !== document.onmousewheel ? "mousewheel" : u.mozilla ? "MozMousePixelScroll" : "DOMMouseScroll",
            hasBoundingClientRect: "getBoundingClientRect"in document.createElement("div"),
            cmaEnabled: navigator.credentials && navigator.credentials.preventSilentAccess && window.vk && vk.cma
        });
        function h() {
            var e, t = s(location.href.split("?"), 2), n = t[0], r = t[1], i = {}, _ = function(e) {
                if ("undefined" == typeof Symbol || null == e[Symbol.iterator]) {
                    if (Array.isArray(e) || (e = c(e))) {
                        var t = 0
                          , n = function() {};
                        return {
                            s: n,
                            n: function() {
                                return t >= e.length ? {
                                    done: !0
                                } : {
                                    done: !1,
                                    value: e[t++]
                                }
                            },
                            e: function(e) {
                                throw e
                            },
                            f: n
                        }
                    }
                    throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                }
                var r, i, o = !0, a = !1;
                return {
                    s: function() {
                        r = e[Symbol.iterator]()
                    },
                    n: function() {
                        var e = r.next();
                        return o = e.done,
                        e
                    },
                    e: function(e) {
                        a = !0,
                        i = e
                    },
                    f: function() {
                        try {
                            o || null == r.return || r.return()
                        } finally {
                            if (a)
                                throw i
                        }
                    }
                }
            }(new URLSearchParams(r));
            try {
                for (_.s(); !(e = _.n()).done; ) {
                    var l = e.value;
                    i[l[0]] = l[1]
                }
            } catch (e) {
                _.e(e)
            } finally {
                _.f()
            }
            if (i) {
                if ("1" === i.m)
                    return;
                if (i.force_redirect_to_mvk) {
                    delete i.force_redirect_to_mvk;
                    var u = (0,
                    o.toQueryString)(i);
                    return void (window.location = n.replace(a.VK_ORIGIN_REGEX_STRICT, "https://m." + (0,
                    a.getHostName)()) + (u ? "?" + u : ""))
                }
            }
            if (a.VK_URL_REGEX.test(n) && !new RegExp("^" + a.VK_HOST_REGEX_UNSAFE.source + "\\/@").test(n)) {
                var d = Object.assign(i, {
                    force_redirect_to_mvk: 1
                })
                  , p = n + "?" + (0,
                o.toQueryString)(d);
                window.location = p
            }
        }
        function m() {
            (0,
            r.isIPadOS)(u) && !(0,
            i.getCookie)("remixforce_full") && h(),
            window._ua || (window._ua = navigator.userAgent.toLowerCase()),
            window.locDomain || (window.locDomain = location.host.toString().match(/[a-zA-Z]+\.[a-zA-Z]+\.?$/)[0]),
            window.locHost = location.host,
            window.locProtocol = location.protocol,
            window.locHash = location.hash.replace("#/", "").replace("#!", "")
        }
    }
    ,
    40906: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isUndefined: ()=>o,
            isFunction: ()=>a,
            isFormData: ()=>s,
            isString: ()=>c,
            isArray: ()=>_,
            isObject: ()=>l,
            isEmpty: ()=>u,
            stripHTML: ()=>p,
            replaceEntities: ()=>v,
            winToUtf: ()=>D,
            vkNow: ()=>A,
            intval: ()=>S,
            floatval: ()=>P,
            positive: ()=>O,
            each: ()=>I,
            vkImage: ()=>L,
            isRetina: ()=>k,
            clean: ()=>B,
            unclean: ()=>x,
            rand: ()=>i,
            isHttpHref: ()=>T,
            isNumeric: ()=>d,
            irand: ()=>b,
            escapeAttr: ()=>f,
            escapeRE: ()=>h,
            escapeStr: ()=>E,
            htsc: ()=>m,
            copy: ()=>M,
            locBase: ()=>r,
            unescapeAttr: ()=>g,
            utf2win: ()=>C,
            srand: ()=>w,
            stripTags: ()=>y,
            defaults: ()=>R
        });
        n(175115),
        n(751876),
        n(66108),
        n(296253),
        n(59357);
        var r = ()=>location.toString().replace(/#.+$/, "")
          , i = (e,t)=>Math.random() * (t - e + 1) + e
          , o = e=>void 0 === e
          , a = e=>e && "[object Function]" === Object.prototype.toString.call(e)
          , s = e=>e && "[object FormData]" === Object.prototype.toString.call(e)
          , c = e=>"string" == typeof e
          , _ = e=>"[object Array]" === Object.prototype.toString.call(e)
          , l = e=>"[object Object]" === Object.prototype.toString.call(e)
          , u = e=>{
            if (!l(e))
                return !1;
            for (var t in e)
                if (e.hasOwnProperty(t))
                    return !1;
            return !0
        }
          , d = e=>!isNaN(parseFloat(e)) && isFinite(e) && !Array.isArray(e)
          , p = e=>e ? e.replace(/<(?:.|\n|\r|\u2028|\u2029)*?>/g, "") : ""
          , h = e=>e ? e.replace(/([.*+?^${}()|[\]\/\\])/g, "\\$1") : ""
          , m = e=>e.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/\'/g, "&#39;").replace(/%/g, "&#37;")
          , f = e=>e.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/\'/g, "&#39;")
          , g = e=>e.replace(/&amp;/g, "&").replace(/&quot;/g, '"').replace(/&#39;/g, "'")
          , v = e=>{
            var t = document.createElement("textarea");
            return t.innerHTML = (e || "").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;"),
            t.value
        }
          , E = e=>e.replace(/\'/g, "\\'")
          , y = e=>e.replace(/<[^>]+>/g, "")
          , w = ()=>Math.random().toString(36).substr(2)
          , b = (e,t)=>Math.floor(i(e, t))
          , C = e=>unescape(encodeURIComponent(e));
        function T(e) {
            var t = (e + "").split(":")
              , n = t[1] && t[0] ? t[0] + ":" : location.protocol;
            return "http:" === n || "https:" === n
        }
        function D() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
            return String(e).replace(/&#(\d\d+);/g, ((e,t)=>(t = parseInt(t)) >= 32 ? String.fromCharCode(t) : e)).replace(/&quot;/gi, '"').replace(/&lt;/gi, "<").replace(/&gt;/gi, ">").replace(/&amp;/gi, "&")
        }
        var A = ()=>+new Date;
        function S(e) {
            return !0 === e ? 1 : parseInt(e) || 0
        }
        function P(e) {
            return !0 === e ? 1 : parseFloat(e) || 0
        }
        function O(e) {
            return (e = S(e)) < 0 ? 0 : e
        }
        function I(e, t) {
            if (!e)
                return e;
            if (l(e) || void 0 === e.length) {
                for (var n in e)
                    if (e.hasOwnProperty(n) && !1 === t.call(e[n], n, e[n]))
                        break
            } else
                for (var r = 0, i = e.length; r < i; r++) {
                    var o = e[r];
                    if (!1 === t.call(o, r, o))
                        break
                }
            return e
        }
        function M(e) {
            return _(e) ? e.concat([]) : l(e) ? Object.assign({}, e) : e
        }
        var R = function(e) {
            for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
                n[r - 1] = arguments[r];
            return Object.assign({}, e, ...n.reverse(), e)
        }
          , L = ()=>window.Image ? new Image : document.createElement("img")
          , k = ()=>window.devicePixelRatio >= 2;
        function B(e) {
            return e ? e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;") : ""
        }
        function x(e) {
            return v(e.replace(/\t/g, "\n"))
        }
    }
    ,
    22463: (e,t,n)=>{
        "use strict";
        n.d(t, {
            log: ()=>o,
            error: ()=>a
        });
        var r = n(19331);
        function i() {
            return window.console && (0,
            r.partConfigEnabled)("js_console_logs")
        }
        function o() {
            i() && window.console.log && window.console.log(...arguments)
        }
        function a() {
            i() && (window.console.error ? window.console.error(...arguments) : o(...arguments))
        }
    }
    ,
    668040: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            fromQueryString: ()=>c,
            toQueryString: ()=>s
        });
        n(751876),
        n(820075);
        var r = n(40906)
          , i = {}
          , o = function(e) {
            if (i[e])
                return e;
            try {
                return encodeURIComponent(e)
            } catch (e) {
                return ""
            }
        }
          , a = function(e) {
            try {
                return decodeURIComponent(e)
            } catch (t) {
                return i[e] = 1,
                e
            }
        };
        function s(e, t) {
            var n = [];
            for (var i in e)
                if (e.hasOwnProperty(i) && null != e[i] && !(0,
                r.isFunction)(e[i]))
                    if ((0,
                    r.isArray)(e[i]))
                        for (var a = 0, s = 0, c = e[i].length; a < c; ++a)
                            null == e[i][a] || (0,
                            r.isFunction)(e[i][a]) || (n.push(o(i) + "[" + s + "]=" + o(e[i][a])),
                            ++s);
                    else
                        n.push(o(i) + "=" + o(e[i]));
            return t || n.sort(),
            n.join("&")
        }
        function c(e) {
            if (!e)
                return {};
            var t = {};
            return e = e.split("&"),
            (0,
            r.each)(e, (function(e, n) {
                var r = n.split("=");
                if (r[0]) {
                    var i = a(r[1] + "");
                    if ("[]" === r[0].substr(r.length - 2)) {
                        var o = a(r[0].substr(0, r.length - 2));
                        t[o] || (t[o] = []),
                        t[o].push(i)
                    } else
                        t[a(r[0])] = i
                }
            }
            )),
            t
        }
    }
    ,
    376567: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getCookie: ()=>s,
            setCookie: ()=>_,
            initCookies: ()=>l
        });
        n(21466),
        n(751876);
        var r = n(19331)
          , i = n(479957)
          , o = n(66433);
        function a() {
            return browser.chrome && parseInt(browser.version) >= 71
        }
        function s(e) {
            return function() {
                window._cookies = {};
                for (var e = document.cookie.split(";"), t = /^[\s]*([^\s]+?)$/i, n = 0, r = e.length; n < r; n++) {
                    var i = e[n].split("=");
                    2 === i.length && (_cookies[i[0].match(t)[1]] = unescape(i[1].match(t) ? i[1].match(t)[1] : ""))
                }
            }(),
            "https:" !== location.protocol && (0,
            i.statlogsValueEvent)("read_unsecure_cookie", e, location.href),
            _cookies[e]
        }
        function c(e, t) {
            var n = (0,
            r.getCookieGroups)()
              , i = function() {
                var e = s("remixcpl");
                if (!e)
                    return [];
                var t = e.split(",");
                return t.forEach(((e,n)=>{
                    t[n] = parseInt(e)
                }
                )),
                t
            }()
              , a = e
              , c = null;
            if (!(0,
            r.partConfigEnabled)("need_check_allowed_cookie"))
                return !0;
            if (!isNaN(parseInt(t)) && parseInt(t) < 0)
                return !0;
            "remix" === a.substr(0, 5) && (a = a.substr(5)),
            n.hasOwnProperty(e) ? c = parseInt(n[e]) : n.hasOwnProperty(a) ? c = parseInt(n[a]) : "q_" === a.substr(0, 2) && n.hasOwnProperty("q_") && (c = parseInt(n.q_)),
            (null === c || isNaN(c)) && (0,
            o.logError)(`Undefined cookie group for cookie ${e} (${a})`);
            return 1 === c || !(isNaN(c) || !i.includes(c))
        }
        function _(e, t, n, i) {
            var o = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "None"
              , s = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : window.locDomain
              , _ = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : {};
            if (!c(e, n))
                return !1;
            var l = e + "=" + escape(t)
              , u = _.withoutSubdomains ? "." : ""
              , d = "; path=/" + (s ? "; domain=" + u + s : "")
              , p = "https:" === location.protocol
              , h = !!i;
            (0,
            r.partConfigEnabled)("cookie_secure_default_true") && (h = !1 !== i);
            var m = p && h ? "; secure" : ""
              , f = h && a() && (0,
            r.partConfigEnabled)("cookie_class_samesite") ? `; SameSite=${o}` : ""
              , g = "";
            if (n) {
                var v = new Date;
                v.setTime(v.getTime() + 24 * n * 60 * 60 * 1e3),
                g = "; expires=" + v.toGMTString()
            }
            return document.cookie = l + g + d + f + m,
            !0
        }
        function l() {
            window._cookies = {}
        }
    }
    ,
    256512: (e,t,n)=>{
        "use strict";
        n.d(t, {
            crc32: ()=>s
        });
        n(183318);
        for (var r = new Uint32Array(256), i = 256; i--; ) {
            for (var o = i, a = 8; a--; )
                o = 1 & o ? 3988292384 ^ o >>> 1 : o >>> 1;
            r[i] = o
        }
        function s(e) {
            for (var t = -1, n = 0, i = e.length; n < i; n++)
                t = t >>> 8 ^ r[255 & t ^ e[n]];
            return (-1 ^ t) >>> 0
        }
    }
    ,
    609720: (e,t,n)=>{
        "use strict";
        function r(e, t, n) {
            var r;
            return function() {
                var i = arguments
                  , o = ()=>{
                    r = null,
                    n || e.apply(this, i)
                }
                  , a = n && !r;
                clearTimeout(r),
                r = setTimeout(o, t),
                a && e.apply(this, i)
            }
        }
        n.d(t, {
            debounce: ()=>r
        })
    }
    ,
    555971: (e,t,n)=>{
        "use strict";
        function r() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : window.browser;
            return !(!e.mac || e.iphone || e.ipad || e.ipod || !(navigator.maxTouchPoints > 1))
        }
        n.d(t, {
            isIPadOS: ()=>r,
            isDarkTheme: ()=>i,
            isLightTheme: ()=>o,
            isCSSVariablesSupported: ()=>a,
            isMatchMediaSupported: ()=>s,
            isFlexboxSupported: ()=>c,
            isAutoSchemesSupported: ()=>_,
            isSupportsSupported: ()=>l,
            isGridsSupported: ()=>u,
            isSVGSupported: ()=>d,
            isIntersectionObserverSupported: ()=>p,
            isMutationObserverSupported: ()=>h,
            isJsModulesSupported: ()=>m
        });
        var i = ()=>Boolean(window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches)
          , o = ()=>Boolean(window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches)
          , a = ()=>Boolean(window.CSS && CSS.supports && CSS.supports("color", "var(--custom-property)"))
          , s = ()=>Boolean(window.matchMedia)
          , c = ()=>document.documentElement.classList.contains("vk_flex_yes")
          , _ = ()=>Boolean(window.matchMedia && window.matchMedia("(prefers-color-scheme)").matches)
          , l = ()=>Boolean(window.CSS && CSS.supports)
          , u = ()=>Boolean("string" == typeof document.createElement("div").style.grid)
          , d = ()=>Boolean(document.createElementNS) && Boolean(document.createElementNS("http://www.w3.org/2000/svg", "svg").createSVGRect)
          , p = ()=>"IntersectionObserver"in window && "IntersectionObserverEntry"in window && "intersectionRatio"in window.IntersectionObserverEntry.prototype
          , h = ()=>"MutationObserver"in window
          , m = ()=>!window.nomodules
    }
    ,
    761508: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>i
        });
        var r = n(194795);
        window.EventEmitter = r;
        const i = r
    }
    ,
    495283: (e,t,n)=>{
        "use strict";
        n.d(t, {
            encodeHTMLEntities: ()=>c,
            escape: ()=>_,
            decodeHTMLEntities: ()=>l,
            prepareToWriting: ()=>u
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(283946),
        n(59357);
        var r = n(898884)
          , i = n(449849);
        function o(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return a(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return a(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function a(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var s = i.symbols
          , c = i.encodeHTMLEntities
          , _ = i.escape;
        function l(e) {
            return s.reduce(((e,t)=>{
                var n = o(t, 2)
                  , r = n[0]
                  , i = n[1];
                return e.replace(new RegExp(r,"ig"), i)
            }
            ), e).replace(/&#(\d+);/g, ((e,t)=>String.fromCodePoint(t)))
        }
        function u(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = t.lineBreak
              , i = void 0 !== n && n
              , o = t.convertEmoji
              , a = void 0 === o || o
              , s = l(e);
            return s = s.replace(/\n\r/gi, "\n"),
            "oneline" === i ? s = s.replace(/<br>/gi, " ").replace(/\n/gi, " ") : "html" === i && (s = s.replace(/\n/gi, "<br>")),
            s = _(s),
            a && (s = (0,
            r.emojiToHTML)(s, !0)),
            s
        }
    }
    ,
    481117: (e,t,n)=>{
        "use strict";
        n.d(t, {
            rootId: ()=>o,
            registerReactApplication: ()=>a,
            showComponentInBox: ()=>s,
            updateCurrentComponentInBox: ()=>c,
            destroyComponentInBox: ()=>_,
            renderCommonBox: ()=>u
        });
        var r = n(973935)
          , i = n(667294)
          , o = "react_root";
        function a(e, t) {
            window.applicationInitFunctions[e] = t,
            window.reactInitQueue[e] && window.reactInitQueue[e].length && (window.reactInitQueue[e].forEach((t=>{
                window.initReactApplication(e, t)
            }
            )),
            window.reactInitQueue[e] = [])
        }
        function s(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            t.onDestroy || (t.onDestroy = _);
            var n = window.showFastBox(t)
              , i = document.querySelectorAll(".box_layout")
              , o = i[i.length - 1];
            return r.render(e, o),
            l(),
            n
        }
        function c(e) {
            var t = document.querySelectorAll(".box_layout")
              , n = t[t.length - 1];
            r.render(e, n)
        }
        function _(e) {
            var t = document.querySelectorAll(".box_layout")
              , n = t[t.length - 1];
            n && r.unmountComponentAtNode(n);
            var i = window.curBox();
            i && i.hide(e)
        }
        function l() {
            var e = document.querySelectorAll(".popup_box_container")
              , t = e[e.length - 1];
            window.boxRefreshCoords(t)
        }
        function u(e, t, n) {
            var r = n ? i.createElement("div", {
                className: "box_controls ta_r"
            }, n) : null
              , o = n ? "" : " box_no_buttons";
            return i.createElement(i.Fragment, null, i.createElement("div", {
                className: "box_title_wrap"
            }, i.createElement("div", {
                className: "box_x_button",
                role: "button",
                onClick: _
            }), i.createElement("div", {
                className: "box_title"
            }, e)), i.createElement("div", {
                className: `box_body${o}`
            }, t), r)
        }
        window.applicationInitFunctions || (window.applicationInitFunctions = {}),
        window.reactInitQueue || (window.reactInitQueue = {}),
        window.initReactApplication = (e,t)=>{
            window.applicationInitFunctions[e] ? window.applicationInitFunctions[e](t) : (window.reactInitQueue[e] || (window.reactInitQueue[e] = []),
            window.reactInitQueue[e].push(t))
        }
    }
    ,
    26330: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>o
        });
        var r = n(522683);
        function i(e) {
            try {
                r.vkLocalStorage.removeItem(e)
            } catch (e) {}
        }
        const o = {
            checkVersion: function() {
                try {
                    return void 0 !== window.localStorage && null !== window.localStorage && void 0 !== window.JSON
                } catch (e) {
                    return !1
                }
            },
            remove: i,
            get: function(e) {
                try {
                    return JSON.parse(r.vkLocalStorage.getItem(e))
                } catch (e) {
                    return !1
                }
            },
            set: function(e, t) {
                i(e);
                try {
                    return r.vkLocalStorage.setItem(e, JSON.stringify(t))
                } catch (e) {
                    return !1
                }
            }
        }
    }
    ,
    760847: (e,t,n)=>{
        "use strict";
        function r() {
            return navigator.connection || navigator.mozConnection || navigator.webkitConnection
        }
        function i() {
            var e = r();
            return e && e.type || "unknown"
        }
        function o() {
            var e = r();
            return e && e.effectiveType || "unknown"
        }
        n.d(t, {
            default: ()=>a
        });
        const a = {
            getConnection: r,
            getConnectionType: i,
            getConnectionEffectiveType: o,
            getConnectionTypeID: function() {
                return {
                    unknown: 0,
                    bluetooth: 1,
                    cellular: 2,
                    ethernet: 3,
                    none: 4,
                    wifi: 5,
                    wimax: 6,
                    other: 7
                }[i()] || 0
            },
            getConnectionEffectiveTypeID: function() {
                return {
                    unknown: 0,
                    "slow-2g": 1,
                    "2g": 2,
                    "3g": 3,
                    "4g": 4
                }[o()] || 0
            }
        }
    }
    ,
    191040: (e,t,n)=>{
        "use strict";
        n.d(t, {
            pause: ()=>r,
            retryFn: ()=>i,
            debouncedPromise: ()=>o,
            throttledPromise: ()=>a,
            abortablePause: ()=>s
        });
        n(940851),
        n(296253);
        function r(e, t) {
            return new Promise((n=>{
                setTimeout(n.bind(null, t), 1e3 * e)
            }
            ))
        }
        function i(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null
              , i = 0;
            return function o() {
                for (var a = arguments.length, s = new Array(a), c = 0; c < a; c++)
                    s[c] = arguments[c];
                return Promise.resolve().then((()=>e(...s))).catch((e=>{
                    if (++i <= t) {
                        var a = "function" == typeof n ? n(i) : 0;
                        return 0 === a ? o(...s) : r(a).then((()=>o(...s)))
                    }
                    throw e
                }
                ))
            }
        }
        function o(e, t, n) {
            var r, i;
            return function() {
                for (var o = arguments.length, a = new Array(o), s = 0; s < o; s++)
                    a[s] = arguments[s];
                return new Promise(((e,o)=>{
                    var s = n && !r;
                    clearTimeout(r),
                    i && i.reject("debounce"),
                    r = setTimeout((function() {
                        r = null,
                        i = null,
                        n || e(a)
                    }
                    ), t),
                    s ? e(a) : n && o("debounce"),
                    i = {
                        resolve: e,
                        reject: o
                    }
                }
                )).then((t=>e(...t)))
            }
        }
        function a(e, t) {
            var n, r, i;
            return function() {
                for (var o = arguments.length, a = new Array(o), s = 0; s < o; s++)
                    a[s] = arguments[s];
                return new Promise(((e,o)=>{
                    var s = Date.now()
                      , c = ()=>{
                        e(a),
                        n = s
                    }
                    ;
                    !n || n + t < s ? c() : (i && (i.reject(),
                    clearTimeout(r)),
                    i = {
                        resolve: e,
                        reject: o
                    },
                    r = setTimeout(c, t - (s - n)))
                }
                )).then((t=>e(...t)))
            }
        }
        function s(e, t) {
            var n, r = new Promise((r=>{
                n = r,
                setTimeout(r.bind(null, t), 1e3 * e)
            }
            ));
            return {
                pause: ()=>r,
                abort() {
                    n(t)
                }
            }
        }
    }
    ,
    85372: (e,t,n)=>{
        "use strict";
        n.d(t, {
            CSS_LOAD_ERROR_TEXT: ()=>r,
            loadStyle: ()=>i,
            JS_LOAD_ERROR_TEXT: ()=>a,
            loadScript: ()=>s,
            addStyleSheetOldBrowser: ()=>c,
            supportsOnload: ()=>_
        });
        n(940851),
        n(296253);
        var r = "Stylesheet load error for";
        function i(e) {
            return new Promise(((t,n)=>{
                var i = document.createElement("link");
                i.rel = "stylesheet",
                i.type = "text/css",
                i.href = e,
                i.onload = ()=>t(i),
                i.onerror = ()=>n(new Error(`${r} ${e}`)),
                document.head.appendChild(i)
            }
            ))
        }
        var o, a = "Script load error for";
        function s(e, t) {
            var n = document.createElement("script");
            n.src = e,
            n.onload = ()=>t(null, n),
            n.onerror = ()=>t(new Error(`${a} ${e}`)),
            document.head.appendChild(n)
        }
        function c(e) {
            var t, n = (t = e,
            new Promise(((e,n)=>{
                var r = new XMLHttpRequest;
                r.open("GET", t),
                r.onload = function() {
                    200 === r.status ? e(r.response) : n(r.response)
                }
                ,
                r.onerror = function() {
                    n(r.response)
                }
                ,
                r.send()
            }
            )));
            return n.then((e=>{
                var t = document.createElement("style");
                t.innerHTML = e,
                document.head.appendChild(t)
            }
            )),
            n
        }
        function _() {
            if (void 0 !== o)
                return o;
            var e = "flex";
            try {
                var t = document.createElement("b");
                t.style.display = e,
                o = t.style.display === e
            } catch (e) {
                o = !1
            }
            return o
        }
    }
    ,
    479957: (e,t,n)=>{
        "use strict";
        n.d(t, {
            statlogsValueEvent: ()=>l
        });
        var r, i, o = n(376567), a = n(961540), s = n(40906), c = n(26330);
        (0,
        a.isMvk)() ? (r = "lock_m_stats_cookie_lock",
        i = "remixmsts") : (r = "lockkk_stats_cookie_lock",
        i = "remixsts");
        var _ = [];
        function l(e, t) {
            for (var n = arguments.length, r = new Array(n > 2 ? n - 2 : 0), a = 2; a < n; a++)
                r[a - 2] = arguments[a];
            var c;
            void 0 !== e && void 0 !== t && (_.forEach((n=>n(e, t, ...r))),
            u((()=>{
                try {
                    c = (c = JSON.parse((0,
                    o.getCookie)(i))).data
                } catch (e) {
                    c = []
                }
                c.push([Math.round(Date.now() / 1e3), e, t].concat(r)),
                c = c.slice(-100);
                var n = Math.round((0,
                s.rand)(0, 1e9));
                (0,
                o.setCookie)(i, JSON.stringify({
                    data: c,
                    uniqueId: n
                }), .01)
            }
            )))
        }
        function u(e, t) {
            if (c.default.checkVersion()) {
                if (!0 !== c.default.get(r)) {
                    c.default.set(r, !0);
                    try {
                        e()
                    } catch (e) {}
                    return void c.default.set(r, !1)
                }
                t || setTimeout((()=>u(e, !0)), 100)
            } else
                e()
        }
    }
    ,
    315893: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            var n, r, i = !1;
            return function o() {
                if (i)
                    return n = arguments,
                    void (r = this);
                e.apply(this, arguments),
                i = !0,
                setTimeout((function() {
                    i = !1,
                    n && (o.apply(r, n),
                    n = r = null)
                }
                ), t)
            }
        }
        n.d(t, {
            throttle: ()=>r
        })
    }
    ,
    550519: (e,t,n)=>{
        "use strict";
        n.d(t, {
            HAS_MEDIA_SESSION: ()=>o,
            clear: ()=>a,
            updateMediaSessionMetadata: ()=>s
        });
        var r, i = n(471323), o = window && window.navigator && "mediaSession"in window.navigator && "MediaMetadata"in window;
        function a() {
            o && ((r = r || document.createElement("audio")).src = i.SILENCE,
            r.play().then((()=>{}
            )).catch((()=>{}
            )))
        }
        function s(e) {
            if (o) {
                (location.hostname + e.album).length > 30 && (e.album = e.album.substring(0, 30 - location.hostname.length) + "");
                var t = navigator.mediaSession.metadata;
                t ? (t.title = e.title,
                t.artist = e.artist,
                t.album = e.album,
                t.artwork = e.artwork) : navigator.mediaSession.metadata = new MediaMetadata(e)
            }
        }
    }
    ,
    900421: (e,t,n)=>{
        "use strict";
        n.d(t, {
            urlBase64ToUint8Array: ()=>r
        });
        n(446964),
        n(59357);
        function r(e) {
            for (var t = (e + "=".repeat((4 - e.length % 4) % 4)).replace(/\-/g, "+").replace(/_/g, "/"), n = window.atob(t), r = new Uint8Array(n.length), i = 0; i < n.length; ++i)
                r[i] = n.charCodeAt(i);
            return r
        }
    }
    ,
    19331: (e,t,n)=>{
        "use strict";
        n.d(t, {
            randEnabled: ()=>o,
            partConfigEnabled: ()=>a,
            getCookieGroups: ()=>s,
            calculateTimeOffsets: ()=>c
        });
        var r = n(376567)
          , i = n(40906);
        function o(e) {
            return Math.random() < e
        }
        function a(e) {
            var t = (window.vk || {}).pe;
            return !!(void 0 === t ? {} : t)[e]
        }
        function s() {
            var e = (window.vk || {}).acl;
            return void 0 === e ? {} : e
        }
        function c() {
            var e = window.vk.ts;
            if (e && !window.browser.opera_mobile) {
                var t = new Date
                  , n = Date.UTC(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), t.getSeconds()) / 1e3 - e;
                n -= 10800,
                n = (n /= 60).toFixed(0),
                (n *= 60) < -55800 ? n += 86400 : n > 37800 && (n -= 86400);
                var o = 0
                  , a = Math.abs(n);
                [-12, -11, -10, -9.5, -9, -8, -7, -6, -5, -4.5, -4, -3.5, -3, -2, -1, 0, 1, 2, 3, 3.5, 4, 4.5, 5, 5.5, 5.75, 6, 6.5, 7, 8, 8.75, 9, 9.5, 10, 10.5, 11, 12, 12.75, 13, 14].forEach((e=>{
                    var t = Math.round(3600 * (e - 3))
                      , r = Math.abs(n - t);
                    r < a && (a = r,
                    o = t)
                }
                ));
                var s = (0,
                r.getCookie)("remixdt");
                return void 0 !== s && (0,
                i.intval)(s) === o || (0,
                r.setCookie)("remixdt", o, 365),
                o
            }
            return 0
        }
    }
    ,
    213294: (e,t,n)=>{
        "use strict";
        n.d(t, {
            confirm: ()=>c,
            lockBoxButton: ()=>_,
            hideBox: ()=>l,
            showErrorBox: ()=>u,
            ajax: ()=>d,
            deepClone: ()=>p,
            photoObjToSrc: ()=>h
        });
        n(940851),
        n(296253);
        var r = n(654612)
          , i = n(40906)
          , o = n(486125)
          , a = (n(483295),
        n(41650))
          , s = n(695724);
        function c(e, t) {
            return new Promise(((n,i)=>{
                var o = {
                    title: e,
                    onHide: i
                };
                return new r.MessageBox(o).content(t).setButtons((0,
                a.getLang)("global_yes"), n, (0,
                a.getLang)("global_cancel"), i).show()
            }
            ))
        }
        function _() {
            var e = (0,
            o.curBox)();
            if (e) {
                var t = e.btns.ok[0];
                t && window.lockButton(t)
            }
        }
        function l() {
            var e = (0,
            o.curBox)();
            e && e.hide()
        }
        function u(e) {
            l(),
            (0,
            r.showFastBox)((0,
            a.getLang)("global_error"), e)
        }
        function d(e, t) {
            return new Promise(((n,r)=>{
                window.ajax.post(e, t, {
                    onDone: function() {
                        n(...arguments)
                    },
                    onFail: function() {
                        return r(...arguments),
                        !0
                    }
                })
            }
            ))
        }
        function p(e) {
            return (0,
            s.clone)(e, !0)
        }
        function h(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "a"
              , r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "b";
            n = (0,
            i.isRetina)() ? r : n;
            var o = "";
            if (!e.sizes2 && !e.sizes)
                return o;
            var a = e.sizes2 ? e.sizes2 : e.sizes
              , s = e.urls2 ? e.urls2 : e.urls;
            if (!a || !a.length)
                return o;
            for (var c = 0; c < a.length; c++) {
                var _ = a[c];
                if (_[0] === n)
                    return t + s[c]
            }
            return o
        }
    }
    ,
    897213: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>d
        });
        n(751876);
        var r = n(695724)
          , i = n(803834)
          , o = n(315544)
          , a = n(49535)
          , s = "idle"
          , c = "pend_rows"
          , _ = "pend_prefetch"
          , l = "done_prefetch"
          , u = "done";
        class d {
            constructor(e, t) {
                if (this.constructor !== d)
                    throw new Error("AutoList: AutoList was called without 'new' operator");
                if (d._counter = d._counter || 0,
                this._id = d._counter++,
                this.setListEl(e, t.scrollNode),
                this._opts = (0,
                r.extend)({
                    threshold: 0,
                    renderImmediate: !1,
                    fetchImmediate: !0
                }, t),
                !this._containerEl)
                    throw new Error("AutoList: container not found");
                this._rowClasses = !!this._opts.rowClass && this._opts.rowClass.split(" "),
                delete this._opts.rowClass,
                this._initialRender = this._opts.renderImmediate,
                this._isProgressShown = !1,
                this._prefetched = [],
                this._initialRender ? this._offset = 0 : this._opts.offset ? this._offset = this._opts.offset : this._opts.rowClasses ? this._offset = this._countRows(this._containerEl.children) : this._offset = this._containerEl.children.length,
                this._page = this._offset > 0 ? 1 : 0,
                (0,
                a.addEvent)(this._scrollNode, "scroll", this._ev_scroll = this._onScroll.bind(this)),
                (0,
                a.addEvent)(window, "resize", this._ev_window_resize = this._onScroll.bind(this)),
                this._setState(this._opts.renderImmediate ? c : _),
                this._opts.fetchImmediate ? this._requestRows() : (this._setState(s),
                this._onScroll())
            }
            getListEl() {
                return this._containerEl
            }
            setListEl(e, t) {
                var n;
                this._containerEl = (0,
                o.ge)(e),
                this._scrollNode = t || d.closestOverflowParent(this._containerEl),
                n = this._scrollNode === window ? 0 : (0,
                o.getXY)(this._scrollNode)[1],
                this._contentYOffset = (0,
                o.getXY)(this._containerEl)[1] - n
            }
            options(e) {
                (0,
                r.extend)(this._opts, e)
            }
            _countRows(e) {
                var t = this
                  , n = 0;
                return (0,
                r.each)(e, (function(e, i) {
                    "string" == typeof i && (i = (0,
                    o.se)(i)),
                    t._rowClasses ? (0,
                    r.each)(t._rowClasses, (function(e, t) {
                        if ((0,
                        o.hasClass)(i, t))
                            return n++,
                            !1
                    }
                    )) : n++
                }
                )),
                n
            }
            _drawRows(e) {
                var t = this;
                this._opts.drawRows ? this._opts.drawRows(t._containerEl, e) : (0,
                r.each)(e, (function(e, n) {
                    "string" == typeof n && (n = (0,
                    o.se)((0,
                    r.trim)(n))),
                    n && t._containerEl.appendChild(n)
                }
                )),
                this.toggleProgress(this._state !== u),
                !this._forceDrawCalled && this._opts.onRendered && this._opts.onRendered(this._offset)
            }
            toggleProgress(e) {
                e ? !this._isProgressShown && this._opts.showProgress && this._opts.showProgress() : this._isProgressShown && this._opts.hideProgress && this._opts.hideProgress(),
                this._isProgressShown = e
            }
            drawMore() {
                (0,
                r.inArray)(this._state, [s, l]) ? (this._forceDrawCalled = !0,
                this._drawRows(this._prefetched),
                this._setState(_),
                this._prefetched = [],
                this._requestRows(),
                this._forceDrawCalled = !1) : this._state === u && this._opts.onNoMore && this._opts.onNoMore(this._containerEl.childElementCount)
            }
            destroy() {
                this._ev_scroll && ((0,
                a.removeEvent)(this._scrollNode, "scroll", this._ev_scroll),
                this._ev_scroll = !1),
                this._ev_window_resize && (0,
                a.removeEvent)(window, "resize", this._ev_window_resize),
                this._setState(u),
                this.toggleProgress(!1)
            }
            getOffset() {
                return this._offset
            }
            _requestRows() {
                if (!this.isDone() && this._state !== l) {
                    function e() {
                        this._opts.onNeedRows(this._onRowsProvided.bind(this), this._offset, this._page++, this._state === _, this)
                    }
                    this._initialRender = !1,
                    e.apply(this)
                }
            }
            _onRowsProvided(e, t) {
                if (!this.isDone()) {
                    if (!1 === e)
                        return this._requestRows();
                    e = e || [],
                    this._offset += void 0 === t ? this._countRows(e) : t;
                    var n = this._containerEl.childElementCount;
                    switch (this._state) {
                    case _:
                        0 === e.length ? (this._setState(l),
                        this._opts.onNoMore && this._opts.onNoMore(n),
                        0 === this._prefetched.length && this._setState(u)) : (this._setState(s),
                        this._prefetched = this._prefetched.concat(e),
                        this._opts.onHasMore && this._opts.onHasMore(),
                        this._onScroll());
                        break;
                    case c:
                        this._drawRows(e),
                        0 === e.length ? (this._setState(u),
                        this._opts.onNoMore && this._opts.onNoMore(n)) : (this._setState(_),
                        this._requestRows()),
                        this.toggleProgress(!1);
                        break;
                    case s:
                        this._prefetched = this._prefetched.concat(e)
                    }
                }
            }
            _setState(e) {
                this._state = e
            }
            isDone() {
                return this._state === u
            }
            static closestOverflowParent(e) {
                for (var t = e; t && t.tagName && ("visible" === (0,
                o.getStyle)(t, "overflow") || "page_wrap" === t.id); )
                    t = (0,
                    o.domPN)(t);
                return t !== window.document && t !== bodyNode && t || (t = window),
                t
            }
            _onScroll() {
                if (!this._forceDrawCalled && this._state !== c) {
                    var e, t, n = this._scrollNode;
                    n === window ? (t = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),
                    e = (0,
                    i.scrollGetY)()) : (t = (0,
                    o.getSize)(n)[1],
                    e = this._scroll ? this._scroll.data.scrollTop : n.scrollTop),
                    t < 10 || this._containerEl.scrollHeight - t - e + this._contentYOffset < 10 && (this._state === c || !this._prefetched.length && this._state === _ ? (this.toggleProgress(!0),
                    this._setState(c)) : this._state === _ || this._state === s ? (this._drawRows(this._prefetched),
                    this._prefetched = [],
                    this._setState(_),
                    this._requestRows()) : this._state === l && (this._drawRows(this._prefetched),
                    this._prefetched = [],
                    this._setState(u),
                    this._opts.onNoMore && this._opts.onNoMore(),
                    this.destroy()))
                }
            }
        }
    }
    ,
    28238: (e,t,n)=>{
        "use strict";
        n.d(t, {
            RECENT_SEARCH_OP: ()=>_,
            PIN_HIDDEN_ID_OP: ()=>l,
            imDbGet: ()=>d,
            mount: ()=>m
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767);
        var r = n(609720)
          , i = n(40906)
          , o = n(479957)
          , a = n(695724);
        function s(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return c(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return c(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function c(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var _ = "recent_search"
          , l = "pin_hide";
        function u(e) {
            return "im_store_" + e
        }
        function d(e) {
            return ls.get(u(e)) || {}
        }
        function p(e, t, n) {
            if (ls.checkVersion()) {
                var r = JSON.stringify(t);
                (0,
                i.rand)(0, 1e5) <= 1 && (0,
                o.statlogsValueEvent)("im_local_store_size", r.length),
                n(u(e), r)
            }
        }
        function h(e, t, n) {
            n.key === u(e) && (t.db = JSON.parse(n.newValue),
            t.checkTime = Date.now())
        }
        function m(e) {
            var t = (0,
            r.debounce)(((e,t)=>{
                localStorage.setItem(e, t)
            }
            ), 300);
            ls.checkVersion() && function(e, t) {
                for (var n = ["fwd", "draft", "bind_attach"], r = d(e), i = !1, o = n.length; o--; )
                    n[o]in r && (delete r[n[o]],
                    i = !0);
                i && p(e, r, t)
            }(e, t);
            var n = {
                db: d(e),
                checkTime: Date.now()
            }
              , i = h.bind(null, e, n);
            return window.addEventListener("storage", i, !1),
            {
                select: (t,r)=>(Date.now() - n.checkTime > 1e3 && (n.db = d(e)),
                function(e, t, n) {
                    return t === _ ? e[t] || [] : t === l ? e[t] && e[t][n] : e[t] ? (0,
                    a.extend)(!0, {}, e[t][n]) : null
                }(n.db, t, r)),
                selectByKey: t=>(Date.now() - n.checkTime > 1e3 && (n.db = d(e)),
                n.db[t]),
                update(r, i) {
                    var o = function(e, t, n) {
                        switch (e[t] || (e[t] = {}),
                        t) {
                        case _:
                            var r = n;
                            r && r.length > 0 ? e[t] = r : delete e[t];
                            break;
                        case l:
                            var i = s(n, 2)
                              , o = i[0]
                              , a = i[1];
                            a ? e[t][o] = +a : delete e[t][o]
                        }
                        return e
                    }(n.db, r, i);
                    return n.db = o,
                    n.checkTime = Date.now(),
                    p(e, o, t)
                },
                updateByKey: (r,i)=>(n.db[r] = i,
                n.checkTime = Date.now(),
                p(e, n.db, t)),
                unmount() {
                    window.removeEventListener("storage", i, !1)
                }
            }
        }
    }
    ,
    47612: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            uiGetGallery: ()=>l,
            UIGallery: ()=>u
        });
        var r = n(469687)
          , i = n(40906)
          , o = n(635676)
          , a = n(49535)
          , s = n(695724)
          , c = n(315544)
          , _ = (0,
        r.makeSharedState)("ui-gallery", (()=>({
            galleries: {},
            incIndex: 0
        })));
        function l(e) {
            var t = (0,
            c.domData)((0,
            c.ge)(e), "gallery-id");
            return t && _().galleries[t]
        }
        class u {
            constructor(e, t) {
                if (!e)
                    throw new Error("No element was provided for UIGallery");
                if (e = (0,
                c.ge)(e),
                !(0,
                c.hasClass)(e, "ui_gallery"))
                    throw new Error("Provided incorrect element for UIGallery");
                var n = l(e);
                if (n)
                    return n;
                this._opts = (0,
                s.extend)({
                    markOutside: !1,
                    scrollY: !0,
                    scrollX: !0,
                    noArrows: !1
                }, t),
                this._id = _().incIndex,
                _().incIndex += 1,
                this._el = e,
                this._width = (0,
                c.getSize)(this._el)[0],
                this._items = (0,
                c.geByClass)("ui_gallery_item", this._el),
                this._itemWidth = (0,
                c.getSize)(this._items[0])[0],
                this._itemOffset = (0,
                s.intval)((0,
                c.getStyle)(this._items[0], vk.rtl ? "marginLeft" : "marginRight")),
                this._scrollOffset = (0,
                s.intval)((0,
                c.getStyle)(this._items[0], "marginLeft")),
                this._itemFullWidth = this._itemWidth + this._itemOffset,
                this._innerCont = (0,
                c.geByClass1)("ui_gallery__inner_cont", this._el),
                this._inner = (0,
                c.geByClass1)("ui_gallery__inner", this._el),
                this._scroll = function() {
                    var e = {
                        rtl: !1,
                        backward: !1,
                        delta: 1,
                        negative: !1,
                        rtlSame: !1
                    };
                    if (!vk.rtl)
                        return e;
                    if (!cur._scrollInfo) {
                        var t = (0,
                        c.se)('<div style="position: fixed; left: -1000; width: 0; overflow: scroll">x</div>');
                        (0,
                        c.ge)("content").appendChild(t);
                        var n = t.scrollLeft;
                        e.rtl = vk.rtl,
                        e.backward = n > 0,
                        t.scrollLeft = 1e3,
                        e.delta = t.scrollLeft === n ? -1 : 1,
                        e.negative = !e.backward && e.delta < 0,
                        e.rtlSame = e.rtl && !e.backward && !e.negative,
                        (0,
                        c.re)(t),
                        cur._scrollInfo = e
                    }
                    return cur._scrollInfo
                }(),
                this._loadingMore = !1,
                this._finised = !1,
                this._visible = {
                    left: -1,
                    right: -1,
                    items: []
                },
                this._outside = {
                    left: -1,
                    right: -1,
                    timer: null
                },
                this._initScroll(),
                this._initArrows(),
                (0,
                c.domData)(this._el, "gallery-id", this._id),
                _().galleries[this._id] = this,
                this._checkItemsAfterScroll(this._innerCont.scrollLeft, !0)
            }
            _initScroll() {
                (this._opts.scrollX || this._opts.scrollY) && (0,
                a.addEvent)(this._innerCont, "DOMMouseScroll wheel", this._onWheelScroll.bind(this))
            }
            _initArrows() {
                this._opts.noArrows ? (0,
                c.addClass)(this._el, "ui_gallery_no_arrows") : (this._leftArrow = (0,
                c.geByClass1)("ui_gallery__arrow_left", this._el),
                this._rightArrow = (0,
                c.geByClass1)("ui_gallery__arrow_right", this._el),
                this._arrowWidth = (0,
                c.getSize)(this._leftArrow)[0],
                (0,
                a.addEvent)(this._leftArrow, "click", this._onArrowScroll.bind(this, -1)),
                (0,
                a.addEvent)(this._leftArrow, "mouseover", this._onArrowMouseOver.bind(this, "left")),
                (0,
                a.addEvent)(this._leftArrow, "mouseout", this._onArrowMouseOut.bind(this)),
                (0,
                a.addEvent)(this._rightArrow, "click", this._onArrowScroll.bind(this, 1)),
                (0,
                a.addEvent)(this._rightArrow, "mouseover", this._onArrowMouseOver.bind(this, "right")),
                (0,
                a.addEvent)(this._rightArrow, "mouseout", this._onArrowMouseOut.bind(this)))
            }
            _onWheelScroll(e) {
                if (this._opts.scrollX || this._opts.scrollY) {
                    var t;
                    if ("wheel" == e.type)
                        if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
                            if (!this._opts.scrollY)
                                return;
                            t = -e.deltaY
                        } else {
                            if (!this._opts.scrollX)
                                return;
                            t = -e.deltaX
                        }
                    else if (void 0 !== e.wheelDeltaY) {
                        if (!this._opts.scrollY)
                            return;
                        t = e.wheelDeltaY
                    } else if (void 0 !== e.wheelDelta)
                        t = e.wheelDelta;
                    else {
                        if (!e.detail || 1 !== e.axis)
                            return;
                        t = -e.detail
                    }
                    t = this._scroll.rtlSame ? -t : t,
                    Math.abs(t) >= 120 && (t = 74 * Math.max(-1, Math.min(1, t))),
                    this._innerCont.scrollLeft -= t,
                    this._checkItemsAfterScroll(this._innerCont.scrollLeft),
                    (0,
                    a.cancelEvent)(e)
                }
            }
            _onArrowScroll(e, t) {
                if (!this._opts.noArrows) {
                    var n = this._innerCont.scrollLeft + (this._scroll.rtlSame ? -e : e) * (this._width - 2 * this._arrowWidth)
                      , r = this._innerCont.scrollWidth - this._width;
                    this._scroll.negative ? (n = Math.min(n, 0),
                    n = Math.abs(n)) : n = Math.max(0, n),
                    n = Math.min(r, n);
                    var i = this._scroll.negative || this._scroll.rtlSame ? -e : e;
                    if (i > 0 && n < r)
                        n = Math.floor(n / this._itemFullWidth) * this._itemFullWidth;
                    else if (i < 0 && n > 0) {
                        n = Math.floor(n / this._itemFullWidth) * this._itemFullWidth
                    }
                    if (0 === n || n === r) {
                        var s = this._innerCont.scrollWidth;
                        (0,
                        c.addClass)(this._inner, "ui_gallery__inner_shift_instant"),
                        this._onArrowMouseOut(),
                        n && (n += e * (this._innerCont.scrollWidth - s))
                    }
                    this._scroll.negative && (n = -n),
                    (0,
                    o.animate)(this._innerCont, {
                        scrollLeft: n
                    }, {
                        duration: Math.abs(this._innerCont.scrollLeft - n) + 50,
                        transition: o.Fx.Transitions.easeOutCubic
                    }),
                    this._checkItemsAfterScroll(n),
                    setTimeout((()=>(0,
                    c.removeClass)(this._inner, "ui_gallery__inner_shift_instant")), 0),
                    (0,
                    a.cancelEvent)(t)
                }
            }
            _checkItemsAfterScroll(e, t) {
                if (this._scroll.negative && (e = Math.abs(e)),
                this._opts.markOutside || this._opts.onViewItem) {
                    var n, r = this._itemWidth / 3, i = (this._scroll.backward ? this._inner.scrollWidth - this._width - e : e) - this._scrollOffset, o = e && Math.floor(i / this._itemFullWidth), a = o * this._itemFullWidth + 2 * r;
                    n = this._scroll.backward ? e + this._width < this._inner.scrollWidth - a : e > a;
                    var _, l = Math.min(this._items.length - 1, Math.floor((i + this._width) / this._itemFullWidth)), u = l * this._itemFullWidth + 2 * r;
                    if (_ = this._scroll.backward ? e > this._inner.scrollWidth - u : e + this._width < u,
                    this._opts.onViewItem) {
                        var d = n ? Math.min(this._items.length - 1, o + 1) : o
                          , p = _ ? Math.max(0, l - 1) : l;
                        if (t || d !== this._visible.left || p !== this._visible.right) {
                            for (var h = d; h <= p; h++)
                                (this._visible.left < 0 || t && !(0,
                                s.inArray)(this._items[h], this._visible.items) || h < this._visible.left || h > this._visible.right) && this._opts.onViewItem(this._items[h], h);
                            this._visible.left = d,
                            this._visible.right = p,
                            this._visible.items = this._items.slice(d, p + 1)
                        }
                    }
                    this._opts.markOutside && (t ? ((0,
                    c.geByClass)("ui_gallery_item_outside", this._inner).forEach((e=>{
                        (0,
                        c.removeClass)(e, "ui_gallery_item_outside")
                    }
                    )),
                    this._outside.left = -1,
                    this._outside.right = -1) : ((o !== this._outside.left || !n) && this._outside.left >= 0 && ((0,
                    c.removeClass)(this._items[this._outside.left], "ui_gallery_item_outside"),
                    this._outside.left = -1),
                    (l !== this._outside.right || !_) && this._outside.right >= 0 && ((0,
                    c.removeClass)(this._items[this._outside.right], "ui_gallery_item_outside"),
                    this._outside.right = -1)),
                    n && o !== this._outside.left && ((0,
                    c.addClass)(this._items[o], "ui_gallery_item_outside"),
                    this._outside.left = o),
                    _ && l !== this._outside.right && ((0,
                    c.addClass)(this._items[l], "ui_gallery_item_outside"),
                    this._outside.right = l))
                }
                if (!this._opts.noArrows) {
                    var m = e > 0
                      , f = e + this._width < this._inner.scrollWidth;
                    (0,
                    c.toggleClass)(this._leftArrow, "ui_gallery__arrow_visible", this._scroll.rtl && !this._scroll.backward ? f : m),
                    (0,
                    c.toggleClass)(this._rightArrow, "ui_gallery__arrow_visible", this._scroll.rtl && !this._scroll.backward ? m : f)
                }
                (!this._scroll.backward && this._inner.scrollWidth - e - this._width < 1e3 || this._scroll.backward && e < 1e3) && this._onLoadMore()
            }
            _onArrowMouseOver(e) {
                this._opts.noArrows || (0,
                c.addClass)(this._inner, "ui_gallery__inner_shift_" + e)
            }
            _onArrowMouseOut() {
                this._opts.noArrows || ((0,
                c.removeClass)(this._inner, "ui_gallery__inner_shift_left"),
                (0,
                c.removeClass)(this._inner, "ui_gallery__inner_shift_right"))
            }
            _onLoadMore() {
                !this._opts.onLoadMore || this._loadingMore || this._finised || (this._loadingMore = !0,
                this._opts.onLoadMore(this._items.length))
            }
            addMore(e, t) {
                e = e || [],
                this.addItems(e),
                this._finised = !!t || !e.length,
                this._loadingMore = !1
            }
            addItems(e, t) {
                if ((e = e || []).length) {
                    var n = t >= 0 && t < this._items.length ? this._items[t] : null;
                    e.forEach((e=>{
                        n ? (0,
                        c.domInsertBefore)(e, n) : this._inner.appendChild(e)
                    }
                    )),
                    this.refresh()
                }
            }
            destroy() {
                (0,
                a.removeEvent)(this._innerCont),
                (0,
                a.removeEvent)(this._leftArrow),
                (0,
                a.removeEvent)(this._rightArrow),
                (0,
                c.domData)(this._el, "gallery-id", null),
                delete _().galleries[this._id],
                this._opts.onDestroy && this._opts.onDestroy(),
                (0,
                c.re)(this._el)
            }
            removeItem(e) {
                return (0,
                i.isNumeric)(e) && (e = this._items[e]),
                !(!e || !(0,
                s.inArray)(e, this._items)) && ((0,
                c.re)(e),
                this.refresh(),
                this._items.length || this.destroy(),
                !0)
            }
            refresh() {
                this._width = (0,
                c.getSize)(this._el)[0],
                this._items = (0,
                c.geByClass)("ui_gallery_item", this._el),
                this._checkItemsAfterScroll(this._innerCont.scrollLeft, !0)
            }
            getItems() {
                return this._items
            }
            getVisibleItems() {
                return this._visible.items.map(((e,t)=>[e, this._visible.left + t]))
            }
        }
    }
    ,
    965030: (e,t,n)=>{
        "use strict";
        n.d(t, {
            Gifts: ()=>m
        });
        n(175115);
        var r = n(386409)
          , i = n(786067)
          , o = n(654612)
          , a = n(49535)
          , s = n(695724)
          , c = n(486125)
          , _ = n(315544)
          , l = n(840774)
          , u = n(291587)
          , d = n(62816)
          , p = n(467253);
        function h() {
            return h = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            h.apply(this, arguments)
        }
        var m = {
            deleteGift: function(e, t, n) {
                var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {};
                window.ajax.post("al_gifts.php", {
                    act: "delete",
                    mid: r.mid,
                    gift: n,
                    hash: r.hash
                }, {
                    onDone: function(e) {
                        var n = (0,
                        _.ge)("gift" + t);
                        n && ((0,
                        _.domNS)((0,
                        _.domFC)(n)) ? (0,
                        _.domNS)((0,
                        _.domFC)(n)).innerHTML = e : (n.appendChild((0,
                        _.ce)("div", {
                            className: "gift_deleted",
                            innerHTML: e
                        })),
                        (0,
                        _.hide)((0,
                        _.domFC)(n)),
                        window.Pagination && !(0,
                        c.curBox)() && window.Pagination.recache(-1)))
                    },
                    showProgress: ()=>{
                        e.classList.add("gift_delete--loading"),
                        e.innerHTML = "",
                        e.appendChild((0,
                        _.ce)("div", {
                            className: "gift_delete__spinner",
                            innerHTML: (0,
                            d.getIcon16Spinner)().icon
                        }))
                    }
                    ,
                    hideProgress: ()=>{
                        e.classList.remove("gift_delete--loading"),
                        e.innerHTML = (0,
                        p.getIcon16Cancel)().icon
                    }
                })
            },
            restoreGift: function(e, t, n, r) {
                r = r || {},
                ajax.post("al_gifts.php", {
                    act: "restore",
                    mid: r.mid,
                    gift: n,
                    hash: r.hash
                }, {
                    onDone: function() {
                        var e = (0,
                        _.ge)("gift" + t);
                        e && (0,
                        _.domNS)((0,
                        _.domFC)(e)) && ((0,
                        _.re)((0,
                        _.domNS)((0,
                        _.domFC)(e))),
                        (0,
                        _.show)((0,
                        _.domFC)(e)))
                    }
                })
            },
            markSpamGift: function(e, t, n, r) {
                r = r || {},
                ajax.post("al_gifts.php", {
                    act: "mark_spam",
                    mid: r.mid,
                    gift: n,
                    hash: r.hash
                }, {
                    onDone: function(e) {
                        (0,
                        _.ge)("gift_mark_spam" + t).innerHTML = e
                    }
                })
            },
            initGiftsBox: function(e, t) {
                e.setOptions({
                    width: 638,
                    bodyStyle: "padding: 0",
                    grey: !0,
                    hideButtons: !0,
                    onShow: function() {
                        cur.gftbxWasScroll && (boxLayerWrap.scrollTop = cur.gftbxWasScroll,
                        cur.gftbxWasScroll = !1)
                    }
                }),
                t.lang && (cur.lang = (0,
                s.extend)(cur.lang || {}, t.lang)),
                (0,
                s.extend)(cur, {
                    gftbxOffset: t.offset,
                    gftbxAutoload: !0,
                    gftbxWasScroll: !1,
                    gftbxMid: t.mid
                }),
                ajax.preload("al_gifts.php", {
                    act: "box",
                    mid: t.mid,
                    offset: t.offset
                }, t.preload),
                window.uiScrollBox && window.uiScrollBox.init(e, {
                    onShow: function() {
                        (0,
                        a.addEvent)(boxLayerWrap, "scroll", m.onGiftsScroll),
                        setTimeout(cur.chooseAudioScroll, 0)
                    },
                    onHide: function() {
                        (0,
                        a.removeEvent)(boxLayerWrap, "scroll", m.onGiftsScroll)
                    }
                }),
                (0,
                a.addEvent)(boxLayerWrap, "scroll", m.onGiftsScroll);
                var n = boxLayerWrap.scrollTop;
                (0,
                _.elfocus)((0,
                _.geByClass1)("_scroll_node", e.bodyNode)),
                boxLayerWrap.scrollTop = n,
                onBodyResize(),
                m.onGiftsScroll()
            },
            moreGifts: function() {
                var e = (0,
                _.ge)("gifts_more_link");
                (0,
                r.buttonLocked)(e) || (ajax.post("al_gifts.php", {
                    act: "box",
                    mid: cur.gftbxMid,
                    offset: cur.gftbxOffset
                }, {
                    onDone: function(t, n, r) {
                        var i = (0,
                        _.ce)("div", {
                            innerHTML: t
                        })
                          , o = (0,
                        _.ge)("gifts_rows");
                        if (o) {
                            for (var a = (0,
                            _.domFC)(i); a; a = (0,
                            _.domFC)(i))
                                o.appendChild(a);
                            cur.gftbxOffset = n,
                            r ? m.preloadGifts() : (0,
                            _.hide)(e)
                        }
                    },
                    showProgress: r.lockButton.pbind(e),
                    hideProgress: r.unlockButton.pbind(e),
                    cache: 1
                }),
                cur.gftbxAutoload = !0)
            },
            preloadGifts: function() {
                ajax.post("al_gifts.php", {
                    act: "box",
                    mid: cur.gftbxMid,
                    offset: cur.gftbxOffset
                }, {
                    cache: 1
                })
            },
            onGiftsScroll: function() {
                if (cur.gftbxAutoload) {
                    var e = lastWindowHeight
                      , t = (0,
                    _.ge)("gifts_more_link");
                    (0,
                    _.isVisible)(t) && e > (0,
                    _.getXY)(t, !0)[1] && t.click()
                }
            },
            showGiftBox: function(e, t, n) {
                return window.Profile ? window.Profile.showGiftBox(e, t, n) : (cur.gftbxWasScroll = boxLayerWrap.scrollTop,
                boxLayerWrap.scrollTop = 0,
                cur.viewAsBox ? cur.viewAsBox() : !(0,
                o.showBox)("al_gifts.php", {
                    act: "get_gift_box",
                    mid: e,
                    fr: e == vk.id ? 1 : 0,
                    ref: n
                }, {
                    stat: ["gifts.css", "wide_dd.js", "wide_dd.css"],
                    cache: 1
                }, t))
            },
            processBoxOptions(e, t) {
                -1e3 != t && t && ((0,
                s.extend)(cur, {
                    paymentsOfferPreview: t.paymentsOfferPreview,
                    paymentsPreload: t.paymentsPreload,
                    paymentsAppOrder: t.paymentsAppOrder,
                    paymentsOfferPreload: t.paymentsOfferPreload
                }),
                t.orderData && u.AppOrderBox.initialize(t.orderData.orderId, t.orderData.appId, t.orderData.testMode, t.orderData.hash, t.orderData.votes, t.orderData.discount, t.orderData.billPeriod),
                (0,
                s.extend)(cur, {
                    paymentsAuthPayment: t.paymentsAuthPayment,
                    paymentsOrderNotice: t.paymentsOrderNotice,
                    paymentsTryCompleteOrder: t.paymentsTryCompleteOrder,
                    isPaymentsAppOrder: t.isPaymentsAppOrder,
                    paymentsOfferApp: t.paymentsOfferApp,
                    checkoutEnabled: t.checkoutEnabled
                }),
                t.showProgress && l.PaymentsBox.showProgress(""),
                (0,
                s.extend)(cur, {
                    votesAmountsData: t.votesAmountsData,
                    paymentsPreferVotes: t.paymentsPreferVotes,
                    votesTypeInit: t.votesTypeInit,
                    psList: t.psList,
                    paymentsWideBox: t.paymentsWideBox,
                    paymentsTooltips: t.paymentsTooltips,
                    paymentsChangeType: 0 === t.paymentsWideBox ? (0,
                    i.getLang)("payments_go_change_pay_type") : "",
                    payments_get_votes: (0,
                    i.getLang)("payments_get_votes_new"),
                    getVotesDoneHide: !0,
                    paymentsWaitingCache: {},
                    isPaymentComplete: !1,
                    isPaymentAttemted: !1,
                    usdRate: t.usdRate,
                    paymentsHash: t.paymentsHash,
                    paymentComplete: l.PaymentsBox.complete,
                    paymentCanceled: l.PaymentsBox.paymentCanceled,
                    paymentsShowProgress: l.PaymentsBox.showProgress,
                    statSessionId: t.statSessionId
                }),
                l.PaymentsBox.initialize(e),
                cur.checkoutEnabled || (l.PaymentsBox.initPhoneCountry(t.countries, t.country),
                l.PaymentsBox.initPhoneNumber((0,
                _.ge)("phone"))),
                (0,
                s.extend)(cur, {
                    paymentsTypesSum: t.paymentsTypesSum,
                    instantNeedCVV: t.instantNeedCVV,
                    votesType: t.votesType,
                    paymentsWPreload: t.paymentsWPreload
                }),
                t.getVotesAmountsOnDone && l.PaymentsBox.getVotesAmountsOnDone.apply(this, cur.paymentsWPreload))
            },
            showGetMoneyBox() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
                return (0,
                o.showBox)("al_gifts.php", h({
                    act: "get_money"
                }, e), {
                    onDone: this.processBoxOptions
                })
            }
        }
    }
    ,
    49030: (e,t,n)=>{
        "use strict";
        function r(e) {
            var t = e.getBoundingClientRect()
              , n = document.body
              , r = document.documentElement
              , i = window.pageYOffset || r.scrollTop || n.scrollTop
              , o = window.pageXOffset || r.scrollLeft || n.scrollLeft
              , a = r.clientTop || n.clientTop || 0
              , s = r.clientLeft || n.clientLeft || 0;
            return {
                top: Math.round(t.top + i - a),
                left: Math.round(t.left + o - s),
                width: e.offsetWidth,
                height: e.offsetHeight
            }
        }
        n.d(t, {
            default: ()=>r
        })
    }
    ,
    215949: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            showQuickLoginBox: ()=>E,
            showJoinBox: ()=>y,
            Index: ()=>w
        });
        n(59357);
        var r = n(289988)
          , i = n(635676)
          , o = n(100416)
          , a = n(376567)
          , s = n(49535)
          , c = n(386409)
          , _ = n(654612)
          , l = n(376852)
          , u = n(786067)
          , d = n(695724)
          , p = n(315544)
          , h = n(70488)
          , m = n(255349)
          , f = n(985048)
          , g = n(559367)
          , v = n(47612);
        function E() {
            return (0,
            _.showBox)("al_login.php", {
                act: "box"
            }),
            !1
        }
        function y() {
            return (0,
            _.showBox)("join.php", {
                act: "box",
                from: window.nav.strLoc
            }),
            !1
        }
        var w = {
            initNew: function() {
                (0,
                p.$$)(".index_login .big_text").forEach((e=>{
                    (0,
                    o.placeholderInit)(e)
                }
                )),
                setTimeout((()=>(0,
                p.elfocus)("index_email")), 0);
                var e = (0,
                p.ge)("index_login_form")
                  , t = (0,
                p.ge)("index_email")
                  , n = (0,
                p.ge)("index_pass");
                e.onsubmit = function() {
                    if (!window.submitQuickLoginForm)
                        return !0;
                    if (!(0,
                    d.trim)(t.value))
                        return (0,
                        c.notaBene)(t),
                        !1;
                    if (!(0,
                    d.trim)(n.value))
                        return (0,
                        c.notaBene)(n),
                        !1;
                    var e = (0,
                    f.isEmail)(t.value) ? h.RegistrationItemEventTypes.INPUT_EMAIL : h.RegistrationItemEventTypes.INPUT_PHONE;
                    return h.registrationItemStat.logEvent(e, cur.eventScreen, void 0, {
                        force: !0
                    }),
                    submitQuickLoginForm(t.value, n.value, {
                        prg: "index_login_button",
                        params: {
                            expire_input: (0,
                            p.val)("index_expire_input")
                        }
                    }),
                    !1
                }
                ,
                t.oninput = function() {
                    w.isLoginInputDirty || (h.registrationItemStat.logEvent(h.RegistrationItemEventTypes.LOGIN_TAP, h.EventScreens.START, void 0, {
                        force: !0
                    }),
                    w.isLoginInputDirty = !0)
                }
                ,
                n.oninput = function() {
                    w.isPasswordInputDirty || (h.registrationItemStat.logEvent(h.RegistrationItemEventTypes.PASSWORD_TAP, h.EventScreens.START, void 0, {
                        force: !0
                    }),
                    w.isPasswordInputDirty = !0)
                }
                ,
                window.loginByCredential && (t.onclick = loginByCredential,
                n.onclick = loginByCredential),
                window.onReLoginDone = function(e) {
                    location.href = e
                }
                ,
                window.onReLoginFailed = function(e) {
                    -1 === e && (location.href = location.href.replace(/^http:/, "https:"))
                }
                ,
                (0,
                m.initVKComboIndexPromo)(),
                this.initGallery()
            },
            initGallery: function() {
                var e = document.querySelector("#user_gallery");
                e && (cur.userGallery = new v.UIGallery(e))
            },
            initVkId: function(e) {
                this.initGallery();
                var t = document.querySelector(".VkIdIndex");
                t && (0,
                g.initVkIdForm)(t, e)
            },
            showRegTT: function(e, t) {
                var n, r = "INPUT" === e.tagName, i = e;
                (!r && (n = (0,
                p.geByClass1)("selector_table", e)) || !r && (n = (0,
                p.geByClass1)("radiobtn", e))) && (i = n);
                var o = function() {
                    (0,
                    l.showTooltip)(i, {
                        text: t,
                        dir: "right",
                        width: 320,
                        typeClass: "ij_tt",
                        shift: [335, -(0,
                        p.getSize)(i)[1] / 2],
                        hasover: 1,
                        nohideover: 1,
                        onCreate: function() {
                            (0,
                            s.removeEvent)(i, "mouseout"),
                            r && (i.onblur = function() {
                                i.tt && i.tt.hide && i.tt.hide()
                            }
                            )
                        }
                    })
                };
                r ? (e.onfocus = o,
                (0,
                c.notaBene)(e)) : (o(),
                (0,
                d.each)((0,
                p.geByClass)("selector_table", e), (function(e, t) {
                    (0,
                    c.notaBene)(t)
                }
                )))
            },
            showLoginBox(e, t) {
                if (!t || "Enter" === t.code)
                    return (0,
                    _.showBox)("al_login.php", {
                        act: "auth_box",
                        ul: e
                    }, {
                        params: {
                            dark: !0,
                            hideButtons: !0,
                            bodyStyle: "padding: 44px 25px;"
                        }
                    }),
                    !1
            },
            showQuickLoginBox: E,
            showJoinBox: y,
            deleteRecentAccount: function(e, t, n, r, i) {
                return window.tooltips && tooltips.hideAll(),
                ajax.post("/al_login.php?act=a_delete_recent_account", {
                    mid: t,
                    hash: n
                }, {
                    onDone: function() {
                        cur.userGallery && cur.userGallery.removeItem(i)
                    }
                }),
                (0,
                s.cancelEvent)(r)
            },
            generateDays: function(e, t) {
                for (var n = [[0, (0,
                u.getLang)("index_sel_bday")]], i = (0,
                r.getLastDay)(e, t), o = 1; o <= i; ++o)
                    n.push([o, o + ""]);
                return n
            },
            updateDays: function(e, t, n) {
                n || (n = cur.uiBday),
                n.val() > (0,
                r.getLastDay)(e, t) && n.clear(),
                n.setData(w.generateDays(e, t).slice((0,
                d.intval)(cur.options.bday) ? 1 : 0))
            },
            fbCheck: function(e, t, n) {
                var r, o, a, s, c;
                window.fbAsyncInit = function() {
                    FB.init({
                        appId: e,
                        xfbml: !0,
                        version: "v2.7"
                    });
                    var r = "_box" === t;
                    n || (n = (0,
                    p.ge)("index_fbcontinuewithsign" + (t || ""))),
                    (0,
                    p.setStyle)(n, {
                        opacity: 0,
                        height: 0,
                        overflow: "hidden"
                    }),
                    (0,
                    p.show)(n),
                    FB.Event.subscribe("xfbml.render", (()=>{
                        (0,
                        i.animate)(n, {
                            height: r ? 79 : 55,
                            opacity: 1
                        }, 200)
                    }
                    ))
                }
                ,
                window.FB && window.FB.init ? window.fbAsyncInit() : (r = document,
                o = "script",
                a = "facebook-jssdk",
                c = r.getElementsByTagName(o)[0],
                r.getElementById(a) || ((s = r.createElement(o)).id = a,
                s.src = "//connect.facebook.net/" + cur.fbLocale + "/sdk.js",
                c.parentNode.insertBefore(s, c)))
            },
            fbJoin: function(e, t) {
                cur.fbContext = e,
                cur.fbLoginButton = t,
                h.registrationItemStat.logFieldInteraction(h.RegistrationFieldItemNames.FACEBOOK_REGISTRATION, h.EventFieldValues.REGISTERED_VIA_FB),
                h.registrationItemStat.logEvent(h.RegistrationItemEventTypes.SCREEN_PROCEED, h.EventScreens.START, h.EventScreens.OAUTH_FB, {
                    force: !0
                }),
                (0,
                a.setCookie)("remixfbstate", cur.fbState, 30, null, "None", !1);
                var n = location.protocol + "//" + location.host + "/join?act=fb_sign"
                  , r = encodeURIComponent(n)
                  , i = "https://graph.facebook.com/v3.3/oauth/authorize?client_id=" + cur.fbApp + "&redirect_uri=" + r + "&scope=email,user_birthday&display=popup&state=" + cur.fbState
                  , o = void 0 !== window.screenX ? window.screenX : window.screenLeft
                  , s = void 0 !== window.screenY ? window.screenY : window.screenTop
                  , c = void 0 !== window.outerWidth ? window.outerWidth : document.body.clientWidth
                  , _ = void 0 !== window.outerHeight ? window.outerHeight : document.body.clientHeight - 22
                  , l = parseInt(o + (c - 640) / 2, 10)
                  , u = parseInt(s + (_ - 340) / 2.5, 10);
                return window.open(i, "fb_sign", "width=640,height=340,left=" + l + ",top=" + u),
                !1
            },
            fbFinish: function(e) {
                e.error ? (h.registrationItemStat.logFieldInteraction(h.RegistrationFieldItemNames.FACEBOOK_REGISTRATION, h.EventFieldValues.REGISTERED_VIA_FB),
                h.registrationItemStat.logEvent(h.RegistrationItemEventTypes.SCREEN_PROCEED, h.EventScreens.OAUTH_FB, h.EventScreens.FACEBOOK_REGISTRATION_FAILED, {
                    force: !0
                }),
                setTimeout((0,
                _.showFastBox)((0,
                u.getLang)("global_error"), e.error).hide, 2e3)) : e.date && ((0,
                c.lockButton)(cur.fbLoginButton || (0,
                p.ge)("index_fb" + (cur.fbContext || ""))),
                nav.go("/join?act=fb_start"))
            }
        }
    }
    ,
    18149: (e,t,n)=>{
        "use strict";
        n.d(t, {
            vkIndexer: ()=>i
        });
        n(820075),
        n(976142),
        n(66108),
        n(296253),
        n(751876),
        n(283946);
        var r = n(40906);
        function i(e, t, n) {
            this.list = e,
            this.iterCur = 0,
            this.iterEnd = e ? e.length : 0,
            this.index = {},
            this.callback = n || function() {}
            ,
            this.prepareFunc = t || function(e) {
                return e
            }
            ,
            setTimeout(this.indexIteration.bind(this), 10)
        }
        i.prototype.delimiter = i.delimiter = new RegExp("[\\s\\-\\.,\\\"\\'\\\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),
        i.prototype.trimmer = new RegExp("^[\\s\\-\\.,\\\"\\'\\\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\\\(\\)\\[\\]\\{\\}\\\\]+$","g"),
        i.prototype.toTranslit = {
            1072: "a",
            1073: "b",
            1074: "v",
            1075: "g",
            1076: "d",
            1077: "e",
            1078: "zh",
            1079: "z",
            1080: "i",
            1081: "y",
            1082: "k",
            1083: "l",
            1084: "m",
            1085: "n",
            1086: "o",
            1087: "p",
            1088: "r",
            1089: "s",
            1090: "t",
            1091: "u",
            1092: "f",
            1093: "h",
            1094: "ts",
            1095: "ch",
            1096: "sh",
            1097: "sh",
            1099: "y",
            1101: "e",
            1102: "yu",
            1103: "ya",
            1105: "e",
            1098: "",
            1100: ""
        },
        i.prototype.toLocalCase = {
            f: "a",
            ",": "b",
            "<": "b",
            d: "v",
            u: "g",
            l: "d",
            t: "e",
            ";": "zh",
            ":": "zh",
            p: "z",
            b: "i",
            q: "y",
            r: "k",
            k: "l",
            v: "m",
            y: "n",
            j: "o",
            g: "p",
            h: "r",
            c: "s",
            n: "t",
            e: "u",
            a: "f",
            "[": "h",
            "{": "kh",
            w: "ts",
            x: "ch",
            i: "sh",
            o: "sh",
            s: "y",
            "'": "e",
            '"': "e",
            ".": "yu",
            ">": "yu",
            z: "ya",
            "`": "e",
            "~": "e",
            m: "",
            "]": "",
            "}": ""
        },
        i.prototype.toLocalTranslit = {
            1072: "f",
            1074: "d",
            1075: "u",
            1076: "l",
            1077: "t",
            1079: "p",
            1080: "b",
            1081: "q",
            1082: "r",
            1083: "k",
            1084: "v",
            1085: "y",
            1086: "j",
            1087: "g",
            1088: "h",
            1089: "c",
            1090: "n",
            1091: "e",
            1092: "a",
            1094: "w",
            1095: "x",
            1096: "i",
            1097: "o",
            1099: "s",
            1103: "z",
            1098: "m"
        },
        i.prototype.indexIteration = function() {
            for (var e = Math.min(this.iterEnd, this.iterCur + 200), t = this.iterCur; t < e; t++) {
                var n = this.list[t];
                try {
                    n._order = t
                } catch (e) {}
                this.add(n)
            }
            this.iterCur = t,
            t >= this.iterEnd ? this.callback(this) : setTimeout(this.indexIteration.bind(this), 10)
        }
        ,
        i.prototype.strToPrefixes = function(e) {
            for (var t = {}, n = (0,
            r.winToUtf)(e).toLowerCase().split(this.delimiter), i = n.length; i--; ) {
                var o = n[i]
                  , a = "";
                if (o) {
                    for (var s = 0; s < 6; s++) {
                        var c = o.charCodeAt(s);
                        if (c) {
                            var _ = this.toTranslit[c]
                              , l = o.substr(s, 1);
                            a += null != _ ? _ : l
                        }
                    }
                    t[a] = 1
                }
            }
            return t
        }
        ,
        i.prototype.strToSearchPrefixes = function(e) {
            for (var t = [], n = e.toLowerCase().split(this.delimiter), r = n.length; r--; ) {
                var i = {}
                  , o = n[r]
                  , a = ""
                  , s = ""
                  , c = ""
                  , _ = o.length > 1;
                if (o) {
                    for (var l = 0; l < 6; l++) {
                        var u = o.charCodeAt(l);
                        if (u) {
                            var d = this.toTranslit[u]
                              , p = o.substr(l, 1);
                            if (a += null != d ? d : p,
                            _) {
                                var h = this.toLocalCase[p]
                                  , m = this.toLocalTranslit[u];
                                s += null != h ? h : p,
                                c += null != m ? m : p
                            }
                        }
                    }
                    i[a] = 1,
                    _ && (i[s] = 2,
                    i[c] = 3),
                    t.push(i)
                }
            }
            return t
        }
        ,
        i.prototype.toIndexTree = function(e, t) {
            for (var n = this.index, r = 0; r < 6; r++) {
                var i = e.substr(r, 1) || -1;
                n = n[i] ? n[i] : n[i] = 5 == r ? [] : {}
            }
            n.push(t)
        }
        ,
        i.prototype.remove = function(e) {
            var t = this.prepareFunc(e)
              , n = this.strToPrefixes(t);
            for (var r in n)
                if (n.hasOwnProperty(r)) {
                    for (var i = this.index, o = 0; o < 6; o++) {
                        var a = r.substr(o, 1) || -1;
                        if (!i[a])
                            break;
                        i = i[a]
                    }
                    if (i.length)
                        for (var s in i)
                            if (this.equals(i[s], e)) {
                                i.splice(s, 1);
                                break
                            }
                }
        }
        ,
        i.prototype.equals = function(e, t) {
            for (var n in e)
                if (e.hasOwnProperty(n))
                    switch (typeof e[n]) {
                    case "object":
                        if (!this.equals(e[n], t[n]))
                            return !1;
                        break;
                    case "function":
                        if (void 0 === e[n] || e[n].toString() != t[n].toString())
                            return !1;
                        break;
                    default:
                        if (e[n] != t[n])
                            return !1
                    }
            for (var r in t)
                if (void 0 === t[r])
                    return !1;
            return !0
        }
        ,
        i.prototype.intersect = function(e, t) {
            var n = [];
            if ((0,
            r.isNumeric)(e[0]) || (0,
            r.isNumeric)(t[0]))
                return e.filter((function(e) {
                    return -1 !== t.indexOf(e)
                }
                ));
            for (; e.length > 0 && t.length > 0; )
                e[0]._order < t[0]._order ? e.shift() : (e[0]._order > t[0]._order || this.equals(e[0], t[0]) && n.push(e.shift()),
                t.shift());
            return n
        }
        ,
        i.prototype.add = function(e) {
            var t = this.prepareFunc(e)
              , n = this.strToPrefixes(t);
            for (var r in n)
                n.hasOwnProperty(r) && this.toIndexTree(r, e)
        }
        ,
        i.prototype.search = function(e) {
            var t = this.index
              , n = this.strToSearchPrefixes(e)
              , r = []
              , i = !1;
            for (var o in n)
                if (n.hasOwnProperty(o)) {
                    if (i && !r)
                        break;
                    var a = this.localSearch(n[o], 0, t);
                    a.sort((function(e, t) {
                        return e._order - t._order
                    }
                    )),
                    r = i ? this.intersect(r, a) : a,
                    i = !0
                }
            for (var s = r[0], c = r.length + 1, _ = [], l = 1; l < c; l++) {
                var u = r[l];
                u != s && (_.push(s),
                s = u)
            }
            return _
        }
        ,
        i.prototype.localSearch = function(e, t, n) {
            if (!n)
                return [];
            var r = {};
            for (var i in e)
                if (e.hasOwnProperty(i)) {
                    var o = i.substr(t, 1) || -1;
                    r[o] || (r[o] = {}),
                    r[o][i] = 1
                }
            if (6 == t++ || !n)
                return n;
            var a = [];
            for (var s in r)
                if (-1 == s)
                    for (var c in n)
                        n.hasOwnProperty(c) && a.push.apply(a, this.localSearch(r[s], t, n[c]));
                else {
                    var _ = this.localSearch(r[s], t, n[s]);
                    a.push.apply(a, _)
                }
            return a
        }
    }
    ,
    376270: (e,t,n)=>{
        "use strict";
        n.d(t, {
            hasAccessibilityMode: ()=>_,
            updateOnlineText: ()=>l,
            updateAriaCheckboxes: ()=>u,
            updateAriaElements: ()=>p,
            makeInteractiveMVKA11yProposal: ()=>h
        });
        var r = n(386409)
          , i = n(695724)
          , o = n(315544)
          , a = n(786067)
          , s = n(726271)
          , c = n(479957);
        function _() {
            return !(!window.vk || !vk.a11y)
        }
        function l() {
            clearTimeout(cur.updateOnlineTO),
            cur.updateOnlineTO = setTimeout((function() {
                (0,
                i.each)((0,
                o.geByClass)("_online"), (function() {
                    var e = (0,
                    o.geByClass1)("_online_reader", this) || this
                      , t = (0,
                    o.hasClass)(this, "online")
                      , n = (0,
                    o.hasClass)(this, "mobile")
                      , r = (0,
                    o.geByTag)("img", e)
                      , s = function(e) {
                        var t = (0,
                        o.domClosest)("_post", e)
                          , n = t && (0,
                        o.domByClass)(t, "author");
                        return n ? n.innerText || n.textContent : ""
                    };
                    if (t) {
                        var c = "";
                        (0,
                        i.each)(r, (function() {
                            var e = (0,
                            o.attr)(this, "alt") || (0,
                            o.attr)(this, "data-alt") || s(this);
                            e && (c = (0,
                            i.trim)(c + " " + e),
                            this.setAttribute("data-alt", e),
                            this.removeAttribute("alt"))
                        }
                        )),
                        c = (0,
                        i.trim)(c + " " + (n ? (0,
                        a.getLang)("global_user_is_online_mobile") : (0,
                        a.getLang)("global_user_is_online"))),
                        e.setAttribute("aria-label", c)
                    } else
                        (0,
                        i.each)(r, (function() {
                            var e = (0,
                            o.attr)(this, "data-alt") || s(this);
                            e && (this.setAttribute("alt", e),
                            this.removeAttribute("data-alt"))
                        }
                        )),
                        e.removeAttribute("aria-label")
                }
                ))
            }
            ), 100)
        }
        function u() {
            clearTimeout(cur.updateChkBoxTO),
            cur.updateChkBoxTO = setTimeout((function() {
                var e = [];
                (0,
                i.each)(["checkbox", "checkbox_pic"], (function() {
                    e = e.concat((0,
                    o.geByClass)(this))
                }
                )),
                (0,
                i.each)(e, (function() {
                    "DIV" !== this.tagName || this.getAttribute("role") || (this.setAttribute("role", "checkbox"),
                    this.setAttribute("aria-checked", (0,
                    r.isChecked)(this) ? "true" : "false"),
                    this.setAttribute("tabindex", 0))
                }
                ))
            }
            ), 100)
        }
        function d() {
            clearTimeout(cur.updateRadioBtnsTO),
            cur.updateRadioBtnsTO = setTimeout((function() {
                var e = []
                  , t = (0,
                o.geByClass)("radiobtn");
                (0,
                i.each)(t, (function() {
                    if ("DIV" === this.tagName && !this.getAttribute("role")) {
                        var t = (0,
                        r.isChecked)(this);
                        this.setAttribute("role", "radio"),
                        this.setAttribute("aria-checked", t ? "true" : "false"),
                        this.setAttribute("tabindex", t ? 0 : -1);
                        var n = function(e) {
                            var t = 5
                              , n = 0
                              , r = e;
                            for (; n < t && r !== document; ) {
                                if (r = (0,
                                o.domPN)(r),
                                (0,
                                o.geByClass)("radiobtn", r).length > 1)
                                    break;
                                n++
                            }
                            return r
                        }(this);
                        ~e.indexOf(n) || e.push(n)
                    }
                }
                )),
                (0,
                i.each)(e, (function() {
                    if (!(0,
                    o.geByClass)("on", this).length) {
                        var e = (0,
                        o.geByClass)("radiobtn", this);
                        e.length && e[0].setAttribute("tabindex", 0)
                    }
                }
                ))
            }
            ), 100)
        }
        function p() {
            l(),
            u(),
            d()
        }
        function h() {
            var e = document.getElementById("a11y_mvk_proposal");
            e && e.getAttribute("aria-label") && !e.getAttribute("role") && (e.setAttribute("role", "link"),
            e.style.display = "block",
            e.classList.add("visually-hidden"),
            e.addEventListener("click", (e=>{
                var t;
                (0,
                c.statlogsValueEvent)("accessibility", "is_mvk_proposal_clicked", null === (t = cur) || void 0 === t ? void 0 : t.module),
                setTimeout((()=>{
                    (0,
                    s.redirectToMVK)()
                }
                ), 100)
            }
            ), {
                passive: !0
            }))
        }
    }
    ,
    778273: (e,t,n)=>{
        "use strict";
        n.d(t, {
            updSeenAdsInfo: ()=>a,
            __adsUpdate: ()=>c,
            initAds: ()=>u
        });
        var r = n(376567)
          , i = n(695724)
          , o = n(315544);
        function a() {
            if (((0,
            o.getXY)("ads_left", !0) || {})[1] && vk.id) {
                var e = (0,
                o.getXYRect)((0,
                o.geByTag1)("ol", (0,
                o.ge)("side_bar_inner")), !0)
                  , t = e ? e.height : 0
                  , n = (0,
                o.getXYRect)((0,
                o.ge)("left_blocks"), !0)
                  , a = n ? n.height : 0
                  , s = Math.max(Math.floor(((window.lastWindowHeight || 0) - t - a - 42 - 10) / 260), 0)
                  , c = (0,
                r.getCookie)("remixseenads");
                window.__seenAds = (0,
                i.intval)(c),
                c && __seenAds === s || (window.__seenAds = s,
                (0,
                r.setCookie)("remixseenads", s, 30))
            }
        }
        function s(e, t) {
            return !window.noAdsAtAll && (s = function() {
                return window.AdsLight && AdsLight.getAjaxParams.apply(AdsLight.getAjaxParams, arguments) || {
                    al_ad: null
                }
            }
            ,
            window.AdsLight ? n = s(e, t) : (n = {
                al_ad: null
            },
            window.stManager.add([window.jsc("web/ads_light.js")], s.pbind(e, t))),
            n);
            var n
        }
        function c(e) {
            if (window.noAdsAtAll)
                return !1;
            c = function() {
                window.AdsLight && AdsLight.updateBlock.apply(AdsLight.updateBlock, arguments)
            }
            ,
            window.stManager.add([window.jsc("web/ads_light.js")], c.pbind(e))
        }
        function _(e, t, n, r, i, o) {
            if (window.noAdsAtAll)
                return !1;
            _ = function() {
                var e = "";
                arguments && arguments[0] && (e = arguments[0]),
                "\x3c!--criteo" === e.slice(0, "\x3c!--criteo".length) && Math.random() < .05 && (window.AdsLight && AdsLight.setNewBlock ? ajax.post("/wkview.php?act=mlet&mt=750", {}, {
                    onFail: ()=>!0
                }) : ajax.post("/wkview.php?act=mlet&mt=751", {}, {
                    onFail: ()=>!0
                })),
                window.AdsLight && AdsLight.setNewBlock.apply(AdsLight.setNewBlock, arguments)
            }
            ,
            window.stManager.add([window.jsc("web/ads_light.js")], _.pbind(e, t, n, r, i, o))
        }
        function l(e) {
            if (window.noAdsAtAll)
                return !1;
            l = function() {
                window.AdsLight && AdsLight.updateExternalStats.apply(AdsLight.updateExternalStats, arguments)
            }
            ,
            window.stManager.add([window.jsc("web/ads_light.js")], l.pbind(e))
        }
        function u() {
            window.__seenAds = (0,
            i.intval)((0,
            r.getCookie)("remixseenads")),
            window.__adsUpdate = c,
            window.__adsSet = _,
            window.__adsGetAjaxParams = s,
            window.__adsUpdateExternalStats = l
        }
        window.__adsLoaded = (0,
        i.vkNow)()
    }
    ,
    115471: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AjaxCacheClient: ()=>a
        });
        n(175115),
        n(991181),
        n(296253);
        var r = n(695724)
          , i = n(668040);
        function o() {
            return o = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            o.apply(this, arguments)
        }
        class a {
            static getInstance(e, t) {
                var n = a.makeCacheKey(e, t);
                return a._instances[n] || (a._instances[n] = new a(n)),
                a._instances[n]
            }
            constructor(e) {
                a.ensureCachesInitialized(),
                this._cacheKey = e
            }
            getFromCache(e, t, n) {
                var i = n.cacheLevel
                  , o = void 0 === i ? 0 : i
                  , a = n.forceGlobalCache
                  , s = void 0 !== a && a
                  , c = n.onAnswerProcessed
                  , _ = void 0 === c ? ()=>{}
                : c;
                if (o > 0 || s) {
                    var l = window.ajaxCache[this._cacheKey];
                    if (l && l._loading)
                        return l._callbacks.push(e),
                        !1;
                    if (l && !s)
                        return e(0, l),
                        3 === o && delete window.ajaxCache[this._cacheKey],
                        !1;
                    if (l = window.globalAjaxCache[this._cacheKey])
                        return -1 === l || (0,
                        r.isFunction)(l) ? window.globalAjaxCache[this._cacheKey] = t : t.apply(window, l),
                        _ && _(),
                        !1
                }
                return window.ajaxCache[this._cacheKey] = {
                    _loading: 1,
                    _callbacks: []
                },
                !0
            }
            processExistingCache(e, t) {
                var n = window.ajaxCache[this._cacheKey];
                n && n._loading && (setTimeout((function() {
                    for (var r in n._callbacks)
                        n._callbacks.hasOwnProperty(r) && n._callbacks[r](e, t)
                }
                ), 0),
                delete window.ajaxCache[this._cacheKey])
            }
            cacheResponse(e) {
                window.ajaxCache[this._cacheKey] = e
            }
            static ensureCachesInitialized() {
                window.ajaxCache || (window.ajaxCache = {}),
                window.globalAjaxCache || (window.globalAjaxCache = {})
            }
            static makeCacheKey(e, t) {
                var n = o({}, t);
                return ["al", "al_ad", "ads_section", "ads_showed", "captcha_sid", "captcha_key", "_smt", "_preload"].forEach((e=>delete n[e])),
                e + "#" + (0,
                i.toQueryString)(n)
            }
            static preload(e, t, n) {
                a.ensureCachesInitialized(),
                e && "/" !== e.substr(0, 1) && (e = "/" + e),
                window.ajaxCache[a.makeCacheKey(e, t)] = n
            }
            static invalidate(e, t) {
                a.ensureCachesInitialized(),
                void 0 === e ? window.ajaxCache = {} : delete window.ajaxCache[a.makeCacheKey(e, t)]
            }
            static invalidateFor(e) {
                Object.keys(window.ajaxCache).forEach((t=>{
                    e(t) && delete window.ajaxCache[t]
                }
                ))
            }
        }
        a._instances = {}
    }
    ,
    711048: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            FrameTransport: ()=>FrameTransport
        });
        var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(175115)
          , _shared_lib_convert__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(668040)
          , _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(695724)
          , _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(159121)
          , _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(787481)
          , _web_lib_dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(315544)
          , _shared_lib_site__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(961540);
        function _extends() {
            return _extends = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            _extends.apply(this, arguments)
        }
        var _queueStartMarker = {
            type: "start"
        }
          , _queueEndMarker = {
            type: "end"
        };
        class FrameTransport {
            constructor() {
                this.frameDataQueue = [],
                this.frameTimeout = null,
                this.frame = null,
                this.queueReady = !1,
                this.fulfilled = !1,
                this.execInline = ()=>{}
                ,
                this._debug = ()=>{}
                ,
                window.addEventListener("message", this.onWindowMessage.bind(this))
            }
            setHandlers() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ()=>{}
                  , t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : ()=>{}
                  , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : ()=>{}
                ;
                this._onEnd = e,
                this._onModuleEvaluated = t,
                this._debug = n
            }
            setInlineHandler(e) {
                this.execInline = e
            }
            run(e, t) {
                return this._debug("Run ", e, this.frameDataQueue),
                this.frameUrl = e,
                this.onReady = t,
                this.fulfilled = !1,
                this.queueReady = !1,
                this.frameDataQueue = [_queueStartMarker],
                clearTimeout(this.frameTimeout),
                this.frameTimeout = !1,
                this.frame && this._cleanup(),
                this.frame = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.ce)("div", {
                    innerHTML: "<iframe></iframe>"
                }),
                utilsNode.appendChild(this.frame),
                this.frame.firstChild.src = this.frameUrl,
                this
            }
            onWindowMessage(e) {
                var t = !("isTrusted"in e) || e.isTrusted;
                if (_shared_lib_site__WEBPACK_IMPORTED_MODULE_6__.VK_ORIGIN_REGEX_STRICT.test(e.origin) && t) {
                    var n = e.data
                      , r = n.action
                      , i = n.type
                      , o = n.data;
                    if ("frame_transport" === i && "use_meta" === r)
                        this.useMeta(o)
                }
            }
            useMeta(e) {
                this._debug("Metainfo: ", e),
                this.onReady(e)
            }
            useAjaxBlock(e, t, n) {
                this._debug("Ajax block: ", e, t, n, this.fulfilled, this.frameDataQueue),
                this.fulfilled || (this.frameDataQueue.push(FrameTransport._makeQueueBlock(e, t, n)),
                1 === this.frameDataQueue.length && this._nextQueueItem())
            }
            finalize(e, t) {
                this._debug("Finalize: ", e),
                this._cleanup(),
                e && this.frameDataQueue.push(FrameTransport._makeQueueBlock(!1, !1, e, t)),
                this.queueReady = !0,
                this.frameDataQueue.push(_queueEndMarker),
                window.cur.onFrameBlocksDone && window.cur.onFrameBlocksDone(),
                this._onEnd && this._onEnd((new Date).getTime())
            }
            _nextQueueItem() {
                if (this.frameTimeout && clearTimeout(this.frameTimeout),
                this.queueReady)
                    if (this._debug("Next queue item: ", this.fulfilled, this.frameDataQueue),
                    this.fulfilled || 0 === this.frameDataQueue.length)
                        this.frameTimeout = !1;
                    else {
                        var e = this.frameDataQueue.shift();
                        switch (e.type) {
                        case _queueStartMarker.type:
                            this._nextQueueItem();
                            break;
                        case _queueEndMarker.type:
                            this.fulfilled = !0;
                            break;
                        default:
                            this.frameTimeout = setTimeout((()=>this._onReceived(e)), 0)
                        }
                    }
                else
                    this.frameTimeout = setTimeout((()=>this._nextQueueItem()), 100)
            }
            _onReceived(e) {
                var t = e.container && (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.ge)(e.container);
                t && e.html && (t.firstChild ? t.appendChild((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.cf)(e.html)) : (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.val)(t, e.html)),
                e.js && (_runJs(e.js, ((t,n)=>{
                    (0,
                    _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_3__.topError)(t, {
                        dt: 15,
                        type: 8,
                        url: this.frameUrl,
                        js: n,
                        answer: JSON.stringify(e)
                    }),
                    (0,
                    _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_4__.logEvalError)(t, n)
                }
                )),
                this._onModuleEvaluated && this._onModuleEvaluated(cur.module)),
                e.params && "leftads"in e.params && window.__adsSet && __adsSet(e.params.leftads, e.params.ads_section || "", e.params.ads_can_show, e.params.ads_showed),
                this._nextQueueItem()
            }
            _cleanup() {
                this._debug("Cleanup: ", this.frameDataQueue),
                this.frame && (this.frame.innerHTML = "",
                utilsNode.removeChild(this.frame),
                this.frame = null)
            }
            abort() {
                clearTimeout(this.frameTimeout),
                this.frameTimeout = !1,
                this._cleanup()
            }
            static get frame() {
                return FrameTransport.__frame || (FrameTransport.__frame = new FrameTransport),
                FrameTransport.__frame
            }
            static request(e, t, n, r, i) {
                var o = FrameTransport.frame;
                return o.setInlineHandler(i),
                o.run(FrameTransport.makeUrl(e, t, !(r && r.noSort)), n)
            }
            static _makeQueueBlock(e, t, n, r) {
                return {
                    type: "block",
                    container: e,
                    html: t,
                    js: n,
                    params: r
                }
            }
            static makeUrl(e, t) {
                var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2]
                  , r = t;
                return "string" == typeof t && (r = (0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_1__.fromQueryString)(t)),
                e + "?" + (r = (0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_1__.toQueryString)(_extends({}, r, {
                    _rndVer: (0,
                    _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.irand)(0, 99999)
                }), !n))
            }
        }
        function _runJs(js, onError) {
            var script = "(function(){" + js + ";})()";
            if (__debugMode)
                eval(script);
            else
                try {
                    eval(script)
                } catch (e) {
                    onError && onError(e, script)
                }
        }
    }
    ,
    896011: (e,t,n)=>{
        "use strict";
        n.d(t, {
            requestBox: ()=>i,
            activateMobileBox: ()=>o,
            validateMobileBox: ()=>a,
            validatePassBox: ()=>s,
            validateOtpBox: ()=>c
        });
        var r = n(654612);
        function i(e, t, n) {
            return e.setOptions({
                onDestroy: n
            }),
            e.onDone = function() {
                t && t.apply(null, arguments)
            }
            ,
            e
        }
        function o(e) {
            return i((0,
            r.showBox)("activation.php", {
                act: "activate_mobile_box",
                hash: e.hash
            }), (function() {
                vk.nophone = 0,
                e.onDone()
            }
            ), e.onFail)
        }
        function a(e) {
            return i((0,
            r.showBox)("activation.php", {
                act: "validate_box",
                captcha: e.acceptCaptcha ? 1 : "",
                skip_push: e.skip_push ? e.skip_push : "",
                from: e.from || "",
                hash: e.hash,
                ahash: e.ahash
            }, {
                stat: ["uncommon.css"]
            }), e.onDone, e.onFail)
        }
        function s(e) {
            return i((0,
            r.showBox)("activation.php", {
                act: "pass_validate_box",
                hash: e.hash
            }, {
                stat: ["uncommon.css"]
            }), e.onDone, e.onFail)
        }
        function c(e) {
            return i((0,
            r.showBox)("activation.php", {
                act: "otp_validate_box",
                hash: e.hash
            }, {
                stat: ["uncommon.css"]
            }), e.onDone, e.onFail)
        }
    }
    ,
    113160: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AjaxProtoJson: ()=>i
        });
        var r = n(695724);
        class i {
            parseResponse(e) {
                var t = this.parseStaticPayload(e);
                return {
                    navVersion: (0,
                    r.intval)(t.loaderVersion),
                    newStatic: t.static,
                    statsMeta: t.statsMeta,
                    langId: (0,
                    r.intval)(t.langPack),
                    langVer: (0,
                    r.intval)(t.langVersion),
                    langKeys: t.langKeys,
                    templates: t.templates,
                    code: (0,
                    r.intval)(t.payload[0]),
                    payload: t.payload[1],
                    debugLog: t.debugLog,
                    env: t.env,
                    extra: t.extra,
                    execInline: t.execInline
                }
            }
            parseStaticPayload(e, t) {
                var n = e;
                return e && "string" == typeof e && (n = JSON.parse(e)),
                n.payload && n.payload[0] > 0 && (n.payload[1] = n.payload[1].map((e=>"string" == typeof e ? JSON.parse(e) : e))),
                n
            }
        }
    }
    ,
    293680: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ajax: ()=>I
        });
        n(175115),
        n(751876),
        n(59357);
        var r, i, o, a, s, c = n(668040), _ = n(486125), l = n(40906), u = n(19331), d = n(695724), p = n(315544), h = n(159121), m = n(711048), f = n(115471), g = n(236783), v = n(421537), E = n(113160), y = n(66433), w = n(786067), b = n(553429), C = n(19834), T = n(638736);
        function D() {
            return D = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            D.apply(this, arguments)
        }
        class A {
            static post(e, t, n) {
                A._protoAdapter = new E.AjaxProtoJson,
                e && "/" !== e.substr(0, 1) && "http" !== e.substr(0, 4) && (e = "/" + e);
                var r = D({}, n || {}, {
                    _captcha: !1,
                    _box: !1,
                    no_ads_params: !1
                })
                  , i = D({}, t, {
                    al: r.frame ? -1 : 1
                })
                  , o = (0,
                d.vkNow)()
                  , a = vk.spentLastSendTS ? Math.round((o - vk.spentLastSendTS) / 1e3) : 0;
                if (vk.sampleUser >= 0 && window.cur && cur.module && a >= 1 && (window.curNotifier && curNotifier.idle_manager && !curNotifier.idle_manager.is_idle && (i._smt = cur.module + ":" + a),
                vk.spentLastSendTS = o),
                r.progress && (r.showProgress || (r.showProgress = function() {
                    var e = (0,
                    p.ge)(r.progress);
                    (0,
                    p.hasClass)(e, "pr") && (0,
                    p.setStyle)(e, "opacity", 1),
                    (0,
                    p.show)(e)
                }
                ),
                r.hideProgress || (r.hideProgress = function() {
                    var e = (0,
                    p.ge)(r.progress);
                    (0,
                    p.hasClass)(e, "pr") && (0,
                    p.setStyle)(e, "opacity", 0),
                    (0,
                    p.hide)(e)
                }
                )),
                r.loader) {
                    var s = (0,
                    p.isVisible)(window.boxLayerWrap);
                    r.showProgress = function() {
                        (0,
                        _.boxRefreshCoords)(window.boxLoader),
                        (0,
                        p.show)(window.boxLoader),
                        s || (0,
                        p.show)(window.boxLayerWrap)
                    }
                    ,
                    r.hideProgress = function() {
                        (0,
                        p.hide)(window.boxLoader),
                        s || (0,
                        p.hide)(window.boxLayerWrap)
                    }
                }
                return new A(e,i,r)._post()
            }
            constructor(e, t, n) {
                this._url = e,
                this._options = D({}, n),
                this._query = t,
                this._additionalStaticLoader = null,
                this._cacheClient = null,
                n.local && (this.onDone = (0,
                d.vkLocal)(this.onDone),
                this.onFail = (0,
                d.vkLocal)(this.onFail),
                this.processResponse = (0,
                d.vkLocal)(this.processResponse)),
                this._options.cache && (this._cacheClient = f.AjaxCacheClient.getInstance(this._url, this._query)),
                this.onDone = this.onDone.bind(this),
                this.onFail = this.onFail.bind(this),
                this.processResponse = this.processResponse.bind(this)
            }
            _post() {
                if (!this._query.captcha_sid && this._options.showProgress && this._options.showProgress(),
                window.__adsGetAjaxParams && !this._options.no_ads_params && (this._query = D({}, this._query, {}, window.__adsGetAjaxParams(this._query, this._options))),
                this._options.stat && (this._additionalStaticLoader = null,
                window.stManager.add(this._options.stat, (()=>{
                    this._additionalStaticLoader && this._additionalStaticLoader(),
                    this._options.stat = !1
                }
                ))),
                !this._cacheClient || this._cacheClient.getFromCache(this.processResponse, this._options.onDone, {
                    cacheLevel: this._options.cache,
                    forceGlobalCache: this._options.forceGlobalCache,
                    onAnswerProcessed: this._options.hideProgress
                })) {
                    this._options.resend = (e,t)=>new A(this._url,e,t)._post(),
                    window.debuglogSent ? (this._reqid = window.debuglogSent(this._url + (this._query ? ": " + (0,
                    c.toQueryString)(this._query, this._options.noSort).replace(/&/g, "&amp;") : "")),
                    this._options.frame && (window._lfrid = this._reqid)) : this._reqid = 0;
                    var e = {};
                    return this._options.timeout && (e.timeout = this._options.timeout),
                    this._options.frame ? m.FrameTransport.request(this._url, this._query, this.onDone, this._options, this._runInlineScript.bind(this)) : (0,
                    g.plainpost)(this._url, this._query, this.onDone, this.onFail, !1, e, this._options, !1, (0,
                    u.partConfigEnabled)("extended_ajax_logging") ? e=>console.log("+ XHR Transport: " + e) : null)
                }
            }
            processResponse(e, t, n) {
                if (this._options.cache && this._cacheClient && this._cacheClient.processExistingCache(e, t),
                this._options.stat)
                    return this._options.stat = !1,
                    void (this._additionalStaticLoader = this.processResponse.pbind(e, t));
                this._options.cache && !this._options.forceGlobalCache && !e && this._cacheClient && this._cacheClient.cacheResponse(t),
                this._options.hideProgress && this._options.hideProgress(),
                2 !== e && (this._options._captcha && (this._options._suggest && (0,
                p.cleanElems)(this._options._suggest),
                this._options._captcha = O(this._options._captcha),
                this._options._suggest = this._options._captcha),
                this._options._box = O(this._options._box)),
                n && this._runInlineScript(n),
                function(e) {
                    switch (e) {
                    case 1:
                        return v.emailNotConfirmed;
                    case 2:
                        return v.showCaptcha;
                    case 3:
                        return v.authFailed;
                    case 4:
                        return v.makeRedirect;
                    case 5:
                        return v.reload;
                    case 6:
                        return v.mobileActivationRequired;
                    case 7:
                        return v.showMessage;
                    case 8:
                        return v.showError;
                    case 9:
                        return v.votesPayment;
                    case 10:
                        return v.zeroZone;
                    case 11:
                    case 12:
                        return (0,
                        v.mobileValidationRequired)(e);
                    case 13:
                        return v.evalCode;
                    case 14:
                        return v.otpBox;
                    case 15:
                        return v.passwordValidationRequired;
                    default:
                        return (0,
                        v.defaultHandler)(e)
                    }
                }(e)(this._options, t, this._query, this._url)
            }
            onFail(e, t) {
                if (!(0,
                T.processWaf)(t)) {
                    this._options.hideProgress && this._options.hideProgress(),
                    this._options._suggest && (0,
                    p.cleanElems)(this._options._suggest);
                    var n = t instanceof XMLHttpRequest ? t.status : t;
                    if (this._options._box = O(this._options._captcha, this._options._box),
                    this._options._captcha = this._options._box,
                    this._options._suggest = this._options._captcha,
                    "string" == typeof e && -1 !== e.indexOf("The page is temporarily unavailable") && __dev && (0,
                    d.inArray)(vk.id, [100]))
                        this._post();
                    else if (!this._options.onFail || !0 !== this._options.onFail(e)) {
                        var r = (JSON.stringify(e) || "No error details").substr(0, 300)
                          , i = this._query.act
                          , o = this._query && (0,
                        c.toQueryString)(this._query, this._options.noSort)
                          , a = this._url
                          , s = {
                            message: "Uncaught ajax error",
                            status: n,
                            data: {
                                url: a,
                                query: o
                            }
                        }
                          , _ = [`url: ${a}`, i && `act: ${i}`, r && `text: ${r}`].filter((e=>e)).join(", ");
                        0 === s.status && (0,
                        u.partConfigEnabled)("js_errors_no_write_uncaught_errors") || (0,
                        y.logError)(_, {
                            environment: "uncaughtAjaxRequestError",
                            breadcrumb: s
                        }),
                        __debugMode ? console.error("Uncaught Ajax request error:", r, s) : console.log("Uncaught Ajax request error:", r, s)
                    }
                }
            }
            doReload(e) {
                nav.reload({
                    force: !0,
                    from: e,
                    url: this._url,
                    query: this._query && (0,
                    c.toQueryString)(this._query)
                })
            }
            onDone(e, t) {
                if (!(0,
                T.processWaf)(t || e)) {
                    this._options.bench && (i = (new Date).getTime()),
                    this._options.frame && S("OnDone Req:", e);
                    var n, r = t instanceof XMLHttpRequest ? t.status : t;
                    try {
                        n = A._protoAdapter.parseResponse(e)
                    } catch (t) {
                        return void this.onFail(e, r)
                    }
                    var o, a = n, s = a.navVersion, _ = a.newStatic, u = a.statsMeta, m = a.langId, f = a.langVer, g = a.langKeys, v = a.templates, E = a.code, b = a.payload, D = a.debugLog, O = a.env, I = a.extra, M = a.execInline;
                    if (s)
                        if (vk.version && vk.version !== s)
                            s && b.length > 4 ? this.doReload(2) : nav.strLoc ? location.replace(l.locBase) : (0,
                            h.topError)("Server error.", {
                                type: 100
                            });
                        else if (vk.version = !1,
                        this._options.frame && (o = b),
                        vk.lang !== m && this._options.canReload)
                            this.doReload(3);
                        else {
                            if (u && (window.vk.statsMeta = u),
                            g) {
                                var R = g.local
                                  , L = g.global;
                                (0,
                                w.addLangKeys)(R),
                                (0,
                                w.addLangKeys)(L, !0)
                            }
                            O && O.pe && (window.vk.pe = O.pe),
                            v && (0,
                            d.addTemplates)(v),
                            function(e, t, n, r, i) {
                                if (!window.stVersions || (0,
                                l.isEmpty)(window.stVersions))
                                    return void i();
                                var o = ()=>{
                                    if (e === window.stVersions.nav)
                                        return function(e, t, n, r) {
                                            var i = ["common.css"];
                                            if (e)
                                                for (var o = 0, a = (e = e.split(",")).length; o < a; ++o)
                                                    i.push(e[o]);
                                            if (stVersions.lang < n)
                                                for (var s in stVersions.lang = n,
                                                StaticFiles)
                                                    StaticFiles.hasOwnProperty(s) && /^lang\d/i.test(s) && i.push(s);
                                            window.stManager.add(i, r, !0)
                                        }(t, 0, r, i);
                                    setTimeout(o, 100)
                                }
                                ;
                                if (e !== window.stVersions.nav) {
                                    var a = "";
                                    window.navMapSection && (a = `?section=${window.navMapSection}`);
                                    var s = vk.navPostfix || ""
                                      , c = vk.navDomain || "";
                                    headNode.appendChild((0,
                                    p.ce)("script", {
                                        type: "text/javascript",
                                        src: `${c}/js/loader_nav${s}${e}_${vk.lang}.js${a}`
                                    }))
                                }
                                setTimeout(o, 0)
                            }(s, _, 0, f, (()=>{
                                if (!this._options.frame)
                                    try {
                                        o = A._protoAdapter.parseStaticPayload(b, this._reqid),
                                        D && P(D, this._reqid)
                                    } catch (t) {
                                        var e = {
                                            message: "JSON error",
                                            data: {
                                                answer: b,
                                                url: this._url,
                                                query: this._query && (0,
                                                c.toQueryString)(this._query)
                                            }
                                        };
                                        (0,
                                        y.logError)(t, {
                                            environment: "ajax_request",
                                            breadcrumb: e
                                        }),
                                        console.error(t)
                                    }
                                this.processResponse(E, o, M),
                                (0,
                                C._handleResponseExtraPayloads)(I)
                            }
                            ))
                        }
                    else
                        this.onFail(`<pre>${e}</pre>`, {
                            status: -1
                        })
                }
            }
            _runInlineScript(e) {
                var t = "__exec_container"
                  , n = document.getElementById(t);
                n && document.body.removeChild(n);
                var r = document.createElement("script");
                r.id = t,
                r.innerHTML = e,
                document.body.appendChild(r)
            }
        }
        function S() {
            if ((0,
            u.partConfigEnabled)("extended_ajax_logging")) {
                var e;
                try {
                    throw new Error
                } catch (t) {
                    e = t.stack
                }
                var t = "+ Frame transport: " + arguments[0];
                console.groupCollapsed(t),
                [].slice.call(arguments, 1).forEach((e=>console.log(JSON.stringify(e)))),
                console.log(e),
                console.groupEnd()
            }
        }
        function P(e, t) {
            window.debuglogGot && window.debuglogGot(t, e)
        }
        function O() {
            for (var e = 0, t = arguments.length; e < t; ++e) {
                var n = arguments[e];
                n && n.isVisible() && (n.setOptions({
                    onHide: !1,
                    onDestroy: !1
                }),
                n.hide())
            }
            return !1
        }
        m.FrameTransport.frame.setHandlers((e=>s = e), (e=>{
            (0,
            b.triggerSubscribersOnModuleEvaluated)(),
            a = e
        }
        ), S);
        var I = {
            enabled: function() {
                try {
                    return !!new XMLHttpRequest
                } catch (e) {
                    return !1
                }
            }(),
            set tStart(e) {
                r = e
            },
            set tProcess(e) {
                o = e
            },
            plainpost: g.plainpost,
            post: A.post,
            framepost: m.FrameTransport.request,
            _getreq: function() {
                return new XMLHttpRequest
            },
            request: g.request,
            preload: f.AjaxCacheClient.preload,
            invalidate: f.AjaxCacheClient.invalidate,
            tGetParam: function() {
                if (r && a) {
                    var e = [i - r, o - i, undefined - o, s - r, a];
                    for (var t in e)
                        if (e.hasOwnProperty(t)) {
                            if (e[t] < 0)
                                return !1;
                            if (!e[t] && 0 !== e[t])
                                return !1
                        }
                    return r = !1,
                    e.join(",")
                }
            },
            AjaxRequest: A,
            AjaxCancellationToken: g.AjaxCancellationToken,
            frame: m.FrameTransport.frame,
            _framenext: ()=>m.FrameTransport.frame._nextQueueItem(),
            framegot: (e,t,n)=>m.FrameTransport.frame.useAjaxBlock(e, t, n),
            _frameover: (e,t)=>m.FrameTransport.frame.finalize(e, t),
            _framedone: (e,t)=>m.FrameTransport.frame.onReady([e, t]),
            _debugLog: P
        }
    }
    ,
    421537: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            emailNotConfirmed: ()=>emailNotConfirmed,
            showCaptcha: ()=>showCaptcha,
            mobileValidationRequired: ()=>mobileValidationRequired,
            passwordValidationRequired: ()=>passwordValidationRequired,
            authFailed: ()=>authFailed,
            makeRedirect: ()=>makeRedirect,
            reload: ()=>reload,
            mobileActivationRequired: ()=>mobileActivationRequired,
            showMessage: ()=>showMessage,
            showError: ()=>showError,
            votesPayment: ()=>votesPayment,
            otpBox: ()=>otpBox,
            zeroZone: ()=>zeroZone,
            evalCode: ()=>evalCode,
            defaultHandler: ()=>defaultHandler
        });
        var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(175115)
          , core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59357)
          , _shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(668040)
          , _web_lib_lang__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(786067)
          , _web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(49535)
          , _web_auth_auth__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(428163)
          , _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(695724)
          , _web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(654612)
          , _web_lib_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(315544)
          , _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(787481)
          , _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(159121)
          , _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(486125)
          , _web_gifts_gifts__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(965030)
          , _modal_box__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(896011)
          , _web_lib_environment__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(703797);
        function _extends() {
            return _extends = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            _extends.apply(this, arguments)
        }
        function resetOptionsCache(e) {
            return e.cache ? _extends({}, e, {
                cache: -1
            }) : e
        }
        function emailNotConfirmed(e, t) {
            (0,
            _web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({
                width: 520,
                title: t[0],
                onDestroy: e.onFail
            }, t[1])
        }
        function showCaptcha(e, t, n) {
            2 === (0,
            _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[1]) ? e._captcha = (0,
            _web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showReCaptchaBox)(t[0], t[2], e._captcha, {
                onSubmit: function(t) {
                    var r = _extends({}, n, {
                        recaptcha: t,
                        captcha_sid: null,
                        captcha_key: null
                    });
                    e.resend(r, resetOptionsCache(e))
                },
                onDestroy: function() {
                    e.onFail && e.onFail()
                }
            }) : e._captcha = (0,
            _web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showCaptchaBox)(t[0], (0,
            _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[1]), e._captcha, {
                onSubmit: function(t, r) {
                    var i = _extends({}, n, {
                        captcha_sid: t,
                        captcha_key: r
                    });
                    e.resend(i, resetOptionsCache(e))
                },
                onDestroy: function() {
                    e.onFail && e.onFail()
                }
            }),
            e._suggest = (0,
            _web_lib_dom__WEBPACK_IMPORTED_MODULE_7__.geByClass1)("phone_validation_link", e._captcha.bodyNode),
            e._suggest && (0,
            _web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(e._suggest, "click", (function() {
                e._box = (0,
                _modal_box__WEBPACK_IMPORTED_MODULE_12__.validateMobileBox)({
                    onDone: e._captcha.submit
                })
            }
            ))
        }
        var mobileValidationRequired = e=>(t,n,r)=>{
            t._box = (0,
            _modal_box__WEBPACK_IMPORTED_MODULE_12__.validateMobileBox)({
                acceptCaptcha: 11 === e,
                onDone: function(e, n) {
                    vk.nophone = 0,
                    e && (t._captcha = (0,
                    _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_10__.curBox)());
                    var i = e ? _extends({}, r, {
                        captcha_sid: e,
                        captcha_key: n
                    }) : r;
                    t.resend(i, resetOptionsCache(t))
                },
                onFail: t.onFail,
                hash: n[0],
                ahash: n[1]
            })
        }
        ;
        function passwordValidationRequired(e, t, n) {
            e._box = (0,
            _modal_box__WEBPACK_IMPORTED_MODULE_12__.validatePassBox)({
                onDone: ()=>e.resend(n, resetOptionsCache(e)),
                onFail: e.onFail,
                hash: t[0]
            })
        }
        function authFailed(e, t, n) {
            window.onReLoginDone = ()=>e.resend(n, resetOptionsCache(e)),
            window.onReLoginFailed = function(e, t) {
                (0,
                _web_auth_auth__WEBPACK_IMPORTED_MODULE_13__.logout)(),
                t ? nav.go(t, null, {
                    hard: !0
                }) : -1 === e ? location.href = location.href.replace(/^http:/, "https:") : e ? nav.go("/") : window.onReLoginDone()
            }
            ,
            window.utilsNode.appendChild((0,
            _web_lib_dom__WEBPACK_IMPORTED_MODULE_7__.ce)("iframe", {
                src: (0,
                _web_lib_environment__WEBPACK_IMPORTED_MODULE_14__.getLoginDomain)() + "?" + (0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
                    role: "al_frame",
                    _origin: window.locProtocol + "//" + window.locHost,
                    ip_h: t[0] || window.vk.ip_h,
                    to: t[1] || ""
                })
            }))
        }
        function makeRedirect(e, t) {
            (0,
            _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[1]) ? nav.go(t[0], !1, {
                nocur: "2" === t[1],
                noback: !0 === t[1],
                showProgress: e.showProgress,
                hideProgress: e.hideProgress
            }) : (hab.stop(),
            location.href = t[0])
        }
        function reload(e, t, n, r) {
            nav.reload({
                force: (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t[0]),
                from: 1,
                url: r,
                query: n && (0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(n)
            })
        }
        function mobileActivationRequired(e, t, n) {
            e._box = (0,
            _modal_box__WEBPACK_IMPORTED_MODULE_12__.activateMobileBox)({
                onDone: e.resend(n, resetOptionsCache(e)),
                onFail: e.onFail,
                hash: t[0]
            })
        }
        function showMessage(e, t) {
            e.onFail && e.onFail(),
            (0,
            _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_9__.topMsg)(t[0], 10)
        }
        function showError(e, t, n, r) {
            e.onFail && e.onFail(t[0]) || (0,
            _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_9__.topError)(t[0] + (t[2] ? " #" + t[2] : ""), {
                dt: t[1] ? 0 : 10,
                type: 4,
                url: r,
                query: n && (0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(n)
            })
        }
        function votesPayment(e, t, n) {
            var r;
            if (!e.fromBox && !e.forceDone || (e.onDone && e.onDone.apply(window, t),
            !e.fromBox)) {
                e._box = (0,
                _web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({
                    title: (0,
                    _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(t[0])
                }, t[1]),
                (null === (r = t[3]) || void 0 === r ? void 0 : r.countries) && !cur.votesBoxOptions && (cur.votesBoxOptions = t[3]),
                cur.votesBoxOptions && (_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_11__.Gifts.processBoxOptions(e._box, cur.votesBoxOptions),
                cur.votesBoxOptions = null);
                var i = (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)((0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.clone)(e), {
                    showProgress: e._box.showProgress,
                    hideProgress: e._box.hideProgress
                });
                e.cache && (i.cache = -1),
                e._box = (0,
                _modal_box__WEBPACK_IMPORTED_MODULE_12__.requestBox)(e._box, (function(t) {
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_7__.isVisible)(e._box.progress) || (t || (t = {
                        _votes_ok: 1
                    }),
                    e.resend((0,
                    _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(n, t), i))
                }
                ), e.onFail),
                e._box.evalBox(t[2])
            }
        }
        function otpBox(e, t, n) {
            e._box = (0,
            _modal_box__WEBPACK_IMPORTED_MODULE_12__.validateOtpBox)({
                onDone: ()=>e.resend(n, resetOptionsCache(e)),
                onFail: e.onFail,
                hash: t[0]
            })
        }
        function zeroZone(e, t, n) {
            e._box = (0,
            _web_lib_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)({
                title: t[0] || (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang)("global_charged_zone_title"),
                onHide: e.onFail
            }, t[1], (0,
            _web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang)("global_charged_zone_continue"), (function() {
                e.resend(_extends({}, n, {
                    charged_confirm: t[3]
                }), e)
            }
            ), (0,
            _web_lib_lang__WEBPACK_IMPORTED_MODULE_3__.getLang)("global_cancel"))
        }
        function evalCode(options, answer) {
            var evalString = `(function(){${answer[0]};})()`;
            if (__debugMode)
                eval(evalString);
            else
                try {
                    eval(evalString)
                } catch (e) {
                    (0,
                    _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e, evalString)
                }
        }
        var defaultHandler = e=>(t,n)=>{
            if (-1 === e || -2 === e || -3 === e) {
                var r, i = n.pop(), o = n.pop(), a = n.pop();
                -3 === e && (r = n.pop()),
                window.__adsSet && __adsSet(a, null, o, i, null, r)
            }
            t.onDone && t.onDone.apply(window, n)
        }
    }
    ,
    236783: (e,t,n)=>{
        "use strict";
        n.d(t, {
            plainpost: ()=>u,
            request: ()=>d,
            AjaxCancellationToken: ()=>l
        });
        n(530522),
        n(66108),
        n(579665),
        n(95767),
        n(991181),
        n(940851),
        n(296253),
        n(751876);
        var r = n(668040)
          , i = n(256512)
          , o = n(695724)
          , a = n(19331)
          , s = n(638736);
        function c(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return _(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return _(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function _(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        class l {
            _setCancelCb(e) {
                this._cancel = e
            }
            cancel() {
                this._cancel && this._cancel()
            }
        }
        function u(e, t, n, i, o, s, _) {
            var l = arguments.length > 7 && void 0 !== arguments[7] && arguments[7]
              , u = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : null;
            if (t.act && (0,
            a.partConfigEnabled)("force_act_in_get_params")) {
                var p = {}
                  , h = e
                  , m = "";
                if (e.includes("?")) {
                    var f = e.split("?")
                      , g = c(f, 2);
                    h = g[0],
                    m = g[1],
                    p = (0,
                    r.fromQueryString)(m)
                }
                p.act = t.act,
                e = `${h}?${(0,
                r.toQueryString)(p, !0)}`
            }
            var v = d(e, t, {
                xhrOptions: s,
                sortQueryStringParams: _ && !_.noSort,
                headers: _ && _.headers,
                noExtraHeaders: l,
                urlOnly: o,
                cancellationToken: _ && _.cancellationToken,
                logger: u
            })
              , E = v._getXhr();
            return v.then((e=>n && n(e.data, E.status))).catch((e=>i && i(e, E.status))),
            E
        }
        function d(e, t, n) {
            var a, c = n.xhrOptions, _ = n.headers, l = void 0 === _ ? null : _, u = n.urlOnly, d = void 0 !== u && u, p = n.sortQueryStringParams, h = void 0 === p || p, m = n.noExtraHeaders, f = void 0 !== m && m, g = n.cancellationToken, v = void 0 === g ? null : g, E = n.logger, y = void 0 === E ? null : E;
            y && (a = (0,
            i.crc32)(e + JSON.stringify(t)),
            y(`Initialized request #${a} with URL ${e} and query ${JSON.stringify(t)}`));
            var w = new XMLHttpRequest;
            v && v._setCancelCb((()=>{
                y && y(`Aborting request #${a}`),
                w.abort()
            }
            ));
            var b = new Promise((function(n, i) {
                var _ = "string" != typeof t ? (0,
                r.toQueryString)(t, !h) : t;
                w.onreadystatechange = function() {
                    if ((0,
                    s.processWaf)(w))
                        w.abort();
                    else if (w.readyState === XMLHttpRequest.DONE)
                        if (y && y(`Request readyState -> DONE with status ${w.status} #${a}`),
                        w.status >= 200 && w.status < 300)
                            try {
                                n({
                                    data: w.responseText,
                                    code: w.status
                                }),
                                y && y(`Success handler finished for request #${a}`)
                            } catch (e) {
                                y && y(`Success handler failed for request #${a}`),
                                i({
                                    data: w.responseText,
                                    code: -1
                                }),
                                y && y(`Failure handler finished for request #${a} [1]`)
                            }
                        else
                            i({
                                data: w.responseText,
                                url: e,
                                act: t.act,
                                code: w.status
                            }),
                            y && y(`Failure handler finished for request #${a} [2]`)
                }
                ;
                try {
                    y && y(`Starting request #${a}`),
                    w.open("POST", e, !0)
                } catch (e) {
                    y && y(`Request #${a} failed`),
                    i({
                        data: e,
                        code: -1
                    }),
                    y && y(`Failure handler finished for request #${a} [3]`)
                }
                l && Object.keys(l).forEach((e=>{
                    w.setRequestHeader(e, l[e])
                }
                )),
                c && (0,
                o.each)(c, (function(e, t) {
                    w[e] = t
                }
                )),
                d || (w.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"),
                f || w.setRequestHeader("X-Requested-With", "XMLHttpRequest")),
                y && y(`Sending data for request #${a}`),
                w.send(_)
            }
            ));
            return b._getXhr = ()=>w,
            b
        }
    }
    ,
    486125: (e,t,n)=>{
        "use strict";
        n.d(t, {
            curBox: ()=>_,
            initBoxQueue: ()=>l,
            getBoxQueue: ()=>u,
            boxRefreshCoords: ()=>d,
            showDoneBox: ()=>p,
            showDoneBoxFull: ()=>h,
            getAndCleanBoxQueueData: ()=>f,
            restoreBoxQueue: ()=>g
        });
        n(175115);
        var r = n(49535)
          , i = n(695724)
          , o = n(315544)
          , a = n(726271);
        function s() {
            return s = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            s.apply(this, arguments)
        }
        var c = {
            hideAll: function(e, t) {
                if (e)
                    for (; c.count(); )
                        c.hideLast();
                else {
                    if (c.count()) {
                        var n = _message_boxes[c._boxes.pop()];
                        n && (n._in_queue = !1,
                        n._hide(!1, !1, t))
                    }
                    for (; c.count(); ) {
                        _message_boxes[c._boxes.pop()]._in_queue = !1
                    }
                }
            },
            hideLast: function(e, t) {
                if (c.count()) {
                    var n = window._message_boxes[c._boxes[c.count() - 1]];
                    if (!0 === e && (n.changed || n.preventHideLastWithCheck || c.skip || t && t.target && t.target.tagName && "input" !== t.target.tagName.toLowerCase() && cur.__mdEvent && t.target !== cur.__mdEvent.target))
                        return void (c.skip = !1);
                    n.hide()
                }
                if (t && "click" === t.type)
                    return (0,
                    r.cancelEvent)(t)
            },
            hideBGClick: function(e) {
                e && e.target && /^box_layer/.test(e.target.id) && c.hideLast()
            },
            count: function() {
                return c._boxes.length
            },
            _show: function(e) {
                var t = _message_boxes[e];
                if (t && !t._in_queue) {
                    c.count() ? _message_boxes[c._boxes[c.count() - 1]]._hide(!0, !0) : window.tooltips && tooltips.hideAll(),
                    t._in_queue = !0;
                    var n = !!c.count();
                    n && (n = c._boxes.every((e=>!!_message_boxes[e] && !_message_boxes[e].forceHide))),
                    c.curBox = e,
                    t._show(n || c.currHiding, n),
                    c._boxes.push(e)
                }
            },
            _hide: function(e) {
                var t = _message_boxes[e];
                if (t && t._in_queue && c._boxes[c.count() - 1] === e && t.isVisible() && (t._in_queue = !1,
                c._boxes.pop(),
                t._hide(!!c.count()),
                c.count())) {
                    var n = c._boxes[c.count() - 1];
                    c.curBox = n,
                    _message_boxes[n]._show(!0, !0, !0)
                }
            },
            _boxes: [],
            curBox: 0
        };
        function _() {
            var e = window._message_boxes[window.boxQueue.curBox];
            return e && e.isVisible() ? e : null
        }
        function l() {
            window.boxQueue = c,
            window.__bq = c,
            window.curBox = _,
            window.boxQueue.hideLastCheck = window.boxQueue.hideLast.pbind(!0),
            window._message_box_guid = 0,
            window._message_boxes = []
        }
        function u() {
            return window.boxQueue
        }
        function d(e) {
            var t = window.innerHeight || document.documentElement.clientHeight || boxLayerBG.offsetHeight
              , n = a.browser.mobile ? (0,
            i.intval)(window.pageYOffset) : 0
              , r = (0,
            o.getSize)(e);
            e.style.marginTop = Math.max(10, n + (t - r[1]) / 3) + "px"
        }
        function p(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            window.Notifier ? m(e, t, n) : window.stManager.add(["notifier.js", "notifier.css"], (()=>{
                m(e, t, n)
            }
            ))
        }
        function h(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}
              , r = s({}, n, {
                type: "done_box_full"
            });
            p(e, t, r)
        }
        function m(e, t, n) {
            window.curNotifier && window.curNotifier.version || window.Notifier.init({
                version: -1,
                instance_id: -1
            });
            var r = void 0 !== t.onHide ? t.onHide : t.callback
              , i = void 0 !== t.timeout ? t.timeout : void 0 !== t.out ? t.out : null
              , o = null !== t.id && void 0 !== t.id ? t.id : ++window.curNotifier.showDoneBoxLastId
              , a = s({
                version: window.curNotifier.version,
                type: "done_box",
                text: e,
                onclick: t.onClick,
                top_count: -1,
                id: o,
                timeout: i,
                onHide: r,
                preventHideByClick: !0,
                link: t.link
            }, n);
            t.tooltipHandler && (a.tooltipHandler = t.tooltipHandler),
            Notifier.pushEvent(a)
        }
        function f() {
            var e = {
                boxes: window._message_boxes,
                boxQueueIds: window.boxQueue._boxes,
                curBoxId: window.boxQueue.curBox
            };
            return window.boxQueue._boxes = [],
            window._message_boxes = [],
            window.boxQueue.curBox = 0,
            e
        }
        function g(e) {
            window._message_boxes = e.boxes,
            window.boxQueue._boxes = e.boxQueueIds,
            window.boxQueue.curBox = e.curBoxId
        }
    }
    ,
    475632: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getCancelStack: ()=>i,
            cancelStackFilter: ()=>o,
            cancelStackPush: ()=>a,
            cancelStackPop: ()=>s
        });
        var r = n(689433);
        function i() {
            return window.cancelStack || []
        }
        function o(e, t) {
            var n = i();
            return t && (0,
            r.topHeaderClearClose)(),
            window.cancelStack = n.filter((t=>t.name !== e)),
            window.cancelStack
        }
        function a(e, t, n) {
            return n && (0,
            r.topHeaderClose)((function() {
                t(),
                o(e)
            }
            )),
            window.cancelStack = o(e).concat([{
                func: t,
                name: e,
                dclick: n
            }]),
            window.cancelStack
        }
        function s(e) {
            var t = i();
            (0,
            r.topHeaderClearClose)(),
            t.length > 0 && t.pop().func(e);
            var n = t[t.length - 1];
            return n && n.dclick && (0,
            r.topHeaderClose)((function() {
                n.func(e),
                o(n.name)
            }
            )),
            window.cancelStack = t,
            window.cancelStack
        }
    }
    ,
    601984: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getFiles: ()=>l,
            clipboardProcessPaste: ()=>p,
            copyToClipboard: ()=>s._copyWithFakeElement
        });
        n(530522),
        n(66108),
        n(991181),
        n(579665),
        n(95767),
        n(940851),
        n(296253);
        var r = n(138974)
          , i = n(695724)
          , o = n(49535)
          , a = n(315544)
          , s = n(153271);
        function c(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return _(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return _(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function _(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function l(e) {
            var t = function(e) {
                return e && e.clipboardData ? e.clipboardData : e && e.originalEvent && e.originalEvent.clipboardData ? e.originalEvent.clipboardData : window.clipboardData
            }(e);
            if (!t)
                return [];
            var n = t.items;
            if (!n)
                return [];
            for (var r = [], i = 0; i < n.length; i++)
                0 == n[i].type.indexOf("image") && r.push(n[i].getAsFile());
            return r
        }
        var u = !1
          , d = null;
        function p(e) {
            return new Promise(((t,n)=>{
                if (u)
                    return (0,
                    o.cancelEvent)(e),
                    n();
                var s = c((0,
                r.rangeGet)(), 5)
                  , _ = s[0]
                  , l = s[1]
                  , p = s[2]
                  , h = s[3]
                  , m = s[4];
                if (_) {
                    if ("paste" === e.type) {
                        var f = e.clipboardData || e.originalEvent && e.originalEvent.clipboardData;
                        if (f && f.types && f.getData) {
                            (0,
                            o.cancelEvent)(e),
                            u = !0;
                            var g = f.getData("text/html") || (0,
                            i.clean)(f.getData("text/plain")) || "";
                            return t([g, e=>{
                                (0,
                                r.rangeInsert)(_, e),
                                u = !1
                            }
                            ])
                        }
                        for (var v = (0,
                        a.cf)(), E = e.target || window.event.srcElement; E.firstChild; )
                            v.appendChild(E.firstChild);
                        return new Promise((e=>setTimeout((()=>{
                            var t = E.innerHTML || "";
                            E.innerHTML = "",
                            E.appendChild(v),
                            e([t, e=>{
                                _ = (0,
                                r.rangeCreate)(l, p, h, m),
                                (0,
                                r.rangeInsert)(_, e),
                                u = !1
                            }
                            ])
                        }
                        ), 0)))
                    }
                    if ("beforepaste" === e.type)
                        return u = !0,
                        function() {
                            if (!d) {
                                var e = (0,
                                a.ge)("utils");
                                d = (0,
                                a.ce)("div", {}, {
                                    width: "10px",
                                    height: "10px",
                                    overflow: "hidden"
                                }),
                                (0,
                                a.attr)(d, "contenteditable", "true"),
                                e.appendChild(d)
                            }
                        }(),
                        d.focus(),
                        void (d.onpaste = ()=>{
                            setTimeout((()=>{
                                var e = d.innerHTML || "";
                                d.innerHTML = "",
                                delete d.onpaste,
                                t([e, e=>{
                                    _ = (0,
                                    r.rangeCreate)(l, p, h, m),
                                    (0,
                                    r.rangeInsert)(_, e),
                                    u = !1
                                }
                                ])
                            }
                            ), 0)
                        }
                        )
                }
                return n()
            }
            ))
        }
    }
    ,
    289988: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isToday: ()=>o,
            isYesterday: ()=>a,
            isTomorrow: ()=>s,
            isSameDate: ()=>c,
            leadingZero: ()=>_,
            formatTime: ()=>l,
            getServerTime: ()=>u,
            getBeginningOfDay: ()=>d,
            isLeapYear: ()=>p,
            getLastDay: ()=>h,
            getFormattedDiffTimeText: ()=>m,
            getUnixTimestampFromDate: ()=>f
        });
        var r = n(786067)
          , i = n(695724);
        function o(e) {
            var t = new Date;
            return e.getFullYear() === t.getFullYear() && e.getMonth() === t.getMonth() && e.getDate() === t.getDate()
        }
        function a(e) {
            return o(new Date(e.getTime() + 864e5))
        }
        function s(e) {
            return o(new Date(e.getTime() - 864e5))
        }
        function c(e, t) {
            var n = new Date(e)
              , r = new Date(t);
            return n.getFullYear() === r.getFullYear() && n.getMonth() === r.getMonth() && n.getDate() === r.getDate()
        }
        function _(e) {
            return e >= 10 ? e : "0" + e
        }
        function l(e, t) {
            var n;
            e = Math.max(e, 0);
            var r = Math.floor(e % 60);
            n = r < 10 ? "0" + r : r;
            var i = (e = Math.floor(e / 60)) % 60;
            return n = i + ":" + n,
            ((e = Math.floor(e / 60)) > 0 || t) && (i < 10 && (n = "0" + n),
            n = e + ":" + n),
            n
        }
        function u() {
            return vk.ts + Math.floor(((new Date).getTime() - vk.started) / 1e3)
        }
        function d(e) {
            var t = e.getFullYear()
              , n = e.getMonth()
              , r = e.getDate();
            return new Date(t,n,r,0,0,0,0)
        }
        function p(e) {
            return (e = parseInt(e)) % 4 == 0 && e % 100 != 0 || e % 400 == 0
        }
        function h(e, t) {
            return 2 == +t ? p(e) ? 29 : 28 : t > 0 && (t < 8 && t % 2 == 0 || t > 7 && t % 2 == 1) ? 30 : 31
        }
        function m(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";
            return e < 5 ? (0,
            r.getLang)("global_just_now") : e < 60 ? (0,
            r.langWordNumeric)(e, (0,
            r.getLang)("global_word_secs_ago", "raw"), (0,
            r.getLang)("global_secs_ago", "raw")) : e < 3600 ? (0,
            r.langWordNumeric)((0,
            i.intval)(e / 60), (0,
            r.getLang)("global_word_mins_ago", "raw"), (0,
            r.getLang)("global_mins_ago", "raw")) : e < 14400 ? (0,
            r.langWordNumeric)((0,
            i.intval)(e / 3600), (0,
            r.getLang)("global_word_hours_ago", "raw"), (0,
            r.getLang)("global_hours_ago", "raw")) : t
        }
        function f(e) {
            return Math.floor(e.getTime() / 1e3)
        }
    }
    ,
    787481: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initDebugTools: ()=>s,
            logEvalError: ()=>c,
            debugLog: ()=>_
        });
        n(66108),
        n(296253),
        n(59357);
        var r = n(726271)
          , i = n(19331)
          , o = n(66433);
        function a() {
            if ((0,
            i.partConfigEnabled)("log_fetch_requests")) {
                var e = (e,t)=>{
                    try {
                        if (~e.indexOf("/al_audio") || ~e.indexOf("/like.php"))
                            throw new Error(t)
                    } catch (e) {
                        (0,
                        o.debugBufferLog)(e)
                    }
                }
                ;
                !function(e) {
                    var t = window.XMLHttpRequest;
                    window.XMLHttpRequest = function() {
                        var n, r, o = new t, a = o.open, s = o.send;
                        return o.open = function() {
                            var e = Array.prototype.slice.call(arguments);
                            return r = e[0],
                            n = e[1],
                            a.apply(o, arguments)
                        }
                        ,
                        o.send = function() {
                            var t = arguments[0];
                            return ("POST" === (r = (r || "").toUpperCase()) || "GET" === r && (0,
                            i.partConfigEnabled)("log_fetch_requests_get")) && e(n, [r, n, t].join(":")),
                            s.apply(o, arguments)
                        }
                        ,
                        o
                    }
                    ,
                    ["DONE", "HEADERS_RECEIVED", "LOADING", "OPENED", "UNSENT"].forEach((e=>{
                        Object.defineProperty(window.XMLHttpRequest, e, {
                            enumerable: !1,
                            configurable: !1,
                            writable: !1,
                            value: t[e]
                        })
                    }
                    ))
                }(e),
                window.fetch && function(e) {
                    var t = window.fetch;
                    window.fetch = function() {
                        for (var n = new Array(arguments.length), r = 0; r < n.length; ++r)
                            n[r] = arguments[r];
                        var i, o = n[0], a = "GET";
                        "string" == typeof o ? i = o : "Request"in window && o instanceof window.Request ? (i = o.url,
                        o.method && (a = o.method)) : i = "" + o,
                        n[1] && n[1].method && (a = n[1].method);
                        var s = {
                            method: a,
                            url: i,
                            status_code: null
                        };
                        return e(i, i),
                        t.apply(this, n).then((function(e) {
                            return s.status_code = e.status,
                            e
                        }
                        )).catch((function(e) {
                            throw e
                        }
                        ))
                    }
                }(e)
            }
        }
        function s() {
            window._logTimer = (new Date).getTime(),
            a()
        }
        function c(e, t) {
            if (window.Raven) {
                if (t && t.length > 2e3) {
                    var n = t.indexOf("; window.TimeSpent && TimeSpent.setTimers && TimeSpent.setTimers(");
                    ~n && (t = t.slice(0, n)),
                    t = `${t.slice(0, 1e3)}...${t.slice(-1e3)}`
                }
                e.message += `: ${t}`,
                (0,
                o.logError)(e)
            }
        }
        function _(e) {
            try {
                window.debuglogClient && window.debuglogClient(e);
                var t = "[" + ((new Date).getTime() - window._logTimer) / 1e3 + "] ";
                if (window.console && console.log) {
                    var n = Array.prototype.slice.call(arguments);
                    n.unshift(t),
                    r.browser.msie || r.browser.mobile ? console.log(n.join(" ")) : console.log.apply(console, n)
                }
            } catch (e) {}
        }
    }
    ,
    315544: (e,t,n)=>{
        "use strict";
        n.d(t, {
            geById: ()=>s,
            $: ()=>c,
            $$: ()=>_,
            setInnerText: ()=>l,
            emptyNode: ()=>u,
            ge: ()=>d,
            geByTag: ()=>p,
            geByTag1: ()=>h,
            geByClass: ()=>m,
            geByClass1: ()=>f,
            gpeByClass: ()=>g,
            domQuery: ()=>v,
            domQuery1: ()=>E,
            domClosest: ()=>y,
            domClosestByTag: ()=>w,
            gpeByTag: ()=>b,
            ce: ()=>C,
            cf: ()=>P,
            re: ()=>O,
            domEL: ()=>I,
            domNS: ()=>M,
            domPS: ()=>R,
            domFC: ()=>L,
            domLC: ()=>k,
            domPN: ()=>B,
            se: ()=>x,
            sech: ()=>N,
            rs: ()=>U,
            domReplaceEl: ()=>W,
            domChildren: ()=>F,
            domInsertBefore: ()=>K,
            domInsertAfter: ()=>V,
            domByClass: ()=>H,
            domData: ()=>j,
            domChildIndex: ()=>G,
            domCA: ()=>q,
            domClosestSibling: ()=>$,
            matchesSelector: ()=>Y,
            isHover: ()=>z,
            isAncestor: ()=>X,
            getScroll: ()=>Q,
            domClosestPositioned: ()=>J,
            domClosestOverflowHidden: ()=>Z,
            show: ()=>ee,
            hide: ()=>te,
            isVisible: ()=>ne,
            clientHeight: ()=>re,
            getClientRectOffsetY: ()=>ie,
            toggle: ()=>oe,
            boundingRectEnabled: ()=>ae,
            getXYRect: ()=>se,
            getXY: ()=>ce,
            isWindow: ()=>_e,
            getSize: ()=>le,
            getW: ()=>ue,
            getH: ()=>de,
            hasClass: ()=>pe,
            addClass: ()=>he,
            addClassDelayed: ()=>me,
            removeClass: ()=>fe,
            removeClassDelayed: ()=>ge,
            toggleClass: ()=>ve,
            toggleClassDelayed: ()=>Ee,
            replaceClass: ()=>ye,
            getStyle: ()=>we,
            setStyle: ()=>be,
            data: ()=>Ce,
            attr: ()=>Te,
            removeAttr: ()=>De,
            removeData: ()=>Ae,
            cleanElems: ()=>Se,
            setTitle: ()=>Pe,
            getZoom: ()=>Oe,
            val: ()=>Ie,
            elfocus: ()=>Me,
            traverseParent: ()=>Re,
            setDocumentTitle: ()=>ke,
            lockDocumentTitle: ()=>Be,
            initDomScripts: ()=>xe,
            createElement: ()=>Ne
        });
        n(751876),
        n(21466),
        n(66108),
        n(296253),
        n(283946),
        n(59357);
        var r = n(695724)
          , i = n(49535)
          , o = n(726271)
          , a = n(787481);
        function s(e) {
            return document.getElementById(e)
        }
        function c(e, t) {
            return (t || document).querySelector(e)
        }
        function _(e, t) {
            return (t || document).querySelectorAll(e)
        }
        function l(e, t) {
            e && (e.innerText = t)
        }
        function u(e) {
            if (e)
                for (; e.firstChild; )
                    e.removeChild(e.firstChild)
        }
        var d = e=>"string" == typeof e || "number" == typeof e ? document.getElementById(e) : e;
        function p(e, t) {
            return (t = d(t) || document).getElementsByTagName(e)
        }
        function h(e, t) {
            return (t = d(t) || document).querySelector && t.querySelector(e) || p(e, t)[0]
        }
        function m(e, t, n) {
            return t = d(t) || document,
            n = n || "*",
            e = ("." + e).replace(/\s+/gm, "."),
            Array.prototype.slice.call(t.querySelectorAll(n + e))
        }
        function f(e, t, n) {
            return n = n || "*",
            (t = d(t) || document).querySelector && t.querySelector(n + ("." + e).replace(/\s+/gm, ".")) || m(e, t, n)[0]
        }
        function g(e, t, n) {
            if (!(t = d(t)))
                return null;
            for (; n !== t && (t = t.parentNode); )
                if (pe(t, e))
                    return t;
            return null
        }
        function v(e, t) {
            return (t || document).querySelectorAll(e)
        }
        function E(e, t) {
            return (t || document).querySelector(e)
        }
        function y(e, t) {
            return pe(t, e) ? t : g(e, t)
        }
        function w(e, t) {
            return e = e.toUpperCase(),
            t.nodeType === Node.ELEMENT_NODE && t.tagName.toUpperCase() === e ? t : b(e, t)
        }
        function b(e, t) {
            if (!(t = d(t)))
                return null;
            for (e = e.toUpperCase(); t = t.parentNode; )
                if (t.tagName && t.tagName.toUpperCase() === e)
                    return t;
            return null
        }
        function C(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null
              , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null
              , i = document.createElement(e);
            return t && (0,
            r.extend)(i, t),
            n && be(i, n),
            i
        }
        var T, D, A, S, P = (T = document,
        D = T.createDocumentFragment(),
        A = T.createElement("div"),
        S = T.createRange && T.createRange(),
        D.appendChild(A),
        S && S.selectNodeContents(A),
        S && S.createContextualFragment ? e=>e ? S.createContextualFragment(e) : T.createDocumentFragment() : e=>{
            if (!e)
                return T.createDocumentFragment();
            A.innerHTML = e;
            for (var t = T.createDocumentFragment(); A.firstChild; )
                t.appendChild(A.firstChild);
            return t
        }
        );
        function O(e) {
            return (e = d(e)) && e.parentNode && e.parentNode.removeChild(e),
            e
        }
        function I(e, t) {
            for (t = t ? "previousSibling" : "nextSibling"; e && !e.tagName; )
                e = e[t];
            return e
        }
        var M = e=>I((e || {}).nextSibling)
          , R = e=>I((e || {}).previousSibling, 1)
          , L = e=>I((e || {}).firstChild)
          , k = e=>I((e || {}).lastChild, 1)
          , B = e=>(e || {}).parentNode
          , x = e=>L(C("div", {
            innerHTML: e
        }))
          , N = e=>F(C("div", {
            innerHTML: e
        }));
        function U(e, t) {
            return (0,
            r.each)(t, (function(t, n) {
                e = e.replace(new RegExp("%" + t + "%","g"), (void 0 === n ? "" : n).toString().replace(/\$/g, "&#036;"))
            }
            )),
            e
        }
        function W(e, t) {
            return (0,
            r.isString)(t) && (t = x(t)),
            B(e).replaceChild(t, e),
            t
        }
        function F(e) {
            for (var t = [], n = e.childNodes, r = 0; r < n.length; r++)
                n[r].tagName && t.push(n[r]);
            return t
        }
        function K(e, t) {
            var n = B(t);
            return n && n.insertBefore(e, t)
        }
        function V(e, t) {
            var n = B(t);
            return n && n.insertBefore(e, M(t))
        }
        function H(e, t) {
            return e ? f(t, e) : e
        }
        function j(e, t, n) {
            return e ? void 0 !== n ? (null === n ? e.removeAttribute("data-" + t) : e.setAttribute("data-" + t, n),
            n) : e.getAttribute("data-" + t) : null
        }
        function G(e) {
            for (var t = 0; null != (e = R(e)); )
                t++;
            return t
        }
        function q(e, t) {
            do {
                e = B(e)
            } while (e && !Y(e, t));
            return e
        }
        function $(e, t, n) {
            for (var r = null; null === r && e; )
                (e = -1 === n ? R(e) : M(e)) && Y(e, t) && (r = e);
            return r
        }
        function Y(e, t) {
            if (!(e = d(e)) || e === document)
                return !1;
            var n = e.matches || e.matchesSelector || e.mozMatchesSelector || e.msMatchesSelector || e.oMatchesSelector || e.webkitMatchesSelector || function(e) {
                for (var t = (this.document || this.ownerDocument).querySelectorAll(e), n = t.length; --n >= 0 && t.item(n) !== this; )
                    ;
                return n > -1
            }
            ;
            return n.call(e, t)
        }
        function z(e) {
            return Y(e, ":hover")
        }
        function X(e, t) {
            var n = d(e);
            if (t = d(t),
            !e || !t)
                return !1;
            for (; n = n.parentNode; )
                if (n === t)
                    return !0;
            return !1
        }
        function Q() {
            var e = o.browser.msie6 ? d("PageContainer") : document.body
              , t = document.documentElement;
            return [e.scrollLeft || t.scrollLeft || window.pageXOffset || 0, e.scrollTop || t.scrollTop || window.pageYOffset || 0, t.clientWidth || e.clientWidth || 0, t.clientHeight || e.clientHeight || 0]
        }
        function J(e, t) {
            for (var n = (t = t || {}).fromEl || B(e), i = t.positions || ["relative", "absolute", "fixed"]; n && n !== bodyNode; ) {
                var o = we(n, "position");
                if ((0,
                r.inArray)(o, i) && (!t.noOverflow || "hidden" !== we(n, "overflow")))
                    break;
                n = B(n)
            }
            return n
        }
        function Z(e, t) {
            for (var n, r, i, a = e = d(e), s = !1; a && a.tagName && a !== bodyNode; ) {
                if (n = we(a, "position"),
                r = we(a, "overflow"),
                i = we(a, "transform"),
                t && o.browser.mozilla) {
                    if ("page_wrap" != a.id && a !== e && "visible" !== r && ("static" === n ? !s || "relative" === s : "fixed" !== s))
                        break
                } else if (a !== e && "visible" !== r && ("static" === n ? !s || "relative" === s : "fixed" !== s))
                    break;
                "none" !== i ? s = void 0 : "static" !== n && "fixed" !== s && (s = n),
                a = B(a)
            }
            return a
        }
        function ee(e) {
            var t = arguments.length;
            if (t > 1)
                for (var n = 0; n < t; n++)
                    ee(arguments[n]);
            else if ((e = d(e)) && e.style) {
                var r = e.olddisplay
                  , i = e.tagName.toLowerCase()
                  , a = "block";
                e.style.display = r || "",
                "none" === we(e, "display") && (a = pe(e, "inline") || pe(e, "_inline") ? "inline" : pe(e, "_inline_block") ? "inline-block" : pe(e, "_flex") ? "flex" : "tr" !== i || o.browser.msie ? "table" !== i || o.browser.msie ? "block" : "table" : "table-row",
                e.style.display = e.olddisplay = a)
            }
        }
        function te(e) {
            var t = arguments.length;
            if (t > 1)
                for (var n = 0; n < t; n++)
                    te(arguments[n]);
            else if ((e = d(e)) && e.style) {
                var r = we(e, "display");
                e.olddisplay = "none" !== r ? r : "",
                e.style.display = "none"
            }
        }
        function ne(e) {
            return !(!(e = d(e)) || !e.style) && "none" !== we(e, "display")
        }
        function re() {
            return window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
        }
        function ie(e, t, n) {
            n = n || 0;
            var i = ce(e = d(e))[1]
              , o = le(e)[1]
              , a = window
              , s = document.documentElement
              , c = Math.max((0,
            r.intval)(a.innerHeight), (0,
            r.intval)(s.clientHeight))
              , _ = d("page_header_cont")
              , l = s.scrollTop || bodyNode.scrollTop || window.scrollY || 0
              , u = vk.staticheader ? Math.max(0, le(_)[1] - l) : le(_)[1];
            if (t) {
                if (i + o < l + u + n)
                    return i + o - l - u - n;
                if (i > l + c - n)
                    return i - l - c + n
            } else {
                if (i < l + u + n)
                    return i - l - u - n;
                if (i + o > l + c - n)
                    return i + o - l - c + n
            }
            return 0
        }
        function oe(e, t) {
            return void 0 === t && (t = !ne(e)),
            t ? ee(e) : te(e),
            t
        }
        function ae(e) {
            return void 0 !== e.getBoundingClientRect
        }
        function se(e, t) {
            var n;
            if (t && "inline" === we(e, "display")) {
                var r = e.getClientRects();
                n = r && r[0] || e.getBoundingClientRect()
            } else
                n = e.getBoundingClientRect();
            return n
        }
        function ce(e, t) {
            if (!(e = d(e)))
                return [0, 0];
            var n = e.ownerDocument
              , r = {
                top: 0,
                left: 0
            };
            if (!n)
                return [0, 0];
            var i = n.documentElement;
            ae(e) && (r = se(e, !0));
            var o = n === n.window ? n : 9 === n.nodeType && (n.defaultView || n.parentWindow);
            return [r.left + (t ? 0 : o.pageXOffset || i.scrollLeft) - (i.clientLeft || 0), r.top + (t ? 0 : o.pageYOffset || i.scrollTop) - (i.clientTop || 0)]
        }
        function _e(e) {
            return null != e && e === e.window
        }
        function le(e, t, n) {
            e = d(e);
            var i, o = document.documentElement, a = [0, 0];
            if (t && "border-box" === we(e, "boxSizing") && (t = !1),
            e === document)
                a = [Math.max(o.clientWidth, bodyNode.scrollWidth, o.scrollWidth, bodyNode.offsetWidth, o.offsetWidth), Math.max(o.clientHeight, bodyNode.scrollHeight, o.scrollHeight, bodyNode.offsetHeight, o.offsetHeight)];
            else if (e) {
                function o() {
                    a = ae(e) && (i = se(e, n)) && void 0 !== i.width ? [i.width, i.height] : [e.offsetWidth, e.offsetHeight],
                    t && (0,
                    r.each)(a, (function(t, n) {
                        var i = t ? ["Top", "Bottom"] : ["Left", "Right"];
                        (0,
                        r.each)(i, (function() {
                            a[t] -= parseFloat(we(e, "padding" + this)) || 0,
                            a[t] -= parseFloat(we(e, "border" + this + "Width")) || 0
                        }
                        ))
                    }
                    ))
                }
                if (ne(e))
                    o();
                else {
                    var s = {
                        position: "absolute",
                        visibility: "hidden",
                        display: "block"
                    }
                      , c = {}
                      , _ = !1;
                    e.style.cssText.indexOf("!important") > -1 && (_ = e.style.cssText),
                    (0,
                    r.each)(s, (function(t, n) {
                        c[t] = e.style[t],
                        e.style[t] = n
                    }
                    )),
                    o(),
                    (0,
                    r.each)(s, (function(t, n) {
                        e.style[t] = c[t]
                    }
                    )),
                    _ && (e.style.cssText = _)
                }
            }
            return a
        }
        function ue(e) {
            return le(e)[0]
        }
        function de(e) {
            return le(e)[1]
        }
        function pe(e, t) {
            var n = d(e);
            return n && n.classList && n.classList.contains(t)
        }
        function he(e, t) {
            var n = d(e);
            n && n.classList && (t.includes(" ") ? ` ${n.className} `.includes(` ${t} `) || (n.className = (n.className ? `${n.className} ` : "") + t) : t.length && !n.classList.contains(t) && n.classList.add(t))
        }
        var me = (e,t,n)=>{
            n = (0,
            r.positive)(n),
            setTimeout(he.pbind(e, t), n)
        }
        ;
        function fe(e, t) {
            var n = d(e);
            t.length && n && n.classList && n.classList.contains(t) && n.classList.remove(t)
        }
        var ge = (e,t,n)=>{
            n = (0,
            r.positive)(n),
            setTimeout(fe.pbind(e, t), n)
        }
        ;
        function ve(e, t, n) {
            var r = d(e);
            if (!t.length || !r || !r.classList)
                return !1;
            if (void 0 === n)
                return r.classList.toggle(t);
            var i = r.classList.contains(t);
            return n && !i ? r.classList.add(t) : !n && i && r.classList.remove(t),
            n
        }
        function Ee(e, t, n, i) {
            return i = (0,
            r.positive)(i),
            void 0 === n && (n = !pe(e, t)),
            (n ? me : ge)(e, t, i),
            n
        }
        function ye(e, t, n) {
            fe(e, t),
            he(e, n)
        }
        function we(e, t, n) {
            if (e = d(e),
            (0,
            r.isArray)(t)) {
                var i = {};
                return (0,
                r.each)(t, ((t,n)=>i[n] = we(e, n))),
                i
            }
            if (!e)
                return "";
            if (void 0 === n && (n = !0),
            !n && "opacity" === t && o.browser.msie) {
                var a = e.style.filter;
                return a ? a.indexOf("opacity=") >= 0 ? parseFloat(a.match(/opacity=([^)]*)/)[1]) / 100 + "" : "1" : ""
            }
            if (!n && e.style && (e.style[t] || "height" === t))
                return e.style[t];
            var s, c = document.defaultView || window;
            if (c.getComputedStyle) {
                t = t.replace(/([A-Z])/g, "-$1").toLowerCase();
                var _ = c.getComputedStyle(e, null);
                _ && (s = _.getPropertyValue(t))
            } else if (e.currentStyle) {
                if ("opacity" === t && o.browser.msie) {
                    var l = e.currentStyle.filter;
                    return l && l.indexOf("opacity=") >= 0 ? parseFloat(l.match(/opacity=([^)]*)/)[1]) / 100 + "" : "1"
                }
                var u = t.replace(/\-(\w)/g, (function(e, t) {
                    return t.toUpperCase()
                }
                ));
                "auto" === (s = e.currentStyle[t] || e.currentStyle[u]) && (s = 0),
                s = (s + "").split(" "),
                (0,
                r.each)(s, (function(t, n) {
                    if (!/^\d+(px)?$/i.test(n) && /^\d/.test(n)) {
                        var r = e.style
                          , i = r.left
                          , o = e.runtimeStyle.left;
                        e.runtimeStyle.left = e.currentStyle.left,
                        r.left = n || 0,
                        s[t] = r.pixelLeft + "px",
                        r.left = i,
                        e.runtimeStyle.left = o
                    }
                }
                )),
                s = s.join(" ")
            }
            if (n && ("width" === t || "height" === t)) {
                var p = le(e, !0)[{
                    width: 0,
                    height: 1
                }[t]];
                s = ((0,
                r.intval)(s) ? Math.max((0,
                r.floatval)(s), p) : p) + "px"
            }
            return s
        }
        function be(e, t, n) {
            if (e = d(e))
                if ((0,
                r.isObject)(t))
                    (0,
                    r.each)(t, ((t,n)=>be(e, t, n)));
                else if ("opacity" === t)
                    o.browser.msie && ((n + "").length ? e.style.filter = 1 !== n ? "alpha(opacity=" + 100 * n + ")" : "" : e.style.cssText = e.style.cssText.replace(/filter\s*:[^;]*/gi, ""),
                    e.style.zoom = 1),
                    e.style.opacity !== n && (e.style.opacity = n);
                else
                    try {
                        var i = "number" == typeof n;
                        i && /height|width/i.test(t) && (n = Math.abs(n)),
                        n = i && !/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t) ? n + "px" : n,
                        e.style[t] !== n && (e.style[t] = n)
                    } catch (e) {
                        (0,
                        a.debugLog)("setStyle error: ", [t, n], e)
                    }
        }
        function Ce(e, t, n) {
            if (!e)
                return !1;
            var r = e[vkExpand];
            return r || (r = e[vkExpand] = ++vkUUID),
            void 0 !== n && (vkCache[r] || (vkCache[r] = {},
            window.__debugMode && (vkCache[r].__elem = e)),
            vkCache[r][t] = n),
            t ? vkCache[r] && vkCache[r][t] : r
        }
        function Te(e, t, n) {
            return e = d(e),
            void 0 === n ? e.getAttribute(t) : (e.setAttribute(t, n),
            n)
        }
        function De(e) {
            for (var t = 0, n = arguments.length; t < n; ++t) {
                var r = arguments[t];
                if (void 0 !== e[r])
                    try {
                        delete e[r]
                    } catch (t) {
                        try {
                            e.removeAttribute(r)
                        } catch (e) {}
                    }
            }
        }
        function Ae(e, t) {
            var n = !!e && e[vkExpand];
            if (n)
                if (t) {
                    if (vkCache[n]) {
                        delete vkCache[n][t],
                        t = "";
                        var r = 0;
                        for (var o in vkCache[n])
                            if ("__elem" !== o) {
                                r++;
                                break
                            }
                        r || Ae(e)
                    }
                } else
                    (0,
                    i.removeEvent)(e),
                    De(e, vkExpand),
                    delete vkCache[n]
        }
        function Se() {
            for (var e = arguments, t = 0; t < e.length; ++t) {
                var n = d(e[t]);
                n && (Ae(n),
                De(n, "btnevents"))
            }
        }
        function Pe(e, t, n) {
            if ((e = d(e)) && !e.titleSet) {
                if (t || (t = e),
                t.scrollWidth > t.clientWidth || t.scrollHeight > t.clientHeight)
                    e.setAttribute("title", n || e.innerText || e.textContent);
                else {
                    var r = h("b", e);
                    r && (r.scrollWidth > r.clientWidth || r.scrollHeight > r.clientHeight) ? e.setAttribute("title", n || e.innerText || e.textContent) : e.removeAttribute("title")
                }
                e.titleSet = 1
            }
        }
        function Oe() {
            var e = d("zoom_test_1") || document.body.appendChild(C("div", {
                id: "zoom_test_1"
            }, {
                left: "10%",
                position: "absolute",
                visibility: "hidden"
            }));
            return (d("zoom_test_2") || document.body.appendChild(C("div", {
                id: "zoom_test_2"
            }, {
                left: e.offsetLeft + "px",
                position: "absolute",
                visibility: "hidden"
            }))).offsetLeft / e.offsetLeft
        }
        function Ie(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : void 0
              , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
            if (e = d(e))
                return void 0 !== t && (e.setValue ? (e.setValue(t),
                !n && e.phonblur && e.phonblur()) : "INPUT" === e.tagName || "TEXTAREA" === e.tagName ? e.value = t : void 0 !== e.emojiId && window.Emoji ? Emoji.val(e, t) : e.innerHTML = t,
                !n && (0,
                i.triggerEvent)(e, "valueChanged")),
                e.getValue ? e.getValue() : ("INPUT" === e.tagName || "TEXTAREA" === e.tagName ? e.value : e.innerHTML) || ""
        }
        function Me(e, t, n) {
            e = d(e);
            try {
                if (e.focus(),
                void 0 !== t && !1 !== t || (t = e.value.length),
                void 0 !== n && !1 !== n || (n = t),
                e.setSelectionRange)
                    e.setSelectionRange(t, n);
                else if (window.getSelection && document.createRange) {
                    var r = document.createRange();
                    r.selectNodeContents(e),
                    r.collapse(!1);
                    var i = window.getSelection();
                    i.removeAllRanges(),
                    i.addRange(r)
                }
            } catch (e) {}
        }
        function Re(e, t, n) {
            for (e = d(e),
            n = n || 999; e && !t(e); ) {
                if (0 === --n)
                    return !1;
                try {
                    if ((e = B(e)) === document)
                        return !1
                } catch (t) {
                    e = !1
                }
            }
            return e
        }
        window.cssTransformProp = function() {
            var e = document.createElement("div");
            if (null == e.style.transform) {
                var t = ["Webkit", "Moz", "ms"];
                for (var n in t)
                    if (void 0 !== e.style[t[n] + "Transform"])
                        return t[n] + "Transform"
            }
            return "transform"
        }();
        var Le = !1;
        function ke(e) {
            if (!Le)
                return window.document.title = (0,
                r.replaceEntities)(e)
        }
        function Be(e) {
            Le = e,
            e && window.cur && window.cur.destroy.push((()=>{
                Be(!1)
            }
            ))
        }
        function xe() {
            window.vkExpand = window.vkExpand || "VK" + (0,
            r.vkNow)(),
            window.vkUUID = window.vkUUID || 0,
            window.vkCache = window.vkCache || {}
        }
        var Ne = C
    }
    ,
    49535: (e,t,n)=>{
        "use strict";
        n.d(t, {
            KEY: ()=>a,
            getDigitByKeyCode: ()=>s,
            addEvent: ()=>c,
            removeEvent: ()=>_,
            triggerEvent: ()=>l,
            cancelEvent: ()=>u,
            stopEvent: ()=>d,
            normEvent: ()=>h,
            checkEvent: ()=>m,
            checkKeyboardEvent: ()=>f,
            checkOver: ()=>g
        });
        n(530522),
        n(751876);
        var r = n(315544)
          , i = n(695724)
          , o = n(726271)
          , a = {
            LEFT: 37,
            UP: 38,
            RIGHT: 39,
            DOWN: 40,
            DEL: 8,
            TAB: 9,
            RETURN: 13,
            ENTER: 13,
            ESC: 27,
            PAGEUP: 33,
            PAGEDOWN: 34,
            SPACE: 32,
            CTRL: 17,
            ALT: 18,
            SHIFT: 16
        };
        function s(e) {
            return e >= 49 && e <= 57 && e - 48
        }
        function c(e, t, n, o, a, s) {
            if ((e = (0,
            r.ge)(e)) && 3 != e.nodeType && 8 != e.nodeType) {
                var c, _ = a ? ((c = function(e) {
                    var t = e.data;
                    e.data = a;
                    var r = n.apply(this, [e]);
                    return e.data = t,
                    r
                }
                ).handler = n,
                c) : n;
                e.setInterval && e !== window && (e = window);
                var l = (0,
                r.data)(e, "events") || (0,
                r.data)(e, "events", {})
                  , u = (0,
                r.data)(e, "handle") || (0,
                r.data)(e, "handle", function(e) {
                    return function() {
                        p.apply(e, arguments)
                    }
                }(e));
                (0,
                i.each)(t.split(/\s+/), (function(t, n) {
                    l[n] || (l[n] = [],
                    !o && e.addEventListener ? e.addEventListener(n, u, s) : !o && e.attachEvent && e.attachEvent("on" + n, u)),
                    l[n].push(_)
                }
                ))
            }
        }
        function _(e, t, n, o) {
            if (void 0 === o && (o = !1),
            e = (0,
            r.ge)(e)) {
                var a = (0,
                r.data)(e, "events");
                if (a)
                    if ("string" == typeof t)
                        (0,
                        i.each)(t.split(/\s+/), (function(t, s) {
                            if ((0,
                            i.isArray)(a[s])) {
                                var c = a[s].length;
                                if ((0,
                                i.isFunction)(n)) {
                                    for (var _ = c - 1; _ >= 0; _--)
                                        if (a[s][_] && (a[s][_] === n || a[s][_].handler === n)) {
                                            a[s].splice(_, 1),
                                            c--;
                                            break
                                        }
                                } else {
                                    for (var l = 0; l < c; l++)
                                        delete a[s][l];
                                    c = 0
                                }
                                c || (e.removeEventListener ? e.removeEventListener(s, (0,
                                r.data)(e, "handle"), o) : e.detachEvent && e.detachEvent("on" + s, (0,
                                r.data)(e, "handle")),
                                delete a[s])
                            }
                        }
                        )),
                        (0,
                        i.isEmpty)(a) && ((0,
                        r.removeData)(e, "events"),
                        (0,
                        r.removeData)(e, "handle"));
                    else
                        for (var s in a)
                            a.hasOwnProperty(s) && _(e, s)
            }
        }
        function l(e, t, n, o) {
            e = (0,
            r.ge)(e);
            var a = (0,
            r.data)(e, "handle");
            if (a) {
                var s = ()=>a.call(e, (0,
                i.extend)(n || {}, {
                    type: t,
                    target: e
                }));
                o ? s() : setTimeout(s, 0)
            }
        }
        function u(e) {
            if (!(e = e || window.event))
                return !1;
            for (; e.originalEvent; )
                e = e.originalEvent;
            return e.preventDefault && e.preventDefault(),
            e.stopPropagation && e.stopPropagation(),
            e.stopImmediatePropagation && e.stopImmediatePropagation(),
            e.cancelBubble = !0,
            e.returnValue = !1,
            !1
        }
        function d(e) {
            if (!(e = e || window.event))
                return !1;
            for (; e.originalEvent; )
                e = e.originalEvent;
            return e.stopPropagation && e.stopPropagation(),
            e.cancelBubble = !0,
            !1
        }
        function p(e) {
            e = h(e);
            var t = Array.from(arguments);
            t[0] = e;
            var n = (0,
            r.data)(this, "events");
            if (n && "string" == typeof e.type && n[e.type] && n[e.type].length) {
                var i = (n[e.type] || []).slice();
                for (var o in i)
                    if (i.hasOwnProperty(o)) {
                        if ("mouseover" === e.type || "mouseout" === e.type) {
                            for (var a = e.relatedElement; a && a !== this; )
                                a = a.parentNode;
                            if (a === this)
                                continue
                        }
                        var s = i[o].apply(this, t);
                        if (!1 !== s && -1 !== s || u(e),
                        -1 === s)
                            return !1
                    }
            }
        }
        function h(e) {
            var t = e = e || window.event;
            if ((e = (0,
            i.clone)(t)).originalEvent = t,
            e.target || (e.target = e.srcElement || document),
            3 == e.target.nodeType && (e.target = e.target.parentNode),
            !e.relatedTarget && e.fromElement && (e.relatedTarget = e.fromElement === e.target),
            null == e.pageX && null != e.clientX) {
                var n = document.documentElement
                  , r = bodyNode;
                e.pageX = e.clientX + (n && n.scrollLeft || r && r.scrollLeft || 0) - (n.clientLeft || 0),
                e.pageY = e.clientY + (n && n.scrollTop || r && r.scrollTop || 0) - (n.clientTop || 0)
            }
            return !e.which && (e.charCode || 0 === e.charCode ? e.charCode : e.keyCode) && (e.which = e.charCode || e.keyCode),
            !e.metaKey && e.ctrlKey ? e.metaKey = e.ctrlKey : !e.ctrlKey && e.metaKey && o.browser.mac && (e.ctrlKey = e.metaKey),
            !e.which && e.button && (e.which = 1 & e.button ? 1 : 2 & e.button ? 3 : 4 & e.button ? 2 : 0),
            e
        }
        function m(e) {
            var t = e || window.event;
            return t && ("click" === t.type || "mousedown" === t.type || "mouseup" === t.type) && (t.which > 1 || t.button > 1 || t.ctrlKey || t.shiftKey || o.browser.mac && t.metaKey) || !1
        }
        function f(e) {
            if (!(e = h(e)) || !e.target)
                return !1;
            if (!e.screenX)
                return !0;
            var t = (0,
            r.getSize)(e.target)
              , n = (0,
            r.getXY)(e.target)
              , i = e.pageX - n[0]
              , o = e.pageY - n[1];
            return i < -1 || i > t[0] + 1 || o < -1 || o > t[1] + 1 || Math.abs(e.pageX - n[0] - t[0] / 2) < 1 && Math.abs(e.pageY - n[1] - t[1] / 2) < 1
        }
        function g(e, t) {
            if (!e)
                return !0;
            e = e.originalEvent || e,
            t = t || e.target;
            var n = e.fromElement || e.relatedTarget;
            if (!n || n === t || n === t.parentNode)
                return !0;
            for (; n !== t && n.parentNode && n.parentNode !== bodyNode; )
                n = n.parentNode;
            return n !== t
        }
    }
    ,
    99392: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            ElementTooltip: ()=>c,
            default: ()=>_
        });
        var r = n(315544)
          , i = n(695724)
          , o = n(49535)
          , a = n(803834)
          , s = n(635429);
        class c {
            constructor(e, t) {
                if (this.constructor !== c)
                    throw new Error("ElementTooltip was called without 'new' operator");
                if (!(e = (0,
                r.ge)(e)) || !e.nodeType)
                    throw new Error("First argument not a DOM element");
                if ((0,
                r.data)(e, "ett"))
                    return (0,
                    r.data)(e, "ett");
                if (this._opts = (0,
                i.extend)({
                    delay: 100,
                    offset: [0, 0],
                    type: c.TYPE_VERTICAL,
                    id: "",
                    cls: "",
                    width: null,
                    appendToParent: !1,
                    autoAdjustToViewport: !0,
                    autoShow: !0,
                    autoHide: !1,
                    noHideOnClick: !1,
                    arrowSize: "normal",
                    customShow: !1,
                    align: c.ALIGN_CENTER,
                    withCloseButton: !1
                }, t),
                this._opts.customShow && (this._opts.autoShow = !1),
                this._opts.defaultSide || (this._opts.defaultSide = this._opts.type === c.TYPE_VERTICAL ? "top" : "left"),
                this._opts.cls += " eltt_arrow_size_" + this._opts.arrowSize,
                this._opts.cls += " eltt_align_" + this._opts.align,
                this._opts.noBorder && (this._opts.cls += " eltt_noborder"),
                this._opts.setPos && !this._opts.forceSide)
                    throw new Error("forceSide parameter should be set if you use setPos");
                if (this._appendToEl = this._opts.appendTo ? this._opts.appendTo : this._opts.appendToParent ? (0,
                r.domClosestPositioned)(e, {
                    noOverflow: !0
                }) : e,
                this._arrowSize = {
                    mini: c.ARROW_SIZE_MINI,
                    normal: c.ARROW_SIZE_NORMAL,
                    big: c.ARROW_SIZE_BIG
                }[this._opts.arrowSize],
                this._opts.forceSide) {
                    var n = c.getType(this._opts.forceSide);
                    if (void 0 === n)
                        throw new Error("ElementTooltip: invalid 'forceSide' option provided: ",this._opts.forceSide);
                    0,
                    this._opts.type = n
                }
                this._opts.type === c.TYPE_HORIZONTAL && void 0 === (null == t ? void 0 : t.autoAdjustToViewport) && (this._opts.autoAdjustToViewport = !1),
                this._el = e,
                (0,
                r.data)(this._el, "ett", this),
                this._initEvents(e),
                this._clearTimeouts(),
                this._isShown = !1
            }
            _initEvents(e) {
                this._opts.autoShow && (this._el_me_event = this._onMouseEnter.bind(this),
                (0,
                o.addEvent)(e, "mouseenter", this._el_me_event)),
                (this._opts.autoShow || this._opts.autoHide) && (this._el_ml_event = this._onMouseLeave.bind(this),
                (0,
                o.addEvent)(e, "mouseleave", this._el_ml_event)),
                this._opts.autoShow || this._opts.customShow || (this._el_c_event = ()=>{
                    this._isShown && this._opts.noHideOnClick || this.toggle(!this._isShown)
                }
                ,
                (0,
                o.addEvent)(e, "click", this._el_c_event))
            }
            _onMouseEnter(e) {
                clearTimeout(this._hto),
                this._hto = !1,
                !this._isShown && this._opts.autoShow && (clearTimeout(this._reTimeout),
                this._reTimeout = !1,
                clearTimeout(this._sto),
                this._sto = setTimeout(this.show.bind(this), this._opts.delay))
            }
            _onMouseLeave(e) {
                this._clearTimeouts(),
                this._hto = setTimeout(this._hide.bind(this), 200)
            }
            _onMouseWindowClick(e) {
                if (!this._opts.noAutoHideOnWindowClick) {
                    for (var t = e.target; t && t !== this._ttel && t !== document.body && t !== this._el; )
                        t = (0,
                        r.domPN)(t);
                    if (!(0,
                    r.hasClass)(e.target, "_ap_layer__close"))
                        return t && t !== document.body ? void 0 : (0,
                        i.isFunction)(this._opts.onWindowClick) ? (this._opts.onWindowClick(),
                        (0,
                        o.cancelEvent)(e)) : (this.hide(!0),
                        (0,
                        o.cancelEvent)(e))
                }
            }
            destroy() {
                var e;
                this._el_me_event && (0,
                o.removeEvent)(this._el, "mouseenter", this._el_me_event),
                this._el_ml_event && (0,
                o.removeEvent)(this._el, "mouseleave", this._el_ml_event),
                this._el_c_event && (0,
                o.removeEvent)(this._el, "click", this._el_c_event),
                this._clearTimeouts(),
                (0,
                r.removeData)(this._el, "ett"),
                (0,
                r.re)(this._ttel),
                this._ev_wclick && (0,
                o.removeEvent)(document, "mousedown", this._ev_wclick),
                this._ttel && (e = (0,
                r.geByClass1)("_eltt_content", this._ttel)),
                this._opts.onDestroy && this._opts.onDestroy(e)
            }
            hide(e) {
                this._hide(e)
            }
            _onTooltipMouseEnter(e) {
                this._clearTimeouts()
            }
            _onTooltipMouseLeave(e) {
                this._onMouseLeave()
            }
            build() {
                if (!this._ttel) {
                    var e = this._opts.withCloseButton ? "eltt_with_close_button" : "";
                    this._ttel = (0,
                    r.se)(`\n        <div class="eltt ${this._opts.cls || ""} ${e}" id="${this._opts.id}">\n          <div class="eltt_arrow_back _eltt_arrow_back">\n            <div class="eltt_arrow"></div>\n          </div>\n          <div class="eltt_content _eltt_content"></div>\n        </div>`),
                    this._ttArrowEl = (0,
                    r.geByClass1)("_eltt_arrow_back", this._ttel);
                    var t = (0,
                    r.geByClass1)("_eltt_content", this._ttel);
                    if (this._opts.content && ((0,
                    i.isString)(this._opts.content) ? t.innerHTML = this._opts.content : t.appendChild(this._opts.content)),
                    this._opts.withCloseButton) {
                        this._ttel.insertAdjacentHTML("beforeend", '\n          <div class="eltt_close_button"></div>\n        '),
                        this._closeButton = this._ttel.lastElementChild;
                        var n = e=>{
                            e.stopPropagation(),
                            this.hide(),
                            this._opts.onCloseButtonClick && this._opts.onCloseButtonClick()
                        }
                        ;
                        this._closeButton.addEventListener("click", n),
                        cur.destroy.push((()=>this._closeButton.removeEventListener("click", n)))
                    }
                    this._appendToEl && this._appendToEl.appendChild(this._ttel)
                }
            }
            show() {
                if (this._isShown)
                    this.updatePosition();
                else {
                    if (this._clearTimeouts(),
                    this._ttel || (this.build(),
                    (this._opts.autoShow || this._opts.autoHide) && (this._ev_ttenter = this._onTooltipMouseEnter.bind(this),
                    this._ev_ttleave = this._onTooltipMouseLeave.bind(this),
                    (0,
                    o.addEvent)(this._ttel, "mouseenter", this._ev_ttenter),
                    (0,
                    o.addEvent)(this._ttel, "mouseleave", this._ev_ttleave))),
                    this._opts.width) {
                        var e = (0,
                        i.isFunction)(this._opts.width) ? this._opts.width.call(this) : this._opts.width;
                        (0,
                        r.setStyle)(this._ttel, "width", e)
                    }
                    (0,
                    r.show)(this._ttel);
                    var t = (0,
                    r.geByClass1)("_eltt_content", this._ttel);
                    this._opts.onFirstTimeShow && !this._firstTimeShown && this._opts.onFirstTimeShow.call(this, t, this._ttel),
                    this._opts.onShow && this._opts.onShow(t, !this._firstTimeShown),
                    this._firstTimeShown = !0,
                    this.updatePosition(),
                    this._isShown = !0,
                    this._visTO = setTimeout(r.addClass.pbind(this._ttel, "eltt_vis"), 10),
                    this._opts.elClassWhenShown && (0,
                    r.addClass)(this._el, this._opts.elClassWhenShown),
                    this._ev_wclick && (0,
                    o.removeEvent)(document, "mousedown", this._ev_wclick),
                    this._ev_wclick = this._onMouseWindowClick.bind(this),
                    (0,
                    o.addEvent)(document, "mousedown", this._ev_wclick)
                }
            }
            static getType(e) {
                switch (e) {
                case "top":
                case "bottom":
                    return c.TYPE_VERTICAL;
                case "right":
                case "left":
                    return c.TYPE_HORIZONTAL
                }
            }
            getOptions() {
                return this._opts
            }
            updatePosition() {
                var e = this._opts.forceSide
                  , t = !!this._opts.getTargetBoundingBox && this._opts.getTargetBoundingBox(this);
                if (!t) {
                    var n = (0,
                    r.getXY)(this._el)
                      , o = (0,
                    r.getSize)(this._el);
                    t = {
                        left: n[0],
                        top: n[1],
                        width: o[0],
                        height: o[1]
                    }
                }
                var _, l = this._opts.getWrapEl ? this._opts.getWrapEl(this) : (0,
                r.gpeByClass)("audio_layer_container", this._ttel), u = l || (0,
                r.domClosestOverflowHidden)(this._ttel), d = u !== bodyNode ? (0,
                r.getXY)(u) : [(0,
                a.scrollGetX)(), (0,
                a.scrollGetY)() + (0,
                s.getPageHeaderHeight)()], p = u !== bodyNode ? (0,
                r.getSize)(u) : [window.innerWidth, window.innerHeight], h = (0,
                r.getSize)(this._ttel), m = this._arrowSize, f = this._opts.noBorder ? 0 : 1, g = (0,
                i.isFunction)(this._opts.offset) ? this._opts.offset() : this._opts.offset, v = (e,n)=>{
                    var i, o = {}, a = [vk.rtl ? "marginRight" : "marginLeft", "marginTop"].indexOf(e);
                    i = this._opts.align === (vk.rtl ? c.ALIGN_LEFT : c.ALIGN_RIGHT) ? h[a] - Math.max(f + m + (n || 0), Math.min(h[a], t[a ? "height" : "width"]) / 2) : this._opts.align === (vk.rtl ? c.ALIGN_RIGHT : c.ALIGN_LEFT) ? Math.max(f + m + (n || 0), Math.min(h[a], t[a ? "height" : "width"]) / 2) : h[a] / 2,
                    o[e] = Math.floor(i) - f - m - (n || 0),
                    (0,
                    r.setStyle)(this._ttArrowEl, o)
                }
                ;
                if (this._opts.setPos)
                    _ = this._opts.setPos(this) || {},
                    c.getType(e) === c.TYPE_VERTICAL ? void 0 !== _.arrowPosition ? (0,
                    r.setStyle)(this._ttArrowEl, {
                        marginLeft: _.arrowPosition
                    }) : vk.rtl ? v("marginRight") : v("marginLeft") : void 0 !== _.arrowPosition ? (0,
                    r.setStyle)(this._ttArrowEl, {
                        marginTop: _.arrowPosition
                    }) : v("marginTop");
                else {
                    if (!e && this._prevSide && this._opts.preventSideChange)
                        e = this._prevSide;
                    else if (!e)
                        if (this._opts.type === c.TYPE_VERTICAL) {
                            var E = (0,
                            r.hasClass)(bodyNode, "body_im") ? this._opts.bottomGap || 60 : this._opts.bottomGap || 0
                              , y = t.top - d[1] > h[1] + m - g[1]
                              , w = (0,
                            a.scrollGetY)() + p[1] - (t.top + t.height + m) - E > h[1];
                            e = "top" === this._opts.defaultSide ? y ? "top" : "bottom" : w ? "bottom" : "top"
                        } else
                            e = t.left - d[0] < h[0] ? "right" : "left";
                    var b, C, T, D, A, S, P = (0,
                    r.getXY)(this._appendToEl), O = [t.left - P[0], t.top - P[1]], I = g[0] + O[0];
                    this._opts.centerShift ? (I += this._opts.centerShift || 0,
                    b = this._opts.centerShift) : this._opts.rightShift && (I += b = -(h[0] / 2 - this._opts.rightShift)),
                    this._prevSide = e;
                    var M = !this._opts.autoAdjustToViewport;
                    switch (this._opts.align === (vk.rtl ? c.ALIGN_LEFT : c.ALIGN_RIGHT) ? (C = t.width - h[0],
                    T = t.height - h[1]) : this._opts.align === (vk.rtl ? c.ALIGN_RIGHT : c.ALIGN_LEFT) ? (C = 0,
                    T = 0) : (C = -h[0] / 2 + t.width / 2,
                    T = t.height / 2 - h[1] / 2),
                    e) {
                    case "bottom":
                        A = C + I,
                        S = t.height + m - g[1] + O[1],
                        b || M || ((D = C + t.left + g[0] + h[0] + 20 - (d[0] + p[0])) < 0 && (D = 0),
                        A -= D,
                        b = -D),
                        _ = {
                            left: A,
                            top: S
                        };
                        break;
                    case "top":
                        A = C + I,
                        S = -h[1] - m + g[1] + O[1],
                        b || M || ((D = C + t.left + g[0] + h[0] + 20 - (d[0] + p[0])) < 0 && (D = 0),
                        A -= D,
                        b = -D),
                        _ = {
                            left: A,
                            top: S
                        };
                        break;
                    case "right":
                        A = t.width + m + I,
                        S = T + g[1] + O[1],
                        b || M || ((D = T + t.top + g[1] - (d[1] + 20)) > 0 && (D = 0),
                        S -= D,
                        b = -D),
                        _ = {
                            left: A,
                            top: S
                        };
                        break;
                    case "left":
                        A = -h[0] - m + I,
                        S = T + g[1] + O[1],
                        b || M || ((D = T + t.top + g[1] - (d[1] + 20)) > 0 && (D = 0),
                        S -= D,
                        b = -D),
                        _ = {
                            left: A,
                            top: S
                        }
                    }
                    this._opts.type === c.TYPE_VERTICAL ? vk.rtl ? v("marginRight", b) : v("marginLeft", b) : v("marginTop", b)
                }
                (0,
                i.each)(["top", "bottom", "left", "right"], function(t, n) {
                    e !== n && (0,
                    r.removeClass)(this._ttel, "eltt_" + n)
                }
                .bind(this)),
                (0,
                r.addClass)(this._ttel, "eltt_" + e),
                (0,
                r.setStyle)(this._ttel, _)
            }
            _hide(e) {
                if (!this.tempPreventHide) {
                    if (this._isShown = !1,
                    this._clearTimeouts(),
                    this._reTimeout = setTimeout(function() {
                        (0,
                        r.hide)(this._ttel),
                        this._opts.elClassWhenShown && (0,
                        r.removeClass)(this._el, this._opts.elClassWhenShown),
                        this._opts.onHide && this._opts.onHide(this._ttel, !!e)
                    }
                    .bind(this), c.FADE_SPEED),
                    this._opts.onBeforeHide)
                        try {
                            this._opts.onBeforeHide(this._ttel, !!e)
                        } catch (e) {}
                    (0,
                    r.removeClass)(this._ttel, "eltt_vis"),
                    this._ev_wclick && (0,
                    o.removeEvent)(document, "mousedown", this._ev_wclick)
                }
            }
            isShown() {
                return this._isShown
            }
            toggle() {
                this.isShown() ? this.hide() : this.show()
            }
            _clearTimeouts() {
                this._visTO && clearTimeout(this._visTO),
                this._visTO = !1,
                this._sto && clearTimeout(this._sto),
                this._sto = !1,
                this._hto && clearTimeout(this._hto),
                this._hto = !1,
                this._reTimeout && clearTimeout(this._reTimeout),
                this._reTimeout = !1
            }
            getContent() {
                return (0,
                r.geByClass1)("_eltt_content", this._ttel)
            }
        }
        c.TYPE_VERTICAL = 0,
        c.TYPE_HORIZONTAL = 1,
        c.FADE_SPEED = 100,
        c.ARROW_SIZE_MINI = 9,
        c.ARROW_SIZE_NORMAL = 8,
        c.ARROW_SIZE_BIG = 16,
        c.ALIGN_LEFT = "left",
        c.ALIGN_CENTER = "center",
        c.ALIGN_RIGHT = "right";
        const _ = c
    }
    ,
    206735: (e,t,n)=>{
        "use strict";
        n.d(t, {
            setFavIcon: ()=>i,
            initFavIcon: ()=>o
        });
        var r = n(315544);
        function i(e, t) {
            if (window.icoNode && (e = e + "?" + ((stVersions || {}).favicon || ""),
            icoNode.getAttribute("href") !== e || t)) {
                var n = (0,
                r.ce)("link", {
                    rel: "shortcut icon",
                    type: "image/gif",
                    href: e
                });
                headNode.replaceChild(n, icoNode),
                icoNode = n
            }
        }
        function o() {
            window._iconAdd = window.devicePixelRatio >= 2 ? "_2x" : ""
        }
    }
    ,
    635093: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            menuSettings: ()=>menuSettings,
            showSettingsAddressBox: ()=>showSettingsAddressBox,
            showWriteMessageBox: ()=>showWriteMessageBox,
            giftsBox: ()=>giftsBox,
            moneyTransferBox: ()=>moneyTransferBox,
            reportAd: ()=>reportAd,
            mobilePromo: ()=>mobilePromo,
            showAudioClaimWarning: ()=>showAudioClaimWarning,
            sureDeleteAll: ()=>sureDeleteAll,
            imageStatusPopup: ()=>imageStatusPopup
        });
        var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(175115)
          , core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59357)
          , _message_box__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(654612)
          , _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(695724)
          , _ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(386409)
          , _dom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(315544)
          , _dom_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49535)
          , _lang__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(786067)
          , _debug_tools__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(787481)
          , _box_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(486125)
          , _shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(171516)
          , _shared_user_user_env__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(19331)
          , _web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(962857)
          , _web_settings_addressBox__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(473166)
          , _icons_desktop_getIcon24Cancel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(420130)
          , _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(124041);
        function _extends() {
            return _extends = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            _extends.apply(this, arguments)
        }
        function menuSettings(e) {
            return (0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showTabbedBox)("al_settings.php", {
                act: "menu_box",
                type: e
            })
        }
        function showSettingsAddressBox() {
            (0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_settings.php", {
                act: "address_box"
            }, {
                stat: [window.jsc("web/settings.js"), "settings.css"],
                params: {
                    bodyStyle: "padding: 0;",
                    hideButtons: !0
                },
                onDone(e, t) {
                    var n = t.hash;
                    (0,
                    _web_settings_addressBox__WEBPACK_IMPORTED_MODULE_13__.initSettingsAddressBox)(e, n)
                }
            })
        }
        function showWriteMessageBox(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            cur.onFriendMessage && cur.onFriendMessage(),
            window.stManager.add(["page.js", "wide_dd.js"]);
            var r = (0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_im.php", _extends({
                act: "a_write_box",
                to: t
            }, n.params), {
                stat: [window.jsc("web/writebox.js"), "writebox.css", "wide_dd.css", "page.css", "post.css", window.jsc("web/emoji.js"), "notifier.css"],
                cache: 1
            }, e);
            return r && (0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e),
            window.WriteBox && WriteBox.extractEmoji(),
            !r
        }
        function giftsBox(e, t, n) {
            return cur.viewAsBox ? cur.viewAsBox() : !(0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_gifts.php", {
                act: "box",
                tab: n || "received",
                mid: e
            }, {
                cache: 1,
                stat: ["gifts.css", window.jsc("web/gifts.js")]
            }, t)
        }
        function moneyTransferBox(e, t, n, r, i, o, a) {
            if (cur.viewAsBox)
                return cur.viewAsBox();
            if (i) {
                var s, c;
                if (!a)
                    return 2 === i ? (s = cur.lang && cur.lang.mail_money_transfer_cancel_confirm || (0,
                    _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("mail_money_transfer_cancel_confirm"),
                    c = cur.lang && cur.lang.mail_money_transfer_cancel_btn || (0,
                    _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("mail_money_transfer_cancel_btn")) : (s = cur.lang && cur.lang.mail_money_transfer_decline_confirm || (0,
                    _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("news_fb_money_transfer_decline_confirm"),
                    c = cur.lang && cur.lang.mail_money_transfer_decline_btn || (0,
                    _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("news_fb_money_transfer_decline_btn")),
                    void (cur.confirmBox = (0,
                    _message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)((0,
                    _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_action_confirmation"), s, c, moneyTransferBox.pbind(e, t, n, r, i, !1, 1), (0,
                    _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_cancel")));
                var _ = (0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.hasClass)((0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.domPN)(r), "wall_postlink_preview_btn") || (0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.hasClass)(r, "money_transfer__decline_button")
                  , l = (0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("flat_button", (0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.domPN)(r));
                return 2 !== a && ((0,
                _ui__WEBPACK_IMPORTED_MODULE_4__.disableButton)(l, !0),
                _ ? ((0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.addClass)(r.firstChild, "round_spinner"),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_5__.removeClass)(r.firstChild, "button")) : (0,
                _ui__WEBPACK_IMPORTED_MODULE_4__.lockButton)(r),
                cur.confirmBox && cur.confirmBox.hide()),
                void ajax.post("al_payments.php?act=a_cancel_money_transfer", {
                    tx_id: e,
                    hash: t,
                    from: _ ? "snippet" : ""
                }, {
                    onDone: function(o, a, s) {
                        0 !== o ? (_ ? ((0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.re)(r),
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.hasClass)(l, "secondary") || (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.domReplaceEl)(l, s)) : (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.re)((0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.domPN)(r)),
                        (0,
                        _box_utils__WEBPACK_IMPORTED_MODULE_9__.showDoneBox)(a),
                        window.TopNotifier.invalidate()) : setTimeout((()=>moneyTransferBox(e, t, n, r, i, !1, 2)), 2e3)
                    },
                    onFail: function(e) {
                        return (0,
                        _ui__WEBPACK_IMPORTED_MODULE_4__.disableButton)(l, !1),
                        _ ? ((0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.addClass)(r.firstChild, "button"),
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.removeClass)(r.firstChild, "round_spinner")) : (0,
                        _ui__WEBPACK_IMPORTED_MODULE_4__.unlockButton)(r),
                        setTimeout((0,
                        _message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)((0,
                        _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error"), e).hide, 2e3),
                        !0
                    }
                })
            }
            return cur.acceptMoneyBtn = r,
            o ? !_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_12__.MoneyTransfer.showMoneyTransferBox({
                request_id: e,
                request: o,
                hash: t
            }, {
                stat: ["payments.css", window.jsc("workers/payments.js")]
            }, (e=>((0,
            _box_utils__WEBPACK_IMPORTED_MODULE_9__.curBox)() && (0,
            _box_utils__WEBPACK_IMPORTED_MODULE_9__.curBox)().hide(),
            setTimeout((0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)((0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error"), e).hide, 2e3),
            !0))) : !(0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_payments.php", {
                act: "accept_money_transfer_box",
                tx_id: e,
                hash: t
            }, {
                stat: ["payments.css", window.jsc("workers/payments.js")],
                onFail: e=>((0,
                _box_utils__WEBPACK_IMPORTED_MODULE_9__.curBox)() && (0,
                _box_utils__WEBPACK_IMPORTED_MODULE_9__.curBox)().hide(),
                setTimeout((0,
                _message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)((0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error"), e).hide, 2e3),
                !0),
                onDone(e, t) {
                    _web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_12__.MoneyTransfer.initHandlers(),
                    window.cur = (0,
                    _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)(window.cur, {
                        paymentsOptions: t,
                        paymentsPopupWrite(e) {
                            e.document.innerHTML != cur._popup_text && (e.document.write(window.cur._popup_text),
                            e.document.close(),
                            e.blur(),
                            e.focus(),
                            window.cur._popup_callback && window.cur._popup_callback())
                        }
                    }),
                    e.setOptions({
                        width: 510,
                        bodyStyle: "padding: 0;",
                        hideButtons: !0,
                        onClean() {
                            window.cur.moneyTranferCheckInt && clearInterval(window.cur.moneyTranferCheckInt),
                            window.removeEventListener("message", _web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_12__.MoneyTransfer.frameMessage, !1)
                        }
                    }),
                    _web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_12__.MoneyTransfer.initAccept(t.chkData, t.frame)
                }
            }, n)
        }
        function reportAd(e, t) {
            if ((0,
            _shared_user_user_env__WEBPACK_IMPORTED_MODULE_11__.partConfigEnabled)("ads_new_reports_web_tgb")) {
                var n = ""
                  , r = null
                  , i = (0,
                _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("/reports.php", {
                    act: "report_ad_box",
                    ad_data: t
                }, {
                    onDone: function() {
                        var e = (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.geByClass)("radiobtn", "ad_report");
                        window.radioBtns.ad_report = {
                            val: 0,
                            els: e
                        };
                        var t = (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.ge)("ad_csrf");
                        n = t ? t.value : n,
                        r = (0,
                        _dom__WEBPACK_IMPORTED_MODULE_5__.ge)("ad_comment")
                    },
                    params: {
                        width: 370,
                        onClean: ()=>{
                            delete window.radioBtns.ad_report
                        }
                    },
                    stat: ["reports.css"]
                });
                i.removeButtons(),
                i.addButton((0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("box_send"), (o=>{
                    ajax.post("reports.php", {
                        act: "a_report_ad",
                        ad_id: e,
                        reason: window.radioBtns.ad_report.val,
                        comment: r ? r.value : "",
                        ad_data: t,
                        hash: n
                    }, {
                        onDone: ()=>{
                            i.hide(),
                            (0,
                            _box_utils__WEBPACK_IMPORTED_MODULE_9__.showDoneBox)((0,
                            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("reports_thanks_for_report"))
                        }
                        ,
                        showProgress: ()=>(0,
                        _ui__WEBPACK_IMPORTED_MODULE_4__.lockButton)(o),
                        hideProgress: ()=>(0,
                        _ui__WEBPACK_IMPORTED_MODULE_4__.unlockButton)(o)
                    })
                }
                )),
                i.addButton((0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_cancel"), !1, "no")
            } else
                (0,
                _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("/reports.php?act=a_report_ad_box", {
                    ad_id: e
                }, {
                    params: {
                        width: 370
                    },
                    stat: ["ui_controls.js", "ui_controls.css"]
                })
        }
        var mobilePromo = ()=>(0,
        _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("al_login.php", {
            act: "mobile",
            box: 1
        });
        function showAudioClaimWarning(e, t, n) {
            var r, i, o = e.id, a = e.ownerId, s = e.title, c = t.id, _ = t.reason, l = t.original, u = {
                width: 470
            };
            if (e.restrictionStatus)
                return AudioUtils.showAudioRestriction(e);
            "geo" === _ ? (r = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claimed_geo"),
            i = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_warning_title")) : "site_rules_violation" === _ ? (r = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_site_rules_violation_warning"),
            i = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_site_rules_violation_header")) : "replace" === _ ? (r = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claimed_replacement_available"),
            i = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_warning_title")) : "subscription" === _ ? (u.hideButtons = !0,
            u.bodyStyle = "padding: 0; border-radius: 4px;",
            u.width = 450,
            i = !1,
            r = `\n      <div class="audio_claim_popup">\n        <div class="audio_claim_popup__title">${(0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_audio_only_with_subscription_title")}</div>\n        <div class="audio_claim_popup__text">${(0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_audio_only_with_subscription_text")}</div>\n        <div class="audio_claim_popup__close" onclick="curBox().hide()">${(0,
            _icons_desktop_getIcon24Cancel__WEBPACK_IMPORTED_MODULE_15__.getIcon24Cancel)().icon}</div>\n        ${_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_14__.FlatButton.render({
                appearance: _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_14__.FlatButtonAppearance.PRIMARY,
                size: _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_14__.FlatButtonSize.M,
                round: !0,
                restAttrs: {
                    onclick: "AudioPlayer.showSubscriptionPopup()"
                },
                children: (0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_audio_only_with_subscription_btn")
            }).outerHTML}\n      </div>`) : (r = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_warning"),
            i = (0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_warning_title")),
            u.title = i;
            var d = [u, r = (r = (r = r.replace(/\{audio\}/g, `<b>${s}</b>`)).replace(/\{objection_link\}/g, `<a href="/help?act=cc_objection&claim=${c}&content=audio${a}_${o}">${(0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_objection")}</a>`)).replace(/\{delete_link\}/g, `<a onclick="deleteAudioOnClaim(${a}, ${o}); return false;">${(0,
            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_delete")}</a>`)]
              , p = null;
            if (n && l) {
                var h = AudioUtils.drawAudio(l, "no_extra");
                d[1] = r.replace(/\{original\}/g, l[AudioUtils.AUDIO_ITEM_INDEX_PERFORMER] + " - " + l[AudioUtils.AUDIO_ITEM_INDEX_TITLE]) + "<br/><br/>" + h,
                d.push((0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_replace_with_original"), (function() {
                    (0,
                    _ui__WEBPACK_IMPORTED_MODULE_4__.lockButton)(p.btns.ok[0]),
                    n((()=>p.hide()))
                }
                )),
                u.textControls = `<a onclick="deleteAudioOnClaim(${a}, ${o}); return false;">${(0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("audio_claim_delete_capital")}</a>`
            }
            cur.claimWarning = p = _message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox.apply(null, d)
        }
        function sureDeleteAll(title, text, where, objectId, toId, fromId, hash, event) {
            if (!(0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.checkEvent)(event)) {
                var box = (0,
                _message_box__WEBPACK_IMPORTED_MODULE_2__.showFastBox)({
                    title
                }, text, (0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_delete"), (function(btn) {
                    ajax.post("/delete_all.php", {
                        act: where,
                        object_id: objectId,
                        to_id: toId,
                        from_id: fromId,
                        hash,
                        loc: nav.objLoc[0]
                    }, {
                        onDone: function onDone(res) {
                            if (__debugMode)
                                eval(res);
                            else
                                try {
                                    eval(res)
                                } catch (e) {
                                    (0,
                                    _debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e, res)
                                }
                            box.hide()
                        },
                        showProgress: ()=>(0,
                        _ui__WEBPACK_IMPORTED_MODULE_4__.lockButton)(btn),
                        hideProgress: ()=>(0,
                        _ui__WEBPACK_IMPORTED_MODULE_4__.unlockButton)(btn)
                    })
                }
                ), (0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_cancel"));
                return !1
            }
        }
        function imageStatusPopup(e, t) {
            Object.assign(t, {
                act: "image_status"
            });
            var n = (0,
            _message_box__WEBPACK_IMPORTED_MODULE_2__.showBox)("special_event.php", t, {
                containerClass: "ImageStatusPopup__container",
                params: {
                    hideButtons: !0
                },
                onFail: function() {
                    return window.cur.imageStatusBox && window.cur.imageStatusBox.hide(),
                    !0
                },
                onDone: function(e, t) {
                    var n = t.status_id;
                    n && (0,
                    _shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_10__.saveStatlogEvents)({
                        name: "image_status",
                        value: n,
                        keys: ["show_popup"]
                    })
                }
            }, e);
            n && ((0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.cancelEvent)(e),
            window.cur.imageStatusBox = n)
        }
    }
    ,
    850167: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initTopNotifier: ()=>T,
            isPhotoeditor3Available: ()=>D,
            showPhoto: ()=>A,
            showManyPhoto: ()=>S,
            showAlbums: ()=>P,
            showAlbum: ()=>O,
            showPhotoTags: ()=>I,
            showVideoTags: ()=>M,
            videoCallback: ()=>R,
            showAttachProductBox: ()=>L,
            showWiki: ()=>k,
            showApp: ()=>B,
            showPodcast: ()=>x,
            podcastStartFrom: ()=>N,
            articlePrepare: ()=>U,
            isArticleEditorAvailable: ()=>W,
            openArticleEditor: ()=>F,
            bookmark: ()=>K,
            bookmarkPost: ()=>V,
            bookmarkArticle: ()=>H,
            bookmarkLink: ()=>j,
            bookmarkPodcast: ()=>G,
            bookmarkNarrative: ()=>Y,
            bookmarkEvent: ()=>z,
            bookmarkYoulaProduct: ()=>X,
            shareAudioPlaylist: ()=>Q,
            getAudioPlayer: ()=>J,
            deleteAudioOnClaim: ()=>Z,
            initTopAudioPlayer: ()=>ee,
            AudioMessagePlayer: ()=>te,
            mentionClick: ()=>ne,
            isArticleLayerOpen: ()=>re,
            showDonutSubscribePopup: ()=>ie,
            sendCoronaStatusStat: ()=>oe,
            sendImageStatusStat: ()=>ae,
            showDarkThemeGuideModal: ()=>se
        });
        n(21466),
        n(820075),
        n(175115);
        var r = n(160617)
          , i = n(40906)
          , o = n(315544)
          , a = n(695724)
          , s = n(486125)
          , c = n(49535)
          , _ = n(654612)
          , l = n(726271)
          , u = n(386409)
          , d = n(786067)
          , p = n(668040)
          , h = n(391789)
          , m = n(479957)
          , f = n(171516)
          , g = n(982452)
          , v = n(273271)
          , E = n(849464)
          , y = n(908928)
          , w = n(221324)
          , b = n(124041);
        function C() {
            return C = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            C.apply(this, arguments)
        }
        function T() {
            var e = ["notifier.js", "notifier.css"];
            return {
                preload: function() {
                    window.stManager.add(e, (()=>window.TopNotifier.preload()))
                },
                show: function(t) {
                    if (!0 !== (0,
                    c.checkEvent)(t))
                        return window.stManager.add(e, (()=>window.TopNotifier.show(t))),
                        (0,
                        c.cancelEvent)(t)
                },
                showTooltip: function(t) {
                    window.stManager.add(e, (()=>window.TopNotifier.showTooltip(t)))
                },
                invalidate: ()=>{}
                ,
                setCount: ()=>{}
                ,
                createNewEventsBox: ()=>{}
            }
        }
        function D() {
            return !l.browser.msie || parseInt(l.browser.version) > 10
        }
        function A(e, t) {
            var n, r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, i = arguments.length > 3 ? arguments[3] : void 0;
            if (r && r.additional && r.additional.open_pe && r.temp && (0,
            h.isImgBlurred)(r.temp)) {
                var o = function() {
                    A(e, t, r, i)
                };
                Page.showUnblurBox(r.temp.restrictionTitle, r.temp.restrictionText, r.temp.photoRaw, r.temp.unblurHash, o)
            } else {
                if (r && r.additional && r.additional.open_pe && r.temp && r.temp.restrictionGeo && delete r.additional.open_pe,
                cur.viewAsBox)
                    return cur.viewAsBox();
                if (!((0,
                c.checkEvent)(i) || cur._editMode && cur._editMode(i))) {
                    if ((0,
                    v.isUnauthorizedMediaLayerBoxAvailable)() && !r.forceUnauth)
                        return v.Unauthorized.showMoreBox(null, 0, v.UnauthorizedSourceType.PHOTO, (()=>{
                            A(e, t, C({}, r, {
                                forceUnauth: !0
                            }), i)
                        }
                        )),
                        !1;
                    var s = [window.jsc("web/photoview.js"), "photoview.css", "page.js", "page.css"];
                    if (r.img && (r.showProgress = function() {
                        (0,
                        u.showProgress)(r.img)
                    }
                    ,
                    r.hideProgress = function() {
                        (0,
                        u.hideProgress)(r.img)
                    }
                    ),
                    !e)
                        return !1;
                    var _ = 1;
                    if (((null == r || null === (n = r.additional) || void 0 === n ? void 0 : n.open_pe) || (null == r ? void 0 : r.noCache)) && (_ = 0),
                    window.Photoview && !1 === Photoview.showPhoto(e, t, r) && _)
                        return !1;
                    var l = !0;
                    if (cur.pvOptions || (cur.pvOptions = {}),
                    cur.pvOptions.isLightMode = r.isLightMode,
                    r.temp && !(cur.pvNoTemp || {})[e] && window.stManager.add(s, (function() {
                        (0,
                        a.extend)(cur, {
                            pvCancelLoad: function() {
                                l = !1
                            },
                            pvData: cur.pvData || {},
                            pvOptions: cur.pvOptions || {}
                        }),
                        cur.pvData.temp = [r.temp],
                        cur.pvOptions.temp_final = r.temp_final,
                        cur.pvOptions.temp_summary = r.temp_summary,
                        cur.pvOptions.queue = r.queue,
                        Photoview.show("temp", 0)
                    }
                    )),
                    (0,
                    a.extend)(r, {
                        onDone: function(n) {
                            Photoview.list(e, t, n),
                            r.blog_text && arguments[3] && arguments[3][0] && (arguments[3][0].album = r.blog_text),
                            Photoview.loaded.apply(window, arguments),
                            l && ("deleted" === n ? Photoview.showDeleted.apply(window, arguments) : Photoview.showPhoto(e, t, r, !0))
                        },
                        stat: s,
                        cache: _
                    }),
                    r.temp_final)
                        return !1;
                    var d = "";
                    return nav.objLoc.dmcah && (d = nav.objLoc.dmcah),
                    ajax.post("al_photos.php", (0,
                    a.extend)({
                        act: "show",
                        gid: cur.gid,
                        photo: e,
                        list: t,
                        dmcah: d,
                        module: cur.module || "",
                        list_info: r.list_info || null
                    }, r.additional), r),
                    !1
                }
            }
        }
        function S(e, t, n, r) {
            Page.showManyPhoto(e, t, n, r)
        }
        function P(e, t, n) {
            return cur.viewAsBox ? cur.viewAsBox() : (0,
            c.checkEvent)(n) ? void 0 : (window.stManager.add([window.jsc("web/photoview.js"), "photoview.css"], (function() {
                Photoview.showAlbums(e, t)
            }
            )),
            !1)
        }
        function O(e, t, n) {
            return cur.viewAsBox ? cur.viewAsBox() : (0,
            c.checkEvent)(n) ? void 0 : (window.stManager.add([window.jsc("web/photoview.js"), "photoview.css"], (function() {
                Photoview.showAlbum(e, t)
            }
            )),
            !1)
        }
        function I(e, t, n) {
            return cur.viewAsBox ? cur.viewAsBox() : (0,
            c.checkEvent)(n) ? void 0 : (window.stManager.add([window.jsc("web/photoview.js"), "photoview.css"], (function() {
                Photoview.showTagged(e, t)
            }
            )),
            !1)
        }
        function M(e, t, n) {
            return cur.viewAsBox ? cur.viewAsBox() : (0,
            c.checkEvent)(n) ? void 0 : (window.stManager.add([window.jsc("web/video.js"), "video.css", window.jsc("web/photoview.js"), "photoview.css"], (function() {
                Photoview.showVideoTags(e, t)
            }
            )),
            !1)
        }
        function R(e) {
            var t = e.shift();
            if (window.Videoview && Videoview.playerCallback[t])
                return Videoview.playerCallback[t].apply(Videoview, e);
            throw Error("Unregistered player callback: " + t)
        }
        function L(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
            return (0,
            s.curBox)() || (0,
            _.showBox)("al_market.php", {
                act: "show_attach_product_box"
            }, {
                onDone: function(e, n) {
                    window.MarketProductBox.init(e, n, t)
                }
            }),
            (0,
            c.cancelEvent)(e)
        }
        function k(e, t, n) {
            var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {};
            if ((0,
            c.checkEvent)(n))
                return !0;
            if (0 !== cur.gid && (e.gid = cur.gid),
            e.location_owner_id = cur.oid,
            window.wkcur && wkcur.shown && wkcur.wkRaw === e.w && e.w && !e.reply)
                return WkView.restoreLayer(r),
                (0,
                c.cancelEvent)(n);
            (window.wkcur && wkcur.hideTitle || e.hide_title) && (r.hide_title = e.hide_title = 1);
            var i = r.stat || [window.jsc("web/wkview.js"), "wkview.css", "wk.css", window.jsc("web/wk.js")];
            t && i.push(window.jsc("web/wk_editor.js"), "wk_editor.css");
            var o, s, _ = {
                stat: i,
                loader: !r.noloader,
                onDone: function(e, t, i, o) {
                    WkView.show(e, t, (0,
                    a.extend)(i, r), o, n)
                },
                onFail: function(e) {
                    return (0,
                    a.isFunction)(r.onFail) ? r.onFail(e) : WkView.showError(e)
                }
            };
            if (nav.objLoc.claim && (e.claim = nav.objLoc.claim),
            nav.objLoc.tariff_act && (e.tariff_act = nav.objLoc.tariff_act),
            e.w && "/query" === e.w.substr(-6)) {
                var l = (0,
                a.clone)(nav.objLoc);
                delete l[0],
                delete l.w,
                e.query = JSON.stringify(l)
            }
            r.preload && (0,
            a.extend)(_, r.preload),
            r.ads_params && (o = r.ads_params,
            (s = nav.getPostParams(n && n.target)).post_click_url && (o._post_click_url = s.post_click_url));
            var u = "";
            "feed" === cur.module && window.feed ? u = window.feed.getModuleRef() : "public" === cur.module ? u = "club" : "profile" === cur.module && (u = "profile"),
            r.customRef && (u = r.customRef);
            var d = ""
              , p = (0,
            a.clone)(nav.objLoc);
            return p.dmcah && (d = p.dmcah),
            ajax.post("wkview.php", (0,
            a.extend)({
                act: "show",
                loc: nav.objLoc[0],
                is_znav: r.isZnav,
                dmcah: d,
                ref: u
            }, e, o, cur.getWkviewOpts && cur.getWkviewOpts()), _),
            (0,
            c.cancelEvent)(n)
        }
        function B(e, t, n, r, i, o) {
            o || (o = {});
            var s = !1
              , c = (0,
            a.extend)({
                w: "app" + t
            }, o);
            if (n = (0,
            a.intval)(n),
            r && ((0,
            a.isObject)(r) ? c = (0,
            a.extend)(c, r) : c.ref = r),
            o.layer && (s = !0),
            (cur.apps && cur.apps[t] || !n) && !s) {
                delete c.w;
                var _ = "app" + t + (i ? "_" + i : "")
                  , l = nav.objLoc && !nav.objLoc[1] && nav.objLoc[0] === _;
                return nav.go("/" + _ + nav.toStr(c), e, {
                    nocur: l
                })
            }
            i && (c.mid = i);
            var u = {
                stat: [window.jsc("web/wkview.js"), "wkview.css", "apps.js", "apps.css"]
            };
            o.queue && (u.queue = 1);
            var d = cur.module;
            if (u.onHide = ()=>{
                cur.module = d,
                o.onHide && o.onHide()
            }
            ,
            o.urlHash && (c.url_hash = o.urlHash),
            c["#"]) {
                var p = c["#"];
                delete c["#"],
                u.onLoaded = ()=>{
                    nav.setLoc((0,
                    a.extend)(nav.objLoc, {
                        "#": p
                    }))
                }
            }
            return k(c, !1, e, u)
        }
        function x(e, t, n, r, i) {
            if (!vk.widget)
                return (0,
                o.show)(boxLoader),
                (0,
                o.show)(boxLayerWrap),
                (0,
                s.boxRefreshCoords)(boxLoader),
                window.stManager.add([window.jsc("web/podcast.js")], (function() {
                    Podcast.show(e, t, null, r, i)
                }
                )),
                n && (0,
                c.cancelEvent)(n)
        }
        function N(e, t, n, r) {
            return window.stManager.add([window.jsc("web/podcast.js")], (function() {
                Podcast.goToTime(e, t, n, r)
            }
            )),
            n && (0,
            c.cancelEvent)(n)
        }
        function U(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
            e && !vk.isBanned && window.stManager.add([window.jsc("web/article_layer.js"), "article.css"], (function() {
                window.ArticleLayer.prepare(e, n, t)
            }
            ))
        }
        function W() {
            return !(l.browser.msie && parseInt(l.browser.version) <= 11)
        }
        function F(e, t, n) {
            var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}
              , i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {};
            if (cur.articleEditorLayer)
                cur.articleEditorLayer.openById(e, t);
            else {
                window.initialFCCollapse = "article";
                var o = [window.jsc("web/article_editor_layer.js"), "article.css", "article_editor.css"];
                window.stManager.add(o, (()=>{}
                ));
                var a = Object.assign({
                    act: "open_editor",
                    article_owner_id: e,
                    article_id: t,
                    from_post_convert: n ? 1 : 0,
                    post_data_medias: n ? n.medias.join(",") : ""
                }, r);
                ajax.post("al_articles.php", a, {
                    loader: !0,
                    onFail: function(e) {
                        return "app" === i.from ? i.errorHandler && i.errorHandler("ServerError: Can't open article editor.") : (0,
                        _.showFastBox)((0,
                        d.getLang)("global_error"), e),
                        window.SAKIntegration && window.SAKIntegration.isIntegrated && window.SAKIntegration.sendMessage("error", {
                            error: e
                        }),
                        !0
                    },
                    onDone: function(e, t, r, a) {
                        window.WkView && WkView.hide(),
                        window.boxQueue && boxQueue.hideAll(),
                        n && (a.postData = n),
                        a.articleOwnerId ? window.stManager.add(o, (function() {
                            if (layers.fullhide = function() {
                                cur.articleEditorLayer && cur.articleEditorLayer.hide()
                            }
                            ,
                            window.AuthorPage && window.AuthorPage.isOpen() && (cur.needAuthorPageHardBack = !0),
                            cur.articleEditorLayer = new ArticleEditorLayer(e,t,r,a,(()=>delete cur.articleEditorLayer)),
                            "app" === i.from) {
                                var n = e=>t=>{
                                    t.type = e,
                                    "publish" !== e && "close" !== e || cur.articleEditorLayer && cur.articleEditorLayer.hide(),
                                    i.eventHandler && i.eventHandler(t)
                                }
                                ;
                                cur.articleVkAppEditor = {
                                    onSaveDraft: n("draft"),
                                    onPublish: n("publish"),
                                    onClose: n("close")
                                }
                            }
                        }
                        )) : nav.change({
                            z: !1
                        })
                    }
                })
            }
        }
        function K(e, t, n, r) {
            var c = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]
              , l = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : ""
              , u = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : ""
              , p = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : "";
            ajax.post("al_bookmarks.php", {
                act: "bookmark",
                owner_id: e,
                object_id: t,
                type: n,
                state: c ? 1 : 0,
                hash: r,
                item_access_hash: l,
                ref: u || cur.module,
                track_code: p
            }, {
                onDone: (n,r,c,l)=>{
                    if (n && !vk.widget) {
                        (0,
                        s.showDoneBox)(n, {
                            tooltipHandler: function(n) {
                                var s = (0,
                                o.geByClass1)("bookmarks_tag_set", n);
                                if (s && !(0,
                                i.isEmpty)(r)) {
                                    var u = [];
                                    (0,
                                    a.each)(r, ((e,t)=>{
                                        u.push(t)
                                    }
                                    )),
                                    u.sort(((e,t)=>e.order - t.order));
                                    for (var p = '<div class="bookmarks_tags_list">', h = 0; h < u.length; h++) {
                                        var m = u[h];
                                        p += `<div class="bookmarks_tags_list_item" data-id="${m.id}">${m.name}</div>`
                                    }
                                    p += "</div>",
                                    (p = (0,
                                    o.se)(p)).addEventListener("click", (n=>{
                                        var r = (0,
                                        o.domClosest)("bookmarks_tags_list_item", n.target);
                                        if (r) {
                                            var i = (0,
                                            o.domData)(r, "id")
                                              , s = (0,
                                            o.toggleClass)(r, "bookmarks_tags_list_item--selected");
                                            ajax.post("al_bookmarks.php", {
                                                act: "set_tag",
                                                item_type: c,
                                                item_oid: e,
                                                item_id: t,
                                                hash: l,
                                                tag_id: i,
                                                is_tagged: (0,
                                                a.intval)(!s),
                                                is_from_snackbar: !0
                                            }, {
                                                onFail: e=>((0,
                                                _.showFastBox)((0,
                                                d.getLang)("global_error"), e),
                                                !0)
                                            })
                                        }
                                    }
                                    )),
                                    cur.setBookmarksTagTooltip && cur.setBookmarksTagTooltip.destroy(),
                                    window.stManager.add(["ui_common.css", "ui_common.js"], (()=>{}
                                    ));
                                    var f = new ElementTooltip(s,{
                                        content: p,
                                        appendToParent: !0,
                                        cls: "bookmarks_tag_set_tt",
                                        autoShow: !0,
                                        offset: [0, -36],
                                        onFirstTimeShow: e=>{
                                            window.stManager.add(["ui_common.css", "ui_common.js"], (()=>{
                                                cur.setBookmarksTagTooltipScrolls || (cur.setBookmarksTagTooltipScrolls = []),
                                                cur.setBookmarksTagTooltipScrolls.push(new uiScroll((0,
                                                o.domFC)(e),{
                                                    theme: "dark"
                                                }))
                                            }
                                            ))
                                        }
                                        ,
                                        onShow: function() {
                                            Notifier.freezeEvents(),
                                            curNotifier.tooltipShown = !0
                                        },
                                        onHide: function() {
                                            curNotifier.tooltipShown = !1,
                                            curNotifier.unfreezeAfterTooltipHide && Notifier.unfreezeEvents()
                                        }
                                    });
                                    cur.destroy.push((()=>{
                                        cur.setBookmarksTagTooltipScrolls && (cur.setBookmarksTagTooltipScrolls.forEach((function(e) {
                                            e.destroy()
                                        }
                                        )),
                                        delete cur.setBookmarksTagTooltipScrolls),
                                        f.destroy()
                                    }
                                    ))
                                }
                            },
                            link: "/bookmarks"
                        })
                    }
                }
            })
        }
        function V(e, t, n, r, i, s) {
            var c = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : "";
            if ((0,
            a.isObject)(window.cur) && (0,
            a.isFunction)(window.cur.viewAsBox))
                return window.cur.viewAsBox();
            var _ = q(e);
            e.innerHTML = _ ? (0,
            o.domData)(e, "add") : (0,
            o.domData)(e, "remove"),
            (0,
            o.domData)(e, "state", _ ? 0 : 1),
            K(t, n, r, i, _, s, c)
        }
        function H(e, t, n, r, i, o, a) {
            return t && $(t, a = q(t)),
            K(n, r, i, o, a),
            document.querySelectorAll(`._article_${n}_${r}`).forEach((e=>{
                $(e.querySelector("._bookmark_btn"), a)
            }
            )),
            (0,
            c.cancelEvent)(e)
        }
        function j(e, t, n) {
            var r = q(t);
            return $(t, r),
            ajax.post("al_bookmarks.php", {
                act: "bookmark_link",
                state: r ? 1 : 0,
                hash: n,
                url: (0,
                o.domData)(t, "link-url"),
                img: (0,
                o.domData)(t, "link-img"),
                title: (0,
                o.domData)(t, "link-title"),
                ref: cur.module,
                track_code: (0,
                o.domData)(t, "track-code")
            }, {
                onDone: e=>{
                    e && !vk.widget && (0,
                    s.showDoneBox)(e)
                }
            }),
            (0,
            c.cancelEvent)(e)
        }
        function G(e, t, n, r, i) {
            return window.stManager.add([window.jsc("web/podcast.js")], (function() {
                Podcast.toggleFave(e, t, n, i)
            }
            )),
            r && (0,
            c.cancelEvent)(r)
        }
        function q(e) {
            return parseInt(e.dataset.state)
        }
        function $(e, t) {
            e.dataset.state = String(t ? 0 : 1),
            e.innerHTML = t ? (0,
            y.getIcon24FavoriteOutline)().icon : (0,
            w.getIcon24Favorite)().icon
        }
        function Y(e, t, n, r, i, o) {
            var a = q(t);
            return $(t, a),
            K(n, r, i, o, a),
            a || (0,
            E.sendNarrativeAnalytic)(E.NarrativeAnalyticEventType.addToBookmarks, {
                ownerId: n,
                id: r
            }, window.cur.module),
            (0,
            c.cancelEvent)(e)
        }
        function z(e, t, n, r) {
            var i = q(t);
            return $(t, i),
            ajax.post("fave.php", {
                act: i ? "a_delete_group" : "a_add_group",
                gid: n,
                hash: r
            }, {
                onDone: (e,t)=>{
                    i || vk.widget || (0,
                    s.showDoneBox)(t)
                }
            }),
            (0,
            c.cancelEvent)(e)
        }
        function X(e, t, n, r, i, o) {
            var a = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : ""
              , s = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : ""
              , _ = q(t);
            return $(t, _),
            K(n, r, i, o, _, a, "", s),
            (0,
            c.cancelEvent)(e)
        }
        function Q(e, t, n, r) {
            return (0,
            _.showBox)("like.php", {
                act: "publish_box",
                object: "audio_playlist" + t + "_" + n,
                list: r
            }, {
                stat: ["wide_dd.js", "wide_dd.css", window.jsc("web/sharebox.js")]
            }),
            (0,
            c.cancelEvent)(e)
        }
        function J() {
            return window.ap = window.ap || new AudioPlayer,
            window.ap
        }
        function Z(e, t) {
            var n = e + "_" + t
              , r = (0,
            o.geByClass1)("_audio_row_" + n);
            AudioUtils.deleteAudio(r, AudioUtils.getAudioFromEl(r, !0)),
            cur.claimWarning && cur.claimWarning.hide()
        }
        function ee() {
            window.TopAudioPlayer.init()
        }
        var te = {
            loaded: !1,
            events: {
                on(e, t) {
                    window.stManager.add("voice_message_player.js", (()=>{
                        window.AudioMessagePlayer.events.on(e, t)
                    }
                    ))
                }
            },
            togglePlay: function(e) {
                window.stManager.add("voice_message_player.js", (()=>{
                    window.AudioMessagePlayer.togglePlay(e)
                }
                ))
            },
            toggleTranscript: function(e) {
                window.stManager.add("voice_message_player.js", (()=>{
                    window.AudioMessagePlayer.toggleTranscript(e)
                }
                ))
            },
            detachPlayer: function(e) {
                window.stManager.add("voice_message_player.js", (()=>{
                    window.AudioMessagePlayer.detachPlayer(e)
                }
                ))
            }
        };
        function ne(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            e && e.tt && e.tt.hide && e.tt.hide({
                fasthide: 1
            });
            var i = e
              , o = !1;
            if (re() && ArticleLayer.isStandalone() && (o = !0),
            i.tagName && "a" === i.tagName.toLowerCase() && !i.getAttribute("target") && !nav.baseBlank) {
                var s, c = i.getAttribute("hrefparams");
                c && (n.params = (0,
                a.extend)(n.params || {}, (0,
                p.fromQueryString)(c))),
                i = i.href || "",
                ((i = (0,
                r.stripVKSiteURLOrigin)(i)).match(/#$/) || !(s = i.match(/^\/(.*?)(\?|#|$)/)) || (s = s[1]).indexOf(".php") > 0 || s.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images|utils|\.js|js\/|\.css|css\/)/)) && (o = !0)
            }
            if (o) {
                var _ = !!(n && n.params && n.params._post && n.params._post_click_type);
                if (!_)
                    return !0;
                e.setAttribute("data-change-location-with-post-away", 1),
                i = e
            }
            return nav.go(i, t, n)
        }
        function re() {
            return window.ArticleLayer && window.ArticleLayer.isShown()
        }
        function ie(e, t, n, r, i) {
            var o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : {}
              , s = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : "";
            if (n || s) {
                var l = `donut_payment${n}`
                  , u = r
                  , d = (0,
                _.showBox)("al_donut.php", C({
                    act: "subscribe_popup",
                    ownerId: n,
                    ownerDomain: s,
                    source: r,
                    hash: i,
                    type: o.type
                }, o.params), {
                    stat: ["donut_subscribe_popup.css", window.jsc("web/donut_subscribe_popup.js")],
                    params: {
                        width: 450,
                        hideButtons: !0,
                        containerClass: "DonutSubscribePopup",
                        onDestroy: ()=>{
                            if (window.DonutSubscribePopup && window.DonutSubscribePopup.onDestroy(),
                            !o.fromSnippet) {
                                (0,
                                c.removeEvent)(window, "popstate", p);
                                var e = nav.objLoc
                                  , t = e.w
                                  , n = e.source;
                                t === l && u === n && (delete nav.objLoc.w,
                                delete nav.objLoc.source,
                                nav.setLoc(nav.objLoc))
                            }
                        }
                    },
                    onDone: (e,t)=>{
                        if (window.DonutSubscribePopup.init({
                            ownerId: n || t.owner_id,
                            source: r,
                            type: o.type,
                            onSuccessPayment: o.onSuccessPayment
                        }, e, t),
                        !o.fromSnippet && "subscribe" === o.type) {
                            (0,
                            c.addEvent)(window, "popstate", p);
                            var i = (0,
                            a.extend)(nav.objLoc, {
                                w: l,
                                source: r
                            });
                            nav.setLoc(i)
                        }
                    }
                    ,
                    onFail: e=>{
                        if (e && "string" == typeof e)
                            return "group_doesnt_exists" === e && o.onFailCallback && "function" == typeof o.onFailCallback ? (o.onFailCallback(),
                            d.hide(),
                            !0) : (d.hide(),
                            (0,
                            g.showErrorBox)(e),
                            !0)
                    }
                }, t);
                (0,
                c.cancelEvent)(t)
            }
            function p() {
                d.hide()
            }
        }
        function oe() {
            (0,
            m.statlogsValueEvent)("corona_status_stat", "open_app")
        }
        function ae(e) {
            e && (0,
            f.saveStatlogEvents)({
                name: "image_status",
                value: e,
                keys: ["popup_action"]
            })
        }
        function se(e) {
            var t = e.hash
              , n = new _.MessageBox({
                titleTransparent: !0,
                noControls: !0,
                hideButtons: !0,
                onHide() {
                    window.ajax.post("al_index.php", {
                        act: "a_web_dark_theme_guide_modal_hide",
                        hash: t
                    })
                }
            })
              , r = (0,
            o.se)(`\n    <div class="DarkThemeGuideModal">\n      <div class="DarkThemeGuideModal__title">${(0,
            d.getLang)("global_dark_theme_guide_modal_title")}</div>\n      <div class="DarkThemeGuideModal__text">${(0,
            d.getLang)("global_dark_theme_guide_modal_text")}</div>\n      <div class="DarkThemeGuideModal__action"></div>\n      <div class="DarkThemeGuideModal__action"></div>\n    </div>\n  `)
              , i = b.FlatButton.render({
                children: (0,
                d.getLang)("global_dark_theme_guide_modal_set_auto_button"),
                appearance: b.FlatButtonAppearance.PRIMARY,
                size: b.FlatButtonSize.M
            })
              , a = b.FlatButton.render({
                children: (0,
                d.getLang)("global_dark_theme_guide_modal_settings_button"),
                appearance: b.FlatButtonAppearance.TERTIARY,
                size: b.FlatButtonSize.M
            })
              , s = r.querySelector(".DarkThemeGuideModal__action");
            s.append(i),
            s.nextElementSibling.append(a),
            n.content(r),
            n.show(),
            i.onclick = ()=>{
                n.hide()
            }
            ,
            a.onclick = ()=>{
                n.hide(),
                window.nav.go("/settings")
            }
        }
    }
    ,
    998312: (e,t,n)=>{
        "use strict";
        n.d(t, {
            mobileOnlineTip: ()=>c,
            pageVerifiedTip: ()=>_,
            audioShowActionTooltip: ()=>l,
            mentionOver: ()=>u,
            bookmarkTooltip: ()=>d,
            showCovidStatusTooltip: ()=>p
        });
        n(21466);
        var r = n(376852)
          , i = n(695724)
          , o = n(315544)
          , a = n(479957)
          , s = n(19331);
        function c(e, t) {
            var n = t.asrtl ? 0 : t.right ? 289 : 35
              , i = t.asrtl ? " mobile_tt_asrtl" : t.right ? " mobile_tt_right" : "";
            return (0,
            r.showTooltip)(e, {
                url: "al_login.php",
                params: {
                    act: "mobile_tt",
                    mid: t.mid,
                    was: t.was
                },
                slide: 15,
                ajxdt: 200,
                showdt: 200,
                hidedt: 200,
                forcetoup: t.forcetoup,
                toup: !1,
                dir: "auto",
                asrtl: t.asrtl,
                appendParentCls: t.appendParentCls,
                shift: [n, 8, 7],
                className: "mobile_tt" + i
            })
        }
        function _(e, t) {
            return (0,
            r.showTooltip)(e, {
                url: "/al_page.php",
                params: {
                    act: "verified_tt",
                    type: t.type,
                    oid: t.oid,
                    force_new_tab: t.forceNewTab ? 1 : 0
                },
                slide: 15,
                ajxdt: 200,
                showdt: 200,
                hidedt: 200,
                dir: "auto",
                shift: t.shift && t.shift.length ? t.shift : [95, 5, 7],
                className: "verified_tt"
            })
        }
        function l(e, t, n) {
            if (!cur._addRestoreInProgress) {
                var a = (0,
                o.gpeByClass)("_audio_row", e)
                  , s = AudioUtils.getAudioFromEl(a, !0);
                if (s) {
                    var c = (0,
                    o.domData)(e, "action")
                      , _ = AudioUtils.getRowActionName(c, s, a)
                      , l = {
                        text: ()=>_,
                        black: 1,
                        shift: t || [7, 4, 0],
                        needLeft: !0,
                        forcetodown: n,
                        noZIndex: !0
                    };
                    (0,
                    i.each)(["_im_mess_stack", "top_notify_wrap", "_ape_audio_item", "wk_history_audio_content"], (function(t, n) {
                        if ((0,
                        o.gpeByClass)(n, e))
                            return l.appendParentCls = n,
                            !1
                    }
                    )),
                    (0,
                    o.gpeByClass)("_im_mess_stack", e) && (l.shift = [7, 10, 0],
                    l.noZIndex = !0);
                    var u = e.closest(".CatalogBlock");
                    u && (l.appendEl = u),
                    (0,
                    r.showTooltip)(e, l)
                }
            }
        }
        function u(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            if (!(0,
            s.partConfigEnabled)("mail_history_mention_popover") || "im" !== window.cur.module || window.TopNotifier.shown() || window.layers.visible)
                (0,
                r.showTooltip)(e, {
                    url: "al_wall.php",
                    params: {
                        act: "mention_tt",
                        mention: e.getAttribute("mention_id"),
                        from: "wall"
                    },
                    shift: t.shift || [52, 7, 7],
                    hidedt: t.hidedt || 500,
                    showdt: 500,
                    needLeft: t.needLeft,
                    slide: 15,
                    checkLeft: !0,
                    reverseOffset: t.reverseOffset || 112,
                    dir: "auto",
                    appendEl: t.appendEl || (0,
                    o.domClosest)("im-page-history-w", e) || (0,
                    o.domClosest)("rb_box_wrap", e) || (0,
                    o.domClosest)("wk_cont", e) || (0,
                    o.domClosest)("scroll_fix_wrap", e)
                });
            else {
                var n, i = e.getAttribute("mention_id").match(/^(id|club)(\d+)$/);
                if (!i)
                    return;
                switch (i[1]) {
                case "id":
                    n = parseInt(i[2], 10);
                    break;
                case "club":
                    n = -parseInt(i[2], 10)
                }
                if (!n)
                    return;
                window.reforgedME && window.reforgedME.profileInfo && window.reforgedME.profileInfo.mountProfileInfo({
                    peerId: n,
                    targetElement: e
                })
            }
        }
        function d(e) {
            var t = "";
            (0,
            o.gpeByClass)("_im_mess_stack", e) ? t = "_im_mess_stack" : (0,
            o.gpeByClass)("wall_text", e) && (t = "scroll_fix_wrap"),
            (0,
            r.showTooltip)(e, {
                className: "bookmarks_tt ",
                shift: [32, 8],
                text: ()=>"1" === (0,
                o.domData)(e, "state") ? (0,
                o.domData)(e, "remove") : (0,
                o.domData)(e, "add"),
                black: 1,
                appendParentCls: t
            })
        }
        function p(e, t) {
            (0,
            r.showTooltip)(e, {
                text: t,
                dir: "up",
                forcetodown: !0,
                hidedt: 300,
                hasover: !0,
                center: !0,
                shift: [-2, 6],
                onShowStart: ()=>(0,
                a.statlogsValueEvent)("corona_status_stat", "show_tooltip")
            })
        }
    }
    ,
    676821: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initFlashUtils: ()=>_,
            toggleFlash: ()=>u,
            renderFlash: ()=>d
        });
        n(751876),
        n(66108),
        n(296253),
        n(59357);
        var r = n(695724)
          , i = n(315544)
          , o = n(49535)
          , a = n(376567)
          , s = n(726271)
          , c = n(668040);
        function _() {
            var e = "ShockwaveFlash.ShockwaveFlash"
              , t = [0, 0, 0]
              , n = "embed"
              , i = 'type="application/x-shockwave-flash" '
              , o = e=>e.toString().replace("&", "&amp;").replace('"', "&quot;");
            if (navigator.plugins && navigator.mimeTypes && navigator.mimeTypes.length) {
                var c = navigator.plugins["Shockwave Flash"];
                if (c && c.description)
                    for (var _ = c.description.replace(/([a-zA-Z]|\s)+/, "").replace(/(\s+r|\s+b[0-9]+)/, ".").split("."), l = 0; l < 3; ++l)
                        t[l] = _[l] || 0
            } else {
                if (_ua.indexOf("Windows CE") >= 0)
                    for (var u = !0, d = 6; u; )
                        try {
                            ++d,
                            u = new ActiveXObject(e + "." + d),
                            t[0] = d
                        } catch (e) {}
                else
                    try {
                        t = new ActiveXObject(e + ".7").GetVariable("$version").split(" ")[1].split(",")
                    } catch (e) {}
                n = "object",
                i = 'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '
            }
            s.browser.flashwrap = "embed" === n ? function(e, t) {
                t = (0,
                r.extend)({
                    id: e.id,
                    name: e.id,
                    width: e.width,
                    height: e.height,
                    style: e.style,
                    preventhide: e.preventhide
                }, t),
                s.browser.flash >= e.version ? t.src = e.url : t.src = e.express;
                var n = [];
                for (var a in t)
                    if (t.hasOwnProperty(a)) {
                        var c = t[a];
                        null != c && n.push(a + '="' + o(c) + '" ')
                    }
                return `<embed ${i + n.join("")}/>`
            }
            : function(e, t) {
                s.browser.flash >= e.version ? t.movie = e.url : t.movie = e.express;
                var n = {
                    id: e.id,
                    width: e.width,
                    height: e.height,
                    style: e.style,
                    preventhide: e.preventhide
                }
                  , r = [];
                for (var a in n)
                    if (n.hasOwnProperty(a)) {
                        var c = n[a];
                        null != c && r.push(a + '="' + o(c) + '" ')
                    }
                var _ = [];
                for (var l in t)
                    if (t.hasOwnProperty(l)) {
                        var u = t[l];
                        null != u && _.push('<param name="' + l + '" value="' + o(u) + '" />')
                    }
                return `<object ${i + r.join("")}>${_.join("")}</object>`
            }
            ,
            t[0] < 7 && (t = [0, 0, 0]),
            s.browser.flash = (0,
            r.intval)(t[0]),
            s.browser.flashfull = {
                major: s.browser.flash,
                minor: (0,
                r.intval)(t[1]),
                rev: (0,
                r.intval)(t[2])
            },
            (0,
            a.setCookie)("remixflash", `${(0,
            r.intval)(t[0])}.${(0,
            r.intval)(t[1])}.${(0,
            r.intval)(t[2])}`, 30)
        }
        var l = 0;
        function u(e, t) {
            if (clearTimeout(l),
            t > 0)
                l = setTimeout((()=>u(e, 0)), t);
            else {
                var n = e ? "visible" : "hidden";
                (0,
                o.triggerEvent)(document, e ? "unblock" : "block");
                var a = function(t, r) {
                    r.getAttribute("preventhide") || "internal/link" === r.getAttribute("type") || ("flash_app" === r.id && s.browser.msie ? e ? (0,
                    i.setStyle)(r, {
                        position: "static",
                        top: 0
                    }) : (0,
                    i.setStyle)(r, {
                        position: "absolute",
                        top: "-5000px"
                    }) : r.style.visibility = n)
                };
                (0,
                r.each)((0,
                i.geByTag)("embed"), a),
                (0,
                r.each)((0,
                i.geByTag)("object"), a)
            }
        }
        function d(e, t, n, o) {
            if (!t.url || !t.id)
                return !1;
            var a = (t = (0,
            r.extend)({
                version: 9,
                width: 1,
                height: 1
            }, t)).url;
            return stVersions[a] || (stVersions[a] = ""),
            __debugMode && stVersions[a] < 1e6 && (stVersions[a] += (0,
            r.irand)(1e6, 2e6)),
            stVersions[a] && (t.url += (-1 === t.url.indexOf("?") ? "?" : "&") + "_stV=" + stVersions[a]),
            n = (0,
            r.extend)({
                quality: "high",
                flashvars: (0,
                c.toQueryString)(o)
            }, n),
            !(s.browser.flash < t.version) && ((0,
            i.ge)(e).innerHTML = s.browser.flashwrap(t, n),
            !0)
        }
    }
    ,
    635676: (e,t,n)=>{
        "use strict";
        n.d(t, {
            Fx: ()=>a,
            animate: ()=>s,
            cubicBezier: ()=>c,
            fadeTo: ()=>_,
            genFx: ()=>u,
            slideDown: ()=>d,
            slideUp: ()=>p,
            slideToggle: ()=>h,
            fadeIn: ()=>m,
            fadeOut: ()=>f,
            fadeToggle: ()=>g,
            getRGB: ()=>v,
            getColor: ()=>E,
            animateCount: ()=>y
        });
        n(59357),
        n(66108),
        n(296253),
        n(21466);
        var r = n(695724)
          , i = n(315544)
          , o = n(726271)
          , a = {
            Transitions: {
                linear: (e,t,n,r)=>n * e / r + t,
                sineInOut: (e,t,n,r)=>-n / 2 * (Math.cos(Math.PI * e / r) - 1) + t,
                halfSine: (e,t,n,r)=>n * Math.sin(Math.PI * (e / r) / 2) + t,
                easeOutBack: function(e, t, n, r) {
                    var i = 1.70158;
                    return n * ((e = e / r - 1) * e * ((i + 1) * e + i) + 1) + t
                },
                easeInCirc: (e,t,n,r)=>-n * (Math.sqrt(1 - (e /= r) * e) - 1) + t,
                easeOutCirc: (e,t,n,r)=>n * Math.sqrt(1 - (e = e / r - 1) * e) + t,
                easeInQuint: (e,t,n,r)=>n * (e /= r) * e * e * e * e + t,
                easeOutQuint: (e,t,n,r)=>n * ((e = e / r - 1) * e * e * e * e + 1) + t,
                easeOutCubic: (e,t,n,r)=>n * ((e = e / r - 1) * e * e + 1) + t,
                swiftOut: (e,t,n,r)=>n * c(.4, 0, .22, 1, e / r, 4 / r) + t
            },
            Attrs: [["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"], ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"], ["opacity", "left", "top"]],
            Timers: [],
            TimerId: null
        };
        function s(e, t, n, a) {
            if (e = (0,
            i.ge)(e)) {
                var s, c = (0,
                r.isFunction)(a) ? a : ()=>{}
                , _ = (0,
                r.extend)({}, "object" == typeof n ? n : {
                    duration: n,
                    onComplete: c
                }), u = {}, d = {}, p = (0,
                i.isVisible)(e);
                _.orig = {},
                (t = (0,
                r.clone)(t)).discrete && (_.discrete = 1,
                delete t.discrete),
                o.browser.iphone && (_.duration = 0);
                var h = (0,
                i.data)(e, "tween")
                  , m = p ? "hide" : "show";
                for (var f in h && h.isTweening && (_.orig = (0,
                r.extend)(_.orig, h.options.orig),
                h.stop(!1),
                h.options.show ? m = "hide" : h.options.hide && (m = "show")),
                t)
                    if (t.hasOwnProperty(f)) {
                        if (!h && ("show" === t[f] && p || "hide" === t[f] && !p))
                            return _.onComplete.call(this, e);
                        if ("height" !== f && "width" !== f || !e.style || (t.overflow || (void 0 === _.orig.overflow && (_.orig.overflow = (0,
                        i.getStyle)(e, "overflow")),
                        e.style.overflow = "hidden"),
                        (0,
                        i.hasClass)(e, "inl_bl") || "TD" === e.tagName || (e.style.display = "block")),
                        /show|hide|toggle/.test(t[f]))
                            if ("toggle" === t[f] && (t[f] = m),
                            "show" === t[f]) {
                                s = 0,
                                _.show = !0,
                                void 0 === _.orig[f] && (_.orig[f] = (0,
                                i.getStyle)(e, f, !1) || "",
                                (0,
                                i.setStyle)(e, f, 0));
                                var g = e.style[f];
                                e.style[f] = _.orig[f],
                                t[f] = parseFloat((0,
                                i.getStyle)(e, f, !0)),
                                e.style[f] = g,
                                "height" === f && o.browser.msie && !t.overflow && (e.style.overflow = "hidden")
                            } else
                                void 0 === _.orig[f] && (_.orig[f] = (0,
                                i.getStyle)(e, f, !1) || ""),
                                _.hide = !0,
                                t[f] = 0
                    }
                return _.show && !p && (0,
                i.show)(e),
                h = new l(e,_),
                (0,
                r.each)(t, (function(t, n) {
                    if (/backgroundColor|borderBottomColor|borderLeftColor|borderRightColor|borderTopColor|color|borderColor|outlineColor/.test(t)) {
                        if (s = E(e, "borderColor" === t ? "borderTopColor" : t),
                        n = v(n),
                        void 0 === s)
                            return
                    } else {
                        var o = n.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/);
                        o && (n = parseFloat(o[2]),
                        o[1] && (n = ("-=" == o[1] ? -1 : 1) * n + n)),
                        0 != (s = h.cur(t, !0)) || "width" !== t && "height" !== t || (s = 1),
                        "opacity" === t && n > 0 && !p && ((0,
                        i.setStyle)(e, "opacity", 0),
                        s = 0,
                        (0,
                        i.show)(e))
                    }
                    (s != n || (0,
                    r.isArray)(s) && s.join(",") === n.join(",")) && (u[t] = s,
                    d[t] = n)
                }
                )),
                h.start(u, d),
                (0,
                i.data)(e, "tween", h),
                h
            }
        }
        function c(e, t, n, r, i, o) {
            var a, s, c = function(t) {
                var r = 1 - t;
                return 3 * r * r * t * e + 3 * r * t * t * n + t * t * t
            }, _ = function(e) {
                var n = 1 - e;
                return 3 * n * n * e * t + 3 * n * e * e * r + e * e * e
            }, l = function(t) {
                var r = 1 - t;
                return 3 * (2 * (t - 1) * t + r * r) * e + 3 * (-t * t * t + 2 * r * t) * n
            }, u = i;
            for (a = u,
            s = 0; s < 8; s++) {
                var d = c(a) - u;
                if (Math.abs(d) < o)
                    return _(a);
                var p = l(a);
                if (Math.abs(p) < 1e-6)
                    break;
                a -= d / p
            }
            var h = 0
              , m = 1;
            if ((a = u) < h)
                return _(h);
            if (a > m)
                return _(m);
            for (; h < m; ) {
                var f = c(a);
                if (Math.abs(f - u) < o)
                    return _(a);
                u > f ? h = a : m = a,
                a = .5 * (m - h) + h
            }
            return _(a)
        }
        function _(e, t, n, r) {
            return s(e, {
                opacity: n
            }, t, r)
        }
        class l {
            constructor(e, t, n) {
                this.el = (0,
                i.ge)(e),
                this.name = n,
                this.options = (0,
                r.extend)({
                    onStep: ()=>{}
                    ,
                    onComplete: ()=>{}
                    ,
                    transition: t.transition || a.Transitions.sineInOut,
                    duration: 500
                }, t || {})
            }
            start(e, t) {
                this.from = e,
                this.to = t,
                this.time = (0,
                r.vkNow)(),
                this.isTweening = !0;
                var n = e=>this.step(e);
                return n.el = this.el,
                n() && a.Timers.push(n) && !a.TimerId && (a.TimerId = setInterval((function() {
                    for (var e = a.Timers, t = e.length, n = 0; n < t; n++)
                        e[n]() || (e.splice(n--, 1),
                        t--);
                    t || (clearInterval(a.TimerId),
                    a.TimerId = null)
                }
                ), 13)),
                this
            }
            stop(e) {
                for (var t = a.Timers, n = t.length - 1; n >= 0; n--)
                    t[n].el === this.el && (e && t[n](!0),
                    t.splice(n, 1));
                this.isTweening = !1
            }
            step(e) {
                var t = (0,
                r.vkNow)();
                if (!e && t < this.time + this.options.duration) {
                    for (var n in this.cTime = t - this.time,
                    this.now = {},
                    this.to)
                        if ((0,
                        r.isArray)(this.to[n])) {
                            for (var o = [], a = 0; a < 3; a++) {
                                if (void 0 === this.from[n] || void 0 === this.to[n])
                                    return !1;
                                o.push(Math.min(parseInt(this.compute(this.from[n][a], this.to[n][a])), 255))
                            }
                            this.now[n] = o
                        } else
                            this.now[n] = this.compute(this.from[n], this.to[n]),
                            this.options.discrete && (this.now[n] = (0,
                            r.intval)(this.now[n]));
                    return this.update(),
                    !0
                }
                return setTimeout(this.options.onComplete.bind(this, this.el), 10),
                this.now = (0,
                r.extend)(this.to, this.options.orig),
                this.update(),
                this.options.hide && (0,
                i.hide)(this.el),
                this.isTweening = !1,
                !1
            }
            compute(e, t) {
                var n = t - e;
                return this.options.transition(this.cTime, e, n, this.options.duration)
            }
            update() {
                for (var e in this.options.onStep(this.now),
                this.now)
                    (0,
                    r.isArray)(this.now[e]) ? (0,
                    i.setStyle)(this.el, e, "rgb(" + this.now[e].join(",") + ")") : void 0 !== this.el[e] ? this.el[e] = this.now[e] : (0,
                    i.setStyle)(this.el, e, this.now[e])
            }
            cur(e, t) {
                return null == this.el[e] || this.el.style && null != this.el.style[e] ? parseFloat((0,
                i.getStyle)(this.el, e, t)) || 0 : this.el[e]
            }
        }
        function u(e, t) {
            var n = {};
            return (0,
            r.each)(a.Attrs.concat.apply([], a.Attrs.slice(0, t)), (function() {
                n[this] = e
            }
            )),
            n
        }
        a.Base = l;
        var d = (e,t,n)=>s(e, u("show", 1), t, n)
          , p = (e,t,n)=>s(e, u("hide", 1), t, n)
          , h = (e,t,n)=>s(e, u("toggle", 1), t, n)
          , m = (e,t,n)=>s(e, {
            opacity: "show"
        }, t, n)
          , f = (e,t,n)=>s(e, {
            opacity: "hide"
        }, t, n)
          , g = (e,t,n)=>s(e, {
            opacity: "toggle"
        }, t, n);
        function v(e) {
            var t;
            return e && (0,
            r.isArray)(e) && 3 == e.length ? e : (t = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e)) ? [parseInt(t[1]), parseInt(t[2]), parseInt(t[3])] : (t = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e)) ? [2.55 * parseFloat(t[1]), 2.55 * parseFloat(t[2]), 2.55 * parseFloat(t[3])] : (t = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e)) ? [parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)] : (t = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e)) ? [parseInt(t[1] + t[1], 16), parseInt(t[2] + t[2], 16), parseInt(t[3] + t[3], 16)] : void 0
        }
        function E(e, t) {
            var n;
            do {
                if (0 === (n = (0,
                i.getStyle)(e, t)).indexOf("rgba") && (n = ""),
                "" != n && "transparent" !== n || "body" === e.nodeName.toLowerCase())
                    break;
                t = "backgroundColor",
                e = e.parentNode
            } while (e);
            return v(n)
        }
        function y(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            if (e = (0,
            i.ge)(e),
            t = n.str ? (0,
            r.trim)(t.toString()) || "" : (0,
            r.positive)(t),
            e)
                if (!o.browser.mobile || o.browser.safari_mobile || o.browser.android) {
                    var c = (0,
                    i.data)(e, "curCount")
                      , _ = (0,
                    i.data)(e, "nextCount");
                    if ("number" == typeof _ || n.str && "string" == typeof _)
                        t != _ && (0,
                        i.data)(e, "nextCount", t);
                    else if ("number" == typeof c || n.str && "string" == typeof c)
                        t !== c && (0,
                        i.data)(e, "nextCount", t);
                    else if (c = n.str ? (0,
                    r.trim)((0,
                    i.val)(e).toString()) || "" : (0,
                    r.positive)((0,
                    i.val)(e)),
                    "auto" === n.str && (n.str = !c.match(/^\d+$/) || !t.match(/^\d+$/),
                    n.str || (c = (0,
                    r.positive)(c),
                    t = (0,
                    r.positive)(t))),
                    c !== t) {
                        (0,
                        i.data)(e, "curCount", t);
                        var l, u, d = n.str ? c.length === t.length ? c < t : c.length < t.length : c < t, p = (d ? t : c).toString(), h = (d ? c : t).toString(), m = [], f = [];
                        for (n.str || (h = new Array(p.length - h.length + 1).join("0") + h),
                        l = 0,
                        u = p.length; l < u; l++) {
                            var g = p.charAt(l);
                            if (g !== h.charAt(l))
                                break;
                            m.push(g)
                        }
                        var v = p.substr(l)
                          , E = h.substr(l);
                        if (n.str) {
                            for (l = v.length; l > 0; l--) {
                                var w = v.charAt(l);
                                if (w !== E.charAt(l))
                                    break;
                                f.unshift(w)
                            }
                            f.length && (v = v.substr(0, l + 1),
                            E = E.substr(0, l + 1))
                        }
                        m = m.join("").replace(/\s$/, "&nbsp;"),
                        f = f.join("").replace(/^\s/, "&nbsp;"),
                        (0,
                        r.trim)((0,
                        i.val)(e)) || n.noSpaceIfEmpty || (0,
                        i.val)(e, "&nbsp;");
                        var b = e.clientHeight || e.offsetHeight;
                        (0,
                        i.val)(e, '<div class="counter_wrap inl_bl"></div>');
                        var C, T, D, A, S = e.firstChild, P = !0;
                        m.length && S.appendChild(C = (0,
                        i.ce)("div", {
                            className: "counter_const inl_bl",
                            innerHTML: m
                        })),
                        m.length || n.allowZero || (E = E.replace(/^0+/, "")),
                        E && ("0" !== E || n.allowZero || m.length) || (E = n.noSpaceIfEmpty ? "" : "&nbsp;",
                        P = !!m.length),
                        S.appendChild(D = (0,
                        i.ce)("div", {
                            className: "counter_anim_wrap inl_bl"
                        })),
                        D.appendChild(A = (0,
                        i.ce)("div", {
                            className: "counter_anim " + (d ? "counter_anim_inc" : "counter_anim_dec"),
                            innerHTML: `<div class="counter_anim_big"><span class="counter_anim_big_c">${v}</span></div>` + (P ? `<div class="counter_anim_small"><span class="counter_anim_small_c">${E}</span></div>` : "")
                        }, P ? {
                            marginTop: d ? -b : 0
                        } : {
                            right: 0
                        })),
                        n.str && (0,
                        i.setStyle)(A, {
                            textAlign: "right",
                            right: 0
                        });
                        var O = (0,
                        i.getSize)((0,
                        i.geByClass1)("counter_anim_big_c", A, "span"))[0]
                          , I = P ? "&nbsp;" === E ? O : (0,
                        i.getSize)((0,
                        i.geByClass1)("counter_anim_small_c", A, "span"))[0] : 0;
                        !E && n.noSpaceIfEmpty && (I = 0),
                        f.length && S.appendChild(T = (0,
                        i.ce)("div", {
                            className: "counter_const inl_bl",
                            innerHTML: f
                        })),
                        n.noWrapWidth || (0,
                        i.setStyle)(S, {
                            width: (C && (0,
                            i.getSize)(C)[0] || 0) + (T && (0,
                            i.getSize)(T)[0] || 0) + O + 0
                        }),
                        void 0 === o.browser.csstransitions && (o.browser.csstransitions = o.browser.chrome && o.browser.version >= 9 || o.browser.mozilla && o.browser.version >= 4 || o.browser.opera && o.browser.version >= 10.5 || o.browser.safari && o.browser.version >= 3.2 || o.browser.safari_mobile || o.browser.android);
                        var M = o.browser.csstransitions;
                        (0,
                        i.setStyle)(D, {
                            width: d ? I : O
                        });
                        var R = function() {
                            (0,
                            i.val)(e, t || (n.noSpaceIfEmpty ? "" : " "));
                            var r = (0,
                            i.data)(e, "nextCount");
                            (0,
                            i.data)(e, "curCount", !1),
                            (0,
                            i.data)(e, "nextCount", !1),
                            ("number" == typeof r || n.str && "string" == typeof r) && setTimeout(y.pbind(e, r, n), 0),
                            n.onDone && n.onDone()
                        }
                          , L = P ? {
                            marginTop: d ? 0 : -b
                        } : {
                            marginRight: d ? -I : 0
                        };
                        M ? ((0,
                        i.getStyle)(D, "width"),
                        (0,
                        i.addClass)(D, "counter_css_anim_wrap"),
                        O !== I && (0,
                        i.setStyle)(D, {
                            width: d ? O : I
                        }),
                        P && (0,
                        i.setStyle)(A, L),
                        setTimeout(R, 300),
                        n.fadeMode && ((0,
                        i.setStyle)((0,
                        i.geByClass1)("counter_anim_big", e), "opacity", 1),
                        (0,
                        i.setStyle)((0,
                        i.geByClass1)("counter_anim_small", e), "opacity", 0))) : (O !== I && s(D, {
                            width: d ? O : I
                        }, {
                            duration: 100
                        }),
                        P ? s(A, L, {
                            duration: 300,
                            transition: a.Transitions.easeOutCirc,
                            onComplete: R
                        }) : setTimeout(R, 300))
                    }
                } else
                    (0,
                    i.val)(e, t || "")
        }
    }
    ,
    789466: (e,t,n)=>{
        "use strict";
        n.d(t, {
            onDocumentClick: ()=>g,
            onEnter: ()=>v,
            onCtrlEnter: ()=>E,
            handleGlobalEsc: ()=>y,
            hideCookiesPolicy: ()=>w
        });
        n(976142),
        n(21466);
        var r = n(160617)
          , i = n(479957)
          , o = n(289988)
          , a = n(315544)
          , s = n(49535)
          , c = n(695724)
          , _ = n(850167)
          , l = n(427909)
          , u = n(726271)
          , d = n(26330)
          , p = n(475632)
          , h = n(668040)
          , m = n(801221)
          , f = n(790008);
        function g(e) {
            var t, n;
            if ((0,
            s.checkEvent)(e))
                return !0;
            if ((0,
            f.processAliExpressMiniAppLinkClickEvent)(e))
                return !1;
            if (d.default.set("last_reloaded", []),
            !cur.onMouseClick || !cur.onMouseClick(e)) {
                if (!(e = window.event || e.originalEvent || e))
                    return !0;
                (null === (t = e.target) || void 0 === t || null === (n = t.dataset) || void 0 === n ? void 0 : n.donutLogEvent) && (0,
                m.logDonutEvent)(e.target.dataset.donutLogEvent);
                for (var _, l = 8, u = e.target || e.srcElement; u && u !== bodyNode && "A" !== u.tagName && l--; )
                    u = u.parentNode;
                if (!u || "A" !== u.tagName || u.onclick || u.onmousedown)
                    return !0;
                var p = u.href
                  , g = u.getAttribute("target") || nav.baseBlank;
                if (p && g) {
                    if ((0,
                    a.domClosest)("bookmarks_row_type_link", u)) {
                        var v = (nav.fromStr(p) || {}).to;
                        (0,
                        i.statlogsValueEvent)("bookmarks_product_analytics", {
                            link_url: v,
                            time: (0,
                            o.getServerTime)()
                        })
                    }
                    return !0
                }
                var E = {};
                (_ = (p = (0,
                r.stripVKSiteURLOrigin)(p)).match(/^\/(.+?)#[\!\/](.+?)$/)) && !_[1].match(/^app(\d+)/) && (E.permanent = _[1],
                p = "/" + _[2]);
                var y = !!(u.getAttribute && u.getAttribute("data-post-click-type") && u.getAttribute("data-post-id"));
                if (p.match(/#$/) && !y)
                    return !0;
                var w, b = (0,
                a.domData)(u, "post-id");
                b && (E.postId = b);
                var C = p
                  , T = null
                  , D = p.match(/^\/(.*?)(\?|#|$)/);
                if (D)
                    T = D[1];
                else {
                    if (u.hostname)
                        w = u.hostname,
                        T = u.pathname + u.search;
                    else {
                        var A = /^([^:\/]+)?(?::(\d+))?(\/?[^#]*)(#?.*)$/i.exec(p);
                        if (!A)
                            return !0;
                        w = A[1],
                        T = A[3] || "/"
                    }
                    if (!w || !y)
                        return !0;
                    u.setAttribute("data-change-location-with-post-away", 1),
                    C = u
                }
                if ("add_community_app" === T)
                    return (0,
                    a.attr)(u, "target", "_blank"),
                    !0;
                if (T.indexOf(".php") > 0 || T.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images\/|utils\/|\.js|js\/|\.css|css\/|source\b)/)) {
                    if (!y)
                        return !0;
                    u.setAttribute("data-change-location-with-post-away", 1),
                    C = u
                }
                var S = u.getAttribute("hrefparams");
                S && (E.params = (0,
                c.extend)(E.params || {}, (0,
                h.fromQueryString)(S)));
                try {
                    return nav.go(C, e, (0,
                    c.extend)({}, E, {
                        throwErrorOnDisabledPath: !0
                    })),
                    (0,
                    s.cancelEvent)(e)
                } catch (e) {
                    return !0
                }
            }
        }
        function v(e, t) {
            (t = t || window.event).keyCode === s.KEY.ENTER && (e(),
            (0,
            s.cancelEvent)(t))
        }
        function E(e, t) {
            (10 === (e = e || window.event).keyCode || 13 === e.keyCode && (e.ctrlKey || e.metaKey && u.browser.mac)) && (t(),
            (0,
            s.cancelEvent)(e))
        }
        function y(e) {
            if (window._wf = 1,
            e.keyCode === s.KEY.ESC && boxQueue.count() && !cur._noEscHide)
                return boxQueue.hideLast(),
                -1;
            if (e.keyCode === s.KEY.ESC && window.articleCloseImageFullSize && window.articleCloseImageFullSize())
                return (0,
                s.cancelEvent)(e);
            if (e.keyCode === s.KEY.ESC && window.isArticleLayerOpen && window.isArticleLayerOpen())
                return window.ArticleLayer.close(!0),
                (0,
                s.cancelEvent)(e);
            if (e.keyCode === s.KEY.ESC && window.AuthorPage && !cur.articleEditorLayer)
                return window.AuthorPage.close(),
                (0,
                s.cancelEvent)(e);
            if (e.keyCode === s.KEY.ESC)
                return (0,
                p.cancelStackPop)(),
                (0,
                s.cancelEvent)(e);
            var t = [176, 177, 178, 179]
              , n = !1;
            window.audioPlayer && (t.push(s.KEY.LEFT),
            t.push(s.KEY.RIGHT)),
            (0,
            c.each)(t, (function(t, r) {
                if (e.keyCode === r)
                    return n = !0,
                    !1
            }
            )),
            n && (0,
            _.getAudioPlayer)().onMediaKeyPressedEvent(e),
            l.Chat.inited && 191 === e.keyCode && (e.ctrlKey || e.metaKey && u.browser.mac) && l.Chat.showFriends()
        }
        function w() {
            (0,
            a.re)("cookies_policy_wrap"),
            ajax.post("/settings", {
                act: "a_hide_cookies_policy"
            })
        }
    }
    ,
    100416: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isInputActive: ()=>_,
            placeholderSetup: ()=>u,
            placeholderInit: ()=>d,
            preventNonNumericalInput: ()=>h
        });
        n(21466);
        var r = n(315544)
          , i = n(49535)
          , o = n(635676)
          , a = n(695724)
          , s = n(726271)
          , c = n(19331);
        function _() {
            return document.activeElement && ((0,
            r.attr)(document.activeElement, "contenteditable") || "INPUT" === document.activeElement.tagName || "textarea" === document.activeElement.tagName)
        }
        function l(e) {
            var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = arguments.length > 2 ? arguments[2] : void 0, a = arguments.length > 3 ? arguments[3] : void 0, c = e.phshown, _ = e.phcont, l = n.back, u = n.editable, d = n.hideBackAfter, p = n.timeout, h = n.phColor, m = void 0 === h ? "#8C8E91" : h, f = n.activeColor, g = void 0 === f ? "#C0C8D0" : f, v = p || 0 === p ? p : 100, E = n.period || 200;
            if (t = u ? (void 0 !== e.textContent ? e.textContent : e.innerText) || (0,
            r.geByTag)("img", e).length : e.value,
            c && (l && t || !l && (i && !i.type || t)) ? ((0,
            r.hide)(_),
            e.phshown = !1) : c || t || !l && !a || ((0,
            r.show)(_),
            e.phshown = !0,
            s.browser.opera && a && (e.setAttribute("placeholder", ""),
            e.removeAttribute("placeholder", ""))),
            l && !t) {
                if (i && !i.type) {
                    var y = d ? r.hide.pbind(_.firstChild.firstChild) : null;
                    clearTimeout(e.phanim),
                    e.phanim = setTimeout((function() {
                        (0,
                        o.animate)(_.firstChild.firstChild, {
                            color: g
                        }, E, y)
                    }
                    ), v)
                }
                a && (clearTimeout(e.phanim),
                d && (0,
                r.show)(_.firstChild.firstChild),
                e.phanim = setTimeout((function() {
                    (0,
                    o.animate)(_.firstChild.firstChild, {
                        color: m
                    }, E)
                }
                ), v))
            }
        }
        function u(e, t) {
            var n = (0,
            r.ge)(e);
            if (!n)
                return !1;
            if (!(n.getAttribute ? n.getAttribute("contenteditable") : n.contenteditable) && (0,
            c.partConfigEnabled)("native_placeholder_enable"))
                return !1;
            var o = t ? (0,
            a.clone)(t) : {};
            if (!n.phevents || o.reload) {
                var _ = n.getAttribute ? n.getAttribute("placeholder") : n.placeholder;
                if (_) {
                    n.removeAttribute("placeholder");
                    var u = {}
                      , d = !1
                      , p = ["Top", "Bottom", "Left", "Right"];
                    if (o.pad)
                        u = o.pad;
                    else {
                        if (o.fast) {
                            for (var h = 0; h < 4; h++)
                                u["padding" + p[h]] = 3,
                                u["margin" + p[h]] = 0,
                                u["border" + p[h] + "Width"] = 1;
                            (0,
                            a.extend)(u, o.styles || {})
                        } else {
                            for (var m = [], f = 0; f < 4; f++)
                                m.push("margin" + p[f]),
                                m.push("padding" + p[f]),
                                m.push("border" + p[f] + "Width");
                            u = (0,
                            r.getStyle)(n, m)
                        }
                        for (var g = 0; g < 4; g++) {
                            var v = "margin" + p[g]
                              , E = "border" + p[g] + "Width";
                            u[v] = (0,
                            a.intval)(u[v]) + (0,
                            a.intval)(u[E]) + "px",
                            delete u[E]
                        }
                    }
                    if (o.reload) {
                        var y = n.previousSibling;
                        y && (0,
                        r.hasClass)(y, "input_back_wrap") && (0,
                        r.re)(y)
                    }
                    var w = o.big ? " big" : ""
                      , b = (0,
                    r.getSize)(n)[0] - 20
                      , C = n.phcont = n.parentNode.insertBefore((0,
                    r.ce)("div", {
                        className: "input_back_wrap no_select",
                        innerHTML: `<div class="input_back"><div class="input_back_content${w}" style="width: ${b}px;">${_}</div></div>`
                    }), n)
                      , T = (0,
                    r.domFC)(C);
                    (0,
                    r.setStyle)(T, u);
                    var D = l.pbind(n, o)
                      , A = s.browser.mobile ? D : (e,t)=>setTimeout(D.pbind(e, t), 0);
                    s.browser.msie && s.browser.version < 8 && (0,
                    r.setStyle)(T, {
                        marginTop: 1
                    }),
                    n.phonfocus = function(e) {
                        d || (n.focused = !0,
                        cur.__focused = n,
                        !0 === e && ((0,
                        r.setStyle)(n, {
                            backgroundColor: "#FFF"
                        }),
                        (0,
                        r.hide)(T)),
                        A(!0, !1))
                    }
                    ,
                    n.phonblur = function() {
                        d || (cur.__focused = n.focused = !1,
                        (0,
                        r.show)(T),
                        A(!1, !0))
                    }
                    ,
                    n.phshown = !0,
                    n.phanim = null,
                    (n.value || o.editable && ((void 0 !== n.textContent ? n.textContent : n.innerText) || (0,
                    r.geByTag)("img", n).length)) && (n.phshown = !1,
                    (0,
                    r.hide)(C)),
                    s.browser.opera_mobile || ((0,
                    i.addEvent)(C, "focus click", (function(e) {
                        d || (o.editableFocus ? (setTimeout(o.editableFocus.pbind(n), 0),
                        n.phonfocus()) : (n.blur(),
                        n.focus()))
                    }
                    )),
                    (0,
                    i.addEvent)(n, "focus" + (o.editable ? " click" : ""), n.phonfocus),
                    (0,
                    i.addEvent)(n, "keydown paste cut input", A)),
                    (0,
                    i.addEvent)(n, "blur", n.phonblur),
                    n.check = A,
                    n.getValue = ()=>o.editable ? n.innerHTML : n.value,
                    n.setPlaceholder = e=>(0,
                    r.geByClass1)("input_back_content", C).textContent = e,
                    n.setDisabled = e=>d = e,
                    n.setValue = function(e) {
                        o.editable ? n.innerHTML = e : n.value = e,
                        l(n, o)
                    }
                    ,
                    n.phevents = !0,
                    n.phonsize = function() {}
                    ,
                    o.global || o.reload || (cur.__phinputs || (cur.__phinputs = [],
                    cur.destroy.push(function(e) {
                        for (var t = 0, n = e.length; t < n; t++)
                            (0,
                            r.removeData)(e[t])
                    }
                    .pbind(cur.__phinputs))),
                    cur.__phinputs.push(n))
                }
            }
        }
        function d(e, t) {
            var n = (0,
            r.ge)(e);
            if (!n)
                return !1;
            if (!(n.getAttribute ? n.getAttribute("contenteditable") : n.contenteditable) && (0,
            c.partConfigEnabled)("native_placeholder_enable"))
                return !1;
            var o = t ? (0,
            a.clone)(t) : {}
              , _ = void 0 === (0,
            r.ce)("input").placeholder || n && n.getAttribute && n.getAttribute("contenteditable");
            if (!n.phevents || o.reload) {
                var l = n.getAttribute ? n.getAttribute("placeholder") : n.placeholder;
                if (l && (n.getValue = function() {
                    return o.editable ? n.innerHTML : n.value
                }
                ,
                n.setValue = function(e) {
                    o.editable ? n.innerHTML = e : n.value = e,
                    _ && m(n, o)
                }
                ,
                n.phonfocus = function() {}
                ,
                n.phonblur = function() {}
                ,
                _)) {
                    if (n.removeAttribute("placeholder"),
                    o.reload) {
                        var u = (0,
                        r.domNS)(n);
                        u && (0,
                        r.hasClass)(u, "placeholder") && (0,
                        r.re)(u)
                    }
                    var d = n.phcont = (0,
                    r.domInsertAfter)((0,
                    r.ce)("div", {
                        className: "placeholder",
                        innerHTML: '<div class="ph_input"><div class="ph_content">' + l + "</div></div>"
                    }), n)
                      , p = m.pbind(n, o)
                      , h = s.browser.mobile ? p : (e,t)=>setTimeout(p.pbind(e, t), 0);
                    n.phonfocus = function() {
                        n.focused = !0,
                        cur.__focused = n,
                        h(!0, !1)
                    }
                    ,
                    n.phonblur = function() {
                        cur.__focused = n.focused = !1,
                        h(!1, !0)
                    }
                    ,
                    n.phshown = !0,
                    (n.value || o.editable && ((void 0 !== n.textContent ? n.textContent : n.innerText) || (0,
                    r.geByTag)("img", n).length)) && (n.phshown = !1,
                    (0,
                    r.hide)(d)),
                    s.browser.opera_mobile || ((0,
                    i.addEvent)(d, "focus click contextmenu", (function(e) {
                        o.editableFocus ? (setTimeout(o.editableFocus.pbind(n), 0),
                        "contextmenu" === e.type && s.browser.msie && o.editableFocus(n),
                        n.phonfocus()) : (n.blur(),
                        n.focus())
                    }
                    )),
                    (0,
                    i.addEvent)(n, "focus" + (o.editable ? " click" : ""), n.phonfocus),
                    (0,
                    i.addEvent)(n, "keydown paste cut input", h)),
                    (0,
                    i.addEvent)(n, "blur", n.phonblur),
                    n.check = h,
                    n.phevents = !0,
                    n.phonsize = function() {}
                    ,
                    o.global || o.reload || (cur.__phinputs || (cur.__phinputs = [],
                    cur.destroy.push((function() {
                        if (cur.__phinputs)
                            for (var e = 0, t = cur.__phinputs.length; e < t; ++e)
                                (0,
                                r.removeData)(cur.__phinputs[e])
                    }
                    ))),
                    cur.__phinputs.push(n))
                }
            }
            function m(e) {
                var t, n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = e.phshown, o = e.phcont, a = n.editable;
                a ? ((t = void 0 !== e.textContent ? e.textContent : e.innerText) && s.browser.opera && t.match(/^[ ]+$/) && (t = ""),
                t || (t = (0,
                r.geByTag)("img", e).length > 0),
                t || (t = (0,
                r.geByTag)("br", e).length > 1),
                t || (t = (0,
                r.geByTag)("p", e).length > 1)) : t = e.value,
                i && t ? ((0,
                r.hide)(o),
                e.phshown = !1) : i || t || ((0,
                r.show)(o),
                e.phshown = !0)
            }
        }
        var p = e=>{
            var t = void 0 === e.which ? e.keyCode : e.which;
            String.fromCharCode(t).match(/^[0-9]+$/) || (0,
            i.cancelEvent)(e)
        }
          , h = e=>{
            (0,
            i.addEvent)(e, "keypress", p)
        }
    }
    ,
    786067: (e,t,n)=>{
        "use strict";
        n.d(t, {
            parseLatin: ()=>s,
            parseCyr: ()=>c,
            parseLatKeys: ()=>_,
            langNumeric: ()=>l,
            langSex: ()=>u,
            langStr: ()=>d,
            addLangKeys: ()=>p,
            getLang: ()=>h,
            langTag: ()=>m,
            langDate: ()=>f,
            getShortDate: ()=>g,
            getShortDateWithTime: ()=>v,
            getShortDateOrTime: ()=>E,
            langWordNumeric: ()=>y,
            getDateText: ()=>w,
            getBigDateNew: ()=>b,
            getSmDate: ()=>C
        });
        n(530522),
        n(59357),
        n(66108),
        n(296253),
        n(751876);
        var r = n(40906)
          , i = n(289988)
          , o = n(695724)
          , a = n(787481);
        function s(e) {
            for (var t = ["yo", "zh", "kh", "ts", "ch", "sch", "shch", "sh", "eh", "yu", "ya", "YO", "ZH", "KH", "TS", "CH", "SCH", "SHCH", "SH", "EH", "YU", "YA", "'"], n = ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], r = e, i = 0, o = t.length; i < o; i++)
                r = r.split(t[i]).join(n[i]);
            for (var a = "abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY", s = 0, c = a.length; s < c; s++)
                r = r.split(a.charAt(s)).join("".charAt(s));
            return r === e ? null : r
        }
        function c(e) {
            for (var t = ["yo", "zh", "kh", "ts", "ch", "sch", "shch", "sh", "eh", "yu", "ya", "YO", "ZH", "KH", "TS", "CH", "SCH", "SHCH", "SH", "EH", "YU", "YA", "'"], n = ["", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""], r = "", i = e, o = 0; o < n.length; o++)
                i = i.split(n[o]).join(t[o]);
            for (var a = 0; a < r.length; a++)
                i = i.split(r.charAt(a)).join("abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCY".charAt(a));
            return i === e ? null : i
        }
        function _(e) {
            for (var t = "qwertyuiop[]asdfghjkl;'zxcvbnm,./`", n = e, r = 0; r < t.length; r++)
                n = n.split(t.charAt(r)).join(".".charAt(r));
            return n == e ? null : n
        }
        function l(e, t, n) {
            if (!t || !window.langConfig) {
                if (!(0,
                r.isNumeric)(e)) {
                    var i = new Error("Non-numeric value passed to langNumeric");
                    throw console.log(e, i),
                    i
                }
                return String(e)
            }
            var a;
            if ((0,
            o.isArray)(t) ? (a = t[1],
            e != Math.floor(e) ? a = t[langConfig.numRules.float] : (0,
            o.each)(langConfig.numRules.int, (function(n, r) {
                if ("*" == r[0])
                    return a = t[r[2]],
                    !1;
                var i = r[0] ? e % r[0] : e;
                return -1 != (0,
                o.indexOf)(r[1], i) ? (a = t[r[2]],
                !1) : void 0
            }
            ))) : a = t,
            n) {
                for (var s = e.toString().split("."), c = [], _ = s[0].length - 3; _ > -3; _ -= 3)
                    c.unshift(s[0].slice(_ > 0 ? _ : 0, _ + 3));
                s[0] = c.join(langConfig.numDel),
                e = s.join(langConfig.numDec)
            }
            return a = (a || "%s").replace("%s", e)
        }
        function u(e, t) {
            if (!(0,
            o.isArray)(t))
                return t;
            var n = t[1];
            return window.langConfig ? ((0,
            o.each)(langConfig.sexRules, (function(r, i) {
                return "*" == i[0] || e == i[0] && t[i[1]] ? (n = t[i[1]],
                !1) : void 0
            }
            )),
            n) : n
        }
        function d(e) {
            for (var t = arguments, n = t.length, r = e + "", i = 1; i < n; i += 2) {
                var o = "%" === t[i][0] ? t[i] : "{" + t[i] + "}";
                r = r.replace(o, t[i + 1])
            }
            return r
        }
        function p(e, t) {
            var n = t ? window : window.cur;
            n.lang ? (0,
            o.extend)(n.lang, e) : n.lang = e
        }
        function h() {
            try {
                var e = Array.from(arguments)
                  , t = e.shift();
                if (!t)
                    return "...";
                var n = window.cur && window.cur.lang && window.cur.lang[t] || window.lang && window.lang[t] || window.langpack && window.langpack[t] || window[t];
                if (!n) {
                    var r = t.split("_");
                    return r.shift(),
                    r.join(" ")
                }
                return (0,
                o.isFunction)(n) ? n.apply(null, e) : void 0 === e[0] && !(0,
                o.isArray)(n) || "raw" === e[0] ? n : l(e[0], n, e[1])
            } catch (e) {
                (0,
                a.debugLog)("lang error:" + e.message + "(" + Array.from(arguments).join(", ") + ")")
            }
        }
        function m(e, t, n) {
            var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : "tag"
              , i = n;
            return i = (i = i.replace(`{${r}}`, e)).replace(`{/${r}}`, t)
        }
        function f(e, t, n, r, a, s) {
            var c;
            if (s || (s = ""),
            (0,
            o.isArray)(t) || (t = ["", t, t, t, t]),
            "number" == typeof e || "string" == typeof e ? (e > 2147483646e3 && (e = 0),
            e += n,
            c = new Date(e)) : c = e,
            a)
                t = t[1];
            else {
                var _ = "";
                !(_ = (0,
                i.isToday)(c) ? t[3] : (0,
                i.isYesterday)(c) ? t[2] : (0,
                i.isTomorrow)(c) ? t[4] : t[1]) && t[1] && (_ = t[1]),
                t = _
            }
            var l = {
                hours: c.getHours(),
                minutes: c.getMinutes(),
                seconds: c.getSeconds(),
                day: c.getDate(),
                month: c.getMonth() + 1,
                year: c.getFullYear()
            }
              , u = "";
            switch (3 === vk.lang && (u = c.getHours() > 11 ? "pm" : "am",
            l.hours = c.getHours() % 12 == 0 ? 12 : c.getHours() % 12),
            vk.lang) {
            case 1:
                switch (c.getHours()) {
                case 11:
                    t = t.replace("  ", "  ");
                    break;
                case 0:
                    t = t.replace("  ", "  ")
                }
                break;
            case 3:
                !(0,
                i.isToday)(c) || (0,
                i.isYesterday)(c) || (0,
                i.isTomorrow)(c) || (t = s + t);
                break;
            case 12:
            case 73:
                1 == c.getHours() && (t = t.replace(" &#224;s ", " &#224; "))
            }
            return 68 === vk.lang && (l.year = l.year + 543),
            t.replace("{hour}", l.hours).replace("{num_hour}", (0,
            i.leadingZero)(l.hours)).replace("{minute}", (0,
            i.leadingZero)(l.minutes)).replace("{day}", l.day).replace("{num_day}", (0,
            i.leadingZero)(l.day)).replace("{month}", r[l.month]).replace("{year}", l.year).replace("{short_year}", l.year % 100).replace("{second}", (0,
            i.leadingZero)(l.seconds)).replace("{am_pm}", u)
        }
        function g(e, t, n, r, i) {
            e *= 1e3,
            void 0 === n && (n = !0),
            void 0 === r && (r = h("months_of", "raw")),
            t *= 1e3;
            var o = Date.now()
              , a = new Date(o)
              , s = new Date(e + t);
            return !i && e > o && e - o < 864e5 && a.getDate() === s.getDate() ? f(e, "{hour}:{minute} {am_pm}", t, [], !n) : s.getYear() !== a.getYear() || e < o - 157248e5 ? f(e, h("global_date", "raw"), t, r, !n) : f(e, h("global_short_date", "raw"), t, r, !n)
        }
        function v(e, t, n, r) {
            return (0,
            i.isToday)(new Date(1e3 * e + 1e3 * t)) ? f(1e3 * e, "{hour}:{minute} {am_pm}", 1e3 * t, [], !n) : `${g(e, t, n, r)} ${f(1e3 * e, "{hour}:{minute} {am_pm}", 1e3 * t, [], !n)}`
        }
        function E(e, t, n, r) {
            return (0,
            i.isToday)(new Date(1e3 * e + 1e3 * t)) ? f(1e3 * e, "{hour}:{minute} {am_pm}", 1e3 * t, [], !n) : g(e, t, n, r)
        }
        function y(e, t, n) {
            return (0,
            o.isArray)(t) && e < t.length ? t[e] : l(e, n)
        }
        function w(e, t) {
            e += t;
            var n = parseInt(Date.now() / 1e3) - e
              , r = "";
            if (n < 60)
                r = h("global_just_now");
            else if (n < 3600) {
                r = y((0,
                o.intval)(n / 60), h("global_word_mins_ago", "raw"), h("global_mins_ago", "raw"))
            } else if (n < 14400) {
                r = y((0,
                o.intval)(n / 3600), h("global_word_hours_ago", "raw"), h("global_hours_ago", "raw"))
            } else
                r = b(e, 0, !0, "_l");
            return r
        }
        function b(e, t, n, r) {
            void 0 === n && (n = !0),
            void 0 === t && (t = 0),
            void 0 === r && (r = ""),
            t *= 1e3;
            var i = new Date(1e3 * e)
              , o = new Date;
            return i.getFullYear() !== o.getFullYear() && i.getTime() < o.getTime() - 1728e5 || Math.abs(i.getTime() - o.getTime()) > 157248e5 ? f(1e3 * e, h("global_date" + r, "raw"), t, h("months_sm_of"), !n) : f(1e3 * e, h("global_short_date_time" + r, "raw"), t, h("months_sm_of"), !n)
        }
        function C(e, t, n) {
            void 0 === n && (n = !0),
            void 0 === t && (t = 0);
            var r = new Date
              , i = r.getFullYear()
              , o = r.getMonth()
              , a = new Date(1e3 * e)
              , s = a.getFullYear()
              , c = a.getMonth();
            return f(1e3 * e, h(s < i && (o > 1 || c < 9 || i - s >= 2) ? "global_date" : "global_short_date_time", "raw"), t, h("months_sm_of", "raw"), !n)
        }
    }
    ,
    635429: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getPageHeaderHeight: ()=>E,
            updateNarrow: ()=>y,
            checkPageBlocks: ()=>w,
            redraw: ()=>b,
            onBodyScroll: ()=>C,
            onBodyResize: ()=>T,
            leftBlockOver: ()=>D,
            leftBlockOut: ()=>A,
            leftBlockHide: ()=>S,
            autosizeSetup: ()=>P,
            TopMenu: ()=>O,
            getProgressHtml: ()=>I,
            getProgressBarEl: ()=>M
        });
        n(59357);
        var r, i = n(695724), o = n(315544), a = n(803834), s = n(447215), c = n(386409), _ = n(778273), l = n(635676), u = n(49535), d = n(363604), p = n(726271), h = n(475632), m = n(850167), f = n(376270), g = n(214547), v = n(813981);
        function E() {
            var e = (0,
            o.ge)("page_header");
            return r = r || (e ? e.offsetHeight : 0)
        }
        function y() {
            cur.__narrowBar = cur.__narrowBar || {},
            cur.__narrowBar.bar = cur.__narrowBar.bar || (0,
            o.ge)("narrow_column"),
            cur.__narrowBar.barBlock = cur.__narrowBar.bar && (0,
            o.geByClass1)("page_block", cur.__narrowBar.bar),
            cur.__narrowBar.wideCol = cur.__narrowBar.wideCol || (0,
            o.ge)("wide_column"),
            cur.__narrowBar.isBarFixed = cur.__narrowBar.isBarFixed || "fixed" === (0,
            o.getStyle)(cur.__narrowBar.bar, "position"),
            cur.__narrowBar.pl = cur.__narrowBar.pl || (0,
            o.ge)("page_layout");
            var e = cur.__narrowBar.bar
              , t = cur.__narrowBar.barBlock
              , n = cur.__narrowBar.wideCol
              , r = (0,
            a.scrollGetY)();
            if (!p.browser.mobile && e && t && n && !(0,
            o.isVisible)(boxLoader) && !(0,
            o.isVisible)(boxLayerBG) && !(0,
            o.isVisible)(layerBG)) {
                var s, c = window.lastWindowHeight || 0, _ = Math.min(r, bodyNode.clientHeight - c), l = cur.__narrowBar.pl, u = vk.staticheader ? Math.max(0, E() - _) : E(), d = cur.__narrowBar.isBarFixed, h = (0,
                i.floatval)((0,
                o.getStyle)(cur.__narrowBar.barBlock, "marginTop")), m = (0,
                o.getSize)(e)[1] - (d ? h : 0), f = (0,
                o.getSize)(n)[1], g = (0,
                o.getXY)(n)[1], v = m >= f - h, y = h, w = _ + c - f - g - y, b = Math.max(0, w), C = g - u, T = (0,
                o.getXY)(e)[1] + (d ? h : 0), D = cur.__narrowBar.lastSt || 0, A = cur.__narrowBar.lastStyles || {}, S = u + y + m + h + b <= c && !cur.narrowHide, P = cur.__narrowBarForceNotFixed, O = !1;
                _ - 1 < C && !(S && p.browser.msie && T < u + h) || v ? s = {
                    marginTop: 0
                } : !P && (_ - 1 < Math.min(D, T - u - h) || S) ? (s = {
                    top: u,
                    marginLeft: Math.min(-bodyNode.scrollLeft, Math.max(-bodyNode.scrollLeft, bodyNode.clientWidth - (0,
                    o.getSize)(l)[0]))
                },
                O = !0) : !P && (_ + 1 > Math.max(D, T + m + y - c) && w < 0 && !cur.narrowHide || cur.narrowHide && _ + 1 > Math.max(D, T + m - u)) ? (s = {
                    bottom: cur.narrowHide ? c - u : y,
                    marginLeft: Math.min(-bodyNode.scrollLeft, Math.max(-bodyNode.scrollLeft, bodyNode.clientWidth - (0,
                    o.getSize)(l)[0]))
                },
                O = !0) : s = {
                    marginTop: w >= 0 ? f - m : Math.min(T - g, f - m + C)
                },
                function(e, t) {
                    var n = (0,
                    i.clone)(e)
                      , r = (0,
                    i.clone)(t);
                    return (0,
                    i.each)(n, (function(e, t) {
                        "position" !== e && (n[e] = Math.round(t))
                    }
                    )),
                    (0,
                    i.each)(r, (function(e, t) {
                        "position" !== e && (r[e] = Math.round(t))
                    }
                    )),
                    JSON.stringify(n) === JSON.stringify(r)
                }(s, A) || ((0,
                i.each)(A, (function(e) {
                    A[e] = null
                }
                )),
                (0,
                o.setStyle)(e, (0,
                i.extend)(A, s)),
                cur.__narrowBar.lastStyles = s),
                O !== d && (0,
                o.toggleClass)(e, "fixed", O),
                cur.__narrowBar.lastSt = _,
                cur.__narrowBar.isBarFixed = O
            }
        }
        function w() {
            var e = (0,
            o.ge)("content");
            e && ((0,
            o.toggleClass)(e, "page_block", !(0,
            o.geByClass1)("page_block", e)),
            (0,
            f.updateAriaElements)())
        }
        function b(e, t) {
            e && "fixed" === (0,
            o.getStyle)(e, "position") && (t ? (0,
            o.removeClass)(e, t) : (0,
            o.setStyle)(e, {
                position: "relative"
            }),
            e.offsetLeft,
            t ? (0,
            o.addClass)(e, t) : (0,
            o.setStyle)(e, {
                position: "fixed"
            }))
        }
        function C() {
            if (window.pageNode) {
                var e = Math.min(0, Math.max(-bodyNode.scrollLeft, bodyNode.clientWidth - (0,
                o.getSize)((0,
                o.ge)("page_layout"))[0]));
                p.browser.mobile || vk.staticheader || (0,
                s.updateHeaderStyles)({
                    marginLeft: e
                }),
                (0,
                s.updateLeftMenu)(),
                y(),
                (0,
                c.updSideTopLink)()
            }
        }
        function T(e) {
            if (window.pageNode) {
                var t = document.documentElement
                  , n = t.clientWidth
                  , r = t.clientHeight
                  , a = (0,
                c.sbWidth)()
                  , l = Math.max((0,
                i.intval)(window.innerWidth), (0,
                i.intval)(n))
                  , u = Math.max((0,
                i.intval)(window.innerHeight), (0,
                i.intval)(r))
                  , h = !1;
                if (p.browser.mobile && (l = Math.max(l, (0,
                i.intval)(bodyNode.scrollWidth)),
                u = Math.max(u, (0,
                i.intval)(bodyNode.scrollHeight))),
                window.lastWindowWidth !== l || !0 === e) {
                    h = !0,
                    window.lastInnerWidth = window.lastWindowWidth = l,
                    layerWrap.style.width = boxLayerWrap.style.width = l + "px";
                    var f = layer.style.width = boxLayer.style.width = l - a - 2 + "px";
                    if (window.mvLayerWrap && !mvcur.minimized && (mvLayerWrap.style.width = l + "px",
                    mvLayer.style.width = f),
                    window.wkLayerWrap && (wkLayerWrap.style.width = l + "px",
                    wkLayer.style.width = f),
                    bodyNode.offsetWidth < vk.width + a + 2 && (l = vk.width + a + 2),
                    l)
                        for (var g = pageNode.firstChild; g; g = g.nextSibling)
                            if (g.tagName) {
                                for (var v = (window.lastInnerWidth = l - a - 1) - 1, E = g.firstChild; E; E = E.nextSibling)
                                    "scroll_fix" === E.className && (E.style.width = v + "px");
                                document.documentElement.style.setProperty("--scroll-fixed-width", `${v}px`),
                                vk.staticheader || (0,
                                s.updateHeaderStyles)({
                                    width: v
                                })
                            }
                }
                if ((window.lastWindowHeight !== u || !0 === e) && (h = !0,
                window.lastWindowHeight = u,
                layerBG.style.height = boxLayerBG.style.height = layerWrap.style.height = boxLayerWrap.style.height = u + "px",
                window.mvLayerWrap && !mvcur.minimized && (mvLayerWrap.style.height = u + "px"),
                window.wkLayerWrap)) {
                    var w = p.browser.mobile ? window.innerHeight : u;
                    wkLayerWrap.style.height = w + "px"
                }
                if (vk.noSideTop || (0,
                c.updSideTopLink)(1),
                h && window.curRBox && window.curRBox.boxes && window.getWndInner) {
                    var C = getWndInner();
                    (0,
                    i.each)(curRBox.boxes, ((e,t)=>t._wnd_resize(C[0], C[1])))
                }
                setTimeout(_.updSeenAdsInfo, 0);
                var T = (0,
                m.getAudioPlayer)();
                T.audioLayer && T.audioLayer.isShown() && T.audioLayer.updatePosition(),
                cur.pvShown && window.Photoview && setTimeout(Photoview.updatePhotoDimensions),
                window.tooltips && tooltips.rePositionAll(),
                cur.lSTL && (0,
                o.setStyle)(cur.lSTL, {
                    width: Math.max((0,
                    o.getXY)(cur.lSTL.el)[0], 0),
                    height: u - 1
                }),
                (0,
                o.ge)("dev_top_nav") && (0,
                o.setStyle)((0,
                o.ge)("dev_top_nav", "left", null));
                var D = (0,
                o.geByClass)("ui_search_fixed")
                  , A = (0,
                o.ge)("narrow_column");
                (0,
                i.each)(D, (function() {
                    b(this, "ui_search_fixed"),
                    setTimeout(b.pbind(this, "ui_search_fixed"), 0)
                }
                )),
                A && (b(A, "fixed"),
                setTimeout(b.pbind(A, "fixed"), 0)),
                (0,
                s.updateLeftMenu)(),
                y(),
                (0,
                d.updateSTL)()
            }
        }
        function D(e) {
            var t = 1;
            e.id || (e = (0,
            o.ge)("left_hide" + e),
            t = 0),
            !t && e.timer || (e.showing ? (0,
            o.removeAttr)(e, "showing") : ((0,
            l.animate)(e, {
                opacity: t ? 1 : .5
            }, 200),
            t && (e.showing = 1))),
            e.timer && (clearTimeout(e.timer),
            (0,
            o.removeAttr)(e, "timer"))
        }
        function A(e) {
            var t = .5;
            e.id || (e = (0,
            o.ge)("left_hide" + e),
            t = 0),
            e.timer = setTimeout((function() {
                (0,
                l.animate)(e, {
                    opacity: t
                }, 200),
                (0,
                o.removeAttr)(e, "timer")
            }
            ), 1)
        }
        function S(e, t, n) {
            var r = {
                act: "hide_block",
                block: e,
                hash: t
            };
            n && (r.block = n),
            ajax.post("al_index.php", r, {
                onDone: _.updSeenAdsInfo
            }),
            (0,
            o.hide)("left_block" + e)
        }
        function P(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            if (e = (0,
            o.ge)(e))
                if (e.autosize)
                    e.autosize.update();
                else {
                    t.minHeight = (0,
                    i.intval)(t.minHeight) || (0,
                    i.intval)((0,
                    o.getStyle)(e, "height")),
                    t.maxHeight = (0,
                    i.intval)(t.maxHeight);
                    var n = (0,
                    o.getSize)(e)[0] || (0,
                    i.intval)((0,
                    o.getStyle)(e, "width"))
                      , r = (0,
                    o.getStyle)(e, "fontSize")
                      , a = (0,
                    o.getStyle)(e, "lineHeight");
                    n < 1 && (n = (0,
                    i.intval)((0,
                    o.getStyle)(e, "width", !1))),
                    r.indexOf("em") > 0 && (r = (0,
                    i.floatval)(r) * vk.fs),
                    r = (0,
                    i.intval)(r);
                    var s = {
                        width: n,
                        height: 10,
                        fontFamily: (0,
                        o.getStyle)(e, "fontFamily"),
                        fontSize: r + "px",
                        lineHeight: a,
                        boxSizing: (0,
                        o.getStyle)(e, "boxSizing")
                    }
                      , c = ["Top", "Bottom", "Left", "Right"];
                    (0,
                    i.each)(c, (function() {
                        s["padding" + this] = (0,
                        o.getStyle)(e, "padding" + this)
                    }
                    )),
                    e.autosize = {
                        options: t,
                        helper: (0,
                        o.ce)("textarea", {
                            className: "ashelper"
                        }, s),
                        handleEvent: function(t, n) {
                            var r = n.charCode ? String.fromCharCode(n.charCode) : n.charCode;
                            if (void 0 === r && (r = String.fromCharCode(n.keyCode),
                            10 === n.keyCode || 13 === n.keyCode ? r = "\n" : !p.browser.msie && n.keyCode <= 40 && (r = "")),
                            !r)
                                return t;
                            if (!p.browser.msie)
                                return t.substr(0, e.selectionStart) + r + t.substr(e.selectionEnd);
                            var i = document.selection.createRange();
                            return i.text && (t = t.replace(i.text, "")),
                            t + r
                        },
                        update: function(t) {
                            var n = e.value;
                            !t || "blur" === t.type || "keyup" === t.type || p.browser.msie && "keypress" !== t.type || t.ctrlKey || t.altKey || t.metaKey || (n = e.autosize.handleEvent(n, t)),
                            n || (n = " "),
                            e.autosize.helper.value !== n && (e.autosize.helper.value = n);
                            var r = e.autosize.options
                              , s = (0,
                            o.getSize)(e, !0)[1]
                              , c = e.autosize.helper.scrollHeight
                              , _ = c % a;
                            r.exact && _ > 2 && (c -= _ - 2),
                            c < r.minHeight && (c = r.minHeight);
                            var l = {
                                overflow: "hidden"
                            }
                              , u = (0,
                            o.getStyle)(e, "overflow").indexOf("auto") > -1 ? "auto" : "hidden";
                            r.maxHeight && c > r.maxHeight && (c = r.maxHeight,
                            (0,
                            i.extend)(l, {
                                overflow: "auto",
                                overflowX: "hidden"
                            })),
                            r.addHeight && (c += r.addHeight),
                            s === c && u === l.overflow || (l.height = c,
                            (0,
                            o.setStyle)(e, l),
                            (0,
                            i.isFunction)(r.onResize) && r.onResize(c))
                        }
                    },
                    t.exact && ("normal" === a && (a = "120%"),
                    a.indexOf("%") > 0 && (a = r * (0,
                    i.intval)(a) / 100)),
                    utilsNode.appendChild(e.autosize.helper),
                    p.browser.opera_mobile ? ((0,
                    o.setStyle)(e, {
                        overflow: "hidden"
                    }),
                    e.autosize.update(),
                    (0,
                    u.addEvent)(e, "blur", e.autosize.update)) : ((0,
                    u.addEvent)(e, "keydown keyup keypress change", e.autosize.update),
                    setTimeout((()=>{
                        (0,
                        o.setStyle)(e, {
                            overflow: "hidden",
                            resize: "none"
                        });
                        var t = (0,
                        o.val)(e);
                        (0,
                        o.val)(e, " ", !0),
                        (0,
                        o.val)(e, t, !0),
                        e.autosize.update()
                    }
                    ), 0))
                }
        }
        var O = {
            init: function() {
                if (this.inited)
                    return !1;
                var e = (0,
                o.ge)("top_profile_link")
                  , t = (0,
                o.ge)("top_profile_menu");
                if (!e || !t)
                    return !1;
                (0,
                u.addEvent)(e, "mousedown", O.clicked),
                this.inited = !0,
                (0,
                v.initColorSchemeDropdowns)()
            },
            clicked: function(e) {
                return (0,
                u.checkEvent)(e) || "mousedown" === e.type && (0,
                u.checkKeyboardEvent)(e) || O.toggle(),
                !1
            },
            toggle: function(e) {
                var t, n = (0,
                o.ge)("top_profile_link"), r = (0,
                o.ge)("top_profile_menu"), i = (0,
                o.hasClass)(r, "shown");
                if (void 0 === e || i !== e) {
                    void 0 === e && (e = !i);
                    var a = null === (t = (0,
                    o.$)("[data-warning]")) || void 0 === t ? void 0 : t.getAttribute("data-warning");
                    (0,
                    o.hasClass)(r, "top_profile_menu_new") && (e ? g.vkConnectNavigationCollector.logAccountActionsOpen(a) : g.vkConnectNavigationCollector.logAccountActionsClose(a)),
                    (0,
                    o.toggleClass)(n, "active", e),
                    (0,
                    o.toggleClass)(r, "shown", e),
                    e ? ((0,
                    h.cancelStackPush)("top_menu", O.toggle.bind(this, !1), !0),
                    cur.introExitTooltipHide && (cur.introExitTooltipHide(),
                    delete cur.introExitTooltipHide)) : (0,
                    h.cancelStackFilter)("top_menu", !0)
                }
            },
            show: function() {
                O.hidetimer && (clearTimeout(O.hidetimer),
                O.hidetimer = 0),
                O.toggle(!0)
            },
            hide: function() {
                O.hidetimer || (O.hidetimer = setTimeout((function() {
                    O.toggle(!1),
                    O.hidetimer = 0
                }
                ), 200))
            },
            select: function(e, t) {
                return !!(0,
                u.checkEvent)(t) || (O.toggle(!1),
                nav.go(e, t, {
                    noback: !0
                }))
            }
        };
        function I(e, t) {
            return (0,
            o.rs)(vk.pr_tpl, {
                id: e || "",
                cls: t || ""
            })
        }
        function M(e) {
            return (0,
            o.geByClass1)("ui_progress_bar", e)
        }
    }
    ,
    427909: (e,t,n)=>{
        "use strict";
        n.d(t, {
            Chat: ()=>m,
            cssAnim: ()=>f,
            imagesLoader: ()=>g,
            hideNewsAnnounce: ()=>E,
            leftAdBlockClose: ()=>y,
            leftBlockToggleFriend: ()=>b,
            leftBlockFriendTooltip: ()=>C,
            initLegacyBrowserDetectionInAttribute: ()=>T,
            __qlClear: ()=>D,
            storePasswordCredential: ()=>A,
            onLoginDone: ()=>S,
            onLoginFailed: ()=>P,
            onLoginCaptcha: ()=>O,
            onLoginReCaptcha: ()=>I,
            nodeUpdated: ()=>M,
            initPostsLegacyVars: ()=>R
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(59357);
        var r = n(376852)
          , i = n(386409)
          , o = n(315544)
          , a = n(635676)
          , s = n(49535)
          , c = n(695724)
          , _ = n(654612)
          , l = n(726271)
          , u = n(786067)
          , d = n(19331);
        function p(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return h(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return h(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function h(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var m = {
            maxHeight: 300,
            tabs: {},
            counters: {},
            showFriends: function() {
                curFastChat.clistBox.visible ? curFastChat.clistBox.options.fixed ? FastChat.clistHide() : curFastChat.clistBox.show() : (FastChat.clistShow(),
                m.cont.tt && m.cont.tt.destroy && m.cont.tt.destroy())
            },
            showTT: function() {
                if (!document.querySelector(".WideScreenAppPage") && !(0,
                o.hasClass)(m.wrap, "chat_active") && !(0,
                o.hasClass)(m.wrap, "chat_expand")) {
                    var e = l.browser.mac ? "Cmd" : "Ctrl";
                    (0,
                    r.showTooltip)(m.cont, {
                        text: `${(0,
                        u.getLang)("head_fr_online_tip")} (${e}+?)`,
                        shift: [-2, 4, 0],
                        showdt: 0,
                        black: 1
                    })
                }
            },
            init: function() {
                m.wrap = (0,
                o.ce)("div", {
                    id: "chat_onl_wrap",
                    className: "chat_onl_wrap",
                    innerHTML: '\n<div class="chat_tt_wrap"></div>\n<div class="chat_onl_inner">\n  <div class="chat_cont_scrolling"><div class="chat_onl_height"></div></div>\n  <div class="chat_cont_sh_top"></div>\n  <div class="chat_cont_sh_bottom"></div>\n  <a class="chat_tab_wrap" id="chat_tab_wrap" onclick="Chat.showFriends()" onmouseover="Chat.showTT();">\n    <div class="chat_onl_cont">\n      <div class="chat_onl" id="chat_onl"></div>\n    </div>\n  </a>\n</div>'
                }),
                utilsNode.appendChild(m.wrap),
                m.scrollNode = (0,
                o.geByClass1)("chat_cont_scrolling", m.wrap),
                m.ttNode = (0,
                o.geByClass1)("chat_tt_wrap", m.wrap),
                m.itemsCont = m.scrollNode.firstChild,
                m.onl = (0,
                o.ge)("chat_onl"),
                m.cont = m.onl.parentNode.parentNode,
                (0,
                o.hide)(m.wrap),
                m.inited = !0,
                window.stManager._addCss(".layers_shown .chat_onl_wrap {margin-right: " + (0,
                i.sbWidth)() + "px;}")
            }
        };
        function f(e, t, n, r) {
            var i = (0,
            c.intval)(l.browser.version);
            if (e && (l.browser.chrome && i > 14 || l.browser.mozilla && i > 13 || l.browser.opera && i > 2)) {
                var _ = "all " + n.duration + "ms " + (n.func || "ease-out");
                e.style.WebkitTransition = _,
                e.style.MozTransition = _,
                e.style.OTransition = _,
                e.style.transition = _;
                var u = function t() {
                    return l.browser.opera && (0,
                    c.intval)(l.browser.version) <= 12 ? e.removeEventListener("oTransitionEnd", t) : (0,
                    s.removeEvent)(e, "webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd", t),
                    e.style.WebkitTransition = "",
                    e.style.MozTransition = "",
                    e.style.OTransition = "",
                    e.style.transition = "",
                    r && r(),
                    !1
                };
                r && (l.browser.opera && (0,
                c.intval)(l.browser.version) <= 12 ? e.addEventListener("oTransitionEnd", u) : (0,
                s.addEvent)(e, "webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd", u)),
                setTimeout(o.setStyle.pbind(e, t), 0)
            } else
                (0,
                a.animate)(e, t, (0,
                c.extend)(n, {
                    onComplete: r
                }))
        }
        function g(e, t) {
            var n = []
              , r = 0
              , i = null
              , a = (0,
            c.extend)({
                top_load: 0,
                bottom_load: 2,
                load_limit: 10,
                need_load_class: "__need_load",
                skip_process_load: !1,
                use_iframe: !1
            }, t)
              , s = {};
            function _(e, t) {
                n[e] && (--r,
                delete n[e]),
                t || s.processLoad()
            }
            function l(t) {
                var n = 0
                  , r = t;
                if (r && r.offsetParent)
                    do {
                        if (n += r.offsetTop,
                        e && r.offsetParent === e)
                            break
                    } while (r = r.offsetParent);
                return n
            }
            return s.processLoad = function() {
                if ((0,
                c.each)(n, ((e,t)=>{
                    var r = p(t, 2)
                      , i = r[0]
                      , o = r[1];
                    (o.width || o.height || (0,
                    c.vkNow)() - i > 2e4) && n[e] && _.call(o, e, !0)
                }
                )),
                clearTimeout(i),
                r && (i = setTimeout(s.processLoad, 500)),
                !(r >= a.load_limit)) {
                    var t, u, d = (0,
                    o.geByClass)(a.need_load_class, e || bodyNode), h = [];
                    if (e && d.length) {
                        var m = e.offsetHeight;
                        t = e.scrollTop - m * a.top_load,
                        u = e.scrollTop + m * a.bottom_load
                    }
                    for (var f = 0, g = d.length; f < g && r < a.load_limit; f++) {
                        var v = d[f];
                        if ("IMG" === v.tagName) {
                            var E = v.getAttribute("data-src");
                            if (E) {
                                if (e) {
                                    var y = l(v)
                                      , w = y + v.parentNode.offsetHeight;
                                    if (y > u)
                                        continue;
                                    if (w < t)
                                        continue
                                }
                                h.push([v, E])
                            }
                        }
                    }
                    (0,
                    c.each)(h, ((e,t)=>{
                        var i = p(t, 2)
                          , l = i[0]
                          , u = i[1];
                        s.iloader && s.iloader.add(u, _, l),
                        l.src = u,
                        l.removeAttribute("data-src"),
                        (0,
                        o.removeClass)(l, a.need_load_class),
                        n[u] || (r++,
                        n[u] = [(0,
                        c.vkNow)(), l])
                    }
                    )),
                    clearTimeout(i),
                    r && (i = setTimeout(s.processLoad, 500))
                }
            }
            ,
            s.destroy = function() {
                n = [],
                r = 0,
                clearTimeout(i)
            }
            ,
            a.use_iframe && (s.iloader = new v),
            a.skip_process_load || s.processLoad(),
            s
        }
        function v() {
            var e, t, n, r, i, a;
            function s(e) {
                return t && t.body ? '<img id="___img' + e + '" />' : '<img class="___img' + e + '" />'
            }
            function _(e) {
                return t && t.body ? t.getElementById("___img" + e) : (0,
                o.geByClass1)("___img" + e, n)
            }
            function u() {
                e = utilsNode.appendChild((0,
                o.ce)("iframe")),
                t = function(e) {
                    if (l.browser.mozilla)
                        return !1;
                    try {
                        return e.contentDocument ? e.contentDocument : e.contentWindow && e.contentWindow.document ? e.contentWindow.document : e.document
                    } catch (e) {}
                    return !1
                }(e),
                n = t && t.body ? t.body : utilsNode.appendChild((0,
                o.ce)("div", {}, {
                    display: "none"
                })),
                r = 0,
                i = []
            }
            function d(e, t, a) {
                var c = r++;
                i[c] = {
                    src: e,
                    onLoad: t,
                    that: a
                },
                n.appendChild((0,
                o.ce)("div", {
                    innerHTML: s(c)
                }));
                var l = _(c);
                return l.src = e,
                l.onload = function() {
                    var e = i[c];
                    e && (e.onLoad && e.onLoad.call(e.that || window, e.src),
                    delete i[c],
                    n.removeChild(_(c).parentNode))
                }
                ,
                l
            }
            return u(),
            {
                add: d,
                abort: function() {
                    (0,
                    o.re)(e),
                    a = [...i.filter((e=>void 0 !== e))],
                    u()
                },
                repeat: function(e) {
                    if (!a)
                        return [];
                    var t = [];
                    if ((0,
                    c.each)(a, ((e,n)=>{
                        d(n.src, n.onLoad, n.that),
                        t.push(n.that)
                    }
                    )),
                    a = null,
                    e) {
                        var n = [];
                        (0,
                        c.each)(t, (function() {
                            n.push([this, this.src]),
                            this.src = "",
                            (0,
                            o.hide)(this)
                        }
                        )),
                        setTimeout((function() {
                            (0,
                            c.each)(n, ((e,t)=>{
                                var n = p(t, 2)
                                  , r = n[0]
                                  , i = n[1];
                                r.src = i,
                                (0,
                                o.show)(r)
                            }
                            ))
                        }
                        ), 10)
                    }
                    return t
                }
            }
        }
        function E(e, t) {
            var n = {
                act: "hide_block",
                block: e,
                hash: t
            };
            ajax.post("al_index.php", n),
            (0,
            o.hide)("news_announce_" + e)
        }
        function y(e, t, n) {
            (0,
            o.setStyle)("left_hide" + e, {
                visibility: "hidden"
            }),
            (0,
            d.partConfigEnabled)("ads_new_reports_web_tgb") ? function(e, t, n) {
                var r = ""
                  , a = (0,
                _.showBox)("reports.php", {
                    act: "hide_ad_box",
                    ad_data: n
                }, {
                    onDone: function() {
                        var e = (0,
                        o.geByClass)("radiobtn", "ad_hide");
                        window.radioBtns.ad_hide = {
                            val: 0,
                            els: e
                        };
                        var t = (0,
                        o.ge)("ad_csrf");
                        r = t ? t.value : r
                    },
                    params: {
                        width: 370,
                        onClean: ()=>{
                            delete window.radioBtns.ad_hide
                        }
                    },
                    stat: ["reports.css"]
                });
                a.removeButtons(),
                a.addButton((0,
                u.getLang)("box_send"), (o=>{
                    (0,
                    i.lockButton)(o),
                    ajax.post("reports.php", {
                        act: "hide_ad",
                        reason_id: window.radioBtns.ad_hide.val,
                        ad_data: n,
                        hash: r
                    }),
                    w(e, t, (()=>{
                        (0,
                        i.unlockButton)(o),
                        a.hide()
                    }
                    ))
                }
                )),
                a.addButton((0,
                u.getLang)("global_cancel"), !1, "no")
            }(e, t, n) : w(e, t)
        }
        function w(e, t, n) {
            function r() {
                (0,
                a.animate)("ads_ad_close_info_" + e, {
                    opacity: 1
                }, 200, i)
            }
            function i() {
                (0,
                o.setStyle)("ads_ad_box2_" + e, {
                    visibility: "hidden"
                })
            }
            ajax.post(t, {}, {
                noAds: !0,
                onDone: function(t) {
                    if (!t.done)
                        return;
                    "function" == typeof n && n();
                    if ("ya_direct" === e)
                        return (0,
                        a.animate)(e, {
                            opacity: 0
                        }, 200, (function() {
                            (0,
                            o.re)("ya_direct"),
                            setTimeout((function() {
                                AdsLight.updateBlock("force_hard", 2)
                            }
                            ), 5e3)
                        }
                        )),
                        void (window.vk__adsLight.yaDirectAdActive = !1);
                    var i = (0,
                    o.ge)("ads_ad_close_info_" + e);
                    if (!i)
                        return !1;
                    (0,
                    o.setStyle)(i, {
                        opacity: 0
                    }),
                    i.style.setProperty("display", "block", "important"),
                    setTimeout(r, 0)
                }
            })
        }
        function b(e, t, n, r, i) {
            r && window.stManager.add(["tooltips.css", window.jsc("web/tooltips.js")]),
            cur.mfid = e,
            ajax.post("al_friends.php", {
                act: r ? "add" : "remove",
                mid: e,
                mf_type: t,
                hash: n,
                from: "leftblock"
            }, {
                onDone: function(t, n, r) {
                    if (!t)
                        return nav.reload();
                    var i = (0,
                    o.ge)("left_friend_status_" + e);
                    (0,
                    o.cleanElems)(i.firstChild),
                    t ? ((0,
                    o.show)(i),
                    (0,
                    o.val)(i, t)) : (0,
                    o.hide)(i),
                    n && (ajax.preload("al_friends.php", {
                        act: "friend_tt",
                        mid: e
                    }, [n, r]),
                    setTimeout(C, 0))
                },
                showProgress: function() {
                    var t = ((0,
                    o.ge)("left_friend_subscribed") || {}).tt;
                    t && (t.hide({
                        fasthide: 1
                    }),
                    t.destroy()),
                    (0,
                    o.ge)("left_friend_status_" + e).innerHTML = '<img src="/images/upload' + (window.devicePixelRatio >= 2 ? "_2x" : "") + '.gif" width="32" />'
                },
                hideProgress: ()=>(0,
                o.hide)("left_friend_status_" + e),
                onFail: function(e) {
                    if (e)
                        return (0,
                        _.showFastBox)({
                            title: (0,
                            u.getLang)("global_error")
                        }, e),
                        !0
                }
            }),
            (0,
            s.cancelEvent)(i)
        }
        function C() {
            return (0,
            r.showTooltip)((0,
            o.ge)("left_friend_subscribed"), {
                url: "al_friends.php",
                params: {
                    act: "friend_tt",
                    mid: cur.mfid,
                    from: "leftblock"
                },
                slide: 15,
                hidedt: 500,
                shift: [40, -1, 3],
                className: "preq_tt",
                forcetodown: !0
            })
        }
        function T() {
            var e = [];
            (0,
            c.each)(l.browser, (function(t, n) {
                n && !(0,
                c.inArray)(t, ["version", "mac", "search_bot"]) && "flash" !== t.substr(0, 5) && e.push(t)
            }
            )),
            e = e.join(" "),
            bodyNode.setAttribute("data-useragent", e)
        }
        function D() {
            clearTimeout(window.__qlTimer),
            setTimeout((()=>clearTimeout(window.__qlTimer)), 2e3)
        }
        function A(e) {
            if (l.browserFeatures.cmaEnabled && window.ResizeObserver && (0,
            o.val)("quick_email") && void 0 !== window.PasswordCredential) {
                var t = new PasswordCredential({
                    id: (0,
                    o.ge)("quick_email").value,
                    password: (0,
                    o.ge)("quick_pass").value,
                    name: e.name,
                    iconURL: e.photo_50
                });
                navigator.credentials.store(t)
            }
        }
        function S(e, t) {
            D(),
            A(t),
            nav.reload({
                force: !0,
                from: 6
            })
        }
        function P(e, t) {
            switch (D(),
            e) {
            case -1:
                location.href = location.href.replace(/^http:/, "https:");
                break;
            case 4:
                var n = "/login?m=1" + (t.expire ? "&s=0" : "");
                (0,
                c.each)(["email", "ul", "pch", "to"], (function(e, r) {
                    t[r] && (n += "&" + r + "=" + t[r])
                }
                )),
                location.href = n;
                break;
            case 7:
                location.href = "/login?m=7";
                break;
            default:
                location.href = "/login"
            }
        }
        function O(e, t) {
            D(),
            (0,
            i.unlockButton)(window.__qfBtn),
            window.qloginBox = (0,
            _.showCaptchaBox)(e, t, window.qloginBox, {
                onSubmit: function(e, t) {
                    (0,
                    o.ge)("quick_captcha_sid").value = e,
                    (0,
                    o.ge)("quick_captcha_key").value = t,
                    (0,
                    o.ge)("quick_login_form").submit()
                },
                onHide: ()=>window.qloginBox = !1
            })
        }
        function I(e, t) {
            D(),
            (0,
            i.unlockButton)(window.__qfBtn),
            window.qloginBox = (0,
            _.showReCaptchaBox)(e, t, window.qloginBox, {
                onSubmit: function(e) {
                    (0,
                    o.ge)("quick_recaptcha").value = e,
                    (0,
                    o.ge)("quick_login_form").submit()
                },
                onHide: ()=>window.qloginBox = !1
            })
        }
        function M(e, t) {
            (0,
            o.setStyle)(e, {
                backgroundColor: "#F5F7FA"
            }),
            (0,
            a.animate)(e, {
                backgroundColor: "#FFF"
            }, t || 6e3, (function(e) {
                (0,
                o.setStyle)(e, {
                    backgroundColor: null
                })
            }
            ))
        }
        function R() {
            window._postsSeen = {},
            window._postsSaved = {},
            window._postsSaveTimer = void 0,
            window._postsSendTimer = void 0,
            window._postsCleanTimer = void 0,
            window._postsSeenModules = {},
            window._postsExtras = {}
        }
    }
    ,
    768883: (e,t,n)=>{
        "use strict";
        n.d(t, {
            collectMemoryStats: ()=>a,
            statDurationsLoadImage: ()=>s,
            statNavigationTiming: ()=>c
        });
        var r = n(460615)
          , i = n(695724);
        function o(e, t) {
            for (var n, r = 0; r < t.length; r++)
                if (">" === (n = t[r]))
                    n = ">" + t[r - 1];
                else {
                    if (1e3 * n > e) {
                        n = "<" + n;
                        break
                    }
                    n = !1
                }
            return n
        }
        function a() {
            var e = {}
              , t = [15, 60, 300, 1500, 5e3, 1e4, 15e3, 2e4, 25e3, 3e4]
              , n = [300, 1500, 5e3, 3e4, 6e4, 12e4, ">"]
              , i = !1;
            setInterval((function() {
                var a = window.cur && window.cur.module;
                a !== i && (e = {},
                i = a);
                var s = window.vkLastNav;
                if (a && s) {
                    var c = o(Date.now() - s, t);
                    if (c && !e[c]) {
                        var _ = o(Date.now() - window.vkTabLoaded, n);
                        e[c] = !0;
                        var l = performance.memory.usedJSHeapSize;
                        (0,
                        r.statlogsValueEvent)("js_memory_stats_modules", l, a, c, _)
                    }
                }
            }
            ), 5e3)
        }
        function s() {
            if (Math.random() < .001 && window.performance && window.performance.getEntriesByType) {
                if (window.clientStatsInited)
                    return !1;
                var e = window.performance.getEntriesByType("resource");
                if (!e)
                    return !1;
                for (var t = {}, n = {}, o = 0; o < e.length; o++)
                    if (e[o] && "img" === e[o].initiatorType)
                        if (e[o].duration < 100)
                            t["<100"] = (t["<100"] || 0) + 1;
                        else if (e[o].duration < 250)
                            t["100-250"] = (t["100-250"] || 0) + 1;
                        else if (e[o].duration < 500)
                            t["250-500"] = (t["250-500"] || 0) + 1;
                        else if (e[o].duration < 1e3)
                            t["500-1000"] = (t["500-1000"] || 0) + 1;
                        else if (e[o].duration < 2e3)
                            t["1000-2000"] = (t["1000-2000"] || 0) + 1;
                        else if (e[o].duration < 5e3)
                            t["2000-5000"] = (t["2000-5000"] || 0) + 1;
                        else if (t[">5000"] = (t[">5000"] || 0) + 1,
                        e[o].name && e[o].name.indexOf("pp.vk.me") > 0) {
                            var a = "";
                            (a = (a = e[o].name).substr(a.indexOf("pp.vk.me") + 9)).indexOf("/") > 0 && (n[a = a.substr(0, a.indexOf("/"))] = (n[a] || 0) + 1)
                        }
                (0,
                i.each)(t, ((e,t)=>(0,
                r.statlogsValueEvent)("img_load", t, e))),
                (0,
                i.each)(n, ((e,t)=>(0,
                r.statlogsValueEvent)("img_slow", t, e))),
                window.clientStatsInited = !0
            }
        }
        function c() {
            if (window.clientStatsInitedNT)
                return !1;
            if (window.performance && performance.timing) {
                if (Math.random() > .001 && !__dev)
                    return !1;
                var e = {}
                  , t = window.cur && window.cur.module;
                performance.timing.redirectStart && performance.timing.redirectEnd && (e.redirect = performance.timing.redirectEnd - performance.timing.redirectStart),
                performance.timing.domainLookupStart && performance.timing.domainLookupEnd && (e.domainLookup = performance.timing.domainLookupEnd - performance.timing.domainLookupStart),
                performance.timing.connectStart && performance.timing.connectEnd && (e.connect = performance.timing.connectEnd - performance.timing.connectStart,
                performance.timing.secureConnectionStart && (e.secureConnection = performance.timing.connectEnd - performance.timing.secureConnectionStart)),
                performance.timing.requestStart && performance.timing.responseStart && (e.request = performance.timing.responseStart - performance.timing.requestStart,
                performance.timing.responseEnd && (e.response = performance.timing.responseEnd - performance.timing.responseStart)),
                performance.timing.unloadEventStart && performance.timing.unloadEventEnd && (e.unloadEvent = performance.timing.unloadEventEnd - performance.timing.unloadEventStart),
                performance.timing.domLoading && performance.timing.domComplete && (e.processing = performance.timing.domComplete - performance.timing.domLoading),
                performance.timing.domContentLoadedEventStart && performance.timing.domContentLoadedEventEnd && (e.domContentLoadedEvent = performance.timing.domContentLoadedEventEnd - performance.timing.domContentLoadedEventStart),
                performance.timing.loadEventStart && performance.timing.loadEventEnd && (e.loadEvent = performance.timing.loadEventEnd - performance.timing.loadEventStart),
                performance.timing.loadEventEnd && performance.timing.responseEnd && (e.resource = performance.timing.loadEventEnd - performance.timing.responseEnd),
                (0,
                i.each)(e, ((e,n)=>(0,
                r.statlogsValueEvent)("navigation_timing", n, e, t))),
                window.clientStatsInitedNT = !0
            }
        }
    }
    ,
    791963: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>r
        });
        const r = n(98234)
    }
    ,
    787910: (e,t,n)=>{
        "use strict";
        n.d(t, {
            shortCurrency: ()=>o
        });
        var r = n(695724)
          , i = n(315544);
        function o() {
            var e = {};
            (0,
            r.each)((0,
            i.geByClass)("_short_currency"), (function() {
                var t = (0,
                i.domData)(this, "short") || "";
                if (!t)
                    return !0;
                var n = this.innerHTML
                  , o = (0,
                r.winToUtf)(n).length
                  , a = (0,
                i.getStyle)(this, "fontFamily") || "tahoma,arial,sans-serif";
                if (void 0 === e[a]) {
                    for (var s = "", c = o - 1; c >= 0; c--)
                        s += "&#8399;";
                    var _ = (0,
                    i.ce)("div", {
                        innerHTML: `<b>${n}</b><b>${s}</b>`
                    }, {
                        fontFamily: a,
                        fontSize: "24px"
                    });
                    (0,
                    i.ge)("utils").appendChild(_),
                    e[a] = Math.abs(_.firstChild.offsetWidth - _.lastChild.offsetWidth) >= 2 * o,
                    (0,
                    i.re)(_)
                }
                !1 === e[a] && (0,
                i.val)(this, t)
            }
            ))
        }
    }
    ,
    654612: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            MessageBox: ()=>MessageBox,
            showBox: ()=>showBox,
            showTabbedBox: ()=>showTabbedBox,
            showFastBox: ()=>showFastBox,
            showCaptchaBox: ()=>showCaptchaBox,
            showReCaptchaBox: ()=>showReCaptchaBox
        });
        var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66108)
          , core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(296253)
          , core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(175115)
          , core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(751876)
          , _ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(386409)
          , _debug_tools__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(787481)
          , _dom_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49535)
          , _ui_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(159121)
          , _dom__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(315544)
          , _fx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(635676)
          , _utils_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(695724)
          , _lang__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(786067)
          , _shared_lib_convert__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(668040)
          , _box_utils__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(486125)
          , _accessibility__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(376270)
          , _web_helpers_classnames__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(483295)
          , _icons_desktop_getIcon24Cancel__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(420130)
          , _icons_desktop_getIcon24BrowserBack__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(439026)
          , _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(124041)
          , _shared_lib_dom__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(830104)
          , _vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(659397);
        function MessageBox(_options) {
            var defaults = {
                title: !1,
                titleControls: "",
                containerClass: "",
                width: 450,
                height: "auto",
                animSpeed: 0,
                bodyStyle: {},
                grey: !1,
                white: !1,
                selfDestruct: !0,
                progress: !1,
                hideOnBGClick: !1,
                hideButtons: !1,
                onShow: !1,
                onHideAttempt: !1,
                onBeforeHide: !1,
                onHide: !1,
                onClean: !1,
                onDestroy: !1,
                preventHideLastWithCheck: !1,
                refreshCoordsOnTimeout: !1
            }, options = (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_10__.extend)(defaults, _options), guid = window._message_box_guid++, visible = !1, btns = {
                ok: [],
                cancel: []
            }, boxTitleBck, retBox;
            options.progress || (options.progress = "box_progress" + guid);
            var controlsStyle = options.hideButtons ? ' style="display: none"' : ""
              , boxContainer = (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.ce)("div", {
                className: (0,
                _web_helpers_classnames__WEBPACK_IMPORTED_MODULE_17__.classNames)("popup_box_container", options.containerClass),
                innerHTML: `\n<div class="box_layout" onclick="boxQueue.skip=true;">\n  <div class="box_title_wrap">\n    <div class="box_x_button" aria-label="${(0,
                _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_close")}" tabindex="0" role="button">${(0,
                _icons_desktop_getIcon24Cancel__WEBPACK_IMPORTED_MODULE_18__.getIcon24Cancel)().icon}</div>\n    <div class="box_title_controls"></div>\n    <div class="box_title"></div>\n  </div>\n\n  <div class="box_body"></div>\n  ${options.noControls ? "" : `\n  <div class="box_controls_wrap" ${controlsStyle}>\n    <div class="box_controls">\n      <div class="box_controls_buttons fl_r"></div>\n\n      <div class="progress" id="${options.progress}"></div>\n\n      <div class="box_controls_text">${options.textControls || ""}</div>\n    </div>\n  <div>`}\n</div>`
            }, {
                display: "none"
            });
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxContainer);
            var boxTitleWrap = boxContainer.querySelector(".box_title_wrap")
              , boxCloseButton = boxTitleWrap.querySelector(".box_x_button")
              , boxTitle = boxTitleWrap.querySelector(".box_title")
              , boxTitleControls = boxTitleWrap.querySelector(".box_title_controls");
            options.noCloseButton && (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxCloseButton);
            var boxBody = boxContainer.querySelector(".box_body"), boxControlsWrap = boxContainer.querySelector(".box_controls_wrap"), boxButtons, boxProgress, boxControlsText;
            boxControlsWrap && (boxButtons = boxControlsWrap.querySelector(".box_controls_buttons"),
            boxProgress = boxControlsWrap.querySelector(".progress"),
            boxControlsText = boxControlsWrap.querySelector(".box_controls_text")),
            boxLayer.appendChild(boxContainer),
            boxContainer.setAttribute("tabindex", 0),
            boxContainer.focus(),
            applyBodyStyle(options.bodyStyle),
            refreshBox(),
            (0,
            _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxContainer);
            var emitter = new EventEmitter;
            function applyBodyStyle(e) {
                if ("string" == typeof e)
                    for (var t = e.split(";"), n = 0, r = t.length; n < r; n++) {
                        var i = t[n].split(":");
                        i.length > 1 && i[0].length && (boxBody.style[(0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_10__.trim)(i[0])] = (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_10__.trim)(i[1]),
                        boxBody.style.setProperty && boxBody.style.setProperty((0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_10__.trim)(i[0]), (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_10__.trim)(i[1]), ""))
                    }
                else
                    (0,
                    _vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_16__.isObject)(e) && Object.assign(boxBody.style, e)
            }
            function refreshBox() {
                boxTitleBck || (options.title ? (boxTitle.innerHTML = options.title,
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.removeClass)(boxBody, "box_no_title"),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxTitleWrap)) : ((0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.addClass)(boxBody, "box_no_title"),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxTitleWrap))),
                options.titleTransparent && (boxTitleWrap.classList.add("box_title_wrap--transparent"),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxTitleWrap)),
                options.titleControls && (boxTitleControls.innerHTML = options.titleControls),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.toggleClass)(boxBody, "box_no_buttons", options.hideButtons),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.toggleClass)(boxTitleWrap, "box_grey", options.grey),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.toggleClass)(boxTitleWrap, "box_white", options.white),
                boxContainer.style.width = "string" == typeof options.width ? options.width : options.width + "px",
                boxContainer.style.height = "string" == typeof options.height ? options.height : options.height + "px"
            }
            function addButtonInternal(e, t, n, r) {
                var i;
                "no" === n || "gray" === n ? (i = _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_15__.FlatButtonAppearance.TERTIARY,
                n = "cancel") : (i = _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_15__.FlatButtonAppearance.PRIMARY,
                n = "ok");
                var o = _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_15__.FlatButton.render({
                    appearance: i,
                    size: _web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_15__.FlatButtonSize.M,
                    children: e,
                    restAttrs: {
                        id: r
                    }
                });
                return o.addEventListener("click", (e=>{
                    emitter.emit(n, retBox),
                    t.apply(null, [o, e])
                }
                )),
                boxButtons.prepend(o),
                btns[n].push(o),
                o
            }
            function setControlsText(e) {
                boxControlsText.innerHTML = e
            }
            function _removeButtons() {
                (0,
                _shared_lib_dom__WEBPACK_IMPORTED_MODULE_19__.emptyNode)(boxButtons),
                btns.ok.length = btns.cancel.length = 0
            }
            var destroyMe = function() {
                (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(options.onClean) && options.onClean(),
                (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(options.onDestroy) && options.onDestroy(),
                options.noControls || _removeButtons(),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.cleanElems)(boxContainer, boxCloseButton, boxTitleWrap, options.noControls ? void 0 : boxControlsWrap),
                boxLayer.removeChild(boxContainer),
                delete window._message_boxes[guid]
            }
              , hideMe = function(e, t, n) {
                if (visible) {
                    visible = !1;
                    var r = !0 === e ? 0 : options.animSpeed;
                    options.hideOnBGClick && (0,
                    _dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(document, "click", boxQueue.hideBGClick),
                    (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(options.onBeforeHide) && options.onBeforeHide();
                    var i = function() {
                        boxQueue.currHiding === _message_boxes[guid] && (boxQueue.currHiding = !1),
                        _message_boxes[guid].shOther || e || layers.boxhide(),
                        !t && options.selfDestruct ? destroyMe() : (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxContainer),
                        (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(options.onHide) && options.onHide(n),
                        retBox.emit("afterHide", retBox)
                    };
                    r > 0 ? (boxQueue.currHiding = _message_boxes[guid],
                    (0,
                    _fx__WEBPACK_IMPORTED_MODULE_9__.fadeOut)(boxContainer, r, i)) : i()
                }
            };
            function showMe(e, t, n) {
                if (!visible && window._message_boxes[guid] && !window._message_boxes[guid].forceHide) {
                    visible = !0;
                    var r = !0 === e || t ? 0 : options.animSpeed;
                    if (options.hideOnBGClick && (0,
                    _dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(document, "click", boxQueue.hideBGClick),
                    t || layers.boxshow(),
                    boxQueue.currHiding) {
                        boxQueue.currHiding.shOther = !0;
                        var i = boxQueue.currHiding.bodyNode.parentNode.parentNode;
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.data)(i, "tween").stop(!0)
                    }
                    r > 0 ? (0,
                    _fx__WEBPACK_IMPORTED_MODULE_9__.fadeIn)(boxContainer, r) : (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxContainer),
                    (0,
                    _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxContainer),
                    options.onShow && options.onShow(n)
                }
            }
            return (0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(boxCloseButton, "click", boxQueue.hideLast),
            (0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(boxCloseButton, "keydown", (e=>{
                "Enter" === e.key && boxQueue.hideAll()
            }
            )),
            retBox = window._message_boxes[guid] = {
                guid,
                _show: showMe,
                _hide: hideMe,
                bodyNode: boxBody,
                controlsTextNode: boxControlsText,
                titleWrap: boxTitleWrap,
                btns,
                show: function() {
                    return boxQueue._show(guid),
                    this
                },
                progress: boxProgress,
                showCloseProgress: _dom__WEBPACK_IMPORTED_MODULE_8__.addClass.pbind(boxTitleWrap, "box_loading"),
                hideCloseProgress: _dom__WEBPACK_IMPORTED_MODULE_8__.removeClass.pbind(boxTitleWrap, "box_loading"),
                showProgress: function() {
                    (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxControlsText),
                    (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxProgress)
                },
                hideProgress: function() {
                    (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxProgress),
                    (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxControlsText)
                },
                hide: function(e) {
                    return !((0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(options.onHideAttempt) && !options.onHideAttempt(e)) && (boxQueue._hide(guid),
                    !0)
                },
                isVisible: function() {
                    return visible
                },
                bodyHeight: function() {
                    return (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.getStyle)(boxBody, "height")
                },
                content: function(e) {
                    return options.onClean && options.onClean(),
                    "string" == typeof e ? boxBody.innerHTML = e : e instanceof HTMLElement && (boxBody.innerHTML = "",
                    boxBody.appendChild(e)),
                    options.refreshCoordsOnTimeout ? setTimeout((()=>{
                        (0,
                        _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxContainer)
                    }
                    )) : (0,
                    _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxContainer),
                    boxContainer.focus(),
                    refreshBox(),
                    (0,
                    _accessibility__WEBPACK_IMPORTED_MODULE_14__.updateAriaElements)(),
                    this
                },
                emit: function(e, t) {
                    emitter.emit(e, t)
                },
                addButton: function(e, t, n, r, i) {
                    var o = addButtonInternal(e, t || this.hide, n, i);
                    return r ? o : this
                },
                setButtons: function(e, t, n, r) {
                    return _removeButtons(),
                    e ? (this.addButton(e, t),
                    n && this.addButton(n, r, "no"),
                    this) : this.addButton((0,
                    _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("box_close"))
                },
                setControlsText,
                removeButtons: function() {
                    return _removeButtons(),
                    this
                },
                setBackTitle: function(e) {
                    e ? (boxTitle.innerHTML = '<div class="back"><span class="back__icon">' + (0,
                    _icons_desktop_getIcon24BrowserBack__WEBPACK_IMPORTED_MODULE_20__.getIcon24BrowserBack)().icon + "</span>" + (0,
                    _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_box_title_back") + "</div>",
                    boxTitleBck = options.title,
                    options.title = boxTitle.innerHTML,
                    setTimeout((function() {
                        var t = boxTitle.querySelector(".back");
                        t && (t.onclick = e)
                    }
                    ), 100)) : boxTitleBck && (boxTitle.innerHTML = options.title = boxTitleBck,
                    boxTitleBck = !1)
                },
                destroy: destroyMe,
                getOptions: function() {
                    return options
                },
                on: function(e, t) {
                    emitter.on(e, t)
                },
                once: function(e, t) {
                    emitter.once(e, t)
                },
                updateBoxCoords: function() {
                    (0,
                    _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxContainer)
                },
                setOptions: function(e) {
                    return options.hideOnBGClick && (0,
                    _dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(document, "click", boxQueue.hideBGClick),
                    options = (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_10__.extend)(options, e),
                    "bodyStyle"in e && applyBodyStyle(options.bodyStyle),
                    options.hideOnBGClick && (0,
                    _dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(document, "click", boxQueue.hideBGClick),
                    (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.toggle)(boxControlsWrap, !options.hideButtons),
                    refreshBox(),
                    options.noRefreshCoords || (0,
                    _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxContainer),
                    this
                },
                evalBox: function evalBox(js, url, params) {
                    var scr = "((function() { return function() { var box = this; " + (js || "") + ";}; })())";
                    if (__debugMode) {
                        var fn = eval(scr);
                        fn.apply(this, [url, params])
                    } else
                        try {
                            var _fn = eval(scr);
                            _fn.apply(this, [url, params])
                        } catch (e) {
                            (0,
                            _ui_util__WEBPACK_IMPORTED_MODULE_7__.topError)(e, {
                                dt: 15,
                                type: 7,
                                url,
                                query: params ? (0,
                                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_12__.toQueryString)(params) : void 0,
                                js
                            }),
                            (0,
                            _debug_tools__WEBPACK_IMPORTED_MODULE_5__.logEvalError)(e, scr)
                        }
                },
                preventHideLastWithCheck: options.preventHideLastWithCheck,
                needHideLastCheck: options.needHideLastCheck,
                execInline: function(e) {
                    window.vk.inline[e](this),
                    delete window.vk.inline[e]
                }
            },
            retBox
        }
        function showBox(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}
              , r = arguments.length > 3 ? arguments[3] : void 0;
            if ((0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.checkEvent)(r))
                return !1;
            var i = n.params || {};
            n.containerClass && (i.containerClass = n.containerClass);
            var o = Date.now().toString(36);
            t && (t.boxhash = o);
            var a = new MessageBox(i);
            a.boxhash = o;
            var s = {
                onDone: function(r, s, c, _) {
                    if (n.preOnDone && n.onDone && n.onDone(a),
                    t && "function" == typeof t.onMessageSend && window.WriteBox && window.WriteBox.once("message_sended", t.onMessageSend),
                    a.isVisible())
                        if (__debugMode)
                            l();
                        else
                            try {
                                l()
                            } catch (n) {
                                (0,
                                _ui_util__WEBPACK_IMPORTED_MODULE_7__.topError)(n, {
                                    dt: 15,
                                    type: 103,
                                    url: e,
                                    query: (0,
                                    _shared_lib_convert__WEBPACK_IMPORTED_MODULE_12__.toQueryString)(t),
                                    answer: Array.prototype.slice.call(arguments).join("<!>")
                                }),
                                a.isVisible() && a.hide()
                            }
                    else
                        n.onDone && n.onDone(a, _);
                    function l() {
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxLayerBG),
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.addClass)(bodyNode, "layers_shown"),
                        a.setOptions({
                            title: r,
                            hideButtons: i.hideButtons || !1
                        }),
                        n.showProgress ? a.show() : (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.show)(a.bodyNode),
                        a.content(s),
                        n.noEval ? a.execInline(o) : a.evalBox(c, e, t),
                        n.onDone && n.onDone(a, _)
                    }
                },
                onFail: function(e) {
                    if (a.failed = !0,
                    setTimeout(a.hide, 0),
                    (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_10__.isFunction)(n.onFail))
                        return n.onFail(e)
                },
                cache: n.cache,
                stat: n.stat,
                fromBox: !0
            };
            return n.prgEl && (n.showProgress = _ui_util__WEBPACK_IMPORTED_MODULE_7__.showGlobalPrg.pbind(n.prgEl, {
                cls: n.prgClass,
                w: n.prgW,
                h: n.prgH,
                hide: !0
            }),
            n.hideProgress = _dom__WEBPACK_IMPORTED_MODULE_8__.hide.pbind("global_prg")),
            n.showProgress ? (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_10__.extend)(s, {
                showProgress: n.showProgress,
                hideProgress: n.hideProgress
            }) : (a.setOptions({
                title: !1,
                hideButtons: !0
            }).show(),
            (0,
            _box_utils__WEBPACK_IMPORTED_MODULE_13__.getBoxQueue)().count() < 2 && ((0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(boxLayerBG),
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.removeClass)(bodyNode, "layers_shown")),
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(a.bodyNode),
            s.showProgress = function() {
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.show)(boxLoader),
                (0,
                _box_utils__WEBPACK_IMPORTED_MODULE_13__.boxRefreshCoords)(boxLoader)
            }
            ,
            s.hideProgress = _dom__WEBPACK_IMPORTED_MODULE_8__.hide.pbind(boxLoader)),
            a.removeButtons().addButton((0,
            _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_close")),
            ajax.post(e, t, s),
            a
        }
        function showTabbedBox(e, t, n, r) {
            return (n = n || {}).stat = n.stat || [],
            n.stat.push(window.jsc("web/box.js"), "boxes.css"),
            showBox(e, t, n, r)
        }
        function showFastBox(e, t, n, r, i, o) {
            return new MessageBox("string" == typeof e ? {
                title: e
            } : e).content(t).setButtons(n, r, i, o).show()
        }
        function showCaptchaBox(e, t, n, r) {
            var i = function(t) {
                if (!t || void 0 === t.keyCode || 10 === t.keyCode || 13 === t.keyCode) {
                    var i = (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.geByTag1)("input", n.bodyNode);
                    if ((0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_10__.trim)(i.value) || !0 === t) {
                        var o = (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.geByTag1)("img", n.bodyNode)[0];
                        (0,
                        _dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(i),
                        (0,
                        _dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(o),
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.show)((0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.geByClass1)("progress", n.bodyNode)),
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.hide)(i),
                        r.onSubmit(e, i.value)
                    } else
                        (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.elfocus)(i)
                }
            }
              , o = !!n
              , a = (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_10__.intval)(t) ? "" : "&s=1"
              , s = r.imgSrc || "/captcha.php?sid=" + e + a;
            if (!o) {
                var c = `\n<div class="captcha">\n  <div><img src="${s}"/></div>\n  <div>\n    <input type="text" class="big_text" maxlength="7" placeholder="${(0,
                _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_captcha_input_here")}" />\n    <div class="progress" /></div>\n  </div>\n</div>` + (r.addText || "");
                n = showFastBox({
                    title: (0,
                    _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("captcha_enter_code"),
                    width: 305,
                    onHide: r.onHide,
                    onDestroy: r.onDestroy || !1
                }, c, (0,
                _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("captcha_send"), (function() {
                    n.submit()
                }
                ), (0,
                _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("captcha_cancel"), (function() {
                    var e = (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.geByTag1)("input", n.bodyNode)
                      , t = (0,
                    _dom__WEBPACK_IMPORTED_MODULE_8__.geByTag1)("img", n.bodyNode);
                    (0,
                    _dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(e),
                    (0,
                    _dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)(t),
                    n.hide()
                }
                ))
            }
            n.submit = i.pbind(!0),
            n.changed = !0;
            var _ = (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.geByTag1)("input", n.bodyNode)
              , l = (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.geByTag1)("img", n.bodyNode);
            return o && (_.value = "",
            l.src = "/captcha.php?sid=" + e + a,
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.hide)((0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.geByClass1)("progress", n.bodyNode))),
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.show)(_),
            (0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(_, "keypress", i),
            (0,
            _dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)(l, "click", (function() {
                this.src = "/captcha.php?sid=" + e + a + "&v=" + (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_10__.irand)(1e6, 2e6)
            }
            )),
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_8__.elfocus)(_),
            n
        }
        function showReCaptchaBox(e, t, n, r) {
            window.recaptchaResponse = function(e) {
                r.onSubmit(e)
            }
            ;
            var i = !!n
              , o = !!window.grecaptcha;
            if (!i) {
                o || (window.recaptchaCallback = function() {
                    var t = (0,
                    _box_utils__WEBPACK_IMPORTED_MODULE_13__.curBox)();
                    if (t) {
                        var n = (0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.geByClass1)("recaptcha", t.bodyNode);
                        n && ((0,
                        _dom__WEBPACK_IMPORTED_MODULE_8__.val)(n, ""),
                        window.grecaptcha.render(n, {
                            sitekey: e,
                            callback: window.recaptchaResponse
                        }))
                    }
                }
                ,
                headNode.appendChild((0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.ce)("script", {
                    type: "text/javascript",
                    src: "https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl=" + t
                })));
                var a = '<div class="recaptcha"></div>' + (r.addText || "");
                n = showFastBox({
                    title: (0,
                    _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("global_recaptcha_title"),
                    width: 354,
                    onHide: r.onHide,
                    onDestroy: r.onDestroy || !1
                }, a, (0,
                _lang__WEBPACK_IMPORTED_MODULE_11__.getLang)("captcha_cancel"));
                var s = (0,
                _dom__WEBPACK_IMPORTED_MODULE_8__.geByClass1)("recaptcha", n.bodyNode);
                s.id = "recaptcha" + (n.guid ? n.guid : "0"),
                (0,
                _ui__WEBPACK_IMPORTED_MODULE_4__.showProgress)(s)
            }
            return i && o ? window.grecaptcha.reset() : o && window.recaptchaCallback(),
            n.changed = !0,
            n
        }
    }
    ,
    516604: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            default: ()=>__WEBPACK_DEFAULT_EXPORT__
        });
        var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(175115)
          , core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66108)
          , core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(940851)
          , core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(296253)
          , core_js_modules_es6_regexp_search__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(976142)
          , core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(751876)
          , core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59357)
          , core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(283946)
          , core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(21466)
          , _shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(160617)
          , _web_lib_date__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(289988)
          , _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(486125)
          , _utils_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(695724)
          , _shared_lib_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(40906)
          , _ads__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(778273)
          , _debug_tools__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(787481)
          , _dom__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(315544)
          , _dom_events__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(49535)
          , _scroll__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(803834)
          , _ui_util__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(159121)
          , _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(668040)
          , _nav_utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(447215)
          , _shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(533304)
          , _layout_utils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(635429)
          , _video__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(325489)
          , _legacy_performance_stats__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(768883)
          , _shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(726271)
          , _feature_entries__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(850167)
          , _accessibility__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(376270)
          , _top_search__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(689433)
          , _stl__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(363604)
          , _utils__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(982452)
          , _message_box__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(654612)
          , _lang__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(786067)
          , _shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(649846)
          , _web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(553429)
          , _shared_evbus__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(182804)
          , _shared_user_user_env__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(19331)
          , _shared_network_stats_module_navigation_module_navigation_collector__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(816426)
          , _shared_network_stats__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(830648)
          , _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(479957);
        function _extends() {
            return _extends = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            _extends.apply(this, arguments)
        }
        var SHOW_MORE_APPS_SHOWN_CLASSNAME = "show_more_apps_container_shown", SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME = "show_more_apps_button_hidden", updateCountersTimeout, Nav = {
            getData: function(e) {
                if (e.length) {
                    for (var t in navMap) {
                        if (navMap.hasOwnProperty(t))
                            if ("<" !== t[0])
                                if (e.match(new RegExp("^" + t,"i")))
                                    return navMap[t][2] ? null : {
                                        url: navMap[t][0],
                                        files: navMap[t][1]
                                    }
                    }
                    return e.match(/^[a-z0-9\-_]+\.php$/i) ? {
                        url: e
                    } : {
                        url: navMap["<other>"][0],
                        files: navMap["<other>"][1]
                    }
                }
                return {
                    url: navMap["<void>"][0],
                    files: navMap["<void>"][1]
                }
            },
            reload: function(e) {
                if (!(0,
                _nav_utils__WEBPACK_IMPORTED_MODULE_21__.reloadCheckFlood)(e)) {
                    e = e || {};
                    var t = Nav.strLoc.replace(/^\/+/g, "");
                    e.force ? (hab.stop(),
                    location.href = "/" + t) : (TopNotifier.invalidate(),
                    Nav.go("/" + t, void 0, (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)({
                        nocur: !0
                    }, e)))
                }
            },
            link: function(e, t) {
                if ((0,
                _dom_events__WEBPACK_IMPORTED_MODULE_17__.checkEvent)(t) || cur.noAjaxNav) {
                    var n = (0,
                    _shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_9__.toMaybeVKSiteURLRelativeName)(e);
                    window.open(n)
                } else
                    Nav.go(e)
            },
            go: function go(loc, ev) {
                var opts = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                if (Nav.showLessApps(),
                loc && loc.href && loc.getAttribute && loc.getAttribute("data-change-location-with-post-away")) {
                    var newLink = loc.href
                      , _postParams = Nav.getPostParams(loc, !(!opts.params || !opts.params._post_click_type))
                      , postOptions = Nav.mergePostParamsOptions(_postParams, opts.params)
                      , extraQuery = {};
                    return postOptions._post && (extraQuery.post = postOptions._post,
                    postOptions._post_ad_data && (extraQuery.post_ad_data = postOptions._post_ad_data),
                    postOptions._post_click_cc_key && (extraQuery.cc_key = postOptions._post_click_cc_key),
                    newLink = "/away.php?to=" + encodeURIComponent(newLink) + "&" + (0,
                    _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__.toQueryString)(extraQuery)),
                    location.href = newLink,
                    !1
                }
                if (!(0,
                _dom_events__WEBPACK_IMPORTED_MODULE_17__.checkEvent)(ev) && !cur.noAjaxNav) {
                    if (LongView.onBeforePageChange(),
                    loc.tagName && "a" === loc.tagName.toLowerCase()) {
                        if ("_blank" === loc.target || Nav.baseBlank)
                            return;
                        var _params = loc.getAttribute("hrefparams");
                        if (_params && (opts.params = (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)(opts.params || {}, (0,
                        _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__.fromQueryString)(_params))),
                        loc = loc.href || "",
                        ev && (!loc || !(0,
                        _shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_9__.isVKSiteURLForNav)(loc)))
                            return
                    }
                    var strLoc = ""
                      , objLoc = {}
                      , changed = {};
                    "string" == typeof loc ? (loc = (0,
                    _shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_9__.toMaybeVKSiteURLRelativeName)(loc),
                    strLoc = loc,
                    objLoc = Nav.fromStr(loc)) : (loc[0] || (loc[0] = ""),
                    strLoc = Nav.toStr(loc),
                    objLoc = loc),
                    opts.hard && (location.href = strLoc),
                    cur.isCurrentVideoLayer && !objLoc.section && -1 !== objLoc[0].indexOf("/playlist/") && (objLoc.section = "album_" + objLoc[0].split("_")[1]);
                    var bugtrackerLocations = /(^bug\d+|^bugs$|^bugs_mng$|^bugtracker_adm$)/;
                    if (!(-1 !== Nav.objLoc[0].search(bugtrackerLocations) && -1 === objLoc[0].search(bugtrackerLocations) || -1 === Nav.objLoc[0].search(bugtrackerLocations) && -1 !== objLoc[0].search(bugtrackerLocations))) {
                        (0,
                        _legacy_performance_stats__WEBPACK_IMPORTED_MODULE_25__.statDurationsLoadImage)(),
                        (0,
                        _legacy_performance_stats__WEBPACK_IMPORTED_MODULE_25__.statNavigationTiming)(),
                        0 === strLoc.indexOf("market") && window.MarketAnalyticsManager && window.MarketAnalyticsManager.setScreen(window.cur.module);
                        var donutLinkRegex = /^donut\/([A-Za-z0-9_\.]{2,32})/;
                        if (!opts.skipDonutLinkCheck && strLoc.match(donutLinkRegex)) {
                            var source = "direct_link"
                              , parsedLoc = strLoc.match(donutLinkRegex)
                              , ownerDomain = parsedLoc[1]
                              , groupDoesntExistsCallback = ()=>{
                                nav.go(strLoc, ev, _extends({}, opts, {
                                    skipDonutLinkCheck: !0
                                }))
                            }
                            ;
                            return (0,
                            _feature_entries__WEBPACK_IMPORTED_MODULE_27__.showDonutSubscribePopup)(null, null, null, source, "", {
                                type: "subscribe",
                                fromSnippet: !0,
                                onFailCallback: groupDoesntExistsCallback,
                                params: {
                                    act: "subscribe_popup"
                                }
                            }, ownerDomain),
                            !1
                        }
                        var ap = (0,
                        _feature_entries__WEBPACK_IMPORTED_MODULE_27__.getAudioPlayer)();
                        if (ap && ap.updateCurrentPlaying && ap.updateCurrentPlaying(),
                        !opts.nocur) {
                            for (var i in changed = (0,
                            _utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(objLoc),
                            Nav.objLoc)
                                Nav.objLoc.hasOwnProperty(i) && (Nav.objLoc[i] === changed[i] ? delete changed[i] : void 0 === changed[i] && (changed[i] = !1));
                            if (!1 === (0,
                            _nav_utils__WEBPACK_IMPORTED_MODULE_21__.zNav)((0,
                            _utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(changed), {
                                hist: opts.hist,
                                asBox: opts.asBox,
                                onDone: opts.onDone
                            }, objLoc))
                                return Nav.setLoc(strLoc),
                                !1;
                            bookmarksNav(ev, strLoc);
                            var onArticleNavBack = cur._back && cur._back.hasOwnProperty("onArticleNavBack") ? cur._back.onArticleNavBack : null
                              , isHandled = articleNav(strLoc, Nav.toStr(Nav.objLoc), opts.back, onArticleNavBack, ev);
                            if (isHandled)
                                return Promise.resolve(isHandled).then((()=>{
                                    strLoc = cleanArticleUrlByObjLoc(objLoc),
                                    Nav.setLoc(strLoc, !0),
                                    (Nav.objLoc.z || Nav.objLoc.w) && (0,
                                    _nav_utils__WEBPACK_IMPORTED_MODULE_21__.zNav)({
                                        z: Nav.objLoc.z,
                                        w: Nav.objLoc.w
                                    }, {})
                                }
                                )),
                                !1;
                            var isHandledAuthorPage = authorPageNav(strLoc, Nav.toStr(Nav.objLoc), opts.back, opts.postId);
                            if (isHandledAuthorPage)
                                return window.AuthorPage && window.AuthorPage.isOpen() && cur.articleEditorLayer && cur.articleEditorLayer.hide(!1),
                                cur._hardNav ? (window.location.href = strLoc,
                                !1) : (Nav.setLoc(strLoc),
                                (Nav.objLoc.z || Nav.objLoc.w) && (0,
                                _nav_utils__WEBPACK_IMPORTED_MODULE_21__.zNav)({
                                    z: Nav.objLoc.z,
                                    w: Nav.objLoc.w
                                }, {}),
                                !1)
                        }
                        if (!opts.nocur && (vk.loaded || !changed[0]))
                            for (var curnav = cur.nav || [], _i = curnav.length - 1; _i >= 0; _i--) {
                                var oldUrl = document.URL;
                                if (!1 === curnav[_i]((0,
                                _utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(changed), Nav.objLoc, objLoc, opts)) {
                                    var currentURL = `${locProtocol}//${location.host}/${strLoc}`
                                      , referrer = oldUrl === currentURL ? "" : oldUrl;
                                    return updateCountersTimeout && clearTimeout(updateCountersTimeout),
                                    updateCountersTimeout = setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_22__.updateCounters.pbind(currentURL, referrer), 10),
                                    !1
                                }
                            }
                        if (4 === vk.al || !vk.loaded && (!window.audioPlayer || !audioPlayer.player) && changed[0])
                            return setTimeout((function() {
                                location.href = "/" + (strLoc || "").replace("%23", "#")
                            }
                            ), 0),
                            !1;
                        if (window.Upload && Upload.terminateAllUploads(),
                        (0,
                        _top_search__WEBPACK_IMPORTED_MODULE_29__.topHeaderClose)(),
                        opts.back) {
                            if (cur._back && cur._back.onBack)
                                return cur._back.onBack(strLoc);
                            for (var _i2 = 0, l = globalHistory.length; _i2 < l; _i2++)
                                if (globalHistory[_i2].loc === strLoc) {
                                    var _ret = function() {
                                        var e = globalHistory.splice(_i2, 1)[0]
                                          , t = (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wrap3")
                                          , n = (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("title")
                                          , r = cur._onback;
                                        return window.tooltips && tooltips.destroyAll(),
                                        (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.hide)("audio_tip_wrap"),
                                        (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.processDestroy)(cur),
                                        window.radioBtns = e.radioBtns,
                                        window.ajaxCache = e.ajaxCache,
                                        window.PageID = e.pid,
                                        boxQueue.hideAll(!1, !0),
                                        layerQueue.clear(),
                                        layers.fullhide && layers.fullhide(!0),
                                        (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.showBackLink)(),
                                        window.cur = e.cur,
                                        setTimeout((function() {
                                            if (t.innerHTML = "",
                                            t.parentNode.replaceChild(e.content, t),
                                            vk.width === e.width && vk.width_dec === e.width_dec && vk.width_dec_footer === e.width_dec_footer || (0,
                                            _nav_utils__WEBPACK_IMPORTED_MODULE_21__.handlePageView)(e),
                                            (0,
                                            _scroll__WEBPACK_IMPORTED_MODULE_18__.scrollToY)(e.scrollTop, 0),
                                            (0,
                                            _dom__WEBPACK_IMPORTED_MODULE_16__.setDocumentTitle)(e.htitle),
                                            n && (n.innerHTML = e.title,
                                            (0,
                                            _dom__WEBPACK_IMPORTED_MODULE_16__.setStyle)(n.parentNode, "display", e.hideHeader ? "none" : "block")),
                                            e.bodyClass !== bodyNode.className && (bodyNode.className = e.bodyClass || "",
                                            vk.body_class = e.bodyClass || ""),
                                            cur._back.show)
                                                for (var i = 0, o = cur._back.show.length; i < o; i++)
                                                    cur._back.show[i]();
                                            if (!cur.noquickreg && (0,
                                            _shared_lib_common__WEBPACK_IMPORTED_MODULE_13__.isFunction)(window.changeQuickRegButton) && window.changeQuickRegButton(!1),
                                            r)
                                                for (var a = 0, s = r.length; a < s; a++)
                                                    r[a]();
                                            Nav.setLoc(strLoc);
                                            var c = e.back || {};
                                            setTimeout((function() {
                                                _shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__.navigationStat.addStatEvent(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__.navigationStat.getModule(), _shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__.NavigationProductionStatEventTypes.BACK),
                                                (0,
                                                _nav_utils__WEBPACK_IMPORTED_MODULE_21__.showBackLink)(c[0], c[1], c[2]),
                                                (Nav.objLoc.z || Nav.objLoc.w) && (0,
                                                _nav_utils__WEBPACK_IMPORTED_MODULE_21__.zNav)({
                                                    z: Nav.objLoc.z,
                                                    w: Nav.objLoc.w
                                                }, {}),
                                                (0,
                                                _stl__WEBPACK_IMPORTED_MODULE_30__.updateSTL)(),
                                                (0,
                                                _nav_utils__WEBPACK_IMPORTED_MODULE_21__.updateLeftMenu)(),
                                                (0,
                                                _accessibility__WEBPACK_IMPORTED_MODULE_28__.updateAriaElements)(),
                                                _top_search__WEBPACK_IMPORTED_MODULE_29__.default.clear()
                                            }
                                            ), 10),
                                            (0,
                                            _feature_entries__WEBPACK_IMPORTED_MODULE_27__.getAudioPlayer)().updateCurrentPlaying()
                                        }
                                        ), 10),
                                        {
                                            v: !1
                                        }
                                    }();
                                    if ("object" == typeof _ret)
                                        return _ret.v
                                }
                        }
                        var dest = objLoc[0], where;
                        delete objLoc[0];
                        try {
                            where = Nav.getData(dest)
                        } catch (e) {
                            where = null
                        }
                        if (null === where) {
                            if (opts.throwErrorOnDisabledPath)
                                throw new Error("AL navigation is disabled for this path");
                            return !0
                        }
                        opts.noframe || (opts.tstat = ajax.tGetParam(),
                        ajax.tStart = (new Date).getTime(),
                        opts.bench = !0),
                        opts.params && opts.params._ref || (opts.params = (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)(opts.params || {}, {
                            _ref: Nav.objLoc[0] || ""
                        })),
                        where.files && window.stManager.add(where.files),
                        where.params = (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)({
                            __query: dest,
                            al_id: vk.id
                        }, objLoc, opts.params || {});
                        var postParamsEl = ev && ev.target && ev.target.getAttribute ? ev.target : loc && loc.getAttribute ? loc : null
                          , postParams = Nav.getPostParams(postParamsEl, !!where.params._post_click_type);
                        where.params = Nav.mergePostParamsOptions(postParams, where.params),
                        opts.cl_id && (where.params.fr_click = cur.oid + "," + opts.cl_id + "," + cur.options.fr_click),
                        opts.tstat && (where.params._tstat = opts.tstat),
                        opts.permanent && (where.params._permanent = opts.permanent);
                        var curNavVersion = ++window.NextPageID
                          , done = function done(title, html, js, params) {
                            if (curNavVersion === window.NextPageID) {
                                try {
                                    params._id = params.id
                                } catch (e) {
                                    return (0,
                                    _ui_util__WEBPACK_IMPORTED_MODULE_19__.topError)(e, {
                                        dt: 15,
                                        type: 6,
                                        msg: `Error: ${e.message}, (params undefined?), title: ${title}, html: ${html}, js: ${js}`,
                                        url: where.url,
                                        query: (0,
                                        _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__.toQueryString)(where.params),
                                        answer: arguments.length
                                    })
                                }
                                var execTqTasks = e=>{
                                    params.exec_on_start && (0,
                                    _shared_evbus__WEBPACK_IMPORTED_MODULE_35__.processExecData)(JSON.stringify(params.exec_on_start), e)
                                }
                                ;
                                window.lastScrollTop = (0,
                                _scroll__WEBPACK_IMPORTED_MODULE_18__.scrollGetY)(),
                                opts.bench && (ajax.tProcess = (new Date).getTime());
                                var isReloadRequired = stVersions[window.jsc("web/common_web.js")] > StaticFiles[window.jsc("web/common_web.js")].v
                                  , needForceReloadForDomainMigration = (0,
                                _shared_user_user_env__WEBPACK_IMPORTED_MODULE_36__.partConfigEnabled)("domain_migration_navigation_reload");
                                if (needForceReloadForDomainMigration && (0,
                                _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_39__.statlogsValueEvent)("tmp_stat_2", "", "login_migrate_cookies", "force_reload_by_nav"),
                                isReloadRequired || needForceReloadForDomainMigration) {
                                    var _window$Calls;
                                    if (Nav.setLoc(params.loc || Nav.strLoc),
                                    (0,
                                    _nav_utils__WEBPACK_IMPORTED_MODULE_21__.reloadCheckFlood)({
                                        force: !0,
                                        from: 4
                                    }))
                                        return;
                                    if (null === (_window$Calls = window.Calls) || void 0 === _window$Calls ? void 0 : _window$Calls.isInActiveCall)
                                        return;
                                    location.reload(!0)
                                } else {
                                    var newPage = void 0 === where.params.al_id || where.params.al_id != params.id || params.fullPage
                                      , tNode = (0,
                                    _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("title")
                                      , wNode = (0,
                                    _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("wrap3")
                                      , _back = cur._back
                                      , hist = !1;
                                    if ((strLoc === (cur._back || {}).loc || newPage || opts.back) && (_back = !1),
                                    (opts.noback || params.level && (!cur._level || params.level <= cur._level) && !1 !== opts.noback) && (_back = !1,
                                    (opts.noback || cur._level && params.level < cur._level) && (0,
                                    _nav_utils__WEBPACK_IMPORTED_MODULE_21__.showBackLink)()),
                                    window.tooltips && tooltips.destroyAll(),
                                    (0,
                                    _utils_common__WEBPACK_IMPORTED_MODULE_12__.each)((0,
                                    _dom__WEBPACK_IMPORTED_MODULE_16__.geByClass)("page_actions_wrap"), ((e,t)=>(0,
                                    _dom__WEBPACK_IMPORTED_MODULE_16__.hide)(t))),
                                    (0,
                                    _dom__WEBPACK_IMPORTED_MODULE_16__.hide)("audio_tip_wrap"),
                                    _back) {
                                        if ((0,
                                        _video__WEBPACK_IMPORTED_MODULE_24__.revertLastInlineVideo)(null, !0),
                                        hist = {
                                            loc: _back.loc || Nav.strLoc,
                                            cur,
                                            radioBtns: (0,
                                            _utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(radioBtns),
                                            ajaxCache,
                                            pid: window.PageID,
                                            scrollTop: (0,
                                            _scroll__WEBPACK_IMPORTED_MODULE_18__.scrollGetY)(),
                                            htitle: document.title.toString(),
                                            width: vk.width,
                                            width_dec: vk.width_dec,
                                            width_dec_footer: vk.width_dec_footer,
                                            noleftmenu: vk.noleftmenu,
                                            notopmenu: vk.notopmenu,
                                            nobottommenu: vk.nobottommenu,
                                            bodyClass: vk.body_class,
                                            back: !(!_tbLink || !_tbLink.loc) && [_tbLink.loc, (0,
                                            _dom__WEBPACK_IMPORTED_MODULE_16__.val)(_tbLink), _tbLink.fast]
                                        },
                                        tNode && tNode.parentNode && !(0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.isVisible)(tNode.parentNode) && (hist.hideHeader = !0),
                                        (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.globalHistoryDestroy)(hist.loc),
                                        globalHistory.length > 2) {
                                            var h = globalHistory.shift();
                                            (0,
                                            _nav_utils__WEBPACK_IMPORTED_MODULE_21__.processDestroy)(h.cur),
                                            h.content.innerHTML = ""
                                        }
                                        if (cur._back.hide)
                                            for (var _i5 = 0, _l3 = cur._back.hide.length; _i5 < _l3; _i5++)
                                                cur._back.hide[_i5]();
                                        _back.text && (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.showBackLink)(hist.loc, _back.text, 1)
                                    } else
                                        _tbLink && (_tbLink.fast = 0),
                                        (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.processDestroy)(cur);
                                    if (window.PageID = window.NextPageID,
                                    (0,
                                    _utils_common__WEBPACK_IMPORTED_MODULE_12__.each)(radioBtns, (function(e, t) {
                                        t.keep || delete radioBtns[e]
                                    }
                                    )),
                                    window.ajaxCache = {},
                                    boxQueue.hideAll(!1, !0),
                                    layerQueue.clear(),
                                    layers.fullhide && layers.fullhide(!0, !0),
                                    window.cur = {
                                        beforeNavigateRequestHandlers: [],
                                        destroy: [],
                                        nav: []
                                    },
                                    window._stlWas = 0,
                                    newPage) {
                                        for ((0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.cleanElems)("quick_login_button", "quick_expire", "search_form", "top_links", "bottom_nav"); globalHistory.length; ) {
                                            var _h = globalHistory.shift();
                                            (0,
                                            _nav_utils__WEBPACK_IMPORTED_MODULE_21__.processDestroy)(_h.cur),
                                            _h.content.innerHTML = ""
                                        }
                                        var oldTopW = (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("dev_top_nav_wrap") && (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.getSize)("dev_top_nav_wrap")[0] || (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("page_header_wrap") && (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.getSize)("page_header_wrap")[0] || 0;
                                        pageNode.innerHTML = html,
                                        execTqTasks(pageNode),
                                        oldTopW && !vk.staticheader && (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.updateHeaderStyles)({
                                            width: oldTopW
                                        }),
                                        window._tbLink = (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("top_back_link");
                                        try {
                                            _tbLink.style.maxWidth = _tbLink.parentNode.offsetWidth - 35 + "px"
                                        } catch (e) {}
                                        _shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.mobile || (0,
                                        _layout_utils__WEBPACK_IMPORTED_MODULE_23__.onBodyResize)(!0)
                                    } else {
                                        if (_back) {
                                            var newW = (0,
                                            _dom__WEBPACK_IMPORTED_MODULE_16__.ce)("div", {
                                                id: "wrap3"
                                            });
                                            (0,
                                            _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)(hist, {
                                                content: wNode.parentNode.replaceChild(newW, wNode),
                                                title: tNode ? tNode.innerHTML : ""
                                            }),
                                            globalHistory.push(hist),
                                            wNode = newW
                                        }
                                        var _oldTopW = (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("dev_top_nav_wrap") && (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.getSize)("dev_top_nav_wrap")[0] || (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.ge)("page_header_wrap") && (0,
                                        _dom__WEBPACK_IMPORTED_MODULE_16__.getSize)("page_header_wrap")[0] || 0;
                                        wNode && (wNode.innerHTML = html,
                                        execTqTasks(wNode)),
                                        _oldTopW && !vk.staticheader && (0,
                                        _nav_utils__WEBPACK_IMPORTED_MODULE_21__.updateHeaderStyles)({
                                            width: _oldTopW
                                        }),
                                        tNode && (tNode.innerHTML = title,
                                        (title ? _dom__WEBPACK_IMPORTED_MODULE_16__.show : _dom__WEBPACK_IMPORTED_MODULE_16__.hide)(tNode.parentNode)),
                                        (0,
                                        _feature_entries__WEBPACK_IMPORTED_MODULE_27__.getAudioPlayer)().updateCurrentPlaying()
                                    }
                                    if ((0,
                                    _layout_utils__WEBPACK_IMPORTED_MODULE_23__.checkPageBlocks)(),
                                    (0,
                                    _stl__WEBPACK_IMPORTED_MODULE_30__.updateSTL)(),
                                    (0,
                                    _nav_utils__WEBPACK_IMPORTED_MODULE_21__.updateLeftMenu)(),
                                    (0,
                                    _accessibility__WEBPACK_IMPORTED_MODULE_28__.updateAriaElements)(),
                                    _top_search__WEBPACK_IMPORTED_MODULE_29__.default.clear(),
                                    (0,
                                    _nav_utils__WEBPACK_IMPORTED_MODULE_21__.handlePageParams)(params),
                                    opts.preventScroll || (opts.scrollTop > 0 ? (0,
                                    _scroll__WEBPACK_IMPORTED_MODULE_18__.scrollToY)(opts.scrollTop, 0) : opts.noscroll || params.noscroll || (0,
                                    _scroll__WEBPACK_IMPORTED_MODULE_18__.scrollToTop)(0)),
                                    opts.bench && (ajax.tRender = (new Date).getTime()),
                                    Nav.curLoc = params.loc,
                                    js) {
                                        var evalString = `(function(){${js};})()`;
                                        if (__debugMode)
                                            eval(evalString);
                                        else
                                            try {
                                                eval(evalString)
                                            } catch (e) {
                                                (0,
                                                _debug_tools__WEBPACK_IMPORTED_MODULE_15__.logEvalError)(e, evalString)
                                            }
                                    }
                                    ajax._framenext(),
                                    opts.onDone && opts.onDone(),
                                    _shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.mobile && (0,
                                    _layout_utils__WEBPACK_IMPORTED_MODULE_23__.onBodyResize)(),
                                    changed.f && (0,
                                    _utils__WEBPACK_IMPORTED_MODULE_31__.handleScroll)(changed.f),
                                    Nav.setLoc(params.loc || ""),
                                    changed[0] && (window.vkLastNav = Date.now()),
                                    (0,
                                    _utils_common__WEBPACK_IMPORTED_MODULE_12__.lTimeout)((function() {
                                        (0,
                                        _feature_entries__WEBPACK_IMPORTED_MODULE_27__.getAudioPlayer)().updateCurrentPlaying(),
                                        window.TopMenu.toggle(!1)
                                    }
                                    ), _shared_lib_browser__WEBPACK_IMPORTED_MODULE_26__.browser.chrome ? 100 : 50)
                                }
                            }
                        };
                        return window.Page && (Page.postsSave(),
                        Page.postsSend(),
                        Page.postsClearTimeouts()),
                        (0,
                        _ads__WEBPACK_IMPORTED_MODULE_14__.updSeenAdsInfo)(),
                        (0,
                        _ads__WEBPACK_IMPORTED_MODULE_14__.__adsUpdate)("already"),
                        "im" !== Nav.objLoc[0] && "im" !== changed[0] || (where.params = (0,
                        _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)({}, where.params, {
                            _full_page: !0
                        })),
                        (0,
                        _web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_40__.subscribeOnModuleEvaluated)((()=>{
                            _shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__.navigationStat.addStatEvent(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__.navigationStat.getModule(), _shared_navigation_stats__WEBPACK_IMPORTED_MODULE_34__.NavigationProductionStatEventTypes.GO)
                        }
                        ), !0),
                        Array.isArray(window.cur.beforeNavigateRequestHandlers) && window.cur.beforeNavigateRequestHandlers.forEach((e=>{
                            "function" == typeof e && e()
                        }
                        )),
                        window.cur.beforeNavigateRequestHandlers = [],
                        !__debugMode && (0,
                        _shared_user_user_env__WEBPACK_IMPORTED_MODULE_36__.partConfigEnabled)("measure_module_navigation_stats") && window.performance.mark(_shared_network_stats_module_navigation_module_navigation_collector__WEBPACK_IMPORTED_MODULE_37__.ModuleNavigationStatMarks.web2.PERF_MARK),
                        ajax.post(where.url, where.params, {
                            onDone: function() {
                                var e = arguments;
                                if (__debugMode)
                                    done.apply(null, e);
                                else {
                                    try {
                                        done.apply(null, e)
                                    } catch (t) {
                                        (0,
                                        _ui_util__WEBPACK_IMPORTED_MODULE_19__.topError)(t, {
                                            dt: 15,
                                            type: 6,
                                            url: where.url,
                                            query: (0,
                                            _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__.toQueryString)(where.params),
                                            js: e[2],
                                            answer: Array.prototype.slice.call(arguments).join("<!>")
                                        })
                                    }
                                    (0,
                                    _shared_user_user_env__WEBPACK_IMPORTED_MODULE_36__.partConfigEnabled)("measure_module_navigation_stats") && (0,
                                    _web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_40__.subscribeOnModuleEvaluated)((()=>new _shared_network_stats_module_navigation_module_navigation_collector__WEBPACK_IMPORTED_MODULE_37__.ModuleNavigationStatCollector(_shared_network_stats__WEBPACK_IMPORTED_MODULE_38__.NetworkStatCollectorInstance).logEvent()), !0)
                                }
                            },
                            onFail: opts.onFail || function(e) {
                                if (e)
                                    return setTimeout((0,
                                    _message_box__WEBPACK_IMPORTED_MODULE_32__.showFastBox)({
                                        title: (0,
                                        _lang__WEBPACK_IMPORTED_MODULE_33__.getLang)("global_error")
                                    }, e).hide, __debugMode ? 3e4 : 3e3),
                                    !0
                            }
                            ,
                            frame: opts.noframe ? 0 : 1,
                            canReload: !0,
                            showProgress: opts.showProgress,
                            hideProgress: opts.hideProgress,
                            cache: opts.search ? 1 : "",
                            bench: opts.bench
                        }),
                        !1
                    }
                    location.href = strLoc
                }
            },
            setLoc: function(e, t) {
                var n, r;
                n = r = e,
                "string" == typeof e ? r = Nav.fromStr(e) : n = Nav.toStr(e),
                (t || !(0,
                _feature_entries__WEBPACK_IMPORTED_MODULE_27__.isArticleLayerOpen)() || n.match(/article_edit(-?\d+_\d+)/)) && (Nav.strLoc = n,
                Nav.objLoc = r,
                hab.setLoc(Nav.strLoc))
            },
            change: function(e, t, n) {
                var r = (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(Nav.objLoc);
                return (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_12__.each)(e, (function(e, t) {
                    !1 === t ? delete r[e] : r[e] = t
                }
                )),
                Nav.go(r, t, n)
            },
            fromStr: function(e) {
                var t = (e = e.split("#"))[0].split("?")
                  , n = {
                    0: t[0] || ""
                };
                return e[1] && (n["#"] = e[1]),
                (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_12__.extend)((0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__.fromQueryString)(t[1] || ""), n)
            },
            toStr: function(e) {
                var t = (e = (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_12__.clone)(e))["#"] || ""
                  , n = e[0] || "";
                delete e[0],
                delete e["#"];
                var r = (0,
                _shared_lib_convert__WEBPACK_IMPORTED_MODULE_20__.toQueryString)(e);
                return (r ? n + "?" + r : n) + (t ? "#" + t : "")
            },
            init: function() {
                window.globalHistory = [],
                Nav.strLoc = hab.getLoc(),
                Nav.objLoc = Nav.fromStr(Nav.strLoc)
            },
            getPostParams: function(e, t) {
                var n = !(!e || !e.getAttribute)
                  , r = {};
                if (!n)
                    return r;
                var i = e.getAttribute("data-post-id");
                i && (r.post_id = i);
                var o = e.getAttribute("data-parent-post-id");
                o && (r.parent_post_id = o);
                var a = e.getAttribute("data-post-click-type");
                a && (r.post_click_type = a);
                var s = e.getAttribute("mention_id");
                s && (r.post_click_mention_id = s);
                var c = e.getAttribute("data-post-click-cc-key");
                c && (r.post_click_cc_key = c);
                var _ = [e.getAttribute("href"), e.getAttribute("data-href")];
                if ((0,
                _utils_common__WEBPACK_IMPORTED_MODULE_12__.each)(_, (function(e, t) {
                    if (t && "#" !== t)
                        return r.post_click_url = t,
                        !1
                }
                )),
                !!a || t) {
                    var l = (0,
                    _dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("_ads_block_data_w", e)
                      , u = (l = l || (0,
                    _dom__WEBPACK_IMPORTED_MODULE_16__.gpeByClass)("_ads_promoted_post_data_w", e)) && l.getAttribute("data-ad")
                      , d = l && l.getAttribute("data-ad-block-uid");
                    u && (r.ad_data = u),
                    d && (r.ad_block_unique_id = d)
                }
                return r
            },
            mergePostParamsOptions: function(e, t) {
                if (t = t || {},
                !e)
                    return t;
                function n(e, n, r) {
                    var i = r && t[n];
                    return !(!e || i) && (t[n] = e,
                    !0)
                }
                return n(e.post_id, "_post", !0),
                n(e.parent_post_id, "_parent_post", !0),
                n(e.post_click_type, "_post_click_type", !0),
                t._post_click_type && (n(e.post_click_mention_id, "_post_click_mention_id", !0),
                n(e.post_click_cc_key, "_post_click_cc_key", !0),
                n(e.post_click_url, "_post_click_url", !0),
                n(e.ad_data, "_post_ad_data", !0) && n(e.ad_block_unique_id, "_post_ad_block_unique_id")),
                t
            },
            showMoreApps() {
                var e = getShowMoreAppsContainer();
                e && (e.classList.add(SHOW_MORE_APPS_SHOWN_CLASSNAME),
                getShowMoreAppsButton().classList.add(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME))
            },
            showLessApps() {
                var e = getShowMoreAppsContainer();
                e && (e.classList.remove(SHOW_MORE_APPS_SHOWN_CLASSNAME),
                getShowMoreAppsButton().classList.remove(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME))
            },
            subscribeOnModuleEvaluated: _web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_40__.subscribeOnModuleEvaluated,
            unsubscribeOnModuleEvaluated: _web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_40__.unsubscribeOnModuleEvaluated
        };
        function getShowMoreAppsContainer() {
            return document.querySelector(".show_more_apps_container")
        }
        function getShowMoreAppsButton() {
            return document.querySelector(".show_more_apps_button")
        }
        function authorPageNav(e, t, n) {
            if (n && cur.backFromAuthorPage)
                return delete cur.backFromAuthorPage,
                !0;
            var r = e.toLowerCase()
              , i = window.AuthorPage && window.AuthorPage.isOpen()
              , o = r.match(/^(?:%40|@)-?[.a-z0-9_]+(?:\?\w+)?([\?&]z\=[a-z0-9-_]+)*$/);
            if (o)
                return !!i || (o[1] ? cur._hardNav = !0 : ((0,
                _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_11__.boxRefreshCoords)(boxLoader),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.show)(boxLoader),
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.show)(boxLayerWrap),
                window.stManager.add([window.jsc("web/author_page.js"), window.jsc("web/article_layer.js"), "author_page.css", "ui_controls.js", "ui_controls.css"], (function() {
                    cur.prevAuthorPageUrl = t,
                    window.AuthorPage.showLayer(r)
                }
                )),
                !0));
            if (i) {
                if (/^article_edit([0-9\-]+)_(\d+)/.test(r))
                    return !1;
                if (n && window.AuthorPage.isStandalone())
                    return window.location.reload(!0),
                    !0;
                var a = window.AuthorPage.close(!0);
                return void 0 !== a ? a : !!n
            }
        }
        function articleNav(e, t, n, r, i) {
            var o = e.toLowerCase()
              , a = /^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/;
            if (a.test(o))
                return window.isArticleLayerOpen() || (cur.articlePrevLoc = t),
                window.WkView && WkView.hide(!0),
                window.boxQueue && boxQueue.hideAll(),
                window.stManager.add([window.jsc("web/article_layer.js"), "article.css"]).then((()=>new Promise((e=>{
                    ArticleLayer.show(o, !0, !1, {
                        ev: i,
                        onShowDone: ()=>{
                            cur.articleSequence = Math.max(1, (cur.articleSequence || 0) + (n ? -1 : 1)),
                            e()
                        }
                        ,
                        prepareAsync: !0
                    })
                }
                ))));
            if (window.isArticleLayerOpen()) {
                if (n && ArticleLayer.isStandalone())
                    return window.location.reload(!0),
                    !0;
                var s = ()=>{
                    ArticleLayer.close(),
                    delete cur.articleSequence
                }
                  , c = cur.articlePrevLoc;
                return delete cur.articlePrevLoc,
                c && !a.test(c) ? e === c ? (s(),
                r && r(),
                !0) : (layers.fullhide = function() {
                    s()
                }
                ,
                !1) : (s(),
                !0)
            }
            return !1
        }
        function cleanArticleUrlByObjLoc(e) {
            return e && e.ref && delete e.ref,
            Nav.toStr(e)
        }
        function bookmarksNav(e) {
            if (e) {
                var t = (0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.domClosest)("bookmarks_rows", e.target)
                  , n = !!(0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.domClosest)("bookmarks_pages", e.target);
                if ((t || n) && (n || (0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(t, "bookmarks_rows_user") || (0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(t, "bookmarks_rows_group") || (0,
                _dom__WEBPACK_IMPORTED_MODULE_16__.hasClass)(t, "bookmarks_rows_page"))) {
                    var r;
                    if (!(r = t ? (0,
                    _dom__WEBPACK_IMPORTED_MODULE_16__.domClosest)("_bookmark_page_item", e.target) : (0,
                    _dom__WEBPACK_IMPORTED_MODULE_16__.domClosest)("line_cell", e.target)))
                        return;
                    (0,
                    _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_39__.statlogsValueEvent)("bookmarks_product_analytics", {
                        item_type: "page",
                        item_id: (0,
                        _shared_lib_common__WEBPACK_IMPORTED_MODULE_13__.intval)((0,
                        _dom__WEBPACK_IMPORTED_MODULE_16__.domData)(r, "id")),
                        time: (0,
                        _web_lib_date__WEBPACK_IMPORTED_MODULE_10__.getServerTime)()
                    })
                }
            }
        }
        const __WEBPACK_DEFAULT_EXPORT__ = Nav
    }
    ,
    447215: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initNavCounters: ()=>R,
            updateHeaderStyles: ()=>L,
            updateLeftMenu: ()=>k,
            handlePageCount: ()=>N,
            handlePageParams: ()=>U,
            reloadCheckFlood: ()=>W,
            globalHistoryDestroy: ()=>F,
            showBackLink: ()=>K,
            processDestroy: ()=>V,
            handlePageView: ()=>H,
            zNav: ()=>j
        });
        n(530522),
        n(579665),
        n(95767),
        n(751876),
        n(21466),
        n(991181),
        n(83276),
        n(59357),
        n(66108),
        n(296253);
        var r = n(315544)
          , i = n(786067)
          , o = n(695724)
          , a = n(635676)
          , s = n(460615)
          , c = n(778273)
          , _ = n(159121)
          , l = n(386409)
          , u = n(113165)
          , d = n(654612)
          , p = n(896011)
          , h = n(486125)
          , m = n(850167)
          , f = n(325489)
          , g = n(635093)
          , v = n(363604)
          , E = n(982452)
          , y = n(830104)
          , w = n(26330)
          , b = n(961540)
          , C = n(674402)
          , T = n(962857)
          , D = n(533304)
          , A = n(19331)
          , S = n(523459)
          , P = n(173674)
          , O = n(898966);
        function I(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return M(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return M(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function M(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function R() {
            window.vkLastNav = Date.now(),
            window.vkTabLoaded = Date.now()
        }
        function L(e) {
            var t = [(0,
            r.ge)("dev_top_nav_wrap"), (0,
            r.ge)("page_header_wrap")];
            (0,
            o.each)(t, (function(t, n) {
                n && (0,
                r.setStyle)(n, e)
            }
            ))
        }
        function k(e) {
            window.__leftMenu && window.__leftMenu.handleUpdateRequest(e)
        }
        function B(e, t, n, s, c) {
            var _ = ""
              , l = ""
              , u = '<span class="inl_bl left_count_sign"></span>'
              , d = "reqs" === n || n && n.substr && "spr" === n.substr(0, 3) ? 5 : 3
              , p = (0,
            r.geByClass1)("left_count_wrap", e);
            p.classList.toggle("left_count_wrap--highlighted", s);
            var h = (0,
            r.hasClass)((0,
            r.geByClass1)("left_row", e, "a"), "left_nav_over")
              , m = (0,
            r.geByClass1)("left_count", e, "span")
              , f = (0,
            r.val)(m);
            t && ((_ = t.toString()).length > d && (l = ' title="' + (0,
            o.stripHTML)((0,
            i.langNumeric)(t, "%s", !0)) + '"',
            _ = ".." + _.substr(_.length - d)),
            u = `<span class="inl_bl left_count" ${l}>${_}</span>`),
            (0,
            A.partConfigEnabled)("top_convo_list") && "msg" === n && window.TopMessenger && window.TopMessenger.handleCounterUpdate(c);
            var g = function() {
                (0,
                r.val)(p, u),
                (t ? r.removeClass : r.addClass)(p, "left_void"),
                (0,
                r.setStyle)(p, {
                    opacity: ""
                })
            };
            if (f || h)
                if (_)
                    (0,
                    a.animateCount)(m, _, {
                        str: "auto",
                        onDone: g
                    });
                else if (h) {
                    var v = bodyNode.appendChild((0,
                    r.se)('<span class="left_count_wrap"><span class="inl_bl left_count_sign"></span></span>'));
                    v.classList("left_count_wrap--highlighted", s);
                    var E = (0,
                    r.getSize)((0,
                    r.domFC)(v))[0];
                    (0,
                    r.re)(v),
                    f && "." === f.charAt(0) && (0,
                    r.val)(m, f.replace("..", "")),
                    (0,
                    a.animate)(m, {
                        width: E
                    }, 100, g)
                } else
                    (0,
                    a.animate)(p, {
                        opacity: 0
                    }, 100, g);
            else
                g(),
                (0,
                r.setStyle)(p, {
                    opacity: 0
                }),
                (0,
                a.animate)(p, {
                    opacity: 1
                }, 100)
        }
        function x(e, t, n) {
            void 0 === e.counts && (e.counts = {}),
            e.counts[t] = n
        }
        function N(e, t, n, i) {
            var a = arguments.length > 4 && void 0 !== arguments[4] && arguments[4]
              , s = arguments.length > 5 ? arguments[5] : void 0
              , c = (0,
            o.intval)(t)
              , _ = Math.max(0, c);
            if (x(window.vk, e, c),
            "ntf" === e)
                return window.TopNotifier.setCount(_),
                void window.TopNotifier.createNewEventsBox(_);
            if (e !== C.MARKET_EVENT_COUNTER_SECTION_ID) {
                window.vk.onSetCount && window.vk.onSetCount(e, t);
                var l = (0,
                r.ge)("l_" + e);
                if (l && (B(l, _, e, !!a && "msg" === e && (0,
                A.partConfigEnabled)("mail_unread_counter_highlight"), "msg" === e ? s : 0),
                i && n)) {
                    var u = c > 0 && i ? "?" + i : "";
                    l.firstChild.href = "/" + n + u
                }
                var d = (0,
                r.hasClass)((0,
                r.domFC)(l), "left_nav_over")
                  , p = c >= 0;
                !p && d || (0,
                r.toggle)(l, p),
                "market_orders" === e && l && l.classList.remove("unshown")
            } else
                (0,
                C.updateMarketMenuEventCounter)(`#${e}`, t)
        }
        function U(e) {
            vk.id = e.id,
            e.body_class !== bodyNode.className && (bodyNode.className = e.body_class || ""),
            (0,
            v.updateSTL)(),
            k(!0),
            void 0 !== e.pvbig && (vk.pvbig = e.pvbig),
            void 0 !== e.pvdark && (vk.pvdark = e.pvdark),
            cur._level = e.level,
            vk.id && vk.id % 1e3 == 1 && setTimeout((function() {
                window.scrollmarked = {},
                (0,
                s.statlogsValueEvent)("page_scroll", 0, cur.module, "0")
            }
            ), 300),
            H(e);
            var t = (0,
            r.ge)("mvk_footer_lnk");
            if (t) {
                var n = `https://m.${(0,
                b.getHostName)()}/`;
                t.firstChild.href = e.mvklnk || n
            }
            if (vk.nophone = (0,
            o.intval)(e.nophone),
            vk.staticheader = (0,
            o.intval)(e.staticheader),
            vk.id) {
                var i = (0,
                r.ge)("left_blocks");
                i && (i.innerHTML = e.leftblocks || "")
            }
            "leftads"in e && 0 !== e.leftads && window.__adsSet(e.leftads, e.ads_section || "", e.ads_can_show, e.ads_showed);
            var a = locProtocol + "//" + location.host + "/";
            e.loc && ("?" === e.loc.charAt(0) ? a += nav.strLoc : a += e.loc);
            var _ = document.URL === a ? "" : document.URL;
            setTimeout(D.updateCounters.pbind(a, _), 10);
            var l = e.counters;
            if (l.length) {
                var u = ""
                  , d = "";
                (0,
                o.intval)(l[9]) > 0 ? (u = "adsmarket",
                d = "act=overview&status=-1") : (0,
                o.intval)(l[9]) < -1 ? (l[9] = 1,
                u = "ads",
                d = "act=a_comeback_office_redirect") : u = "ads?act=office&last=1";
                var p = (0,
                r.ge)("l_set")
                  , h = p && p.nextSibling || !1
                  , m = ["fr", "ph", "vid", "msg", "nts", "gr", "vkp", "wsh", "ap", "ads", "ntf", "fav", "doc", "apm", "mk"]
                  , f = ["friends", "albums" + vk.id, "video", "", "notes", "groups", "vkpay", "gifts.php?act=wishlist", "apps", u, "feed" + ((0,
                r.ge)("l_nwsf") ? "?section=notifications" : ""), "pages", "docs", "apps_manage", "market"]
                  , g = ["", "act=added", "section=tagged", "", "act=comments", "", "tab=invitations", "", "", d, (0,
                r.ge)("l_nwsf") ? "" : "section=notifications", "", "", "", ""]
                  , E = !1;
                if (e.handlecnts) {
                    for (var y = 0; y < m.length; y++)
                        N(m[y], l[y], f[y], g[y]);
                    for (var w = h.nextSibling; w; w = w.nextSibling) {
                        if (w.tagName && "li" === w.tagName.toLowerCase() && (0,
                        r.isVisible)(w)) {
                            E = !0;
                            break
                        }
                        if ((0,
                        r.hasClass)(w, "more_div"))
                            break
                    }
                    (E ? r.show : r.hide)(h),
                    function(e) {
                        if (!(0,
                        o.isObject)(e))
                            return;
                        Object.entries(e).forEach((e=>{
                            var t = I(e, 2)
                              , n = t[0]
                              , r = t[1]
                              , i = document.getElementById("l_app" + (0,
                            o.intval)(n));
                            i && B(i, (0,
                            o.intval)(r))
                        }
                        ))
                    }(l[17]),
                    setTimeout(c.updSeenAdsInfo, 0)
                } else
                    for (var C = 0; C < m.length; C++)
                        vk.counts[m[C]] = l[C]
            }
        }
        function W(e) {
            e = e || {};
            var t = w.default.get("last_reloaded") || [];
            t.unshift((0,
            o.vkNow)());
            var n = t.length;
            return n > 5 && (t.splice(5, n - 5),
            n = 5),
            w.default.set("last_reloaded", t),
            !!(5 === n && t[0] - t[4] < 2e4) && ((0,
            _.topError)('<b>Reloading error</b>, please check internet connection, <b><a href="/page-777107_43991681">clear your cache</a></b> and restart your browser.<br>If problem remains, please <a href="/support?act=new">report it here</a>.', {
                dt: 15,
                type: 6,
                msg: "Reload error, from " + (e.from || 0) + ", forced " + (e.force || 0) + ", url " + (e.url || "") + ", query " + (e.query || "")
            }),
            !0)
        }
        function F(e) {
            for (var t = 0, n = globalHistory.length; t < n; t++)
                if (globalHistory[t].loc === e) {
                    var r = globalHistory.splice(t, 1)[0];
                    V(r.cur),
                    r.content.innerHTML = "",
                    --t,
                    --n
                }
        }
        function K(e, t, n) {
            if (_tbLink) {
                var i = e;
                if (e = (e || "").replace(/^\//, ""),
                _tbLink.loc = e,
                void 0 === n && (n = 0,
                e))
                    for (var a = 0, s = globalHistory.length; a < s; a++)
                        if (globalHistory[a].loc === e) {
                            n = 1;
                            break
                        }
                if (i) {
                    try {
                        _tbLink.style.maxWidth = _tbLink.parentNode.offsetWidth - 35 + "px"
                    } catch (e) {}
                    (0,
                    o.extend)(_tbLink, {
                        href: "/" + e,
                        innerHTML: t,
                        fast: n
                    }),
                    (0,
                    r.show)(_tbLink),
                    window._stlWas = 0
                } else
                    (0,
                    r.hide)(_tbLink);
                (0,
                l.updSideTopLink)(1)
            }
        }
        function V(e) {
            if (e._back && e._back.hide && e === cur)
                for (var t in e._back.hide)
                    if (e._back.hide.hasOwnProperty(t))
                        try {
                            e._back.hide[t]()
                        } catch (e) {
                            try {
                                console.log(e.stack)
                            } catch (e) {}
                        }
            if (e.destroy && e.destroy.length)
                for (var n in e.destroy)
                    if (e.destroy.hasOwnProperty(n))
                        try {
                            e.destroy[n](e)
                        } catch (e) {
                            try {
                                console.log(e.stack)
                            } catch (e) {}
                        }
        }
        function H(e) {
            var t = (0,
            r.ge)("footer_wrap")
              , n = (0,
            r.ge)("page_layout")
              , i = (0,
            r.geByClass1)("TopHomeLink")
              , a = void 0 === e.width ? vk.width : e.width
              , s = void 0 === e.width_dec ? vk.width_dec : e.width_dec
              , c = void 0 === e.width_dec_footer ? vk.width_dec_footer : e.width_dec_footer;
            vk.noleftmenu === e.noleftmenu && vk.nobottommenu === e.nobottommenu && vk.width === e.width && vk.width_dec_footer === e.width_dec_footer || (vk.noleftmenu !== e.noleftmenu && e.noleftmenu && (0,
            r.hide)("side_bar"),
            vk.nobottommenu !== e.nobottommenu && (e.nobottommenu ? (0,
            r.hide)("bottom_nav") : (0,
            r.show)("bottom_nav")),
            e.noleftmenu && e.nobottommenu ? t && ((0,
            r.addClass)(t, "simple"),
            t.style.width = "auto") : t && ((0,
            r.removeClass)(t, "simple"),
            t.style.width = a - c + "px")),
            vk.notopmenu !== e.notopmenu && (e.notopmenu ? (0,
            r.hide)("quick_search", "qsearch_border", "top_search", "top_invite_link", "top_menu_wrap") : (0,
            r.show)("quick_search", "qsearch_border", "top_search", "top_invite_link", "top_menu_wrap")),
            i && e.top_home_link_class && vk.top_home_link_class !== e.top_home_link_class && (i.className = e.top_home_link_class),
            !n || a === vk.width && s === vk.width_dec || ((0,
            y.setGlobalCustomProperty)("--layout-width", a + "px"),
            (0,
            r.ge)("page_body").style.width = a - s + "px",
            (0,
            r.ge)("ts_wrap") && (0,
            r.hasClass)((0,
            r.ge)("ts_wrap"), "vk") && ((0,
            r.ge)("ts_wrap").style.width = a - 191 + "px"),
            setTimeout(l.updSideTopLink.pbind(!0), 0),
            setTimeout(v.updateSTL, 0),
            requestAnimationFrame((function() {
                try {
                    _tbLink.style.maxWidth = _tbLink.parentNode.offsetWidth - 35 + "px"
                } catch (e) {}
            }
            ))),
            vk.noleftmenu === e.noleftmenu || e.noleftmenu || (0,
            r.show)("side_bar"),
            e.to && (0,
            r.ge)("quick_login_to") && (0,
            r.val)("quick_login_to", e.to),
            vk.noleftmenu = e.noleftmenu,
            vk.nobottommenu = e.nobottommenu,
            vk.top_home_link_class = e.top_home_link_class,
            vk.notopmenu = e.notopmenu,
            vk.width = a,
            vk.width_dec = s,
            vk.width_dec_footer = c,
            vk.body_class = e.body_class,
            vk.staticheader = (0,
            o.intval)(e.staticheader),
            vk.no_ads = e.no_ads,
            vk.ad_preview = e.ad_preview
        }
        function j(e, t, n) {
            var a = e.z
              , s = e.f
              , c = e.w
              , _ = (a || "").match(/^([a-z_]+)(-?\d+(?:_(?:-)?\d+)?)\/?(.*)/i);
            if (delete e.z,
            delete e.f,
            delete e.w,
            t || (t = {}),
            (0,
            o.isEmpty)(e)) {
                if (s && ((0,
                E.handleScroll)(s),
                void 0 === a))
                    return !1;
                if (t.hist)
                    if (a || c) {
                        if (layerQueue.back("wiki", c, (_ || {})[1], (_ || {})[2]))
                            return !1
                    } else if (!1 === a && n.w && layerQueue.back("wiki", n.w))
                        return !1;
                if (c) {
                    var l = "";
                    if (!1 === a)
                        layers.fullhide(!!t.hist && 2);
                    else {
                        if (c.match(/^story([0-9\-]+)_(\d+)/))
                            return (0,
                            u.showStory)(c);
                        if (c.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/)) {
                            var v = I(c.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/), 4)
                              , y = v[1]
                              , w = v[2]
                              , b = v[3];
                            return (0,
                            u.showNarrative)(y, w, b, "", {
                                source: "narrative_link"
                            })
                        }
                        if (c.match(/^donut_payment(-\d+)/)) {
                            var C = nav.objLoc.source
                              , D = Number(c.match(/^donut_payment(-\d+)/)[1]);
                            return (0,
                            m.showDonutSubscribePopup)(null, null, D, C, "", {
                                type: "subscribe",
                                params: {
                                    act: "subscribe_popup"
                                }
                            })
                        }
                        if ("stories" === c) {
                            if (cur.storyLayer)
                                return cur.storyLayer.doHide(),
                                !1
                        } else
                            n || (n = (0,
                            o.clone)(nav.objLoc)),
                            c && (n.w = c),
                            s && (n.f = s),
                            delete n.z,
                            nav.setLoc(n),
                            nav.objLoc.ref && (l = nav.objLoc.ref,
                            delete nav.objLoc.ref)
                    }
                    return (0,
                    m.showWiki)({
                        w: c
                    }, "note_new" === c, !1, {
                        onLoaded: a && j.pbind({
                            z: a
                        }, (0,
                        o.extend)(t, {
                            queue: 1
                        })),
                        isZnav: 1,
                        customRef: l
                    }),
                    !1
                }
                if ("giftbox" === a)
                    return !(0,
                    d.showBox)("/al_gifts.php", {
                        act: "get_gift_box",
                        mid: t.id || 0,
                        fr: t.is && t.id !== vk.id ? 0 : 1,
                        link: nav.objLoc[0]
                    }, {
                        stat: ["gifts.css", "ui_controls.js", "ui_controls.css"],
                        cache: 1
                    }, window.event);
                if ("validatebox" === a)
                    return !(0,
                    p.validateMobileBox)({
                        closeLink: 1,
                        onDone: ()=>(0,
                        r.ge)("change_phone_wrap").parentNode.removeChild((0,
                        r.ge)("change_phone_wrap"))
                    });
                if ("upload_video" === a)
                    return VideoUpload.showBox();
                if (a === O.MY_QUESTIONS_BOX_URL_PARAMETER) {
                    var M = window.nav.objLoc.ref;
                    return M ? (delete window.nav.objLoc.ref,
                    nav.setLoc(window.nav.objLoc)) : M = "url",
                    (0,
                    S.showMyQuestionsBox)({
                        ref: M
                    }),
                    !1
                }
                if (!1 === a || !1 === c) {
                    var R = !window.wkcur || !wkcur.shown || layers.fullhide !== WkView.hide;
                    !layers.fullhide || !R && !1 !== c || t.asBox || (!t.hist || n.z || n.w || -1 !== n[0].indexOf("/") || n[0].match(/^(photo|video)(-?\d+_\d+)$/) || layerQueue.clear(),
                    layers.fullhide(!!t.hist && 2));
                    var L = (0,
                    h.curBox)();
                    return L && L.wkRaw && L.hide(),
                    !1
                }
                if (a && _) {
                    var k = function() {
                        return delete nav.objLoc.z,
                        nav.setLoc(nav.objLoc),
                        !0
                    };
                    switch (_[1]) {
                    case "photo":
                        return (0,
                        m.showPhoto)(_[2], _[3], (0,
                        o.extend)(t, {
                            onFail: k,
                            noHistory: !0
                        })),
                        !1;
                    case "albums":
                        return (0,
                        m.showAlbums)(_[2], (0,
                        o.extend)(t, {
                            onFail: k,
                            noHistory: !0
                        })),
                        !1;
                    case "album":
                        return (0,
                        m.showAlbum)(_[2], (0,
                        o.extend)(t, {
                            onFail: k,
                            noHistory: !0
                        })),
                        !1;
                    case "tag":
                    case "photo_tag":
                        return (0,
                        m.showPhotoTags)(_[2], (0,
                        o.extend)(t, {
                            onFail: k,
                            noHistory: !0
                        })),
                        !1;
                    case "video":
                    case "clip":
                        var B = _[3]
                          , x = (0,
                        o.extend)(t, {
                            onFail: k,
                            noLocChange: 1,
                            focusPlay: 1
                        });
                        if (B) {
                            var N = []
                              , U = "";
                            if ((0,
                            o.each)(B.split("/"), (function(e, t) {
                                0 === t.indexOf("pl_") ? U = t : N.push(t)
                            }
                            )),
                            B = N.join("/"),
                            U) {
                                U = U.substr("pl_".length);
                                var W = cur.currentModule ? cur.currentModule() : cur.module;
                                x = (0,
                                o.extend)(x, {
                                    playlistId: U,
                                    module: W,
                                    addParams: {
                                        force_no_repeat: 1,
                                        show_next: 1,
                                        playlist_id: U,
                                        show_all_videos: (0,
                                        o.intval)(cur.isCatalog && (!window.VideoPlaylist || !VideoPlaylist.getList(U)))
                                    }
                                })
                            }
                        }
                        return "clip" === _[1] && (x.shortVideo = 1),
                        (0,
                        f.showVideo)(_[2], B, x),
                        !1;
                    case "single":
                        return void 0 === c && window.stManager.add(["single_pv.css", window.jsc("web/single_pv.js")], (0,
                        r.ge)(a).onclick),
                        !1;
                    case "accept_money":
                        return (0,
                        g.moneyTransferBox)(_[2], _[3]),
                        !1;
                    case "moneysend":
                        var F = T.MoneyTransfer.showMoneyTransferBox({
                            to_id: _[2],
                            from: "public_link"
                        }, {}, (e=>(F.hide(),
                        setTimeout((0,
                        d.showFastBox)((0,
                        i.getLang)("global_error"), e).hide, 2e3),
                        delete nav.objLoc.z,
                        nav.setLoc(nav.objLoc),
                        !0)));
                        return !1;
                    case "audio_playlist":
                        var K = I(_[2].split("_"), 2)
                          , V = K[0]
                          , H = K[1]
                          , G = t.context || "";
                        return AudioUtils.showAudioPlaylist(V, H, _[3], G, void 0, t.onDone),
                        !1;
                    case "article_edit":
                        return m.openArticleEditor.apply(null, _[2].split("_")),
                        !1;
                    case "podcast":
                        return window.stManager.add([window.jsc("web/podcast.js"), "page.css"], (()=>{
                            Podcast.show(null, _[2], null, "url")
                        }
                        )),
                        !1;
                    case "apps_achievements":
                        return window.stManager.add([window.jsc("web/apps_achievements.js")], (()=>{
                            window.AppsAchievementsPage.showFriendAchievements(_[2])
                        }
                        )),
                        !1;
                    case O.ASK_QUESTION_BOX_URL_PREFIX:
                        var q = Number(_[2])
                          , $ = window.nav.objLoc.ref;
                        return $ ? (delete window.nav.objLoc.ref,
                        nav.setLoc(window.nav.objLoc)) : $ = "url",
                        (0,
                        S.showAskQuestionBox)(q, {
                            ref: $
                        }),
                        !1;
                    case "call":
                        var Y = ()=>{
                            window.stManager.add(["notifier.js"], (()=>{
                                var e, t = I(_[2].split("_"), 2), n = t[0], r = t[1], i = r && r < 0 ? Number(r) : null, o = ()=>{
                                    var e;
                                    return null === (e = window.Calls) || void 0 === e ? void 0 : e.call(Number(n), !1, void 0, P.CallStatSource.LINK, i)
                                }
                                ;
                                (null === (e = window.Calls) || void 0 === e ? void 0 : e.initialized) ? o() : setTimeout(o, 1500),
                                delete nav.objLoc.z,
                                nav.setLoc(nav.objLoc)
                            }
                            ))
                        }
                        ;
                        return (0,
                        A.partConfigEnabled)("calls_open_warning_box_on_call_by_link") ? (0,
                        d.showFastBox)({
                            title: (0,
                            i.getLang)("global_warning")
                        }, (0,
                        i.getLang)("calls_are_you_sure_to_call_this_user"), (0,
                        i.getLang)("global_share_button_call"), (()=>{
                            (0,
                            h.curBox)().hide(),
                            Y()
                        }
                        ), (0,
                        i.getLang)("global_close")) : Y(),
                        !1
                    }
                }
            }
        }
    }
    ,
    912322: (e,t,n)=>{
        "use strict";
        n(991181),
        n(296253),
        n(528120),
        n(286702);
        function r(e) {
            e && !e.prototype.forEach && (Array.prototype.forEach ? e.prototype.forEach = Array.prototype.forEach : e.prototype.forEach = function(e, t) {
                t = t || window;
                for (var n = 0; n < this.length; n++)
                    e.call(t, this[n], n, this)
            }
            )
        }
        Function.prototype.pbind = function() {
            var e = Array.prototype.slice.call(arguments);
            return e.unshift(window),
            this.bind.apply(this, e)
        }
        ,
        Function.prototype.rpbind = function() {
            var e = Array.prototype.slice.call(arguments);
            return e.unshift(window),
            this.rbind.apply(this, e)
        }
        ,
        Function.prototype.rbind = function() {
            var e = this
              , t = Array.prototype.slice.call(arguments)
              , n = t.shift()
              , r = t.shift();
            return function() {
                var i = Array.prototype.slice.call(arguments);
                return e.apply(n, t.concat(i)),
                r
            }
        }
        ,
        Function.prototype.bind || (Function.prototype.bind = function() {
            var e = this
              , t = Array.prototype.slice.call(arguments)
              , n = t.shift();
            return function() {
                var r = Array.prototype.slice.call(arguments);
                return e.apply(n, t.concat(r))
            }
        }
        ),
        Object.keys || (Object.keys = function(e) {
            var t = [];
            for (var n in e)
                e.hasOwnProperty(n) && t.push(n);
            return t
        }
        ),
        r(window.NodeList),
        r(window.HTMLCollection),
        !1 === window.hasOwnProperty("origin") && (window.origin = window.location.origin),
        "prepend"in Element.prototype || (Document.prototype.prepend = Element.prototype.prepend = function(e) {
            this.insertBefore(e, this.firstChild)
        }
        )
    }
    ,
    138974: (e,t,n)=>{
        "use strict";
        n.d(t, {
            rangeGet: ()=>i,
            rangeCreate: ()=>a,
            rangeInsert: ()=>s
        });
        var r = n(315544);
        function i() {
            var e = null
              , t = window.getSelection();
            t.getRangeAt && t.rangeCount && (e = t.getRangeAt(0));
            var n = null
              , r = null
              , i = 0
              , o = 0
              , a = document.activeElement;
            return e && ("selectionStart"in a ? (n = a,
            r = a,
            i = a.selectionStart,
            o = a.selectionEnd) : t.rangeCount && (n = e.startContainer,
            r = e.endContainer,
            i = e.startOffset,
            o = e.endOffset)),
            [e, n, i, r, o]
        }
        function o(e) {
            var t = window.getSelection();
            return t.removeAllRanges(),
            t.addRange(e),
            e
        }
        function a(e, t, n, r) {
            var i = document.createRange();
            return i.setStart(e, t),
            i.setEnd(n, r),
            o(i)
        }
        function s(e, t) {
            if (t = t ? t + "" : "",
            !browser.msie && document.execCommand)
                document.execCommand("insertHTML", !1, t);
            else if (e) {
                e.deleteContents();
                var n = (0,
                r.cf)(t)
                  , i = n.lastChild;
                e.insertNode(n),
                i && ((e = e.cloneRange()).setStartAfter(i),
                e.collapse(!0),
                o(e))
            }
            return e
        }
    }
    ,
    803834: (e,t,n)=>{
        "use strict";
        n.d(t, {
            scrollToY: ()=>s,
            scrollToTop: ()=>c,
            scrollGetX: ()=>_,
            scrollGetY: ()=>l,
            disableBodyScroll: ()=>u,
            enableBodyScroll: ()=>d,
            isBodyScrollEnabled: ()=>p
        });
        var r = n(386409)
          , i = n(635676)
          , o = n(315544);
        function a() {
            return bodyNode
        }
        function s(e, t, n, c, u) {
            if (null == t && (t = 400),
            "ontouchstart"in document.documentElement && (t = 0),
            c || (e = Math.max(0, e - (vk.staticheader ? 0 : (0,
            o.getSize)("page_header_cont")[1]))),
            (0,
            o.data)(a(), "tween") && (0,
            o.data)(a(), "tween").stop(!1),
            (0,
            o.data)(htmlNode, "tween") && (0,
            o.data)(htmlNode, "tween").stop(!1),
            window.scrollAnimation = !1,
            t) {
                var d = function() {
                    window.scrollAnimation = !1,
                    2 === n && ("profile" != cur.module && "public" != cur.module && "group" != cur.module && "groups" != cur.module && "event" != cur.module || !window.Wall || Wall.scrollCheck(!1, void 0, !0),
                    (0,
                    r.updSideTopLink)()),
                    "function" == typeof u && u()
                };
                window.scrollAnimation = !0,
                (0,
                i.animate)(htmlNode, {
                    scrollTop: e
                }, {
                    duration: t,
                    transition: i.Fx.Transitions.sineInOut,
                    onComplete: d
                }),
                (0,
                i.animate)(a(), {
                    scrollTop: e
                }, {
                    duration: t,
                    transition: i.Fx.Transitions.sineInOut,
                    onComplete: d
                })
            } else {
                if (n && 2 !== n) {
                    "profile" != cur.module && "public" != cur.module && "group" != cur.module && "event" != cur.module || !window.Wall || Wall.scrollCheck(!1, e, !0);
                    var p = l() - e;
                    return Math.abs(p) > 6 && s(e + (p > 0 ? 6 : -6), 0, 2, !0),
                    (0,
                    r.updSideTopLink)(),
                    clearTimeout(window.scrlToTO),
                    void (window.scrlToTO = setTimeout(s.pbind(e, 100, 2, !0, u), 0))
                }
                window.scroll(_(), e),
                "function" == typeof u && u(),
                n || (0,
                r.updSideTopLink)()
            }
        }
        function c(e) {
            return s(0, e)
        }
        function _() {
            return window.pageXOffset || scrollNode.scrollLeft || document.documentElement.scrollLeft
        }
        function l() {
            return window.pageYOffset || scrollNode.scrollTop || document.documentElement.scrollTop
        }
        function u() {
            a().style.overflow = "hidden"
        }
        function d() {
            a().style.overflow = "auto"
        }
        function p() {
            return "hidden" !== a().style.overflow
        }
    }
    ,
    469687: (e,t,n)=>{
        "use strict";
        n.d(t, {
            makeSharedState: ()=>_
        });
        var r, i = n(40906), o = "__SHARED_STATE_KEY";
        r = window.hasOwnProperty(o) ? window.__SHARED_STATE_KEY : Object.create(null),
        Object.defineProperty(window, o, {
            configurable: !0,
            value: r
        });
        var a = ()=>window.__SHARED_STATE_KEY
          , s = e=>a()[e]
          , c = {
            persistIfInitialized: !0
        }
          , _ = (e,t,n)=>{
            var r = (0,
            i.defaults)({}, n, c)
              , o = e in a()
              , _ = s(e)
              , l = o && r.persistIfInitialized ? _ : t(_);
            ((e,t)=>{
                a()[e] = t
            }
            )(e, l);
            return ()=>s(e)
        }
    }
    ,
    561697: (e,t,n)=>{
        "use strict";
        n.d(t, {
            staticManagerModuleName: ()=>h,
            fillStaticFilesData: ()=>C,
            initStaticManager: ()=>T
        });
        n(796409),
        n(283946),
        n(991181),
        n(751876),
        n(59357),
        n(940851),
        n(296253),
        n(21466);
        var r, i = n(315544), o = n(159121), a = n(695724), s = n(726271), c = n(66433), _ = n(85372), l = n(40906), u = n(209509), d = {}, p = 12e4, h = "static_manager";
        function m() {
            __debugMode && (p = navigator.connection && "4g" === navigator.connection.effectiveType ? 3e3 : 3e4)
        }
        var f = e=>"dist/" + e
          , g = e=>/\.js$/.test(e)
          , v = e=>/\.css$/.test(e);
        function E(e) {
            var t = "/js/";
            return stTypes.fromLib[e] ? t = "/js/lib/" : stTypes.fromCompiled && stTypes.fromCompiled[e] ? t = "/" + f("web/") : /^lang\d/i.test(e) || stTypes.fromRoot[e] || -1 !== e.indexOf("/") ? 0 === e.indexOf("dist") && (t = "/") : t = "/js/al/",
            t
        }
        function y(e) {
            return stTypes.fromRoot[e] || e.includes("/") || e.match(/^[\w_-]+\.[0-9a-f]{20}\.css$/) ? "" : "al/"
        }
        function w(e, t, n) {
            (0,
            c.logError)(t, {
                environment: h,
                breadcrumb: {
                    message: String(n),
                    category: u.customBreadcrumbCategory
                }
            }),
            (0,
            o.topMsg)(`Some problems with loading <b>${e}</b>...`, 5),
            d[e] && d[e]()
        }
        function b(e) {
            return !g(e) && !v(e) || function(e) {
                for (var t = 0; t < vk.stExcludedMasks.length; t++)
                    if (-1 !== e.indexOf(vk.stExcludedMasks[t]))
                        return !0;
                return !1
            }(e) ? "" : (0 === `${E(t = e)}${t}`.indexOf("dist/") || v(e)) && vk.stDomain || "";
            var t
        }
        function C() {
            (0,
            a.each)(StaticFiles, ((e,t)=>{
                t.t = v(e) ? "css" : "js",
                t.n = e.replace(/[\/\.]/g, "_"),
                t.l = 0,
                t.c = 0
            }
            ))
        }
        function T() {
            window.addEventListener("load", m, {
                passive: !0
            }),
            window.jsc = f,
            window.stQueue = d,
            window.stVersions || (window.stVersions = {},
            window.stTypes = {
                fromLib: {},
                fromRoot: {}
            },
            window.navMap = {}),
            window.StaticFiles || (window.StaticFiles = {}),
            function() {
                for (var e = 0, t = Object.values(window.StaticFiles); e < t.length; e++)
                    t[e].isLoading = Promise.resolve()
            }(),
            window.stManager || (window.stManager = r)
        }
        r = {
            _addCss: function(e, t) {
                var n = (0,
                i.ce)("style", {
                    type: "text/css",
                    media: "screen"
                })
                  , r = (0,
                i.domNS)(t);
                return r ? headNode.insertBefore(n, r) : headNode.appendChild(n),
                n.sheet ? n.sheet.insertRule(e, 0) : n.styleSheet && (n.styleSheet.cssText = e),
                n
            },
            _srcPrefix: b,
            _add: function(e) {
                if (StaticFiles[e] && StaticFiles[e].isLoading)
                    return StaticFiles[e].isLoading;
                var t = stVersions[e] || 1
                  , n = e.replace(/[\/\.]/g, "_")
                  , i = b(e);
                return StaticFiles[e] = {
                    v: t,
                    n,
                    l: 0,
                    c: 0
                },
                g(e) ? function(e) {
                    var t = e.fileName
                      , n = e.fileFullName
                      , i = e.domainPrefix
                      , o = E(t);
                    StaticFiles[t].t = "js";
                    var a = (new Error).stack;
                    if (t !== f("web/common_web.js")) {
                        var s = i + o + n;
                        StaticFiles[t].src = s;
                        var c = new Promise(((e,n)=>{
                            if ((0,
                            _.loadScript)(s, (e=>{
                                e && (StaticFiles[t] = null,
                                n(e))
                            }
                            )),
                            s.includes("dist/bundles/"))
                                e();
                            else {
                                var r = setTimeout((()=>w(t, new Error(`${_.JS_LOAD_ERROR_TEXT} ${t}`), a)), p)
                                  , i = t.replace(/^cmodules\//, "").replace(/^dist\//, "");
                                d[i] = ()=>{
                                    clearTimeout(r),
                                    e(),
                                    d[i] = null
                                }
                            }
                        }
                        )).catch((e=>(w(t, e, a),
                        Promise.resolve())));
                        return StaticFiles[t].isLoading = c,
                        c
                    }
                    setTimeout((()=>r.done(f("web/common_web.js"))), 0)
                }({
                    fileName: e,
                    fileFullName: e + "?" + t,
                    domainPrefix: i
                }) : v(e) ? function(e) {
                    var t = e.fileName
                      , n = e.domainPrefix
                      , r = y(t)
                      , i = n + (r = t.startsWith("dist/") ? "/" + r : "/css/" + r) + t
                      , o = (new Error).stack
                      , a = (0,
                    _.loadStyle)(i).catch((e=>w(t, e, o)));
                    return StaticFiles[t].t = "css",
                    StaticFiles[t].isLoading = a,
                    StaticFiles[t].src = i,
                    a
                }({
                    fileName: e,
                    domainPrefix: i
                }) : void 0
            },
            add: function(e, t) {
                var n = [];
                for (var i in (0,
                a.isArray)(e) || (e = [e]),
                e)
                    if (e.hasOwnProperty(i)) {
                        var o = e[i];
                        if (o) {
                            o.includes("?") && (o = o.split("?")[0]);
                            var c = "";
                            g(o) ? c = E(o) : v(o) && (c = y(o)),
                            /^lang\d/i.test(o) ? stVersions[o] = stVersions.lang : stVersions[c + o] || (stVersions[c + o] = 1);
                            var _ = !1;
                            if (window.stDeps) {
                                var u = c + o
                                  , d = "/css/" + c + o
                                  , p = "";
                                window.stDeps[u] ? p = u : window.stDeps[d] && (p = d),
                                p && (_ = !0,
                                window.stDeps[p].forEach((e=>{
                                    n.push(r._add(e))
                                }
                                )))
                            }
                            if (__debugMode && !s.browser.iphone && !s.browser.ipad && o !== f("web/common_web.js") && "common.css" !== o && stVersions[o] > 0 && stVersions[o] < 1e9 && (stVersions[o] += (0,
                            a.irand)(1e9, 2e9)),
                            !_) {
                                var h = StaticFiles[o];
                                h && h.v == stVersions[o] ? n.push(h.isLoading) : n.push(r._add(o, h))
                            }
                        }
                    }
                return Promise.all(n).then((e=>((0,
                l.isFunction)(t) && t(e),
                e)))
            },
            done: function(e) {
                var t, n, r = e;
                if (t = e,
                (void 0 === (n = window.stDeps) ? [] : n)[`${E(t)}${t}`])
                    r = function(e) {
                        var t = window.stDeps
                          , n = (void 0 === t ? [] : t)[`${E(e)}${e}`];
                        return n[n.length - 1]
                    }(e);
                else if (function(e) {
                    return !!~e.indexOf("dist/internal/")
                }(e) && (!StaticFiles[r] || 1 === StaticFiles[r].l)) {
                    var i = new RegExp(r.replace(/.js$/, ".[0-9a-f]{20}.js"))
                      , o = !1;
                    Object.keys(StaticFiles).forEach((e=>{
                        i.test(e) && !StaticFiles[e].l && (o = e)
                    }
                    )),
                    o && (r = o)
                }
                var a = r.replace(/^cmodules\//, "").replace(/^dist\//, "");
                d[a] && d[a](),
                StaticFiles[r] && (StaticFiles[r].l = 1)
            }
        }
    }
    ,
    460615: (e,t,n)=>{
        "use strict";
        n.d(t, {
            statlogsValueEvent: ()=>s.statlogsValueEvent,
            serviceGroups: ()=>m,
            serviceGroupsCatalog: ()=>f,
            serviceSearchCommunities: ()=>g,
            serviceEvents: ()=>v,
            serviceFriends: ()=>E,
            serviceSearchPeople: ()=>y,
            serviceFriendsFind: ()=>w,
            serviceWallUsers: ()=>b,
            serviceWallGroups: ()=>C,
            serviceWall: ()=>T,
            serviceSearchStatuses: ()=>D,
            serviceNews: ()=>A,
            serviceSearchAudio: ()=>S,
            serviceBookmarksGroups: ()=>P,
            serviceBookmarksUsers: ()=>O,
            serviceAppsList: ()=>I,
            serviceApps: ()=>M,
            serviceAppsManage: ()=>R,
            serviceSearchVideo: ()=>L,
            serviceSearchClips: ()=>k,
            serviceTopSearch: ()=>B,
            servicePhotos: ()=>x,
            serviceDocs: ()=>N,
            serviceMessages: ()=>U,
            serviceAudio: ()=>W,
            serviceSearchAuto: ()=>F,
            serviceManage: ()=>K,
            serviceVideo: ()=>V,
            serviceMarket: ()=>H,
            serviceMarketV2: ()=>j,
            serviceMarketGroups: ()=>G,
            serviceUserFriends: ()=>q,
            serviceGamesCatalog: ()=>$,
            clickTypeJoinGroupOut: ()=>be,
            clickTypeLeaveGroupOut: ()=>Ce,
            clickTypeAddFriendOut: ()=>Te,
            clickTypeRemoveFriendOut: ()=>De,
            outOfSerpGroup: ()=>Ae,
            outOfSerpProfile: ()=>Se,
            blockNameOwn: ()=>Oe,
            blockNameSearch: ()=>Ie,
            blockNameSearchAudio: ()=>Me,
            blockNameSearchPeople: ()=>Re,
            blockNameSearchGroups: ()=>Le,
            blockNameSearchVideo: ()=>ke,
            blockNameSearchClips: ()=>Be,
            blockNameSearchMarket: ()=>xe,
            blockNameSearchClassifieds: ()=>Ne,
            blockNameSearchPosts: ()=>Ue,
            tryLogOutOfSerpClick: ()=>pt,
            removeOutOfSerpClickLogging: ()=>ht,
            removeSearchPositionTracker: ()=>vt,
            logLeftMenuClicks: ()=>Et,
            saveSearchAttemptStats: ()=>yt,
            generateQID: ()=>wt
        });
        n(579665),
        n(95767),
        n(66108),
        n(991181),
        n(296253),
        n(530522),
        n(751876),
        n(59357);
        var r = n(695724)
          , i = n(40906)
          , o = n(49535)
          , a = n(315544)
          , s = n(479957)
          , c = n(522683)
          , _ = n(124041);
        function l(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || d(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function u(e) {
            if ("undefined" == typeof Symbol || null == e[Symbol.iterator]) {
                if (Array.isArray(e) || (e = d(e))) {
                    var t = 0
                      , n = function() {};
                    return {
                        s: n,
                        n: function() {
                            return t >= e.length ? {
                                done: !0
                            } : {
                                done: !1,
                                value: e[t++]
                            }
                        },
                        e: function(e) {
                            throw e
                        },
                        f: n
                    }
                }
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }
            var r, i, o = !0, a = !1;
            return {
                s: function() {
                    r = e[Symbol.iterator]()
                },
                n: function() {
                    var e = r.next();
                    return o = e.done,
                    e
                },
                e: function(e) {
                    a = !0,
                    i = e
                },
                f: function() {
                    try {
                        o || null == r.return || r.return()
                    } finally {
                        if (a)
                            throw i
                    }
                }
            }
        }
        function d(e, t) {
            if (e) {
                if ("string" == typeof e)
                    return p(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                return "Object" === n && e.constructor && (n = e.constructor.name),
                "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? p(e, t) : void 0
            }
        }
        function p(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var h = {}
          , m = "groups"
          , f = "groups_catalog"
          , g = "search_communities"
          , v = "events"
          , E = "friends"
          , y = "search_people"
          , w = "friends_find"
          , b = "wall_users"
          , C = "wall_groups"
          , T = "wall"
          , D = "search_statuses"
          , A = "news"
          , S = "search_audio"
          , P = "bookmarks_groups"
          , O = "bookmarks_users"
          , I = "apps_list"
          , M = "apps"
          , R = "apps_manage"
          , L = "search_video"
          , k = "search_clips"
          , B = "top_search"
          , x = "photos"
          , N = "docs"
          , U = "messages"
          , W = "audio"
          , F = "search_auto"
          , K = "manage"
          , V = "video"
          , H = "market"
          , j = "market_v2"
          , G = "market_groups"
          , q = "user_friends"
          , $ = "games_catalog"
          , Y = ""
          , z = "tap"
          , X = "join_group"
          , Q = "leave_group"
          , J = "fave"
          , Z = "unfave"
          , ee = "write_msg"
          , te = "add_friend"
          , ne = "remove_friend"
          , re = "restore_friend"
          , ie = "show_photo"
          , oe = "add"
          , ae = "remove"
          , se = "play"
          , ce = "pause"
          , _e = "open_artist"
          , le = "open_author_group"
          , ue = "open_author_user"
          , de = "open_author"
          , pe = "open_store"
          , he = "show_similar"
          , me = "search_by_tag"
          , fe = "edit"
          , ge = "like"
          , ve = "comment"
          , Ee = "share"
          , ye = "mark_as_spam"
          , we = "stats"
          , be = "join_group_out"
          , Ce = "leave_group_out"
          , Te = "add_friend_out"
          , De = "remove_friend_out"
          , Ae = "group"
          , Se = "profile"
          , Pe = ""
          , Oe = "own"
          , Ie = "search"
          , Me = "search_audio"
          , Re = "search_people"
          , Le = "search_groups"
          , ke = "search_video"
          , Be = "search_clips"
          , xe = "search_market"
          , Ne = "search_classifieds"
          , Ue = "search_posts"
          , We = "own_playlists"
          , Fe = "global_clips"
          , Ke = "own_audios"
          , Ve = "search_artists"
          , He = "search_playlists"
          , je = "search_global_playlists"
          , Ge = "search_audios"
          , qe = "own_conversations"
          , $e = "own_messages"
          , Ye = "own_albums"
          , ze = "own_videos"
          , Xe = "video_playlists"
          , Qe = "search_videos"
          , Je = "serps"
          , Ze = "SERPS_LOGS_DATA_LOCK"
          , et = ""
          , tt = "user"
          , nt = "group"
          , rt = "event"
          , it = "public"
          , ot = "grid"
          , at = "list";
        function st(e, t, n) {
            var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : ""
              , o = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : void 0
              , s = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : void 0
              , c = 0
              , _ = ""
              , d = 0
              , p = 1
              , h = 0
              , m = 0;
            return e && ((0,
            i.isArray)(n) || (n = [n]),
            n.some((n=>{
                var i, f = e.classList.contains(n) ? e : (0,
                a.gpeByClass)(n, e), g = 0;
                if (f && (i = r ? bodyNode.querySelectorAll(r) : f.parentNode.children)) {
                    if ((c = [...i].indexOf(f) + 1) && o)
                        for (var v in o)
                            if (o.hasOwnProperty(v)) {
                                var E = bodyNode.querySelectorAll(o[v]);
                                if (E) {
                                    var y = [...E].indexOf(f) + 1;
                                    if (y) {
                                        d = y,
                                        _ = v;
                                        break
                                    }
                                }
                                p++,
                                g++
                            }
                    if (s) {
                        var w, b = u(s);
                        try {
                            for (b.s(); !(w = b.n()).done; ) {
                                var C = w.value
                                  , T = (0,
                                a.gpeByClass)(C, e);
                                T && (p = T.getAttribute("data-block-num"))
                            }
                        } catch (e) {
                            b.e(e)
                        } finally {
                            b.f()
                        }
                    }
                    var D = l(t(f, g), 2);
                    return h = D[0],
                    m = D[1],
                    !0
                }
            }
            ))),
            [c, h, m, _, d, p]
        }
        function ct(e, t, n, i, o, s, c) {
            if (h[e]) {
                var u = c.target;
                if (u && u.classList)
                    switch (e) {
                    case m:
                        return void function(e, t, n, r, i, o) {
                            if (!t)
                                return;
                            var s = o.classList
                              , c = o.outerHTML
                              , u = o.tagName
                              , d = l(st(o, (e=>{
                                var t = e.getAttribute("id") || e.getAttribute("data-id");
                                return [0, "-" + (t = t ? t.replace("gl_groups", "").replace("gl_admin", "") : 0)]
                            }
                            ), ["_gl_row", "search_row"], "#groups_list_tab_groups ._gl_row, #groups_list_search_wrap ._gl_row, #results .search_row, #groups_list_search_wrap .search_row", {
                                [Oe]: "#groups_list_tab_groups ._gl_row",
                                [Ie]: "#groups_list_search_wrap ._gl_row, #groups_list_search_wrap .search_row"
                            }), 5)
                              , p = d[1]
                              , h = d[2]
                              , m = d[3]
                              , f = d[4];
                            if (!f)
                                return;
                            m === Oe && (r = 0,
                            i = "");
                            var g = Y;
                            if (s.contains("group_row_title") || s.contains("group_row_img") || s.contains("highlight") || s.contains("search_item_img") || "A" === u && -1 !== c.indexOf("return nav.go")) {
                                var v = (0,
                                a.gpeByClass)("group_list_row", o) || (0,
                                a.gpeByClass)("groups_row", o);
                                if (!v)
                                    return;
                                if (v.hasAttribute("data-clicked"))
                                    return;
                                v.setAttribute("data-clicked", !0),
                                g = z
                            }
                            (_.FlatButton.isFlatButton(o) && _.FlatButton.getAppearance(o) !== _.FlatButtonAppearance.SECONDARY || s.contains("search_sub_button")) && (g = X);
                            (_.FlatButton.isFlatButton(o) && _.FlatButton.getAppearance(o) === _.FlatButtonAppearance.SECONDARY || s.contains("search_unsub_button")) && (g = Q);
                            if (m === Oe && -1 !== c.indexOf("GroupsList.subscribe")) {
                                if (s.contains("ui_actions_menu"))
                                    return;
                                g = X,
                                !cur.scrollList.deleted[-h] && (g = Q)
                            }
                            if (m === Oe && -1 !== c.indexOf("GroupsList.toggleFave")) {
                                if (s.contains("ui_actions_menu"))
                                    return;
                                g = J,
                                "1" === o.getAttribute("data-value") && (g = Z)
                            }
                            if (g === Y)
                                return;
                            dt(),
                            g === z && ut(Ae, e, m, f, n, t, h, p, r, i);
                            mt(e, m, f, g, n, t, h, p, r, i, et)
                        }(e, t, n, i, o, u);
                    case g:
                        return void function(e, t, n, r, i, o, s) {
                            if (!t)
                                return;
                            var c = s.classList
                              , _ = s.outerHTML
                              , u = s.tagName
                              , d = l(st(s, (e=>{
                                var t = e.getAttribute("data-id");
                                return t || (t = 0),
                                [0, "-" + t]
                            }
                            ), "search_row", "#results .search_row"), 3)
                              , p = d[0]
                              , h = d[1]
                              , m = d[2];
                            if (!p)
                                return;
                            var f = Y;
                            if (c.contains("search_item_img") || c.contains("highlight") || "A" === u && -1 !== _.indexOf("return nav.go")) {
                                var g = (0,
                                a.gpeByClass)("groups_row", s);
                                if (!g)
                                    return;
                                if (g.hasAttribute("data-clicked"))
                                    return;
                                g.setAttribute("data-clicked", !0),
                                f = z
                            }
                            c.contains("search_sub_button") && (f = X);
                            c.contains("search_unsub_button") && (f = Q);
                            if (f === Y)
                                return;
                            dt(),
                            f === z && ut(Ae, e, Pe, p, n, t, m, h, r, i);
                            mt(e, Pe, p, f, n, t, m, h, r, i, et, "", o)
                        }(e, t, n, i, o, s, u);
                    case f:
                        return void function(e, t, n, r, i, o) {
                            if (!t)
                                return;
                            var s = o.classList
                              , c = o.outerHTML
                              , _ = o.tagName
                              , u = l(st(o, (e=>{
                                var t = e.getAttribute("data-id");
                                return t || (t = 0),
                                [0, "-" + t]
                            }
                            ), "search_row", "#results .search_row"), 3)
                              , d = u[0]
                              , p = u[1]
                              , h = u[2]
                              , m = Y;
                            if (s.contains("search_item_img") || s.contains("highlight") || "A" === _ && -1 !== c.indexOf("return nav.go")) {
                                var f = (0,
                                a.gpeByClass)("groups_row", o);
                                if (!f)
                                    return;
                                if (f.hasAttribute("data-clicked"))
                                    return;
                                f.setAttribute("data-clicked", !0),
                                m = z
                            }
                            s.contains("search_sub_button") && (m = X);
                            s.contains("search_unsub_button") && (m = Q);
                            if (m === Y)
                                return;
                            dt(),
                            m === z && ut(Ae, e, Pe, d, n, t, h, p, r, i);
                            mt(e, Pe, d, m, n, t, h, p, r, i, et)
                        }(e, t, n, i, o, u);
                    case v:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.outerHTML
                              , _ = o.parentElement ? o.parentElement.classList : null
                              , u = l(st(o, (e=>{
                                var t = e.getAttribute("data-id");
                                return t || (t = 0),
                                [0, "-" + t]
                            }
                            ), "search_row", "#groups_list_in_tab_search_all .search_row"), 3)
                              , d = u[0]
                              , p = u[1]
                              , h = u[2];
                            if (!d)
                                return;
                            var m = Y;
                            if (s.contains("search_item_img") || -1 !== c.indexOf("return nav.go") && _ && _.contains("title")) {
                                var f = (0,
                                a.gpeByClass)("search_row", o);
                                if (!f)
                                    return;
                                if (f.hasAttribute("data-clicked"))
                                    return;
                                f.setAttribute("data-clicked", !0),
                                m = z
                            }
                            s.contains("search_sub_button") && (m = X);
                            s.contains("search_unsub_button") && (m = Q);
                            if (m === Y)
                                return;
                            dt(),
                            m === z && ut(Ae, e, Pe, d, n, t, h, p, r, i);
                            mt(e, Pe, d, m, n, t, h, p, r, i, et)
                        }(e, t, n, i, o, u);
                    case E:
                    case q:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.outerHTML
                              , _ = o.tagName
                              , u = l(st(o, (e=>{
                                var t = e.getAttribute("id");
                                return [0, t = t ? t.replace("friends_user_row", "") : 0]
                            }
                            ), "friends_user_row", "#list_content .friends_user_row, #friends_search_cont .friends_user_row", {
                                [Oe]: "#list_content .friends_user_row",
                                [Ie]: "#friends_search_cont .friends_user_row"
                            }), 5)
                              , d = u[1]
                              , p = u[2]
                              , h = u[3]
                              , m = u[4];
                            if (!m)
                                return;
                            var f = Y;
                            h === Oe && -1 !== c.indexOf("showWriteMessageBox") && (f = ee);
                            h === Oe && -1 !== c.indexOf("deleteFriend") && (f = ne);
                            h === Oe && s.contains("friends_restore_link") && (f = re);
                            s.contains("ui_zoom_icon") && (f = ie);
                            h === Ie && o.id && -1 !== o.id.indexOf("friends_subsc") && (f = te);
                            h === Ie && o.id && -1 !== o.id.indexOf("friends_unsubsc") && (f = ne);
                            if (s.contains("friends_photo_img") || h === Oe && "A" === _ && -1 !== c.indexOf("return nav.go") || h === Ie && "A" === _ && 0 === s.length) {
                                var g = (0,
                                a.gpeByClass)("friends_user_row", o);
                                if (!g)
                                    return;
                                if (g.hasAttribute("data-clicked"))
                                    return;
                                g.setAttribute("data-clicked", !0),
                                f = z
                            }
                            if (f === Y)
                                return;
                            dt(),
                            f === z && ut(Se, e, h, m, n, t, p, d, r, i);
                            mt(e, h, m, f, n, t, p, d, r, i, et)
                        }(e, t, n, i, o, u);
                    case w:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.outerHTML
                              , _ = o.parentElement ? o.parentElement.classList : null;
                            if (!t)
                                return;
                            var u = l(st(o, (e=>[0, e.getAttribute("data-id") || 0]), "search_row", "#results .search_row"), 3)
                              , d = u[0]
                              , p = u[1]
                              , h = u[2];
                            if (!d)
                                return;
                            var m = Y;
                            if (s.contains("search_item_img") || -1 !== c.indexOf("return nav.go") && _ && _.contains("name")) {
                                var f = (0,
                                a.gpeByClass)("people_row", o);
                                if (!f)
                                    return;
                                if (f.hasAttribute("data-clicked"))
                                    return;
                                f.setAttribute("data-clicked", !0),
                                m = z
                            }
                            s.contains("search_sub_button") && (m = te);
                            s.contains("search_unsub_button") && (m = ne);
                            if (m === Y)
                                return;
                            dt(),
                            m === z && ut(Se, e, Pe, d, n, t, h, p, r, i);
                            mt(e, Pe, d, m, n, t, h, p, r, i, et)
                        }(e, t, n, i, o, u);
                    case y:
                        return void function(e, t, n, r, i, o, s) {
                            var c = s.classList
                              , _ = s.outerHTML
                              , u = s.parentElement ? s.parentElement.classList : null;
                            if (!t)
                                return;
                            var d = l(st(s, (e=>[0, e.getAttribute("data-id") || 0]), "search_row", "#results .search_row"), 3)
                              , p = d[0]
                              , h = d[1]
                              , m = d[2];
                            if (!p)
                                return;
                            var f = Y;
                            if (c.contains("search_item_img") || -1 !== _.indexOf("return nav.go") && u && u.contains("name")) {
                                var g = (0,
                                a.gpeByClass)("people_row", s);
                                if (!g)
                                    return;
                                if (g.hasAttribute("data-clicked"))
                                    return;
                                g.setAttribute("data-clicked", !0),
                                f = z
                            }
                            c.contains("search_sub_button") && (f = te);
                            c.contains("search_unsub_button") && (f = ne);
                            if (f === Y)
                                return;
                            dt(),
                            f === z && ut(Se, e, Pe, p, n, t, m, h, r, i);
                            mt(e, Pe, p, f, n, t, m, h, r, i, et, "", o)
                        }(e, t, n, i, o, s, u);
                    case F:
                        return void function(e, t, n, i, o, s, c) {
                            var _ = c.classList
                              , u = c.tagName
                              , d = c.outerHTML
                              , p = st(c, (e=>{
                                var t = ""
                                  , n = e.classList;
                                if (n.contains("_audio_row"))
                                    t = e.getAttribute("data-full-id");
                                else {
                                    if (n.contains("people_row"))
                                        return [0, t = e.getAttribute("data-id") || 0];
                                    if (n.contains("groups_row"))
                                        return [0, "-" + (t = e.getAttribute("data-id") || 0)];
                                    n.contains("_video_item") ? t = e.getAttribute("data-id") : n.contains("ShortVideoGridItem") ? t = (t = e.getAttribute("href") || "").replace("/clip", "") : n.contains("SearchProduct--marketDefault") ? t = (t = e.getAttribute("data-stat-item") || "").replace("market_item|", "").replace("|", "_") : n.contains("SearchProduct--classifiedsDefault") ? t = (t = e.getAttribute("data-stat-item") || "").replace("classifieds_item|", "").replace("|", "_") : n.contains("_post") && (t = (t = e.getAttribute("id") || "").replace("post", ""))
                                }
                                return t && t.indexOf("_") ? t.split("_") : [0, t]
                            }
                            ), ["_audio_row", "search_row", "_video_item", "ShortVideoGridItem", "SearchProduct--marketDefault", "SearchProduct--classifiedsDefault", "_post"], "\n      ._search_results ._audio_row,\n      ._search_results .search_row,\n      ._search_results ._video_item,\n      ._search_results .ShortVideoGridItem,\n      .MarketSearchProducts .SearchProduct--marketDefault,\n      .ClassifiedsSearchProducts .SearchProduct--classifiedsDefault,\n      #results ._post\n    ", {
                                [Me]: "._search_results ._audio_row",
                                [Re]: "._search_results .people_row",
                                [Le]: "._search_results .groups_row",
                                [ke]: "._search_results ._video_item",
                                [Be]: "._search_results .ShortVideoGridItem",
                                [xe]: ".MarketSearchProducts .SearchProduct--marketDefault",
                                [Ne]: ".ClassifiedsSearchProducts .SearchProduct--classifiedsDefault",
                                [Ue]: "#results ._post"
                            }, ["search_audio_media", "search_people_media", "search_communities_media", "search_video_media", "search_clips_media", "search_market_media", "search_classifieds_media"])
                              , h = l(p, 6)
                              , m = h[1]
                              , f = h[2]
                              , g = h[3]
                              , v = h[4]
                              , E = h[5];
                            if (g === Ue) {
                                for (var y = 0, w = (0,
                                a.ge)("search_auto_rows"), b = 0; b < w.children.length; ++b) {
                                    var C = w.children[b]
                                      , T = (0,
                                    r.intval)(C.getAttribute("data-block-num"));
                                    y = Math.max(y, T)
                                }
                                E = y + 1
                            }
                            if (!v)
                                return;
                            var D = Y;
                            switch (g) {
                            case ke:
                                _.contains("icon_add") && (D = oe),
                                _.contains("icon_added") && (D = ae),
                                (_.contains("video_thumb_play") || _.contains("video_item_controls") || _.contains("video_item_title")) && (D = se),
                                _.contains("al_need_login") && (D = _e),
                                _.contains("group_link") && (D = le),
                                _.contains("mem_link") && (D = ue);
                                break;
                            case Me:
                                (_.contains("audio_row__play_btn") || _.contains("audio_row__performer_title") || _.contains("audio_row__performers") || _.contains("audio_row__title") || _.contains("audio_row__title_inner") || _.contains("audio_row__title_inner_subtitle") || _.contains("audio_row__inner") || _.contains("audio_player__place") || _.contains("audio_row__action_next")) && (D = se),
                                (0,
                                a.gpeByClass)("audio_row__play_btn_icon--play", c) && (D = se),
                                (0,
                                a.gpeByClass)("audio_row__play_btn_icon--pause", c) && (D = ce),
                                (0,
                                a.gpeByClass)("audio_row__action_add", c) && (D = oe),
                                "A" === u && (D = _e);
                                break;
                            case Re:
                                "A" === u && -1 !== d.indexOf("searcher.subscribe") && (D = ne),
                                _.contains("add_btn") && (D = te),
                                (_.contains("search_item_img") || (0,
                                a.gpeByClass)("name", c)) && (D = z,
                                ut(Se, e, g, v, n, t, f, m, i, o, s, E));
                                break;
                            case Le:
                                (_.contains("search_item_img") || (0,
                                a.gpeByClass)("title", c) || "A" === u && -1 !== d.indexOf("return nav.go")) && (D = z,
                                ut(Ae, e, g, v, n, t, f, m, i, o, s, E));
                                break;
                            case Be:
                                D = se;
                                break;
                            case xe:
                                (_.contains("SearchProductImage__img") || _.contains("SearchProduct__title")) && (D = z),
                                _.contains("SearchProduct__storeName") && (D = pe);
                                var A = (0,
                                a.gpeByClass)("SearchProduct__fav", c);
                                if (A) {
                                    var S = Array.from(A.children).find((e=>e.className.includes("favorite_outline")));
                                    D = S ? J : Z
                                }
                                break;
                            case Ne:
                                (_.contains("SearchProductImage__img") || _.contains("SearchProduct__title")) && (D = z);
                                var P = (0,
                                a.gpeByClass)("SearchProduct__fav", c);
                                if (P) {
                                    var O = Array.from(P.children).find((e=>e.className.includes("favorite_outline")));
                                    D = O ? J : Z
                                }
                                break;
                            case Ue:
                                (0,
                                a.gpeByClass)("post", c, "div#results") && (D = z)
                            }
                            if (D === Y)
                                return;
                            mt(e, g, v, D, n, t, f, m, i, o, et, "", s, E)
                        }(e, t, n, i, o, s, u);
                    case P:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.outerHTML
                              , _ = l(st(o, (e=>{
                                var t = e.getAttribute("data-id");
                                return t || (t = 0),
                                [0, t]
                            }
                            ), "_bookmark_page_item"), 3)
                              , u = _[0]
                              , d = _[1]
                              , p = _[2];
                            if (!u)
                                return;
                            var h = Y;
                            if (s.contains("group_link") || s.contains("bookmark_page_item__image")) {
                                var m = (0,
                                a.gpeByClass)("_bookmark_page_item", o);
                                if (!m)
                                    return;
                                if (m.hasAttribute("data-clicked"))
                                    return;
                                m.setAttribute("data-clicked", !0),
                                h = z
                            }
                            (s.contains("ui_zoom") || s.contains("ui_zoom_icon")) && (h = ie);
                            -1 !== c.indexOf("Bookmarks.removeBookmark") && (h = Z);
                            if (h === Y)
                                return;
                            dt(),
                            h === z && ut(Ae, e, Pe, u, n, t, p, d, r, i);
                            mt(e, Pe, u, h, n, t, p, d, r, i, et)
                        }(e, t, n, i, o, u);
                    case O:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.outerHTML
                              , _ = l(st(o, (e=>{
                                var t = e.getAttribute("data-id");
                                return t || (t = 0),
                                [0, t]
                            }
                            ), "_bookmark_page_item"), 3)
                              , u = _[0]
                              , d = _[1]
                              , p = _[2];
                            if (!u)
                                return;
                            var h = Y;
                            if (s.contains("mem_link") || s.contains("bookmark_page_item__image")) {
                                var m = (0,
                                a.gpeByClass)("_bookmark_page_item", o);
                                if (!m)
                                    return;
                                if (m.hasAttribute("data-clicked"))
                                    return;
                                m.setAttribute("data-clicked", !0),
                                h = z
                            }
                            (s.contains("ui_zoom") || s.contains("ui_zoom_icon")) && (h = ie);
                            -1 !== c.indexOf("Bookmarks.removeBookmark") && (h = Z);
                            if (h === Y)
                                return;
                            dt(),
                            h === z && ut(Se, e, Pe, u, n, t, p, d, r, i);
                            mt(e, Pe, u, h, n, t, p, d, r, i, et)
                        }(e, t, n, i, o, u);
                    case S:
                        !function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.tagName;
                            if ((0,
                            a.gpeByClass)("ap_layer_wrap", o))
                                return;
                            if (!(0,
                            a.gpeByClass)("search_results", o))
                                return;
                            var _ = l(st(o, (e=>{
                                var t = e.getAttribute("data-full-id");
                                return t && t.indexOf("_") ? t.split("_") : [0, 0]
                            }
                            ), "_audio_row"), 3)
                              , u = _[0]
                              , d = _[1]
                              , p = _[2];
                            if (!u)
                                return;
                            var h = Y;
                            (s.contains("audio_row__cover_icon") || s.contains("audio_row__performer_title") || s.contains("audio_row__title") || s.contains("audio_row__title_inner") || s.contains("audio_row__title_inner_subtitle") || s.contains("audio_row__inner") || s.contains("audio_player__place") || s.contains("audio_row__action_next") || s.contains("audio_row__performers")) && (h = se);
                            s.contains("audio_row__action_add") && (h = oe);
                            "A" === c && (h = _e);
                            if (h === Y)
                                return;
                            mt(e, Pe, u, h, n, t, p, d, r, i, et)
                        }(e, t, n, i, o, u);
                        break;
                    case L:
                        return void function(e, t, n, r, i, o, a) {
                            var s = a.classList
                              , c = l(st(a, (e=>{
                                var t = e.getAttribute("data-id");
                                return t && t.indexOf("_") ? t.split("_") : [0, 0]
                            }
                            ), "_video_item", "#results ._video_item"), 3)
                              , _ = c[0]
                              , u = c[1]
                              , d = c[2];
                            if (!_)
                                return;
                            var p = Y;
                            (s.contains("video_thumb_play") || s.contains("video_item_controls") || s.contains("video_thumb_label_item") || s.contains("video_thumb_label") || s.contains("video_item_title") || s.contains("mv_subtitle")) && (p = se);
                            (s.contains("icon_add") || s.contains("video_thumb_action_add") || s.contains("VideoCard__action--add")) && (p = oe);
                            s.contains("icon_added") && (p = ae);
                            s.contains("group_link") && (p = le);
                            s.contains("al_need_login") && (p = _e);
                            s.contains("mem_link") && (p = ue);
                            if (p === Y)
                                return;
                            mt(e, Pe, _, p, n, t, d, u, r, i, et, "", o)
                        }(e, t, n, i, o, s, u);
                    case k:
                        return void function(e, t, n, r, i, o, a) {
                            var s = a.classList
                              , c = l(st(a, (e=>{
                                var t = e.parentNode.getAttribute("href");
                                return (t = t.replace("/clip", "")) && t.indexOf("_") ? t.split("_") : [0, 0]
                            }
                            ), "ShortVideoGridItem__thumb", ".ShortVideoGridItem__thumb"), 3)
                              , _ = c[0]
                              , u = c[1]
                              , d = c[2];
                            if (!_)
                                return;
                            var p = Y;
                            s.contains("ShortVideoGridItem__thumb") && (p = se);
                            if (p === Y)
                                return;
                            mt(e, Pe, _, p, n, t, d, u, r, i, et, "", o)
                        }(e, t, n, i, o, s, u);
                    case W:
                        return void function(e, t, n, r, i, o) {
                            var a = o.classList
                              , s = o.tagName
                              , c = o.parentElement ? o.parentElement.classList : null
                              , _ = l(st(o, ((e,t)=>{
                                var n = "";
                                switch (t) {
                                case 1:
                                case 4:
                                case 2:
                                    n = e.getAttribute("data-full-id");
                                    break;
                                case 0:
                                case 3:
                                case 6:
                                    n = e.getAttribute("data-raw-id")
                                }
                                return n && n.indexOf("_") ? n.split("_") : n ? [n, 0] : [0, 0]
                            }
                            ), ["_audio_pl_item", "audio_block_small_item", "_audio_row", "_video_item"], "\n        ._audio_section__search ._audio_pl_item,\n        ._audio_section__search ._audio_row,\n        ._audio_section__search .audio_block_small_item,\n        ._audio_section__search .video_item,\n        ._audio_search_blocks ._audio_row,\n        ._audio_search_blocks ._video_item,\n        ._audio_search_blocks ._audio_pl_item,\n        ._audio_search_blocks .audio_block_small_item\n      ", {
                                [He]: ".CatalogBlock__search_global_albums ._audio_pl_item",
                                [Ke]: ".CatalogBlock__search_owned_audios ._audio_row",
                                [Ge]: ".CatalogBlock__search_global_audios ._audio_row",
                                [Ve]: ".CatalogBlock__search_global_artists .audio_block_small_item",
                                [Fe]: ".CatalogBlock__search_global_clips .video_item",
                                [We]: '._audio_page_block__playlists_items[data-audio-context="search_owned_playlist"] ._audio_pl_item',
                                [je]: ".CatalogBlock__search_global_playlists ._audio_pl_item"
                            }), 5)
                              , u = _[1]
                              , d = _[2]
                              , p = _[3]
                              , h = _[4];
                            if (!h)
                                return;
                            var m = Y;
                            a.contains("audio_row__action_more") || c && c.contains("audio_row__actions") || (m = se);
                            a.contains("audio_row__action_next") && (m = se);
                            p === Ke && a.contains("audio_row__action_recoms") && (m = he);
                            p === Ke && a.contains("audio_row__action_delete") && (m = ae);
                            p === Ke && a.contains("audio_row__action_add") && (m = oe);
                            p === Ge && a.contains("audio_row__action_add") && (m = oe);
                            p === Fe && a.contains("icon_add") && (m = oe);
                            p === Fe && a.contains("icon_added") && (m = ae);
                            "A" === s && (m = _e);
                            if (m === Y)
                                return;
                            mt(e, p, h, m, n, t, d, u, r, i, et)
                        }(e, t, n, i, o, u);
                    case B:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o;
                            s.contains("ts_contact") || (c = (0,
                            a.gpeByClass)("ts_contact", o, "div#ts_cont_wrap"));
                            var _ = st(c, (()=>[0, (c.id || "").replace("ts_contact", "")]), "ts_contact", "#ts_cont_wrap .ts_contact")
                              , u = l(_, 3)
                              , d = u[0]
                              , p = u[1]
                              , h = u[2];
                            if (!d)
                                return;
                            var m = z
                              , f = et;
                            switch (c.getAttribute("hinttype")) {
                            case "h_friends":
                                f = tt,
                                s.contains("ts_contact_status") && (m = ee);
                                break;
                            case "h_mutual_friends":
                            case "s_people":
                            case "h_mail_peers":
                                f = tt;
                                break;
                            case "h_vk_apps":
                            case "h_apps":
                                f = "app";
                                break;
                            case "h_events":
                                f = rt;
                                break;
                            case "h_publics":
                                f = it;
                                break;
                            case "h_visited":
                            case "s_groups":
                                f = nt
                            }
                            mt(e, Pe, d, m, n, t, h, p, r, i, f)
                        }(e, t, n, i, o, u);
                    case V:
                        return void function(e, t, n, r, i, o, a) {
                            var s = a.classList
                              , c = l(st(a, ((e,t)=>{
                                var n = "";
                                switch (t) {
                                case 1:
                                case 3:
                                    n = e.getAttribute("data-id");
                                    break;
                                case 2:
                                    n = e.getAttribute("data-name")
                                }
                                return n && n.indexOf("_") ? n.split("_") : [0, 0]
                            }
                            ), ["video_playlist_item", "_video_item", "ui_gallery_item"], "\n        #video_layout_search .video_playlist_item,\n        #video_layout_search ._video_item,\n        #video_subtab_pane_search_promo_albums .ui_gallery_item\n      ", {
                                [Ye]: "#video_subtab_pane_search_albums .video_playlist_item",
                                [ze]: "#video_subtab_pane_search_videos ._video_item",
                                [Xe]: "#video_subtab_pane_search_promo_albums .ui_gallery_item",
                                [Qe]: "#video_subtab_pane_search_global_videos ._video_item"
                            }), 5)
                              , _ = c[1]
                              , u = c[2]
                              , d = c[3]
                              , p = c[4];
                            if (!p)
                                return;
                            var h = Y;
                            (s.contains("icon_add") || s.contains("video_thumb_action_add") || s.contains("VideoCard__action--add")) && (h = oe);
                            s.contains("icon_added") && (h = ae);
                            d === ze && s.contains("video_restore_act") && (h = oe);
                            d === ze && s.contains("video_thumb_action_delete") && (h = ae);
                            (s.contains("video_item_title") || s.contains("video_item_controls") || s.contains("video_thumb_label_item") || s.contains("video_thumb_play")) && (h = se);
                            s.contains("group_link") && (h = le);
                            s.contains("al_need_login") && (h = _e);
                            s.contains("mem_link") && (h = ue);
                            h === Y && d === Xe && (s.contains("VideoCard__controlsOverlay") || s.contains("VideoCard__title") || s.contains("VideoCard__icon") || s.contains("VideoCard__controlsOverlayText")) && (h = z);
                            if (h === Y)
                                return;
                            mt(e, d, p, h, n, t, u, _, r, i, et, "", o)
                        }(e, t, n, i, o, s, u);
                    case H:
                    case G:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = ot;
                            (0,
                            a.gpeByClass)("market_row_line", o, ".marketplace_content_search") && (c = at);
                            var _ = c === ot ? "_market_row" : "market_row_line"
                              , u = l(st(o, (e=>[0, e.getAttribute("data-id") || 0]), _, "#marketplace_content ." + _), 3)
                              , d = u[0]
                              , p = u[1]
                              , h = u[2];
                            if (!d)
                                return;
                            var m = Y;
                            switch (c) {
                            case at:
                                (s.contains("market_row_img") || s.contains("link")) && (m = z),
                                s.contains("market_favourite") && !s.contains("selected") && (m = J),
                                s.contains("market_favourite") && s.contains("selected") && (m = Z),
                                s.contains("mem_link") && (m = ue),
                                s.contains("group_link") && (m = le);
                                break;
                            case ot:
                                m = z,
                                (s.contains("icon") || s.contains("fav")) && (m = J),
                                s.contains("market_row_user_link") && (m = ue)
                            }
                            if (m === Y)
                                return;
                            mt(e, Pe, d, m, n, t, h, p, r, i, et)
                        }(e, t, n, i, o, u);
                    case j:
                        return void function(e, t, n, r, i, o) {
                            var a = o.classList
                              , s = l(st(o, (e=>[+e.getAttribute("data-owner-id"), +e.getAttribute("data-id")]), "ClassifiedsCatalogProduct__serpItem"), 3)
                              , c = s[0]
                              , _ = s[1]
                              , u = s[2];
                            if (!c)
                                return;
                            var d = Y;
                            a.contains("ClassifiedsCatalogProduct__serpTap") && (d = z);
                            a.contains("ClassifiedsProductFavouriteButton--favorite") && (d = J);
                            a.contains("ClassifiedsProductFavouriteButton--notFavorite") && (d = Z);
                            a.contains("ClassifiedsCatalogProduct__serpOwnerGroup") && (d = le);
                            a.contains("ClassifiedsCatalogProduct__serpOwnerUser") && (d = ue);
                            if (d === Y)
                                return;
                            mt(e, Pe, c, d, n, t, u, _, r, i, et)
                        }(e, t, n, i, o, u);
                    case U:
                        return void function(e, t, n, r, i, o) {
                            var a = l(st(o, (e=>{
                                var t = e.getAttribute("data-peer");
                                return t || (t = 0),
                                [0, t]
                            }
                            ), "_im_dialog", "._im_page_dcontent ._im_dialog", {
                                [qe]: "._im_page_dcontent ._im_dialog:not(._im_search)",
                                [$e]: "._im_page_dcontent ._im_dialog._im_search"
                            }), 5)
                              , s = a[1]
                              , c = a[2]
                              , _ = a[3]
                              , u = a[4];
                            if (!u)
                                return;
                            mt(e, _, u, z, n, t, c, s, r, i, et)
                        }(e, t, n, i, o, u);
                    case N:
                        return void function(e, t, n, r, i, o) {
                            var a = o.classList
                              , s = o.outerHTML
                              , c = l(st(o, (e=>{
                                var t = e.getAttribute("id");
                                return t && (t = t.replace("docs_file_", "")),
                                t && t.indexOf("_") ? t.split("_") : [0, 0]
                            }
                            ), "_docs_item", "#docs_list ._docs_item, #docs_search_list ._docs_item", {
                                [Oe]: "#docs_list ._docs_item",
                                [Ie]: "#docs_search_list ._docs_item"
                            }), 5)
                              , _ = c[1]
                              , u = c[2]
                              , d = c[3]
                              , p = c[4];
                            if (!p)
                                return;
                            var h = Y;
                            d === Ie && a.contains("docs_add_row") && (h = oe);
                            d === Oe && a.contains("docs_delete_row") && (h = ae);
                            d === Oe && -1 !== s.indexOf("Docs.restoreItem") && (h = oe);
                            d === Oe && a.contains("docs_edit_row") && (h = fe);
                            (a.contains("highlight") || a.contains("docs_item_thumb_img") || a.contains("docs_item_icon") || a.contains("docs_item_name")) && (h = z);
                            -1 !== s.indexOf("Docs.tagSearch") && (h = me);
                            if (h === Y)
                                return;
                            mt(e, d, p, h, n, t, u, _, r, i, et)
                        }(e, t, n, i, o, u);
                    case I:
                    case M:
                        return void function(e, t, n, r, i, o) {
                            var a = l(st(o, (e=>{
                                var t = e.getAttribute("id");
                                return [0, t = t ? t.replace("app", "") : 0]
                            }
                            ), "_apps_cat_row"), 3)
                              , s = a[0]
                              , c = a[1]
                              , _ = a[2];
                            if (!s)
                                return;
                            var u = z;
                            if (u === Y)
                                return;
                            mt(e, Pe, s, u, n, t, _, c, r, i, et)
                        }(e, t, n, i, o, u);
                    case $:
                        return void function(e, t, n, r, i, o) {
                            var a = o.classList
                              , s = l(st(o, (e=>[0, e.getAttribute("data-app-id") || 0]), "GameCatalogSearchCard"), 3)
                              , c = s[0]
                              , _ = s[1]
                              , u = s[2];
                            if (!c)
                                return;
                            var d = Y;
                            (a.contains("GameCatalogSearchCard__screenshotImg") || a.contains("GameCatalogSearchCard__run") || a.contains("GameCatalogSearchCard__avatar") || a.contains("GameCatalogSearchCard__name")) && (d = se);
                            if (d === Y)
                                return;
                            mt(e, Pe, c, d, n, t, u, _, r, i, et)
                        }(e, t, n, i, o, u);
                    case x:
                        return void function(e, t, n, r, i, o) {
                            var a = l(st(o, (()=>{
                                var e = o.getAttribute("href") || ""
                                  , t = (e = e.replace("/photo", "")).split("_");
                                return 2 !== t.length ? [0, 0] : [t[0], t[1]]
                            }
                            ), "page_post_thumb_wrap", "._feed_rows .page_post_thumb_wrap"), 3)
                              , s = a[0]
                              , c = a[1]
                              , _ = a[2];
                            if (!s)
                                return;
                            mt(e, Pe, s, z, n, t, _, c, r, i, et)
                        }(e, t, n, i, o, u);
                    case b:
                    case C:
                    case T:
                    case D:
                    case A:
                        return void function(e, t, n, r, i, o) {
                            var s = o.classList
                              , c = o.outerHTML;
                            if ((0,
                            a.gpeByClass)("replies", o, ".post"))
                                return;
                            var _ = "feed_row"
                              , u = "";
                            e !== D && e !== b && e !== C || (_ = "post");
                            e !== b && e !== C || (u = "#page_search_posts .post");
                            var d = l(st(o, (e=>{
                                var t;
                                if (e.classList.contains("post"))
                                    t = e;
                                else {
                                    var n = e.getElementsByClassName("post");
                                    if (0 === n.length)
                                        return [0, 0];
                                    t = n[0]
                                }
                                if (!t)
                                    return [0, 0];
                                var r = (t.getAttribute("data-post-id") || "").split("_");
                                return 2 === r.length ? r : [0, 0]
                            }
                            ), _, u), 3)
                              , p = d[0]
                              , h = d[1]
                              , m = d[2];
                            if (!p)
                                return;
                            var f = Y;
                            ((0,
                            a.gpeByClass)("wall_text", o, ".post") || s.contains("wall_text")) && (f = z);
                            (s.contains("author") || s.contains("post_img") || s.contains("copy_author") || s.contains("copy_post_img")) && (f = de);
                            (s.contains("rel_date") || s.contains("published_by_date")) && (f = z);
                            ((0,
                            a.gpeByClass)("like", o, ".post") || s.contains("like")) && (f = ge);
                            ((0,
                            a.gpeByClass)("comment", o, ".post") || s.contains("comment")) && (f = ve);
                            ((0,
                            a.gpeByClass)("share", o, ".post") || s.contains("share")) && (f = Ee);
                            s.contains("ui_actions_menu_item") && -1 !== c.indexOf("bookmarkPost") && (f = J);
                            s.contains("ui_actions_menu_item") && -1 !== c.indexOf("wall.markAsSpam") && (f = ye);
                            if (f === Y)
                                return;
                            mt(e, Pe, p, f, n, t, m, h, r, i, et)
                        }(e, t, n, i, o, u);
                    case K:
                    case R:
                        return void function(e, t, n, r, i, o) {
                            var a = o.classList
                              , s = o.tagName
                              , c = l(st(o, (e=>{
                                var t = e.getAttribute("id");
                                return [0, t = t ? t.replace("app", "") : 0]
                            }
                            ), "_apps_settings_row"), 3)
                              , _ = c[0]
                              , u = c[1]
                              , d = c[2];
                            if (!_)
                                return;
                            var p = Y;
                            a.contains("apps_settings_stats") && (p = we);
                            "A" !== s && "img" !== s || (p = z);
                            if (p === Y)
                                return;
                            mt(e, Pe, _, p, n, t, d, u, r, i, et)
                        }(e, t, n, i, o, u)
                    }
            }
        }
        function _t() {
            var e = {}
              , t = c.vkLocalStorage.getItem(Je);
            if (!t)
                return e;
            try {
                e = JSON.parse(t)
            } catch (t) {
                e = {}
            }
            return e
        }
        function lt(e) {
            if ("locked" === c.vkLocalStorage.getItem(Ze))
                setTimeout((()=>lt(e)), 100);
            else {
                c.vkLocalStorage.setItem(Ze, "locked");
                try {
                    e()
                } catch (e) {}
                c.vkLocalStorage.setItem(Ze, "free")
            }
        }
        function ut(e, t, n, r, i, o, a, s, _, l) {
            var u = arguments.length > 10 && void 0 !== arguments[10] && arguments[10]
              , d = arguments.length > 11 && void 0 !== arguments[11] ? arguments[11] : 0;
            lt((()=>{
                var p = Math.round(+new Date / 1e3)
                  , h = _t();
                h[e] = h[e] || {};
                var m = Object.keys(h[e]);
                if (m.length >= 100) {
                    var f = m[0]
                      , g = h[e][f][0];
                    m.forEach((t=>{
                        var n = h[e][t][0];
                        n < g && (g = n,
                        f = t)
                    }
                    )),
                    delete h[e][f]
                }
                h[e][a] = [p, t, n, r, i, o, s, _, l, u, d],
                c.vkLocalStorage.setItem(Je, JSON.stringify(h))
            }
            ))
        }
        function dt() {
            lt((()=>{
                var e = _t();
                if (e) {
                    var t = Math.round(+new Date / 1e3);
                    Object.keys(e).forEach((n=>{
                        var r = e[n];
                        Object.keys(r).forEach((e=>{
                            var n = r[e][0];
                            t - n > 180 && delete r[e]
                        }
                        )),
                        e[n] = r,
                        0 === Object.keys(r).length && delete e[n]
                    }
                    )),
                    c.vkLocalStorage.setItem(Je, JSON.stringify(e))
                }
            }
            ))
        }
        function pt(e, t, n) {
            var r = _t();
            r[e] = r[e] || {};
            var i = r[e][t];
            i && (Math.round(+new Date / 1e3) - i[0] > 180 ? ht(!0, e, t) : mt(i[1], i[2], i[3], n, i[4], i[5], t, i[6], i[7], i[8], et, "", i[9], i[10]))
        }
        function ht(e, t, n) {
            e && lt((()=>{
                var e = _t();
                e[t] = e[t] || {},
                e[t][n] && (delete e[t][n],
                c.vkLocalStorage.setItem(Je, JSON.stringify(e)))
            }
            ))
        }
        function mt(e, t, n, r, i, o, a, c, _, l, u) {
            var d = arguments.length > 11 && void 0 !== arguments[11] ? arguments[11] : ""
              , p = arguments.length > 12 && void 0 !== arguments[12] && arguments[12]
              , h = arguments.length > 13 && void 0 !== arguments[13] ? arguments[13] : 0;
            if (n) {
                var m = -(new Date).getTimezoneOffset();
                (0,
                s.statlogsValueEvent)("search_position", e, u, r, t, n, p, c, a, o, m, i, _, l, d, h)
            }
        }
        function ft(e, t, n, r, i, o, a, c) {
            var _ = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : ""
              , l = arguments.length > 9 && void 0 !== arguments[9] && arguments[9]
              , u = arguments.length > 10 && void 0 !== arguments[10] ? arguments[10] : 0
              , d = -(new Date).getTimezoneOffset();
            (0,
            s.statlogsValueEvent)("search_attempts", e, l, o, r, d, n, a, i, c, t, _, u)
        }
        function gt() {
            for (var e in h)
                h.hasOwnProperty(e) && vt(e)
        }
        function vt(e) {
            if (h[e]) {
                var t = h[e];
                (0,
                o.removeEvent)(window, "click", t),
                delete h[e]
            }
        }
        function Et(e, t) {
            var n = t || e.target.getAttribute("data-stats-key");
            n && n.length > 0 && (0,
            s.statlogsValueEvent)("submenu_clicks", 0, n)
        }
        function yt(e, t, n, r) {
            var i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : "0"
              , a = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0
              , s = arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : "0"
              , c = arguments.length > 7 && void 0 !== arguments[7] ? arguments[7] : ""
              , _ = arguments.length > 8 && void 0 !== arguments[8] ? arguments[8] : Pe
              , l = arguments.length > 9 && void 0 !== arguments[9] ? arguments[9] : ""
              , u = arguments.length > 10 && void 0 !== arguments[10] && arguments[10]
              , d = arguments.length > 11 && void 0 !== arguments[11] ? arguments[11] : 0;
            n = n ? 1 : 0,
            ft(e, _, i = i && "0" !== i ? i : wt(), r, s, n, a, c, l, u, d),
            h[e] && vt(e);
            var p = ct.pbind(e, r, i, a, c, u);
            h[e] = p,
            (0,
            o.addEvent)(window, "click", p, !1, !1, !0),
            cur.destroy || (cur.destroy = []),
            cur.destroy.some((e=>e === gt)) || cur.destroy.push(gt)
        }
        function wt() {
            return (0,
            r.rand)(-9223372035, 9223372035).toFixed(0).concat((0,
            r.rand)(0, 999999999).toFixed(0))
        }
    }
    ,
    363604: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initStl: ()=>p,
            updateSTL: ()=>g
        });
        var r = n(386409)
          , i = n(635429)
          , o = n(447215)
          , a = n(49535)
          , s = n(803834)
          , c = n(315544)
          , _ = n(695724)
          , l = n(786067)
          , u = !1
          , d = !0;
        function p() {
            var e = {
                onclick: h,
                onmousedown: m,
                onmouseover: f,
                onmouseout: f
            };
            (0,
            c.val)(_stlLeft, '<div id="stl_bg"><nobr id="stl_text">' + (0,
            l.getLang)("global_to_top") + "</nobr></div>"),
            (0,
            _.extend)(_stlLeft, e),
            (0,
            _.extend)(_stlSide, e),
            window._stlBg = _stlLeft.firstChild,
            window._stlText = window._stlBg.firstChild,
            (0,
            a.addEvent)(window, "blur", (function() {
                window._wf = -1,
                u = !1
            }
            )),
            (0,
            a.addEvent)(window, "focus", (function() {
                window._wf = 1,
                u || (window.__afterFocus = !0,
                u = !0,
                setTimeout((function() {
                    window.__afterFocus = !1
                }
                ), 10),
                d && ((0,
                r.sbWidth)(!0),
                (0,
                i.onBodyResize)(!0),
                d = !1))
            }
            ))
        }
        function h(e) {
            return (0,
            a.checkEvent)(e) || (0,
            a.cancelEvent)(e)
        }
        function m(e) {
            if (e = e || window.event,
            !(0,
            a.checkEvent)(e) && !__afterFocus)
                if (_stlWasSet && _stlWas) {
                    var t = _stlWas;
                    window._stlWas = 0,
                    (0,
                    s.scrollToY)(t, 0, !0, !0),
                    (0,
                    o.updateLeftMenu)(!0)
                } else
                    1 === _stlBack ? _tbLink.onclick() : (window._stlWas = (0,
                    s.scrollGetY)(),
                    (0,
                    s.scrollToY)(0, 0, !0, !0),
                    (0,
                    o.updateLeftMenu)())
        }
        function f(e) {
            var t = e ? e.originalEvent || e : window.event || {}
              , n = "mouseover" === t.type && (t.pageX > 0 || t.clientX > 0);
            (0,
            c.toggleClass)(_stlLeft, "over", n),
            (0,
            c.toggleClass)(_stlLeft, "over_fast", n && (0 === _stlBack || _tbLink.fast) && 0 === _stlWasSet),
            (0,
            c.toggleClass)(_stlSide, "over", n)
        }
        function g() {
            var e = window.innerWidth
              , t = document.documentElement.clientWidth
              , n = Math.max((0,
            _.intval)(e), (0,
            _.intval)(t));
            (0,
            c.toggleClass)(bodyNode, "no_stl", n < vk.width + 280),
            (0,
            c.toggleClass)(bodyNode, "no_sett", n < vk.width + 62)
        }
    }
    ,
    113165: (e,t,n)=>{
        "use strict";
        n.d(t, {
            showStory: ()=>_,
            showNarrative: ()=>l,
            storiesPreloadStatic: ()=>d,
            sendMask: ()=>h
        });
        var r = n(654612)
          , i = n(486125)
          , o = n(786067)
          , a = n(635429)
          , s = n(315544)
          , c = !1;
        function _(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0;
            if (cur.storiesNotSupported)
                return (0,
                r.showFastBox)((0,
                o.getLang)("global_error"), (0,
                o.getLang)("stories_bad_browser"));
            clearTimeout(c),
            c = setTimeout((function() {
                bodyNode.appendChild((0,
                s.ce)("div", {
                    id: "stories_loader",
                    innerHTML: (0,
                    a.getProgressHtml)("stories_loader_pr", "pr_baw pr_medium") + '<div class="back"></div>'
                }))
            }
            ), 1e3);
            var i = [window.jsc("web/stories.js"), "stories.css", window.jsc("web/emoji.js"), "videoview.js", "videoplayer.css"];
            window.stManager.add(i, (function() {
                clearTimeout(c),
                (0,
                s.re)("stories_loader"),
                window.Stories.show(e, t, n)
            }
            ))
        }
        function l(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0
              , r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : ""
              , i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {}
              , o = `narrative${t}`
              , a = `${e}${n = n ? `_${n}` : ""}&${o}/${r = r || `narrative${e}_${t}`}`;
            _(a, i)
        }
        var u = !1;
        function d() {
            u || cur.storiesNotSupported || (u = !0,
            window.stManager.add([window.jsc("web/stories.js"), "stories.css", window.jsc("web/story_publisher.js"), "photo_editor.css"]))
        }
        var p = !1;
        function h(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
            p || (p = !0,
            ajax.post("al_stories.php", {
                act: "send_mask",
                mask_id: e,
                hash: t,
                is_short_video: n
            }, {
                loader: !0,
                onDone: (e,t,n,a)=>{
                    "cant_send" === e ? (0,
                    r.showFastBox)({
                        title: t,
                        width: 460
                    }, n, a) : (0,
                    i.showDoneBox)((0,
                    o.getLang)("stories_mask_sent")),
                    p = !1
                }
                ,
                onFail: ()=>(p = !1,
                (0,
                r.showFastBox)({
                    title: (0,
                    o.getLang)("global_box_error_title")
                }, (0,
                o.getLang)("global_unknown_error")),
                !0)
            }))
        }
    }
    ,
    376852: (e,t,n)=>{
        "use strict";
        n.d(t, {
            showTooltip: ()=>a,
            showTitle: ()=>s,
            showHint: ()=>c,
            hideAllTooltips: ()=>_,
            destroyAllTooltips: ()=>l
        });
        var r = n(315544)
          , i = n(49535)
          , o = n(695724);
        function a(e, t) {
            (vk.loaded || t.noload) && e && (e.temphide || (e.temphide = function() {
                e.showing = !1
            }
            ,
            (0,
            i.addEvent)(e, "mouseout", e.temphide)),
            e.showing = !0,
            "loadingstat" !== e.tt && (e.tt || (e.tt = "loadingstat"),
            cur.cancelTooltip = !1,
            t.stat && window.stManager.add(t.stat),
            window.stManager.add([window.jsc("web/tooltips.js"), "tooltips.css"], (function() {
                "loadingstat" === e.tt && (e.tt = !1),
                e.showing && !cur.cancelTooltip && (!function(e) {
                    e.temphide && ((0,
                    i.removeEvent)(e, "mouseout", e.temphide),
                    (0,
                    r.removeAttr)(e, "temphide"),
                    (0,
                    r.removeAttr)(e, "showing"))
                }(e),
                e.tt && e.tt.el && !t.force || (tooltips.create(e, t),
                t.onCreate && t.onCreate()),
                tooltips.show(e, t))
            }
            ))))
        }
        function s(e, t, n, i) {
            e = (0,
            r.ge)(e);
            n || (n = [Math.round(20 - (0,
            r.getSize)(e)[0] / 2), 8]);
            a(e, (0,
            o.extend)({
                text: function() {
                    return t || e.getAttribute("data-title")
                },
                shift: n,
                black: 1
            }, i || {}))
        }
        function c(e, t) {
            t = t || {};
            a(e = (0,
            r.ge)(e), (0,
            o.extend)({
                text: function() {
                    return e.getAttribute("data-title")
                },
                dir: "auto",
                width: 300,
                shift: [22, 8]
            }, t))
        }
        function _(e) {
            tooltips.hideAll(e)
        }
        function l(e) {
            tooltips.destroyAll(e)
        }
    }
    ,
    689433: (e,t,n)=>{
        "use strict";
        n.d(t, {
            topHeaderClose: ()=>f,
            topHeaderClearClose: ()=>g,
            default: ()=>E
        });
        n(530522),
        n(66108),
        n(296253),
        n(991181),
        n(579665),
        n(95767),
        n(59357),
        n(751876),
        n(21466),
        n(283946);
        var r = n(315544)
          , i = n(40906)
          , o = n(635093)
          , a = n(49535)
          , s = n(695724)
          , c = n(475632)
          , _ = n(786067)
          , l = n(982452)
          , u = n(460615)
          , d = n(185563)
          , p = n(169828);
        function h(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return m(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === n && e.constructor && (n = e.constructor.name);
                if ("Map" === n || "Set" === n)
                    return Array.from(n);
                if ("Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))
                    return m(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function m(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function f(e) {
            window.headerDestroy && window.headerDestroy(),
            window.headerDestroy = e
        }
        function g() {
            delete window.headerDestroy
        }
        var v = {
            searchLinkId: "ts_search_link",
            cache: {},
            lists: {},
            maxItems: 8,
            init: function() {
                if (this.inited)
                    return !1;
                var e = (0,
                r.ge)("ts_input")
                  , t = (0,
                r.ge)("ts_cont_wrap");
                if (vk.id && Chat.init(),
                !e)
                    return !1;
                (0,
                a.addEvent)(e, "focus", (function() {
                    v.deselect(),
                    (0,
                    s.trim)((0,
                    r.val)(this)) && (0,
                    r.addClass)(t.firstChild, "active"),
                    v.toggleInput(!0)
                }
                )),
                (0,
                a.addEvent)(e, "keydown", (function(n) {
                    switch (n.keyCode) {
                    case a.KEY.DOWN:
                    case a.KEY.UP:
                        v.moveSelection(n.keyCode),
                        (0,
                        a.cancelEvent)(n);
                        break;
                    case a.KEY.ENTER:
                        var i = (0,
                        r.geByClass1)("active", t);
                        if (i)
                            v.select(i, n);
                        else {
                            var o = (0,
                            s.trim)((0,
                            r.val)(this));
                            o && (e.blur(),
                            v.clear(),
                            v.toggleInput(!1),
                            nav.go("/search?c[section]=auto&c[q]=" + encodeURIComponent(o)))
                        }
                        (0,
                        a.cancelEvent)(n);
                        break;
                    case a.KEY.TAB:
                        v.clear(),
                        v.toggleInput(!1),
                        (0,
                        c.cancelStackFilter)("top_search", !0)
                    }
                }
                )),
                vk.id && ((0,
                a.addEvent)(e, "keyup", (function(e) {
                    switch (e.keyCode) {
                    case a.KEY.DOWN:
                    case a.KEY.UP:
                    case a.KEY.ENTER:
                    case a.KEY.ESC:
                        (0,
                        a.cancelEvent)(e);
                        break;
                    default:
                        v.prepareRows((0,
                        s.trim)((0,
                        r.val)(this)))
                    }
                }
                )),
                (0,
                a.addEvent)(e, "paste", (function() {
                    setTimeout((function() {
                        v.prepareRows((0,
                        s.trim)((0,
                        r.val)(e)))
                    }
                    ), 10)
                }
                )),
                (0,
                a.addEvent)(document, "mousedown", (function(e) {
                    (0,
                    a.checkKeyboardEvent)(e) || (0,
                    r.domClosest)("top_audio_layer_place", e.target) || (0,
                    r.domClosest)("_ap_layer__close", e.target) || (0,
                    r.domClosest)("layer_wrap", e.target) || (0,
                    r.domClosest)("PortalNavigation", e.target) || (0,
                    r.domClosest)("PortalNavigationDropdown", e.target) || f()
                }
                )),
                this.inited = !0)
            },
            clear: function() {
                window.tooltips && tooltips.destroyAll((0,
                r.ge)("ts_cont_wrap"));
                var e = (0,
                r.ge)("ts_input");
                e && ((0,
                r.val)(e, ""),
                e.blur(),
                this.prepareRows())
            },
            select: function(e, t, n) {
                if ((0,
                a.checkEvent)(t))
                    return !0;
                var i, o, c = (0,
                r.ge)("ts_input"), _ = (0,
                s.trim)((0,
                r.val)(c)).length, l = e.getAttribute("hinttype");
                if (this.clear(),
                f(),
                _ || c.blur(),
                n && (0,
                r.hasClass)(t.target, "ts_contact_status"))
                    return ajax.post("al_search.php", {
                        act: "save_metrics",
                        ql: _,
                        mk: "chat_box"
                    }),
                    (null === (i = window) || void 0 === i || null === (o = i.reforgedME) || void 0 === o ? void 0 : o.selectPeer) ? window.reforgedME.selectPeer(n, "global_search") : this.writeBox(n),
                    !1;
                var u = nav.go(e, t, {
                    params: {
                        search_string: cur.tsStr || ""
                    }
                });
                return ajax.post("al_search.php", {
                    act: "save_metrics",
                    ql: _,
                    mk: l
                }),
                u
            },
            deselect: function() {
                var e = (0,
                r.ge)("ts_cont_wrap");
                (0,
                s.each)((0,
                r.geByClass)("active", e), ((e,t)=>(0,
                r.removeClass)(t, "active")))
            },
            itemOver: function(e, t, n) {
                1 === t && v.deselect();
                var i = (0,
                s.inArray)(e.getAttribute("hintType"), ["h_friends", "h_correspondents", "h_chats"]);
                (0,
                r.toggleClass)(e, "write", i),
                (0,
                r.toggleClass)(e, "active", t)
            },
            moveSelection: function(e) {
                var t, n = (0,
                r.ge)("ts_cont_wrap"), i = (0,
                r.geByClass1)("active", n);
                switch (e) {
                case a.KEY.UP:
                    t = !!i && (this.getNextNode(i, -1, "a") || i);
                    break;
                case a.KEY.DOWN:
                    t = i ? this.getNextNode(i, 1, "a") || i : n.firstChild
                }
                return this.deselect(),
                t && (0,
                r.addClass)(t, "active"),
                !1
            },
            getNextNode: function(e, t, n) {
                for (var i = e, o = (0,
                r.domPN)(e); ; ) {
                    if ((i = t > 0 ? (0,
                    r.domNS)(i) : (0,
                    r.domPS)(i)) || (i = t > 0 ? (0,
                    r.domFC)(o) : (0,
                    r.domLC)(o)),
                    n && i.tagName && i.tagName.toLowerCase() === n || !n && i)
                        return i;
                    if (i === e)
                        return !1
                }
            },
            toggleInput: function(e) {
                e = !!e;
                var t = (0,
                r.ge)("ts_cont_wrap");
                (0,
                r.isVisible)(t) !== e && ((0,
                r.toggle)("ts_cont_wrap", e),
                e && (0,
                c.cancelStackPush)("top_search", (function() {
                    var e = (0,
                    r.ge)("ts_input");
                    v.toggleInput(!1),
                    e.blur()
                }
                ), !0))
            },
            getList: function(e) {
                switch (e) {
                case "friends":
                    return ((0,
                    i.isObject)(this.lists.friends) && !(0,
                    s.isEmpty)(this.lists.friends) ? this.lists.friends : this.topFriends) || {};
                case "publics":
                case "events":
                case "groups":
                case "apps":
                case "chats":
                case "search":
                    return this.lists[e] || {}
                }
                return {}
            },
            onlines: function() {
                return window.curFastChat && curFastChat.onlines || this.lists.onlines || {}
            },
            initFriendsList: function() {
                if (v.friendsLoaded)
                    return !1;
                if (cur.initingFL || vk.isBanned || !vk.id)
                    return !1;
                var e = function() {
                    if (v.friendsLoaded)
                        return !1;
                    cur.initingFL = !0,
                    ajax.post("al_search.php", {
                        act: "get_pages"
                    }, {
                        cache: 1,
                        onDone: function(e) {
                            delete cur.initingFL,
                            v.friendsLoaded || ((0,
                            s.each)(e, (function(e, t) {
                                v.lists[e] = t,
                                "onlines" !== e && v.updateCache(e)
                            }
                            )),
                            v.friendsLoaded = !0,
                            (0,
                            r.val)("ts_input") || v.prepareRows(""))
                        },
                        onFail: function() {
                            delete cur.initingFL
                        }
                    })
                }
                  , t = v.getList("friends");
                (0,
                s.isEmpty)(t) ? (cur.initingFL = !0,
                ajax.post("al_search.php", {
                    act: "get_top_friends"
                }, {
                    cache: 1,
                    onDone: function(t) {
                        delete cur.initingFL,
                        v.topFriends = t,
                        v.updateCache("friends"),
                        v.forceUpdate = !0,
                        v.prepareRows(cur.tsStr || ""),
                        e()
                    },
                    onFail: function() {
                        delete cur.initingFL
                    }
                })) : (v.updateCache("friends"),
                v.forceUpdate = !0,
                v.prepareRows(cur.tsStr || ""),
                e())
            },
            getSimilarQueries: function(e) {
                var t, n = [e = e.toLowerCase()];
                return (t = (0,
                _.parseLatin)(e)) && n.push(t),
                (t = (0,
                _.parseLatKeys)(e)) && n.push(t),
                (t = (0,
                _.parseCyr)(e)) && n.push(t),
                n
            },
            searchCache: function(e, t) {
                var n = v.getList(e);
                if (!t)
                    return !1;
                var r = this.getSimilarQueries(t);
                if (void 0 !== this.cache[e][t])
                    return r;
                var o = this.cache[e][t] = {};
                (0,
                s.each)(r, ((t,r)=>{
                    var a = this.cache[e][" " + r.charAt(0).toLowerCase()];
                    if (a) {
                        var c = new RegExp("(^|[\\s\\-\\(\\)\\.,;|:]+)" + (0,
                        s.escapeRE)(r),"gi");
                        (0,
                        s.each)(a, (e=>{
                            var t = n[e + "_"];
                            if (!(0,
                            i.isArray)(t))
                                return !0;
                            null !== t[0].match(c) && (o[e] = 1)
                        }
                        ))
                    }
                }
                ));
                var a = 0;
                return (0,
                s.each)(o, (()=>a++)),
                o._num = a,
                r
            },
            updateCache: function(e, t, n) {
                var r = t || this.getList(e);
                this.cache[e] = n && this.cache[e] || {},
                (0,
                s.each)(r, ((t,n)=>{
                    var r = n[0]
                      , i = (0,
                    s.intval)(t)
                      , o = r.split(/[\s\-\(\)\.,;|:]+/);
                    (0,
                    s.each)(o, ((t,n)=>{
                        var r = " " + n.charAt(0).toLowerCase();
                        this.cache[e][r] = this.cache[e][r] || {},
                        this.cache[e][r][i] = 1
                    }
                    ))
                }
                ))
            },
            listSearch: function(e, t, n, r) {
                var i = []
                  , o = {};
                return t ? (v.searchCache(e, t),
                o = v.cache[e] && v.cache[e][t] || {}) : (0,
                s.each)(v.getList(e), (function(e) {
                    var t = (0,
                    s.intval)(e);
                    o[t] = 1
                }
                )),
                (0,
                s.each)(v.getList(e), (function(e) {
                    var t = (0,
                    s.intval)(e)
                      , a = o[t];
                    if ((!r || !r[t]) && a)
                        return !!n-- && void i.push([t, this])
                }
                )),
                i
            },
            row: function(e, t, n, r, i, o, a, c, _) {
                var u = 0;
                if (o && (r = r.replace(o, '$1<em class="ts_clist_hl">$2</em>')),
                (0,
                s.inArray)(a, ["h_friends", "h_correspondents", "h_chats"]) && (u = e),
                c || (c = ""),
                _ = (0,
                s.intval)(_)) {
                    var p = "";
                    1 & _ && (p += "page_verified "),
                    2 & _ && (p += "page_top_author "),
                    _ = `<div class="${p}" onmouseover="pageVerifiedTip(this, {type: ${_}, oid: ${e}})"></div>`
                } else
                    _ = "";
                var h = "";
                return u && (h = (0,
                d.getIcon16MessageOutline)().icon),
                `\n<a href="${t}" class="ts_contact clear_fix" id="ts_contact${e}" onclick="return TopSearch.select(this, event, ${u});" onmousedown="event.cancelBubble = true;"\n      onmouseover="TopSearch.itemOver(this, 1, event);"  onmouseout="TopSearch.itemOver(this, 0, event);" hinttype="${a}">\n  <span class="ts_contact_photo ${(0,
                l.onlinePlatformClass)(i)}">\n    <img class="ts_contact_img" src="${n}" alt="" />\n  </span>\n  <span class="ts_contact_name fl_l">\n    <div class="ts_contact_title_wrap${_ ? " is_verified" : ""}">\n      <span class="ts_contact_title">${r}</span>\n    </div>${_}\n    <div class="ts_contact_info">${c}</div>\n  </span>\n  <div class="ts_contact_status">${h}</div>\n</a>`
            },
            searchLists: function(e) {
                return e ? {
                    friends: {
                        order: 0,
                        count: v.maxItems - 1,
                        label: (0,
                        _.getLang)("global_friends")
                    },
                    groups: {
                        order: 1,
                        count: 4,
                        label: (0,
                        _.getLang)("global_communities")
                    },
                    publics: {
                        count: 2,
                        parent: "groups"
                    },
                    events: {
                        count: 1,
                        parent: "groups"
                    },
                    apps: {
                        order: 2,
                        count: 1,
                        label: (0,
                        _.getLang)("global_apps")
                    },
                    vk_apps: {
                        order: 2,
                        count: 1,
                        label: (0,
                        _.getLang)("global_apps")
                    },
                    chats: {
                        order: 3,
                        count: v.maxItems - 1,
                        label: (0,
                        _.getLang)("global_chats")
                    },
                    search: {
                        order: 4,
                        count: v.maxItems - 1,
                        label: (0,
                        _.getLang)("head_search_results")
                    }
                } : {
                    friends: {
                        order: 0,
                        count: v.maxItems,
                        label: (0,
                        _.getLang)("global_friends")
                    }
                }
            },
            initListsHtml: function() {
                v.listsHtml = []
            },
            addToListsHtml: function(e, t, n) {
                var r = v.searchLists(n)
                  , i = r[(r[e] || {}).parent || e] || {}
                  , o = i.order || 0
                  , a = i.label || "";
                v.listsHtml[o] = v.listsHtml[o] || (n && a ? [`<div class="ts_search_sep">${a}</div>`] : []),
                v.listsHtml[o].push(t)
            },
            searchLinkHtml: function(e, t, n, r) {
                return `<a href="${(0,
                s.clean)(e)}" class="ts_search_link${r ? " ts_search_link_sep" : ""} clear_fix active" id="${(0,
                s.clean)(n)}" onclick="return TopSearch.select(this, event);" onmousedown="event.cancelBubble = true;" onmouseover="TopSearch.itemOver(this, 1, event);" onmouseout="TopSearch.itemOver(this, 0, event);" >\n        <span class="ts_search_link__label">${t}</span>\n        <span class="ts_search_link__icon">${(0,
                p.getIcon16Chevron)().icon}</span>\n      </a>`
            },
            htmlRows: function(e) {
                var t = ""
                  , n = v.listsHtml.map((e=>e.join(""))).join("");
                if (e) {
                    var r = "#" === e[0]
                      , i = `/search?c[section]=${r ? "statuses" : "auto"}&c[q]=${encodeURIComponent(e)}`
                      , o = r ? (0,
                    _.getLang)("global_news_search_results") : (0,
                    _.getLang)("global_show_all_results");
                    t = v.searchLinkHtml(i, o, v.searchLinkId)
                }
                return t + n
            },
            prepareRows: function(e) {
                var t = v.maxItems
                  , n = (0,
                r.ge)("ts_cont_wrap");
                if (!n || !vk.id)
                    return !1;
                if (cur.tsStr && cur.tsStr === e && !v.forceUpdate)
                    return !1;
                delete v.forceUpdate,
                v.initListsHtml();
                var i = {};
                if (e) {
                    var o = [];
                    (0,
                    s.each)(this.getSimilarQueries(e), (function() {
                        o.push((0,
                        s.escapeRE)(this))
                    }
                    )),
                    cur.lastRe = new RegExp("([ -]|^|s|&nbsp;|\b)(" + o.join("|") + ")","gi"),
                    t--
                }
                (0,
                s.each)(v.searchLists(e), (function(n, o) {
                    if (v.cache[n]) {
                        var a = o.count
                          , c = v.listSearch(n, e, a, i)
                          , _ = []
                          , l = 0;
                        (0,
                        s.isEmpty)(c) || ((0,
                        s.each)(c, ((e,n)=>{
                            if (!t || l >= a)
                                return !1;
                            _.push(n),
                            t--,
                            l++
                        }
                        )),
                        _.length && (0,
                        s.each)(_, ((t,o)=>{
                            var a = o[1]
                              , c = (0,
                            s.intval)(o[0])
                              , _ = c > 0 && v.onlines()[c]
                              , l = h(a, 6)
                              , u = l[0]
                              , d = l[1]
                              , p = l[2]
                              , m = l[3]
                              , f = l[4]
                              , g = l[5]
                              , E = "search" === n ? m : "h_" + n
                              , y = v.row(c, p, d, u, _, r.re, E, f, g);
                            v.addToListsHtml(n, y, e),
                            i[c] = 1
                        }
                        )))
                    }
                }
                )),
                n.innerHTML = v.htmlRows(e),
                e || (0,
                u.removeSearchPositionTracker)(u.serviceTopSearch),
                !t && e && "#" !== e[0] && (0,
                u.saveSearchAttemptStats)(u.serviceTopSearch, 0, !0, e),
                t && e && "#" !== e[0] && this.hintsSearch(e, cur.lastRe || !1),
                e && (cur.tsStr = e)
            },
            hintsSearch: function(e, t) {
                var n, i = (0,
                r.ge)("ts_input"), o = (0,
                r.ge)("ts_cont_wrap"), a = +new Date;
                ajax.post("al_search.php", {
                    act: "get_pages_hints",
                    q: e
                }, {
                    cache: 1,
                    onDone: function(c, _) {
                        if ((0,
                        s.trim)((0,
                        r.val)(i)) !== e)
                            return !1;
                        if (!c)
                            return !1;
                        var l = v.maxItems - (0,
                        r.geByClass)("ts_contact", o).length - 1
                          , d = l
                          , p = {};
                        (0,
                        s.each)(c, (function(i, o) {
                            var a = (0,
                            s.intval)(i)
                              , c = h(o, 6)
                              , _ = c[0]
                              , u = c[1]
                              , d = c[2]
                              , m = c[3]
                              , f = c[4]
                              , g = c[5]
                              , E = v.searchLists(e)
                              , y = m.replace("h_", "")
                              , w = (E[y] || {}).parent || y;
                            if (void 0 === E[w] && (w = "search"),
                            p[w] = p[w] || {},
                            p[w][i] = o,
                            v.lists[w] = v.lists[w] || {},
                            v.lists[w][i] = o,
                            (0,
                            r.ge)("ts_contact" + a))
                                return !0;
                            if (!l--)
                                return !1;
                            var b = v.row(a, d, u, _, !1, t, m, f, g);
                            return v.addToListsHtml(w, b, e),
                            n = !0,
                            !0
                        }
                        ));
                        var m = +new Date - a;
                        if ((0,
                        u.saveSearchAttemptStats)(u.serviceTopSearch, 0, d !== l, e, 0, _, m),
                        (0,
                        s.each)(p, ((e,t)=>v.updateCache(e, t, !0))),
                        n) {
                            var f = (0,
                            r.geByClass1)("active", o)
                              , g = f ? f.id : "";
                            o.innerHTML = v.htmlRows(e),
                            g && (0,
                            r.ge)(g) && (0,
                            r.addClass)((0,
                            r.ge)(g), "active")
                        }
                    }
                })
            },
            writeBox: function(e) {
                window.curFastChat && curFastChat.inited && window.FastChat ? FastChat.selectPeer(e, !1, {
                    entrypoint: "fastchat_global_search"
                }) : e > 0 && e < 2e9 ? (0,
                o.showWriteMessageBox)(!1, e) : nav.go("/im?sel=" + e)
            }
        };
        const E = v
    }
    ,
    386409: (e,t,n)=>{
        "use strict";
        n.d(t, {
            notaBene: ()=>u,
            updSideTopLink: ()=>d,
            createButton: ()=>p,
            actionsMenuItemLocked: ()=>h,
            lockActionsMenuItem: ()=>m,
            unlockActionsMenuItem: ()=>f,
            linkLocked: ()=>g,
            lockLink: ()=>v,
            unlockLink: ()=>E,
            lockButton: ()=>y,
            unlockButton: ()=>w,
            buttonLocked: ()=>b,
            isButtonLocked: ()=>C,
            disableButton: ()=>T,
            sbWidth: ()=>D,
            isChecked: ()=>A,
            checkbox: ()=>S,
            disable: ()=>P,
            radioval: ()=>O,
            radiobtn: ()=>I,
            showProgress: ()=>M,
            hideProgress: ()=>R,
            disableEl: ()=>L,
            enableEl: ()=>k,
            initUiHelpers: ()=>B
        });
        var r = n(315544)
          , i = n(49535)
          , o = n(695724)
          , a = n(803834)
          , s = n(635676)
          , c = n(726271)
          , _ = n(786067)
          , l = n(124041);
        function u(e, t, n) {
            if (e = (0,
            r.ge)(e)) {
                if (e.classList.contains("selector_container"))
                    return e.classList.add("selector_container--error"),
                    void setTimeout((()=>{
                        e.classList.remove("selector_container--error")
                    }
                    ), 700);
                n || (0,
                r.elfocus)(e),
                void 0 === (0,
                r.data)(e, "backstyle") && (0,
                r.data)(e, "backstyle", e.style.backgroundColor || "");
                var i = (0,
                r.data)(e, "back") || (0,
                r.data)(e, "back", (0,
                r.getStyle)(e, "backgroundColor"))
                  , o = {
                    notice: "var(--field_error_background)",
                    warning: "var(--field_error_background)"
                };
                (0,
                r.setStyle)(e, "backgroundColor", o[t] || t || o.warning),
                setTimeout((()=>(0,
                s.animate)(e, {
                    backgroundColor: i
                }, 300, (function() {
                    e.style.backgroundColor = (0,
                    r.data)(e, "backstyle")
                }
                ))), 400)
            }
        }
        function d(e) {
            if (window.scrollNode && !c.browser.mobile && window._tbLink) {
                var t = (0,
                r.ge)("page_body");
                if (t) {
                    var n = (0,
                    r.getXY)(t)
                      , i = (0,
                    a.scrollGetY)()
                      , o = bodyNode.scrollLeft
                      , l = (0,
                    r.ge)("side_bar")
                      , u = (0,
                    r.isVisible)(l);
                    if (window._stlSideTop = Math.max((u ? (0,
                    r.getSize)(l)[1] : 0) - i - (c.browser.mozilla ? (0,
                    r.getXY)(pageNode)[1] : 0), n[1]),
                    e || o != __scrLeft) {
                        var d = (0,
                        r.ge)("page_layout")
                          , p = vk.rtl ? d.offsetLeft + d.offsetWidth : 0
                          , h = vk.rtl ? (window.lastWindowWidth || 0) - p : d.offsetLeft;
                        (0,
                        r.setStyle)(_stlLeft, {
                            width: Math.max(h - 1, 0)
                        });
                        var m = vk.rtl ? n[0] + t.offsetWidth + 5 : h
                          , f = vk.rtl ? p - m : n[0] - 5 - m;
                        (0,
                        r.setStyle)(_stlSide, {
                            left: m - o,
                            width: Math.max(f, 0)
                        }),
                        __scrLeft = o
                    }
                    (0,
                    r.setStyle)(_stlSide, {
                        top: _stlSideTop,
                        height: Math.max((window.lastWindowHeight || 0) - _stlSideTop, 0)
                    }),
                    __adsUpdate();
                    var g = 200
                      , v = _tbLink.loc || _stlWas || i > g
                      , E = i > 250 && cur._regBar
                      , y = 0
                      , w = !1;
                    if (v) {
                        1 !== _stlShown && ((0,
                        r.show)(_stlLeft, _stlSide),
                        (0,
                        r.addClass)(_stlLeft, "stl_active"),
                        (0,
                        r.addClass)(_stlSide, "stl_active"),
                        _stlShown = 1),
                        _tbLink.loc && cur._noUpLink && (i = 0),
                        _stlWas && i > 500 && (_stlWas = 0),
                        i > g ? (y = (i - g) / g,
                        (_stlWasSet || _stlBack) && (_stlWasSet = _stlBack = 0,
                        w = 1,
                        (0,
                        r.val)(_stlText, (0,
                        _.getLang)("global_to_top")),
                        (0,
                        r.removeClass)(_stlText, "down"),
                        (0,
                        r.removeClass)(_stlText, "back"))) : (y = (g - i) / g,
                        _stlWas ? _stlWasSet || (_stlWasSet = 1,
                        w = 0,
                        (0,
                        r.val)(_stlText, ""),
                        (0,
                        r.addClass)(_stlText, "down"),
                        _stlBack && (_stlBack = 0,
                        (0,
                        r.removeClass)(_stlText, "back"))) : _tbLink.loc && (_stlBack || (_stlBack = 1,
                        w = _tbLink.fast ? 1 : 0,
                        (0,
                        r.val)(_stlText, (0,
                        _.getLang)("global_back")),
                        (0,
                        r.addClass)(_stlText, "back"),
                        _stlWasSet && (_stlWasSet = 0,
                        (0,
                        r.removeClass)(_stlText, "down"))))),
                        !1 !== w && (0,
                        r.toggleClass)(_stlLeft, "over_fast", (0,
                        r.hasClass)(_stlLeft, "over") && w);
                        var b = {
                            opacity: Math.min(Math.max(y, 0), 1)
                        };
                        vk.staticheader && (b.top = -Math.min((0,
                        r.getSize)("page_header_cont")[1], i)),
                        (0,
                        r.setStyle)(_stlLeft, b)
                    } else
                        0 !== _stlShown && ((0,
                        r.hide)(_stlLeft, _stlSide),
                        _stlShown = 0);
                    vk.id || (!_regBar && E ? (_regBar = 1,
                    (0,
                    r.val)((0,
                    r.ge)("reg_bar_content"), cur._regBar),
                    (0,
                    s.animate)((0,
                    r.ge)("reg_bar"), {
                        top: 0,
                        transition: s.Fx.Transitions.sineInOut
                    }, 400),
                    (0,
                    s.animate)((0,
                    r.ge)("stl_bg"), {
                        paddingTop: 60,
                        transition: s.Fx.Transitions.sineInOut
                    }, 400)) : _regBar && !E && (_regBar = 0,
                    (0,
                    s.animate)((0,
                    r.ge)("reg_bar"), {
                        top: -56,
                        transition: s.Fx.Transitions.sineInOut
                    }, 400),
                    (0,
                    s.animate)((0,
                    r.ge)("stl_bg"), {
                        paddingTop: 13,
                        transition: s.Fx.Transitions.sineInOut
                    }, 400)))
                }
            }
        }
        function p(e, t) {
            if ((e = (0,
            r.ge)(e)) && !e.btnevents)
                if ((0,
                r.hasClass)(e, "flat_button"))
                    (0,
                    o.isFunction)(t) && (e.onclick = t.pbind(e));
                else {
                    var n = e.parentNode;
                    if ((0,
                    r.hasClass)(n, "button_blue") || (0,
                    r.hasClass)(n, "button_gray"))
                        (0,
                        o.isFunction)(t) && (e.onclick = t.pbind(e));
                    else {
                        var a = !1;
                        (0,
                        i.addEvent)(e, "click mousedown mouseover mouseout", (function(o) {
                            if (!(0,
                            r.hasClass)(n, "locked"))
                                switch (o.type) {
                                case "click":
                                    if (!a)
                                        return;
                                    return e.className = "button_hover",
                                    t(e),
                                    (0,
                                    i.cancelEvent)(o);
                                case "mousedown":
                                    e.className = "button_down";
                                    break;
                                case "mouseover":
                                    a = !0,
                                    e.className = "button_hover";
                                    break;
                                case "mouseout":
                                    e.className = "button",
                                    a = !1
                                }
                        }
                        )),
                        e.btnevents = !0
                    }
                }
        }
        function h(e) {
            var t = (0,
            r.ge)(e);
            if (t)
                return (0,
                r.hasClass)(t, "ui_actions_menu_item_lock")
        }
        function m(e) {
            if ((e = (0,
            r.ge)(e)) && !e.classList.contains("ui_actions_menu_item_lock")) {
                if (e.classList.contains("ui_actions_menu_item_with_icon"))
                    return e.classList.add("ui_actions_menu_item_lock"),
                    void M(e);
                if ((0,
                r.hasClass)(e, "ui_actions_menu_item")) {
                    (0,
                    r.data)(e, "inner", e.innerHTML),
                    (0,
                    r.addClass)(e, "ui_actions_menu_item_lock");
                    var t = (0,
                    r.ce)("div", {
                        className: "ui_actions_menu_item_lock_text"
                    });
                    (0,
                    r.val)(t, e.innerHTML),
                    e.appendChild(t),
                    M(e)
                }
            }
        }
        function f(e) {
            if ((e = (0,
            r.ge)(e)) && e.classList.contains("ui_actions_menu_item_lock"))
                return e.classList.contains("ui_actions_menu_item_with_icon") ? (e.classList.remove("ui_actions_menu_item_lock"),
                void R(e)) : void ((e = (0,
                r.ge)(e)) && (0,
                r.hasClass)(e, "ui_actions_menu_item") && (0,
                r.hasClass)(e, "ui_actions_menu_item_lock") && ((0,
                r.removeClass)(e, "ui_actions_menu_item_lock"),
                e.innerHTML = (0,
                r.data)(e, "inner")))
        }
        function g(e) {
            var t = (0,
            r.ge)(e);
            if (t)
                return (0,
                r.hasClass)(t, "link_lock")
        }
        function v(e, t) {
            var n = (0,
            r.ge)(e);
            n && "a" === n.tagName.toLowerCase() && !g(n) && ((0,
            r.addClass)(n, "link_lock"),
            t && (0,
            o.each)(t, ((e,t)=>(0,
            r.addClass)(n, t))))
        }
        function E(e, t) {
            var n = (0,
            r.ge)(e);
            n && g(n) && ((0,
            r.removeClass)(n, "link_lock"),
            t && (0,
            o.each)(t, ((e,t)=>(0,
            r.removeClass)(n, t))))
        }
        function y(e) {
            var t = (0,
            r.ge)(e);
            if (t) {
                if (l.FlatButton.isFlatButton(t))
                    return l.FlatButton.lock(t);
                if (("button" === t.tagName.toLowerCase() || (0,
                r.hasClass)(t, "flat_button") || (0,
                r.hasClass)(t, "wr_header")) && !C(t)) {
                    var n = (0,
                    r.getSize)(t);
                    (0,
                    r.addClass)(t, "flat_btn_lock"),
                    (0,
                    r.data)(t, "inner", t.innerHTML),
                    (0,
                    r.setStyle)(t, {
                        width: n[0],
                        height: n[1]
                    }),
                    t.innerHTML = "",
                    M(t, "btn_lock")
                }
            }
        }
        function w(e) {
            var t = (0,
            r.ge)(e);
            if (t)
                return l.FlatButton.isFlatButton(t) ? l.FlatButton.unlock(t) : void (C(t) && (R(t),
                t.innerHTML = (0,
                r.data)(t, "inner"),
                (0,
                r.removeClass)(t, "flat_btn_lock"),
                (0,
                r.setStyle)(t, {
                    width: null,
                    height: null
                })))
        }
        function b(e) {
            return C(e)
        }
        function C(e) {
            var t = (0,
            r.ge)(e);
            if (t)
                return l.FlatButton.isFlatButton(t) ? l.FlatButton.isLocked(t) : (0,
                r.hasClass)(t, "flat_btn_lock")
        }
        function T(e, t) {
            var n = (0,
            r.ge)(e);
            if (n && "button" === n.tagName.toLowerCase()) {
                if (l.FlatButton.isFlatButton(n))
                    return l.FlatButton.setDisabled(n, t);
                if (t) {
                    if (!(0,
                    r.isVisible)(n))
                        return;
                    n.parentNode.insertBefore((0,
                    r.ce)("button", {
                        innerHTML: n.innerHTML,
                        className: n.className + " button_disabled"
                    }), n),
                    (0,
                    r.hide)(n)
                } else {
                    var i = (0,
                    r.domPS)(n);
                    i && (0,
                    r.hasClass)(i, "button_disabled") && (0,
                    r.re)(i),
                    (0,
                    r.show)(n)
                }
            }
        }
        function D(e) {
            if (void 0 === window._sbWidth || e) {
                var t = (0,
                r.ce)("div", {
                    innerHTML: '<div style="height: 75px;">1<br>1</div>'
                }, {
                    overflowY: "scroll",
                    position: "absolute",
                    width: "50px",
                    height: "50px"
                });
                bodyNode.appendChild(t),
                window._sbWidth = Math.max(0, t.offsetWidth - t.firstChild.offsetWidth - 1),
                bodyNode.removeChild(t)
            }
            return window._sbWidth
        }
        function A(e) {
            return (e = (0,
            r.ge)(e)) && (0,
            r.hasClass)(e, "on") ? 1 : ""
        }
        function S(e, t) {
            var n = (0,
            r.ge)(e);
            if (n && !(0,
            r.hasClass)(n, "disabled"))
                return void 0 === t && (t = !A(n)),
                (0,
                r.toggleClass)(n, "on", t),
                n.setAttribute("aria-checked", t ? "true" : "false"),
                !1
        }
        function P(e, t) {
            return e = (0,
            r.ge)(e),
            void 0 === t && (t = !(0,
            r.hasClass)(e, "disabled")),
            (0,
            r.toggleClass)(e, "disabled", t),
            "INPUT" === e.tagName && (t ? e.setAttribute("readonly", "readonly") : e.removeAttribute("readonly")),
            !1
        }
        function O(e) {
            return !!radioBtns[e] && radioBtns[e].val
        }
        function I(e, t, n) {
            if (radioBtns[n] && !(0,
            r.hasClass)(e, "disabled"))
                return (0,
                o.each)(radioBtns[n].els, (function() {
                    this && (this == e ? ((0,
                    r.addClass)(this, "on"),
                    this.setAttribute("aria-checked", "true"),
                    this.setAttribute("tabindex", "0")) : ((0,
                    r.removeClass)(this, "on"),
                    this.setAttribute && (this.setAttribute("aria-checked", "false"),
                    this.setAttribute("tabindex", "-1"))))
                }
                )),
                radioBtns[n].val = t
        }
        function M(e, t, n, i) {
            var o;
            if (e = (0,
            r.ge)(e))
                return (0,
                r.hasClass)(e, "pr") ? o = e : (o = (0,
                r.se)((0,
                r.rs)(vk.pr_tpl, {
                    id: t || "",
                    cls: n || ""
                })),
                i ? (0,
                r.domInsertBefore)(o, e) : e.appendChild(o)),
                setTimeout((function() {
                    (0,
                    r.setStyle)(o, {
                        opacity: 1
                    })
                }
                )),
                o
        }
        function R(e) {
            e && ((0,
            r.hasClass)(e, "pr") ? (0,
            r.setStyle)(e, {
                opacity: 0
            }) : (0,
            r.re)((0,
            r.geByClass1)("pr", e)))
        }
        function L(e) {
            (0,
            r.setStyle)(e, "pointer-events", "none")
        }
        function k(e) {
            (0,
            r.setStyle)(e, "pointer-events", "")
        }
        function B() {
            window.__scrLeft = 0,
            window.radioBtns = {}
        }
    }
    ,
    159121: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            topMsg: ()=>topMsg,
            topError: ()=>topError,
            showMsg: ()=>showMsg,
            showGlobalPrg: ()=>showGlobalPrg
        });
        var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66108)
          , core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(296253)
          , core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59357)
          , _dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(315544)
          , _shared_user_user_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(19331)
          , _shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(66433)
          , _shared_lib_sentry_config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(209509)
          , _utils_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(695724);
        function topMsg(e, t, n) {
            if (n || (n = "var(--content_tint_background)"),
            e) {
                clearTimeout(window.topMsgTimer);
                var r = (0,
                _dom__WEBPACK_IMPORTED_MODULE_3__.ge)("system_msg");
                r.style.backgroundColor = n,
                r.innerHTML = e,
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_3__.show)(r),
                t && (window.topMsgTimer = setTimeout(topMsg.pbind(!1), 1e3 * t))
            } else
                (0,
                _dom__WEBPACK_IMPORTED_MODULE_3__.hide)("system_msg")
        }
        function topError(text, opts) {
            var prefix = "VK error: ";
            opts || (opts = {});
            var hasDummyStacktrace = !opts.stack;
            if (text.message) {
                var error = text;
                text = "<b>JavaScript error</b>" + ((0,
                _shared_user_user_env__WEBPACK_IMPORTED_MODULE_4__.partConfigEnabled)("extended_client_logging") ? ": " + error.message : ""),
                opts.stack = error.stack,
                error.stack && __debugMode && (text += "<br/>" + error.stack.replace(/\n/g, "<br/>"));
                try {
                    console.error(prefix, error.message),
                    console.log(error.stack)
                } catch (e) {}
            } else
                try {
                    console.error(prefix, text)
                } catch (e) {}
            if (!opts.stack) {
                hasDummyStacktrace = !0;
                try {
                    eval("0 = 1")
                } catch (e) {
                    opts.stack = e.stack
                }
            }
            if (-1 != opts.dt && topMsg(text, opts.dt, "#FFB4A3"),
            1 !== opts.type && !__dev && !(0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.ge)("debuglogwrap")) {
                delete opts.dt;
                var breadcrumb = {
                    message: text,
                    data: {
                        msg: opts.msg || text,
                        module: (window.cur || {}).module,
                        id: vk.id,
                        host: locHost,
                        lang: vk.lang,
                        loc: (window.nav || {}).strLoc,
                        realloc: location.toString()
                    }
                };
                (0,
                _shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_5__.logError)(opts, {
                    environment: _shared_lib_sentry_config__WEBPACK_IMPORTED_MODULE_6__.topErrorModuleName,
                    breadcrumb,
                    hasDummyStacktrace
                })
            }
        }
        function showMsg(e, t, n, r) {
            var i = "msg" + ("msg" !== n ? " " + n : "");
            r && (i += " msg_appear"),
            e = (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.ge)(e);
            var o = (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.geByClass1)(n, e)
              , a = o || (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.domFC)(e)
              , s = e.insertBefore((0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.ce)("div", {
                className: i,
                innerHTML: '<div class="msg_text">' + t + "</div>"
            }), a);
            o && (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.re)(o),
            setTimeout(_dom__WEBPACK_IMPORTED_MODULE_3__.removeClass.pbind(s, "msg_appear"), 0)
        }
        function showGlobalPrg(e, t) {
            var n = (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.getXY)(e)
              , r = (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.getSize)(e)
              , i = t || {}
              , o = i.w
              , a = void 0 === o ? 32 : o
              , s = i.h
              , c = void 0 === s ? 13 : s
              , _ = (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.ge)("global_prg");
            _.className = i.cls || "progress",
            (0,
            _dom__WEBPACK_IMPORTED_MODULE_3__.setStyle)(_, {
                left: n[0] + Math.floor((r[0] - a) / 2) + (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_7__.intval)(i.shift ? i.shift[0] : 0),
                top: n[1] + Math.floor((r[1] - c) / 2) + (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_7__.intval)(i.shift ? i.shift[1] : 0),
                width: a,
                height: c,
                display: "block",
                "z-index": i.zIndex ? i.zIndex : null
            }),
            i.hide && (e.style.visibility = "hidden")
        }
    }
    ,
    982452: (e,t,n)=>{
        "use strict";
        n.d(t, {
            unpackStore: ()=>h.unpackStore,
            parseJSON: ()=>m.parseJSON,
            throttleAccumulate: ()=>f,
            lplog: ()=>g,
            toArray: ()=>v,
            arrayUnique: ()=>E,
            throttle: ()=>y,
            shuffle: ()=>w,
            parallel: ()=>b,
            hashCode: ()=>C,
            checkTextLength: ()=>T,
            getSelectionText: ()=>D,
            goAway: ()=>A,
            isFullScreen: ()=>S,
            updateMoney: ()=>P,
            toggleOnline: ()=>O,
            onlinePlatformClass: ()=>I,
            handleScroll: ()=>M,
            showErrorBox: ()=>R,
            getDropdownValue: ()=>L
        });
        n(751876),
        n(21466),
        n(66108),
        n(991181),
        n(296253);
        var r = n(961540)
          , i = n(695724)
          , o = n(376567)
          , a = n(40906)
          , s = n(654612)
          , c = n(315544)
          , _ = n(786067)
          , l = n(726271)
          , u = n(376270)
          , d = n(49535)
          , p = n(803834)
          , h = n(712439)
          , m = n(520820);
        function f(e, t) {
            var n = []
              , r = 0;
            return function(i) {
                n.push(i),
                r || (r = setTimeout((()=>{
                    r = !1,
                    e(n),
                    n = []
                }
                ), t))
            }
        }
        function g(e, t) {
            var n, r;
            if (window.__debugMode) {
                switch (t) {
                case "error":
                    n = "color: red",
                    r = "background: red; color: white";
                    break;
                case "success":
                    n = "color: green",
                    r = "background: green; color: white";
                    break;
                default:
                    n = "color: blue;",
                    r = "background: #000; color: #fff;"
                }
                try {
                    var i = new Date;
                    console.debug(`%cLP:[${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}:${i.getMilliseconds()}]%c ${e}`, r, n)
                } catch (e) {}
            }
        }
        function v(e) {
            var t = [];
            if (void 0 === e.length)
                return Object.keys(e).map((t=>e[t]));
            for (var n = 0; n < e.length; n++)
                t.push(e[n]);
            return t
        }
        function E(e) {
            for (var t = {}, n = [], r = 0; r < e.length; r++)
                t[e[r]] || (n.push(e[r]),
                t[n[r]] = 1);
            return n
        }
        function y(e, t) {
            var n;
            return function() {
                n || (e.apply(this, arguments),
                n = setTimeout((function() {
                    n = !1
                }
                ), t))
            }
        }
        function w(e) {
            for (var t = e.length; t > 0; ) {
                var n = Math.floor(Math.random() * t)
                  , r = e[--t];
                e[t] = e[n],
                e[n] = r
            }
            return e
        }
        function b() {
            var e = [].slice.call(arguments)
              , t = e.pop()
              , n = new CallHub(t,e.length);
            (0,
            i.each)(e, ((e,t)=>t((()=>n.done()))))
        }
        function C(e) {
            var t = 0;
            if (0 === e.length)
                return t;
            for (var n = 0, r = e.length; n < r; n++) {
                t = (t << 5) - t + e.charCodeAt(n),
                t |= 0
            }
            return t
        }
        function T(e, t, n, r, i, o, a) {
            var s = t.getValue ? t.getValue() : t.value
              , l = t.lastLen || 0;
            if (t.lastLen !== s.length || o) {
                t.lastLen = s.length;
                var u = {
                    "&": 5,
                    "<": 4,
                    ">": 4,
                    '"': 6,
                    "\n": r ? 1 : 4,
                    "\r": 0,
                    "!": 5,
                    "'": 5,
                    $: 6,
                    "\\": 6
                }
                  , d = {
                    1168: 1,
                    1169: 1,
                    8211: 1,
                    8212: 1,
                    8216: 1,
                    8217: 1,
                    8218: 1,
                    8230: 1,
                    8240: 1,
                    8249: 1,
                    8250: 1,
                    8364: 1,
                    8470: 1,
                    8482: 1,
                    65533: 1
                }
                  , p = {
                    1037: 1,
                    1104: 1,
                    1117: 1
                };
                i && (u[","] = 5);
                var h = function(e) {
                    for (var t = 0, n = 0, r = e.length; n < r; n++) {
                        var i = u[e.charAt(n)]
                          , o = e.charCodeAt(n);
                        t += void 0 !== i ? i : !a && o >= 128 && (o < 1025 || p[o] || o > 1119) && !d[o] && (o < 8220 || o > 8222) && (o < 8224 || o > 8226) ? ("&#" + o + ";").length : 1
                    }
                    return t
                }(s);
                if (n = (0,
                c.ge)(n),
                h > Math.max(e - 100, .75 * e))
                    if ((0,
                    c.show)(n),
                    h > e)
                        if (i) {
                            var m = (0,
                            c.val)(t, function(e, t) {
                                for (var n = 0, r = "", i = 0, o = e.length; i < o; i++) {
                                    var s = e.charAt(i)
                                      , c = u[s]
                                      , _ = e.charCodeAt(i);
                                    if ((n += void 0 !== c ? c : !a && _ >= 128 && (_ < 1025 || p[_] || _ > 1119) && !d[_] && (_ < 8220 || _ > 8222) && (_ < 8224 || _ > 8226) ? ("&#" + _ + ";").length : 1) > t)
                                        break;
                                    r += s
                                }
                                return r
                            }(s, Math.min(e, l)));
                            t.lastLen = m.length,
                            n.innerHTML = (0,
                            _.getLang)("text_N_symbols_remain", 0)
                        } else
                            n.innerHTML = (0,
                            _.getLang)("text_exceeds_symbol_limit", h - e);
                    else
                        n.innerHTML = (0,
                        _.getLang)("text_N_symbols_remain", e - h);
                else
                    (0,
                    c.hide)(n)
            }
        }
        function D() {
            var e = "";
            return window.getSelection ? e = window.getSelection().toString() : document.selection && "Control" !== document.selection.type && (e = document.selection.createRange().text),
            e
        }
        function A(e, t, n) {
            if (-1 !== (t || {}).h || (0,
            d.checkEvent)(n))
                return !0;
            if (-1 !== (t || {}).h) {
                var c = e.match(r.VK_URL_REGEX_STRICT);
                if (c && "api." !== c[1].toLowerCase())
                    return location.href = e,
                    !1;
                var _ = (0,
                i.intval)((0,
                o.getCookie)("remixsettings_bits"));
                if (r.VK_URL_REGEX_STRICT.test((0,
                a.locBase)()) || 1 & _)
                    return window.open("/away.php?to=" + encodeURIComponent(e) + (t && void 0 !== t.h ? "&h=" + t.h : ""), "_blank"),
                    !1
            }
            var l = (0,
            i.extend)({
                act: "a_go",
                to: e
            }, t || {});
            return !(0,
            s.showBox)("away.php", l, {}, n)
        }
        function S() {
            return !!(document.fullscreenElement || document.fullScreenElement || document.msFullscreenElement || document.mozFullScreen || document.webkitIsFullScreen || cur.pvPartScreen)
        }
        function P(e, t) {
            if (void 0 !== e && !1 !== e) {
                var n = "";
                !0 === t ? (vk.balanceEx = e,
                n = "_ex") : vk.balance = e;
                var r = (0,
                c.geByClass)("votes_balance_nom" + n);
                (0,
                i.each)(r, ((t,n)=>n.innerHTML = `${e} ${(0,
                _.getLang)("votes_flex", e)}`));
                var o = e * (vk.vcost || 7)
                  , a = (0,
                c.geByClass)("money_balance_nom" + n);
                (0,
                i.each)(a, ((e,t)=>t.innerHTML = (0,
                _.getLang)("global_money_amount_rub", o, !0))),
                void 0 !== t && !1 !== t && !0 !== t && P(t, !0),
                window.GamesCatalog && window.GamesCatalog.updateMoney(e)
            }
        }
        function O(e, t) {
            var n = I(t).split(" ")
              , r = [];
            ["online", "mobile", "_online"].forEach((function(t) {
                (0,
                i.inArray)(t, n) && !(0,
                c.hasClass)(e, t) ? r.push(t) : !(0,
                i.inArray)(t, n) && (0,
                c.hasClass)(e, t) && (0,
                c.removeClass)(e, t)
            }
            )),
            r.length > 0 && (0,
            c.addClass)(e, r.join(" "))
        }
        function I(e) {
            var t = " _online";
            return e && (t += " online"),
            l.mobPlatforms[e] && (t += " mobile"),
            (0,
            u.updateOnlineText)(),
            t
        }
        function M(e) {
            e = e.split(",");
            var t = cur.named || {}
              , n = e[0] && (t[e[0]] || (0,
            c.ge)(e[0])) || !1
              , r = e[1] && (t[e[1]] || (0,
            c.ge)(e[1])) || !1;
            if (!n && !r) {
                if (!(n = document.getElementsByName(e[0])[0]))
                    return;
                n = n.nextSibling
            }
            var i = (0,
            c.ge)("page_header_wrap") || (0,
            c.ge)("dev_top_nav_wrap");
            setTimeout((function() {
                n && (0,
                p.scrollToY)((0,
                c.getXY)(n)[1] - (i ? (0,
                c.getSize)(i)[1] : 0), 0),
                r && (0,
                c.elfocus)(r)
            }
            ), 300)
        }
        function R(e, t) {
            return void 0 === t && (t = 1e4),
            setTimeout((0,
            s.showFastBox)({
                title: (0,
                _.getLang)("global_error")
            }, e).hide, t)
        }
        function L(e) {
            var t = (0,
            c.ge)(e + "_container");
            if (t || (t = (0,
            c.ge)(e)),
            t && t.dropdown)
                return t.dropdown.val()
        }
    }
    ,
    695724: (e,t,n)=>{
        "use strict";
        n.d(t, {
            rand: ()=>s.rand,
            replaceEntities: ()=>s.replaceEntities,
            isArray: ()=>s.isArray,
            isEmpty: ()=>s.isEmpty,
            isFunction: ()=>s.isFunction,
            isObject: ()=>s.isObject,
            isString: ()=>s.isString,
            isUndefined: ()=>s.isUndefined,
            irand: ()=>s.irand,
            escapeRE: ()=>s.escapeRE,
            each: ()=>s.each,
            vkNow: ()=>s.vkNow,
            stripTags: ()=>s.stripTags,
            intval: ()=>s.intval,
            floatval: ()=>s.floatval,
            positive: ()=>s.positive,
            vkImage: ()=>s.vkImage,
            clean: ()=>s.clean,
            unclean: ()=>s.unclean,
            isRetina: ()=>s.isRetina,
            vkLocal: ()=>_,
            lTimeout: ()=>l,
            trim: ()=>u,
            stripHTML: ()=>d,
            isNumeric: ()=>p,
            isNumber: ()=>h,
            winToUtf: ()=>m,
            indexOf: ()=>f,
            inArray: ()=>g,
            clone: ()=>v,
            arrayKeyDiff: ()=>E,
            extend: ()=>y,
            addTemplates: ()=>w,
            getTemplate: ()=>b,
            serializeForm: ()=>C,
            extractUrls: ()=>T,
            getCaretCharacterOffsetWithin: ()=>D,
            formatCount: ()=>A,
            encodeHtml: ()=>R,
            decodeHtml: ()=>L,
            initUtilsCommon: ()=>k
        });
        n(530522),
        n(991181),
        n(579665),
        n(95767),
        n(66108),
        n(296253),
        n(21466),
        n(59357);
        var r = n(315544)
          , i = n(695724)
          , o = n(786067)
          , a = n(726271)
          , s = n(40906);
        function c(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        function _(e) {
            var t = window.PageID;
            return function() {
                t === window.PageID && e.apply(this, arguments)
            }
        }
        function l(e, t) {
            return setTimeout(_(e), t)
        }
        var u = e=>(e || "").replace(/^\s+|\s+$/g, "")
          , d = e=>e ? e.replace(/<(?:.|\n|\r|\u2028|\u2029)*?>/g, "") : "";
        function p(e) {
            return !isNaN(e)
        }
        function h(e) {
            return "number" == typeof e && (e === Number(e) && (e !== 1 / 0 && e !== -1 / 0))
        }
        function m(e) {
            return e.replace(/&#(\d\d+);/g, (function(e, t) {
                return (t = (0,
                i.intval)(t)) >= 32 ? String.fromCharCode(t) : e
            }
            )).replace(/&quot;/gi, '"').replace(/&lt;/gi, "<").replace(/&gt;/gi, ">").replace(/&amp;/gi, "&")
        }
        function f(e, t, n) {
            for (var r = n || 0, i = (e || []).length; r < i; r++)
                if (e[r] == t)
                    return r;
            return -1
        }
        function g(e, t) {
            return -1 !== f(t, e)
        }
        function v(e, t) {
            var n = (0,
            s.isObject)(e) || void 0 === e.length ? {} : [];
            for (var r in e)
                (!/webkit/i.test(window._ua) || "layerX" != r && "layerY" != r && "webkitMovementX" != r && "webkitMovementY" != r) && (t && "object" == typeof e[r] && "prototype" !== r && null !== e[r] ? n[r] = v(e[r]) : n[r] = e[r]);
            return n
        }
        function E(e) {
            var t = {}
              , n = arguments.length
              , r = arguments;
            for (var i in e)
                if (e.hasOwnProperty(i)) {
                    for (var o = !1, a = 1; a < n; a++)
                        r[a][i] && r[a][i] === e[i] && (o = !0);
                    o || (t[i] = e[i])
                }
            return t
        }
        function y() {
            var e = arguments
              , t = e.length
              , n = e[0] || {}
              , r = 1
              , i = !1;
            for ("boolean" == typeof n && (i = n,
            n = e[1] || {},
            r = 2),
            "object" == typeof n || (0,
            s.isFunction)(n) || (n = {}); r < t; r++) {
                var o = e[r];
                if (null != o)
                    for (var a in o)
                        if (o.hasOwnProperty(a)) {
                            var c = n[a]
                              , _ = o[a];
                            n !== _ && (i && _ && "object" == typeof _ && !_.nodeType ? n[a] = y(i, c || (null != _.length ? [] : {}), _) : void 0 !== _ && (n[a] = _))
                        }
            }
            return n
        }
        function w(e) {
            window.templates = window.templates || {},
            y(window.templates, e)
        }
        function b(e, t) {
            var n = (window.templates = window.templates || {})[e];
            return "function" == typeof n && (n = n()),
            n && t ? (0,
            r.rs)(n, t) : n || ""
        }
        function C(e) {
            if ("object" != typeof e)
                return !1;
            var t = {}
              , n = t=>(0,
            r.geByTag)(t, e)
              , i = function(n, i) {
                if (i.name)
                    if ("text" !== i.type && i.type)
                        if (i.getAttribute("bool")) {
                            var o = (0,
                            r.val)(i);
                            if (!o || "0" === o)
                                return;
                            t[i.name] = 1
                        } else
                            t[i.name] = a.browser.msie && !i.value && e[i.name] ? e[i.name].value : i.value;
                    else
                        t[i.name] = (0,
                        r.val)(i)
            };
            return (0,
            s.each)(n("input"), (function(e, t) {
                if ("radio" !== t.type && "checkbox" !== t.type || t.checked)
                    return i(0, t)
            }
            )),
            (0,
            s.each)(n("select"), i),
            (0,
            s.each)(n("textarea"), i),
            t
        }
        function T(e, t) {
            for (var n, r = t ? /(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9-_\-]+\.)+(?:||||))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i : /(?:([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9-_\-]+\.)+(?:||||))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i, i = []; e && (n = e.match(r)); ) {
                e = e.substr(n.index + n[0].length);
                var o = 0;
                n[4] || (o = 7),
                i.push({
                    url: n[2 + o],
                    query: n[5 + o] || "",
                    domain: n[4 + o]
                })
            }
            return i
        }
        function D(e) {
            if (!e)
                return [0, 0];
            var t = 0
              , n = 0
              , r = e.ownerDocument || e.document
              , i = r.defaultView || r.parentWindow;
            if (i.getSelection().rangeCount > 0) {
                var o = i.getSelection().getRangeAt(0)
                  , a = o.cloneRange();
                a.selectNodeContents(e),
                a.setEnd(o.startContainer, o.startOffset),
                t = a.toString().length,
                a.setEnd(o.endContainer, o.endOffset),
                n = a.toString().length
            }
            return [t, n]
        }
        function A(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = t.kLimit || 1e3
              , r = t.mLimit || 1e6;
            return e >= r && !t.noCheck ? A(e = (e = (0,
            i.intval)(e / 1e5)) > 1e3 ? (0,
            i.intval)(e / 10) : e / 10, y(t, {
                noCheck: !0
            }), !0) + "M" : e >= n && !t.noCheck ? A(e = (e = (0,
            i.intval)(e / 100)) > 100 ? (0,
            i.intval)(e / 10) : e / 10, y(t, {
                noCheck: !0
            }), !0) + "K" : (0,
            o.langNumeric)(e, "%s", !0).replace(/,/g, ".")
        }
        var S, P, O, I = (O = null,
        [function(e) {
            return O || (O = (0,
            r.se)("<span> </span>")),
            O.innerText = e,
            O.innerHTML
        }
        , function(e) {
            return O || (O = (0,
            r.se)("<span> </span>")),
            O.innerHTML = e.replace(/<br\s*\/?>/gim, "\n"),
            O.innerText
        }
        ]), M = (P = 2,
        function(e) {
            if (Array.isArray(e))
                return e
        }(S = I) || function(e, t) {
            if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) {
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }
        }(S, P) || function(e, t) {
            if (e) {
                if ("string" == typeof e)
                    return c(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                return "Object" === n && e.constructor && (n = e.constructor.name),
                "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? c(e, t) : void 0
            }
        }(S, P) || function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
        }()), R = M[0], L = M[1];
        function k() {
            window.PageID = window.PageID || 1
        }
    }
    ,
    985048: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isPhoneNumber: ()=>a,
            isEmail: ()=>s
        });
        n(21466);
        var r = n(695724)
          , i = /^\+?[\d]{4,18}$/
          , o = /^\S+@\S+\.\S+$/;
        function a(e) {
            return e = (0,
            r.trim)(e),
            Boolean(e.match(i))
        }
        var s = e=>(e = (0,
        r.trim)(e),
        Boolean(e.match(o)))
    }
    ,
    325489: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            showVideo: ()=>showVideo,
            showInlineVideo: ()=>showInlineVideo,
            loadInlineVideo: ()=>loadInlineVideo,
            revertLastInlineVideo: ()=>revertLastInlineVideo,
            pauseLastInlineVideo: ()=>pauseLastInlineVideo,
            playLastInlineVideo: ()=>playLastInlineVideo,
            checkMp4: ()=>checkMp4,
            VideoConstants: ()=>VideoConstants,
            initVideo: ()=>initVideo
        });
        var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(175115)
          , core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(751876)
          , _videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(141454)
          , _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(479957)
          , _web_lib_date__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(289988)
          , _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(315544)
          , _dom_events__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(49535)
          , _utils_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(695724)
          , _lang__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(786067)
          , _message_box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(654612)
          , _layout_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(635429)
          , _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(273271)
          , _web_video_video_utils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(108046)
          , _shared_lib_site__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(961540);
        function _extends() {
            return _extends = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            _extends.apply(this, arguments)
        }
        var rtrgQuery = `//${(0,
        _shared_lib_site__WEBPACK_IMPORTED_MODULE_11__.getHostName)()}/rtrg?r=w*Z1Flwi3QdbWaoLMc7zOA*7Cr4Nrtojr9otHjsjIhsb2CVqRWalgbvxZw3MzxZa6be3Siu2XY3gvK5fysYtWLWgNwHMpjRTupSGZrcGRNlj7fduqq9*t7ij6CX4aMcBTD5be8mIXJsbTsvP8Zl2RZEd76a4FTuCOFqzMxqGtFc-`;
        function showVideo(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}
              , r = arguments.length > 3 ? arguments[3] : void 0;
            if (cur.viewAsBox)
                return cur.viewAsBox();
            if (!(0,
            _dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(r)) {
                if ((0,
                _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_10__.isUnauthorizedMediaLayerBoxAvailable)() && (r || n.openInPopup) && !n.forceUnauth && !cur.is_showcase)
                    return _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_10__.Unauthorized.showMoreBox(null, 0, _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_10__.UnauthorizedSourceType.VIDEO, (()=>{
                        showVideo(e, t, _extends({}, n, {
                            openInPopup: !1,
                            forceUnauth: !0
                        }), r)
                    }
                    )),
                    !1;
                if (n.forceUnauth = !0,
                window.mvcur && mvcur.mvShown && mvcur.minimized && mvcur.videoRaw == e)
                    return Videoview.unminimize(),
                    !1;
                var i = nav.objLoc.claim
                  , o = !(!n.addParams || !/^-?\d+_\d+$/.test(n.addParams.post_id)) && n.addParams.post_id;
                if (!n.playlistId && o && (/^public|groups|profile$/.test(cur.module) && (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)("post" + o, "own") ? n.playlistId = "wall_" + cur.oid : n.playlistId = "post_" + n.addParams.post_id),
                n.playlistId)
                    if (n.addParams = (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(n.addParams, {
                        playlist_id: n.playlistId
                    }),
                    window.VideoPlaylist && VideoPlaylist.getList(n.playlistId))
                        e || (n.addParams.load_playlist = 1);
                    else if (/^wall_/.test(n.playlistId)) {
                        var a = cur.wallVideos && cur.wallVideos[n.playlistId];
                        n.addParams.load_playlist = a && a.list.length >= 50 ? 0 : 1
                    } else
                        n.addParams.load_playlist = !/^(?:post_)?-?\d+_-?\d+$/.test(n.playlistId) || cur.pageVideosList && cur.pageVideosList[n.playlistId] ? 0 : 1;
                !n.expandPlayer && cur.videoInlinePlayer && cur.videoInlinePlayer.getVideoId() == e && cur.videoInlinePlayer.canExpand() && (n.expandPlayer = cur.videoInlinePlayer),
                n.expandPlayer && (n.addParams = (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(n.addParams, {
                    expand_player: 1
                }),
                delete cur.videoInlinePlayer);
                var s = new CallHub((function() {
                    n.hidden ? n.hidden(s.data, n, t, e) : Videoview.showVideo.apply(Videoview, s.data)
                }
                ),2);
                window.stManager.add(["videoview.js", "videoview.css", "page.js", "page.css"], (()=>{
                    s.failed || (n.hidden || (revertLastInlineVideo(),
                    Videoview.show(r, e, t, n)),
                    s.done())
                }
                )),
                (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(n, {
                    onDone: function() {
                        var t = Array.prototype.slice.call(arguments);
                        t.unshift(e),
                        s.data = t,
                        s.done()
                    },
                    onFail: function(t) {
                        if (s.failed = 1,
                        !n.hidden) {
                            if (window.mvcur && mvcur.mvShown)
                                Videoview.hide();
                            else {
                                var r = (0,
                                _utils_common__WEBPACK_IMPORTED_MODULE_6__.clone)(nav.objLoc);
                                r.z === "video" + e && delete r.z,
                                r[0] === "video" + e && (r[0] = "videos" + e.split("_")[0]),
                                nav.setLoc(r)
                            }
                            (0,
                            _message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)((0,
                            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error"), t || (0,
                            _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error_occured")),
                            s.done()
                        }
                        return !0
                    },
                    cache: "status" !== t
                });
                var c = n.params;
                return c || (c = {
                    act: "show",
                    video: e,
                    list: t,
                    autoplay: n.autoplay ? 1 : 0,
                    ad_video: n.ad_video,
                    module: n.module || window.Videoview && window.Videoview.getVideoModule() || "",
                    svids: n.svids
                }),
                cur.is_showcase && !c.context && cur.ref_context && (c.context = cur.ref_context),
                n.addParams && (c = (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(c, n.addParams)),
                (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(c.module) || (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(c, {
                    _nol: JSON.stringify(nav.objLoc)
                }),
                i && (c.claim = i),
                ajax.post(`al_video.php?act=${c.act}`, c, n),
                (0,
                _web_video_video_utils__WEBPACK_IMPORTED_MODULE_12__.idlizeCall)((()=>{
                    (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_6__.vkImage)().src = `${locProtocol}${rtrgQuery}`
                }
                )),
                !1
            }
        }
        function showInlineVideo(videoId, listId, options, ev, thumb) {
            if ((0,
            _dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(ev))
                return !0;
            if (options = options || {},
            window.mvcur && mvcur.mvShown || options.hasRestriction)
                return showVideo(videoId, listId, options, ev);
            if ((0,
            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.attr)(thumb, "data-loading"))
                return !1;
            var h = thumb.clientHeight
              , w = thumb.clientWidth
              , btn = (0,
            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domByClass)(thumb, "page_post_video_play_inline")
              , onLoaded = options.onLoaded;
            onLoaded && delete options.onLoaded;
            var params = {
                video: videoId,
                list: listId,
                autoplay: options.autoplay,
                module: options.module
            };
            return (0,
            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domData)(thumb, "stretch-vertical") && (params.stretch_vertical = 1),
            (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(params, options.addParams),
            showProgress(),
            loadInlineVideo(params, (function(e, t) {
                hideProgress(),
                e ? onDone.apply(null, t) : onFail.apply(null, t)
            }
            ), options.cache),
            cur.videoInlinePlayerDestroyerSet || (cur.destroy.push(_destroyInlineVideoPlayer),
            cur.videoInlinePlayerDestroyerSet = 1),
            (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_6__.vkImage)().src = rtrgQuery,
            !1;
            function onDone(title, html, js, opts) {
                revertLastInlineVideo(),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(thumb);
                var videoWrap = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div", {
                    innerHTML: html,
                    className: "inline_video_wrap"
                }, {
                    width: w,
                    height: h
                });
                if (-195297477 !== opts.mvData.authorId && (window._videoLastInlined = [videoWrap, thumb]),
                thumb.parentNode.appendChild(videoWrap),
                cur.mvOpts = !(!opts || !opts.mvData) && opts.mvData,
                opts.player) {
                    var container = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domByClass)(videoWrap, "video_box_wrap");
                    (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_6__.isFunction)(onLoaded) && (opts.player.params[0].onPlayerLoaded = onLoaded);
                    var linkAttr = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.attr)(thumb, "data-link-attr");
                    linkAttr && (opts.player.params[0].link_attr = linkAttr),
                    VideoInitializer.initPlayer(container, opts.player.type, opts.player.params)
                }
                try {
                    eval("(function () {" + js + "})();")
                } catch (e) {}
                if (!params.from_autoplay) {
                    var notifier = window.Notifier;
                    notifier && setTimeout((()=>notifier.lcSend("video_start")), 0);
                    var audioPlayer = window.ap;
                    audioPlayer && audioPlayer.isPlaying() && (audioPlayer.pause(),
                    audioPlayer.pausedByVideo = (0,
                    _utils_common__WEBPACK_IMPORTED_MODULE_6__.vkNow)())
                }
                ev && (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domClosest)("bookmarks_row_type_video", ev.target) && (0,
                _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_2__.statlogsValueEvent)("bookmarks_product_analytics", {
                    item_type: "video",
                    item_owner_id: cur.mvOpts.oid,
                    item_id: cur.mvOpts.vid,
                    time: (0,
                    _web_lib_date__WEBPACK_IMPORTED_MODULE_3__.getServerTime)()
                }),
                thumb.setAttribute("data-playing", 1)
            }
            function onFail(e) {
                params.from_autoplay || (0,
                _message_box__WEBPACK_IMPORTED_MODULE_8__.showFastBox)((0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error"), e || (0,
                _lang__WEBPACK_IMPORTED_MODULE_7__.getLang)("global_error_occured"))
            }
            function showProgress() {
                thumb.setAttribute("data-loading", 1),
                options.no_progress || ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(btn, "page_post_video_play_inline_loading"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(btn, (0,
                _layout_utils__WEBPACK_IMPORTED_MODULE_9__.getProgressHtml)()))
            }
            function hideProgress() {
                thumb.removeAttribute("data-loading"),
                options.no_progress || ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(btn, "page_post_video_play_inline_loading"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(btn, ""))
            }
        }
        function loadInlineVideo(e, t, n) {
            var r = (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)({
                autoplay: 0,
                module: cur.module
            }, e);
            (0,
            _utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(r.module) || (r._nol = JSON.stringify(nav.objLoc));
            var i = ["videoview.js", "videoview.css"];
            function o(e, n) {
                (0,
                _utils_common__WEBPACK_IMPORTED_MODULE_6__.isFunction)(t) && t(e, n)
            }
            r.from_autoplay && i.push("videoplayer.css"),
            ajax.post("al_video.php?act=show_inline", r, {
                onDone: function() {
                    var e = [].slice.call(arguments);
                    o(!0, e)
                },
                onFail: function() {
                    var e = [].slice.call(arguments);
                    return o(!1, e),
                    !0
                },
                stat: i,
                local: 1,
                cache: n
            })
        }
        function revertLastInlineVideo(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            if (window._videoLastInlined) {
                var n, r = !1, i = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)(e);
                if (i && (n = window._videoLastInlined[0])) {
                    for (; n = n.parentNode; )
                        if (n == i) {
                            r = !0;
                            break
                        }
                    if (!r)
                        return
                }
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(window._videoLastInlined[0]),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(window._videoLastInlined[1]),
                window._videoLastInlined[1].removeAttribute("data-playing"),
                window._videoLastInlined = !1,
                _destroyInlineVideoPlayer(t),
                delete cur.mvOpts
            }
        }
        function _destroyInlineVideoPlayer() {
            var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
            cur.videoInlinePlayer && (cur.videoInlinePlayer.destroy(e),
            delete cur.videoInlinePlayer)
        }
        function pauseLastInlineVideo() {
            if (window._videoLastInlined) {
                var e = cur.videoInlinePlayer || (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("video_yt") && window.VideoYoutube;
                if (e) {
                    if (e.isActiveLive && e.isActiveLive())
                        return;
                    cur.mvOpts.lastPlayerState = e.getState(),
                    e.togglePlay(!1)
                }
            }
        }
        function playLastInlineVideo() {
            if (window._videoLastInlined && cur.mvOpts && cur.mvOpts.lastPlayerState === _videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_13__.PLAYING) {
                var e = cur.videoInlinePlayer || (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("video_yt") && window.VideoYoutube;
                e && e.togglePlay(!0)
            }
        }
        function checkMp4(e) {
            e(!0)
        }
        var VideoConstants = {
            VIDEO_ITEM_INDEX_OWNER_ID: 0,
            VIDEO_ITEM_INDEX_ID: 1,
            VIDEO_ITEM_INDEX_THUMB: 2,
            VIDEO_ITEM_INDEX_TITLE: 3,
            VIDEO_ITEM_INDEX_FLAGS: 4,
            VIDEO_ITEM_INDEX_DURATION: 5,
            VIDEO_ITEM_INDEX_HASH: 6,
            VIDEO_ITEM_INDEX_MODER_ACTS: 7,
            VIDEO_ITEM_INDEX_OWNER: 8,
            VIDEO_ITEM_INDEX_DATE: 9,
            VIDEO_ITEM_INDEX_VIEWS: 10,
            VIDEO_ITEM_INDEX_PLATFORM: 11,
            VIDEO_ITEM_INDEX_BLOCKED: 12,
            VIDEO_ITEM_INDEX_MUSIC_VIDEO_META: 13,
            VIDEO_ITEM_INDEX_ARIA: 14,
            VIDEO_ITEM_INDEX_RESTRICTION_BLOCK: 15,
            VIDEO_ITEM_INDEX_RESTRICTION_CLASSES: 16,
            VIDEO_ITEM_INDEX_ADMIN_INFO: 17,
            VIDEO_ITEM_INDEX_CARD_MENU_TOGGLE: 18,
            VIDEO_ITEM_INDEX_RAW_DURATION: 19,
            VIDEO_ITEM_INDEX_LINK: 20,
            VIDEO_ITEM_INDEX_TRAILER: 21,
            VIDEO_ITEM_INDEX_VIEWED_DURATION: 22,
            VIDEO_ITEM_INDEX_VIEWED_DAY: 23,
            VIDEO_ITEM_INDEX_LIST_ID: 24,
            VIDEO_ITEM_INDEX_PLAYLIST_ID: 25,
            VIDEO_ITEM_INDEX_CARD_ACTIONS: 26,
            VIDEO_ITEM_INDEX_CARD_PRIVACY_ICONS: 27,
            VIDEO_ITEM_INDEX_DESCRIPTION: 28,
            VIDEO_ITEM_INDEX_OWNER_PHOTO: 29,
            VIDEO_ITEM_INDEX_SMALL_THUMB: 30,
            VIDEO_ITEM_INDEX_ML_THUMB_ID: 31,
            VIDEO_ITEM_INDEX_PLAY_FROM: 32,
            VIDEO_ITEM_FLAG_EXTERNAL: 1,
            VIDEO_ITEM_FLAG_ACTIVE_LIVE: 2,
            VIDEO_ITEM_FLAG_CAN_EDIT: 64,
            VIDEO_ITEM_FLAG_CAN_DELETE: 128,
            VIDEO_ITEM_FLAG_CAN_ADD: 256,
            VIDEO_ITEM_FLAG_PRIVATE: 512,
            VIDEO_ITEM_FLAG_NO_AUTOPLAY: 1024,
            VIDEO_ITEM_FLAG_ADDED: 2048,
            VIDEO_ITEM_FLAG_SKIP_THUMB_LOAD: 4096,
            VIDEO_ITEM_FLAG_NEED_SIGN_IN: 8192,
            VIDEO_ITEM_FLAG_HD: 16384,
            VIDEO_ITEM_FLAG_DELETED: 32768,
            VIDEO_ITEM_FLAG_CAN_MOVE: 65536,
            VIDEO_ITEM_FLAG_CAN_DELETE_FROM_HISTORY: 1 << 17,
            VIDEO_ITEM_FLAG_PRIVATE_BY_LINK: 1 << 18,
            VIDEO_ITEM_FLAG_LIVE: 1 << 19,
            VIDEO_ITEM_FLAG_PRIVATE_NOT_PUBLISHED: 1 << 20,
            VIDEO_ITEM_FLAG_PRIVATE_MEMBERS: 1 << 21
        };
        function initVideo() {
            window._videoLastInlined = !1
        }
    }
    ,
    499284: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>y
        });
        n(283946),
        n(21466),
        n(59357),
        n(175115);
        var r = n(667294)
          , i = n(40906)
          , o = n(49535)
          , a = n(695724)
          , s = n(315544)
          , c = (n(45697),
        n(386409))
          , _ = n(41650)
          , l = n(481117)
          , u = n(118690)
          , d = n(889366)
          , p = n(336680)
          , h = n(626555)
          , m = n(378486)
          , f = n(439664)
          , g = n(703797)
          , v = n(733024)
          , E = n(982452);
        class y extends r.Component {
            constructor(e) {
                var t;
                super(e),
                t = this,
                this.componentDidMount = ()=>{
                    document.addEventListener("keydown", this.onDocumentKeyDown),
                    this.setInitialState(),
                    this.synchronizeStateWithBackend()
                }
                ,
                this.componentWillUnmount = ()=>{
                    document.removeEventListener("keydown", this.onDocumentKeyDown),
                    this.removeResendCodeButtonTimer()
                }
                ,
                this.componentDidUpdate = (e,t)=>{
                    this.state.initialLoading || this.state.delayedUnblockExplanation || this.state.delayedUnblockFinished || t.phone === this.state.phone && t.code === this.state.code && t.codeSent === this.state.codeSent || this.updateFocus()
                }
                ,
                this.sendCode = ()=>{
                    if (!this.isBusy()) {
                        this.resetMessage();
                        var e = {
                            act: y.acts.sendCode,
                            phone: this.getPhonePrefix() + this.state.newPhone,
                            hash: this.state.processHash,
                            sure: 1
                        };
                        ajax.post(y.controller, e, {
                            onDone: e=>{
                                this.setStateByProcess(e),
                                this.setResendCodeButtonTimer()
                            }
                            ,
                            onFail: e=>(this.setErrorMessage(e),
                            !0),
                            showProgress: ()=>this.setState({
                                mainButtonLoading: !0
                            }),
                            hideProgress: ()=>this.setState({
                                mainButtonLoading: !1
                            })
                        })
                    }
                }
                ,
                this.sendCodeToBoundPhone = ()=>{
                    if (!this.isBusy()) {
                        this.resetMessage();
                        var e = {
                            act: y.acts.sendCodeToBoundPhone,
                            hash: this.state.processHash
                        };
                        ajax.post(y.controller, e, {
                            onDone: e=>{
                                this.setStateByProcess(e),
                                this.setResendCodeButtonTimer()
                            }
                            ,
                            onFail: e=>(this.setErrorMessage(e),
                            this.synchronizeStateWithBackend(),
                            !0),
                            showProgress: ()=>this.setState({
                                mainButtonLoading: !0
                            }),
                            hideProgress: ()=>this.setState({
                                mainButtonLoading: !1
                            })
                        })
                    }
                }
                ,
                this.resetPhone = e=>{
                    this.isBusy() || (this.removeResendCodeButtonTimer(),
                    e && this.resetMessage(),
                    this.setState({
                        phonePrefixIndex: y.constants.firstCountryIndex,
                        backendCallResetsEnabled: null,
                        phone: "",
                        code: "",
                        newPhone: "",
                        newCode: "",
                        phonePrefixInputNeeded: !0,
                        codeSent: !1,
                        checkCodeAttemptsAmount: void 0
                    }))
                }
                ,
                this.resetUnblockForm = ()=>{
                    if (!this.isBusy()) {
                        var e = {
                            act: y.acts.resetUnblockForm,
                            hash: this.state.processHash
                        };
                        ajax.post(y.controller, e, {
                            onDone: e=>{
                                this.setStateByProcess(e, {
                                    delayedUnblockExplanation: "",
                                    delayedUnblockFinished: !1
                                })
                            }
                            ,
                            onFail: e=>(this.setErrorMessage(e),
                            this.synchronizeStateWithBackend(),
                            !0),
                            showProgress: ()=>this.setState({
                                resetUnblockDataButtonLoading: !0
                            }),
                            hideProgress: ()=>this.setState({
                                resetUnblockDataButtonLoading: !1
                            })
                        })
                    }
                }
                ,
                this.checkCode = ()=>{
                    if (!this.isBusy())
                        if (this.state.newCode.length < 4)
                            (0,
                            c.notaBene)(this.references.validationCodeInput.element);
                        else {
                            this.resetMessage();
                            var e = {
                                act: y.acts.checkCode,
                                code: this.state.newCode,
                                hash: this.state.processHash
                            };
                            ajax.post(y.controller, e, {
                                onDone: e=>{
                                    this.setStateByProcess(e),
                                    this.references.passwordInput.element.focus(),
                                    this.setState({
                                        mainButtonLoading: !1
                                    })
                                }
                                ,
                                onFail: e=>(this.synchronizeStateWithBackend((()=>{
                                    this.setErrorMessage(e),
                                    this.setState({
                                        mainButtonLoading: !1
                                    })
                                }
                                )),
                                !0),
                                showProgress: ()=>this.setState({
                                    mainButtonLoading: !0
                                })
                            })
                        }
                }
                ,
                this.resendCode = ()=>{
                    if (!this.isBusy()) {
                        this.resetMessage();
                        var e = {
                            act: y.acts.resendCode,
                            hash: this.state.processHash
                        };
                        ajax.post(y.controller, e, {
                            onDone: e=>{
                                this.setStateByProcess(e, {
                                    newCode: ""
                                }),
                                this.setInfoMessage(this.getResentInfoMessageText()),
                                this.setResendCodeButtonTimer(),
                                this.references.validationCodeInput.element.focus()
                            }
                            ,
                            onFail: e=>(this.setErrorMessage(e),
                            this.synchronizeStateWithBackend(),
                            !0),
                            showProgress: ()=>this.setState({
                                noCodeButtonLoading: !0
                            }),
                            hideProgress: ()=>this.setState({
                                noCodeButtonLoading: !1
                            })
                        })
                    }
                }
                ,
                this.unblock = ()=>{
                    if (!this.isBusy())
                        if (y.isBadPassword(this.state.newPassword))
                            (0,
                            c.notaBene)(this.references.passwordInput.element);
                        else {
                            this.resetMessage();
                            var e = {
                                act: y.acts.unblock,
                                pass: this.state.newPassword,
                                hash: this.state.unblockHash
                            };
                            ajax.post(y.controller, e, {
                                onDone: e=>{
                                    e.delayed_unblock_explanation ? this.setState({
                                        delayedUnblockExplanation: e.delayed_unblock_explanation,
                                        mainButtonLoading: !1
                                    }) : (this.setState({
                                        password: this.state.newPassword
                                    }),
                                    y.refreshAuthDataAndRedirectToFeed(e.lg_domain_h, e.logout_hash, e.email, this.state.newPassword))
                                }
                                ,
                                onFail: e=>(this.setErrorMessage(e),
                                this.setState({
                                    mainButtonLoading: !1
                                }),
                                this.synchronizeStateWithBackend(),
                                !0),
                                showProgress: ()=>this.setState({
                                    mainButtonLoading: !0
                                })
                            })
                        }
                }
                ,
                this.redirectToAuth = ()=>{
                    this.setState({
                        redirectToAuthButtonLoading: !0
                    }),
                    window.location.href = document.getElementById("top_logout_link").href
                }
                ,
                this.synchronizeStateWithBackend = function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ()=>{}
                      , n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : y.constants.statusSyncRetriesCount
                      , r = {
                        act: y.acts.getStatus
                    };
                    ajax.post(y.controller, r, {
                        onDone: n=>{
                            e(),
                            t.setStateByProcess(n)
                        }
                        ,
                        onFail: r=>(t.setErrorMessage(r),
                        n > 0 ? (setTimeout((()=>{
                            t.synchronizeStateWithBackend(e, --n)
                        }
                        ), y.constants.statusSyncRetriesTimeoutMicroseconds),
                        !0) : ((0,
                        l.destroyComponentInBox)(),
                        (0,
                        E.showErrorBox)(_.default.getLang("login_unban_fetch_ban_data_internal_error")),
                        !0))
                    })
                }
                ,
                this.setStateByProcess = function(e) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]
                      , r = t.getStateByProcess(e);
                    t.state.initialLoading && (r.initialLoading = !1),
                    n && Object.assign(r, n),
                    0 !== t.state.unbanDataId && void 0 !== t.state.unbanDataId && r.unbanDataId !== t.state.unbanDataId && t.setErrorMessage(_.default.getLang("login_unban_data_expired")),
                    t.setState(r),
                    r.delayedUnblockExplanation || r.delayedUnblockFinished || (r.codeSent && r.resendButtonSecondsLeft && t.setResendCodeButtonTimer(),
                    0 === r.checkCodeAttemptsAmount && t.resetPhone(!1))
                }
                ,
                this.getStateByProcess = e=>({
                    phone: e.phone,
                    code: e.code,
                    password: e.password,
                    phonePrefixInputNeeded: !e.phone,
                    canEditPhone: e.can_edit_phone,
                    codeSent: e.code_sent,
                    checkCodeAttemptsAmount: Number(e.check_code_attempts_amount),
                    backendCallResetsEnabled: e.call_resets_enabled,
                    phonePrefixesCallResetsEnabledConfig: e.phone_prefixes_call_resets_enabled_config,
                    phonePrefixesToCountryMapping: e.country_to_phone_prefixes_map,
                    unbanDataId: e.unban_data_id,
                    delayedUnblockExplanation: e.delayed_unblock_explanation,
                    delayedUnblockFinished: e.delayed_unblock_finished,
                    resendCodeTimer: y.constants.noResetCodeTimerEnabled,
                    resendButtonSecondsLeft: e.sms_resend_delay_timer_left,
                    resendAttemptsAmount: e.resend_attempts_amount,
                    resendCodeDelay: e.sms_resend_delay,
                    phonePrefixIndex: this.getInitialPhonePrefixIndex(e.country_to_phone_prefixes_map, e.phone_prefix),
                    newPhone: e.phone,
                    newCode: e.code,
                    newPassword: "",
                    processHash: e.process_hash,
                    unblockHash: e.unblock_hash
                }),
                this.areCallResetsEnabled = ()=>{
                    if (null !== this.state.backendCallResetsEnabled)
                        return this.state.backendCallResetsEnabled;
                    var e = String(this.state.phonePrefixesToCountryMapping[this.state.phonePrefixIndex][0])
                      , t = Number(e.replace("_", ""));
                    return !this.state.phonePrefixesCallResetsEnabledConfig.includes(t)
                }
                ,
                this.updateFocus = ()=>{
                    this.state.phone ? this.state.phone && !this.state.code && this.state.codeSent ? this.references.validationCodeInput.element.focus() : this.state.phone && this.state.code && this.references.passwordInput.element.focus() : this.references.phoneInput.element.focus()
                }
                ,
                this.setErrorMessage = e=>{
                    "string" == typeof e && this.setState({
                        message: e,
                        isError: !0
                    })
                }
                ,
                this.setInfoMessage = e=>{
                    this.setState({
                        message: e,
                        isError: !1
                    })
                }
                ,
                this.resetMessage = ()=>{
                    this.setState({
                        message: ""
                    })
                }
                ,
                this.isBusy = ()=>this.state.mainButtonLoading || this.state.noCodeButtonLoading || this.state.resetUnblockDataButtonLoading,
                this.onDocumentKeyDown = e=>{
                    e.keyCode === o.KEY.ENTER && (this.references.mainButton.props.onClick(),
                    e.stopPropagation(),
                    e.preventDefault())
                }
                ,
                this.setResendCodeButtonTimer = ()=>{
                    if (this.state.resendCodeTimer === y.constants.noResetCodeTimerEnabled) {
                        var e = this.state.resendButtonSecondsLeft || this.state.resendCodeDelay;
                        this.setState({
                            resendCodeTimer: setInterval(this.resendCodeButtonTimerTick, p.SECOND),
                            resendButtonSecondsLeft: e
                        })
                    }
                }
                ,
                this.resendCodeButtonTimerTick = ()=>{
                    var e = this.state.resendButtonSecondsLeft - 1;
                    this.setState({
                        resendButtonSecondsLeft: e
                    }),
                    0 === e && this.removeResendCodeButtonTimer()
                }
                ,
                this.removeResendCodeButtonTimer = ()=>{
                    clearInterval(this.state.resendCodeTimer),
                    this.setState({
                        resendCodeTimer: y.constants.noResetCodeTimerEnabled,
                        resendButtonSecondsLeft: 0
                    })
                }
                ,
                this.noResendsWereMade = ()=>this.state.resendAttemptsAmount === y.constants.noCodeResentAmount,
                this.isLastResendStep = ()=>this.state.resendAttemptsAmount === y.constants.maxCodeResentAmount,
                this.shouldRenderCallResetsSteps = ()=>this.areCallResetsEnabled() ? this.noResendsWereMade() : this.isLastResendStep(),
                this.getCodeBlockHeaderLabel = ()=>this.shouldRenderCallResetsSteps() ? _.default.getLang("login_authcheck_called_phone_label") : _.default.getLang("login_confirmation_code"),
                this.getCodeBlockTooltipLabel = ()=>this.shouldRenderCallResetsSteps() ? this.props.tooltips.codeCallReset : this.props.tooltips.code,
                this.getResentInfoMessageText = ()=>this.shouldRenderCallResetsSteps() ? _.default.getLang("login_authcheck_call_reset_sent") : _.default.getLang("login_authcheck_sms_resent"),
                this.getResendCodeWaitingLabel = ()=>{
                    var e;
                    e = this.areCallResetsEnabled() ? this.noResendsWereMade() ? _.default.getLang("join_send_code_via_sms_time") : _.default.getLang("join_resend_code_time") : this.noResendsWereMade() ? _.default.getLang("join_resend_code_time") : _.default.getLang("login_authcheck_send_call_reset_delay");
                    var t = Math.floor(this.state.resendButtonSecondsLeft / 60) + ":" + (this.state.resendButtonSecondsLeft % 60 < 10 ? "0" : "") + this.state.resendButtonSecondsLeft % 60;
                    return e.replace("%s", t)
                }
                ,
                this.getResendCodeButtonLabel = ()=>this.areCallResetsEnabled() ? this.noResendsWereMade() ? _.default.getLang("join_send_code_via_sms") : _.default.getLang("join_no_code") : this.noResendsWereMade() ? _.default.getLang("join_no_code") : _.default.getLang("login_authcheck_send_call_reset_message"),
                this.getInitialPhonePrefixIndex = (e,t)=>{
                    var n = e.findIndex((e=>e[3] == t));
                    return -1 === n && (n = y.constants.firstCountryIndex),
                    n
                }
                ,
                this.mapPhonePrefixesToOption = ()=>this.state.phonePrefixesToCountryMapping.map(((e,t)=>({
                    constant: t,
                    name: e[1]
                }))),
                this.getPhonePrefix = ()=>this.state.phonePrefixesToCountryMapping[this.state.phonePrefixIndex][3],
                this.renderResendCodeButton = ()=>{
                    var e;
                    if (this.state.resendAttemptsAmount === y.constants.maxCodeResentAmount)
                        e = r.createElement("div", {
                            className: "resend_button resend_button--waiting"
                        }, _.default.getLang("reg_code_limit_exceeded"));
                    else if (0 === this.state.resendButtonSecondsLeft)
                        e = r.createElement(u.default, {
                            appearance: "link",
                            loading: this.state.noCodeButtonLoading,
                            className: "resend_button",
                            onClick: this.resendCode
                        }, this.getResendCodeButtonLabel());
                    else {
                        var t = this.getResendCodeWaitingLabel();
                        e = r.createElement("div", {
                            className: "resend_button resend_button--waiting"
                        }, t)
                    }
                    return r.createElement("div", {
                        className: "resend_button_wrap"
                    }, e)
                }
                ,
                this.renderPhonePrefixBlock = ()=>{
                    if (!this.state.phonePrefixInputNeeded)
                        return "";
                    var e = this.state.phone ? y.constants.finishedClass : "";
                    return r.createElement("div", {
                        className: `input phone_number_prefix_input ${e}`
                    }, r.createElement("div", {
                        className: "label"
                    }, _.default.getLang("join_country_label")), r.createElement(h.default, {
                        className: `dark phone_number_prefix _phone_input_tooltip ${e}`,
                        config: {
                            id: "phone_number_prefix",
                            placeholder: "",
                            selected: [this.state.phonePrefixIndex],
                            options: this.mapPhonePrefixesToOption()
                        },
                        singleSelectCrutch: !0,
                        onFilterChange: (e,t)=>{
                            this.setState({
                                phonePrefixIndex: null === t ? this.state.phonePrefixIndex : t
                            })
                        }
                        ,
                        readOnly: !!this.state.phone
                    }))
                }
                ,
                this.renderPhoneBlock = ()=>{
                    var e = this.state.phone && !this.state.code && this.state.canEditPhone ? r.createElement("a", {
                        className: "_change_phone_button",
                        onClick: ()=>this.resetPhone(!0)
                    }, _.default.getLang("login_unblock_form_change_phone")) : ""
                      , t = this.state.phonePrefixInputNeeded ? this.getPhonePrefix() : ""
                      , n = this.state.phone ? y.constants.finishedClass : ""
                      , i = !this.state.phone && !this.state.code && this.state.phonePrefixInputNeeded
                      , o = this.state.newPhone;
                    return r.createElement("div", {
                        className: "input phone_number_input"
                    }, r.createElement("div", {
                        className: "label"
                    }, _.default.getLang("login_mobile_phone")), e, r.createElement(m.default, {
                        text: this.getPhoneBlockTooltipLabel(),
                        appearance: y.constants.tooltipAppearance,
                        position: y.constants.tooltipPosition,
                        width: y.constants.tooltipWidth,
                        marginLeft: y.constants.tooltipMarginLeft,
                        isShown: i
                    }, r.createElement("div", {
                        id: "join_phone_prefixed",
                        className: `prefix_input_wrap ${n}`
                    }, r.createElement("div", {
                        id: "join_phone_prefix",
                        className: "prefix_input_prefix"
                    }, r.createElement("nobr", null, t)), r.createElement("div", {
                        className: "prefix_input_field"
                    }, r.createElement(d.default, {
                        className: `prefix_input phone_number _phone_input_tooltip ${n}`,
                        value: o,
                        readOnly: !!this.state.phone,
                        onChange: e=>this.setState({
                            newPhone: e.target.value
                        }),
                        ref: e=>{
                            this.references.phoneInput = e
                        }
                    }), r.createElement("div", {
                        className: "prefix_input_border"
                    })))))
                }
                ,
                this.renderCodeBlock = ()=>{
                    if (!this.state.phone)
                        return "";
                    if (!this.state.codeSent)
                        return "";
                    var e = this.getCodeBlockHeaderLabel()
                      , t = this.state.code ? y.constants.finishedClass : ""
                      , n = this.state.phone && !this.state.code
                      , i = !!this.state.code;
                    return r.createElement("div", {
                        className: "input verification_code_input"
                    }, r.createElement("div", {
                        className: "label"
                    }, e), r.createElement(m.default, {
                        text: this.getCodeBlockTooltipLabel(),
                        appearance: y.constants.tooltipAppearance,
                        position: y.constants.tooltipPosition,
                        width: y.constants.tooltipWidth,
                        marginLeft: y.constants.tooltipMarginLeft,
                        isShown: n
                    }, r.createElement(d.default, {
                        className: `verification_code _verification_code_input_tooltip dark ${t}`,
                        ref: e=>{
                            this.references.validationCodeInput = e
                        }
                        ,
                        placeholder: _.default.getLang("login_authcheck_enter_code"),
                        value: this.state.newCode,
                        readOnly: i,
                        onChange: e=>this.setState({
                            newCode: e.target.value
                        })
                    })))
                }
                ,
                this.renderPasswordBlock = ()=>{
                    if (!this.state.phone || !this.state.code)
                        return "";
                    var e = y.checkPasswordStrength(this.state.newPassword)
                      , t = this.state.newPassword ? r.createElement("div", {
                        id: "blocked_about_pass",
                        className: "blocked_pwd_level" + e
                    }) : ""
                      , n = this.state.newPassword ? r.createElement("div", {
                        className: "blocked_pass_strength blocked_about_login"
                    }, _.default.getLang(`join_pwd_level${e}`)) : ""
                      , i = !this.state.password;
                    return r.createElement("div", {
                        className: "input new_password_input"
                    }, r.createElement("div", {
                        className: "label"
                    }, _.default.getLang("login_new_password_label")), r.createElement(m.default, {
                        text: this.props.tooltips.password,
                        appearance: y.constants.tooltipAppearance,
                        position: y.constants.tooltipPosition,
                        width: y.constants.tooltipWidth,
                        marginLeft: y.constants.tooltipMarginLeft,
                        isShown: i
                    }, r.createElement(d.default, {
                        className: "dark new_password _password_input_tooltip",
                        ref: e=>{
                            this.references.passwordInput = e
                        }
                        ,
                        placeholder: _.default.getLang("login_enter_password"),
                        value: this.state.newPassword,
                        onChange: e=>this.setState({
                            newPassword: e.target.value
                        })
                    })), t, n)
                }
                ,
                this.renderMainButton = ()=>{
                    var e, t, n, i = this.areCallResetsEnabled() ? _.default.getLang("reg_validate_call_reset_button") : _.default.getLang("login_receive_code");
                    if (this.state.phone || this.state.code)
                        if (this.state.phone && !this.state.code)
                            this.state.codeSent ? (e = this.checkCode,
                            t = _.default.getLang("login_check_code"),
                            n = this.renderResendCodeButton()) : (e = this.sendCodeToBoundPhone,
                            t = i,
                            n = "");
                        else {
                            if (!this.state.phone || !this.state.code)
                                return "";
                            e = this.unblock,
                            t = _.default.getLang("login_blocked_unblock_page"),
                            n = ""
                        }
                    else
                        e = this.sendCode,
                        t = i,
                        n = "";
                    return r.createElement("div", null, r.createElement(u.default, {
                        className: "UnblockForm__mainButton",
                        loading: this.state.mainButtonLoading,
                        onClick: e,
                        ref: e=>{
                            this.references.mainButton = e
                        }
                    }, t), n)
                }
                ,
                this.renderMessage = ()=>{
                    if (!this.state.message)
                        return "";
                    var e = this.state.isError ? "error" : "";
                    return r.createElement("div", {
                        id: "unblock_box_errors_block"
                    }, r.createElement("div", {
                        className: "msg submit_error " + e,
                        dangerouslySetInnerHTML: {
                            __html: this.state.message
                        }
                    }))
                }
                ,
                this.renderContent = ()=>this.state.initialLoading ? y.renderInitialLoading() : this.state.delayedUnblockExplanation ? this.renderDelayedWaitExplanation() : this.state.delayedUnblockFinished ? this.renderDelayedUnblockFinishedScreen() : r.createElement("div", {
                    className: "UnblockForm__content__inputs"
                }, this.renderPhonePrefixBlock(), this.renderPhoneBlock(), this.renderCodeBlock(), this.renderPasswordBlock(), this.renderMainButton()),
                this.renderDelayedWaitExplanation = ()=>r.createElement("div", {
                    className: "DelayedWaitExplanation"
                }, r.createElement("div", {
                    className: "DelayedWaitExplanation__message msg submit_error ",
                    dangerouslySetInnerHTML: {
                        __html: _.default.getLang("restore_change_phone_done_wait_banned").replace("{date}", this.state.delayedUnblockExplanation)
                    }
                }), r.createElement("div", {
                    className: "DelayedWaitExplanation__progressWrap"
                }, r.createElement(u.default, {
                    appearance: "tertiary",
                    loading: this.state.resetUnblockDataButtonLoading,
                    onClick: this.resetUnblockForm
                }, _.default.getLang("login_delayed_its_not_me")))),
                this.renderDelayedUnblockFinishedScreen = ()=>r.createElement("div", {
                    id: "unblock_box_errors_block"
                }, r.createElement("div", {
                    className: "msg submit_error ",
                    dangerouslySetInnerHTML: {
                        __html: _.default.getLang("login_delayed_request_finished")
                    }
                }), r.createElement("div", {
                    className: "DelayedRequestFinished__button"
                }, r.createElement(u.default, {
                    loading: this.state.redirectToAuthButtonLoading,
                    onClick: this.redirectToAuth
                }, _.default.getLang("login_unblock_redirect_to_auth"))), r.createElement("div", {
                    className: "DelayedRequestFinished__notMeButton"
                }, r.createElement(u.default, {
                    appearance: "tertiary",
                    loading: this.state.resetUnblockDataButtonLoading,
                    onClick: this.resetUnblockForm
                }, _.default.getLang("login_delayed_its_not_me")))),
                this.render = ()=>r.createElement("div", {
                    className: "UnblockForm"
                }, r.createElement("div", {
                    className: "UnblockForm__header box_title_wrap"
                }, r.createElement("div", {
                    className: "box_x_button",
                    role: "button",
                    onClick: l.destroyComponentInBox
                }, r.createElement(v.default, null)), r.createElement("div", {
                    className: "box_title"
                }, _.default.getLang("login_blocked_call_title"))), r.createElement("div", {
                    className: "UnblockForm__content box_body clear_fix"
                }, r.createElement("div", {
                    className: "login_blocked_wrap"
                }, r.createElement("div", {
                    className: "unblock_form"
                }, r.createElement("div", {
                    className: "UnblockForm__content__header"
                }, r.createElement("div", {
                    className: "antispam_team_logo"
                }), r.createElement("div", {
                    className: "reason"
                }, _.default.getLang("login_unblock_form_explanation"))), this.renderMessage(), this.renderContent())))),
                this.state = {
                    initialLoading: !0
                },
                this.references = {
                    phoneInput: null,
                    validationCodeInput: null,
                    passwordInput: null,
                    mainButton: null
                }
            }
            setInitialState() {
                this.setState({
                    message: "",
                    isError: !1,
                    initialLoading: !0,
                    mainButtonLoading: !1,
                    noCodeButtonLoading: !1,
                    resetUnblockDataButtonLoading: !1,
                    redirectToAuthButtonLoading: !1
                })
            }
            getPhoneBlockTooltipLabel() {
                return this.areCallResetsEnabled() ? this.props.tooltips.phoneCallReset : this.props.tooltips.phone
            }
        }
        y.controller = "/al_login.php",
        y.acts = {
            getStatus: "get_unblock_process_status",
            sendCode: "send_unblock_code",
            sendCodeToBoundPhone: "send_unblock_code_to_bound_phone",
            resendCode: "resend_unblock_code",
            checkCode: "check_unblock_code",
            unblock: "unblock",
            resetUnblockForm: "reset_unblock_form"
        },
        y.constants = {
            finishedClass: "finished",
            maxCodeResentAmount: 2,
            noCodeResentAmount: 0,
            firstCountryIndex: 0,
            noResetCodeTimerEnabled: 0,
            tooltipWidth: 250,
            tooltipMarginLeft: 5,
            tooltipAppearance: "white",
            tooltipPosition: "r",
            statusSyncRetriesCount: 10,
            statusSyncRetriesTimeoutMicroseconds: 1e3,
            passwordStrengths: {
                none: -1,
                incorrectTooShort: 0,
                weakTypical: 1,
                good: 2,
                veryGood: 3,
                excellent: 4,
                incorrectHasSpaces: 5
            }
        },
        y.refreshAuthDataAndRedirectToFeed = (e,t,n,r)=>{
            var o = utilsNode.appendChild((0,
            s.ce)("div", {
                innerHTML: '\n      <form id="login_block_auth_form" target="login_block_auth_frame" action="" method="POST">\n        <input type="hidden" name="_origin" id="login_server_origin" />\n        <input type="hidden" name="email" id="login_block_email" />\n        <input type="hidden" name="pass" id="login_block_pass" />\n      </form>\n      <iframe name="login_block_auth_frame" id="login_block_auth_frame"></iframe>'
            }))
              , a = window.onLoginDone
              , c = (0,
            s.ge)("login_block_auth_form");
            c.action = (0,
            g.getLoginDomain)() + "?act=login&ip_h=" + t + "&lg_domain_h=" + e + "&redirect=1&role=al_frame",
            (0,
            s.val)("login_block_email", (0,
            i.winToUtf)(n)),
            (0,
            s.val)("login_block_pass", (0,
            i.winToUtf)(r)),
            (0,
            s.val)("login_server_origin", cur.serverOrigin),
            c.submit(),
            cur.destroy.push((()=>{
                (0,
                s.re)(o),
                window.onLoginDone = a
            }
            )),
            window.onLoginDone = ()=>{
                (0,
                s.re)(o),
                nav.go("/feed", !0)
            }
        }
        ,
        y.isBadPassword = e=>{
            var t = [y.constants.passwordStrengths.incorrectHasSpaces, y.constants.passwordStrengths.incorrectTooShort]
              , n = y.checkPasswordStrength(e);
            return t.includes(n)
        }
        ,
        y.checkPasswordStrength = e=>{
            var t = y.constants.passwordStrengths.none
              , n = ["qwerty", "", "gfhjkm", "", "password", "abc123", "fuckyou", "123abc", "baseball", "football", "soccer", "monkey", "liverpool", "princess", "jordan", "slipknot", "superman", "iloveyou"];
            if (e.length < 6)
                t = y.constants.passwordStrengths.incorrectTooShort;
            else if (/\s/.test(e))
                t = y.constants.passwordStrengths.incorrectHasSpaces;
            else if (e.match(/^\d+$/) || n.indexOf(e) >= 0 || e.substr(-1).match(/\d/) && n.indexOf(e.substr(0, e.length - 1)) >= 0)
                t = y.constants.passwordStrengths.weakTypical;
            else {
                for (var r = [/[^a-z]/g, /[^A-Z]/g, /[^-]/g, /[^-]/g, /[^0-9]/g, /[a-zA-Z--0-9]/g], i = [], o = 0, s = 0, c = r.length; s < c; ++s) {
                    var _ = e.replace(r[s], "").length;
                    _ && (_ > 1 && o++,
                    i.push({
                        group: s,
                        cnt: _
                    }))
                }
                if (i.length < 3 && i[i.length - 1].group != r.length - 1 && o < 2 && (t = y.constants.passwordStrengths.good),
                (o > 2 || i.length > 2 && i[i.length - 1].group == r.length - 1) && (t = y.constants.passwordStrengths.excellent),
                t < 0 && o > 1) {
                    var l = e.replace(r[r.length - 1], "");
                    l.length > 1 && l.replace(new RegExp((0,
                    a.escapeRE)(l.charAt(0)),"g"), "").length && (t = y.constants.passwordStrengths.excellent)
                }
                t < 0 && (t = y.constants.passwordStrengths.veryGood),
                t && t < 3 && e.length > 13 && t++
            }
            return t
        }
        ,
        y.renderInitialLoading = ()=>r.createElement("div", {
            className: "InitialLoading"
        }, r.createElement(f.default, null))
    }
    ,
    378486: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>s
        });
        n(175115);
        var r = n(667294)
          , i = n(973935)
          , o = (n(45697),
        n(483295))
          , a = n(49030);
        class s extends r.Component {
            constructor(e) {
                super(e),
                this.addTooltip = e=>{
                    if (this.el) {
                        var t = this.props
                          , n = t.text
                          , r = t.position
                          , i = t.align
                          , o = t.marginTop
                          , s = t.marginLeft
                          , c = (0,
                        a.default)(this.el);
                        this.update({
                            text: n,
                            position: r,
                            align: i,
                            rect: c,
                            marginTop: o,
                            marginLeft: s
                        })
                    }
                }
                ,
                this.removeTooltip = e=>{
                    document.activeElement !== this.inputEl && this.update({
                        remove: !0
                    })
                }
                ,
                this.renderTooltip = ()=>{
                    if (!this.state.tooltip)
                        return null;
                    var e = this.state.tooltip
                      , t = e.x
                      , n = e.y
                      , i = e.position
                      , a = e.align
                      , s = e.text
                      , c = e.removed
                      , _ = this.props
                      , l = _.appearance
                      , u = _.width
                      , d = (0,
                    o.classNames)("UnblockTooltip", `UnblockTooltip--${i}`, `UnblockTooltip--${l}`, {
                        "UnblockTooltip--removed": !!c,
                        [`UnblockTooltip--align-${a}`]: "t" === i || "b" === i
                    })
                      , p = {
                        top: n,
                        left: t
                    }
                      , h = u ? {
                        width: u
                    } : {};
                    return r.createElement("div", {
                        className: d,
                        style: p
                    }, r.createElement("div", {
                        className: "UnblockTooltip__in",
                        style: h,
                        dangerouslySetInnerHTML: {
                            __html: s
                        }
                    }))
                }
                ,
                this.state = {}
            }
            componentDidMount() {
                this.el = i.findDOMNode(this),
                this.inputEl = "INPUT" === this.el.tagName ? this.el : this.el.getElementsByTagName("input")[0],
                this.backgroundElement = document.getElementById("box_layer_wrap"),
                this.el.addEventListener("mouseenter", this.addTooltip),
                this.el.addEventListener("mouseleave", this.removeTooltip),
                this.inputEl.addEventListener("focus", this.addTooltip),
                this.inputEl.addEventListener("blur", this.removeTooltip),
                this.backgroundElement.addEventListener("scroll", this.addTooltip),
                window.addEventListener("resize", this.addTooltip)
            }
            componentWillUnmount() {
                this.el.removeEventListener("mouseenter", this.addTooltip),
                this.el.removeEventListener("mouseleave", this.removeTooltip),
                this.inputEl.removeEventListener("focus", this.addTooltip),
                this.inputEl.removeEventListener("blur", this.removeTooltip),
                this.backgroundElement.addEventListener("scroll", this.addTooltip),
                window.removeEventListener("resize", this.addTooltip)
            }
            update(e) {
                var t = e.position
                  , n = e.align
                  , r = e.text
                  , i = e.rect
                  , o = e.marginTop
                  , a = e.marginLeft
                  , s = !i || 0 === i.top && 0 === i.left;
                if (!0 !== e.remove && this.props.isShown && !s) {
                    var c = i.left
                      , _ = i.top;
                    switch (t) {
                    case "t":
                        c += .5 * i.width;
                        break;
                    case "r":
                        c += i.width,
                        _ += .5 * i.height;
                        break;
                    case "b":
                        c += .5 * i.width,
                        _ += i.height;
                        break;
                    case "l":
                        _ += .5 * i.height
                    }
                    c = Math.round(c + a),
                    _ = Math.round(_ + o),
                    this.setState({
                        tooltip: {
                            position: t,
                            align: n,
                            text: r,
                            x: c,
                            y: _
                        }
                    })
                } else
                    this.setState({
                        tooltip: Object.assign({}, this.state.tooltip, {
                            removed: !0
                        })
                    })
            }
            render() {
                var e = this.renderTooltip();
                return e ? (this.defaultNode || "undefined" == typeof window || (this.defaultNode = document.createElement("div"),
                document.body.appendChild(this.defaultNode)),
                r.createElement(r.Fragment, null, this.props.children, i.createPortal(e, this.defaultNode))) : this.props.children
            }
        }
        s.defaultProps = {
            appearance: "black",
            position: "b",
            align: "center",
            marginTop: 0,
            marginLeft: 0
        }
    }
    ,
    468770: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initLoginBoxForm: ()=>E,
            initLoginCombinedBoxForm: ()=>y,
            Login: ()=>w
        });
        var r = n(7739)
          , i = n(786067)
          , o = n(386409)
          , a = n(159121)
          , s = n(100416)
          , c = n(486125)
          , _ = n(695724)
          , l = n(667294)
          , u = n(499284)
          , d = n(481117)
          , p = n(315544)
          , h = n(699937)
          , m = n(528958)
          , f = n(70488)
          , g = n(985048)
          , v = n(559367);
        function E(e) {
            e && new m.LoginBoxForm(e)
        }
        function y(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = e.querySelector('.LoginRecentBox [name="ul"]')
              , r = e.querySelector(".LoginRecentBox__alternative")
              , i = e.querySelector(".LoginRecentBox .LoginBox__title");
            r.addEventListener("click", (t=>{
                t.preventDefault(),
                e.classList.add("LoginCombinedBox--standard")
            }
            ));
            var o = new h.LoginRecentUsersGallery(e.querySelector(".LoginRecentBox__users"));
            o.onChange = e=>{
                var r = t.users[e];
                r && (i.innerHTML = r.title,
                n && (n.value = r.encrypted))
            }
            ,
            o.init(),
            e.querySelectorAll(".LoginRecentBox__user").forEach(((e,t)=>{
                e.addEventListener("click", (()=>{
                    o.setIndex(t)
                }
                ))
            }
            ))
        }
        var w = {
            init() {
                (0,
                _.each)((0,
                p.geByClass)("big_text", "login_form_wrap"), ((e,t)=>{
                    (0,
                    s.placeholderInit)(t)
                }
                )),
                setTimeout(p.elfocus.pbind(!(0,
                p.isVisible)("email") || (0,
                p.val)("email") ? "pass" : "email"), 0);
                var e = (0,
                p.ge)("login_form")
                  , t = (0,
                p.ge)("email")
                  , n = (0,
                p.ge)("pass")
                  , r = (0,
                p.val)("login_ul");
                return e.onsubmit = ()=>{
                    if (!window.submitQuickLoginForm)
                        return !0;
                    if (!r && !(0,
                    _.trim)(t.value))
                        return (0,
                        o.notaBene)(t),
                        !1;
                    if (!(0,
                    _.trim)(n.value))
                        return (0,
                        o.notaBene)(n),
                        !1;
                    var e = {
                        expire_input: (0,
                        p.val)("expire_input")
                    };
                    r && (e.ul = r);
                    var i = (0,
                    g.isEmail)(t.value) ? f.RegistrationItemEventTypes.INPUT_EMAIL : f.RegistrationItemEventTypes.INPUT_PHONE;
                    return f.registrationItemStat.logEvent(i, cur.eventScreen, void 0, {
                        force: !0
                    }),
                    submitQuickLoginForm(t.value, n.value, {
                        prg: "login_button",
                        params: e
                    }),
                    !1
                }
                ,
                window.loginByCredential && !r && (t.onclick = loginByCredential,
                n.onclick = loginByCredential),
                !0
            },
            initBlockedPage() {
                r.FAQTutorial.tryInit()
            },
            initBox() {
                var e = (0,
                c.curBox)();
                e.changed = !0,
                e.setOptions({
                    width: 560,
                    onClean: ()=>{}
                    ,
                    hideButtons: !0,
                    bodyStyle: "padding: 0"
                }),
                E(document.querySelector(".LoginBox"))
            },
            initVkId() {
                var e = document.querySelector(".VkIdLogin");
                e && (0,
                v.initVkIdForm)(e)
            },
            changeMail(e, t, n) {
                var r = (0,
                _.trim)((0,
                p.val)("login_new_mail"))
                  , s = 1;
                return r ? (e && (n = cur.changeMailHash),
                -1 == r.indexOf("@") ? (0,
                a.showMsg)("login_change_mail_error", (0,
                i.getLang)("reg0_error_bad_email"), "error") : (e && (s = 0),
                void ajax.post("/login?act=a_change_mail", {
                    newmail: r,
                    hash: n,
                    from_page: s
                }, {
                    onDone(t) {
                        var n = "login_change_mail_form";
                        e && (n = "login_change_mail_box",
                        (0,
                        c.curBox)().removeButtons(),
                        (0,
                        c.curBox)().addButton((0,
                        i.getLang)("global_cancel"), null, "no")),
                        (0,
                        p.val)(n, t)
                    },
                    onFail: e=>((0,
                    a.showMsg)("login_change_mail_error", e, "error"),
                    !0),
                    showProgress: lockButton.pbind(t),
                    hideProgress: unlockButton.pbind(t)
                }))) : (0,
                o.notaBene)("login_new_mail")
            },
            initChangeMailBox() {
                (0,
                c.curBox)().removeButtons(),
                (0,
                c.curBox)().addButton((0,
                i.getLang)("global_cancel"), null, "no"),
                (0,
                c.curBox)().addButton((0,
                i.getLang)("reg0_change_mail"), w.changeMail.pbind(1)),
                (0,
                p.elfocus)("change_mail_new")
            },
            isBanExpired: ()=>cur.unblockDate < Date.now() / 1e3,
            canUnblockFast: ()=>!0 === cur.canUnblockFast,
            showUnblockForm() {
                (0,
                d.showComponentInBox)(l.createElement(u.default, {
                    tooltips: {
                        phone: cur.phoneTooltip,
                        phoneCallReset: cur.phoneCallResetTooltip,
                        code: cur.verificationCodeTooltip,
                        codeCallReset: cur.verificationCodeCallResetTooltip,
                        password: cur.passwordTooltip
                    }
                }))
            },
            fastUnblock: e=>{
                var t = {
                    act: "fast_unblock",
                    hash: e
                }
                  , n = document.getElementsByClassName("unblock_button--fast")[0];
                n ? ajax.post("/al_login.php", t, {
                    onDone: function() {
                        (0,
                        c.showDoneBox)((0,
                        i.getLang)("login_fast_unblocked_wait_description"), {
                            out: 5e3
                        }),
                        nav.reload()
                    },
                    onFail: function(e) {
                        return unlockButton(n),
                        (0,
                        c.showDoneBox)(e),
                        !0
                    },
                    showProgress: ()=>lockButton(n)
                }) : showFastBox((0,
                i.getLang)("global_error"))
            }
            ,
            showDeletePageBox() {
                showFastBox((0,
                i.getLang)("login_blocked_delete_page_header"), (0,
                i.getLang)("login_blocked_sure_delete_page_question"), (0,
                i.getLang)("box_yes"), (()=>{
                    ajax.post("al_settings.php", {
                        act: "a_deactivate",
                        hash: cur.deactivate_hash
                    }, {
                        onDone: e=>{
                            (0,
                            c.showDoneBox)(e),
                            nav.go("/id" + vk.id)
                        }
                        ,
                        onFail: e=>{
                            (0,
                            c.showDoneBox)(e),
                            (0,
                            c.curBox)().hideProgress()
                        }
                    })
                }
                ), (0,
                i.getLang)("box_no"))
            }
        }
    }
    ,
    790008: (e,t,n)=>{
        "use strict";
        n.d(t, {
            processAliExpressMiniAppLinkClickEvent: ()=>a
        });
        n(21466),
        n(283946);
        var r = n(718253)
          , i = n(19331)
          , o = n(961540);
        function a(e) {
            var t = e.target || e.srcElement;
            if (t && t.href) {
                var n, a, c = t.href;
                try {
                    n = decodeURIComponent(c)
                } catch (e) {
                    return console.error(e, "Error decoding URL: " + c),
                    !1
                }
                if ((0,
                i.partConfigEnabled)("aliexpress_app_links_redirect_web_links")) {
                    if (a = function(e) {
                        var t = [new RegExp(`(https?://)?${o.VK_SITE_REGEX_SOURCE_UNSAFE}/app${r.MARKET_ALIEXPRESS_APP_ID}(_6492794)?(#|/|#/)?$`), new RegExp(`(https?://)?${o.VK_SITE_REGEX_SOURCE_UNSAFE}/${r.MARKET_ALIEXPRESS_APP_NAME}(#|/|#/)?$`)];
                        for (var n in t)
                            if (e.match(t[n]))
                                return "/away.php?to=" + encodeURIComponent(r.MARKET_ALIEXPRESS_HOME_URL);
                        return ""
                    }(n),
                    a)
                        return s(a, t),
                        !0
                } else if (a = function(e) {
                    var t = e.match(new RegExp(`/app${r.MARKET_ALIEXPRESS_APP_ID}#(?:.+)product_id=(d+)`));
                    if (t && t[1])
                        return "/away.php?to=" + encodeURIComponent(`${r.MARKET_ALIEXPRESS_HOME_URL}/item/${t[1]}.html`)
                }(n),
                a)
                    return s(a, t),
                    !0
            }
            return !1
        }
        function s(e, t) {
            "_blank" === t.getAttribute("target") && void 0 !== t.open ? t.open(e) : window.location.href = e
        }
    }
    ,
    379633: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>_
        });
        n(940851),
        n(296253);
        var r = n(189005)
          , i = n(786067)
          , o = n(315544)
          , a = n(654612)
          , s = n(486125);
        class c extends r.default {
            constructor(e, t) {
                super(e, t),
                this.canBeEnabled().then((e=>{
                    e && ((0,
                    o.addClass)(document.head, "push_notifier_supported"),
                    this.handlerMessagesLP = this.handlerMessagesLP.bind(this))
                }
                ))
            }
            isSupported() {
                return super.isSupported() && (browser.chrome || browser.mozilla)
            }
            handlerMessagesLP() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}
                  , t = e.type
                  , n = e.peerId
                  , r = e.upToId;
                "event_read_inbound" === t && this.sw.action("removeMessageNotification", {
                    peerId: n,
                    msgId: r
                })
            }
            handlerPopup(e, t) {
                var n = (0,
                s.curBox)();
                n && (0,
                o.hide)(n.bodyNode),
                this.setupSubscription().then((()=>this.setState(e, t, "popup"))).then((()=>{
                    n && n.hide()
                }
                )).catch((e=>{
                    r.default.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS === e ? ((0,
                    o.show)(n().bodyNode),
                    this.showPopupAllowNotification()) : (0,
                    a.showFastBox)((0,
                    i.getLang)("global_error"), (0,
                    i.getLang)("notifications_native_common_error"))
                }
                ))
            }
            showPopupAllowNotification() {
                (0,
                a.showBox)(r.default.SERVER_URL, {
                    act: "popup_allow_notification"
                }, {
                    params: {
                        hideButtons: !0
                    },
                    containerClass: "PushNotifierPopup__popup-box_type--allow-notification"
                })
            }
            showPopupSuggestion() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "feed";
                (0,
                a.showBox)(r.default.SERVER_URL, {
                    act: "popup_suggestion",
                    old: Number(ls.get("im_notify_flag")),
                    module: e
                }, {
                    params: {
                        hideButtons: !0,
                        width: 400
                    },
                    containerClass: "PushNotifierPopup__popup-box_type--suggest",
                    onDone: ()=>{
                        ajax.post(r.default.SERVER_URL, {
                            act: "open_popup"
                        }, {
                            onFail: ()=>!0
                        })
                    }
                })
            }
            _removeLongPollListener() {
                this.lp && this.lp.offData(this.handlerMessagesLP),
                this.lp = null
            }
            _addLongPollListener() {
                !this.lp && window.Notifier && (this.lp = Notifier.getLpInstance(),
                this.lp && this.lp.onData(this.handlerMessagesLP))
            }
            setState(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "settings";
                return new Promise(((i,o)=>{
                    ajax.post(r.default.SERVER_URL, {
                        act: "a_toggle_state",
                        state: e,
                        hash: t,
                        from: n
                    }, {
                        onDone: e=>e ? i() : o(),
                        onFail: o
                    })
                }
                ))
            }
            update() {
                return super.update().then((()=>this._addLongPollListener()))
            }
            unsubscribe(e) {
                return super.unsubscribe(e).then((()=>this._removeLongPollListener()))
            }
        }
        const _ = c
    }
    ,
    189005: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>l
        });
        n(83276),
        n(991181),
        n(446964),
        n(940851),
        n(296253);
        var r = n(19331)
          , i = n(900421)
          , o = n(22463)
          , a = n(26330)
          , s = "push_notifier_endpoint"
          , c = "push_notifier_subscribed_ts";
        class _ {
            constructor(e, t) {
                this.sw = e,
                this.SWClient = t,
                vk.id && this.canBeEnabled().then((e=>{
                    e && (this.listenPermission(),
                    this.loadEndpoint() && this.update().then(this.checkMessageState.bind(this)))
                }
                ))
            }
            static getPermission() {
                return Notification.permission
            }
            cleanNotification() {
                this.sw.action("cleanNotification")
            }
            canBeEnabled() {
                return Promise.resolve(this.isSupported())
            }
            isSupported() {
                return "PushManager"in window && "Notification"in window && this.SWClient.isSupported()
            }
            loadEndpoint() {
                return a.default.get(s + vk.id) || !1
            }
            saveEndpoint(e) {
                a.default.set(s + vk.id, e || !1)
            }
            action(e, t) {
                return this.sw.action(e, t)
            }
            _needupdate(e) {
                var t = Date.now()
                  , n = this.loadEndpoint()
                  , r = a.default.get(c + vk.id)
                  , i = !1;
                return (n !== e.endpoint || !r || t - r > 6e4) && (a.default.set(c + vk.id, t),
                i = !0),
                i
            }
            listenPermission() {
                (0,
                r.partConfigEnabled)("push_notifier") && navigator.permissions && navigator.permissions.query && navigator.permissions.query({
                    name: "notifications"
                }).then((e=>{
                    e.onchange = ()=>this.update()
                }
                ))
            }
            update() {
                return this.updatePermission().then((e=>e === _.PUSH_NOTIFIER_PERMISSION_GRANTED ? this.subscribe().catch((e=>{
                    e !== _.SUBSCRIBE_ERROR_NETWORK && (0,
                    o.error)("can not update subscribe")
                }
                )) : Promise.reject("premession_not_granted"))).catch(o.error)
            }
            updatePermission() {
                var e = _.getPermission();
                if (e !== _.PUSH_NOTIFIER_PERMISSION_GRANTED) {
                    var t = this.loadEndpoint();
                    if (t)
                        return this.unsubscribe(t).then((()=>e))
                }
                return Promise.resolve(e)
            }
            processSubscribe(e) {
                return e.subscribe({
                    userVisibleOnly: !0,
                    applicationServerKey: (0,
                    i.urlBase64ToUint8Array)(_.SERVER_KEY)
                })
            }
            setupSubscription() {
                return new Promise(((e,t)=>{
                    var n = _.getPermission()
                      , r = ()=>{
                        this.subscribe(!0).then((()=>{
                            e()
                        }
                        )).catch((()=>{
                            t()
                        }
                        ))
                    }
                    ;
                    n !== _.PUSH_NOTIFIER_PERMISSION_DENIED ? n !== _.PUSH_NOTIFIER_PERMISSION_GRANTED ? n === _.PUSH_NOTIFIER_PERMISSION_DEFAULT && this.requestPermission().then((e=>{
                        e === _.PUSH_NOTIFIER_PERMISSION_GRANTED ? r() : t()
                    }
                    )) : r() : t(_.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS)
                }
                ))
            }
            subscribe(e) {
                return this.sw.register().then((e=>{
                    var t = e.pushManager;
                    return t.getSubscription().then((e=>{
                        if (e) {
                            var n = e.expirationTime;
                            return n && Date.now() > n - 432e6 ? this.unsubscribe(this.loadEndpoint()).then((()=>this.processSubscribe(t))) : e
                        }
                        return this.processSubscribe(t)
                    }
                    ))
                }
                )).then((t=>new Promise(((n,r)=>{
                    if (e || this._needupdate(t)) {
                        var i = t.getKey("p256dh")
                          , o = t.getKey("auth");
                        window.ajax.post(_.SERVER_URL, {
                            act: "a_subscribe",
                            hash: this.sw.getPushHash(),
                            endpoint: t.endpoint,
                            key: i ? btoa(String.fromCharCode.apply(null, new Uint8Array(t.getKey("p256dh")))) : null,
                            token: o ? btoa(String.fromCharCode.apply(null, new Uint8Array(t.getKey("auth")))) : null
                        }, {
                            onDone: e=>{
                                e ? (this.saveEndpoint(t.endpoint),
                                n()) : r()
                            }
                            ,
                            onFail: ()=>(r(_.SUBSCRIBE_ERROR_NETWORK),
                            !0)
                        })
                    } else
                        n()
                }
                ))))
            }
            unsubscribe(e) {
                return this.sw.register().then((t=>t.pushManager.getSubscription().then((t=>t ? t.unsubscribe().then((t=>t ? new Promise(((t,n)=>{
                    ajax.post(_.SERVER_URL, {
                        act: "a_unsubscribe",
                        endpoint: e
                    }, {
                        onDone: e=>{
                            e ? (this.saveEndpoint(!1),
                            t()) : n()
                        }
                    })
                }
                )) : Promise.reject("ERROR: can not unsubscribe"))) : (this.saveEndpoint(!1),
                Promise.reject("ERROR: no subscription"))))))
            }
            requestPermission() {
                var e = _.getPermission();
                return e === _.PUSH_NOTIFIER_PERMISSION_DEFAULT ? new Promise((function(e, t) {
                    var n = Notification.requestPermission((function(t) {
                        e(t)
                    }
                    ));
                    n instanceof Promise && n.then(e, t)
                }
                )) : Promise.resolve(e)
            }
            checkMessageState() {
                return new Promise((e=>setTimeout(e, 5e3))).then((()=>this.action("getMessagesMetaData"))).then((e=>"object" == typeof e && Object.keys(e).length ? new Promise(((t,n)=>{
                    window.ajax.post(_.SERVER_URL, {
                        act: "a_update_messages_state",
                        data: Object.entries(e)
                    }, {
                        onDone: e=>{
                            e ? t(e) : n("ERROR: act error")
                        }
                        ,
                        onFail: ()=>(n("ERROR: network error"),
                        !0)
                    })
                }
                )) : Promise.resolve({}))).then((e=>{
                    try {
                        return JSON.parse(e)
                    } catch (e) {
                        return {}
                    }
                }
                )).then((e=>this.action("updateMessageNotifications", e))).catch((e=>(0,
                o.error)(e)))
            }
        }
        _.SERVER_KEY = "BPrntRk2W1_ISFwlgY-vz9tQDg9i1oSQ3-N8xyjdbNAbIOdZIGFdh5FlO7zn730UwU9Sayoec-Fpqq4JZFTyv60",
        _.SERVER_URL = "push_notifier",
        _.PUSH_NOTIFIER_PERMISSION_GRANTED = "granted",
        _.PUSH_NOTIFIER_PERMISSION_DEFAULT = "default",
        _.PUSH_NOTIFIER_PERMISSION_DENIED = "denied",
        _.PUSH_NOTIFIER_BLOCKED_BY_BROWSER_SETTINGS = "BLOCKED_BY_BROWSER_SETTINGS",
        _.SUBSCRIBE_ERROR_NETWORK = "SUBSCRIBE_ERROR_NETWORK";
        const l = _
    }
    ,
    291587: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AppOrderBox: ()=>u
        });
        var r = n(315544)
          , i = n(786067)
          , o = n(695724)
          , a = n(486125)
          , s = n(386409)
          , c = n(654612)
          , _ = n(982452)
          , l = n(965030);
        class u {
            static instantSkipAppOrder(e, t) {
                var n = (0,
                r.gpeByClass)("payments_instant_progress_wrap", e)
                  , i = {
                    act: "a_order",
                    aid: cur.paymentsOrderAppId,
                    order_id: cur.paymentsOrderId,
                    votes: cur.paymentsPreferVotes,
                    test_mode: cur.paymentsOrderTestMode,
                    _skip_instant: t || 1,
                    hash: cur.paymentsOrderHash
                };
                void 0 !== cur.checkedMaxVotes && (i.checked_max_votes = cur.checkedMaxVotes),
                ajax.post("al_apps.php", i, {
                    forceDone: 1,
                    onDone: ()=>{
                        cur.paymentsCheckOrderCnt = 1,
                        (0,
                        a.curBox)().hide(),
                        cur.paymentsCheckOrderCnt = 0,
                        cur.fromInstantPay = !0
                    }
                    ,
                    showProgress: ()=>n && n.classList.add("loading"),
                    hideProgress: ()=>n && n.classList.remove("loading")
                })
            }
            static processOrder(e, t) {
                t || (t = (0,
                a.curBox)());
                var n = (0,
                r.isVisible)("payments_box") ? 2 : 0
                  , o = !1;
                e || (e = n),
                n && (o = t.btns.ok[0],
                (0,
                s.lockButton)(o));
                var d = {
                    act: "a_order",
                    aid: cur.paymentsOrderAppId,
                    order_id: cur.paymentsOrderId,
                    votes: cur.paymentsPreferVotes,
                    from: nav.objLoc[0],
                    test_mode: cur.paymentsOrderTestMode,
                    _votes_ok: e,
                    hash: cur.paymentsOrderHash
                };
                1 == e && cur.paymentsOrderBillPeriod && (d.payment_type = cur.votesType),
                !cur.paymentsOrderBillPeriod && (0,
                r.ge)("payments_order_auto_confirm") && (d.auto_confirm = (0,
                s.isChecked)("payments_order_auto_confirm")),
                ajax.post("al_apps.php", d, {
                    forceDone: 3 == +e ? 1 : 0,
                    onDone: (d,p,h,m,f)=>{
                        if (m && -1e3 !== m && (cur.votesBoxOptions = m),
                        3 == e && -1e3 == h)
                            return l.Gifts.processBoxOptions((0,
                            a.curBox)(), m),
                            cur.paymentsCheckOrderCnt = 1,
                            t.hide(),
                            void (cur.paymentsCheckOrderCnt = 0);
                        if (0 === h || h > 0)
                            return cur.paymentsPreferVotes = 1,
                            n ? cur.paymentsShowBoxError(p) : (t.hide(),
                            (0,
                            c.showFastBox)((0,
                            i.getLang)("global_error"), p)),
                            void ((cur.paymentsOrderBillPeriod || f) && cur.onSubscriptionFail ? cur.onSubscriptionFail(h) : cur.onAppOrderFail && cur.onAppOrderFail(h));
                        if (d.result) {
                            var g = (0,
                            a.curBox)();
                            return cur.isPaymentsAppOrder = !1,
                            g && g.hide(),
                            (0,
                            a.showDoneBox)(p),
                            d.balance && (0,
                            _.updateMoney)(d.balance),
                            void (cur.onSubscriptionDone && d.subscriptionStatus && (cur.onSubscriptionDone(d.subscriptionStatus),
                            cur.onSubscriptionDone = !1))
                        }
                        var v = d.orderId;
                        if (v) {
                            p && (t = (0,
                            c.showFastBox)("", p)).setOptions({
                                title: !1,
                                width: 520,
                                bodyStyle: "padding: 0;",
                                hideButtons: !0
                            }),
                            o && (0,
                            s.unlockButton)(o),
                            cur.isPaymentsAppOrder = !1,
                            cur.paymentsOrderId = v,
                            d.subscriptionId && (cur.paymentsSubscriptionId = d.subscriptionId),
                            cur.paymentsOrderCheckHash = d.checkHash;
                            var E = (0,
                            i.getLang)("payments_waiting_app_order_complete");
                            (0,
                            r.ge)("payments_box_progress_msg_wrap") ? ((0,
                            r.val)("payments_box_progress_msg_wrap", `<span id="payments_box_progress_msg">${E}</span>`),
                            cur.paymentsShowProgress()) : (0,
                            r.val)("apps_paymentbox_progress_msg_wrap", E),
                            cur.paymentsCheckOrderCnt = 0,
                            cur.paymentsCheckOrderInt = setInterval(u.checkOrder, 2e3)
                        } else
                            cur.paymentGetOrderItemTO = setTimeout(u.processOrder.pbind(!1, t), 1e3)
                    }
                    ,
                    onFail: function(e) {
                        return !e || (cur.onSubscriptionFail ? cur.onSubscriptionFail() : cur.onAppOrderFail && cur.onAppOrderFail(),
                        (0,
                        r.isVisible)("payments_box") ? cur.paymentsShowBoxError(e) : (t.hide(),
                        (0,
                        c.showFastBox)((0,
                        i.getLang)("global_error"), e)),
                        !0)
                    }
                })
            }
            static checkOrder() {
                if (15 == cur.paymentsCheckOrderCnt)
                    (0,
                    r.ge)("payments_box_progress_msg").innerHTML = (0,
                    i.getLang)("payments_waiting_payment_complete_still");
                else if (cur.paymentsCheckOrderCnt > 30)
                    return clearInterval(cur.paymentsCheckOrderInt),
                    (0,
                    a.curBox)().hide(),
                    void (0,
                    c.showFastBox)((0,
                    i.getLang)("payments_app_order_box_title"), (0,
                    i.getLang)("payments_app_add_votes_delay"), (0,
                    i.getLang)("global_close"), (()=>{
                        cur.paymentsOrderBillPeriod && cur.onSubscriptionCancel ? cur.onSubscriptionCancel() : cur.onAppOrderCancel && cur.onAppOrderCancel(),
                        (0,
                        a.curBox)().hide()
                    }
                    ));
                cur.paymentsCheckOrderCnt++,
                ajax.post("al_apps.php", {
                    act: "a_check_order",
                    aid: cur.paymentsOrderAppId,
                    order_id: cur.paymentsOrderId,
                    test_mode: cur.paymentsOrderTestMode,
                    from: nav.objLoc[0],
                    hash: cur.paymentsOrderCheckHash
                }, {
                    onDone: (e,t,n,r,i)=>{
                        e && ((0,
                        a.curBox)() && (0,
                        a.curBox)().hide(),
                        clearInterval(cur.paymentsCheckOrderInt),
                        cur.paymentsCheckOrderCnt = 0,
                        window.toggleFlash(!1),
                        (0,
                        a.showDoneBox)(t, {
                            out: 1e3,
                            callback: ()=>{
                                window.toggleFlash(!0)
                            }
                        }),
                        n && (0,
                        _.updateMoney)(n),
                        1 == e ? (cur.paymentsOrderBillPeriod && cur.onSubscriptionSuccess ? (cur.onSubscriptionSuccess(cur.paymentsSubscriptionId),
                        TopNotifier && TopNotifier.invalidate()) : cur.onAppOrderSuccess && cur.onAppOrderSuccess(cur.paymentsOrderId),
                        cur.onSubscriptionDone && i && (cur.onSubscriptionDone(i),
                        cur.onSubscriptionDone = !1)) : cur.paymentsOrderBillPeriod && cur.onSubscriptionFail ? cur.onSubscriptionFail(r) : cur.onAppOrderFail && cur.onAppOrderFail(r))
                    }
                    ,
                    onFail: function(e) {
                        return clearInterval(cur.paymentsCheckOrderInt),
                        cur.paymentsShowBoxError(e),
                        !0
                    }
                })
            }
            static initialize(e, t, n, r, i, a, s) {
                (0,
                o.extend)(cur, {
                    isPaymentsAppOrder: !0,
                    paymentsAuthPayment: !1,
                    paymentsOrderNotice: !1,
                    paymentsOrderId: e,
                    paymentsOrderAppId: t,
                    paymentsOrderTestMode: n,
                    paymentsOrderHash: r,
                    paymentsPreferVotes: i,
                    paymentsOrderDiscount: a,
                    paymentsOrderBillPeriod: s
                })
            }
        }
    }
    ,
    962857: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MoneyTransfer: ()=>R
        });
        n(175115),
        n(991181),
        n(579665),
        n(95767),
        n(530522),
        n(66108),
        n(296253),
        n(59357),
        n(283946),
        n(21466);
        var r = n(386409)
          , i = n(787910)
          , o = n(40906)
          , a = n(100416)
          , s = n(49535)
          , c = n(486125)
          , _ = n(654612)
          , l = n(315544)
          , u = n(159121)
          , d = n(982452)
          , p = n(695724)
          , h = n(787481)
          , m = n(460615)
          , f = n(786067)
          , g = n(376624)
          , v = n(840774)
          , E = n(897213)
          , y = n(182804)
          , w = n(376852)
          , b = n(619143)
          , C = n(961540)
          , T = n(124041);
        function D() {
            return D = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var r in n)
                        Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r])
                }
                return e
            }
            ,
            D.apply(this, arguments)
        }
        function A(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var n = []
                  , r = !0
                  , i = !1
                  , o = void 0;
                try {
                    for (var a, s = e[Symbol.iterator](); !(r = (a = s.next()).done) && (n.push(a.value),
                    !t || n.length !== t); r = !0)
                        ;
                } catch (e) {
                    i = !0,
                    o = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (i)
                            throw o
                    }
                }
                return n
            }(e, t) || S(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function S(e, t) {
            if (e) {
                if ("string" == typeof e)
                    return P(e, t);
                var n = Object.prototype.toString.call(e).slice(8, -1);
                return "Object" === n && e.constructor && (n = e.constructor.name),
                "Map" === n || "Set" === n ? Array.from(n) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? P(e, t) : void 0
            }
        }
        function P(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var n = 0, r = new Array(t); n < t; n++)
                r[n] = e[n];
            return r
        }
        var O = 1
          , I = 2
          , M = -1
          , R = {
            initHandlers() {
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/receive_method_change", (e=>{
                    var t = e.payload.event.target;
                    if (!(0,
                    l.hasClass)(t, "disabled")) {
                        var n = e.payload.dataAttrs
                          , r = n.value
                          , i = n.name;
                        R.onReceiveMethodChange(t, r, i)
                    }
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/in_chat_focus_amount", (()=>{
                    (0,
                    l.elfocus)("transfer_amount")
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/check_user_message", (()=>{
                    R.checkUserMessage()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/show_hint", (e=>{
                    (0,
                    w.showHint)(e.payload.event.target)
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/send", (e=>{
                    R.send(Boolean(e.payload.dataAttrs.newWindow))
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/check_participate", (e=>{
                    (0,
                    r.checkbox)(e.payload.event.target),
                    R.checkRequestParticipate()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/check", (e=>{
                    (0,
                    r.checkbox)(e.payload.event.target)
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/check_auto_accept", (e=>{
                    (0,
                    r.checkbox)(e.payload.event.target),
                    R.checkAutoAccept()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/about", (e=>{
                    R.aboutBox(e.payload.dataAttrs.aboutKey)
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/history", (()=>{
                    R.historyBox()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/hide_pin_box", (()=>{
                    R.hidePinBox()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/check_vk_pay_offer", (()=>{
                    R.checkVkPayOfferBox()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/clean_amount", (e=>{
                    R.cleanAmount(e.payload.event.target, e.payload.event, Boolean(e.payload.dataAttrs.onlyClean))
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/send_amount_on_enter", (e=>{
                    13 === e.payload.event.keyCode && R.send(),
                    R.autosizeAmount()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/focus_from_to", (e=>{
                    (0,
                    l.elfocus)(e.payload.event, 0, 1e4)
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/focus_and_hide_link", (e=>{
                    (0,
                    l.elfocus)(e.payload.event, 0, 1e4),
                    R.hideLinkCopied()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/copy_link", (e=>{
                    R.copyLinkToClipboard((0,
                    l.ge)(e.payload.dataAttrs.element))
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/share_qr", (()=>{
                    R.shareQRCode()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/download_qr", (()=>{
                    R.downloadQRCode()
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/switch_to_transfer_box", (e=>{
                    R.switchBoxSection(e.payload.event.target, "transfer")
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/switch_to_request_box", (e=>{
                    R.switchBoxSection(e.payload.event.target, "request")
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/switch_to_link_box", (e=>{
                    R.switchBoxSection(e.payload.event.target, "link")
                }
                )),
                (0,
                y.tq)().setInteractiveHandler("MoneyTransfer/init_accept", (()=>{
                    R.initAccept(cur.paymentsOptions.chkData, cur.paymentsOptions.frame, !0)
                }
                ))
            },
            init() {
                this.initHandlers();
                var e = (0,
                c.curBox)();
                if ((0,
                l.ge)("payments_box") != (0,
                l.geByClass1)("payments_money_transfer_box", e.bodyNode) && _message_boxes.length > 1) {
                    var t = !0;
                    _message_boxes.forEach((function(e, n) {
                        t && (0,
                        l.ge)("payments_box") == (0,
                        l.geByClass1)("payments_money_transfer_box", e.bodyNode) && (boxLayer.removeChild((0,
                        l.gpeByClass)("popup_box_container", e.bodyNode)),
                        boxQueue._boxes.splice(n, 1),
                        delete _message_boxes[n],
                        t = !1)
                    }
                    ))
                }
                if (cur.moneyLinksTooltip && (cur.moneyLinksTooltip.destroy(),
                delete cur.moneyLinksTooltip),
                e.setOptions({
                    grey: !0
                }),
                cur.paymentsOptions.requestId && !cur.paymentsOptions.vkpayAvailable && (e.changed = !0,
                e.setOptions({
                    width: 510
                }),
                R.send()),
                (0,
                a.placeholderInit)("transfer_amount"),
                (0,
                a.placeholderInit)("transfer_comment"),
                cur.paymentsOptions.isChat) {
                    if ((0,
                    a.placeholderInit)("transfer_chunk_amount"),
                    cur.autoacceptCardDD = new InlineDropdown("transfer_autoaccept_card",{
                        items: cur.paymentsOptions.cards,
                        selected: cur.paymentsOptions.cardSeleceted,
                        withArrow: !0,
                        onShow: R.enableAutoaccept,
                        onSelect: e=>{
                            -1 == e ? R.sendBind() : cur.paymentsOptions.vkpayAvailable && R.checkAmount((0,
                            l.val)("transfer_amount"))
                        }
                    }),
                    cur.autoacceptCardEl = (0,
                    l.ge)("transfer_autoaccept_card"),
                    (0,
                    l.toggleClass)("transfer_autoaccept_card", "disabled", !cur.paymentsOptions.autoAcceptEnabled),
                    cur.paymentsOptions.autoAcceptEnabled && (0,
                    r.checkbox)("transfer_autoaccept", !0),
                    cur.paymentsOptions.cards.length < 2) {
                        var n = (0,
                        l.ce)("a", {
                            id: "payments_money_transfer_new_card_lnk",
                            innerHTML: (0,
                            f.getLang)("payments_money_transfer_new_card")
                        });
                        (0,
                        s.addEvent)(n, "mousedown", R.sendBind),
                        (0,
                        l.hide)(cur.autoacceptCardEl),
                        cur.autoacceptCardEl.parentNode.appendChild(n)
                    }
                } else if ((0,
                l.ge)("transfer_to")) {
                    (0,
                    l.hide)("payments_money_transfer_user");
                    var o = "transfer" === cur.paymentsOptions.boxTab;
                    cur.uiTransferTo = new Dropdown((0,
                    l.ge)("transfer_to"),cur.paymentsOptions.friends.filter((function(e) {
                        return o || !0 === e[7]
                    }
                    )),{
                        big: !0,
                        introText: (0,
                        f.getLang)("votes_transfer_start_typing_recipient"),
                        noResult: "",
                        placeholder: (0,
                        f.getLang)("votes_transfer_choose_recipients"),
                        multiselect: !1,
                        enableCustom: !0,
                        autocomplete: !0,
                        imageId: "transfer_to_photo",
                        indexkeys: [1, 4],
                        noImageSrc: "/images/blank.gif",
                        onChange: e=>{
                            if (e && -1 != e) {
                                var t = cur.uiTransferTo.val_full();
                                cur.paymentsOptions.toId = t[0],
                                cur.paymentsOptions.hash = t[5],
                                (0,
                                l.val)("payments_money_transfer_summary", t[6]),
                                setTimeout(l.elfocus.pbind("transfer_amount"), 100),
                                cur.paymentsOptions.vkpayAvailable && R.updateMethods()
                            }
                        }
                    })
                } else
                    (0,
                    l.ge)("transfer_method") && R.initMethods();
                setTimeout(l.elfocus.pbind("transfer_amount"), 100),
                (0,
                i.shortCurrency)(),
                "link" === cur.paymentsOptions.boxTab && R.genQRCode();
                var _ = (0,
                l.val)("transfer_amount");
                _ && R.checkAmount(_, !1, !0),
                R.autosizeAmount(),
                R.showMoneyLinksTooltip(),
                cur.transferPageLoaded = !1,
                cur.destroy.push(R.destroy)
            },
            destroy() {
                R.stopCheckFrameLoad(),
                cur.uiTransferTo && cur.uiTransferTo.destroy(cur.uiTransferTo),
                cur.qrFrame && (0,
                l.re)(cur.qrFrame)
            },
            initMethods() {
                cur.paymentsOptions.onlyCards = !(0,
                l.isVisible)("payments_money_transfer_receive_methods");
                var e = cur.paymentsOptions.cardSelected;
                if ([I, O].includes(parseInt(cur.paymentsOptions.forceType))) {
                    var t, n = function(e) {
                        if ("undefined" == typeof Symbol || null == e[Symbol.iterator]) {
                            if (Array.isArray(e) || (e = S(e))) {
                                var t = 0
                                  , n = function() {};
                                return {
                                    s: n,
                                    n: function() {
                                        return t >= e.length ? {
                                            done: !0
                                        } : {
                                            done: !1,
                                            value: e[t++]
                                        }
                                    },
                                    e: function(e) {
                                        throw e
                                    },
                                    f: n
                                }
                            }
                            throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
                        }
                        var r, i, o = !0, a = !1;
                        return {
                            s: function() {
                                r = e[Symbol.iterator]()
                            },
                            n: function() {
                                var e = r.next();
                                return o = e.done,
                                e
                            },
                            e: function(e) {
                                a = !0,
                                i = e
                            },
                            f: function() {
                                try {
                                    o || null == r.return || r.return()
                                } finally {
                                    if (a)
                                        throw i
                                }
                            }
                        }
                    }(cur.paymentsOptions.cards);
                    try {
                        for (n.s(); !(t = n.n()).done; ) {
                            A(t.value, 1)[0] === M && (e = M)
                        }
                    } catch (e) {
                        n.e(e)
                    } finally {
                        n.f()
                    }
                }
                (cur.uiTransferCard = new Dropdown((0,
                l.ge)("transfer_method"),cur.paymentsOptions.cards,{
                    big: !0,
                    selectedItems: e,
                    onChange: (e,t)=>{
                        if (-2 === parseInt(e)) {
                            var n = (0,
                            l.se)(t);
                            nav.go(n.getAttribute("data-url"));
                            var r = document.querySelector("#payments_money_transfer_send");
                            return T.FlatButton.lock(r),
                            !1
                        }
                        R.updateTransferType(),
                        R.updateCardFee(!0),
                        (0,
                        l.val)("transfer_amount") || setTimeout(l.elfocus.pbind("transfer_amount"), 100)
                    }
                }),
                cur.paymentsOptions.onlyCards) || (0,
                l.geByClass1)("payments_money_transfer_receive_options", "payments_money_transfer_receive_methods") && (window.radioBtns.receiveOptions = {
                    els: Array.prototype.slice.apply((0,
                    l.geByClass)("radiobtn")),
                    val: e == M ? "vkpay" : "cards"
                });
                if (void 0 !== cur.paymentsOptions.vkpayBalance && ((0,
                p.each)((0,
                l.geByClass)("_code", "payments_money_transfer_code_wrap"), (function() {
                    (0,
                    s.addEvent)(this, "mousedown", R.onPinClick),
                    (0,
                    s.addEvent)(this, "keyup", R.onPinKeyUp),
                    (0,
                    s.addEvent)(this, "keypress", R.onPinEnter)
                }
                )),
                R.isVKPayFillUpEnabled())) {
                    var r = R.getBindCards();
                    r.length > 0 && (cur.uiFillUpCard = new Dropdown((0,
                    l.ge)("fill_up_card"),r,{
                        big: !0,
                        selectedItems: cur.paymentsOptions.fillUpCardSelected
                    }))
                }
                var i = !cur.paymentsOptions.transferType || cur.paymentsOptions.forceType;
                i && R.updateTransferType(),
                R.updateCardFee(!i)
            },
            updateLocalStorageNewWindowSign() {
                var e = new Date
                  , t = new Date(e.getFullYear(),e.getMonth(),e.getDate() + 20 + 20 * Math.random());
                return localStorage.setItem("money_transfer_new_window", t.getTime()),
                t
            },
            getLocalStorageNewWindowSign() {
                var e, t = parseInt(null !== (e = localStorage.getItem("money_transfer_new_window")) && void 0 !== e ? e : 0);
                if (1 === t)
                    t = R.updateLocalStorageNewWindowSign().getTime();
                else if (0 === t)
                    return !1;
                return t > (new Date).getTime()
            },
            updateMethods() {
                var e, t = cur.paymentsOptions.toId;
                if (t && cur.paymentsOptions.vkpayAvailable) {
                    var n = document.querySelector("#payments_money_transfer_send");
                    (0,
                    l.val)("payments_box_error", ""),
                    cur.moneyTranferMethodsReq && (cur.moneyTranferMethodsReq.abort(),
                    cur.moneyTranferMethodsReq = null),
                    "request" !== (null === (e = cur.paymentsOptions) || void 0 === e ? void 0 : e.boxTab) && (cur.moneyTranferMethodsReq = ajax.post("al_payments.php?act=a_get_money_transfer_methods", {
                        to_id: t
                    }, {
                        onDone: (e,t)=>{
                            T.FlatButton.unlock(n),
                            (0,
                            l.val)("payments_money_transfer_methods", e),
                            cur.paymentsOptions = (0,
                            p.extend)(cur.paymentsOptions, t),
                            cur.paymentsOptions.transferType = t.transferType,
                            R.initMethods()
                        }
                        ,
                        onFail: e=>(e && (0,
                        o.isString)(e) && (T.FlatButton.unlock(n),
                        R.showError(e)),
                        !0),
                        showProgress: ()=>T.FlatButton.lock(n)
                    }))
                }
            },
            send() {
                var e = arguments.length > 0 && void 0 !== arguments[0] && arguments[0]
                  , t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]
                  , n = (0,
                c.curBox)()
                  , i = document.querySelector("#payments_money_transfer_send");
                if (!T.FlatButton.isLocked(i))
                    if (cur.paymentsOptions.toId || !cur.uiTransferTo) {
                        var o = 0;
                        if (R.resetTransferWindow(),
                        !(0,
                        l.isVisible)("payments_money_transfer_no_amount_wrap")) {
                            if (!(o = (0,
                            l.val)("transfer_amount")) || o <= 0)
                                return (0,
                                l.addClass)("payments_money_transfer_amount_wrap", "money_error"),
                                setTimeout(l.removeClass.pbind("payments_money_transfer_amount_wrap", "money_error"), 500),
                                void (0,
                                l.elfocus)("transfer_amount");
                            if (!R.checkAmount(o, !0))
                                return;
                            if ((0,
                            r.isChecked)("transfer_participate"))
                                o -= R.getChunkAmount(o, !0)
                        }
                        if (R.hideMoneyLinksTooltip(),
                        cur.paymentsOptions.onSendStart && cur.paymentsOptions.onSendStart(),
                        "request" !== cur.paymentsOptions.boxTab) {
                            R.createFrame();
                            var a = {
                                act: "a_init_money_transfer",
                                to_id: cur.paymentsOptions.toId,
                                owner_id: cur.paymentsOptions.ownerId,
                                amount: o,
                                currency: cur.paymentsOptions.currency,
                                comment: (0,
                                l.val)("transfer_comment"),
                                from: cur.paymentsOptions.from,
                                hash: cur.paymentsOptions.hash,
                                accept_vk_pay_offer: cur.paymentsOptions.shouldAcceptVkPayOffer
                            };
                            if (cur.paymentsOptions.vkpayAvailable && (a.card_id = cur.uiTransferCard.val(),
                            cur.paymentsOptions.onlyCards || (a.receive_method = (0,
                            r.radioval)("receiveOptions")),
                            "-1" === a.card_id)) {
                                if (!t)
                                    return void R.showPinBox();
                                a.vkpay_pin = t
                            }
                            if (R.isVKPayTransfer() && R.isVKPayFillUpEnabled() && R.isFillUpCardSelectionVisible() && (a.fill_up_card_id = cur.uiFillUpCard.val()),
                            cur.paymentsOptions.requestId && (a.request_id = cur.paymentsOptions.requestId),
                            cur.paymentsOptions.statSessionId && (a.stat_session_id = cur.paymentsOptions.statSessionId),
                            (0,
                            l.val)("payments_box_error", ""),
                            e || !localStorage || this.isVKPayTransfer() || "-1" === a.card_id || (e = R.getLocalStorageNewWindowSign()),
                            e) {
                                cur.paymentsOptions.qid && (a.act = "a_continue_money_transfer",
                                a.qid = cur.paymentsOptions.qid),
                                cur.transferWindow = window.open("", "Money Transfer");
                                var s = v.PaymentsBox.popupHtml((0,
                                f.getLang)("payments_cards_redirect"), "", "");
                                cur.transferWindow.document.write(s)
                            }
                            ajax.post("al_payments.php", a, {
                                onDone: (t,i)=>{
                                    var o;
                                    i ? (cur.paymentsOptions.qid = t.qid,
                                    e ? cur.transferWindow ? R.updateTransferWindow(i) : R.showError((0,
                                    f.getLang)("payments_payment_cancelled"), "info_msg") : (cur._popup_text = i,
                                    cur._popup_callback = function() {
                                        (0,
                                        l.hide)("payments_money_transfer_wrap", "payments_money_transfer_buttons", "payments_box_error", "payments_money_transfer_prg", "payments_iframe_cookie_disabled_div"),
                                        (0,
                                        l.show)("payments_money_transfer_iframe", "payments_iframe_container"),
                                        cur.uiTransferTo && ((0,
                                        l.hide)("payments_money_transfer_user_select"),
                                        (0,
                                        l.show)("payments_money_transfer_user")),
                                        (0,
                                        l.ge)("payments_iframe_container").scrollTop = 0,
                                        window.addEventListener("message", R.frameMessage, !1),
                                        n.changed = !0,
                                        n.setOptions({
                                            width: 510
                                        }),
                                        !cur.paymentsOptions.requestId && (0,
                                        l.isVisible)(n.titleWrap) && n.setBackTitle(R.resetSendBox),
                                        (0,
                                        l.setStyle)(o, {
                                            width: (0,
                                            l.ge)("payments_iframe_container").parentNode.offsetWidth - (0,
                                            r.sbWidth)() + "px"
                                        })
                                    }
                                    ,
                                    (o = (0,
                                    l.ge)("transfer_iframe")).contentWindow.document.open("text/html", "replace"),
                                    o.contentWindow.document.write(i),
                                    o.contentWindow.document.close(),
                                    cur._popup_callback(),
                                    R.startCheckFrameLoad(+new Date))) : (cur.paymentsOptions.receiptRedesign && window.addEventListener("message", R.frameMessage, !1),
                                    (0,
                                    l.hide)("payments_money_transfer_wrap", "payments_money_transfer_buttons", "payments_box_error", "payments_iframe_container", (0,
                                    l.geByClass1)("payments_money_transfer_mc_info_msg", "payments_money_transfer_iframe")),
                                    cur.uiTransferTo && ((0,
                                    l.hide)("payments_money_transfer_user_select"),
                                    (0,
                                    l.show)("payments_money_transfer_user")),
                                    (0,
                                    l.show)("payments_money_transfer_iframe", "payments_money_transfer_prg"));
                                    R.startCheckStatus(t, e)
                                }
                                ,
                                onFail: e=>(R.resetTransferWindow(),
                                R.showError(e),
                                !0),
                                showProgress: ()=>T.FlatButton.lock(i),
                                hideProgress: ()=>T.FlatButton.unlock(i)
                            })
                        } else
                            R.sendRequest(o)
                    } else
                        (0,
                        r.notaBene)(cur.uiTransferTo.container)
            },
            sendRequest(e) {
                var t = document.querySelector("#payments_money_transfer_send")
                  , n = {
                    to_id: cur.paymentsOptions.toId,
                    owner_id: cur.paymentsOptions.ownerId,
                    amount: e,
                    currency: cur.paymentsOptions.currency,
                    comment: (0,
                    l.val)("transfer_comment"),
                    from: cur.paymentsOptions.from,
                    hash: cur.paymentsOptions.hash
                };
                if (cur.paymentsOptions.statSessionId && (n.stat_session_id = cur.paymentsOptions.statSessionId),
                cur.paymentsOptions.isChat) {
                    if (n.total_amount = parseInt(e),
                    n.amount = parseInt((0,
                    l.val)("transfer_chunk_amount")),
                    n.pin_message = (0,
                    r.isChecked)("transfer_pin_message") ? 1 : 0,
                    (0,
                    r.isChecked)("transfer_autoaccept") && (cur.autoacceptCardDD && (n.accept_card = cur.autoacceptCardDD.val()),
                    !n.accept_card || -1 == n.accept_card))
                        return R.showError((0,
                        f.getLang)("payments_money_request_error_no_accept_card")),
                        !1;
                    var i = !1
                      , o = R.getTransferLimit("minAmount")
                      , a = R.getTransferLimit("maxAmount");
                    if (o && n.amount < o ? i = (0,
                    f.getLang)("payments_money_request_error_min_chunk_amount_currency") : a && n.amount > a ? i = (0,
                    f.getLang)("payments_money_request_error_max_chunk_amount_currency") : n.total_amount && n.amount > n.total_amount && (i = (0,
                    f.getLang)("payments_money_request_error_chunk_amount_too_big")),
                    i)
                        return R.showError(i),
                        (0,
                        r.notaBene)("transfer_chunk_amount"),
                        !1
                }
                (0,
                l.val)("payments_box_error", ""),
                ajax.post("al_payments.php?act=a_send_money_request", n, {
                    onDone: e=>{
                        (0,
                        c.curBox)().hide(),
                        (0,
                        c.showDoneBox)(e, {
                            out: 6e3
                        })
                    }
                    ,
                    onFail: e=>(R.showError(e),
                    !0),
                    showProgress: ()=>T.FlatButton.lock(t),
                    hideProgress: ()=>T.FlatButton.unlock(t)
                })
            },
            sendBind() {
                var e = (0,
                c.curBox)();
                R.createFrame(),
                (0,
                l.hide)("payments_money_transfer_wrap", "payments_money_transfer_buttons", "payments_box_error", "payments_money_transfer_summary_wrap", "payments_iframe_container", (0,
                l.geByClass1)("msg", "payments_money_transfer_iframe"), (0,
                l.geByClass1)("tb_tabs_wrap", e.bodyNode)),
                (0,
                l.show)("payments_money_transfer_iframe", "payments_money_transfer_prg"),
                e.setBackTitle(R.resetSendBox),
                e.setOptions({
                    width: 510
                });
                var t = {
                    type: "card",
                    only_auth: 1,
                    hash: cur.paymentsOptions.bindHash
                };
                (0,
                l.val)("payments_box_error", ""),
                ajax.post("al_payments.php?act=a_getvotes_charge", t, {
                    onDone: (t,n)=>{
                        var i;
                        cur._popup_text = n,
                        cur._popup_callback = function() {
                            (0,
                            l.hide)("payments_money_transfer_prg"),
                            (0,
                            l.show)("payments_iframe_container"),
                            (0,
                            l.ge)("payments_iframe_container").scrollTop = 0,
                            window.addEventListener("message", R.frameMessage, !1),
                            cur.autoacceptCardDD && (0,
                            l.isVisible)(cur.autoacceptCardEl) && cur.autoacceptCardDD.select(cur.paymentsOptions.cards[0][0]),
                            e.changed = !0,
                            (0,
                            l.setStyle)(i, {
                                width: (0,
                                l.ge)("payments_iframe_container").parentNode.offsetWidth - (0,
                                r.sbWidth)() + "px"
                            })
                        }
                        ,
                        (i = (0,
                        l.ge)("transfer_iframe")).contentWindow.document.open("text/html", "replace"),
                        i.contentWindow.document.write(n),
                        i.contentWindow.document.close(),
                        cur._popup_callback(),
                        cur.isPaymentCanceled = cur.isPaymentFailed = !1,
                        cur.moneyTranferCheckInt = setInterval((function() {
                            R.checkBindStatus(t),
                            (cur.isPaymentCanceled || cur.isPaymentFailed) && (clearInterval(cur.moneyTranferCheckInt),
                            cur.isPaymentFailed ? R.showError((0,
                            f.getLang)("payments_landing_cancelled")) : R.showError((0,
                            f.getLang)("payments_payment_cancelled"), "info_msg"))
                        }
                        ), 2e3)
                    }
                    ,
                    onFail: e=>(R.showError(e),
                    !0)
                })
            },
            createFrame() {
                var e = (0,
                l.ge)("payments_iframe_container")
                  , t = (0,
                l.ce)("iframe", {
                    id: "transfer_iframe",
                    name: "transfer_iframe"
                }, {
                    border: 0,
                    height: "445px",
                    width: 510 - (0,
                    r.sbWidth)() + "px",
                    overflowX: "hidden",
                    overflowY: "hidden"
                });
                t.frameBorder = 0,
                e.innerHTML = "",
                e.appendChild(t)
            },
            popupWrite(e) {
                if (e.document.innerHTML !== cur._popup_text) {
                    e.document.write(cur._popup_text),
                    e.document.close();
                    try {
                        e.document.charset = "windows-1251"
                    } catch (e) {}
                    e.blur(),
                    e.focus(),
                    cur._popup_callback && cur._popup_callback()
                }
            },
            resetSendBox() {
                var e = (0,
                c.curBox)();
                if (e) {
                    var t = (0,
                    l.geByClass1)("tb_tabs_wrap", e.bodyNode);
                    (0,
                    l.hide)("payments_money_transfer_iframe"),
                    (0,
                    l.show)("payments_money_transfer_wrap", "payments_money_transfer_buttons", "payments_money_transfer_summary_wrap", t, (0,
                    l.geByClass1)("payments_money_transfer_mc_info_msg", "payments_money_transfer_iframe")),
                    cur.uiTransferTo && ((0,
                    l.hide)("payments_money_transfer_user"),
                    (0,
                    l.show)("payments_money_transfer_user_select")),
                    t && e.setOptions({
                        title: ""
                    }),
                    e.changed = !1,
                    e.setOptions({
                        width: 510
                    }),
                    (0,
                    l.isVisible)(e.titleWrap) && e.setBackTitle(!1)
                }
            },
            resetTransferWindow() {
                cur.transferWindow && ((0,
                l.show)("payments_money_transfer_wrap", "payments_money_transfer_buttons"),
                (0,
                l.hide)("payments_money_transfer_prg", "payments_money_transfer_iframe"),
                cur.transferWindow.location = window.location,
                cur.transferWindow.close()),
                cur.transferWindow = void 0
            },
            updateTransferWindow(e) {
                var t = cur.transferWindow.document.getElementById("wait_text_container");
                t && (t.innerHTML = ""),
                cur.transferWindow.document.write(e),
                setTimeout((()=>{
                    var e;
                    null === (e = cur.transferWindow.document.getElementById("popup_payment_form")) || void 0 === e || e.submit()
                }
                ), 1500),
                window.addEventListener("message", R.frameMessage, !1),
                (0,
                l.hide)("payments_money_transfer_wrap", "payments_money_transfer_buttons", "payments_box_error", "payments_iframe_safari_trouble_div", "payments_iframe_container"),
                (0,
                l.val)("payments_transfer_box_progress_msg", (0,
                f.getLang)("payments_waiting_transfer_complete")),
                (0,
                l.show)("payments_money_transfer_iframe", "payments_money_transfer_prg")
            },
            startCheckStatus(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                cur.isPaymentCanceled = cur.isPaymentFailed = !1,
                cur.moneyTransferRedirected = !1,
                cur.moneyTranferCheckInt && clearInterval(cur.moneyTranferCheckInt),
                cur.moneyTranferCheckInt = setInterval((function() {
                    if (R.checkStatus(e, t),
                    cur.isPaymentCanceled || cur.isPaymentFailed) {
                        var n = R.resetTransferWindow();
                        if (n && n(),
                        clearInterval(cur.moneyTranferCheckInt),
                        e.accept)
                            return void (0,
                            c.curBox)().hide();
                        cur.isPaymentFailed ? R.showError((0,
                        f.getLang)("payments_landing_cancelled")) : R.showError((0,
                        f.getLang)("payments_payment_cancelled"), "info_msg")
                    }
                }
                ), 2e3)
            },
            hideBoxQueue() {
                for (; boxQueue.count(); )
                    boxQueue.hideLast(!1)
            },
            stopListeningFrameMessages() {
                window.removeEventListener("message", R.frameMessage, !1)
            },
            checkStatus(e, t) {
                var n = {
                    act: "a_check_money_transfer",
                    qid: e.qid,
                    hash: e.hash
                };
                e.accept && (n.accept = e.accept),
                ajax.post("al_payments.php", n, {
                    onDone: (n,i,o,a)=>{
                        if (!n || 4 == n && cur.moneyTransferRedirected) {
                            var s;
                            t && (null === (s = cur.transferWindow) || void 0 === s ? void 0 : s.closed) && (R.showError((0,
                            f.getLang)("payments_payment_cancelled")),
                            R.stopListeningFrameMessages(),
                            R.resetTransferWindow(),
                            cur.isPaymentFailed = !1,
                            cur.isPaymentCanceled = !1)
                        } else {
                            if (1 == n || 3 == n) {
                                if (t)
                                    0 === cur.paymentsOptions.transferType || cur.paymentsOptions.transferType === O ? cur.transferWindow && !cur.transferWindow.closed && (R.resetTransferWindow(),
                                    R.hideBoxQueue()) : (R.resetTransferWindow(),
                                    R.hideBoxQueue());
                                else
                                    cur.paymentsOptions.transferType === I ? (R.resetTransferWindow(),
                                    R.hideBoxQueue()) : cur.paymentsOptions.receiptRedesign && ((0,
                                    l.hide)(document.querySelector(".payments_money_transfer_footer")),
                                    (null == a ? void 0 : a.receipt_link) && R.setIframeByLink(a.receipt_link));
                                a || (0,
                                c.showDoneBox)(i, {
                                    out: 6e3
                                });
                                var u = nav.objLoc;
                                e.accept || "settings" !== u[0] || "payments" !== u.act || "transfer" !== u.section || (cur.historyOffset || (cur.historyOffset = {}),
                                cur.historyOffset.transfer = 0,
                                (0,
                                b.showNextPaymentsHistory)(!1, u.section)),
                                3 == n && (a && a.title && (0,
                                _.showFastBox)({
                                    title: a.title
                                }, i, (0,
                                f.getLang)("payments_remember_card_btn"), R.rememberAcceptCard.pbind(a), (0,
                                f.getLang)("payments_dont_remember_card_btn")),
                                TopNotifier.invalidate(),
                                cur.acceptMoneyBtn && (0,
                                l.hasClass)((0,
                                l.domPN)(cur.acceptMoneyBtn), "feedback_buttons") ? ((0,
                                l.re)((0,
                                l.domPN)(cur.acceptMoneyBtn)),
                                cur.acceptMoneyBtn = !1) : cur.acceptMoneyBtn && ((0,
                                l.re)((0,
                                l.geByClass1)("_decline_btn", (0,
                                l.domPN)(cur.acceptMoneyBtn))),
                                (0,
                                l.domReplaceEl)(cur.acceptMoneyBtn, o),
                                cur.acceptMoneyBtn = !1))
                            } else if (2 == n || 5 == n)
                                R.showError(i),
                                R.stopListeningFrameMessages(),
                                cur.isPaymentFailed = !1,
                                cur.isPaymentCanceled = !1;
                            else {
                                if (4 == n) {
                                    var d;
                                    if (cur.moneyTransferRedirected = !0,
                                    cur._popup_text = o,
                                    t && cur.transferWindow)
                                        R.updateTransferWindow(o);
                                    else
                                        cur._popup_callback = function() {
                                            (0,
                                            l.hide)("payments_money_transfer_prg"),
                                            (0,
                                            l.show)("payments_iframe_container"),
                                            (0,
                                            l.ge)("payments_iframe_container").scrollTop = 0,
                                            window.addEventListener("message", R.frameMessage, !1),
                                            (0,
                                            c.curBox)().changed = !0,
                                            (0,
                                            l.setStyle)(d, {
                                                width: (0,
                                                l.ge)("payments_iframe_container").parentNode.offsetWidth - (0,
                                                r.sbWidth)() + "px"
                                            })
                                        }
                                        ,
                                        (d = (0,
                                        l.ge)("transfer_iframe")).contentWindow.document.open("text/html", "replace"),
                                        d.contentWindow.document.write(o),
                                        d.contentWindow.document.close(),
                                        cur._popup_callback();
                                    return
                                }
                                if (6 == n)
                                    return void ((0,
                                    l.isVisible)("payments_money_transfer_prg") || ((0,
                                    l.hide)("payments_iframe_container"),
                                    (0,
                                    l.show)("payments_money_transfer_iframe", "payments_money_transfer_prg")))
                            }
                            clearInterval(cur.moneyTranferCheckInt)
                        }
                    }
                    ,
                    onFail: e=>(clearInterval(cur.moneyTranferCheckInt),
                    R.resetTransferWindow()(),
                    R.showError(e),
                    !0)
                })
            },
            checkBindStatus(e) {
                var t = {
                    act: "a_getvotes_check",
                    type: "card"
                };
                e && (e.oid || e.qid) && (t.oid = e.oid,
                t.qid = e.qid,
                t.hash = e.hash),
                ajax.post("al_payments.php", t, {
                    onDone: (e,t,n)=>{
                        e && (1 == e ? (R.resetSendBox(),
                        R.enableAutoaccept(),
                        n && cur.autoacceptCardDD && ((0,
                        l.isVisible)(cur.autoacceptCardEl) || ((0,
                        l.hide)((0,
                        l.geByTag)("A", cur.autoacceptCardEl.parentNode)[0]),
                        (0,
                        l.show)(cur.autoacceptCardEl)),
                        cur.paymentsOptions.cards.unshift([n.bindingId, n.bin]),
                        cur.autoacceptCardDD.setItems(cur.paymentsOptions.cards),
                        cur.autoacceptCardDD.select(n.bindingId))) : 2 != e && 10 != e || R.showError(t),
                        clearInterval(cur.moneyTranferCheckInt))
                    }
                    ,
                    onFail: e=>(clearInterval(cur.moneyTranferCheckInt),
                    R.showError(e),
                    !0)
                })
            },
            paymentCanceled(e) {
                e ? cur.isPaymentFailed = !0 : cur.isPaymentCanceled = !0,
                R.frameHeight()
            },
            frameHeight(e, t) {
                var n = (0,
                l.ge)("transfer_iframe");
                e ? (e = Math.max(e, 250),
                cur.prevFrameHeight = n.style.height,
                n.style.height = e + "px") : (n.style.height = cur.prevFrameHeight,
                (0,
                l.removeClass)("payments_iframe_container", "payments_threeds_frame")),
                t || ((0,
                l.ge)("payments_iframe_container").style.height = (e || cur.prevFrameHeight) + 15 + "px"),
                (0,
                l.ge)("payments_iframe_container").scrollTop = 0
            },
            frameMessage(e) {
                var t;
                if ((0,
                c.curBox)() || !cur.paymentsOptions.receiptRedesign) {
                    if (!(e.origin.match(/^https?:\/\/([a-zA-Z0-9\-.]+\.)?money\.mail\.ru$/) || e.origin.match(new RegExp(`^https?:\\/\\/([a-zA-Z0-9\\-.]+\\.)?${C.VK_SITE_REGEX_SOURCE_UNSAFE}$`)) && (null === (t = cur.paymentsOptions) || void 0 === t ? void 0 : t.receiptRedesign)))
                        return !1;
                    var n = {};
                    if (!e.data || "{" !== e.data.substr(0, 1) || "billing" === (n = (0,
                    d.parseJSON)(e.data)).type) {
                        vk.dev && (0,
                        h.debugLog)(n);
                        var r = (0,
                        l.geByClass1)("payments_iframe_container", (0,
                        c.curBox)().bodyNode) || (0,
                        l.ge)("payments_iframe_container");
                        if (cur.transferPageLoaded = !0,
                        "resizeFrame" === n.action ? setTimeout(R.frameHeight.pbind(n.action_params.height), 200) : "submit" === e.data || "3dsPage" === n.action ? (setTimeout(R.frameHeight.pbind(600, !0), 200),
                        (0,
                        l.addClass)(r, "payments_threeds_frame")) : "3dsFinish" === n.action ? (R.frameHeight(),
                        (0,
                        l.removeClass)(r, "payments_threeds_frame")) : "session_fail" === n.action ? ((0,
                        l.hide)(r),
                        R.resetTransferWindow(),
                        (0,
                        l.show)("payments_iframe_safari_trouble_div"),
                        R.updateLocalStorageNewWindowSign()) : "putPixel" === n.action && "page_load" === n.action_params.alias ? (v.PaymentsBox.finishFormMeasure("dmr_transfer"),
                        (0,
                        m.statlogsValueEvent)("money_transfers", 0, "iframe_loaded")) : "paySuccess" === n.action && setTimeout(R.frameHeight.pbind(500), 300),
                        cur.paymentsOptions.receiptRedesign) {
                            if ("make_one_more_transfer" === n.action || "close_window" === n.action)
                                switch (clearInterval(cur.moneyTranferCheckInt),
                                R.resetTransferWindow(),
                                R.stopListeningFrameMessages(),
                                n.action) {
                                case "make_one_more_transfer":
                                    R.resetSendBox();
                                    break;
                                case "close_window":
                                    R.hideBoxQueue()
                                }
                            if ("get_transfer_source" === n.action) {
                                var i = vk.dev ? "*" : window.location.origin;
                                cur.transferWindow && cur.transferWindow.postMessage(JSON.stringify({
                                    from: cur.paymentsOptions.from
                                }), i);
                                var o = (0,
                                l.ge)("transfer_iframe");
                                o && o.contentWindow.postMessage(JSON.stringify({
                                    action: "set_transfer_source",
                                    source: cur.paymentsOptions.from
                                }), i)
                            }
                        }
                    }
                } else
                    R.stopListeningFrameMessages()
            },
            setIframeByLink(e) {
                var t = (0,
                l.geByClass1)("payments_iframe_container", (0,
                c.curBox)().bodyNode) || (0,
                l.ge)("payments_iframe_container")
                  , n = (0,
                l.ce)("iframe", {
                    id: "transfer_iframe",
                    name: "transfer_iframe"
                }, {
                    border: 0,
                    height: "445px",
                    width: "510px",
                    overflowX: "hidden",
                    overflowY: "hidden"
                });
                n.frameBorder = 0,
                t.innerHTML = "",
                t.appendChild(n),
                (0,
                l.hide)((0,
                l.ge)("payments_money_transfer_prg")),
                (0,
                l.show)(t),
                n.src = e
            },
            startCheckFrameLoad(e) {
                cur.frameLoadChecker = setInterval((function() {
                    cur.transferPageLoaded ? R.stopCheckFrameLoad() : +new Date - e > 5e3 && (R.stopCheckFrameLoad(),
                    R.resetTransferWindow(),
                    (0,
                    l.hide)("payments_iframe_container"),
                    (0,
                    l.show)("payments_iframe_safari_trouble_div"),
                    R.updateLocalStorageNewWindowSign())
                }
                ), 1e3)
            },
            stopCheckFrameLoad() {
                clearInterval(cur.frameLoadChecker)
            },
            initAccept(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                if (n)
                    cur.transferWindow = window.open("/", "Money transfer"),
                    cur.transferWindow.document.write(t),
                    (0,
                    l.hide)("payments_box_error", "payments_iframe_container", "payments_iframe_safari_trouble_div", "payments_iframe_container"),
                    (0,
                    l.val)("payments_transfer_box_progress_msg", (0,
                    f.getLang)("payments_waiting_transfer_complete")),
                    (0,
                    l.show)("payments_money_transfer_iframe", "payments_money_transfer_prg");
                else {
                    var r = (0,
                    l.geByClass1)("payments_iframe_container", (0,
                    c.curBox)().bodyNode) || (0,
                    l.ge)("payments_iframe_container");
                    (0,
                    l.show)(r);
                    var i = (0,
                    l.ce)("iframe", {
                        id: "transfer_iframe",
                        name: "transfer_iframe"
                    }, {
                        border: 0,
                        height: "445px",
                        width: "510px",
                        overflowX: "hidden",
                        overflowY: "hidden"
                    });
                    i.frameBorder = 0,
                    r.innerHTML = "",
                    r.appendChild(i),
                    i.contentWindow.document.open("text/html", "replace"),
                    i.contentWindow.document.write(t),
                    i.contentWindow.document.close(),
                    R.startCheckFrameLoad(+new Date)
                }
                window.addEventListener("message", R.frameMessage, !1),
                R.startCheckStatus(e, n)
            },
            rememberAcceptCard(e) {
                var t = (0,
                c.curBox)() || {}
                  , n = t.btns.ok[0];
                ajax.post("al_payments.php?act=a_remember_money_transfer_accept_card", {
                    card_id: e.card_id,
                    hash: e.hash
                }, {
                    onDone: t.hide,
                    showProgress: ()=>T.FlatButton.lock(n),
                    hideProgress: ()=>T.FlatButton.unlock(n)
                })
            },
            cleanAmount(e, t, n) {
                if (13 !== t.keyCode) {
                    var r = e.value.replace(/[^0-9]/g, "");
                    r = r.replace(/^0+/, ""),
                    e.value != r && (e.value = r),
                    n || (R.checkAmount(r),
                    R.autosizeAmount(),
                    cur.paymentsOptions.cardsFee && R.updateCardFee(!0))
                }
            },
            getTransferLimit(e) {
                var t = "request" === cur.paymentsOptions.boxTab ? 0 : cur.paymentsOptions.transferType;
                return "balance" === e && parseInt(t) === I ? cur.paymentsOptions.vkpayBalance : (cur.paymentsOptions.isChat && "request" === cur.paymentsOptions.boxTab && "maxAmount" === e && cur.autoacceptCardDD && -2 === cur.autoacceptCardDD.val() && (t = 2),
                cur.paymentsOptions.limits[t][e])
            },
            checkAmount(e, t, n) {
                var i, o = !1, a = (0,
                l.hasClass)("payments_money_transfer_amount_wrap", "money_error"), s = parseInt(null === (i = cur.uiTransferCard) || void 0 === i ? void 0 : i.val()) === M, c = R.isVKPayTransfer(), u = R.isVKPayFillUpEnabled();
                if (t && a)
                    return c && e > R.getTransferLimit("balance") && !u && (0,
                    _.showFastBox)({
                        title: (0,
                        f.getLang)("payments_vkpay_low_balance_title"),
                        width: 420
                    }, (0,
                    f.getLang)("payments_vkpay_low_balance_text"), (0,
                    f.getLang)("payments_vkpay_topup_button"), nav.go.pbind("/vkpay#action=refill"), (0,
                    f.getLang)("global_close")),
                    !1;
                var d = cur.paymentsOptions.isChat && "request" === cur.paymentsOptions.boxTab
                  , p = d && (0,
                r.isChecked)("transfer_participate")
                  , h = R.getTransferLimit("minAmount") * (p ? 2 : 1)
                  , m = R.getTransferLimit("maxAmount")
                  , g = R.getTransferLimit("balance")
                  , v = (0,
                f.langNumeric)(h, cur.paymentsOptions.currencyStr, !0)
                  , E = (0,
                f.getLang)("payments_money_transfer_amount_limits").replace("{min_amount}", v)
                  , y = !d;
                if (d && cur.autoacceptCardDD && -2 === cur.autoacceptCardDD.val() && (y = !0),
                s && c && u && !(void 0 !== g && e <= g) || R.hideFillUpCardSelection(),
                t && h && e < h)
                    o = (0,
                    f.getLang)("payments_money_transfer_error_min_amount_currency").replace("{min_amount}", v);
                else if (m && y && e > m) {
                    var w = (0,
                    f.langNumeric)(m, cur.paymentsOptions.currencyStr, !0);
                    o = (0,
                    f.getLang)("payments_money_transfer_error_max_amount_currency").replace("{max_amount}", w)
                } else if (s && void 0 !== g && e > g) {
                    if (c && u)
                        R.getBindCards().length > 0 ? R.showFillUpCardSelection() : o = (0,
                        f.getLang)("payments_money_transfer_low_balance");
                    else
                        o = (0,
                        f.getLang)("payments_money_transfer_low_balance")
                }
                var b = (0,
                l.ge)("payments_money_transfer_notice");
                if (0 != o)
                    return (0,
                    l.val)(b, o),
                    (0,
                    l.addClass)("payments_money_transfer_amount_wrap", "money_error"),
                    !1;
                if ((a || n || e < h) && ((e < h || "request" === cur.paymentsOptions.boxTab) && (0,
                l.val)(b, E),
                (0,
                l.removeClass)("payments_money_transfer_amount_wrap", "money_error")),
                !t && d) {
                    var C = R.getChunkAmount(e, p);
                    if ((0,
                    l.val)("transfer_chunk_amount", C),
                    h && e < h)
                        (0,
                        l.val)(b, E);
                    else {
                        var T = p ? e - C : e
                          , D = (0,
                        f.langNumeric)(T, cur.paymentsOptions.currencyStr, !0);
                        (0,
                        l.val)(b, (0,
                        f.getLang)("payments_money_transfer_will_be_requested").replace("{amount}", D))
                    }
                }
                return !0
            },
            getChunkAmount(e, t) {
                var n = R.getTransferLimit("minAmount")
                  , r = R.getTransferLimit("maxAmount")
                  , i = Math.max(n || 100, Math.ceil(e / Math.max(1, cur.paymentsOptions.chatCount - (t ? 0 : 1))));
                return r && (i = Math.min(i, r)),
                i
            },
            autosizeAmount() {
                var e = (0,
                l.ge)("transfer_amount")
                  , t = (0,
                l.ce)("span", {
                    innerHTML: e.value || "0"
                }, {
                    fontFamily: (0,
                    l.getStyle)(e, "fontFamily"),
                    fontSize: (0,
                    l.getStyle)(e, "fontSize"),
                    fontWeight: (0,
                    l.getStyle)(e, "fontWeight")
                });
                (0,
                l.ge)("utils").appendChild(t);
                var n = Math.floor((0,
                l.getSize)(t)[0]) + 50;
                (0,
                l.re)(t),
                cur.amountMinSize || (cur.amountMinSize = 80),
                n < cur.amountMinSize && (n = cur.amountMinSize),
                (0,
                l.setStyle)(e, {
                    width: n
                })
            },
            checkUserMessage() {
                (0,
                d.checkTextLength)(cur.paymentsOptions.maxTextLength, (0,
                l.ge)("transfer_comment"), (0,
                l.ge)("transfer_comment_limit_message"), !1, !0),
                ((0,
                l.val)("transfer_comment_limit_message") && (0,
                l.isVisible)("transfer_comment_limit_message") ? l.hide : l.show)("payments_money_transfer_fee_link")
            },
            checkRequestParticipate() {
                R.checkAmount((0,
                l.val)("transfer_amount"))
            },
            checkRequestNoAmount(e, t) {
                e && uiTabs.switchTab(e),
                t ? ((0,
                l.hide)("payments_money_transfer_amount_wrap", "transfer_participate"),
                (0,
                l.show)("payments_money_transfer_no_amount_wrap")) : ((0,
                l.hide)("payments_money_transfer_no_amount_wrap"),
                (0,
                l.show)("payments_money_transfer_amount_wrap", "transfer_participate"),
                (0,
                l.elfocus)("transfer_amount"))
            },
            checkAutoAccept() {
                (0,
                l.toggleClass)("transfer_autoaccept_card", "disabled", !(0,
                r.isChecked)("transfer_autoaccept"))
            },
            enableAutoaccept() {
                (0,
                r.isChecked)("transfer_autoaccept") || ((0,
                r.checkbox)("transfer_autoaccept", !0),
                (0,
                l.removeClass)("transfer_autoaccept_card", "disabled"))
            },
            showMoneyTransferBox(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0
                  , r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null;
                return (0,
                _.showBox)("al_payments.php", D({}, e, {
                    act: "money_transfer_box"
                }), D({}, t, {
                    onDone(e, t) {
                        null == r || r(),
                        cur.paymentsOptions = t,
                        e.setOptions({
                            width: 510,
                            bodyStyle: "padding: 0;",
                            hideButtons: !0,
                            onClean() {
                                cur.moneyTranferCheckInt && clearInterval(cur.moneyTranferCheckInt),
                                nav.objLoc.z && "moneysend" === nav.objLoc.z.substr(0, 9) && (delete nav.objLoc.z,
                                nav.setLoc(nav.objLoc))
                            }
                        }),
                        R.init()
                    },
                    onFail: n
                }))
            },
            aboutBox: e=>!(0,
            _.showFastBox)({
                title: (0,
                f.getLang)("payments_money_transfer_about_title"),
                width: 560
            }, (0,
            f.getLang)(e)),
            showError(e, t) {
                e && ((0,
                l.ge)("payments_box_error").innerHTML = "",
                (0,
                u.showMsg)("payments_box_error", e, t || "error"),
                (0,
                l.show)("payments_box_error")),
                (0,
                l.ge)("payments_money_transfer_wrap") && (R.resetSendBox(),
                cur.moneyTranferCheckInt && (clearInterval(cur.moneyTranferCheckInt),
                cur.moneyTranferCheckInt = !1))
            },
            switchBoxSection(e, t) {
                if (cur.paymentsOptions.boxTab !== t) {
                    if (e && uiTabs.switchTab(e),
                    "transfer" === cur.paymentsOptions.boxTab && (0,
                    l.isVisible)("payments_money_transfer_iframe") && (R.resetSendBox(),
                    cur.moneyTranferCheckInt && (clearInterval(cur.moneyTranferCheckInt),
                    cur.moneyTranferCheckInt = !1)),
                    "transfer" === cur.paymentsOptions.boxTab && cur.paymentsMoneyBoxTTHide && cur.paymentsMoneyBoxTTHide(),
                    "link" === cur.paymentsOptions.boxTab && ((0,
                    l.hide)("payments_money_link_box"),
                    (0,
                    l.show)("payments_money_transfer_request_box"),
                    R.hideMoneyLinksTooltip()),
                    cur.paymentsOptions.boxTab = t,
                    "link" === t)
                        (0,
                        l.hide)("payments_money_transfer_request_box"),
                        (0,
                        l.show)("payments_money_link_box"),
                        R.hideMoneyLinksTooltip(),
                        R.genQRCode(),
                        R.showMoneyLinksTooltip();
                    else {
                        (0,
                        l.val)("payments_money_transfer_summary", cur.paymentsOptions.boxSections[t].summary);
                        var n = document.querySelector("#payments_money_transfer_send");
                        T.FlatButton.setLabel(n, cur.paymentsOptions.boxSections[t].btn),
                        (0,
                        l.val)("payments_money_transfer_user_select_label", cur.paymentsOptions.boxSections[t].user_select_label),
                        R.checkAmount((0,
                        l.val)("transfer_amount"), !1, !0),
                        "transfer" === t && R.updateCardFee(!0)
                    }
                    (0,
                    l.toggle)("payments_money_transfer_nf_warning", "transfer" === t),
                    (0,
                    l.toggle)("payments_money_transfer_methods", "transfer" === t),
                    (0,
                    l.toggle)("payments_money_transfer_vk_pay_offer", "transfer" === t),
                    R.renderSelectBox(),
                    setTimeout(l.elfocus.pbind("transfer_amount"), 100)
                }
            },
            genQRCode() {
                var e = (0,
                l.ge)("payments_money_transfer_qr");
                if (!e.childNodes.length) {
                    (0,
                    l.val)(e, g.createQR(cur.paymentsOptions.transferLink, 115, "qr-code", {
                        isShowLogo: !0,
                        isShowBackground: !1,
                        foregroundColor: "var(--text_primary)",
                        logoColor: "var(--accent)"
                    }))
                }
            },
            shareQRCode() {
                R.hideMoneyLinksTooltip(!0),
                (0,
                _.showBox)("like.php", {
                    act: "publish_box",
                    object: "moneysend" + vk.id + "_0",
                    list: ""
                })
            },
            downloadQRCode() {
                if (!cur.paymentsOptions.qrUrl)
                    return !1;
                var e = (0,
                l.ce)("iframe", {
                    src: cur.paymentsOptions.qrUrl
                });
                return utilsNode.appendChild(e),
                cur.qrFrame && (0,
                l.re)(cur.qrFrame),
                cur.qrFrame = e,
                !1
            },
            hideLinkCopied() {
                (0,
                p.each)((0,
                l.geByClass)("_link_copied", "payments_money_link_box"), l.hide.pbind(this))
            },
            copyLinkToClipboard(e) {
                R.hideLinkCopied(),
                R.hideMoneyLinksTooltip(!0),
                e.select(),
                document.execCommand("copy");
                var t = (0,
                l.geByClass1)("_link_copied", (0,
                l.gpeByClass)("_link_wrap", e));
                (0,
                l.show)(t)
            },
            renderSelectBox() {
                if (cur.uiTransferTo) {
                    var e = "transfer" === cur.paymentsOptions.boxTab;
                    cur.uiTransferTo.setData([]),
                    cur.uiTransferTo.setOptions({
                        autocomplete: !1
                    }),
                    cur.uiTransferTo.setData(cur.paymentsOptions.friends.filter((function(t) {
                        return e || !0 === t[7]
                    }
                    ))),
                    cur.uiTransferTo.setOptions({
                        autocomplete: !0
                    }),
                    cur.paymentsOptions.toId = null,
                    cur.paymentsOptions.hash = null,
                    cur.uiTransferTo.clear(),
                    cur.uiTransferTo.deselectTokens(),
                    (0,
                    l.val)("payments_money_transfer_methods", "")
                }
            },
            updateImHistory(e, t, n) {
                var r = (0,
                l.geByClass1)("_money_transfer" + t, e);
                if (r) {
                    var i = (0,
                    l.geByClass1)("_accept_btn", r);
                    i && ((0,
                    l.re)((0,
                    l.geByClass1)("_decline_btn", (0,
                    l.domPN)(i))),
                    (0,
                    l.domReplaceEl)(i, n))
                }
            },
            initHistoryBox(e, t, n, i) {
                var o = (0,
                l.ge)("ui_money_transfer_load_more");
                if (o) {
                    var a = (0,
                    l.ge)("settings_transfer_history").tBodies[0];
                    cur.userAutoScroll = new E.default(a,{
                        offset: n,
                        onNoMore: l.re.pbind(o),
                        onNeedRows: (n,r)=>{
                            var o = {
                                act: "money_transfer_history_box",
                                offset: r,
                                owner_id: e
                            };
                            t && (o.request_id = t),
                            i && (o.hash = i),
                            ajax.post("al_payments.php", o, {
                                onDone: n
                            })
                        }
                        ,
                        drawRows: (e,t)=>{
                            if (browser.msie) {
                                var n = (0,
                                l.se)("<table>" + t + "</table>");
                                for (var r in t = (0,
                                l.geByTag)("tr", n))
                                    1 == t[r].nodeType && e.appendChild(t[r])
                            } else
                                e.insertAdjacentHTML("beforeEnd", t)
                        }
                        ,
                        showProgress: r.lockButton.pbind(o),
                        hideProgress: r.unlockButton.pbind(o),
                        rowClass: "settings_history_row"
                    })
                }
            },
            historyBox() {
                (0,
                _.showBox)("al_payments.php?act=money_transfer_history_box")
            },
            showMoneyLinksTooltip() {
                var e, t, n;
                cur.paymentsOptions.moneylinks_feature_tooltip && !cur.moneyLinksTooltip && ((0,
                l.isVisible)("payments_money_link_box") ? (e = (0,
                l.geByClass1)("payments_money_transfer_link_copy_btn", "payments_money_link_box"),
                t = (0,
                f.getLang)("payments_money_link_btn_feature_text"),
                n = {
                    forceSide: "right",
                    width: 320,
                    offset: [6, 0]
                }) : (e = (0,
                l.geByClass1)("ui_tab", (0,
                l.geByClass1)("_moneylink_tab", "box_layer"))) && (t = (0,
                f.getLang)("payments_money_link_tab_feature_text"),
                n = {
                    forceSide: "bottom",
                    width: 250,
                    offset: [0, 4]
                }),
                e && setTimeout((function() {
                    cur.moneyLinksTooltip = new ElementTooltip(e,(0,
                    p.extend)({
                        content: '<div class="feature_tooltip__close" onclick="cur.moneyLinksTooltip.hide();"></div>' + t,
                        cls: "feature_intro_tt feature_info_tooltip moneylinks_feature_tooltip",
                        autoShow: !1,
                        noHideOnClick: !0,
                        noAutoHideOnWindowClick: !0,
                        appendTo: (0,
                        l.geByClass1)("ui_tabs", "box_layer"),
                        onHide: R.hideMoneyLinksTooltip.pbind(!0)
                    }, n)),
                    cur.moneyLinksTooltip.show(),
                    cur.destroy.push(R.hideMoneyLinksTooltip)
                }
                ), 500))
            },
            hideMoneyLinksTooltip(e) {
                e && ajax.post("al_index.php", {
                    act: "hide_feature_tt",
                    hash: cur.paymentsOptions.moneylinks_feature_tooltip_hash,
                    type: "moneylinks"
                }),
                cur.moneyLinksTooltip && (cur.moneyLinksTooltip.destroy(),
                delete cur.moneyLinksTooltip)
            },
            showPinBox() {
                (0,
                l.addClass)((0,
                c.curBox)().bodyNode, "payments_box_code_showed"),
                (0,
                l.show)("payments_money_transfer_layer_bg", "payments_money_transfer_code_box"),
                (0,
                p.each)((0,
                l.geByClass)("_code", "payments_money_transfer_code_wrap"), (function() {
                    (0,
                    l.val)(this, "")
                }
                )),
                (0,
                l.elfocus)("payments_code1"),
                (0,
                c.curBox)().changed = !0;
                var e = document.querySelector("#payments_money_transfer_send");
                e && (e.style.pointerEvents = "none",
                setTimeout((()=>{
                    e.style.pointerEvents = "auto"
                }
                ), 0))
            },
            hidePinBox() {
                (0,
                l.hide)("payments_money_transfer_layer_bg", "payments_money_transfer_code_box"),
                (0,
                l.removeClass)((0,
                c.curBox)().bodyNode, "payments_box_code_showed"),
                (0,
                c.curBox)().changed = !1
            },
            checkVkPayOfferBox() {
                var e = "payments_money_transfer_vk_pay_offer_box"
                  , t = !(0,
                r.isChecked)(e)
                  , n = document.querySelector("#payments_money_transfer_send");
                T.FlatButton.setDisabled(n, !t),
                (0,
                r.checkbox)(e)
            },
            onPinKeyUp(e) {
                var t = e.target;
                if (8 == e.keyCode) {
                    var n = (0,
                    l.domPS)(t);
                    if (n) {
                        var r = n.getAttribute("data-index");
                        (0,
                        l.val)(n, ""),
                        cur.paymentsOptions.vkpcode[r] = "",
                        cur.paymentsOptions.vkpcode[r - 1] = "",
                        (0,
                        l.elfocus)(n)
                    }
                }
            },
            onPinEnter(e) {
                var t = e.target;
                if (!(e.keyCode >= 47 && e.keyCode <= 57))
                    return (0,
                    s.cancelEvent)(e);
                var n = t.getAttribute("data-index");
                cur.paymentsOptions.vkpcode || (cur.paymentsOptions.vkpcode = []),
                cur.paymentsOptions.vkpcode[n - 1] = e.key,
                (0,
                l.val)(t, String.fromCharCode(9679));
                var r = (0,
                l.domNS)(t);
                r ? setTimeout(l.elfocus.pbind(r), 10) : setTimeout((function() {
                    t.blur(),
                    R.checkPin()
                }
                ), 10)
            },
            onPinClick(e) {
                var t = e.target
                  , n = (0,
                l.domPS)(t);
                if (n && !(0,
                l.val)(n))
                    return (0,
                    s.cancelEvent)(e)
            },
            checkPin() {
                var e = cur.paymentsOptions.vkpcode.join("");
                delete cur.paymentsOptions.vkpcode,
                (0,
                l.val)("payments_money_transfer_code_error", ""),
                ajax.post("al_payments.php?act=a_check_vkpay_pin", {
                    code: e,
                    hash: cur.paymentsOptions.pinHash
                }, {
                    onDone: t=>{
                        if (1 == t)
                            return (0,
                            l.hide)((0,
                            l.geByClass1)("_code_enter", "payments_money_transfer_code_box")),
                            void (0,
                            l.show)((0,
                            l.geByClass1)("_code_recover", "payments_money_transfer_code_box"));
                        R.hidePinBox(),
                        R.send(!1, e)
                    }
                    ,
                    onFail: e=>(e && (0,
                    l.val)("payments_money_transfer_code_error", e),
                    (0,
                    p.each)((0,
                    l.geByClass)("_code", "payments_money_transfer_code_wrap"), (function() {
                        (0,
                        l.val)(this, ""),
                        (0,
                        r.notaBene)(this)
                    }
                    )),
                    (0,
                    l.elfocus)("payments_code1"),
                    !0),
                    showProgress: function() {
                        (0,
                        l.hide)("payments_money_transfer_code_wrap"),
                        (0,
                        l.show)("payments_money_transfer_spinner")
                    },
                    hideProgress: function() {
                        (0,
                        l.hide)("payments_money_transfer_spinner"),
                        (0,
                        l.show)("payments_money_transfer_code_wrap")
                    }
                })
            },
            onReceiveMethodChange(e, t, n) {
                (0,
                r.radiobtn)(e, t, n),
                R.updateTransferType(e),
                R.updateCardFee(!0)
            },
            updateTransferType(e) {
                void 0 !== cur.paymentsOptions.forceType ? cur.paymentsOptions.transferType = cur.paymentsOptions.forceType : parseInt(cur.uiTransferCard.val()) === M ? cur.paymentsOptions.transferType = I : cur.paymentsOptions.onlyCards ? cur.paymentsOptions.transferType = 0 : (void 0 === e && (0,
                p.each)(radioBtns.receiveOptions.els, (function() {
                    (0,
                    l.hasClass)(this, "on") && (e = this)
                }
                )),
                void 0 !== e && (cur.paymentsOptions.transferType = (0,
                p.intval)((0,
                l.attr)(e, "data-type")))),
                R.checkAmount((0,
                l.val)("transfer_amount"), !1, !0)
            },
            updateCardFee(e) {
                if (cur.uiTransferCard && "request" !== cur.paymentsOptions.boxTab) {
                    var t = (0,
                    p.intval)((0,
                    l.val)("transfer_amount"))
                      , n = R.getTransferLimit("minAmount")
                      , r = (0,
                    l.ge)("payments_money_transfer_to_card")
                      , i = cur.uiTransferCard.val()
                      , o = cur.paymentsOptions.cardsFee[i]
                      , a = 0 === cur.paymentsOptions.transferType
                      , s = parseInt(i) === M || cur.paymentsOptions.forceType === O || cur.paymentsOptions.forceType === I
                      , c = parseInt(i) !== M && !cur.paymentsOptions.receiverVkpay || 0 === cur.paymentsOptions.forceType
                      , _ = (0,
                    f.getLang)("payments_transfer_without_fee")
                      , u = (0,
                    f.getLang)("payments_money_transfer_btn")
                      , d = s ? "payments_money_transfer_to_vkpay" : "payments_money_transfer_to_card"
                      , h = c
                      , m = 0;
                    if ((0,
                    l.toggleClass)(r, "disabled", s),
                    (0,
                    l.toggleClass)("payments_money_transfer_to_vkpay", "disabled", c),
                    0 === parseInt(i))
                        a && (_ = cur.paymentsOptions.mastercardPromoEnabled ? (0,
                        f.getLang)("payments_transfer_method_without_fee_for_mastercard") : (0,
                        f.getLang)("payments_money_transfer_commission_undefined"));
                    else if (parseInt(i) === M)
                        h = !0;
                    else if (a && o && (o.percent || o.vkPay && o.vkPay.percent)) {
                        var g = o.free_amount_rest || 0
                          , v = o.free_amount_min || 0;
                        if (!g || t > g || v && t < v) {
                            var E = t;
                            t > g && (E = t - g);
                            var y = o.percent || 0
                              , w = o.min || 0
                              , b = o.add || 0;
                            (m = E * y) < w ? m = w : m += b,
                            m = +(Math.round(m + "e+3") + "e-3"),
                            m = +(Math.round(m + "e+2") + "e-2"),
                            _ = (0,
                            f.langNumeric)(m, cur.paymentsOptions.cardsFeeStr, !0)
                        }
                        if (o.vkPay) {
                            var C = t + m
                              , D = o.vkPay.percent || 0
                              , A = o.vkPay.min || 0
                              , S = o.vkPay.add || 0
                              , P = C * D;
                            P < A ? P = A : P += S,
                            m = +(Math.round(m + P + "e+2") + "e-2"),
                            P = +(Math.round(P + "e+2") + "e-2"),
                            _ = (0,
                            f.langNumeric)(m, cur.paymentsOptions.cardsFeeStr, !0),
                            _ += (0,
                            f.langNumeric)(P, cur.paymentsOptions.cardsFeeVkPayStr, !0)
                        }
                    }
                    !d || e && !h || (0,
                    l.ge)(d).classList.contains("on") || (0,
                    l.ge)(d).click(),
                    t >= n && !(0,
                    l.hasClass)("payments_money_transfer_amount_wrap", "money_error") && ((0,
                    l.val)("payments_money_transfer_notice", _),
                    0 === parseInt(i) && a || (u = (0,
                    f.langNumeric)(+(Math.round(t + m + "e+2") + "e-2"), cur.paymentsOptions.buttonAmountStr, !0)));
                    var L = document.querySelector("#payments_money_transfer_send");
                    T.FlatButton.setLabel(L, u)
                }
            },
            isVKPayFillUpEnabled: ()=>1 == cur.paymentsOptions.vkpayFillUpEnabled,
            isVKPayTransfer: ()=>parseInt(cur.paymentsOptions.transferType) === I,
            getBindCards: ()=>cur.paymentsOptions.cards.filter((e=>{
                var t = parseInt(e[0]);
                return 0 !== t && t !== M
            }
            )),
            hideFillUpCardSelection() {
                (0,
                l.hide)("payments_money_transfer_fill_up_cards")
            },
            showFillUpCardSelection() {
                (0,
                l.show)("payments_money_transfer_fill_up_cards")
            },
            isFillUpCardSelectionVisible: ()=>(0,
            l.isVisible)("payments_money_transfer_fill_up_cards")
        }
    }
    ,
    840774: (__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{
        "use strict";
        __webpack_require__.d(__webpack_exports__, {
            PaymentsBox: ()=>PaymentsBox
        });
        var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66108)
          , core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(296253)
          , core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21466)
          , core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59357)
          , _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(315544)
          , _shared_lib_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(40906)
          , _web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(49535)
          , _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(486125)
          , _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(386409)
          , _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(695724)
          , _web_lib_message_box__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(654612)
          , _web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(376852)
          , _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(786067)
          , _shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(726271)
          , _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(479957)
          , _web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(850167)
          , _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(787481)
          , _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(159121)
          , _web_lib_accessibility__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(376270)
          , _web_lib_utils__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(982452)
          , _web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(291587)
          , _shared_evbus__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(182804)
          , _icons_desktop_getIcon24BrowserBack__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(439026)
          , _shared_lib_site__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(961540);
        class PaymentsBox {
            static initHandlers() {
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/ps_promo_banner_click", (e=>{
                    (0,
                    _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments_ps_promo_banner_event", "", "votes_buypage", "relocate"),
                    PaymentsBox.getVotesAmounts(!1, "spasibo", e.payload.target)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/save_phone_prefix_click", (e=>{
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)((0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByTag1)("input", e.payload.target.parentNode), 0, 0)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/save_phone_input", (e=>{
                    13 === e.payload.event.keyCode && PaymentsBox.saveSmsPhone()
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/get_votes_amounts", (e=>{
                    PaymentsBox.getVotesAmounts(!1, e.payload.dataAttrs.name, e.payload.target)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/phone_code_input", (e=>{
                    13 === e.payload.event.keyCode && PaymentsBox.smsSendCode()
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_confirm_on_enter", (e=>{
                    13 === e.payload.event.keyCode && PaymentsBox.showConfirm()
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_confirm", (()=>{
                    PaymentsBox.showConfirm()
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_types", (()=>{
                    PaymentsBox.showTypes()
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_terminal_tt", (e=>{
                    PaymentsBox.paymentsShowTerminalTT(e.payload.target, e.payload.dataAttrs.name)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form", (()=>{
                    PaymentsBox.showPhoneForm(2)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form_1", (()=>{
                    PaymentsBox.showPhoneForm(1)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/show_all_prices", (e=>{
                    PaymentsBox.showAllPrices(e.payload.target)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/change_option", (e=>{
                    var t = e.payload.dataAttrs
                      , n = t.index
                      , r = t.name;
                    PaymentsBox.onChangeOption(e.payload.target, n, r)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/focus_votes", (()=>{
                    PaymentsBox.onChangeOption((0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("last", "payments_getvotes_amounts"), 4, "payments_getvotes_amounts")
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/update_pay_amount", (e=>{
                    PaymentsBox.updatePayAmount(e.payload.target)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/make_checkbox", (e=>{
                    (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.checkbox)(e.payload.target)
                }
                )),
                (0,
                _shared_evbus__WEBPACK_IMPORTED_MODULE_21__.tq)().setInteractiveHandler("PaymentsBox/toggle_email", (e=>{
                    PaymentsBox.toggleEmail(e.payload.target)
                }
                ))
            }
            static initialize(e) {
                PaymentsBox.initHandlers(),
                window.curNotifier && curNotifier.idle_manager && curNotifier.idle_manager.started && ((0,
                _shared_lib_common__WEBPACK_IMPORTED_MODULE_5__.isArray)(cur.onUnidle) || (cur.onUnidle = []),
                (0,
                _shared_lib_common__WEBPACK_IMPORTED_MODULE_5__.isArray)(cur.onIdle) || (cur.onIdle = []),
                cur.onUnidle.push((()=>{
                    cur.getVotesDoneHide = !0
                }
                )),
                cur.onIdle.push((()=>{
                    cur.getVotesDoneHide = !1
                }
                )));
                var t = {
                    bodyStyle: "padding: 0;",
                    hideButtons: !0
                };
                if (cur.paymentsWideBox) {
                    var n = {
                        width: cur.checkoutEnabled ? 800 : 780,
                        height: 390
                    };
                    cur.checkoutEnabled || (n.title = !1),
                    t = (0,
                    _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(t, n)
                } else
                    t = (0,
                    _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(t, {
                        width: 480
                    });
                if (e.setOptions((0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(t, {
                    onClean: ()=>{
                        var t = "sms" === cur.votesType && (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress");
                        for (var n in cur.smsChkStatInt && clearInterval(cur.smsChkStatInt),
                        cur.paymentsWaitingCache)
                            cur.paymentsWaitingCache[n][2] && clearInterval(cur.paymentsWaitingCache[n][2]);
                        cur.smsAmountsInt && clearTimeout(cur.smsAmountsInt),
                        cur.isPaymentsAppOrder && (cur.isPaymentComplete || cur.isPaymentAttemted) ? e.onDone ? e.onDone() : (e.hide(),
                        _web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_20__.AppOrderBox.processOrder(1, e)) : cur.isPaymentsAppOrder && !cur.paymentsCheckOrderCnt && cur.paymentsOrderBillPeriod && cur.onSubscriptionCancel ? cur.onSubscriptionCancel() : cur.isPaymentsAppOrder && !cur.paymentsCheckOrderCnt && cur.onAppOrderCancel ? cur.onAppOrderCancel() : cur.paymentsTryCompleteOrder && (cur.isPaymentComplete || cur.isPaymentAttemted) && e.onDone && e.onDone(),
                        PaymentsBox.removeCheckOffersEvent(),
                        window.removeEventListener("message", PaymentsBox.frameMessage, !1),
                        window.removeEventListener("message", PaymentsBox.handlePaymentCompleteMessage, !1),
                        t && (0,
                        _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showDoneBox)((0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_get_votes_box_close_notice"), {
                            out: 6e3
                        })
                    }
                })),
                (cur.fromInstantPay || cur.paymentsAuthPayment) && (e.onDone = !1),
                cur.votesBox = e,
                cur.destroy.push((()=>{
                    for (; boxQueue.count(); )
                        boxQueue.hideLast(!1)
                }
                )),
                cur.checkoutEnabled)
                    if (cur.paymentsWideBox) {
                        PaymentsBox.showProgress(""),
                        PaymentsBox.submitDmrCheckout(cur.paymentsPreferVotes, !0);
                        var r = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_wide_box_close_btn");
                        r && (r.onclick = cur.votesBox.hide)
                    } else
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_cont"),
                        window.radioBtns.payments_getvotes_amounts = {
                            els: Array.prototype.slice.apply((0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn", (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_amounts")))
                        },
                        PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm);
                else
                    cur.votesTypeInit && (PaymentsBox.getVotesAmounts(!1, cur.votesTypeInit),
                    cur.votesTypeInit = !1)
            }
            static initPhoneCountry(e, t) {
                cur.countries = e,
                cur.defCountry = t,
                cur.uiPhoneCountry = new Dropdown((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("phone_country"),cur.countries,{
                    selectedItems: t,
                    big: !0,
                    autocomplete: !0,
                    multiselect: !1,
                    onChange: e=>{
                        var t = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("phone")
                          , n = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_phone_prefix")
                          , r = cur.uiPhoneCountry.val_full()[3];
                        if (0 === e || "0" === e || "" === e || !1 === e || void 0 === e) {
                            var i = (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(n);
                            if (r == i)
                                return;
                            for (var o = 0, a = cur.countries.length; o < a; ++o)
                                if (cur.countries[o][3] == i)
                                    return cur.uiPhoneCountry.val(cur.countries[o]);
                            return cur.uiPhoneCountry.val(cur.defCountry, !0)
                        }
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(n, r),
                        setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus.pbind(t), 0)
                    }
                }),
                cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))
            }
            static initPhoneNumber(e) {
                e && ["input", "keydown", "keyup", "mousedown", "mouseup", "select", "contextmenu", "drop"].forEach((function(t) {
                    e.addEventListener(t, (e=>{
                        var t = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domClosestByTag)("input", e.target);
                        t && (t.value = t.value.replace(/\D/g, ""))
                    }
                    ))
                }
                ))
            }
            static validateEmail(e) {
                return e.length < 64 && e.match(/^.{1,40}@.{1,40}$/) && e.match(/^([a-z0-9_\-]{0,40}\.){0,10}[a-z0-9_\-*]{1,40}@(([a-z0-9][a-z0-9_\-]{0,40})?[a-z0-9]\.){1,6}[a-z]{2,7}$/i)
            }
            static getEmail() {
                var e = !1;
                if (cur.paymentsEmailCheckbox)
                    if ((0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)(cur.paymentsEmailCheckbox)) {
                        if (!(e = (0,
                        _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.trim)((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(cur.paymentsEmailInput))))
                            return (0,
                            _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(cur.paymentsEmailInput),
                            ""
                    } else
                        e = "false";
                return e
            }
            static toggleEmail(e) {
                "INPUT" === e.tagName && (e = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("checkbox", (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(e)),
                (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)(e)) || ((0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.checkbox)(e),
                (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)(e) && (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(cur.paymentsEmailInput))
            }
            static unbind(e, t, n, r) {
                if (!(0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isButtonLocked)("payments_getvotes_submit")) {
                    var i = cur.paymentsPreferVotes;
                    if (n) {
                        var o = {
                            act: "a_del_instant_method",
                            type: e,
                            prefer_votes: r ? -1 : i,
                            hash: t
                        };
                        cur.isPaymentsAppOrder && cur.paymentsOrderAppId && (o.aid = cur.paymentsOrderAppId),
                        ajax.post("al_payments.php", o, {
                            onDone: PaymentsBox.getVotesAmountsOnDone,
                            onFail: function(e) {
                                return PaymentsBox.showBoxError(e),
                                !0
                            },
                            showProgress: ()=>{
                                cur.confirmBox ? cur.confirmBox.showProgress() : (0,
                                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit")
                            }
                            ,
                            hideProgress: ()=>{
                                cur.confirmBox ? cur.confirmBox.hide() : (0,
                                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit")
                            }
                        })
                    } else {
                        var a = "card" == e ? (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_unbind_card_confirm") : (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_revoke_token_confirm");
                        cur.confirmBox = (0,
                        _web_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)({
                            title: (0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_action_confirmation"),
                            dark: 1,
                            forceNoBtn: 1,
                            bodyStyle: "padding: 20px; line-height: 160%;"
                        }, a, (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_unbind_card_btn"), (()=>{
                            PaymentsBox.unbind(e, t, !0)
                        }
                        ), (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_cancel"))
                    }
                }
            }
            static instantPay() {
                if (!(0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isButtonLocked)("payments_getvotes_submit")) {
                    var e = (0,
                    _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();
                    if (cur.isPaymentAttemted = !0,
                    cur.paymentsAuthPayment)
                        e.hide();
                    else {
                        var t, n, r;
                        if ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_amounts") && (cur.votesAmountsVal = (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.radioval)("payments_getvotes_amounts")),
                        void 0 === cur.votesAmountsData[cur.votesAmountsVal]) {
                            var i = (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_num") ? parseInt((0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_num").value, 10) : 0;
                            if (!(i > 0))
                                return;
                            cur._otherVotes = i,
                            t = cur._otherAmount,
                            n = cur._otherAmount,
                            r = cur.votesAmountCustomTimeHash
                        } else
                            t = cur.votesAmountsData[cur.votesAmountsVal][2],
                            n = cur.votesAmountsData[cur.votesAmountsVal][3],
                            r = cur.votesAmountsData[cur.votesAmountsVal][4];
                        var o = {
                            act: "a_getvotes_charge",
                            type: cur.votesType,
                            instant_pay: 1,
                            amount: t,
                            order_amount: n,
                            hash: r
                        };
                        cur.statSessionId && (o.stat_session_id = cur.statSessionId),
                        cur.isPaymentsAppOrder && cur.paymentsOrderId && (o.order_id = cur.paymentsOrderId,
                        o.order_app_id = cur.paymentsOrderAppId,
                        o.order_bill_period = cur.paymentsOrderBillPeriod,
                        o.order_hash = cur.paymentsOrderHash),
                        PaymentsBox.disablePaymentTypesRows(),
                        ajax.post("al_payments.php", o, {
                            onDone: (e,t)=>{
                                cur.smsChkStatCnt = 0,
                                cur.smsChkStatInt = setInterval((()=>{
                                    PaymentsBox.checkStatus(cur.votesType, e)
                                }
                                ), 2e3),
                                PaymentsBox.showProgress && PaymentsBox.showProgress()
                            }
                            ,
                            onFail: e=>(PaymentsBox.showBoxError(e),
                            !0),
                            showProgress: _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind("payments_getvotes_submit"),
                            hideProgress: _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind("payments_getvotes_submit")
                        })
                    }
                }
            }
            static showAllPrices(e) {
                return (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn", (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_amounts")), ((e,t)=>{
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(t)
                }
                )),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(e),
                !1
            }
            static paymentsShowTerminalTT(e, t) {
                var n = "";
                cur.paymentsTooltips[t] && (n += cur.paymentsTooltips[t]),
                n && (0,
                _web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_11__.showTooltip)(e, {
                    text: n,
                    dir: "auto",
                    slide: 15,
                    className: "payments_terminal_tt",
                    shift: [-3, 3],
                    hasover: 1
                })
            }
            static updatePayAmount(o) {
                var v = o.value.replace(/[^0-9]/g, "")
                  , i = (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.intval)(parseInt(v, 10));
                v = i < 1e4 ? i : parseInt(i.toString().substr(0, 4), 10),
                o.value != v && (o.value = v);
                var amount = 0;
                if (cur.votesAmountsData.calcPayAmount) {
                    -1 == cur.votesAmountsData.calcPayAmount.indexOf("return") && (cur.votesAmountsData.calcPayAmount = "return " + cur.votesAmountsData.calcPayAmount);
                    var calcFunc = "(function(votes){" + cur.votesAmountsData.calcPayAmount + ";})(" + v + ")";
                    try {
                        amount = eval(calcFunc)
                    } catch (e) {
                        (0,
                        _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e, calcFunc)
                    }
                    amount = amount ? Math.ceil(100 * amount) / 100 : 0,
                    amount = parseInt(amount, 10) == amount ? amount.toFixed(0) : amount.toFixed(2),
                    cur._otherAmount = amount,
                    cur._otherVotes = v
                }
                var bonusElement = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_other_votes_bonus");
                if (bonusElement && (cur.votesAmountsData.bonusesTable || cur.votesAmountsData.calcBonusVotes)) {
                    var bonus = 0;
                    if (cur.votesAmountsData.calcBonusVotes) {
                        var _calcFunc = "(function(votes){" + cur.votesAmountsData.calcBonusVotes + ";})(" + v + ")";
                        try {
                            bonus = eval(_calcFunc)
                        } catch (e) {
                            (0,
                            _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e, _calcFunc)
                        }
                    } else
                        for (var j in cur.votesAmountsData.bonusesTable)
                            if (v >= j) {
                                var _bonus = Math.floor(v * cur.votesAmountsData.bonusesTable[j] / j);
                                _bonus > bonus && (bonus = _bonus)
                            }
                    bonus ? (bonusElement.innerHTML = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_bonus_votes", bonus),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(bonusElement)) : (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(bonusElement)
                }
                cur.votesAmountsData.currency_str ? (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_amount").innerHTML = amount > 0 ? (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.langNumeric)(amount, cur.votesAmountsData.currency_str) : "" : (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_amount").innerHTML = amount > 0 ? (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_votes_cost_in_rubles", amount) : ""
            }
            static onChangeOption(e, t, n) {
                var r;
                if ((0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.radiobtn)(e, t, n),
                "payments_getvotes_amounts" === n) {
                    var i = cur.votesAmountsData[t];
                    i ? (cur.votesAmountsVal = t,
                    r = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_get_votes_for_X").replace("{amount}", i[1]),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("votes_num", ""),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("votes_amount", ""),
                    cur.paymentsEmailCheckbox && (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)(cur.paymentsEmailCheckbox) && (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(cur.paymentsEmailInput)) : (r = cur.payments_get_votes,
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("votes_num")),
                    cur.checkoutEnabled ? PaymentsBox.setButtons(r, PaymentsBox.showConfirm) : PaymentsBox.setButtons(r, cur.votesAmountIsInstant || i && i.length >= 5 ? PaymentsBox.instantPay : PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes)
                }
            }
            static setConfirmButtons() {
                if ("card" != cur.votesType && cur.psList[cur.votesType]) {
                    var e = cur.paymentsWideBox ? (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_back_to_ps_list") : (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_go_ps_list")
                      , t = !cur.psList[cur.votesType].in_menu;
                    cur.paymentsInstantPayType == cur.votesType ? t ? PaymentsBox.setButtons((0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_pay_order_btn"), PaymentsBox.instantPay, e, PaymentsBox.showPaySystemsList) : PaymentsBox.setButtons((0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_pay_order_btn"), PaymentsBox.instantPay) : t ? PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm, e, PaymentsBox.showPaySystemsList) : PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm)
                } else
                    cur.checkoutEnabled ? PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm) : PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes)
            }
            static popupWrite(e) {
                return !(e.document.innerHTML == cur._popup_text || !cur._popup_text) && (e.document.write(cur._popup_text),
                e.document.close(),
                e.blur(),
                e.focus(),
                cur._popup_callback && cur._popup_callback(),
                !0)
            }
            static show3DsFrame(e, t) {
                if (cur.threeds_submitted)
                    return !0;
                cur.threeds_submitted = !0;
                var n = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container")
                  , r = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("cards_iframe");
                r || ((r = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("iframe", {
                    id: "card_iframe",
                    name: "card_iframe"
                }, {
                    border: 0,
                    height: "435px",
                    width: n.parentNode.offsetWidth + "px",
                    overflowX: "hidden",
                    overflowY: "hidden"
                })).frameBorder = 0,
                n.innerHTML = "",
                n.appendChild(r));
                var i = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("form", {
                    target: "card_iframe",
                    method: "POST",
                    action: e
                });
                for (var o in t)
                    Object.prototype.hasOwnProperty.call(t, o) && i.appendChild((0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("input", {
                        type: "hidden",
                        name: o,
                        value: t[o]
                    }));
                n.appendChild(i),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)("payments_iframe_container", cur.checkoutEnabled ? "payments_threeds_checkout_frame" : "payments_threeds_frame"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_iframe_container"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_progress"),
                i.submit()
            }
            static submitDmrCheckout(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                if (!(0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress") || t) {
                    (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit");
                    var n = cur.psList.dmr_checkout
                      , r = !1
                      , i = (e * n.vote_cost).toFixed(2);
                    if (!e || e <= 0 ? r = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_web_no_sum") : n.min_amount && e < n.min_amount ? r = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_min_amount_limit_votes").replace("%s", n.min_amount) : n.max_amount && e > n.max_amount ? r = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_max_amount_limit_votes").replace("%s", n.max_amount) : void 0 !== n.rest_amount_day && e > n.rest_amount_day ? r = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_rest_amount_day_votes").replace("%s", n.rest_amount_day) : void 0 !== n.rest_amount_week && e > n.rest_amount_week && (r = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_rest_amount_week_votes").replace("%s", n.rest_amount_week)),
                    r)
                        return PaymentsBox.showBoxError(r),
                        !1;
                    var o = PaymentsBox.getEmail();
                    if ("" === o)
                        return (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        !1;
                    if (o && "false" !== o && !PaymentsBox.validateEmail(o))
                        return (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(cur.paymentsEmailInput),
                        PaymentsBox.showBoxError((0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_error_invalid_email")),
                        !1;
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("payments_iframe_container", "payments_threeds_checkout_frame");
                    var a = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container")
                      , s = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("iframe", {
                        id: "card_iframe",
                        name: "card_iframe"
                    }, {
                        border: 0,
                        height: "435px",
                        width: a.parentNode.offsetWidth + "px",
                        overflowX: "hidden",
                        overflowY: "hidden",
                        display: "block",
                        borderRadius: "0 0 4px 4px"
                    });
                    s.frameBorder = 0,
                    a.innerHTML = "",
                    a.style.height = s.style.height,
                    a.appendChild(s),
                    window.addEventListener("message", PaymentsBox.frameMessage, !1);
                    var c = cur.votesType;
                    !c && cur.votesTypeInit && (c = cur.votesTypeInit);
                    var _ = {
                        act: "a_getvotes_charge",
                        type: "dmr_checkout",
                        hash: cur.paymentsHash,
                        amount: i,
                        stat_session_id: cur.statSessionId,
                        votes: e
                    };
                    c && (_.pay_method = c),
                    cur.paymentsAuthPayment && (_.only_auth = 1),
                    o && (_.email = o),
                    cur.votesAmountsData.appoveCode && (_.approve_code = cur.votesAmountsData.appoveCode),
                    cur.isPaymentsAppOrder && cur.paymentsOrderId && (_.order_id = cur.paymentsOrderId,
                    _.order_app_id = cur.paymentsOrderAppId,
                    _.order_bill_period = cur.paymentsOrderBillPeriod,
                    _.order_hash = cur.paymentsOrderHash),
                    cur.votesAmountsData.purchaseDescr && (_.purchase_descr = cur.votesAmountsData.purchaseDescr),
                    PaymentsBox.trackingProtectionEnabled((function() {
                        (0,
                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", 0, "votes", "dmr_checkout", "iframe_track_protection_enabled")
                    }
                    ), (function() {
                        (0,
                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", 0, "votes", "dmr_checkout", "iframe_track_protection_disabled")
                    }
                    )),
                    ajax.post("al_payments.php", _, {
                        onDone: function(t, r, o) {
                            if (t) {
                                if (-2 == t) {
                                    var a = (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_money_amount_rub", Math.floor(i));
                                    return (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_confirm_msg", r),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_num", e),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_amount", a),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_money", (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_money_for_votes", e).replace("{money}", a)),
                                    cur.votesAmountsData.resend_msg && (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_sms_resend", cur.votesAmountsData.resend_msg),
                                    cur.votesAmountsData.confirm_hash = o,
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("confcode", ""),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_confcode_wrap"),
                                    PaymentsBox.enablePaymentTypesRows(),
                                    void PaymentsBox.approveGetCode()
                                }
                                if ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") && PaymentsBox.showVotesAmounts(),
                                !cur.paymentsWideBox) {
                                    var s = (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_submit");
                                    PaymentsBox.setButtons(s.innerHTML, PaymentsBox.showConfirm, (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_back"), PaymentsBox.showVotesAmounts)
                                }
                                cur._popup_text = r,
                                cur._popup_callback = !1,
                                cur._popup_callback = function() {
                                    (0,
                                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_wrap", "payments_getvotes_buttons", "payments_box_progress", "payments_box_error"),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_iframe_container"),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container").scrollTop = 0
                                }
                                ;
                                var c = (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("card_iframe");
                                c.contentWindow.document.open("text/html", "replace"),
                                c.contentWindow.document.write(r),
                                c.contentWindow.document.close(),
                                cur._popup_callback(),
                                cur.smsChkData = t,
                                cur.isPaymentComplete = cur.isPaymentCanceled = cur.isPaymentFailed = !1,
                                cur.smsChkStatCnt = 0,
                                cur.smsChkStatInt = setInterval((function() {
                                    PaymentsBox.checkStatus("dmr_checkout", t),
                                    n.use_iframe && (cur.isPaymentCanceled || cur.isPaymentFailed) ? (clearInterval(cur.smsChkStatInt),
                                    PaymentsBox.showVotesAmounts(),
                                    cur.isPaymentFailed ? PaymentsBox.showBoxError((0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_landing_cancelled")) : PaymentsBox.showBoxError((0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled")),
                                    window.removeEventListener("message", PaymentsBox.frameMessage, !1)) : cur.isPaymentComplete && "dmr_checkout" != n.name && PaymentsBox.showTypes()
                                }
                                ), 2e3)
                            }
                        },
                        onFail: e=>((0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isButtonLocked)("payments_getvotes_submit") || PaymentsBox.setConfirmButtons(),
                        PaymentsBox.showBoxError(e),
                        !0),
                        frame: _shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.safari_mobile
                    })
                }
            }
            static submitCard(e) {
                if (!(0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")) {
                    (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit");
                    var t = cur.psList.card
                      , n = !1
                      , r = (e * t.vote_cost).toFixed(2);
                    if (!e || e <= 0 ? n = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_web_no_sum") : t.min_amount && e < t.min_amount ? n = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_min_amount_limit_votes").replace("%s", t.min_amount) : t.max_amount && e > t.max_amount ? n = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_max_amount_limit_votes").replace("%s", t.max_amount) : null != t.rest_amount_day && e > t.rest_amount_day ? n = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_rest_amount_day_votes").replace("%s", t.rest_amount_day) : null != t.rest_amount_week && e > t.rest_amount_week && (n = (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_rest_amount_week_votes").replace("%s", t.rest_amount_week)),
                    n)
                        return PaymentsBox.showBoxError(n),
                        !1;
                    var i, o = PaymentsBox.getEmail();
                    if ("" === o)
                        return (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        !1;
                    if (o && "false" !== o && !PaymentsBox.validateEmail(o))
                        return (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)(cur.paymentsEmailInput),
                        PaymentsBox.showBoxError((0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_error_invalid_email")),
                        !1;
                    if (cur.votesAmountsData.needApprove) {
                        var a = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_money_amount_rub", Math.floor(r));
                        return (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_confirm_msg", cur.votesAmountsData.needApprove),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_num", e),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_amount", a),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_money", (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_money_for_votes", e).replace("{money}", a)),
                        cur.votesAmountsData.resend_msg && (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_sms_resend", cur.votesAmountsData.resend_msg),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("confcode", ""),
                        delete cur.votesAmountsData.needApprove,
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_confcode_wrap"),
                        void PaymentsBox.approveGetCode()
                    }
                    if (PaymentsBox.disablePaymentTypesRows(),
                    t.use_iframe) {
                        var s = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container")
                          , c = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("iframe", {
                            id: "card_iframe",
                            name: "card_iframe"
                        }, {
                            border: 0,
                            height: "435px",
                            width: s.parentNode.offsetWidth + "px",
                            overflowX: "hidden",
                            overflowY: "hidden"
                        });
                        c.frameBorder = 0,
                        s.innerHTML = "",
                        s.appendChild(c),
                        window.addEventListener("message", PaymentsBox.frameMessage, !1)
                    } else {
                        i = window.open("", "_blank", "scrollbars=1, resizable=1, menubar=1, left=0, top=0, toolbar=1, status=1"),
                        cur._popup_text = PaymentsBox.popupHtml((0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_cards_redirect"), "", ""),
                        PaymentsBox.popupWrite(i)
                    }
                    var _ = {
                        act: "a_getvotes_charge",
                        type: "card",
                        hash: cur.paymentsHash,
                        amount: r,
                        stat_session_id: cur.statSessionId
                    };
                    cur.paymentsAuthPayment && (_.only_auth = 1),
                    o && (_.email = o),
                    cur.votesAmountsData.appoveCode && (_.approve_code = cur.votesAmountsData.appoveCode),
                    cur.isPaymentsAppOrder && cur.paymentsOrderId && (_.order_id = cur.paymentsOrderId,
                    _.order_app_id = cur.paymentsOrderAppId,
                    _.order_bill_period = cur.paymentsOrderBillPeriod,
                    _.order_hash = cur.paymentsOrderHash),
                    PaymentsBox.trackingProtectionEnabled((function() {
                        (0,
                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", 0, "votes", "dmr", "iframe_track_protection_enabled")
                    }
                    ), (function() {
                        (0,
                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", 0, "votes", "dmr", "iframe_track_protection_disabled")
                    }
                    )),
                    ajax.post("al_payments.php", _, {
                        onDone: function(n, o, a) {
                            if (n) {
                                if (-2 == n) {
                                    t.use_iframe || i.close();
                                    var s = (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_money_amount_rub", Math.floor(r));
                                    return (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_confirm_msg", o),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_num", e),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_amount", s),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_money", (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_money_for_votes", e).replace("{money}", s)),
                                    cur.votesAmountsData.resend_msg && (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_sms_resend", cur.votesAmountsData.resend_msg),
                                    cur.votesAmountsData.confirm_hash = a,
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("confcode", ""),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_confcode_wrap"),
                                    PaymentsBox.enablePaymentTypesRows(),
                                    void PaymentsBox.approveGetCode()
                                }
                                if ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") && PaymentsBox.showVotesAmounts(),
                                t.use_iframe || ((0,
                                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                                PaymentsBox.showProgress()),
                                cur._popup_text = o,
                                cur._popup_callback = !1,
                                t.use_iframe) {
                                    cur._popup_callback = function() {
                                        (0,
                                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                                        (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_wrap", "payments_getvotes_buttons", "payments_box_progress", "payments_box_error"),
                                        (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_iframe_container"),
                                        (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container").scrollTop = 0
                                    }
                                    ;
                                    var c = (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("card_iframe");
                                    c.contentWindow.document.open("text/html", "replace"),
                                    c.contentWindow.document.write(o),
                                    c.contentWindow.document.close(),
                                    cur._popup_callback()
                                } else
                                    i.document.open("text/html", "replace"),
                                    i.document.write(o),
                                    i.document.close(),
                                    i.blur(),
                                    i.focus();
                                cur.smsChkData = n,
                                cur.isPaymentComplete = cur.isPaymentCanceled = cur.isPaymentFailed = !1,
                                cur.smsChkStatCnt = 0,
                                cur.smsChkStatInt = setInterval((function() {
                                    PaymentsBox.checkStatus("card", n),
                                    !t.use_iframe && i.closed ? setTimeout((function() {
                                        cur.isPaymentComplete || (clearInterval(cur.smsChkStatInt),
                                        PaymentsBox.showBoxError((0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled"), "info_msg"),
                                        PaymentsBox.setConfirmButtons())
                                    }
                                    ), 500) : t.use_iframe && (cur.isPaymentCanceled || cur.isPaymentFailed) ? (clearInterval(cur.smsChkStatInt),
                                    PaymentsBox.showVotesAmounts(),
                                    cur.isPaymentFailed ? PaymentsBox.showBoxError((0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_landing_cancelled")) : PaymentsBox.showBoxError((0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled")),
                                    window.removeEventListener("message", PaymentsBox.frameMessage, !1)) : cur.isPaymentComplete && "alfabank" != t.name && "dmr" != t.name && PaymentsBox.showTypes()
                                }
                                ), 2e3)
                            }
                        },
                        onFail: function(e) {
                            return t.use_iframe || i.close(),
                            (0,
                            _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isButtonLocked)("payments_getvotes_submit") || PaymentsBox.setConfirmButtons(),
                            PaymentsBox.showBoxError(e),
                            !0
                        },
                        frame: _shared_lib_browser__WEBPACK_IMPORTED_MODULE_13__.browser.safari_mobile
                    })
                }
            }
            static trackingProtectionEnabled(e, t) {
                var n = new XMLHttpRequest;
                n.open("GET", "https://top-fwz1.mail.ru/counter2?id=1", !0),
                n.onreadystatechange = function() {
                    200 !== n.status ? e() : t(),
                    n.onreadystatechange = null
                }
                ,
                n.send()
            }
            static submitPaymentSystem(e) {
                if (!(0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress")) {
                    var t = cur.votesType
                      , n = cur.psList[t]
                      , r = !1
                      , i = 0
                      , o = 0
                      , a = 0
                      , s = 0;
                    if (!n.simple_redirect) {
                        if (!e)
                            return;
                        i = (e * n.vote_cost).toFixed(2),
                        o = (e * n.vote_cost / cur.usdRate).toFixed(2),
                        a = Math.floor(i),
                        s = 100 * (i - a),
                        !e || e <= 0 ? r = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_web_no_sum") : n.min_amount && e < n.min_amount ? r = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_min_amount_limit_votes").replace("%s", n.min_amount) : n.max_amount && e > n.max_amount ? r = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_max_amount_limit_votes").replace("%s", n.max_amount) : null != n.rest_amount_day && e > n.rest_amount_day ? r = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_rest_amount_day_votes").replace("%s", n.rest_amount_day) : null != n.rest_amount_week && e > n.rest_amount_week && (r = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_rest_amount_week_votes").replace("%s", n.rest_amount_week))
                    }
                    if (r)
                        return PaymentsBox.showBoxError(r),
                        !1;
                    var c = PaymentsBox.getEmail();
                    if ("" !== c)
                        if (!c || "false" === c || PaymentsBox.validateEmail(c)) {
                            if (PaymentsBox.showProgress(),
                            PaymentsBox.disablePaymentTypesRows(),
                            "mailmoney_vkpay" === t) {
                                var _ = {
                                    act: "a_getvotes_charge",
                                    type: t,
                                    hash: cur.paymentsHash,
                                    amount: i,
                                    random_auth: 0,
                                    stat_session_id: cur.statSessionId
                                };
                                ajax.post("al_payments.php", _, {
                                    onDone: e=>{
                                        var t = (0,
                                        _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()
                                          , n = {
                                            noLocChange: 1,
                                            skipBoxesHide: 1,
                                            noClickHide: 1
                                        };
                                        cur.isPaymentsAppOrder ? cur.app.openAppInLayer(e, !1, !0, n) : (0,
                                        _web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_15__.showWiki)({
                                            w: e
                                        }, !1, !1, n),
                                        t._hide(!1, !0),
                                        cur.onExternalAppDone = e=>{
                                            t._show(),
                                            e.status || (PaymentsBox.showBoxError((0,
                                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled"), "info_msg"),
                                            PaymentsBox.setConfirmButtons(),
                                            clearInterval(cur.smsChkStatInt)),
                                            cur.onExternalAppDone = null,
                                            window.WkView && WkView.hide(!1, !0)
                                        }
                                        ,
                                        cur.smsChkStatCnt = 0,
                                        cur.smsChkStatInt = setInterval((function() {
                                            PaymentsBox.checkStatus(cur.votesType, _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.data, null, t)
                                        }
                                        ), 2e3)
                                    }
                                    ,
                                    onFail: e=>(PaymentsBox.showBoxError(e),
                                    PaymentsBox.setConfirmButtons(),
                                    !0)
                                })
                            } else {
                                if (cur.votesAmountsData.oauth_url && (!(0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_remember_wallet") || (0,
                                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)("payments_remember_wallet"))) {
                                    var l = cur.votesAmountsData.oauth_params
                                      , u = "";
                                    for (var d in l) {
                                        if (Object.prototype.hasOwnProperty.call(l, d))
                                            u += `<input type="hidden" autocomplete="off" name="${d}" value="${l[d]}"/>`
                                    }
                                    var p = (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("paymentSystemsForm");
                                    p.action = cur.votesAmountsData.oauth_url,
                                    p.method = "post",
                                    p.innerHTML = u;
                                    var h = cur.votesAmountsData.popup_params || {}
                                      , m = h.width || 700
                                      , f = h.height || 600
                                      , g = `scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width / 2) - m / 2}, top=${Math.floor(window.screen.height / 2) - f / 2}, width=${m}, height=${f}`
                                      , v = (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payment_redirect").replace("%s", n.title)
                                      , E = `<form action="${p.action}" method="${p.method}" id="popup_payment_form" accept-charset="UTF-8">${p.innerHTML}</form>`;
                                    cur._popup_text = PaymentsBox.popupHtml(v, E, "document.getElementById('popup_payment_form').submit()"),
                                    cur._popup_callback = !1,
                                    window.addEventListener("message", PaymentsBox.handlePaymentCompleteMessage, !1);
                                    var y = window.open("", "_blank", g);
                                    cur.smsChkStatCnt = 0,
                                    cur.oauthState = 0;
                                    var w = 0;
                                    return cur.smsChkStatInt = setInterval((function() {
                                        if (2 == cur.oauthState)
                                            PaymentsBox.checkStatus(cur.votesType, cur.smsChkData);
                                        else if (0 == cur.oauthState && (w = cur.isPaymentComplete && cur.paymentCompleteParams && cur.paymentCompleteParams.code ? cur.paymentCompleteParams.code : 0)) {
                                            cur.oauthState = 1;
                                            var e = {
                                                act: "a_getvotes_charge",
                                                type: t,
                                                oauth_code: w,
                                                hash: cur.paymentsHash,
                                                amount: i,
                                                stat_session_id: cur.statSessionId
                                            };
                                            return cur.paymentsAuthPayment && (e.only_auth = 1),
                                            c && (e.email = c),
                                            void ajax.post("al_payments.php", e, {
                                                onDone: e=>{
                                                    cur.oauthState = 2,
                                                    cur.smsChkData = e
                                                }
                                                ,
                                                onFail: e=>(clearInterval(cur.smsChkStatInt),
                                                PaymentsBox.showBoxError(e),
                                                PaymentsBox.setConfirmButtons(),
                                                !0)
                                            })
                                        }
                                        (y.closed && !cur.isPaymentComplete || cur.isPaymentComplete && !w) && (clearInterval(cur.smsChkStatInt),
                                        cur.isPaymentComplete ? PaymentsBox.showBoxError((0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_sms_money_fail")) : PaymentsBox.showBoxError((0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled"), "info_msg"),
                                        PaymentsBox.setConfirmButtons())
                                    }
                                    ), 2e3),
                                    void PaymentsBox.popupWrite(y)
                                }
                                if (cur.votesAmountsData.provider && -1 !== ["dmr", "paypal", "yandexmoney", "api_provider"].indexOf(cur.votesAmountsData.provider)) {
                                    var b, C = (0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payment_redirect").replace("%s", n.title), T = {
                                        act: "a_getvotes_charge",
                                        type: t,
                                        hash: cur.paymentsHash,
                                        amount: i,
                                        random_auth: 0,
                                        stat_session_id: cur.statSessionId
                                    };
                                    if (c && (T.email = c),
                                    "paypal" === cur.votesAmountsData.provider || "yandexmoney" === cur.votesAmountsData.provider) {
                                        var D;
                                        if ((0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_remember_wallet") ? (T.remember_wallet = (0,
                                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)("payments_remember_wallet") || cur.forceRebind,
                                        cur.forceRebind && (cur.forceRebind = !1)) : T.remember_wallet = 1,
                                        T.remember_wallet) {
                                            var A = cur.votesAmountsData.popup_params || {}
                                              , S = A.width || 700
                                              , P = A.height || 600;
                                            D = `scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width / 2) - S / 2}, top=${Math.floor(window.screen.height / 2) - P / 2}, width=${S}, height=${P}`
                                        } else {
                                            D = "scrollbars=1, resizable=1, menubar=1, left=0, top=0, toolbar=1, status=1"
                                        }
                                        b = T.remember_wallet ? window.open("", "", D) : window.open("", "_blank", D);
                                        var O = (0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payment_redirect").replace("%s", n.title);
                                        cur._popup_text = PaymentsBox.popupHtml(O, "", ""),
                                        PaymentsBox.popupWrite(b)
                                    }
                                    ajax.post("al_payments.php", T, {
                                        onDone: function(e, t, n) {
                                            if (e) {
                                                var r = "api_provider" !== cur.votesAmountsData.provider;
                                                cur.canOpenPopup = r;
                                                var i = !r;
                                                PaymentsBox.checkStatusCallback = e=>{
                                                    if ("paypal" === cur.votesAmountsData.provider || "yandexmoney" === cur.votesAmountsData.provider) {
                                                        if (b && !b.closed && !i) {
                                                            i = !0;
                                                            var t = (0,
                                                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("paymentSystemsForm");
                                                            t.action = e.action,
                                                            t.method = "get";
                                                            var n = "";
                                                            for (var r in e.params) {
                                                                if (Object.prototype.hasOwnProperty.call(e.params, r))
                                                                    n += `<input type="hidden" autocomplete="off" name="${r}" value="${e.params[r]}"/>`
                                                            }
                                                            t.innerHTML = n;
                                                            var o = `<form action="${t.action}" method="${t.method}" id="popup_payment_form" accept-charset="UTF-8">${t.innerHTML}</form>`;
                                                            cur._popup_text = PaymentsBox.popupHtml(C, o, "document.getElementById('popup_payment_form').submit()"),
                                                            PaymentsBox.popupWrite(b)
                                                        }
                                                        (b.closed && !cur.isPaymentComplete || cur.isPaymentComplete) && (clearInterval(cur.smsChkStatInt),
                                                        PaymentsBox.showBoxError(cur.isPaymentComplete ? (0,
                                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_sms_money_fail") : (0,
                                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled")),
                                                        PaymentsBox.setConfirmButtons())
                                                    } else
                                                        cur._popup || (cur._popup = window.open("", "_blank"))
                                                }
                                                ,
                                                cur.smsChkData = e,
                                                cur.smsChkStatCnt = 0,
                                                cur.smsChkStatInt = setInterval((()=>{
                                                    PaymentsBox.checkStatus(cur.votesType, e)
                                                }
                                                ), 2e3)
                                            }
                                        },
                                        onFail: function(e) {
                                            return (0,
                                            _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isButtonLocked)("payments_getvotes_submit") || PaymentsBox.setConfirmButtons(),
                                            PaymentsBox.showBoxError(e),
                                            !0
                                        }
                                    })
                                } else {
                                    if (!cur.isAdsPayment) {
                                        var I = {
                                            act: "a_getvotes_invoice",
                                            type: cur.votesType,
                                            amount: i,
                                            votes: e,
                                            invoice_hash: cur.votesAmountsData.invoice_hash,
                                            stat_session_id: cur.statSessionId
                                        };
                                        ajax.post("al_payments.php", I)
                                    }
                                    var M = n.gate_params
                                      , R = ""
                                      , L = (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("paymentSystemsForm")
                                      , k = (new Date).getTime();
                                    for (var B in M)
                                        if (Object.prototype.hasOwnProperty.call(M, B)) {
                                            var x = M[B];
                                            R += `<input type="hidden" autocomplete="off" name="${B}" value="${x = (x = (x = (x = (x = (x = x.replace("{amount_votes}", e)).replace("{amount_rub}", i)).replace("{amount_usd}", o)).replace("{amount_rub_int}", a)).replace("{amount_rub_frac}", s)).replace("{time}", k)}"/>`
                                        }
                                    var N = n.gate_url;
                                    N = (N = (N = (N = (N = (N = N.replace("{time}", k)).replace("{amount_votes}", e)).replace("{amount_rub}", i)).replace("{amount_usd}", o)).replace("{amount_rub_int}", a)).replace("{amount_rub_frac}", s),
                                    L.action = N,
                                    L.method = n.gate_method,
                                    L.innerHTML = R;
                                    var U = !1;
                                    try {
                                        var W = (0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payment_redirect").replace("%s", n.title)
                                          , F = `<form action="${L.action}" method="${L.method}" id="popup_payment_form" accept-charset="${n.gate_charset}">${L.innerHTML}</form>`;
                                        cur._popup_text = PaymentsBox.popupHtml(W, F, `Payments.submitPopupForm("${t}", "${e}", "${i}", "${o}")`),
                                        cur._popup_callback = !1,
                                        U = window.open("", "_blank", "scrollbars=1, resizable=1, menubar=1, left=0, top=0, toolbar=1, status=1"),
                                        (0,
                                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", "", "votes", t, "start"),
                                        cur.smsChkData = !1,
                                        cur.isPaymentComplete = !1,
                                        cur.smsChkStatCnt = 0,
                                        cur.smsChkStatInt = setInterval((function() {
                                            PaymentsBox.checkStatus(cur.votesType, !1),
                                            U.closed && !cur.isPaymentComplete && (clearInterval(cur.smsChkStatInt),
                                            PaymentsBox.showBoxError((0,
                                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled"), "info_msg"),
                                            n.simple_redirect ? PaymentsBox.setButtons(!1, !1, cur.paymentsChangeType, PaymentsBox.showTypes) : PaymentsBox.setConfirmButtons())
                                        }
                                        ), 2e3),
                                        PaymentsBox.popupWrite(U)
                                    } catch (e) {
                                        L.submit()
                                    }
                                    c && ajax.post("al_payments.php", {
                                        act: "a_set_receipt_email",
                                        email: c,
                                        hash: cur.paymentsHash
                                    }, {
                                        onFail: e=>!0
                                    })
                                }
                            }
                        } else
                            PaymentsBox.showBoxError((0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_error_invalid_email"))
                }
            }
            static approveSendCode() {
                var e = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("confcode").value;
                if (e.length) {
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_error");
                    for (var t = 0, n = 0; n < e.length; n++)
                        t += parseInt(e[n]);
                    if ((t %= 10) != cur.votesAmountsData.approveCodeChk)
                        return PaymentsBox.showBoxError((0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_invalid_code")),
                        void (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("confcode");
                    cur.votesAmountsData.appoveCode = e,
                    PaymentsBox.showConfirm()
                } else
                    (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("confcode")
            }
            static approveGetCode(e) {
                (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit");
                var t = {
                    act: "a_getvotes_approve_code",
                    hash: cur.votesAmountsData.confirm_hash
                };
                return e && (t.resend = 1),
                ajax.post("al_payments.php", t, {
                    onDone: function(t, n) {
                        (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        1 == t ? PaymentsBox.showBoxError(n) : e || (cur.votesAmountsData.approveCodeChk = n,
                        PaymentsBox.refreshBox(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_confirm"),
                        PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.approveSendCode, cur.paymentsChangeType, cur.checkoutEnabled ? PaymentsBox.showVotesAmounts : PaymentsBox.showTypes))
                    },
                    onFail: function(e) {
                        return PaymentsBox.showBoxError(e),
                        PaymentsBox.setConfirmButtons(),
                        !0
                    }
                }),
                !1
            }
            static smsSendPin() {
                if (null == cur.votesAmountsVal)
                    return !1;
                var e = cur.votesAmountsData[cur.votesAmountsVal][3]
                  , t = cur.votesAmountsData[cur.votesAmountsVal][2];
                if (4 != e && 8 != t && (2 != e || 5 != t))
                    return !1;
                var n = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("confcode").value;
                n.length && ((0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit"),
                ajax.post("al_payments.php", {
                    act: "a_getvotes_validate",
                    code: n,
                    oid: cur.votesAmountsData[cur.votesAmountsVal][3],
                    qid: cur.smsChkData.qid,
                    hash: cur.smsChkData.hash
                }, {
                    onDone: function() {
                        (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        PaymentsBox.showProgress(),
                        cur.smsChkStatCnt = 0,
                        cur.smsChkStatInt = setInterval(PaymentsBox.checkStatus.pbind("sms", cur.smsChkData), 2e3)
                    },
                    onFail: function(e) {
                        return PaymentsBox.showBoxError(e),
                        !0
                    }
                }))
            }
            static smsSendCode() {
                if ("card" === cur.votesType)
                    return !1;
                if (null != cur.votesAmountsVal) {
                    var e = cur.votesAmountsData[cur.votesAmountsVal][3]
                      , t = cur.votesAmountsData[cur.votesAmountsVal][2];
                    if (4 == e || 8 == t || 2 == e && 5 == t)
                        return PaymentsBox.smsSendPin()
                }
                var n = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("confcode").value;
                n.length ? ((0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit"),
                ajax.post("al_payments.php", {
                    act: "a_getvotes_validate",
                    pid: cur.votesAmountsVal,
                    code: n,
                    hash: cur.votesAmountsData[cur.votesAmountsVal].hash
                }, {
                    onDone: function(e) {
                        (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        e && 3 == cur.votesAmountsData[cur.votesAmountsVal][2] ? PaymentsBox.getVotesCharge(!1, !0) : e && PaymentsBox.getVotesCharge()
                    },
                    onFail: function(e) {
                        return PaymentsBox.showBoxError(e),
                        !0
                    }
                })) : (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("confcode")
            }
            static smsGetCode(e) {
                (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit");
                var t = {
                    act: "a_getvotes_validate",
                    hash: cur.votesAmountsData[cur.votesAmountsVal].hash,
                    pid: cur.votesAmountsVal
                };
                e && (t.resend = 1),
                ajax.post("al_payments.php", t, {
                    onDone: function(e, t) {
                        (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        2 == e ? (PaymentsBox.showBoxError(t, "ok_msg"),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("confcode")) : e && 3 == cur.votesAmountsData[cur.votesAmountsVal][2] ? PaymentsBox.getVotesCharge(!1, !0) : e ? PaymentsBox.getVotesCharge() : (PaymentsBox.refreshBox(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_confirm"),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("confcode"),
                        cur.paymentsWideBox ? PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.smsSendCode, (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_change_phone_number"), PaymentsBox.showPhoneForm) : PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.smsSendCode, cur.paymentsChangeType, PaymentsBox.showTypes))
                    },
                    onFail: function(e) {
                        return PaymentsBox.showBoxError(e),
                        PaymentsBox.setConfirmButtons(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)("confcode"),
                        !0
                    }
                })
            }
            static confirmPinCode() {
                var e = (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.trim)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("confcode").value);
                if (e.length) {
                    var t = {
                        act: "a_getvotes_confirm_pin",
                        hash: cur.updateTnxHash,
                        ps: cur.votesType,
                        qid: cur.smsChkData.qid,
                        pin: e
                    };
                    PaymentsBox.showProgress(),
                    ajax.post("al_payments.php", t, {
                        onDone: function() {
                            cur.smsChkStatInt = setInterval((()=>{
                                PaymentsBox.checkStatus(cur.votesType, cur.smsChkData)
                            }
                            ), 2e3)
                        },
                        onFail: function(e) {
                            PaymentsBox.refreshBox(),
                            PaymentsBox.showBoxError(e)
                        }
                    })
                } else
                    (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("confcode")
            }
            static checkPinKeyPress(e) {
                if (!((e = e || window.event).ctrlKey || e.altKey || e.metaKey)) {
                    var t = null;
                    if (null === e.which && e.keyCode >= 32 ? t = String.fromCharCode(e.keyCode) : 0 !== e.which && 0 !== e.charCode && e.which >= 32 && (t = String.fromCharCode(e.which)),
                    null !== t)
                        return !(t < "0" || t > "9") && void 0
                }
            }
            static fillBDay() {
                var params = {
                    act: "a_getvotes_fill_bday"
                };
                ajax.post("al_payments.php", params, {
                    onDone: function onDone(js) {
                        if (js)
                            try {
                                eval(js)
                            } catch (e) {
                                (0,
                                _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e, js)
                            }
                    }
                })
            }
            static showOffer(e) {
                var t = {
                    act: "a_getvotes_offer",
                    offer_id: e,
                    offer_aid: cur.paymentsOfferApp || 0,
                    app_currency: cur.offersAppCurrency || 0
                };
                cur.app && cur.app.options && (t.aid = cur.app.options.aid),
                cur.paymentsOfferPreview && (t.offer_view = cur.paymentsOfferPreview),
                ajax.post("al_payments.php", t, {
                    onDone: PaymentsBox.offerOnLoad,
                    onFail: e=>(e && (PaymentsBox.showBoxError(e),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_wrap")),
                    !0)
                })
            }
            static showNextOffers(e) {
                var t = {
                    act: "a_getvotes_amounts",
                    type: "offers",
                    offset: cur.offersOffset,
                    app_currency: cur.offersAppCurrency,
                    hash: cur.paymentsHash
                };
                cur.app && cur.app.options && (t.isAppOrder = cur.paymentsOfferApp ? 1 : 0,
                t.aid = cur.app.options.aid),
                ajax.post("al_payments.php", t, {
                    onDone: function(t, n) {
                        n && (t || (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(e),
                        cur.offersOffset += 20,
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_offers_wrap").innerHTML += n,
                        PaymentsBox.checkOffers())
                    },
                    showProgress: _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton.pbind(e),
                    hideProgress: _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton.pbind(e)
                })
            }
            static showConfirm() {
                cur.votesAmountsVal = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_amounts") ? (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.radioval)("payments_getvotes_amounts") : 0;
                var e = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_num") ? parseInt((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_num").value, 10) : 0;
                if (void 0 !== cur.votesAmountsVal) {
                    cur.votesAmountsVal && null == cur.votesAmountsData[cur.votesAmountsVal] && (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("votes_num") && !e && (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.notaBene)("votes_num");
                    var t = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_spasibo_rules_accept");
                    if (t && !(0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isChecked)(t)) {
                        var n = {
                            text: (0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_spasibo_rules_not_accepted"),
                            dir: "auto",
                            className: "payments_terminal_tt",
                            hasover: 1
                        };
                        return cur.paymentsWideBox && (n = (0,
                        _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.extend)(n, {
                            shift: [-30, 10]
                        })),
                        void (0,
                        _web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_11__.showTooltip)(t, n)
                    }
                    if ((0,
                    _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().changed = !0,
                    "sms" === cur.votesType) {
                        cur.isResetCheckedMaxSmsVotesValue && ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_confirm_msg").innerHTML = cur.votesAmountsData.confirm_msg_again,
                        cur.isResetCheckedMaxSmsVotesValue = !1);
                        var r = cur.votesAmountsData.confirm_type;
                        if (2 == r && null != cur.votesAmountsData.checked_max_sms_votes_val && (cur.votesAmountsVal = cur.votesAmountsData.checked_max_sms_votes_val,
                        cur.votesAmountsData.checked_max_sms_votes_val = 0,
                        cur.isResetCheckedMaxSmsVotesValue = !0),
                        null == cur.votesAmountsData[cur.votesAmountsVal] && e) {
                            if (!r)
                                return void PaymentsBox.getVotesCharge(e, !0);
                            cur.votesAmountsData[-1] = [e, (0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_money_amount_rub", cur._otherAmount), cur.votesAmountsData[0][2], 0],
                            cur.votesAmountsVal = -1
                        }
                        void 0 === cur.votesAmountsData[cur.votesAmountsVal] && (cur.votesAmountsVal = 0);
                        var i = cur.votesAmountsData[cur.votesAmountsVal][0]
                          , o = cur.votesAmountsData[cur.votesAmountsVal][1]
                          , a = cur.votesAmountsData[cur.votesAmountsVal][2]
                          , s = cur.votesAmountsData[cur.votesAmountsVal][3]
                          , c = cur.votesAmountsData[cur.votesAmountsVal][6];
                        if (0 == a) {
                            cur.smsChkData = {
                                oid: s,
                                qid: 0,
                                hash: cur.votesAmountsData.check_hash
                            };
                            var _ = (0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_to_get_send_sms", i);
                            cur.paymentsWideBox || (_ += `<br/>${(0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_service_cost")}`);
                            var l = cur.votesAmountsData[cur.votesAmountsVal];
                            if (_ = (_ = (_ = _.replace("{number}", cur.votesAmountsData[cur.votesAmountsVal][4])).replace("{text}", `<nobr>${cur.votesAmountsData[cur.votesAmountsVal][5]}${vk.id}</nobr>`)).replace("{amount}", cur.votesAmountsData[cur.votesAmountsVal][1]),
                            l.invoice_hash && cur.statSessionId) {
                                PaymentsBox.showWaiting("");
                                var u = {
                                    act: "a_getvotes_invoice",
                                    type: cur.votesType,
                                    oid: s,
                                    votes: i,
                                    invoice_hash: l.invoice_hash,
                                    stat_session_id: cur.statSessionId
                                };
                                ajax.post("al_payments.php", u, {
                                    onDone: function() {
                                        (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting_msg").innerHTML = _
                                    },
                                    onFail: function(e) {
                                        return clearInterval(cur.smsChkStatInt),
                                        PaymentsBox.needContinue = 0,
                                        (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting") || (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") ? PaymentsBox.showVotesAmounts() : PaymentsBox.setButtons(cur.payments_get_votes, (0,
                                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") ? PaymentsBox.getVotesCharge : PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes),
                                        PaymentsBox.showBoxError(e),
                                        !0
                                    }
                                })
                            } else
                                PaymentsBox.showWaiting(_)
                        } else if (5 == a || 6 == a || 8 == a)
                            PaymentsBox.getVotesCharge();
                        else if (7 == a) {
                            PaymentsBox.getVotesCharge(),
                            cur._popup_text = PaymentsBox.popupHtml((0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_cards_redirect"), "", ""),
                            cur._popup_callback = !1,
                            cur._popup_href = !1;
                            var d = "/payments?act=go_gate&type=sms"
                              , p = Math.floor(window.screen.width / 2) - 350
                              , h = Math.floor(window.screen.height / 2) - 300;
                            (0,
                            _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)(d),
                            cur._popup = window.open(d, "_blank", `scrollbars=1, resizable=1, menubar=0, left=${p}, top=${h}, width=700, height=600`)
                        } else if (1 != a && 4 != a && 1 != r)
                            PaymentsBox.getVotesCharge(!1, !0);
                        else {
                            if ((0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_num", i),
                            (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_amount", o),
                            (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_money", c),
                            3 == s && (PaymentsBox.checkStatusCallback = function(e) {
                                cur.isResetCheckedMaxSmsVotesValue = !1,
                                cur.checkedMaxVotes = e,
                                PaymentsBox.getVotesAmounts(!0)
                            }
                            ),
                            2 == r && i <= cur.votesAmountsData.confirm_max_votes) {
                                if (cur.paymentsWideBox)
                                    return void PaymentsBox.getVotesCharge();
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_confcode_wrap"),
                                PaymentsBox.refreshBox(),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_confirm"),
                                PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.getVotesCharge, (0,
                                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_back"), PaymentsBox.showVotesAmounts)
                            } else
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_confcode_wrap"),
                                PaymentsBox.smsGetCode();
                            cur.votesAmountsData.resend_msg && (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_sms_resend", cur.votesAmountsData.resend_msg),
                            cur.votesAmountsData.confirm_wait_comment && cur.votesAmountsData.confirm_wait_comment[s] ? ((0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_confirm_comm", cur.votesAmountsData.confirm_wait_comment[s]),
                            (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_confirm_comm_wrap")) : ((0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_confirm_comm").innerHTML = "",
                            (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_confirm_comm_wrap"))
                        }
                    } else {
                        var m;
                        m = cur.votesAmountsData[cur.votesAmountsVal] ? cur.votesAmountsData[cur.votesAmountsVal][0] : e,
                        cur.checkoutEnabled ? PaymentsBox.submitDmrCheckout(m) : "card" === cur.votesType ? PaymentsBox.submitCard(m) : PaymentsBox.submitPaymentSystem(m)
                    }
                }
            }
            static offerOnLoad(html, js) {
                (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_offers_list");
                var offerView = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_offer_view");
                if (offerView) {
                    offerView.innerHTML = html,
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(offerView);
                    try {
                        eval(js)
                    } catch (e) {
                        (0,
                        _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e, js)
                    }
                }
            }
            static showWaiting(e) {
                var t = cur.votesAmountsData[cur.votesAmountsVal] ? cur.votesAmountsData[cur.votesAmountsVal][3] : 0;
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting_msg").innerHTML = e,
                t && cur.votesAmountsData.confirm_wait_comment && cur.votesAmountsData.confirm_wait_comment[t] ? ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting_comm").innerHTML = cur.votesAmountsData.confirm_wait_comment[t],
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_waiting_comm")) : ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting_comm").innerHTML = "",
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_waiting_comm")),
                PaymentsBox.refreshBox(),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_waiting"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_buttons"),
                cur.paymentsWideBox && cur.votesAmountsData[cur.votesAmountsVal] && cur.votesAmountsData[cur.votesAmountsVal][7] ? ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting_amount").innerHTML = cur.votesAmountsData[cur.votesAmountsVal][6],
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting_phone").innerHTML = cur.votesAmountsData[cur.votesAmountsVal][7],
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_waiting_mo")) : (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_waiting_mo"),
                delete cur.paymentsWaitingCache[cur.votesType],
                cur.smsChkStatInt && clearInterval(cur.smsChkStatInt),
                cur.smsChkStatCnt = 0,
                cur.smsChkStatInt = setInterval(PaymentsBox.checkStatus.pbind(cur.votesType, cur.smsChkData), 2e3)
            }
            static showPhoneForm(e, t) {
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("_msg", "payments_getvotes_phone").innerHTML = t || (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_get_votes_input_phone"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("phone").value = "",
                PaymentsBox.refreshBox(),
                t && cur.paymentsWideBox ? PaymentsBox.setButtons((0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_save_phone"), PaymentsBox.saveSmsPhone) : PaymentsBox.setButtons((0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_save_phone"), PaymentsBox.saveSmsPhone, (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_back"), 2 == e ? PaymentsBox.getVotesAmounts : e ? PaymentsBox.showVotesAmounts : PaymentsBox.showTypes),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_phone");
                var n = cur.uiPhoneCountry.container;
                if ("spasibo" === cur.votesType)
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(n),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_phone_prefix", "+79");
                else {
                    var r = cur.uiPhoneCountry.selectedItems();
                    if (r.length > 0)
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_phone_prefix", r[0][3]);
                    else
                        for (var i = 0, o = cur.countries.length; i < o; ++i)
                            cur.countries[i][0] == cur.defCountry && (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_phone_prefix", cur.countries[i][3]);
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(n)
                }
                return cur.paymentsBoxClass = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_box").className,
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)("payments_box", "payments_phone_form"),
                !1
            }
            static showPaySystemsList() {
                return PaymentsBox.refreshBox(),
                cur.paymentsWideBox && ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_title").innerHTML = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_ps_list_title_header").innerText),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_ps", "payments_votes_vkpay_promo_banner"),
                cur.votesType = !1,
                PaymentsBox.setButtons(!1, !1, cur.paymentsChangeType, PaymentsBox.showTypes),
                !1
            }
            static showVotesAmounts() {
                return PaymentsBox.refreshBox(),
                cur.checkoutEnabled ? PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm) : "card" !== cur.votesType && cur.psList[cur.votesType] && !cur.psList[cur.votesType].in_menu ? PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm, (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_go_ps_list"), PaymentsBox.showPaySystemsList) : PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_cont", "payments_getvotes_wrap", "payments_getvotes_buttons"),
                cur.paymentsWideBox && cur.paymentsOrderNotice && ((0,
                _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_17__.showMsg)("payments_box_error", cur.paymentsOrderNotice, "info_msg", null),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_error")),
                (0,
                _web_lib_accessibility__WEBPACK_IMPORTED_MODULE_18__.updateAriaElements)(),
                delete cur.votesAmountsData.appoveCode,
                !1
            }
            static showTypes() {
                if (cur.paymentsWideBox)
                    return PaymentsBox.showVotesAmounts(),
                    !1;
                (PaymentsBox.refreshBox(),
                cur.votesAmountsVal = void 0,
                cur.votesAmountsData = [],
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_buttons"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_method", "payments_votes_vkpay_promo_banner"),
                cur.paymentBoxTitle) && (0,
                _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().setOptions({
                    title: cur.paymentBoxTitle
                });
                return !1
            }
            static setButtons(e, t, n, r) {
                if (!cur.paymentsWideBox || e) {
                    if (e) {
                        var i = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_submit");
                        i && (i.innerHTML = e,
                        i.onclick = t,
                        i.dataset.taskClick = "",
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(i, "payments_getvotes_buttons"))
                    } else
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_buttons");
                    if (cur.paymentsWideBox) {
                        var o = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_back");
                        o && (o.innerHTML = "",
                        n && o.appendChild((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div", {
                            className: "button",
                            innerHTML: n,
                            onclick: r,
                            "data-task-click": ""
                        })))
                    } else {
                        var a = (0,
                        _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();
                        a && (cur.paymentBoxTitle || (cur.paymentBoxTitle = a.getOptions().title),
                        n ? ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("box_title", a.titleWrap).innerHTML = `<div class="back"><span class="back__icon">${(0,
                        _icons_desktop_getIcon24BrowserBack__WEBPACK_IMPORTED_MODULE_23__.getIcon24BrowserBack)().icon}</span>${(0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_box_title_back")}</div>`,
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("back", a.titleWrap).onclick = r,
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("back", a.titleWrap).dataset.taskClick = "") : (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("box_title", a.titleWrap).innerHTML = cur.paymentBoxTitle)
                    }
                } else
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_buttons")
            }
            static showBoxError(e, t) {
                if ("object" == typeof e && (e = (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_error_occured")),
                e && cur.paymentsWideBox && cur.checkoutEnabled) {
                    var n = new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.MessageBox({
                        title: (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_error"),
                        hideButtons: !0
                    });
                    (0,
                    _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide(),
                    n.content(e).show()
                } else {
                    if (e) {
                        var r = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_box_error");
                        r && ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(r, ""),
                        (0,
                        _web_lib_ui_util__WEBPACK_IMPORTED_MODULE_17__.showMsg)(r, e, t || "error"),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(r))
                    }
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_progress", "payments_iframe_container"),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_wrap"),
                    (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                    PaymentsBox.hideRowProgress(),
                    PaymentsBox.enablePaymentTypesRows()
                }
            }
            static showProgress(e) {
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_progress_msg", "string" == typeof e ? e : (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_waiting_payment_complete")),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_error", "payments_getvotes_wrap", "payments_getvotes_buttons"),
                cur.paymentsWideBox && e ? (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_progress_link") : e || (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_progress_link"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_progress")
            }
            static hideRowProgress() {
                ["payments_getvotes_ps", cur.paymentsWideBox ? "payments_box_menu" : "payments_getvotes_method"].forEach((e=>{
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(e) && (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_active_row", (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)(e)).forEach((t=>{
                        "payments_box_menu" !== e ? (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(t, "payments_getvotes_active_row") : (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(t, "payments_progress")
                    }
                    ))
                }
                ))
            }
            static refreshBox() {
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_box_progress", "payments_box_error", "payments_getvotes_method", "payments_getvotes_cont", "payments_getvotes_phone", "payments_getvotes_confirm", "payments_getvotes_waiting", "payments_getvotes_other", "payments_getvotes_terminals", "payments_getvotes_ps", "payments_iframe_container"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_wrap"),
                cur.smsChkStatInt && !cur.paymentsWideBox && clearInterval(cur.smsChkStatInt),
                cur.paymentsBoxClass && ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_box").className = cur.paymentsBoxClass,
                cur.paymentsBoxClass = ""),
                PaymentsBox.enablePaymentTypesRows()
            }
            static saveSmsPhone() {
                var e = (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.trim)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("phone"))
                  , t = (0,
                _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.trim)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_phone_prefix") || {}) || "");
                e && (cur.paymentsWaitingCache.sms && (clearInterval(cur.paymentsWaitingCache.sms[2]),
                delete cur.paymentsWaitingCache.sms),
                cur.newSmsPhone = t + e,
                PaymentsBox.getVotesAmounts())
            }
            static startFormMeasure() {
                cur.formMeasureTime = Date.now(),
                vk.dev && (0,
                _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)(cur.formMeasureTime)
            }
            static finishFormMeasure(e) {
                if (cur.formMeasureTime) {
                    var t = Date.now() - cur.formMeasureTime;
                    vk.dev && (0,
                    _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.debugLog)(t),
                    delete cur.formMeasureTime,
                    (0,
                    _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments_frame_load_time", t, e)
                }
            }
            static frameMessage(e) {
                if (!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?paymentgate\.ru$/) && !e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/))
                    return !1;
                var t = {};
                if (!e.data || "{" !== e.data.substr(0, 1) || "billing" === (t = (0,
                _web_lib_utils__WEBPACK_IMPORTED_MODULE_19__.parseJSON)(e.data)).type)
                    if ("pageLoad" === t.action)
                        cur.paymentsIgnoreResize = !1;
                    else if ("paySuccess" === t.action)
                        cur.paymentsIgnoreResize = !0,
                        cur.checkoutEnabled && (PaymentsBox.showProgress(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_iframe_container"));
                    else if ("submit" === e.data || "3dsPage" === t.action)
                        setTimeout(PaymentsBox.frameHeight.pbind(600, !0), 200),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)("payments_iframe_container", cur.checkoutEnabled ? "payments_threeds_checkout_frame" : "payments_threeds_frame");
                    else if ("3dsFinish" === t.action)
                        PaymentsBox.frameHeight(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("payments_iframe_container", cur.checkoutEnabled ? "payments_threeds_checkout_frame" : "payments_threeds_frame");
                    else if ("resizeFrame" === t.action)
                        if (t.action_params.height < 10 && cur.paymentsIgnoreResize)
                            cur.paymentsIgnoreResize = !1;
                        else {
                            var n = (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container");
                            n && !(0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(n, "payments_threeds_checkout_frame") && setTimeout(PaymentsBox.frameHeight.pbind(t.action_params.height), 200)
                        }
                    else
                        "putPixel" === t.action && "page_load" === t.action_params.alias ? (PaymentsBox.finishFormMeasure("dmr"),
                        (0,
                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", 0, "votes", "dmr", "iframe_loaded")) : "session_fail" === t.action ? (0,
                        _shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_14__.statlogsValueEvent)("payments", 0, "votes", "dmr", "iframe_session_fail") : "payError" === t.action && cur.checkoutEnabled ? PaymentsBox.checkoutDecline(t.action_params) : "typePaymentMethod" === t.action && cur.checkoutEnabled && ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("payments_iframe_container", "payments_threeds_checkout_frame"),
                        t.action_params && t.action_params.system && PaymentsBox.checkoutPayMethodChanged(t.action_params.system))
            }
            static frameHeight(e, t) {
                var n = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("card_iframe");
                n && (e ? (cur.prevFrameHeight = n.style.height,
                n.style.height = e + "px") : (n.style.height = cur.prevFrameHeight,
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)("payments_iframe_container", cur.checkoutEnabled ? "payments_threeds_checkout_frame" : "payments_threeds_frame")));
                var r = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_iframe_container");
                r && (cur.paymentsWideBox && !cur.checkoutEnabled || t || (r.style.height = (e || cur.prevFrameHeight) + (cur.checkoutEnabled ? 0 : 10) + "px"),
                r.scrollTop = 0)
            }
            static paymentCanceled(e) {
                e ? cur.isPaymentFailed = !0 : cur.isPaymentCanceled = !0,
                PaymentsBox.frameHeight()
            }
            static checkoutDecline(e) {
                var t = e || {};
                t.act = "checkout_decline",
                t.qid = cur.smsChkData.qid,
                t.hash = cur.smsChkData.declineHash,
                ajax.post("payments", t, {
                    onDone: function(e) {
                        return PaymentsBox.stopCheckAndShowError(e),
                        !0
                    },
                    onFail: function(e) {
                        return PaymentsBox.stopCheckAndShowError(e),
                        !0
                    }
                })
            }
            static checkoutPayMethodChanged(e) {
                e && ajax.post("payments", {
                    act: "checkout_ps_choose",
                    qid: cur.smsChkData.qid,
                    pay_method: e
                })
            }
            static stopCheckAndShowError(e) {
                clearInterval(cur.smsChkStatInt),
                PaymentsBox.needContinue = 0,
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting") || (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") ? PaymentsBox.showVotesAmounts() : cur.checkoutEnabled ? PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm) : PaymentsBox.setButtons(cur.payments_get_votes, (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") ? PaymentsBox.getVotesCharge : PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes),
                PaymentsBox.showBoxError(e)
            }
            static complete(e, t) {
                cur.paymentCompleteParams = t,
                cur.isPaymentComplete = !0
            }
            static checkStatus(e, t, n, r) {
                if ("sms" === e && (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress") && !cur.paymentsWideBox && 7 != cur.votesAmountsData[cur.votesAmountsVal][2])
                    if (15 == cur.smsChkStatCnt)
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_box_progress_msg").innerHTML = (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_waiting_payment_complete_still");
                    else if (cur.smsChkStatCnt > 30) {
                        return clearInterval(cur.smsChkStatInt),
                        cur.isPaymentAttemted = !0,
                        (0,
                        _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide(),
                        void (0,
                        _web_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.showFastBox)((0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_internet_getting_votes"), (0,
                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_get_votes_delay"))
                    }
                var i = {
                    act: "a_getvotes_check",
                    type: e,
                    votes_purchase: cur.isPaymentsAppOrder || cur.paymentsWideBox || cur.paymentsInstantPayType ? 0 : 1
                };
                t && (t.oid || t.qid) ? (i.oid = t.oid,
                i.qid = t.qid,
                i.hash = t.hash) : i.hash = cur.psList[e].check_hash,
                0 == cur.smsChkStatCnt && (i.start = 1),
                cur.statSessionId && (i.stat_session_id = cur.statSessionId),
                t.test && (i.test = 1);
                var o = r || (0,
                _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();
                ajax.post("al_payments.php", i, {
                    onDone: function(n, r, i) {
                        if ("sms" === e && cur._popup && cur._popup.closed)
                            return clearInterval(cur.smsChkStatInt),
                            cur.smsChkStatCnt = 0,
                            PaymentsBox.showBoxError((0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_payment_cancelled"), "info_msg"),
                            void PaymentsBox.setConfirmButtons();
                        if (n) {
                            if (1 == n) {
                                for ("mailmoney_vkpay" === e && WkView && (o._show(),
                                cur.onExternalAppDone = null,
                                WkView.hide(!1, !0)),
                                cur.isPaymentAttemted = !0,
                                PaymentsBox.needContinue && (cur.needContinue = 1,
                                PaymentsBox.needContinue = 0); boxQueue.count(); )
                                    boxQueue.hideLast(!1);
                                if ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)("left_block10_0"),
                                r && !cur.isPaymentsAppOrder && (!cur.paymentsTryCompleteOrder || !o.onDone)) {
                                    var a = new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.MessageBox({
                                        width: 400,
                                        hideButtons: !0,
                                        bodyStyle: "padding: 0; border-radius: 8px;"
                                    });
                                    a.content(r),
                                    a.show()
                                }
                                i && (0,
                                _web_lib_utils__WEBPACK_IMPORTED_MODULE_19__.updateMoney)(i)
                            } else if (2 == n || 10 == n)
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting") || (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") || (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_iframe_container") ? PaymentsBox.showVotesAmounts() : PaymentsBox.setButtons(cur.payments_get_votes, (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") ? PaymentsBox.getVotesCharge : PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes),
                                PaymentsBox.showBoxError(r);
                            else if (3 == n) {
                                var s = "sms" === e;
                                cur.votesAmountsData[cur.votesAmountsVal] ? ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_num", cur.votesAmountsData[cur.votesAmountsVal][0]),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_amount", cur.votesAmountsData[cur.votesAmountsVal][1]),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_money", s ? cur.votesAmountsData[cur.votesAmountsVal][6] : cur.votesAmountsData[cur.votesAmountsVal][1])) : ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_num", cur._otherVotes),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_amount", cur._otherAmount + " " + (0,
                                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.langNumeric)(cur._otherAmount, cur.votesAmountsData.currency_price_str)),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_box_votes_money", cur._otherAmount + " " + (0,
                                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.langNumeric)(cur._otherAmount, cur.votesAmountsData.currency_price_str))),
                                s || ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_confirm_msg", (0,
                                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_get_votes_ps_enter_code")),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_confirm_amount")),
                                cur.votesAmountsData.confirm_wait_comment && cur.votesAmountsData.confirm_wait_comment[t.oid] ? ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_confirm_comm").innerHTML = cur.votesAmountsData.confirm_wait_comment[t.oid],
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_confirm_comm_wrap")) : s && ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_confirm_comm").innerHTML = "",
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_confirm_comm_wrap")),
                                "spasibo" === e && (cur.updateTnxHash = r),
                                PaymentsBox.refreshBox(),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_box_confcode_wrap", "payments_getvotes_confirm"),
                                s && r && PaymentsBox.showBoxError(r),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("confcode").onkeypress = s ? "" : PaymentsBox.checkPinKeyPress,
                                PaymentsBox.setButtons(cur.payments_get_votes, s ? PaymentsBox.smsSendCode : PaymentsBox.confirmPinCode, cur.paymentsChangeType, PaymentsBox.showTypes)
                            } else {
                                if (4 == n) {
                                    if (!(0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting") && !cur.paymentsWaitingCache.sms) {
                                        var c = (0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_to_get_send_sms", cur.votesAmountsData[cur.votesAmountsVal][0]);
                                        cur.paymentsWideBox || (c += `<br/>${(0,
                                        _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_service_cost")}`),
                                        c = (c = (c = c.replace("{number}", r.service_number)).replace("{text}", `<nobr>${r.message_text}</nobr>`)).replace("{amount}", cur.votesAmountsData[cur.votesAmountsVal][1]),
                                        PaymentsBox.showWaiting(c)
                                    }
                                    return
                                }
                                if (5 == n)
                                    PaymentsBox.refreshBox(),
                                    PaymentsBox.showConfirm();
                                else if (6 == n)
                                    delete cur.votesAmountsData.oauth_url,
                                    delete cur.paymentsInstantPayType,
                                    PaymentsBox.showVotesAmounts(),
                                    PaymentsBox.showBoxError((0,
                                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_instant_pay_amount_limit_error")),
                                    PaymentsBox.setConfirmButtons(),
                                    (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_remember_wallet", (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("payments_getvotes_confirm_descr", "payments_getvotes_cont"));
                                else {
                                    if (7 == n)
                                        return void (cur._popup && !cur._popup_href && (cur._popup_href = r,
                                        cur._popup.location.href = r));
                                    if (8 == n)
                                        return void PaymentsBox.checkStatusCallback(r);
                                    if (9 == n)
                                        return void PaymentsBox.show3DsFrame(r, i)
                                }
                            }
                            clearInterval(cur.smsChkStatInt),
                            cur.smsChkStatCnt = 0
                        }
                    },
                    onFail: function(e) {
                        return PaymentsBox.stopCheckAndShowError(e),
                        !0
                    }
                }),
                cur.smsChkStatCnt++
            }
            static checkStatusCallback(e) {}
            static getVotesCharge(e, t) {
                if (!(0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.isButtonLocked)("payments_getvotes_submit") && !(0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress") && ((e = parseInt(e, 10)) || null != cur.votesAmountsVal && cur.votesAmountsData[cur.votesAmountsVal])) {
                    var n = {
                        act: "a_getvotes_charge",
                        type: cur.votesType,
                        hash: cur.paymentsHash,
                        stat_session_id: cur.statSessionId
                    }
                      , r = PaymentsBox.getEmail();
                    "" !== r && (r && (n.email = r),
                    t ? (0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit") : PaymentsBox.showProgress(),
                    e ? (n.pid = -1,
                    n.votes = e) : (n.pid = cur.votesAmountsVal,
                    -1 == cur.votesAmountsVal && (n.votes = cur.votesAmountsData[cur.votesAmountsVal][0])),
                    cur.isResetCheckedMaxSmsVotesValue && (n.pay_by_repay_status = 1),
                    PaymentsBox.disablePaymentTypesRows(),
                    ajax.post("al_payments.php", n, {
                        onDone: n=>{
                            PaymentsBox.votesChargeOnDone(n, e, t)
                        }
                        ,
                        onFail: e=>((0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_box_progress") && PaymentsBox.setButtons(cur.payments_get_votes, (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_confirm") ? PaymentsBox.getVotesCharge : PaymentsBox.showConfirm, cur.paymentsChangeType, PaymentsBox.showTypes),
                        PaymentsBox.showBoxError(e),
                        !0)
                    }))
                }
            }
            static votesChargeOnDone(e, t, n) {
                if (e)
                    if ((0,
                    _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                    -1 == e)
                        PaymentsBox.getVotesAmounts(!0);
                    else if (e.qid)
                        if (cur.smsChkData = e,
                        n) {
                            var r = (0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_for_get_n_votes", t || cur.votesAmountsData[cur.votesAmountsVal][0])
                              , i = cur.votesAmountsData.confirm_wait_msg.replace("{amount}", r);
                            if (i += t ? `<br/>${(0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_service_cost_rubles", cur._otherAmount)}` : `<br/>${(0,
                            _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_service_cost").replace("{amount}", cur.votesAmountsData[cur.votesAmountsVal][1])}`,
                            cur.paymentsWideBox)
                                i += `<br><br/><a onclick="return PaymentsBox.showPhoneForm(1);">${(0,
                                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_change_phone_number")}</a>`;
                            PaymentsBox.showWaiting(i)
                        } else
                            cur.smsChkStatCnt = 0,
                            cur.smsChkStatInt = setInterval(PaymentsBox.checkStatus.pbind(cur.votesType, e), 2e3)
            }
            static getVotesAmounts(e, t, n) {
                if (null != t && cur.paymentsWideBox) {
                    if (cur.votesType == t && cur.votesTypeInit != t && ((0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_cont") || (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_terminals") || (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_ps")))
                        return;
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_waiting") ? cur.paymentsWaitingCache[cur.votesType] = [(0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_title").innerHTML, (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting").innerHTML, cur.smsChkStatInt] : cur.smsChkStatInt && !cur.paymentsWaitingCache[t] && clearInterval(cur.smsChkStatInt),
                    cur.votesType = t
                } else
                    null != t && (cur.votesType = t);
                if (cur.votesType) {
                    if (cur.paymentsWideBox && !n && (n = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)((0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("payments_method_" + cur.votesType, (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_box_menu")))),
                    cur.paymentsWideBox && cur.paymentsTypesSum && cur.paymentsTypesSum[t]) {
                        var r = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_summary_bill");
                        r ? r.innerHTML = cur.paymentsTypesSum[t] : (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_order_sum", cur.paymentsTypesSum[t]),
                        (0,
                        _web_lib_utils_common__WEBPACK_IMPORTED_MODULE_9__.each)((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_tt"), ((e,t)=>{
                            (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.re)(t)
                        }
                        ))
                    }
                    var i = "term" === cur.votesType || "ps" === cur.votesType;
                    if (i) {
                        PaymentsBox.refreshBox(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_method");
                        var o = "";
                        if ("term" === cur.votesType ? ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_terminals"),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_votes_vkpay_promo_banner"),
                        o = "payments_terminals_title_header") : ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_ps"),
                        o = "payments_ps_list_title_header"),
                        cur.paymentsWideBox && ((0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(o),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_title").innerHTML = (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)(o).innerText),
                        PaymentsBox.setButtons(!1, !1, cur.paymentsChangeType, PaymentsBox.showTypes),
                        !cur.paymentsWideBox)
                            return
                    }
                    for (var a = ["payments_getvotes_ps", cur.paymentsWideBox ? "payments_box_menu" : "payments_getvotes_method"], s = 0; s < a.length; s++) {
                        var c = a[s];
                        if (!(!(0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)(c) || cur.paymentsWideBox && !n || "payments_box_menu" === c && (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_ps") && n && (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(n.parentNode, "payments_getvotes_ps_list"))) {
                            var _ = (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)(c)
                              , l = (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_active_row", _);
                            if (!e && l.length && !cur.paymentsWideBox)
                                return;
                            l.forEach((e=>{
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(e, "payments_getvotes_active_row"),
                                cur.paymentsWideBox && !i && (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(e, "payments_progress")
                            }
                            ))
                        }
                    }
                    if (n && (!cur.paymentsWideBox || "payments_box_menu" !== n.parentNode.id || i || e || (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(n, "payments_progress"),
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(n, "payments_getvotes_active_row")),
                    cur.paymentsWideBox && cur.paymentsWaitingCache[t])
                        return (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_title").innerHTML = cur.paymentsWaitingCache[t][0],
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_waiting").innerHTML = cur.paymentsWaitingCache[t][1],
                        PaymentsBox.refreshBox(),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_waiting", "payments_getvotes_title"),
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_buttons"),
                        void PaymentsBox.hideRowProgress();
                    if (!i) {
                        (0,
                        _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.isVisible)("payments_getvotes_buttons") && !cur.paymentsWideBox && (0,
                        _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.lockButton)("payments_getvotes_submit");
                        var u = {
                            act: "a_getvotes_amounts",
                            type: cur.votesType,
                            prefer_votes: cur.paymentsPreferVotes,
                            hash: cur.paymentsHash
                        };
                        if (cur.statSessionId && (u.stat_session_id = cur.statSessionId),
                        cur.isPaymentsAppOrder && cur.paymentsOrderAppId && (u.aid = cur.paymentsOrderAppId,
                        cur.paymentsOrderBillPeriod && (u.bill_period = cur.paymentsOrderBillPeriod),
                        cur.paymentsOrderDiscount && (u.discount = cur.paymentsOrderDiscount)),
                        "sms" === u.type)
                            cur.checkedMaxVotes && (u.checked_max_votes = cur.checkedMaxVotes,
                            cur.checkedMaxVotes = 0),
                            cur.newSmsPhone && (u.phone = cur.newSmsPhone,
                            cur.newSmsPhone = !1),
                            cur.isCorpPhone && (u.corp = cur.isCorpPhone,
                            cur.isCorpPhone = !1);
                        else if ("offers" === u.type) {
                            if (cur.app && cur.app.options && (u.isAppOrder = cur.paymentsOfferApp ? 1 : 0,
                            u.aid = cur.app.options.aid,
                            u.orderBox = cur.isPaymentsAppOrder ? 1 : 0),
                            cur.paymentsPreload)
                                return PaymentsBox.getVotesAmountsOnDone.apply(this, cur.paymentsPreload),
                                cur.paymentsPreload = !1,
                                void (cur.paymentsOfferPreload && (PaymentsBox.offerOnLoad.apply(this, cur.paymentsOfferPreload),
                                cur.paymentsOfferPreload = !1,
                                cur.paymentsOneOffer = !0))
                        } else if ("spasibo" === u.type)
                            cur.newSmsPhone && (u.phone = cur.newSmsPhone,
                            cur.newSmsPhone = !1),
                            cur.needContinue && (u.continue = 1,
                            cur.needContinue = 0);
                        else if (cur.psList[u.type] && cur.psList[u.type].simple_redirect)
                            return PaymentsBox.hideRowProgress(),
                            void PaymentsBox.submitPaymentSystem();
                        ajax.post("al_payments.php", u, {
                            onDone: PaymentsBox.getVotesAmountsOnDone,
                            onFail: e=>(PaymentsBox.showBoxError(e),
                            !0)
                        })
                    }
                }
            }
            static getVotesAmountsOnDone(result, html, data, js, title) {
                if (PaymentsBox.hideRowProgress(),
                (0,
                _web_lib_ui__WEBPACK_IMPORTED_MODULE_8__.unlockButton)("payments_getvotes_submit"),
                cur.paymentsWideBox && (title && ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_title", title),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_getvotes_title")),
                data && data.menu_money)) {
                    var sumWrap = (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_summary_bill");
                    sumWrap ? sumWrap.innerHTML = data.menu_money : (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(`payments_method_${cur.votesType}_descr`, data.menu_money)
                }
                if ((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_votes_vkpay_promo_banner"),
                -1 != result)
                    if (-2 != result)
                        if (-3 != result) {
                            if (!result)
                                return PaymentsBox.showProgress(""),
                                void (cur.smsAmountsInt = setTimeout((()=>{
                                    PaymentsBox.getVotesAmounts(!0)
                                }
                                ), 1e3));
                            if (html) {
                                var other;
                                if (2 == result ? (other = (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_other"),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(other, html)) : (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_cont", html),
                                cur.votesAmountsData = data,
                                (cur.fromInstantPay && 2 == cur.votesAmountsData.confirm_type || 2 != cur.votesAmountsData.confirm_type || !cur.votesAmountsData.checked_max_sms_votes_val) && PaymentsBox.showVotesAmounts(),
                                cur.paymentsPreload && "offers" === cur.votesType ? PaymentsBox.setButtons(!1) : "offers" === cur.votesType ? PaymentsBox.setButtons(!1, !1, cur.paymentsChangeType, PaymentsBox.showTypes) : cur.paymentsPreload && PaymentsBox.setButtons(cur.payments_get_votes, PaymentsBox.showConfirm),
                                window.radioBtns.payments_getvotes_amounts = {
                                    els: Array.prototype.slice.apply((0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn", (0,
                                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_getvotes_amounts")))
                                },
                                data.confirm_msg && data.confirm_type && (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)("payments_getvotes_confirm_msg", data.confirm_msg),
                                2 == result && ((0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_getvotes_wrap"),
                                (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)(other)),
                                js)
                                    try {
                                        eval(js)
                                    } catch (e) {
                                        (0,
                                        _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_16__.logEvalError)(e, js)
                                    }
                                cur.instantNeedCVV && (PaymentsBox.showConfirm(),
                                cur.instantNeedCVV = !1),
                                cur.paymentsEmailInput = (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_receipt_email"),
                                cur.paymentsEmailCheckbox = !!cur.paymentsEmailInput && (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("_checkbox", (0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(cur.paymentsEmailInput))
                            }
                        } else {
                            var rows = (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_method_opt", "payments_box_menu");
                            (0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)((0,
                            _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("payments_getvotes_active_row", "payments_box_menu"));
                            for (var i = 0; i < rows.length; i++) {
                                var row = rows[i];
                                if (!(0,
                                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(row, "payments_getvotes_active_row")) {
                                    row.onclick();
                                    break
                                }
                            }
                        }
                    else
                        PaymentsBox.showPhoneForm(!1, html);
                else
                    PaymentsBox.showPhoneForm()
            }
            static popupHtml(e, t, n) {
                return `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1251" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <style>\n        body {font-family:tahoma,verdana,arial,sans-serif,Lucida Sans; font-size:11px;}\n        .text {position:relative; top:40%; text-align:center; line-height:24px;}\n        .text img {margin-bottom:8px;}\n        .text_container {position:absolute; top:0; left:0; right:0; bottom:0; line-height:150%; height: 100%;}\n    </style>\n    <script type="text/javascript">\n      if (!window.vk) window.vk = {loginscheme: '${vk.loginscheme}', ip_h: '${vk.ip_h}', __domain: '${(0,
                _shared_lib_site__WEBPACK_IMPORTED_MODULE_22__.getHostName)()}'};\n    <\/script>\n    <script type="text/javascript" src="/dist/workers/payments.js"><\/script>\n</head>\n<body>\n${t}\n<div id="wait_text_container" class="text_container">\n    <div class="text">\n        <img src="/images/progress.gif" /><br/>${e}\n    </div>\n</div>\n<script type="text/javascript">\n  var st = setTimeout(function() {try {${n}; clearTimeout(st)} catch(e) {}}, 100)\n<\/script>\n</body>\n</html>`
            }
            static viewOffer(e) {
                this.setButtons(e, (()=>{
                    (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("start_offer").submit(),
                    PaymentsBox.setButtons((0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("payments_back_to_offers_list"), PaymentsBox.backToOffersList, (0,
                    _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_cancel"), PaymentsBox.backToOffersList)
                }
                ), (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_cancel"), PaymentsBox.backToOffersList)
            }
            static backToOffersList() {
                if (cur.paymentsOneOffer)
                    return (0,
                    _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide();
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("payments_offer_view"),
                (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.show)("payments_offers_list"),
                cur.votesTypeInit || !1 === cur.votesTypeInit ? PaymentsBox.setButtons(!1) : PaymentsBox.setButtons(!1, !1, cur.paymentsChangeType, PaymentsBox.showTypes)
            }
            static initializeOfferChecker(e, t, n, r) {
                cur.offersOffset = e,
                cur.offersAppCurrency = t,
                PaymentsBox.checkOffersList = [],
                PaymentsBox.checkOffersDo = ()=>{
                    if (!n) {
                        var e = PaymentsBox.checkOffersList.join(",");
                        PaymentsBox.checkOffersList = [],
                        ajax.post("al_payments.php", {
                            act: "a_offers_stat",
                            offers: e,
                            hash: r
                        }),
                        PaymentsBox.checkOffersTO = !1
                    }
                }
                ,
                PaymentsBox.checkOffers(),
                (0,
                _web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.addEvent)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("box_layer_wrap"), "scroll", PaymentsBox.checkOffers)
            }
            static removeCheckOffersEvent() {
                (0,
                _web_lib_dom_events__WEBPACK_IMPORTED_MODULE_6__.removeEvent)((0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("box_layer_wrap"), "scroll", PaymentsBox.checkOffers)
            }
            static checkOffers() {
                var e = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_offer", (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("payments_offers_wrap"))
                  , t = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("box_layer_wrap").scrollTop
                  , n = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)("box_layer_wrap")[1];
                e.forEach((e=>{
                    var r = e
                      , i = r.offsetTop;
                    i + 30 < t + n && i + (0,
                    _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.getSize)(r)[1] - 20 > t && !r.getAttribute("checked") && (r.setAttribute("checked", 1),
                    PaymentsBox.checkOffersList.push(r.id.substr(15)),
                    PaymentsBox.checkOffersTO || (PaymentsBox.checkOffersTO = setTimeout(PaymentsBox.checkOffersDo, 1e3)))
                }
                ))
            }
            static offersRemoveButtons() {
                cur.votesTypeInit ? PaymentsBox.setButtons(!1) : PaymentsBox.setButtons(cur.paymentsChangeType, PaymentsBox.showTypes, (0,
                _web_lib_lang__WEBPACK_IMPORTED_MODULE_12__.getLang)("global_close"), (0,
                _web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide)
            }
            static disablePaymentTypesRows() {
                var e = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_method_opt");
                if (e && e.length > 0)
                    for (var t = 0; t < e.length; t++) {
                        var n = e[t];
                        n.classList.contains("payments_getvotes_active_row") ? n.classList.add("payments_getvotes_noevents_row") : n.classList.add("payments_getvotes_disabled_row", "payments_getvotes_noevents_row")
                    }
            }
            static enablePaymentTypesRows() {
                var e = (0,
                _web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("payments_getvotes_method_opt");
                if (e && e.length > 0)
                    for (var t = 0; t < e.length; t++)
                        e[t].classList.remove("payments_getvotes_disabled_row", "payments_getvotes_noevents_row")
            }
            static handlePaymentCompleteMessage(e) {
                e.origin == window.origin && e.data.type && "paymentCompleteMessage" === e.data.type && window.PaymentsBox.complete(e.data.newUrl, e.data.params)
            }
        }
    }
    ,
    391789: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getPhotoData: ()=>i,
            getCurrentPhoto: ()=>o,
            setPhotoData: ()=>a,
            dropPhotoCacheData: ()=>s,
            getIndexedFriends: ()=>c,
            setIndexedFriends: ()=>_,
            isImgBlurred: ()=>l
        });
        var r = n(18149);
        function i(e) {
            var t = cur.pvListId
              , n = cur.pvIndex;
            if (cur.pvData && t && !isNaN(n)) {
                var r = cur.pvData[t][n];
                return e ? r[e] : r
            }
            return !1
        }
        function o() {
            var e = cur.pvListId
              , t = cur.pvIndex;
            return cur.pvData && e && !isNaN(t) ? cur.pvData[e][t] : null
        }
        function a(e, t) {
            var n = cur.pvListId
              , r = cur.pvIndex;
            return !(!cur.pvData || !n || isNaN(r)) && (cur.pvData[n][r][e] = t,
            cur.pvData[n][r])
        }
        function s() {
            delete cur.pvList,
            delete cur.pvData
        }
        function c() {
            return cur.pvIndexedFriends
        }
        function _(e, t) {
            cur.pvIndexedFriends = new r.vkIndexer(e,(e=>e[1]),t)
        }
        function l(e) {
            return !!e && !(!e.restrictionBlur || cur.unblurredPhotos && cur.unblurredPhotos.indexOf(e.photoRaw) > -1)
        }
    }
    ,
    473166: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initSettingsAddressBox: ()=>l
        });
        n(751876);
        var r = n(315544)
          , i = n(695724)
          , o = n(49535)
          , a = n(376852)
          , s = n(386409)
          , c = n(786067)
          , _ = n(124041);
        function l(e, t) {
            e.setOptions({
                title: (0,
                c.getLang)("settings_addrbox_title")
            });
            var n = document.querySelector("#settdbx_addr")
              , l = document.querySelector("#settdbx_addr_tt_place");
            n.onfocus = function() {
                -2 === cur.addrChecked && (0,
                a.showTooltip)(l, {
                    text: (0,
                    c.getLang)("settings_addrbox_hint"),
                    dir: "left",
                    slideX: 15,
                    className: "settings_pwd_tt",
                    shift: [-12, -15, 0],
                    onCreate: function() {
                        (0,
                        o.removeEvent)(l, "mouseout")
                    }
                })
            }
            ,
            n.onblur = function() {
                l.tt && l.tt.hide()
            }
            ,
            (0,
            r.elfocus)(n),
            setTimeout(r.elfocus.pbind(n), 100),
            (0,
            r.setStyle)(n, {
                width: 230 - (0,
                r.ge)("settdbx_base").offsetWidth - 8
            }),
            (0,
            i.extend)(cur, {
                settDomainCheckAddress: function(e) {
                    clearTimeout(cur.addressCheckTO),
                    cur.lastAddress !== (0,
                    r.val)("settdbx_addr") && (cur.addressCheckTO = setTimeout(cur.settDomainDoCheckAddress, e || 0))
                },
                settDomainDoCheckAddress: function() {
                    var e = document.querySelector("#settdbx_submit")
                      , t = document.querySelector("#settdbx_advices");
                    cur.lastAddress = (0,
                    r.val)("settdbx_addr"),
                    ajax.post("al_settings.php", {
                        act: "a_check_address",
                        name: cur.lastAddress,
                        from: "box"
                    }, {
                        onDone: function(n) {
                            cur.addrChecked = 1,
                            _.FlatButton.setLabel(e, n),
                            _.FlatButton.setDisabled(e, !1),
                            (0,
                            r.val)(t, "")
                        },
                        onFail: function(i) {
                            var o = (i = i.split("<*>"))[1]
                              , a = i[2];
                            return i = i[0],
                            a ? (cur.addrChecked = -2,
                            n.onfocus()) : (cur.addrChecked = -1,
                            n.onblur()),
                            _.FlatButton.setLabel(e, i),
                            _.FlatButton.setDisabled(e, !0),
                            (0,
                            r.val)(t, o),
                            !0
                        }
                    })
                },
                settDomainAdvisedAddress: function(e) {
                    (0,
                    r.val)("settdbx_addr", e),
                    cur.settDomainCheckAddress()
                },
                settDomainAddressSubmit: function(e) {
                    if (1 === cur.addrChecked) {
                        var n = (0,
                        r.val)("settdbx_addr")
                          , i = {
                            act: "a_change_address",
                            hash: t,
                            name: n
                        };
                        _.FlatButton.lock(e),
                        window.ajax.post("al_settings.php", i, {
                            onDone: function(e) {
                                nav.go(n, !1, {
                                    params: {
                                        from: "address_box"
                                    }
                                })
                            },
                            showProgress: ()=>_.FlatButton.lock(e),
                            hideProgress: ()=>_.FlatButton.unlock(e)
                        })
                    } else
                        (0,
                        s.notaBene)("settings_addr")
                }
            })
        }
    }
    ,
    619143: (e,t,n)=>{
        "use strict";
        n.d(t, {
            showNextPaymentsHistory: ()=>o
        });
        n(530522);
        var r = n(386409)
          , i = n(315544)
          , o = (e,t)=>{
            var n, o;
            if (!(0,
            r.isButtonLocked)(e))
                return (0,
                r.lockButton)(e),
                t || (t = "votes"),
                void 0 === cur.historyOffset[t] && (cur.historyOffset[t] = 5),
                "transfer" === t ? (n = {
                    act: "a_transfer_history"
                },
                o = (0,
                i.ge)("settings_transfer_history")) : "subscriptions" === t ? (n = {
                    act: "a_payments_subsciptions"
                },
                o = (0,
                i.ge)("settings_payments_subscriptions")) : "games" === t ? (n = {
                    act: "a_payments_games"
                },
                o = (0,
                i.ge)("settings_payments_games")) : (n = {
                    act: "a_votes_history"
                },
                o = (0,
                i.ge)("settings_votes_history")),
                n.offset = o.rows.length,
                "subscriptions" === t && (n.extra_items_count = cur.historyExtraItemsSubscriptions),
                ajax.post("al_settings.php", n, {
                    onDone: function(n, a, s) {
                        var c = o.tBodies[0];
                        if (n) {
                            if ((0,
                            r.unlockButton)(e),
                            browser.msie) {
                                var _ = (0,
                                i.se)("<table>" + n + "</table>");
                                Array.from((0,
                                i.geByTag)("tr", _)).forEach((e=>{
                                    1 === e.nodeType && c.appendChild(e)
                                }
                                ))
                            } else
                                c.insertAdjacentHTML("beforeEnd", n);
                            "subscriptions" === t && s && (cur.historyExtraItemsSubscriptions = s)
                        }
                        n && !a || ((0,
                        i.addClass)(c.lastChild, "settings_votes_history_last"),
                        (0,
                        i.hide)(e))
                    }
                }),
                !1
        }
    }
    ,
    7739: (e,t,n)=>{
        "use strict";
        n.d(t, {
            FAQTutorial: ()=>d
        });
        var r = n(315544)
          , i = n(695724)
          , o = n(486125)
          , a = n(803834)
          , s = n(468770)
          , c = n(386409)
          , _ = "tutorial_step"
          , l = "finished";
        function u() {
            var e = (0,
            r.geByClass)(_).slice(-1)[0]
              , t = (0,
            r.geByClass1)("content", e);
            t.innerHTML = (0,
            i.getTemplate)("login_tutorial_finish_appeal") + t.innerHTML
        }
        var d = {
            tryInit() {
                (0,
                r.geByClass1)(_) && u()
            },
            select(e, t, n) {
                var d = arguments.length > 3 && void 0 !== arguments[3] && arguments[3];
                if (!cur.tutorialProcessing && !(0,
                c.isChecked)(e)) {
                    var p = (0,
                    r.gpeByClass)(_, e);
                    (0,
                    r.hasClass)(p, l) || ((0,
                    r.removeClass)((0,
                    r.geByClass1)("on", p), "on"),
                    (0,
                    r.addClass)(e, "on"),
                    ajax.post("support?act=a_select_tutorial", {
                        name: t,
                        id: n,
                        load: 1,
                        ban: nav.objLoc.ban || 0
                    }, {
                        onDone(e, t) {
                            d || (0,
                            r.addClass)(p, l);
                            var n, o = !0, c = (0,
                            r.ge)("page_body").offsetHeight + (vk.staticheader ? 0 : (0,
                            r.getH)((0,
                            r.ge)("page_header_cont")));
                            if (d)
                                do {
                                    (n = (0,
                                    r.domNS)(p)) && ((0,
                                    r.re)(n),
                                    o = !1)
                                } while (n);
                            if ((0,
                            r.ge)("login_blocked_wrap").innerHTML += e,
                            u(),
                            "login" === nav.objLoc[0] && t) {
                                var _ = document.querySelectorAll(".tutorial_step")
                                  , h = _[_.length - 1];
                                if (s.Login.isBanExpired()) {
                                    s.Login.canUnblockFast() ? h.innerHTML += (0,
                                    i.getTemplate)("login_unblock_by_phone_fast") : h.innerHTML += (0,
                                    i.getTemplate)("login_unblock_by_phone");
                                    var m = _[_.length - 1].querySelector(".help_table_question__m");
                                    m && (0,
                                    r.hide)(m)
                                } else
                                    h.innerHTML += (0,
                                    i.getTemplate)("login_wait_for_ban_expiration_message")
                            }
                            o && (0,
                            a.scrollToY)(c)
                        },
                        onFail: e=>((0,
                        o.showDoneBox)(e),
                        !1),
                        showProgress() {
                            cur.tutorialProcessing = !0,
                            (0,
                            c.lockButton)(e)
                        },
                        hideProgress() {
                            cur.tutorialProcessing = !1,
                            (0,
                            c.unlockButton)(e)
                        }
                    }))
                }
            },
            home: ()=>{
                nav.go("/support?act=home")
            }
            ,
            back: e=>{
                var t = (0,
                r.geByClass)("tutorial_step")
                  , n = t[t.length - 1];
                2 === t.length && (0,
                r.hide)(e),
                (0,
                r.hide)(n),
                (0,
                r.removeClass)((0,
                r.geByClass1)("on", t[t.length - 2]), "on")
            }
        }
    }
    ,
    141454: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            EMPTY: ()=>r,
            UNSTARTED: ()=>i,
            PLAYING: ()=>o,
            PAUSED: ()=>a,
            ENDED: ()=>s,
            ERROR: ()=>c
        });
        var r = "empty"
          , i = "unstarted"
          , o = "playing"
          , a = "paused"
          , s = "ended"
          , c = "error"
    }
    ,
    538797: function(e, t, n) {
        var r;
        !function(i) {
            var o = function(e, t, n) {
                if (!(e instanceof ArrayBuffer || "undefined" != typeof Buffer && e instanceof Buffer))
                    throw new Error("Must specify a valid ArrayBuffer or Buffer.");
                t = t || 0,
                n = n || e.byteLength || e.length,
                this._view = new Uint8Array(e.buffer || e,t,n),
                this.bigEndian = !1
            };
            o._scratch = new DataView(new ArrayBuffer(8)),
            Object.defineProperty(o.prototype, "buffer", {
                get: function() {
                    return "undefined" != typeof Buffer ? Buffer.from(this._view.buffer) : this._view.buffer
                },
                enumerable: !0,
                configurable: !1
            }),
            Object.defineProperty(o.prototype, "byteLength", {
                get: function() {
                    return this._view.length
                },
                enumerable: !0,
                configurable: !1
            }),
            o.prototype._setBit = function(e, t) {
                t ? this._view[e >> 3] |= 1 << (7 & e) : this._view[e >> 3] &= ~(1 << (7 & e))
            }
            ,
            o.prototype.getBits = function(e, t, n) {
                var r = 8 * this._view.length - e;
                if (t > r)
                    throw new Error("Cannot get " + t + " bit(s) from offset " + e + ", " + r + " available");
                for (var i = 0, o = 0; o < t; ) {
                    var a = t - o
                      , s = 7 & e
                      , c = this._view[e >> 3]
                      , _ = Math.min(a, 8 - s);
                    this.bigEndian ? (i <<= _,
                    i |= c >> 8 - _ - s & ~(255 << _)) : i |= (c >> s & ~(255 << _)) << o,
                    e += _,
                    o += _
                }
                return n ? (32 !== t && i & 1 << t - 1 && (i |= -1 ^ (1 << t) - 1),
                i) : i >>> 0
            }
            ,
            o.prototype.setBits = function(e, t, n) {
                var r = 8 * this._view.length - e;
                if (n > r)
                    throw new Error("Cannot set " + n + " bit(s) from offset " + e + ", " + r + " available");
                for (var i = 0; i < n; ) {
                    var o, a, s, c = n - i, _ = 7 & e, l = e >> 3, u = Math.min(c, 8 - _);
                    if (this.bigEndian) {
                        a = t >> n - i - u & (o = ~(-1 << u));
                        var d = 8 - _ - u;
                        s = ~(o << d),
                        this._view[l] = this._view[l] & s | a << d
                    } else
                        a = t & (o = ~(255 << u)),
                        t >>= u,
                        s = ~(o << _),
                        this._view[l] = this._view[l] & s | a << _;
                    e += u,
                    i += u
                }
            }
            ,
            o.prototype.getBoolean = function(e) {
                return 0 !== this.getBits(e, 1, !1)
            }
            ,
            o.prototype.getInt8 = function(e) {
                return this.getBits(e, 8, !0)
            }
            ,
            o.prototype.getUint8 = function(e) {
                return this.getBits(e, 8, !1)
            }
            ,
            o.prototype.getInt16 = function(e) {
                return this.getBits(e, 16, !0)
            }
            ,
            o.prototype.getUint16 = function(e) {
                return this.getBits(e, 16, !1)
            }
            ,
            o.prototype.getInt32 = function(e) {
                return this.getBits(e, 32, !0)
            }
            ,
            o.prototype.getUint32 = function(e) {
                return this.getBits(e, 32, !1)
            }
            ,
            o.prototype.getFloat32 = function(e) {
                return o._scratch.setUint32(0, this.getUint32(e)),
                o._scratch.getFloat32(0)
            }
            ,
            o.prototype.getFloat64 = function(e) {
                return o._scratch.setUint32(0, this.getUint32(e)),
                o._scratch.setUint32(4, this.getUint32(e + 32)),
                o._scratch.getFloat64(0)
            }
            ,
            o.prototype.setBoolean = function(e, t) {
                this.setBits(e, t ? 1 : 0, 1)
            }
            ,
            o.prototype.setInt8 = o.prototype.setUint8 = function(e, t) {
                this.setBits(e, t, 8)
            }
            ,
            o.prototype.setInt16 = o.prototype.setUint16 = function(e, t) {
                this.setBits(e, t, 16)
            }
            ,
            o.prototype.setInt32 = o.prototype.setUint32 = function(e, t) {
                this.setBits(e, t, 32)
            }
            ,
            o.prototype.setFloat32 = function(e, t) {
                o._scratch.setFloat32(0, t),
                this.setBits(e, o._scratch.getUint32(0), 32)
            }
            ,
            o.prototype.setFloat64 = function(e, t) {
                o._scratch.setFloat64(0, t),
                this.setBits(e, o._scratch.getUint32(0), 32),
                this.setBits(e + 32, o._scratch.getUint32(4), 32)
            }
            ,
            o.prototype.getArrayBuffer = function(e, t) {
                for (var n = new Uint8Array(t), r = 0; r < t; r++)
                    n[r] = this.getUint8(e + 8 * r);
                return n
            }
            ;
            var a = function(e, t) {
                return function() {
                    if (this._index + t > this._length)
                        throw new Error("Trying to read past the end of the stream");
                    var n = this._view[e](this._index);
                    return this._index += t,
                    n
                }
            }
              , s = function(e, t) {
                return function(n) {
                    this._view[e](this._index, n),
                    this._index += t
                }
            };
            function c(e, t, n) {
                if (0 === t)
                    return "";
                var r = 0
                  , i = []
                  , o = !0
                  , a = !!t;
                for (t || (t = Math.floor((e._length - e._index) / 8)); r < t; ) {
                    var s = e.readUint8();
                    if (0 === s && (o = !1,
                    !a))
                        break;
                    o && i.push(s),
                    r++
                }
                var c = String.fromCharCode.apply(null, i);
                if (!n)
                    return c;
                try {
                    return decodeURIComponent(escape(c))
                } catch (e) {
                    return c
                }
            }
            var _ = function(e, t, n) {
                var r = e instanceof ArrayBuffer || "undefined" != typeof Buffer && e instanceof Buffer;
                if (!(e instanceof o || r))
                    throw new Error("Must specify a valid BitView, ArrayBuffer or Buffer");
                this._view = r ? new o(e,t,n) : e,
                this._index = 0,
                this._startIndex = 0,
                this._length = 8 * this._view.byteLength
            };
            Object.defineProperty(_.prototype, "index", {
                get: function() {
                    return this._index - this._startIndex
                },
                set: function(e) {
                    this._index = e + this._startIndex
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(_.prototype, "length", {
                get: function() {
                    return this._length - this._startIndex
                },
                set: function(e) {
                    this._length = e + this._startIndex
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(_.prototype, "bitsLeft", {
                get: function() {
                    return this._length - this._index
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(_.prototype, "byteIndex", {
                get: function() {
                    return Math.ceil(this._index / 8)
                },
                set: function(e) {
                    this._index = 8 * e
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(_.prototype, "buffer", {
                get: function() {
                    return this._view.buffer
                },
                enumerable: !0,
                configurable: !1
            }),
            Object.defineProperty(_.prototype, "view", {
                get: function() {
                    return this._view
                },
                enumerable: !0,
                configurable: !1
            }),
            Object.defineProperty(_.prototype, "bigEndian", {
                get: function() {
                    return this._view.bigEndian
                },
                set: function(e) {
                    this._view.bigEndian = e
                },
                enumerable: !0,
                configurable: !1
            }),
            _.prototype.readBits = function(e, t) {
                var n = this._view.getBits(this._index, e, t);
                return this._index += e,
                n
            }
            ,
            _.prototype.writeBits = function(e, t) {
                this._view.setBits(this._index, e, t),
                this._index += t
            }
            ,
            _.prototype.readBoolean = a("getBoolean", 1),
            _.prototype.readInt8 = a("getInt8", 8),
            _.prototype.readUint8 = a("getUint8", 8),
            _.prototype.readInt16 = a("getInt16", 16),
            _.prototype.readUint16 = a("getUint16", 16),
            _.prototype.readInt32 = a("getInt32", 32),
            _.prototype.readUint32 = a("getUint32", 32),
            _.prototype.readFloat32 = a("getFloat32", 32),
            _.prototype.readFloat64 = a("getFloat64", 64),
            _.prototype.writeBoolean = s("setBoolean", 1),
            _.prototype.writeInt8 = s("setInt8", 8),
            _.prototype.writeUint8 = s("setUint8", 8),
            _.prototype.writeInt16 = s("setInt16", 16),
            _.prototype.writeUint16 = s("setUint16", 16),
            _.prototype.writeInt32 = s("setInt32", 32),
            _.prototype.writeUint32 = s("setUint32", 32),
            _.prototype.writeFloat32 = s("setFloat32", 32),
            _.prototype.writeFloat64 = s("setFloat64", 64),
            _.prototype.readASCIIString = function(e) {
                return function(e, t) {
                    return c(e, t, !1)
                }(this, e)
            }
            ,
            _.prototype.readUTF8String = function(e) {
                return function(e, t) {
                    return c(e, t, !0)
                }(this, e)
            }
            ,
            _.prototype.writeASCIIString = function(e, t) {
                !function(e, t, n) {
                    for (var r = n || t.length + 1, i = 0; i < r; i++)
                        e.writeUint8(i < t.length ? t.charCodeAt(i) : 0)
                }(this, e, t)
            }
            ,
            _.prototype.writeUTF8String = function(e, t) {
                !function(e, t, n) {
                    for (var r = function(e) {
                        var t, n, r = [];
                        for (t = 0; t < e.length; t++)
                            (n = e.charCodeAt(t)) <= 127 ? r.push(n) : n <= 2047 ? (r.push(n >> 6 | 192),
                            r.push(63 & n | 128)) : n <= 65535 ? (r.push(n >> 12 | 224),
                            r.push(n >> 6 & 63 | 128),
                            r.push(63 & n | 128)) : (r.push(n >> 18 | 240),
                            r.push(n >> 12 & 63 | 128),
                            r.push(n >> 6 & 63 | 128),
                            r.push(63 & n | 128));
                        return r
                    }(t), i = n || r.length + 1, o = 0; o < i; o++)
                        e.writeUint8(o < r.length ? r[o] : 0)
                }(this, e, t)
            }
            ,
            _.prototype.readBitStream = function(e) {
                var t = new _(this._view);
                return t._startIndex = this._index,
                t._index = this._index,
                t.length = e,
                this._index += e,
                t
            }
            ,
            _.prototype.writeBitStream = function(e, t) {
                var n;
                for (t || (t = e.bitsLeft); t > 0; )
                    n = Math.min(t, 32),
                    this.writeBits(e.readBits(n), n),
                    t -= n
            }
            ,
            _.prototype.readArrayBuffer = function(e) {
                var t = this._view.getArrayBuffer(this._index, e);
                return this._index += 8 * e,
                t
            }
            ,
            _.prototype.writeArrayBuffer = function(e, t) {
                this.writeBitStream(new _(e), 8 * t)
            }
            ,
            void 0 === (r = function() {
                return {
                    BitView: o,
                    BitStream: _
                }
            }
            .call(t, n, t, e)) || (e.exports = r)
        }()
    },
    220773: (e,t,n)=>{
        var r = "__lodash_hash_undefined__"
          , i = "[object Function]"
          , o = "[object GeneratorFunction]"
          , a = /^\[object .+?Constructor\]$/
          , s = "object" == typeof n.g && n.g && n.g.Object === Object && n.g
          , c = "object" == typeof self && self && self.Object === Object && self
          , _ = s || c || Function("return this")();
        var l, u = Array.prototype, d = Function.prototype, p = Object.prototype, h = _["__core-js_shared__"], m = (l = /[^.]+$/.exec(h && h.keys && h.keys.IE_PROTO || "")) ? "Symbol(src)_1." + l : "", f = d.toString, g = p.hasOwnProperty, v = p.toString, E = RegExp("^" + f.call(g).replace(/[\\^$.*+?()[\]{}|]/g, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), y = u.splice, w = O(_, "Map"), b = O(Object, "create");
        function C(e) {
            var t = -1
              , n = e ? e.length : 0;
            for (this.clear(); ++t < n; ) {
                var r = e[t];
                this.set(r[0], r[1])
            }
        }
        function T(e) {
            var t = -1
              , n = e ? e.length : 0;
            for (this.clear(); ++t < n; ) {
                var r = e[t];
                this.set(r[0], r[1])
            }
        }
        function D(e) {
            var t = -1
              , n = e ? e.length : 0;
            for (this.clear(); ++t < n; ) {
                var r = e[t];
                this.set(r[0], r[1])
            }
        }
        function A(e, t) {
            for (var n, r, i = e.length; i--; )
                if ((n = e[i][0]) === (r = t) || n != n && r != r)
                    return i;
            return -1
        }
        function S(e) {
            if (!M(e) || (t = e,
            m && m in t))
                return !1;
            var t, n = function(e) {
                var t = M(e) ? v.call(e) : "";
                return t == i || t == o
            }(e) || function(e) {
                var t = !1;
                if (null != e && "function" != typeof e.toString)
                    try {
                        t = !!(e + "")
                    } catch (e) {}
                return t
            }(e) ? E : a;
            return n.test(function(e) {
                if (null != e) {
                    try {
                        return f.call(e)
                    } catch (e) {}
                    try {
                        return e + ""
                    } catch (e) {}
                }
                return ""
            }(e))
        }
        function P(e, t) {
            var n, r, i = e.__data__;
            return ("string" == (r = typeof (n = t)) || "number" == r || "symbol" == r || "boolean" == r ? "__proto__" !== n : null === n) ? i["string" == typeof t ? "string" : "hash"] : i.map
        }
        function O(e, t) {
            var n = function(e, t) {
                return null == e ? void 0 : e[t]
            }(e, t);
            return S(n) ? n : void 0
        }
        function I(e, t) {
            if ("function" != typeof e || t && "function" != typeof t)
                throw new TypeError("Expected a function");
            var n = function() {
                var r = arguments
                  , i = t ? t.apply(this, r) : r[0]
                  , o = n.cache;
                if (o.has(i))
                    return o.get(i);
                var a = e.apply(this, r);
                return n.cache = o.set(i, a),
                a
            };
            return n.cache = new (I.Cache || D),
            n
        }
        function M(e) {
            var t = typeof e;
            return !!e && ("object" == t || "function" == t)
        }
        C.prototype.clear = function() {
            this.__data__ = b ? b(null) : {}
        }
        ,
        C.prototype.delete = function(e) {
            return this.has(e) && delete this.__data__[e]
        }
        ,
        C.prototype.get = function(e) {
            var t = this.__data__;
            if (b) {
                var n = t[e];
                return n === r ? void 0 : n
            }
            return g.call(t, e) ? t[e] : void 0
        }
        ,
        C.prototype.has = function(e) {
            var t = this.__data__;
            return b ? void 0 !== t[e] : g.call(t, e)
        }
        ,
        C.prototype.set = function(e, t) {
            return this.__data__[e] = b && void 0 === t ? r : t,
            this
        }
        ,
        T.prototype.clear = function() {
            this.__data__ = []
        }
        ,
        T.prototype.delete = function(e) {
            var t = this.__data__
              , n = A(t, e);
            return !(n < 0) && (n == t.length - 1 ? t.pop() : y.call(t, n, 1),
            !0)
        }
        ,
        T.prototype.get = function(e) {
            var t = this.__data__
              , n = A(t, e);
            return n < 0 ? void 0 : t[n][1]
        }
        ,
        T.prototype.has = function(e) {
            return A(this.__data__, e) > -1
        }
        ,
        T.prototype.set = function(e, t) {
            var n = this.__data__
              , r = A(n, e);
            return r < 0 ? n.push([e, t]) : n[r][1] = t,
            this
        }
        ,
        D.prototype.clear = function() {
            this.__data__ = {
                hash: new C,
                map: new (w || T),
                string: new C
            }
        }
        ,
        D.prototype.delete = function(e) {
            return P(this, e).delete(e)
        }
        ,
        D.prototype.get = function(e) {
            return P(this, e).get(e)
        }
        ,
        D.prototype.has = function(e) {
            return P(this, e).has(e)
        }
        ,
        D.prototype.set = function(e, t) {
            return P(this, e).set(e, t),
            this
        }
        ,
        I.Cache = D,
        e.exports = I
    }
    ,
    535557: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            throw new TypeError(`unexpected tag 0x${e.toString(16)} (${t} expected)`)
        }
        function i(e) {
            return 127 & e
        }
        function o(e) {
            return 0 == (128 & e)
        }
        function a(e) {
            return 224 == (224 & e)
        }
        function s(e) {
            return 160 == (224 & e)
        }
        function c(e) {
            return 144 == (240 & e)
        }
        function _(e) {
            return 128 == (240 & e)
        }
        function l(e, t, n) {
            const r = t.byteLength;
            if (r <= 255)
                e.putUi8(n),
                e.putUi8(r);
            else if (r <= 65535)
                e.putUi8(n + 1),
                e.putUi16(r);
            else {
                if (!(r <= 4294967295))
                    throw new RangeError("length limit exceeded");
                e.putUi8(n + 2),
                e.putUi32(r)
            }
            e.put(t)
        }
        function u(e) {
            const t = e.getUi8();
            let n;
            switch (t) {
            case 192:
                n = 0;
                break;
            case 196:
            case 217:
                n = e.getUi8();
                break;
            case 197:
            case 218:
                n = e.getUi16();
                break;
            case 198:
            case 219:
                n = e.getUi32();
                break;
            default:
                s(t) || r(t, "bytes or string"),
                n = function(e) {
                    return 31 & e
                }(t)
            }
            return e.get(n)
        }
        function d(e, t) {
            t < 16 ? e.putUi8(144 | 15 & t) : f(e, 220, t)
        }
        function p(e, t) {
            const n = e.getUi8()
              , r = c(n) ? function(e) {
                return 15 & e
            }(n) : g(e, n, 220, "array");
            if (null != t && r !== t)
                throw new Error(`invalid array header size ${r}`);
            return r
        }
        function h(e, t) {
            t < 16 ? e.putUi8(128 | 15 & t) : f(e, 222, t)
        }
        function m(e, t) {
            const n = e.getUi8()
              , r = _(n) ? function(e) {
                return 15 & e
            }(n) : g(e, n, 222, "map");
            if (null != t && r !== t)
                throw new Error(`invalid map header size ${r}`);
            return r
        }
        function f(e, t, n) {
            if (n <= 65535)
                e.putUi8(t),
                e.putUi16(n);
            else {
                if (!(n <= 4294967295))
                    throw new RangeError("length limit exceeded");
                e.putUi8(t + 1),
                e.putUi32(n)
            }
        }
        function g(e, t, n, i) {
            switch (t) {
            case 192:
                return 0;
            case n:
                return e.getUi16();
            case n + 1:
                return e.getUi32();
            default:
                r(t, i)
            }
        }
        n.d(t, {
            decode: ()=>I
        });
        const v = {
            enc(e, t) {
                (function(e) {
                    switch (typeof e) {
                    case "undefined":
                        return E;
                    case "boolean":
                        return y;
                    case "number":
                        return isFinite(e) && Math.floor(e) === e ? e < 0 ? w : b : C;
                    case "string":
                        return D;
                    case "object":
                        return null === e ? E : Array.isArray(e) ? S : e instanceof Uint8Array || e instanceof ArrayBuffer ? T : e instanceof Date ? A : O;
                    default:
                        throw new TypeError("unsupported type " + typeof e)
                    }
                }
                )(t).enc(e, t)
            },
            dec: e=>function(e) {
                switch (e) {
                case 192:
                    return E;
                case 194:
                case 195:
                    return y;
                case 208:
                case 209:
                case 210:
                case 211:
                    return w;
                case 204:
                case 205:
                case 206:
                case 207:
                    return b;
                case 202:
                case 203:
                    return C;
                case 196:
                case 197:
                case 198:
                    return T;
                case 217:
                case 218:
                case 219:
                    return D;
                case 220:
                case 221:
                    return S;
                case 222:
                case 223:
                    return O;
                case 214:
                case 215:
                case 199:
                    return A;
                default:
                    if (o(e) || a(e))
                        return w;
                    if (s(e))
                        return D;
                    if (c(e))
                        return S;
                    if (_(e))
                        return O;
                    throw new TypeError(`unsupported tag ${e}`)
                }
            }(e.peek()).dec(e)
        }
          , E = {
            enc(e, t) {
                e.putUi8(192)
            },
            dec(e) {
                const t = e.getUi8();
                return 192 !== t && r(t, "nil"),
                null
            }
        }
          , y = {
            enc(e, t) {
                e.putUi8(t ? 195 : 194)
            },
            dec(e) {
                const t = e.getUi8();
                switch (t) {
                case 192:
                case 194:
                    return !1;
                case 195:
                    return !0;
                default:
                    r(t, "bool")
                }
            }
        }
          , w = {
            enc(e, t) {
                -128 <= t && t <= 127 ? t >= 0 ? e.putUi8(i(t)) : t > -32 ? e.putUi8(224 | 31 & t) : (e.putUi8(208),
                e.putUi8(t)) : -32768 <= t && t <= 32767 ? (e.putI8(209),
                e.putI16(t)) : -2147483648 <= t && t <= 2147483647 ? (e.putI8(210),
                e.putI32(t)) : (e.putI8(211),
                e.putI64(t))
            },
            dec(e) {
                const t = e.getUi8();
                if (o(t))
                    return function(e) {
                        return 127 & e
                    }(t);
                if (a(t))
                    return function(e) {
                        return e - 256
                    }(t);
                switch (t) {
                case 192:
                    return 0;
                case 208:
                    return e.getI8();
                case 209:
                    return e.getI16();
                case 210:
                    return e.getI32();
                case 211:
                    return e.getI64();
                case 204:
                    return e.getUi8();
                case 205:
                    return e.getUi16();
                case 206:
                    return e.getUi32();
                case 207:
                    return e.getUi64();
                default:
                    r(t, "int")
                }
            }
        }
          , b = {
            enc(e, t) {
                if (t < 0)
                    throw new Error(`not an uint: ${t}`);
                t <= 127 ? e.putUi8(i(t)) : t <= 255 ? (e.putUi8(204),
                e.putUi8(t)) : t <= 65535 ? (e.putUi8(205),
                e.putUi16(t)) : t <= 4294967295 ? (e.putUi8(206),
                e.putUi32(t)) : (e.putUi8(207),
                e.putUi64(t))
            },
            dec(e) {
                const t = w.dec(e);
                if (t < 0)
                    throw new RangeError("uint underflow");
                return t
            }
        }
          , C = {
            enc(e, t) {
                e.putUi8(203),
                e.putF(t)
            },
            dec(e) {
                const t = e.getUi8();
                switch (t) {
                case 192:
                    return 0;
                case 202:
                    return e.getF32();
                case 203:
                    return e.getF64();
                default:
                    r(t, "float")
                }
            }
        }
          , T = {
            enc(e, t) {
                l(e, t, 196)
            },
            dec: u
        }
          , D = {
            enc(e, t) {
                const n = function(e) {
                    const t = e.length
                      , n = new Uint8Array(4 * t);
                    let r, i = 0, o = 0;
                    for (; o < t; )
                        r = e.charCodeAt(o++),
                        55296 == (64512 & r) && (r = (r << 10) + e.charCodeAt(o++) - 56613888),
                        r < 128 ? n[i++] = r : r < 2048 ? (n[i++] = 192 + (r >> 6),
                        n[i++] = 128 + (63 & r)) : r < 65536 ? (n[i++] = 224 + (r >> 12),
                        n[i++] = 128 + (r >> 6 & 63),
                        n[i++] = 128 + (63 & r)) : (n[i++] = 240 + (r >> 18),
                        n[i++] = 128 + (r >> 12 & 63),
                        n[i++] = 128 + (r >> 6 & 63),
                        n[i++] = 128 + (63 & r));
                    return n.buffer.slice(0, i)
                }(t);
                n.byteLength < 32 ? (e.putUi8(160 | 31 & n.byteLength),
                e.put(n)) : l(e, n, 217)
            },
            dec: e=>function(e) {
                return new TextDecoder("utf-8").decode(e)
            }(u(e))
        }
          , A = {
            enc(e, t) {
                const n = t.getTime();
                e.putUi8(199),
                e.putUi8(12),
                e.putI8(-1),
                e.putUi32(n % 1e3 * 1e6),
                e.putI64(n / 1e3)
            },
            dec(e) {
                const t = e.getUi8();
                switch (t) {
                case 214:
                    if (-1 === e.getI8())
                        return new Date(1e3 * e.getUi32());
                    break;
                case 215:
                    if (-1 === e.getI8()) {
                        const t = e.getUi32()
                          , n = e.getUi32();
                        return new Date(1e3 * (n + 4294967296 * (3 & t)) + t / 4e6)
                    }
                    break;
                case 199:
                    if (12 === e.getUi8() && -1 === e.getI8()) {
                        const t = e.getUi32()
                          , n = e.getI64();
                        return new Date(1e3 * n + t / 1e6)
                    }
                }
                r(t, "time")
            }
        }
          , S = (P = v,
        {
            encHeader: d,
            decHeader: p,
            enc(e, t) {
                d(e, t.length),
                t.forEach((t=>P.enc(e, t)))
            },
            dec(e) {
                const t = [];
                for (let n = p(e); n > 0; --n)
                    t.push(P.dec(e));
                return t
            }
        });
        var P;
        const O = function(e, t) {
            return {
                encHeader: h,
                decHeader: m,
                enc(n, r) {
                    const i = Object.keys(r);
                    h(n, i.length),
                    i.forEach((i=>{
                        e.enc(n, i),
                        t.enc(n, r[i])
                    }
                    ))
                },
                dec(n) {
                    const r = {};
                    for (let i = m(n); i > 0; --i) {
                        r[e.dec(n)] = t.dec(n)
                    }
                    return r
                }
            }
        }(v, v);
        function I(e, t) {
            return (t || v).dec(function(e) {
                let t = ArrayBuffer.isView(e) ? new DataView(e.buffer,e.byteOffset,e.byteLength) : new DataView(e)
                  , n = 0;
                return {
                    peek: ()=>t.getUint8(n),
                    get(e) {
                        n += e;
                        const r = t.byteOffset;
                        return t.buffer.slice(r + n - e, r + n)
                    },
                    getI8: ()=>t.getInt8(n++),
                    getI16: ()=>(n += 2,
                    t.getInt16(n - 2)),
                    getI32: ()=>(n += 4,
                    t.getInt32(n - 4)),
                    getI64: ()=>(n += 8,
                    4294967296 * t.getInt32(n - 8) + t.getUint32(n - 4)),
                    getUi8: ()=>t.getUint8(n++),
                    getUi16: ()=>(n += 2,
                    t.getUint16(n - 2)),
                    getUi32: ()=>(n += 4,
                    t.getUint32(n - 4)),
                    getUi64: ()=>(n += 8,
                    4294967296 * t.getUint32(n - 8) + t.getUint32(n - 4)),
                    getF32: ()=>(n += 4,
                    t.getFloat32(n - 4)),
                    getF64: ()=>(n += 8,
                    t.getFloat64(n - 8))
                }
            }(e))
        }
    }
    ,
    892703: (e,t,n)=>{
        "use strict";
        var r = n(150414);
        function i() {}
        function o() {}
        o.resetWarningCache = i,
        e.exports = function() {
            function e(e, t, n, i, o, a) {
                if (a !== r) {
                    var s = new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");
                    throw s.name = "Invariant Violation",
                    s
                }
            }
            function t() {
                return e
            }
            e.isRequired = e;
            var n = {
                array: e,
                bool: e,
                func: e,
                number: e,
                object: e,
                string: e,
                symbol: e,
                any: e,
                arrayOf: t,
                element: e,
                elementType: e,
                instanceOf: t,
                node: e,
                objectOf: t,
                oneOf: t,
                oneOfType: t,
                shape: t,
                exact: t,
                checkPropTypes: o,
                resetWarningCache: i
            };
            return n.PropTypes = n,
            n
        }
    }
    ,
    45697: (e,t,n)=>{
        e.exports = n(892703)()
    }
    ,
    150414: e=>{
        "use strict";
        e.exports = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"
    }
    ,
    286702: ()=>{
        window.requestIdleCallback = window.requestIdleCallback || function(e) {
            var t = Date.now();
            return setTimeout((function() {
                e({
                    didTimeout: !1,
                    timeRemaining: function() {
                        return Math.max(0, 50 - (Date.now() - t))
                    }
                })
            }
            ), 1)
        }
        ,
        window.cancelIdleCallback = window.cancelIdleCallback || function(e) {
            clearTimeout(e)
        }
    }
    ,
    762539: (e,t,n)=>{
        "use strict";
        var r = n(857539);
        function i(e, t, n, i, o) {
            var a = r.writeRtpDescription(e.kind, t);
            if (a += r.writeIceParameters(e.iceGatherer.getLocalParameters()),
            a += r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === n ? "actpass" : o || "active"),
            a += "a=mid:" + e.mid + "\r\n",
            e.rtpSender && e.rtpReceiver ? a += "a=sendrecv\r\n" : e.rtpSender ? a += "a=sendonly\r\n" : e.rtpReceiver ? a += "a=recvonly\r\n" : a += "a=inactive\r\n",
            e.rtpSender) {
                var s = e.rtpSender._initialTrackId || e.rtpSender.track.id;
                e.rtpSender._initialTrackId = s;
                var c = "msid:" + (i ? i.id : "-") + " " + s + "\r\n";
                a += "a=" + c,
                a += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + c,
                e.sendEncodingParameters[0].rtx && (a += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + c,
                a += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n")
            }
            return a += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + r.localCName + "\r\n",
            e.rtpSender && e.sendEncodingParameters[0].rtx && (a += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + r.localCName + "\r\n"),
            a
        }
        function o(e, t) {
            var n = {
                codecs: [],
                headerExtensions: [],
                fecMechanisms: []
            }
              , r = function(e, t) {
                e = parseInt(e, 10);
                for (var n = 0; n < t.length; n++)
                    if (t[n].payloadType === e || t[n].preferredPayloadType === e)
                        return t[n]
            }
              , i = function(e, t, n, i) {
                var o = r(e.parameters.apt, n)
                  , a = r(t.parameters.apt, i);
                return o && a && o.name.toLowerCase() === a.name.toLowerCase()
            };
            return e.codecs.forEach((function(r) {
                for (var o = 0; o < t.codecs.length; o++) {
                    var a = t.codecs[o];
                    if (r.name.toLowerCase() === a.name.toLowerCase() && r.clockRate === a.clockRate) {
                        if ("rtx" === r.name.toLowerCase() && r.parameters && a.parameters.apt && !i(r, a, e.codecs, t.codecs))
                            continue;
                        (a = JSON.parse(JSON.stringify(a))).numChannels = Math.min(r.numChannels, a.numChannels),
                        n.codecs.push(a),
                        a.rtcpFeedback = a.rtcpFeedback.filter((function(e) {
                            for (var t = 0; t < r.rtcpFeedback.length; t++)
                                if (r.rtcpFeedback[t].type === e.type && r.rtcpFeedback[t].parameter === e.parameter)
                                    return !0;
                            return !1
                        }
                        ));
                        break
                    }
                }
            }
            )),
            e.headerExtensions.forEach((function(e) {
                for (var r = 0; r < t.headerExtensions.length; r++) {
                    var i = t.headerExtensions[r];
                    if (e.uri === i.uri) {
                        n.headerExtensions.push(i);
                        break
                    }
                }
            }
            )),
            n
        }
        function a(e, t, n) {
            return -1 !== {
                offer: {
                    setLocalDescription: ["stable", "have-local-offer"],
                    setRemoteDescription: ["stable", "have-remote-offer"]
                },
                answer: {
                    setLocalDescription: ["have-remote-offer", "have-local-pranswer"],
                    setRemoteDescription: ["have-local-offer", "have-remote-pranswer"]
                }
            }[t][e].indexOf(n)
        }
        function s(e, t) {
            var n = e.getRemoteCandidates().find((function(e) {
                return t.foundation === e.foundation && t.ip === e.ip && t.port === e.port && t.priority === e.priority && t.protocol === e.protocol && t.type === e.type
            }
            ));
            return n || e.addRemoteCandidate(t),
            !n
        }
        function c(e, t) {
            var n = new Error(t);
            return n.name = e,
            n.code = {
                NotSupportedError: 9,
                InvalidStateError: 11,
                InvalidAccessError: 15,
                TypeError: void 0,
                OperationError: void 0
            }[e],
            n
        }
        e.exports = function(e, t) {
            function n(t, n) {
                n.addTrack(t),
                n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{
                    track: t
                }))
            }
            function _(t, n, r, i) {
                var o = new Event("track");
                o.track = n,
                o.receiver = r,
                o.transceiver = {
                    receiver: r
                },
                o.streams = i,
                e.setTimeout((function() {
                    t._dispatchEvent("track", o)
                }
                ))
            }
            var l = function(n) {
                var i = this
                  , o = document.createDocumentFragment();
                if (["addEventListener", "removeEventListener", "dispatchEvent"].forEach((function(e) {
                    i[e] = o[e].bind(o)
                }
                )),
                this.canTrickleIceCandidates = null,
                this.needNegotiation = !1,
                this.localStreams = [],
                this.remoteStreams = [],
                this._localDescription = null,
                this._remoteDescription = null,
                this.signalingState = "stable",
                this.iceConnectionState = "new",
                this.connectionState = "new",
                this.iceGatheringState = "new",
                n = JSON.parse(JSON.stringify(n || {})),
                this.usingBundle = "max-bundle" === n.bundlePolicy,
                "negotiate" === n.rtcpMuxPolicy)
                    throw c("NotSupportedError", "rtcpMuxPolicy 'negotiate' is not supported");
                switch (n.rtcpMuxPolicy || (n.rtcpMuxPolicy = "require"),
                n.iceTransportPolicy) {
                case "all":
                case "relay":
                    break;
                default:
                    n.iceTransportPolicy = "all"
                }
                switch (n.bundlePolicy) {
                case "balanced":
                case "max-compat":
                case "max-bundle":
                    break;
                default:
                    n.bundlePolicy = "balanced"
                }
                if (n.iceServers = function(e, t) {
                    var n = !1;
                    return (e = JSON.parse(JSON.stringify(e))).filter((function(e) {
                        if (e && (e.urls || e.url)) {
                            var r = e.urls || e.url;
                            e.url && !e.urls && console.warn("RTCIceServer.url is deprecated! Use urls instead.");
                            var i = "string" == typeof r;
                            return i && (r = [r]),
                            r = r.filter((function(e) {
                                return 0 !== e.indexOf("turn:") || -1 === e.indexOf("transport=udp") || -1 !== e.indexOf("turn:[") || n ? 0 === e.indexOf("stun:") && t >= 14393 && -1 === e.indexOf("?transport=udp") : (n = !0,
                                !0)
                            }
                            )),
                            delete e.url,
                            e.urls = i ? r[0] : r,
                            !!r.length
                        }
                    }
                    ))
                }(n.iceServers || [], t),
                this._iceGatherers = [],
                n.iceCandidatePoolSize)
                    for (var a = n.iceCandidatePoolSize; a > 0; a--)
                        this._iceGatherers.push(new e.RTCIceGatherer({
                            iceServers: n.iceServers,
                            gatherPolicy: n.iceTransportPolicy
                        }));
                else
                    n.iceCandidatePoolSize = 0;
                this._config = n,
                this.transceivers = [],
                this._sdpSessionId = r.generateSessionId(),
                this._sdpSessionVersion = 0,
                this._dtlsRole = void 0,
                this._isClosed = !1
            };
            Object.defineProperty(l.prototype, "localDescription", {
                configurable: !0,
                get: function() {
                    return this._localDescription
                }
            }),
            Object.defineProperty(l.prototype, "remoteDescription", {
                configurable: !0,
                get: function() {
                    return this._remoteDescription
                }
            }),
            l.prototype.onicecandidate = null,
            l.prototype.onaddstream = null,
            l.prototype.ontrack = null,
            l.prototype.onremovestream = null,
            l.prototype.onsignalingstatechange = null,
            l.prototype.oniceconnectionstatechange = null,
            l.prototype.onconnectionstatechange = null,
            l.prototype.onicegatheringstatechange = null,
            l.prototype.onnegotiationneeded = null,
            l.prototype.ondatachannel = null,
            l.prototype._dispatchEvent = function(e, t) {
                this._isClosed || (this.dispatchEvent(t),
                "function" == typeof this["on" + e] && this["on" + e](t))
            }
            ,
            l.prototype._emitGatheringStateChange = function() {
                var e = new Event("icegatheringstatechange");
                this._dispatchEvent("icegatheringstatechange", e)
            }
            ,
            l.prototype.getConfiguration = function() {
                return this._config
            }
            ,
            l.prototype.getLocalStreams = function() {
                return this.localStreams
            }
            ,
            l.prototype.getRemoteStreams = function() {
                return this.remoteStreams
            }
            ,
            l.prototype._createTransceiver = function(e, t) {
                var n = this.transceivers.length > 0
                  , r = {
                    track: null,
                    iceGatherer: null,
                    iceTransport: null,
                    dtlsTransport: null,
                    localCapabilities: null,
                    remoteCapabilities: null,
                    rtpSender: null,
                    rtpReceiver: null,
                    kind: e,
                    mid: null,
                    sendEncodingParameters: null,
                    recvEncodingParameters: null,
                    stream: null,
                    associatedRemoteMediaStreams: [],
                    wantReceive: !0
                };
                if (this.usingBundle && n)
                    r.iceTransport = this.transceivers[0].iceTransport,
                    r.dtlsTransport = this.transceivers[0].dtlsTransport;
                else {
                    var i = this._createIceAndDtlsTransports();
                    r.iceTransport = i.iceTransport,
                    r.dtlsTransport = i.dtlsTransport
                }
                return t || this.transceivers.push(r),
                r
            }
            ,
            l.prototype.addTrack = function(t, n) {
                if (this._isClosed)
                    throw c("InvalidStateError", "Attempted to call addTrack on a closed peerconnection.");
                var r;
                if (this.transceivers.find((function(e) {
                    return e.track === t
                }
                )))
                    throw c("InvalidAccessError", "Track already exists.");
                for (var i = 0; i < this.transceivers.length; i++)
                    this.transceivers[i].track || this.transceivers[i].kind !== t.kind || (r = this.transceivers[i]);
                return r || (r = this._createTransceiver(t.kind)),
                this._maybeFireNegotiationNeeded(),
                -1 === this.localStreams.indexOf(n) && this.localStreams.push(n),
                r.track = t,
                r.stream = n,
                r.rtpSender = new e.RTCRtpSender(t,r.dtlsTransport),
                r.rtpSender
            }
            ,
            l.prototype.addStream = function(e) {
                var n = this;
                if (t >= 15025)
                    e.getTracks().forEach((function(t) {
                        n.addTrack(t, e)
                    }
                    ));
                else {
                    var r = e.clone();
                    e.getTracks().forEach((function(e, t) {
                        var n = r.getTracks()[t];
                        e.addEventListener("enabled", (function(e) {
                            n.enabled = e.enabled
                        }
                        ))
                    }
                    )),
                    r.getTracks().forEach((function(e) {
                        n.addTrack(e, r)
                    }
                    ))
                }
            }
            ,
            l.prototype.removeTrack = function(t) {
                if (this._isClosed)
                    throw c("InvalidStateError", "Attempted to call removeTrack on a closed peerconnection.");
                if (!(t instanceof e.RTCRtpSender))
                    throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");
                var n = this.transceivers.find((function(e) {
                    return e.rtpSender === t
                }
                ));
                if (!n)
                    throw c("InvalidAccessError", "Sender was not created by this connection.");
                var r = n.stream;
                n.rtpSender.stop(),
                n.rtpSender = null,
                n.track = null,
                n.stream = null,
                -1 === this.transceivers.map((function(e) {
                    return e.stream
                }
                )).indexOf(r) && this.localStreams.indexOf(r) > -1 && this.localStreams.splice(this.localStreams.indexOf(r), 1),
                this._maybeFireNegotiationNeeded()
            }
            ,
            l.prototype.removeStream = function(e) {
                var t = this;
                e.getTracks().forEach((function(e) {
                    var n = t.getSenders().find((function(t) {
                        return t.track === e
                    }
                    ));
                    n && t.removeTrack(n)
                }
                ))
            }
            ,
            l.prototype.getSenders = function() {
                return this.transceivers.filter((function(e) {
                    return !!e.rtpSender
                }
                )).map((function(e) {
                    return e.rtpSender
                }
                ))
            }
            ,
            l.prototype.getReceivers = function() {
                return this.transceivers.filter((function(e) {
                    return !!e.rtpReceiver
                }
                )).map((function(e) {
                    return e.rtpReceiver
                }
                ))
            }
            ,
            l.prototype._createIceGatherer = function(t, n) {
                var r = this;
                if (n && t > 0)
                    return this.transceivers[0].iceGatherer;
                if (this._iceGatherers.length)
                    return this._iceGatherers.shift();
                var i = new e.RTCIceGatherer({
                    iceServers: this._config.iceServers,
                    gatherPolicy: this._config.iceTransportPolicy
                });
                return Object.defineProperty(i, "state", {
                    value: "new",
                    writable: !0
                }),
                this.transceivers[t].bufferedCandidateEvents = [],
                this.transceivers[t].bufferCandidates = function(e) {
                    var n = !e.candidate || 0 === Object.keys(e.candidate).length;
                    i.state = n ? "completed" : "gathering",
                    null !== r.transceivers[t].bufferedCandidateEvents && r.transceivers[t].bufferedCandidateEvents.push(e)
                }
                ,
                i.addEventListener("localcandidate", this.transceivers[t].bufferCandidates),
                i
            }
            ,
            l.prototype._gather = function(t, n) {
                var i = this
                  , o = this.transceivers[n].iceGatherer;
                if (!o.onlocalcandidate) {
                    var a = this.transceivers[n].bufferedCandidateEvents;
                    this.transceivers[n].bufferedCandidateEvents = null,
                    o.removeEventListener("localcandidate", this.transceivers[n].bufferCandidates),
                    o.onlocalcandidate = function(e) {
                        if (!(i.usingBundle && n > 0)) {
                            var a = new Event("icecandidate");
                            a.candidate = {
                                sdpMid: t,
                                sdpMLineIndex: n
                            };
                            var s = e.candidate
                              , c = !s || 0 === Object.keys(s).length;
                            if (c)
                                "new" !== o.state && "gathering" !== o.state || (o.state = "completed");
                            else {
                                "new" === o.state && (o.state = "gathering"),
                                s.component = 1,
                                s.ufrag = o.getLocalParameters().usernameFragment;
                                var _ = r.writeCandidate(s);
                                a.candidate = Object.assign(a.candidate, r.parseCandidate(_)),
                                a.candidate.candidate = _,
                                a.candidate.toJSON = function() {
                                    return {
                                        candidate: a.candidate.candidate,
                                        sdpMid: a.candidate.sdpMid,
                                        sdpMLineIndex: a.candidate.sdpMLineIndex,
                                        usernameFragment: a.candidate.usernameFragment
                                    }
                                }
                            }
                            var l = r.getMediaSections(i._localDescription.sdp);
                            l[a.candidate.sdpMLineIndex] += c ? "a=end-of-candidates\r\n" : "a=" + a.candidate.candidate + "\r\n",
                            i._localDescription.sdp = r.getDescription(i._localDescription.sdp) + l.join("");
                            var u = i.transceivers.every((function(e) {
                                return e.iceGatherer && "completed" === e.iceGatherer.state
                            }
                            ));
                            "gathering" !== i.iceGatheringState && (i.iceGatheringState = "gathering",
                            i._emitGatheringStateChange()),
                            c || i._dispatchEvent("icecandidate", a),
                            u && (i._dispatchEvent("icecandidate", new Event("icecandidate")),
                            i.iceGatheringState = "complete",
                            i._emitGatheringStateChange())
                        }
                    }
                    ,
                    e.setTimeout((function() {
                        a.forEach((function(e) {
                            o.onlocalcandidate(e)
                        }
                        ))
                    }
                    ), 0)
                }
            }
            ,
            l.prototype._createIceAndDtlsTransports = function() {
                var t = this
                  , n = new e.RTCIceTransport(null);
                n.onicestatechange = function() {
                    t._updateIceConnectionState(),
                    t._updateConnectionState()
                }
                ;
                var r = new e.RTCDtlsTransport(n);
                return r.ondtlsstatechange = function() {
                    t._updateConnectionState()
                }
                ,
                r.onerror = function() {
                    Object.defineProperty(r, "state", {
                        value: "failed",
                        writable: !0
                    }),
                    t._updateConnectionState()
                }
                ,
                {
                    iceTransport: n,
                    dtlsTransport: r
                }
            }
            ,
            l.prototype._disposeIceAndDtlsTransports = function(e) {
                var t = this.transceivers[e].iceGatherer;
                t && (delete t.onlocalcandidate,
                delete this.transceivers[e].iceGatherer);
                var n = this.transceivers[e].iceTransport;
                n && (delete n.onicestatechange,
                delete this.transceivers[e].iceTransport);
                var r = this.transceivers[e].dtlsTransport;
                r && (delete r.ondtlsstatechange,
                delete r.onerror,
                delete this.transceivers[e].dtlsTransport)
            }
            ,
            l.prototype._transceive = function(e, n, i) {
                var a = o(e.localCapabilities, e.remoteCapabilities);
                n && e.rtpSender && (a.encodings = e.sendEncodingParameters,
                a.rtcp = {
                    cname: r.localCName,
                    compound: e.rtcpParameters.compound
                },
                e.recvEncodingParameters.length && (a.rtcp.ssrc = e.recvEncodingParameters[0].ssrc),
                e.rtpSender.send(a)),
                i && e.rtpReceiver && a.codecs.length > 0 && ("video" === e.kind && e.recvEncodingParameters && t < 15019 && e.recvEncodingParameters.forEach((function(e) {
                    delete e.rtx
                }
                )),
                e.recvEncodingParameters.length ? a.encodings = e.recvEncodingParameters : a.encodings = [{}],
                a.rtcp = {
                    compound: e.rtcpParameters.compound
                },
                e.rtcpParameters.cname && (a.rtcp.cname = e.rtcpParameters.cname),
                e.sendEncodingParameters.length && (a.rtcp.ssrc = e.sendEncodingParameters[0].ssrc),
                e.rtpReceiver.receive(a))
            }
            ,
            l.prototype.setLocalDescription = function(e) {
                var t, n, i = this;
                if (-1 === ["offer", "answer"].indexOf(e.type))
                    return Promise.reject(c("TypeError", 'Unsupported type "' + e.type + '"'));
                if (!a("setLocalDescription", e.type, i.signalingState) || i._isClosed)
                    return Promise.reject(c("InvalidStateError", "Can not set local " + e.type + " in state " + i.signalingState));
                if ("offer" === e.type)
                    t = r.splitSections(e.sdp),
                    n = t.shift(),
                    t.forEach((function(e, t) {
                        var n = r.parseRtpParameters(e);
                        i.transceivers[t].localCapabilities = n
                    }
                    )),
                    i.transceivers.forEach((function(e, t) {
                        i._gather(e.mid, t)
                    }
                    ));
                else if ("answer" === e.type) {
                    t = r.splitSections(i._remoteDescription.sdp),
                    n = t.shift();
                    var s = r.matchPrefix(n, "a=ice-lite").length > 0;
                    t.forEach((function(e, t) {
                        var a = i.transceivers[t]
                          , c = a.iceGatherer
                          , _ = a.iceTransport
                          , l = a.dtlsTransport
                          , u = a.localCapabilities
                          , d = a.remoteCapabilities;
                        if (!(r.isRejected(e) && 0 === r.matchPrefix(e, "a=bundle-only").length) && !a.rejected) {
                            var p = r.getIceParameters(e, n)
                              , h = r.getDtlsParameters(e, n);
                            s && (h.role = "server"),
                            i.usingBundle && 0 !== t || (i._gather(a.mid, t),
                            "new" === _.state && _.start(c, p, s ? "controlling" : "controlled"),
                            "new" === l.state && l.start(h));
                            var m = o(u, d);
                            i._transceive(a, m.codecs.length > 0, !1)
                        }
                    }
                    ))
                }
                return i._localDescription = {
                    type: e.type,
                    sdp: e.sdp
                },
                "offer" === e.type ? i._updateSignalingState("have-local-offer") : i._updateSignalingState("stable"),
                Promise.resolve()
            }
            ,
            l.prototype.setRemoteDescription = function(i) {
                var l = this;
                if (-1 === ["offer", "answer"].indexOf(i.type))
                    return Promise.reject(c("TypeError", 'Unsupported type "' + i.type + '"'));
                if (!a("setRemoteDescription", i.type, l.signalingState) || l._isClosed)
                    return Promise.reject(c("InvalidStateError", "Can not set remote " + i.type + " in state " + l.signalingState));
                var u = {};
                l.remoteStreams.forEach((function(e) {
                    u[e.id] = e
                }
                ));
                var d = []
                  , p = r.splitSections(i.sdp)
                  , h = p.shift()
                  , m = r.matchPrefix(h, "a=ice-lite").length > 0
                  , f = r.matchPrefix(h, "a=group:BUNDLE ").length > 0;
                l.usingBundle = f;
                var g = r.matchPrefix(h, "a=ice-options:")[0];
                return l.canTrickleIceCandidates = !!g && g.substr(14).split(" ").indexOf("trickle") >= 0,
                p.forEach((function(a, c) {
                    var _ = r.splitLines(a)
                      , p = r.getKind(a)
                      , g = r.isRejected(a) && 0 === r.matchPrefix(a, "a=bundle-only").length
                      , v = _[0].substr(2).split(" ")[2]
                      , E = r.getDirection(a, h)
                      , y = r.parseMsid(a)
                      , w = r.getMid(a) || r.generateIdentifier();
                    if (g || "application" === p && ("DTLS/SCTP" === v || "UDP/DTLS/SCTP" === v))
                        l.transceivers[c] = {
                            mid: w,
                            kind: p,
                            protocol: v,
                            rejected: !0
                        };
                    else {
                        var b, C, T, D, A, S, P, O, I;
                        !g && l.transceivers[c] && l.transceivers[c].rejected && (l.transceivers[c] = l._createTransceiver(p, !0));
                        var M, R, L = r.parseRtpParameters(a);
                        g || (M = r.getIceParameters(a, h),
                        (R = r.getDtlsParameters(a, h)).role = "client"),
                        P = r.parseRtpEncodingParameters(a);
                        var k = r.parseRtcpParameters(a)
                          , B = r.matchPrefix(a, "a=end-of-candidates", h).length > 0
                          , x = r.matchPrefix(a, "a=candidate:").map((function(e) {
                            return r.parseCandidate(e)
                        }
                        )).filter((function(e) {
                            return 1 === e.component
                        }
                        ));
                        if (("offer" === i.type || "answer" === i.type) && !g && f && c > 0 && l.transceivers[c] && (l._disposeIceAndDtlsTransports(c),
                        l.transceivers[c].iceGatherer = l.transceivers[0].iceGatherer,
                        l.transceivers[c].iceTransport = l.transceivers[0].iceTransport,
                        l.transceivers[c].dtlsTransport = l.transceivers[0].dtlsTransport,
                        l.transceivers[c].rtpSender && l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),
                        l.transceivers[c].rtpReceiver && l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),
                        "offer" !== i.type || g) {
                            if ("answer" === i.type && !g) {
                                C = (b = l.transceivers[c]).iceGatherer,
                                T = b.iceTransport,
                                D = b.dtlsTransport,
                                A = b.rtpReceiver,
                                S = b.sendEncodingParameters,
                                O = b.localCapabilities,
                                l.transceivers[c].recvEncodingParameters = P,
                                l.transceivers[c].remoteCapabilities = L,
                                l.transceivers[c].rtcpParameters = k,
                                x.length && "new" === T.state && (!m && !B || f && 0 !== c ? x.forEach((function(e) {
                                    s(b.iceTransport, e)
                                }
                                )) : T.setRemoteCandidates(x)),
                                f && 0 !== c || ("new" === T.state && T.start(C, M, "controlling"),
                                "new" === D.state && D.start(R)),
                                !o(b.localCapabilities, b.remoteCapabilities).codecs.filter((function(e) {
                                    return "rtx" === e.name.toLowerCase()
                                }
                                )).length && b.sendEncodingParameters[0].rtx && delete b.sendEncodingParameters[0].rtx,
                                l._transceive(b, "sendrecv" === E || "recvonly" === E, "sendrecv" === E || "sendonly" === E),
                                !A || "sendrecv" !== E && "sendonly" !== E ? delete b.rtpReceiver : (I = A.track,
                                y ? (u[y.stream] || (u[y.stream] = new e.MediaStream),
                                n(I, u[y.stream]),
                                d.push([I, A, u[y.stream]])) : (u.default || (u.default = new e.MediaStream),
                                n(I, u.default),
                                d.push([I, A, u.default])))
                            }
                        } else {
                            (b = l.transceivers[c] || l._createTransceiver(p)).mid = w,
                            b.iceGatherer || (b.iceGatherer = l._createIceGatherer(c, f)),
                            x.length && "new" === b.iceTransport.state && (!B || f && 0 !== c ? x.forEach((function(e) {
                                s(b.iceTransport, e)
                            }
                            )) : b.iceTransport.setRemoteCandidates(x)),
                            O = e.RTCRtpReceiver.getCapabilities(p),
                            t < 15019 && (O.codecs = O.codecs.filter((function(e) {
                                return "rtx" !== e.name
                            }
                            ))),
                            S = b.sendEncodingParameters || [{
                                ssrc: 1001 * (2 * c + 2)
                            }];
                            var N, U = !1;
                            if ("sendrecv" === E || "sendonly" === E) {
                                if (U = !b.rtpReceiver,
                                A = b.rtpReceiver || new e.RTCRtpReceiver(b.dtlsTransport,p),
                                U)
                                    I = A.track,
                                    y && "-" === y.stream || (y ? (u[y.stream] || (u[y.stream] = new e.MediaStream,
                                    Object.defineProperty(u[y.stream], "id", {
                                        get: function() {
                                            return y.stream
                                        }
                                    })),
                                    Object.defineProperty(I, "id", {
                                        get: function() {
                                            return y.track
                                        }
                                    }),
                                    N = u[y.stream]) : (u.default || (u.default = new e.MediaStream),
                                    N = u.default)),
                                    N && (n(I, N),
                                    b.associatedRemoteMediaStreams.push(N)),
                                    d.push([I, A, N])
                            } else
                                b.rtpReceiver && b.rtpReceiver.track && (b.associatedRemoteMediaStreams.forEach((function(t) {
                                    var n = t.getTracks().find((function(e) {
                                        return e.id === b.rtpReceiver.track.id
                                    }
                                    ));
                                    n && function(t, n) {
                                        n.removeTrack(t),
                                        n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{
                                            track: t
                                        }))
                                    }(n, t)
                                }
                                )),
                                b.associatedRemoteMediaStreams = []);
                            b.localCapabilities = O,
                            b.remoteCapabilities = L,
                            b.rtpReceiver = A,
                            b.rtcpParameters = k,
                            b.sendEncodingParameters = S,
                            b.recvEncodingParameters = P,
                            l._transceive(l.transceivers[c], !1, U)
                        }
                    }
                }
                )),
                void 0 === l._dtlsRole && (l._dtlsRole = "offer" === i.type ? "active" : "passive"),
                l._remoteDescription = {
                    type: i.type,
                    sdp: i.sdp
                },
                "offer" === i.type ? l._updateSignalingState("have-remote-offer") : l._updateSignalingState("stable"),
                Object.keys(u).forEach((function(t) {
                    var n = u[t];
                    if (n.getTracks().length) {
                        if (-1 === l.remoteStreams.indexOf(n)) {
                            l.remoteStreams.push(n);
                            var r = new Event("addstream");
                            r.stream = n,
                            e.setTimeout((function() {
                                l._dispatchEvent("addstream", r)
                            }
                            ))
                        }
                        d.forEach((function(e) {
                            var t = e[0]
                              , r = e[1];
                            n.id === e[2].id && _(l, t, r, [n])
                        }
                        ))
                    }
                }
                )),
                d.forEach((function(e) {
                    e[2] || _(l, e[0], e[1], [])
                }
                )),
                e.setTimeout((function() {
                    l && l.transceivers && l.transceivers.forEach((function(e) {
                        e.iceTransport && "new" === e.iceTransport.state && e.iceTransport.getRemoteCandidates().length > 0 && (console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),
                        e.iceTransport.addRemoteCandidate({}))
                    }
                    ))
                }
                ), 4e3),
                Promise.resolve()
            }
            ,
            l.prototype.close = function() {
                this.transceivers.forEach((function(e) {
                    e.iceTransport && e.iceTransport.stop(),
                    e.dtlsTransport && e.dtlsTransport.stop(),
                    e.rtpSender && e.rtpSender.stop(),
                    e.rtpReceiver && e.rtpReceiver.stop()
                }
                )),
                this._isClosed = !0,
                this._updateSignalingState("closed")
            }
            ,
            l.prototype._updateSignalingState = function(e) {
                this.signalingState = e;
                var t = new Event("signalingstatechange");
                this._dispatchEvent("signalingstatechange", t)
            }
            ,
            l.prototype._maybeFireNegotiationNeeded = function() {
                var t = this;
                "stable" === this.signalingState && !0 !== this.needNegotiation && (this.needNegotiation = !0,
                e.setTimeout((function() {
                    if (t.needNegotiation) {
                        t.needNegotiation = !1;
                        var e = new Event("negotiationneeded");
                        t._dispatchEvent("negotiationneeded", e)
                    }
                }
                ), 0))
            }
            ,
            l.prototype._updateIceConnectionState = function() {
                var e, t = {
                    new: 0,
                    closed: 0,
                    checking: 0,
                    connected: 0,
                    completed: 0,
                    disconnected: 0,
                    failed: 0
                };
                if (this.transceivers.forEach((function(e) {
                    e.iceTransport && !e.rejected && t[e.iceTransport.state]++
                }
                )),
                e = "new",
                t.failed > 0 ? e = "failed" : t.checking > 0 ? e = "checking" : t.disconnected > 0 ? e = "disconnected" : t.new > 0 ? e = "new" : t.connected > 0 ? e = "connected" : t.completed > 0 && (e = "completed"),
                e !== this.iceConnectionState) {
                    this.iceConnectionState = e;
                    var n = new Event("iceconnectionstatechange");
                    this._dispatchEvent("iceconnectionstatechange", n)
                }
            }
            ,
            l.prototype._updateConnectionState = function() {
                var e, t = {
                    new: 0,
                    closed: 0,
                    connecting: 0,
                    connected: 0,
                    completed: 0,
                    disconnected: 0,
                    failed: 0
                };
                if (this.transceivers.forEach((function(e) {
                    e.iceTransport && e.dtlsTransport && !e.rejected && (t[e.iceTransport.state]++,
                    t[e.dtlsTransport.state]++)
                }
                )),
                t.connected += t.completed,
                e = "new",
                t.failed > 0 ? e = "failed" : t.connecting > 0 ? e = "connecting" : t.disconnected > 0 ? e = "disconnected" : t.new > 0 ? e = "new" : t.connected > 0 && (e = "connected"),
                e !== this.connectionState) {
                    this.connectionState = e;
                    var n = new Event("connectionstatechange");
                    this._dispatchEvent("connectionstatechange", n)
                }
            }
            ,
            l.prototype.createOffer = function() {
                var n = this;
                if (n._isClosed)
                    return Promise.reject(c("InvalidStateError", "Can not call createOffer after close"));
                var o = n.transceivers.filter((function(e) {
                    return "audio" === e.kind
                }
                )).length
                  , a = n.transceivers.filter((function(e) {
                    return "video" === e.kind
                }
                )).length
                  , s = arguments[0];
                if (s) {
                    if (s.mandatory || s.optional)
                        throw new TypeError("Legacy mandatory/optional constraints not supported.");
                    void 0 !== s.offerToReceiveAudio && (o = !0 === s.offerToReceiveAudio ? 1 : !1 === s.offerToReceiveAudio ? 0 : s.offerToReceiveAudio),
                    void 0 !== s.offerToReceiveVideo && (a = !0 === s.offerToReceiveVideo ? 1 : !1 === s.offerToReceiveVideo ? 0 : s.offerToReceiveVideo)
                }
                for (n.transceivers.forEach((function(e) {
                    "audio" === e.kind ? --o < 0 && (e.wantReceive = !1) : "video" === e.kind && --a < 0 && (e.wantReceive = !1)
                }
                )); o > 0 || a > 0; )
                    o > 0 && (n._createTransceiver("audio"),
                    o--),
                    a > 0 && (n._createTransceiver("video"),
                    a--);
                var _ = r.writeSessionBoilerplate(n._sdpSessionId, n._sdpSessionVersion++);
                n.transceivers.forEach((function(i, o) {
                    var a = i.track
                      , s = i.kind
                      , c = i.mid || r.generateIdentifier();
                    i.mid = c,
                    i.iceGatherer || (i.iceGatherer = n._createIceGatherer(o, n.usingBundle));
                    var _ = e.RTCRtpSender.getCapabilities(s);
                    t < 15019 && (_.codecs = _.codecs.filter((function(e) {
                        return "rtx" !== e.name
                    }
                    ))),
                    _.codecs.forEach((function(e) {
                        "H264" === e.name && void 0 === e.parameters["level-asymmetry-allowed"] && (e.parameters["level-asymmetry-allowed"] = "1"),
                        i.remoteCapabilities && i.remoteCapabilities.codecs && i.remoteCapabilities.codecs.forEach((function(t) {
                            e.name.toLowerCase() === t.name.toLowerCase() && e.clockRate === t.clockRate && (e.preferredPayloadType = t.payloadType)
                        }
                        ))
                    }
                    )),
                    _.headerExtensions.forEach((function(e) {
                        (i.remoteCapabilities && i.remoteCapabilities.headerExtensions || []).forEach((function(t) {
                            e.uri === t.uri && (e.id = t.id)
                        }
                        ))
                    }
                    ));
                    var l = i.sendEncodingParameters || [{
                        ssrc: 1001 * (2 * o + 1)
                    }];
                    a && t >= 15019 && "video" === s && !l[0].rtx && (l[0].rtx = {
                        ssrc: l[0].ssrc + 1
                    }),
                    i.wantReceive && (i.rtpReceiver = new e.RTCRtpReceiver(i.dtlsTransport,s)),
                    i.localCapabilities = _,
                    i.sendEncodingParameters = l
                }
                )),
                "max-compat" !== n._config.bundlePolicy && (_ += "a=group:BUNDLE " + n.transceivers.map((function(e) {
                    return e.mid
                }
                )).join(" ") + "\r\n"),
                _ += "a=ice-options:trickle\r\n",
                n.transceivers.forEach((function(e, t) {
                    _ += i(e, e.localCapabilities, "offer", e.stream, n._dtlsRole),
                    _ += "a=rtcp-rsize\r\n",
                    !e.iceGatherer || "new" === n.iceGatheringState || 0 !== t && n.usingBundle || (e.iceGatherer.getLocalCandidates().forEach((function(e) {
                        e.component = 1,
                        _ += "a=" + r.writeCandidate(e) + "\r\n"
                    }
                    )),
                    "completed" === e.iceGatherer.state && (_ += "a=end-of-candidates\r\n"))
                }
                ));
                var l = new e.RTCSessionDescription({
                    type: "offer",
                    sdp: _
                });
                return Promise.resolve(l)
            }
            ,
            l.prototype.createAnswer = function() {
                var n = this;
                if (n._isClosed)
                    return Promise.reject(c("InvalidStateError", "Can not call createAnswer after close"));
                if ("have-remote-offer" !== n.signalingState && "have-local-pranswer" !== n.signalingState)
                    return Promise.reject(c("InvalidStateError", "Can not call createAnswer in signalingState " + n.signalingState));
                var a = r.writeSessionBoilerplate(n._sdpSessionId, n._sdpSessionVersion++);
                n.usingBundle && (a += "a=group:BUNDLE " + n.transceivers.map((function(e) {
                    return e.mid
                }
                )).join(" ") + "\r\n"),
                a += "a=ice-options:trickle\r\n";
                var s = r.getMediaSections(n._remoteDescription.sdp).length;
                n.transceivers.forEach((function(e, r) {
                    if (!(r + 1 > s)) {
                        if (e.rejected)
                            return "application" === e.kind ? "DTLS/SCTP" === e.protocol ? a += "m=application 0 DTLS/SCTP 5000\r\n" : a += "m=application 0 " + e.protocol + " webrtc-datachannel\r\n" : "audio" === e.kind ? a += "m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n" : "video" === e.kind && (a += "m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),
                            void (a += "c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:" + e.mid + "\r\n");
                        var c;
                        if (e.stream)
                            "audio" === e.kind ? c = e.stream.getAudioTracks()[0] : "video" === e.kind && (c = e.stream.getVideoTracks()[0]),
                            c && t >= 15019 && "video" === e.kind && !e.sendEncodingParameters[0].rtx && (e.sendEncodingParameters[0].rtx = {
                                ssrc: e.sendEncodingParameters[0].ssrc + 1
                            });
                        var _ = o(e.localCapabilities, e.remoteCapabilities);
                        !_.codecs.filter((function(e) {
                            return "rtx" === e.name.toLowerCase()
                        }
                        )).length && e.sendEncodingParameters[0].rtx && delete e.sendEncodingParameters[0].rtx,
                        a += i(e, _, "answer", e.stream, n._dtlsRole),
                        e.rtcpParameters && e.rtcpParameters.reducedSize && (a += "a=rtcp-rsize\r\n")
                    }
                }
                ));
                var _ = new e.RTCSessionDescription({
                    type: "answer",
                    sdp: a
                });
                return Promise.resolve(_)
            }
            ,
            l.prototype.addIceCandidate = function(e) {
                var t, n = this;
                return e && void 0 === e.sdpMLineIndex && !e.sdpMid ? Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")) : new Promise((function(i, o) {
                    if (!n._remoteDescription)
                        return o(c("InvalidStateError", "Can not add ICE candidate without a remote description"));
                    if (e && "" !== e.candidate) {
                        var a = e.sdpMLineIndex;
                        if (e.sdpMid)
                            for (var _ = 0; _ < n.transceivers.length; _++)
                                if (n.transceivers[_].mid === e.sdpMid) {
                                    a = _;
                                    break
                                }
                        var l = n.transceivers[a];
                        if (!l)
                            return o(c("OperationError", "Can not add ICE candidate"));
                        if (l.rejected)
                            return i();
                        var u = Object.keys(e.candidate).length > 0 ? r.parseCandidate(e.candidate) : {};
                        if ("tcp" === u.protocol && (0 === u.port || 9 === u.port))
                            return i();
                        if (u.component && 1 !== u.component)
                            return i();
                        if ((0 === a || a > 0 && l.iceTransport !== n.transceivers[0].iceTransport) && !s(l.iceTransport, u))
                            return o(c("OperationError", "Can not add ICE candidate"));
                        var d = e.candidate.trim();
                        0 === d.indexOf("a=") && (d = d.substr(2)),
                        (t = r.getMediaSections(n._remoteDescription.sdp))[a] += "a=" + (u.type ? d : "end-of-candidates") + "\r\n",
                        n._remoteDescription.sdp = r.getDescription(n._remoteDescription.sdp) + t.join("")
                    } else
                        for (var p = 0; p < n.transceivers.length && (n.transceivers[p].rejected || (n.transceivers[p].iceTransport.addRemoteCandidate({}),
                        (t = r.getMediaSections(n._remoteDescription.sdp))[p] += "a=end-of-candidates\r\n",
                        n._remoteDescription.sdp = r.getDescription(n._remoteDescription.sdp) + t.join(""),
                        !n.usingBundle)); p++)
                            ;
                    i()
                }
                ))
            }
            ,
            l.prototype.getStats = function(t) {
                if (t && t instanceof e.MediaStreamTrack) {
                    var n = null;
                    if (this.transceivers.forEach((function(e) {
                        e.rtpSender && e.rtpSender.track === t ? n = e.rtpSender : e.rtpReceiver && e.rtpReceiver.track === t && (n = e.rtpReceiver)
                    }
                    )),
                    !n)
                        throw c("InvalidAccessError", "Invalid selector.");
                    return n.getStats()
                }
                var r = [];
                return this.transceivers.forEach((function(e) {
                    ["rtpSender", "rtpReceiver", "iceGatherer", "iceTransport", "dtlsTransport"].forEach((function(t) {
                        e[t] && r.push(e[t].getStats())
                    }
                    ))
                }
                )),
                Promise.all(r).then((function(e) {
                    var t = new Map;
                    return e.forEach((function(e) {
                        e.forEach((function(e) {
                            t.set(e.id, e)
                        }
                        ))
                    }
                    )),
                    t
                }
                ))
            }
            ;
            ["RTCRtpSender", "RTCRtpReceiver", "RTCIceGatherer", "RTCIceTransport", "RTCDtlsTransport"].forEach((function(t) {
                var n = e[t];
                if (n && n.prototype && n.prototype.getStats) {
                    var r = n.prototype.getStats;
                    n.prototype.getStats = function() {
                        return r.apply(this).then((function(e) {
                            var t = new Map;
                            return Object.keys(e).forEach((function(n) {
                                var r;
                                e[n].type = {
                                    inboundrtp: "inbound-rtp",
                                    outboundrtp: "outbound-rtp",
                                    candidatepair: "candidate-pair",
                                    localcandidate: "local-candidate",
                                    remotecandidate: "remote-candidate"
                                }[(r = e[n]).type] || r.type,
                                t.set(n, e[n])
                            }
                            )),
                            t
                        }
                        ))
                    }
                }
            }
            ));
            var u = ["createOffer", "createAnswer"];
            return u.forEach((function(e) {
                var t = l.prototype[e];
                l.prototype[e] = function() {
                    var e = arguments;
                    return "function" == typeof e[0] || "function" == typeof e[1] ? t.apply(this, [arguments[2]]).then((function(t) {
                        "function" == typeof e[0] && e[0].apply(null, [t])
                    }
                    ), (function(t) {
                        "function" == typeof e[1] && e[1].apply(null, [t])
                    }
                    )) : t.apply(this, arguments)
                }
            }
            )),
            (u = ["setLocalDescription", "setRemoteDescription", "addIceCandidate"]).forEach((function(e) {
                var t = l.prototype[e];
                l.prototype[e] = function() {
                    var e = arguments;
                    return "function" == typeof e[1] || "function" == typeof e[2] ? t.apply(this, arguments).then((function() {
                        "function" == typeof e[1] && e[1].apply(null)
                    }
                    ), (function(t) {
                        "function" == typeof e[2] && e[2].apply(null, [t])
                    }
                    )) : t.apply(this, arguments)
                }
            }
            )),
            ["getStats"].forEach((function(e) {
                var t = l.prototype[e];
                l.prototype[e] = function() {
                    var e = arguments;
                    return "function" == typeof e[1] ? t.apply(this, arguments).then((function() {
                        "function" == typeof e[1] && e[1].apply(null)
                    }
                    )) : t.apply(this, arguments)
                }
            }
            )),
            l
        }
    }
    ,
    857539: e=>{
        "use strict";
        var t = {
            generateIdentifier: function() {
                return Math.random().toString(36).substr(2, 10)
            }
        };
        t.localCName = t.generateIdentifier(),
        t.splitLines = function(e) {
            return e.trim().split("\n").map((function(e) {
                return e.trim()
            }
            ))
        }
        ,
        t.splitSections = function(e) {
            return e.split("\nm=").map((function(e, t) {
                return (t > 0 ? "m=" + e : e).trim() + "\r\n"
            }
            ))
        }
        ,
        t.getDescription = function(e) {
            var n = t.splitSections(e);
            return n && n[0]
        }
        ,
        t.getMediaSections = function(e) {
            var n = t.splitSections(e);
            return n.shift(),
            n
        }
        ,
        t.matchPrefix = function(e, n) {
            return t.splitLines(e).filter((function(e) {
                return 0 === e.indexOf(n)
            }
            ))
        }
        ,
        t.parseCandidate = function(e) {
            for (var t, n = {
                foundation: (t = 0 === e.indexOf("a=candidate:") ? e.substring(12).split(" ") : e.substring(10).split(" "))[0],
                component: parseInt(t[1], 10),
                protocol: t[2].toLowerCase(),
                priority: parseInt(t[3], 10),
                ip: t[4],
                address: t[4],
                port: parseInt(t[5], 10),
                type: t[7]
            }, r = 8; r < t.length; r += 2)
                switch (t[r]) {
                case "raddr":
                    n.relatedAddress = t[r + 1];
                    break;
                case "rport":
                    n.relatedPort = parseInt(t[r + 1], 10);
                    break;
                case "tcptype":
                    n.tcpType = t[r + 1];
                    break;
                case "ufrag":
                    n.ufrag = t[r + 1],
                    n.usernameFragment = t[r + 1];
                    break;
                default:
                    n[t[r]] = t[r + 1]
                }
            return n
        }
        ,
        t.writeCandidate = function(e) {
            var t = [];
            t.push(e.foundation),
            t.push(e.component),
            t.push(e.protocol.toUpperCase()),
            t.push(e.priority),
            t.push(e.address || e.ip),
            t.push(e.port);
            var n = e.type;
            return t.push("typ"),
            t.push(n),
            "host" !== n && e.relatedAddress && e.relatedPort && (t.push("raddr"),
            t.push(e.relatedAddress),
            t.push("rport"),
            t.push(e.relatedPort)),
            e.tcpType && "tcp" === e.protocol.toLowerCase() && (t.push("tcptype"),
            t.push(e.tcpType)),
            (e.usernameFragment || e.ufrag) && (t.push("ufrag"),
            t.push(e.usernameFragment || e.ufrag)),
            "candidate:" + t.join(" ")
        }
        ,
        t.parseIceOptions = function(e) {
            return e.substr(14).split(" ")
        }
        ,
        t.parseRtpMap = function(e) {
            var t = e.substr(9).split(" ")
              , n = {
                payloadType: parseInt(t.shift(), 10)
            };
            return t = t[0].split("/"),
            n.name = t[0],
            n.clockRate = parseInt(t[1], 10),
            n.channels = 3 === t.length ? parseInt(t[2], 10) : 1,
            n.numChannels = n.channels,
            n
        }
        ,
        t.writeRtpMap = function(e) {
            var t = e.payloadType;
            void 0 !== e.preferredPayloadType && (t = e.preferredPayloadType);
            var n = e.channels || e.numChannels || 1;
            return "a=rtpmap:" + t + " " + e.name + "/" + e.clockRate + (1 !== n ? "/" + n : "") + "\r\n"
        }
        ,
        t.parseExtmap = function(e) {
            var t = e.substr(9).split(" ");
            return {
                id: parseInt(t[0], 10),
                direction: t[0].indexOf("/") > 0 ? t[0].split("/")[1] : "sendrecv",
                uri: t[1]
            }
        }
        ,
        t.writeExtmap = function(e) {
            return "a=extmap:" + (e.id || e.preferredId) + (e.direction && "sendrecv" !== e.direction ? "/" + e.direction : "") + " " + e.uri + "\r\n"
        }
        ,
        t.parseFmtp = function(e) {
            for (var t, n = {}, r = e.substr(e.indexOf(" ") + 1).split(";"), i = 0; i < r.length; i++)
                n[(t = r[i].trim().split("="))[0].trim()] = t[1];
            return n
        }
        ,
        t.writeFmtp = function(e) {
            var t = ""
              , n = e.payloadType;
            if (void 0 !== e.preferredPayloadType && (n = e.preferredPayloadType),
            e.parameters && Object.keys(e.parameters).length) {
                var r = [];
                Object.keys(e.parameters).forEach((function(t) {
                    e.parameters[t] ? r.push(t + "=" + e.parameters[t]) : r.push(t)
                }
                )),
                t += "a=fmtp:" + n + " " + r.join(";") + "\r\n"
            }
            return t
        }
        ,
        t.parseRtcpFb = function(e) {
            var t = e.substr(e.indexOf(" ") + 1).split(" ");
            return {
                type: t.shift(),
                parameter: t.join(" ")
            }
        }
        ,
        t.writeRtcpFb = function(e) {
            var t = ""
              , n = e.payloadType;
            return void 0 !== e.preferredPayloadType && (n = e.preferredPayloadType),
            e.rtcpFeedback && e.rtcpFeedback.length && e.rtcpFeedback.forEach((function(e) {
                t += "a=rtcp-fb:" + n + " " + e.type + (e.parameter && e.parameter.length ? " " + e.parameter : "") + "\r\n"
            }
            )),
            t
        }
        ,
        t.parseSsrcMedia = function(e) {
            var t = e.indexOf(" ")
              , n = {
                ssrc: parseInt(e.substr(7, t - 7), 10)
            }
              , r = e.indexOf(":", t);
            return r > -1 ? (n.attribute = e.substr(t + 1, r - t - 1),
            n.value = e.substr(r + 1)) : n.attribute = e.substr(t + 1),
            n
        }
        ,
        t.parseSsrcGroup = function(e) {
            var t = e.substr(13).split(" ");
            return {
                semantics: t.shift(),
                ssrcs: t.map((function(e) {
                    return parseInt(e, 10)
                }
                ))
            }
        }
        ,
        t.getMid = function(e) {
            var n = t.matchPrefix(e, "a=mid:")[0];
            if (n)
                return n.substr(6)
        }
        ,
        t.parseFingerprint = function(e) {
            var t = e.substr(14).split(" ");
            return {
                algorithm: t[0].toLowerCase(),
                value: t[1]
            }
        }
        ,
        t.getDtlsParameters = function(e, n) {
            return {
                role: "auto",
                fingerprints: t.matchPrefix(e + n, "a=fingerprint:").map(t.parseFingerprint)
            }
        }
        ,
        t.writeDtlsParameters = function(e, t) {
            var n = "a=setup:" + t + "\r\n";
            return e.fingerprints.forEach((function(e) {
                n += "a=fingerprint:" + e.algorithm + " " + e.value + "\r\n"
            }
            )),
            n
        }
        ,
        t.parseCryptoLine = function(e) {
            var t = e.substr(9).split(" ");
            return {
                tag: parseInt(t[0], 10),
                cryptoSuite: t[1],
                keyParams: t[2],
                sessionParams: t.slice(3)
            }
        }
        ,
        t.writeCryptoLine = function(e) {
            return "a=crypto:" + e.tag + " " + e.cryptoSuite + " " + ("object" == typeof e.keyParams ? t.writeCryptoKeyParams(e.keyParams) : e.keyParams) + (e.sessionParams ? " " + e.sessionParams.join(" ") : "") + "\r\n"
        }
        ,
        t.parseCryptoKeyParams = function(e) {
            if (0 !== e.indexOf("inline:"))
                return null;
            var t = e.substr(7).split("|");
            return {
                keyMethod: "inline",
                keySalt: t[0],
                lifeTime: t[1],
                mkiValue: t[2] ? t[2].split(":")[0] : void 0,
                mkiLength: t[2] ? t[2].split(":")[1] : void 0
            }
        }
        ,
        t.writeCryptoKeyParams = function(e) {
            return e.keyMethod + ":" + e.keySalt + (e.lifeTime ? "|" + e.lifeTime : "") + (e.mkiValue && e.mkiLength ? "|" + e.mkiValue + ":" + e.mkiLength : "")
        }
        ,
        t.getCryptoParameters = function(e, n) {
            return t.matchPrefix(e + n, "a=crypto:").map(t.parseCryptoLine)
        }
        ,
        t.getIceParameters = function(e, n) {
            var r = t.matchPrefix(e + n, "a=ice-ufrag:")[0]
              , i = t.matchPrefix(e + n, "a=ice-pwd:")[0];
            return r && i ? {
                usernameFragment: r.substr(12),
                password: i.substr(10)
            } : null
        }
        ,
        t.writeIceParameters = function(e) {
            return "a=ice-ufrag:" + e.usernameFragment + "\r\na=ice-pwd:" + e.password + "\r\n"
        }
        ,
        t.parseRtpParameters = function(e) {
            for (var n = {
                codecs: [],
                headerExtensions: [],
                fecMechanisms: [],
                rtcp: []
            }, r = t.splitLines(e)[0].split(" "), i = 3; i < r.length; i++) {
                var o = r[i]
                  , a = t.matchPrefix(e, "a=rtpmap:" + o + " ")[0];
                if (a) {
                    var s = t.parseRtpMap(a)
                      , c = t.matchPrefix(e, "a=fmtp:" + o + " ");
                    switch (s.parameters = c.length ? t.parseFmtp(c[0]) : {},
                    s.rtcpFeedback = t.matchPrefix(e, "a=rtcp-fb:" + o + " ").map(t.parseRtcpFb),
                    n.codecs.push(s),
                    s.name.toUpperCase()) {
                    case "RED":
                    case "ULPFEC":
                        n.fecMechanisms.push(s.name.toUpperCase())
                    }
                }
            }
            return t.matchPrefix(e, "a=extmap:").forEach((function(e) {
                n.headerExtensions.push(t.parseExtmap(e))
            }
            )),
            n
        }
        ,
        t.writeRtpDescription = function(e, n) {
            var r = "";
            r += "m=" + e + " ",
            r += n.codecs.length > 0 ? "9" : "0",
            r += " UDP/TLS/RTP/SAVPF ",
            r += n.codecs.map((function(e) {
                return void 0 !== e.preferredPayloadType ? e.preferredPayloadType : e.payloadType
            }
            )).join(" ") + "\r\n",
            r += "c=IN IP4 0.0.0.0\r\n",
            r += "a=rtcp:9 IN IP4 0.0.0.0\r\n",
            n.codecs.forEach((function(e) {
                r += t.writeRtpMap(e),
                r += t.writeFmtp(e),
                r += t.writeRtcpFb(e)
            }
            ));
            var i = 0;
            return n.codecs.forEach((function(e) {
                e.maxptime > i && (i = e.maxptime)
            }
            )),
            i > 0 && (r += "a=maxptime:" + i + "\r\n"),
            r += "a=rtcp-mux\r\n",
            n.headerExtensions && n.headerExtensions.forEach((function(e) {
                r += t.writeExtmap(e)
            }
            )),
            r
        }
        ,
        t.parseRtpEncodingParameters = function(e) {
            var n, r = [], i = t.parseRtpParameters(e), o = -1 !== i.fecMechanisms.indexOf("RED"), a = -1 !== i.fecMechanisms.indexOf("ULPFEC"), s = t.matchPrefix(e, "a=ssrc:").map((function(e) {
                return t.parseSsrcMedia(e)
            }
            )).filter((function(e) {
                return "cname" === e.attribute
            }
            )), c = s.length > 0 && s[0].ssrc, _ = t.matchPrefix(e, "a=ssrc-group:FID").map((function(e) {
                return e.substr(17).split(" ").map((function(e) {
                    return parseInt(e, 10)
                }
                ))
            }
            ));
            _.length > 0 && _[0].length > 1 && _[0][0] === c && (n = _[0][1]),
            i.codecs.forEach((function(e) {
                if ("RTX" === e.name.toUpperCase() && e.parameters.apt) {
                    var t = {
                        ssrc: c,
                        codecPayloadType: parseInt(e.parameters.apt, 10)
                    };
                    c && n && (t.rtx = {
                        ssrc: n
                    }),
                    r.push(t),
                    o && ((t = JSON.parse(JSON.stringify(t))).fec = {
                        ssrc: c,
                        mechanism: a ? "red+ulpfec" : "red"
                    },
                    r.push(t))
                }
            }
            )),
            0 === r.length && c && r.push({
                ssrc: c
            });
            var l = t.matchPrefix(e, "b=");
            return l.length && (l = 0 === l[0].indexOf("b=TIAS:") ? parseInt(l[0].substr(7), 10) : 0 === l[0].indexOf("b=AS:") ? 1e3 * parseInt(l[0].substr(5), 10) * .95 - 16e3 : void 0,
            r.forEach((function(e) {
                e.maxBitrate = l
            }
            ))),
            r
        }
        ,
        t.parseRtcpParameters = function(e) {
            var n = {}
              , r = t.matchPrefix(e, "a=ssrc:").map((function(e) {
                return t.parseSsrcMedia(e)
            }
            )).filter((function(e) {
                return "cname" === e.attribute
            }
            ))[0];
            r && (n.cname = r.value,
            n.ssrc = r.ssrc);
            var i = t.matchPrefix(e, "a=rtcp-rsize");
            n.reducedSize = i.length > 0,
            n.compound = 0 === i.length;
            var o = t.matchPrefix(e, "a=rtcp-mux");
            return n.mux = o.length > 0,
            n
        }
        ,
        t.parseMsid = function(e) {
            var n, r = t.matchPrefix(e, "a=msid:");
            if (1 === r.length)
                return {
                    stream: (n = r[0].substr(7).split(" "))[0],
                    track: n[1]
                };
            var i = t.matchPrefix(e, "a=ssrc:").map((function(e) {
                return t.parseSsrcMedia(e)
            }
            )).filter((function(e) {
                return "msid" === e.attribute
            }
            ));
            return i.length > 0 ? {
                stream: (n = i[0].value.split(" "))[0],
                track: n[1]
            } : void 0
        }
        ,
        t.parseSctpDescription = function(e) {
            var n, r = t.parseMLine(e), i = t.matchPrefix(e, "a=max-message-size:");
            i.length > 0 && (n = parseInt(i[0].substr(19), 10)),
            isNaN(n) && (n = 65536);
            var o = t.matchPrefix(e, "a=sctp-port:");
            if (o.length > 0)
                return {
                    port: parseInt(o[0].substr(12), 10),
                    protocol: r.fmt,
                    maxMessageSize: n
                };
            if (t.matchPrefix(e, "a=sctpmap:").length > 0) {
                var a = t.matchPrefix(e, "a=sctpmap:")[0].substr(10).split(" ");
                return {
                    port: parseInt(a[0], 10),
                    protocol: a[1],
                    maxMessageSize: n
                }
            }
        }
        ,
        t.writeSctpDescription = function(e, t) {
            var n = [];
            return n = "DTLS/SCTP" !== e.protocol ? ["m=" + e.kind + " 9 " + e.protocol + " " + t.protocol + "\r\n", "c=IN IP4 0.0.0.0\r\n", "a=sctp-port:" + t.port + "\r\n"] : ["m=" + e.kind + " 9 " + e.protocol + " " + t.port + "\r\n", "c=IN IP4 0.0.0.0\r\n", "a=sctpmap:" + t.port + " " + t.protocol + " 65535\r\n"],
            void 0 !== t.maxMessageSize && n.push("a=max-message-size:" + t.maxMessageSize + "\r\n"),
            n.join("")
        }
        ,
        t.generateSessionId = function() {
            return Math.random().toString().substr(2, 21)
        }
        ,
        t.writeSessionBoilerplate = function(e, n, r) {
            var i = void 0 !== n ? n : 2;
            return "v=0\r\no=" + (r || "thisisadapterortc") + " " + (e || t.generateSessionId()) + " " + i + " IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"
        }
        ,
        t.writeMediaSection = function(e, n, r, i) {
            var o = t.writeRtpDescription(e.kind, n);
            if (o += t.writeIceParameters(e.iceGatherer.getLocalParameters()),
            o += t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(), "offer" === r ? "actpass" : "active"),
            o += "a=mid:" + e.mid + "\r\n",
            e.direction ? o += "a=" + e.direction + "\r\n" : e.rtpSender && e.rtpReceiver ? o += "a=sendrecv\r\n" : e.rtpSender ? o += "a=sendonly\r\n" : e.rtpReceiver ? o += "a=recvonly\r\n" : o += "a=inactive\r\n",
            e.rtpSender) {
                var a = "msid:" + i.id + " " + e.rtpSender.track.id + "\r\n";
                o += "a=" + a,
                o += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " " + a,
                e.sendEncodingParameters[0].rtx && (o += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " " + a,
                o += "a=ssrc-group:FID " + e.sendEncodingParameters[0].ssrc + " " + e.sendEncodingParameters[0].rtx.ssrc + "\r\n")
            }
            return o += "a=ssrc:" + e.sendEncodingParameters[0].ssrc + " cname:" + t.localCName + "\r\n",
            e.rtpSender && e.sendEncodingParameters[0].rtx && (o += "a=ssrc:" + e.sendEncodingParameters[0].rtx.ssrc + " cname:" + t.localCName + "\r\n"),
            o
        }
        ,
        t.getDirection = function(e, n) {
            for (var r = t.splitLines(e), i = 0; i < r.length; i++)
                switch (r[i]) {
                case "a=sendrecv":
                case "a=sendonly":
                case "a=recvonly":
                case "a=inactive":
                    return r[i].substr(2)
                }
            return n ? t.getDirection(n) : "sendrecv"
        }
        ,
        t.getKind = function(e) {
            return t.splitLines(e)[0].split(" ")[0].substr(2)
        }
        ,
        t.isRejected = function(e) {
            return "0" === e.split(" ", 2)[1]
        }
        ,
        t.parseMLine = function(e) {
            var n = t.splitLines(e)[0].substr(2).split(" ");
            return {
                kind: n[0],
                port: parseInt(n[1], 10),
                protocol: n[2],
                fmt: n.slice(3).join(" ")
            }
        }
        ,
        t.parseOLine = function(e) {
            var n = t.matchPrefix(e, "o=")[0].substr(2).split(" ");
            return {
                username: n[0],
                sessionId: n[1],
                sessionVersion: parseInt(n[2], 10),
                netType: n[3],
                addressType: n[4],
                address: n[5]
            }
        }
        ,
        t.isValidSDP = function(e) {
            if ("string" != typeof e || 0 === e.length)
                return !1;
            for (var n = t.splitLines(e), r = 0; r < n.length; r++)
                if (n[r].length < 2 || "=" !== n[r].charAt(1))
                    return !1;
            return !0
        }
        ,
        e.exports = t
    }
    ,
    90255: (e,t,n)=>{
        "use strict";
        var r = n(220773)
          , i = n(725278)
          , o = function() {
            function e(e) {
                this.bytes = e
            }
            return e.prototype.write = function(e, t) {
                return e.set(this.bytes, t),
                t + this.bytes.length
            }
            ,
            e.prototype.countSize = function() {
                return this.bytes.length
            }
            ,
            e
        }();
        t.Value = o;
        var a = function() {
            function e(e, n, r) {
                this.id = e,
                this.children = n;
                var o = this.children.reduce((function(e, t) {
                    return e + t.countSize()
                }
                ), 0);
                this.sizeMetaData = r ? t.UNKNOWN_SIZE : t.vintEncode(i.numberToByteArray(o, t.getEBMLByteLength(o))),
                this.size = this.id.length + this.sizeMetaData.length + o
            }
            return e.prototype.write = function(e, t) {
                return e.set(this.id, t),
                e.set(this.sizeMetaData, t + this.id.length),
                this.children.reduce((function(t, n) {
                    return n.write(e, t)
                }
                ), t + this.id.length + this.sizeMetaData.length)
            }
            ,
            e.prototype.countSize = function() {
                return this.size
            }
            ,
            e
        }();
        t.Element = a,
        t.bytes = r((function(e) {
            return new o(e)
        }
        )),
        t.number = r((function(e) {
            return t.bytes(i.numberToByteArray(e))
        }
        )),
        t.vintEncodedNumber = r((function(e) {
            return t.bytes(t.vintEncode(i.numberToByteArray(e, t.getEBMLByteLength(e))))
        }
        )),
        t.string = r((function(e) {
            return t.bytes(i.stringToByteArray(e))
        }
        )),
        t.element = function(e, t) {
            return new a(e,Array.isArray(t) ? t : [t],!1)
        }
        ,
        t.unknownSizeElement = function(e, t) {
            return new a(e,Array.isArray(t) ? t : [t],!0)
        }
        ,
        t.build = function(e) {
            var t = new Uint8Array(e.countSize());
            return e.write(t, 0),
            t
        }
        ,
        t.getEBMLByteLength = function(e) {
            if (e < 127)
                return 1;
            if (e < 16383)
                return 2;
            if (e < 2097151)
                return 3;
            if (e < 268435455)
                return 4;
            if (e < 34359738367)
                return 5;
            if (e < 4398046511103)
                return 6;
            if (e < 562949953421311)
                return 7;
            if (e < 9007199254740992)
                return 8;
            throw e < 72057594037927940 ? new Error("EBMLgetEBMLByteLength: number exceeds Number.MAX_SAFE_INTEGER") : new Error("EBMLgetEBMLByteLength: data size must be less than or equal to " + (Math.pow(2, 56) - 2))
        }
        ,
        t.UNKNOWN_SIZE = new Uint8Array([1, 255, 255, 255, 255, 255, 255, 255]),
        t.vintEncode = function(e) {
            return e[0] = t.getSizeMask(e.length) | e[0],
            e
        }
        ,
        t.getSizeMask = function(e) {
            return 128 >> e - 1
        }
    }
    ,
    794943: (e,t)=>{
        "use strict";
        t.ID = {
            EBML: Uint8Array.of(26, 69, 223, 163),
            EBMLVersion: Uint8Array.of(66, 134),
            EBMLReadVersion: Uint8Array.of(66, 247),
            EBMLMaxIDLength: Uint8Array.of(66, 242),
            EBMLMaxSizeLength: Uint8Array.of(66, 243),
            DocType: Uint8Array.of(66, 130),
            DocTypeVersion: Uint8Array.of(66, 135),
            DocTypeReadVersion: Uint8Array.of(66, 133),
            Void: Uint8Array.of(236),
            CRC32: Uint8Array.of(191),
            Segment: Uint8Array.of(24, 83, 128, 103),
            SeekHead: Uint8Array.of(17, 77, 155, 116),
            Seek: Uint8Array.of(77, 187),
            SeekID: Uint8Array.of(83, 171),
            SeekPosition: Uint8Array.of(83, 172),
            Info: Uint8Array.of(21, 73, 169, 102),
            SegmentUID: Uint8Array.of(115, 164),
            SegmentFilename: Uint8Array.of(115, 132),
            PrevUID: Uint8Array.of(60, 185, 35),
            PrevFilename: Uint8Array.of(60, 131, 171),
            NextUID: Uint8Array.of(62, 185, 35),
            NextFilename: Uint8Array.of(62, 131, 187),
            SegmentFamily: Uint8Array.of(68, 68),
            ChapterTranslate: Uint8Array.of(105, 36),
            ChapterTranslateEditionUID: Uint8Array.of(105, 252),
            ChapterTranslateCodec: Uint8Array.of(105, 191),
            ChapterTranslateID: Uint8Array.of(105, 165),
            TimecodeScale: Uint8Array.of(42, 215, 177),
            Duration: Uint8Array.of(68, 137),
            DateUTC: Uint8Array.of(68, 97),
            Title: Uint8Array.of(123, 169),
            MuxingApp: Uint8Array.of(77, 128),
            WritingApp: Uint8Array.of(87, 65),
            Cluster: Uint8Array.of(31, 67, 182, 117),
            Timecode: Uint8Array.of(231),
            SilentTracks: Uint8Array.of(88, 84),
            SilentTrackNumber: Uint8Array.of(88, 215),
            Position: Uint8Array.of(167),
            PrevSize: Uint8Array.of(171),
            SimpleBlock: Uint8Array.of(163),
            BlockGroup: Uint8Array.of(160),
            Block: Uint8Array.of(161),
            BlockAdditions: Uint8Array.of(117, 161),
            BlockMore: Uint8Array.of(166),
            BlockAddID: Uint8Array.of(238),
            BlockAdditional: Uint8Array.of(165),
            BlockDuration: Uint8Array.of(155),
            ReferencePriority: Uint8Array.of(250),
            ReferenceBlock: Uint8Array.of(251),
            CodecState: Uint8Array.of(164),
            DiscardPadding: Uint8Array.of(117, 162),
            Slices: Uint8Array.of(142),
            TimeSlice: Uint8Array.of(232),
            LaceNumber: Uint8Array.of(204),
            Tracks: Uint8Array.of(22, 84, 174, 107),
            TrackEntry: Uint8Array.of(174),
            TrackNumber: Uint8Array.of(215),
            TrackUID: Uint8Array.of(115, 197),
            TrackType: Uint8Array.of(131),
            FlagEnabled: Uint8Array.of(185),
            FlagDefault: Uint8Array.of(136),
            FlagForced: Uint8Array.of(85, 170),
            FlagLacing: Uint8Array.of(156),
            MinCache: Uint8Array.of(109, 231),
            MaxCache: Uint8Array.of(109, 248),
            DefaultDuration: Uint8Array.of(35, 227, 131),
            DefaultDecodedFieldDuration: Uint8Array.of(35, 78, 122),
            MaxBlockAdditionID: Uint8Array.of(85, 238),
            Name: Uint8Array.of(83, 110),
            Language: Uint8Array.of(34, 181, 156),
            CodecID: Uint8Array.of(134),
            CodecPrivate: Uint8Array.of(99, 162),
            CodecName: Uint8Array.of(37, 134, 136),
            AttachmentLink: Uint8Array.of(116, 70),
            CodecDecodeAll: Uint8Array.of(170),
            TrackOverlay: Uint8Array.of(111, 171),
            CodecDelay: Uint8Array.of(86, 170),
            SeekPreRoll: Uint8Array.of(86, 187),
            TrackTranslate: Uint8Array.of(102, 36),
            TrackTranslateEditionUID: Uint8Array.of(102, 252),
            TrackTranslateCodec: Uint8Array.of(102, 191),
            TrackTranslateTrackID: Uint8Array.of(102, 165),
            Video: Uint8Array.of(224),
            FlagInterlaced: Uint8Array.of(154),
            FieldOrder: Uint8Array.of(157),
            StereoMode: Uint8Array.of(83, 184),
            AlphaMode: Uint8Array.of(83, 192),
            PixelWidth: Uint8Array.of(176),
            PixelHeight: Uint8Array.of(186),
            PixelCropBottom: Uint8Array.of(84, 170),
            PixelCropTop: Uint8Array.of(84, 187),
            PixelCropLeft: Uint8Array.of(84, 204),
            PixelCropRight: Uint8Array.of(84, 221),
            DisplayWidth: Uint8Array.of(84, 176),
            DisplayHeight: Uint8Array.of(84, 186),
            DisplayUnit: Uint8Array.of(84, 178),
            AspectRatioType: Uint8Array.of(84, 179),
            ColourSpace: Uint8Array.of(46, 181, 36),
            Colour: Uint8Array.of(85, 176),
            MatrixCoefficients: Uint8Array.of(85, 177),
            BitsPerChannel: Uint8Array.of(85, 178),
            ChromaSubsamplingHorz: Uint8Array.of(85, 179),
            ChromaSubsamplingVert: Uint8Array.of(85, 180),
            CbSubsamplingHorz: Uint8Array.of(85, 181),
            CbSubsamplingVert: Uint8Array.of(85, 182),
            ChromaSitingHorz: Uint8Array.of(85, 183),
            ChromaSitingVert: Uint8Array.of(85, 184),
            Range: Uint8Array.of(85, 185),
            TransferCharacteristics: Uint8Array.of(85, 186),
            Primaries: Uint8Array.of(85, 187),
            MaxCLL: Uint8Array.of(85, 188),
            MaxFALL: Uint8Array.of(85, 189),
            MasteringMetadata: Uint8Array.of(85, 208),
            PrimaryRChromaticityX: Uint8Array.of(85, 209),
            PrimaryRChromaticityY: Uint8Array.of(85, 210),
            PrimaryGChromaticityX: Uint8Array.of(85, 211),
            PrimaryGChromaticityY: Uint8Array.of(85, 212),
            PrimaryBChromaticityX: Uint8Array.of(85, 213),
            PrimaryBChromaticityY: Uint8Array.of(85, 214),
            WhitePointChromaticityX: Uint8Array.of(85, 215),
            WhitePointChromaticityY: Uint8Array.of(85, 216),
            LuminanceMax: Uint8Array.of(85, 217),
            LuminanceMin: Uint8Array.of(85, 218),
            Audio: Uint8Array.of(225),
            SamplingFrequency: Uint8Array.of(181),
            OutputSamplingFrequency: Uint8Array.of(120, 181),
            Channels: Uint8Array.of(159),
            BitDepth: Uint8Array.of(98, 100),
            TrackOperation: Uint8Array.of(226),
            TrackCombinePlanes: Uint8Array.of(227),
            TrackPlane: Uint8Array.of(228),
            TrackPlaneUID: Uint8Array.of(229),
            TrackPlaneType: Uint8Array.of(230),
            TrackJoinBlocks: Uint8Array.of(233),
            TrackJoinUID: Uint8Array.of(237),
            ContentEncodings: Uint8Array.of(109, 128),
            ContentEncoding: Uint8Array.of(98, 64),
            ContentEncodingOrder: Uint8Array.of(80, 49),
            ContentEncodingScope: Uint8Array.of(80, 50),
            ContentEncodingType: Uint8Array.of(80, 51),
            ContentCompression: Uint8Array.of(80, 52),
            ContentCompAlgo: Uint8Array.of(66, 84),
            ContentCompSettings: Uint8Array.of(66, 85),
            ContentEncryption: Uint8Array.of(80, 53),
            ContentEncAlgo: Uint8Array.of(71, 225),
            ContentEncKeyID: Uint8Array.of(71, 226),
            ContentSignature: Uint8Array.of(71, 227),
            ContentSigKeyID: Uint8Array.of(71, 228),
            ContentSigAlgo: Uint8Array.of(71, 229),
            ContentSigHashAlgo: Uint8Array.of(71, 230),
            Cues: Uint8Array.of(28, 83, 187, 107),
            CuePoint: Uint8Array.of(187),
            CueTime: Uint8Array.of(179),
            CueTrackPositions: Uint8Array.of(183),
            CueTrack: Uint8Array.of(247),
            CueClusterPosition: Uint8Array.of(241),
            CueRelativePosition: Uint8Array.of(240),
            CueDuration: Uint8Array.of(178),
            CueBlockNumber: Uint8Array.of(83, 120),
            CueCodecState: Uint8Array.of(234),
            CueReference: Uint8Array.of(219),
            CueRefTime: Uint8Array.of(150),
            Attachments: Uint8Array.of(25, 65, 164, 105),
            AttachedFile: Uint8Array.of(97, 167),
            FileDescription: Uint8Array.of(70, 126),
            FileName: Uint8Array.of(70, 110),
            FileMimeType: Uint8Array.of(70, 96),
            FileData: Uint8Array.of(70, 92),
            FileUID: Uint8Array.of(70, 174),
            Chapters: Uint8Array.of(16, 67, 167, 112),
            EditionEntry: Uint8Array.of(69, 185),
            EditionUID: Uint8Array.of(69, 188),
            EditionFlagHidden: Uint8Array.of(69, 189),
            EditionFlagDefault: Uint8Array.of(69, 219),
            EditionFlagOrdered: Uint8Array.of(69, 221),
            ChapterAtom: Uint8Array.of(182),
            ChapterUID: Uint8Array.of(115, 196),
            ChapterStringUID: Uint8Array.of(86, 84),
            ChapterTimeStart: Uint8Array.of(145),
            ChapterTimeEnd: Uint8Array.of(146),
            ChapterFlagHidden: Uint8Array.of(152),
            ChapterFlagEnabled: Uint8Array.of(69, 152),
            ChapterSegmentUID: Uint8Array.of(110, 103),
            ChapterSegmentEditionUID: Uint8Array.of(110, 188),
            ChapterPhysicalEquiv: Uint8Array.of(99, 195),
            ChapterTrack: Uint8Array.of(143),
            ChapterTrackNumber: Uint8Array.of(137),
            ChapterDisplay: Uint8Array.of(128),
            ChapString: Uint8Array.of(133),
            ChapLanguage: Uint8Array.of(67, 124),
            ChapCountry: Uint8Array.of(67, 126),
            ChapProcess: Uint8Array.of(105, 68),
            ChapProcessCodecID: Uint8Array.of(105, 85),
            ChapProcessPrivate: Uint8Array.of(69, 13),
            ChapProcessCommand: Uint8Array.of(105, 17),
            ChapProcessTime: Uint8Array.of(105, 34),
            ChapProcessData: Uint8Array.of(105, 51),
            Tags: Uint8Array.of(18, 84, 195, 103),
            Tag: Uint8Array.of(115, 115),
            Targets: Uint8Array.of(99, 192),
            TargetTypeValue: Uint8Array.of(104, 202),
            TargetType: Uint8Array.of(99, 202),
            TagTrackUID: Uint8Array.of(99, 197),
            TagEditionUID: Uint8Array.of(99, 201),
            TagChapterUID: Uint8Array.of(99, 196),
            TagAttachmentUID: Uint8Array.of(99, 198),
            SimpleTag: Uint8Array.of(103, 200),
            TagName: Uint8Array.of(69, 163),
            TagLanguage: Uint8Array.of(68, 122),
            TagDefault: Uint8Array.of(68, 132),
            TagString: Uint8Array.of(68, 135),
            TagBinary: Uint8Array.of(68, 133)
        }
    }
    ,
    36090: (e,t,n)=>{
        "use strict";
        function r(e) {
            for (var n in e)
                t.hasOwnProperty(n) || (t[n] = e[n])
        }
        r(n(90255)),
        r(n(794943)),
        r(n(725278))
    }
    ,
    725278: (e,t,n)=>{
        "use strict";
        var r = n(220773);
        function i(e) {
            if (e < 0)
                throw new Error("EBML.typedArrayUtils.getNumberByteLength: negative number not implemented");
            if (e < 256)
                return 1;
            if (e < 65536)
                return 2;
            if (e < 16777216)
                return 3;
            if (e < 4294967296)
                return 4;
            if (e < 1099511627776)
                return 5;
            if (e < 281474976710656)
                return 6;
            if (e < 9007199254740992)
                return 7;
            throw new Error("EBML.typedArrayUtils.getNumberByteLength: number exceeds Number.MAX_SAFE_INTEGER")
        }
        t.numberToByteArray = function(e, t) {
            var n;
            if (void 0 === t && (t = i(e)),
            1 === t)
                (n = new DataView(new ArrayBuffer(1))).setUint8(0, e);
            else if (2 === t)
                (n = new DataView(new ArrayBuffer(2))).setUint16(0, e);
            else if (3 === t)
                (n = new DataView(new ArrayBuffer(3))).setUint8(0, e >> 16),
                n.setUint16(1, 65535 & e);
            else if (4 === t)
                (n = new DataView(new ArrayBuffer(4))).setUint32(0, e);
            else if (e < 4294967295)
                (n = new DataView(new ArrayBuffer(5))).setUint32(1, e);
            else if (5 === t)
                (n = new DataView(new ArrayBuffer(5))).setUint8(0, e / 4294967296 | 0),
                n.setUint32(1, e % 4294967296);
            else if (6 === t)
                (n = new DataView(new ArrayBuffer(6))).setUint16(0, e / 4294967296 | 0),
                n.setUint32(2, e % 4294967296);
            else if (7 === t)
                (n = new DataView(new ArrayBuffer(7))).setUint8(0, e / 281474976710656 | 0),
                n.setUint16(1, e / 4294967296 & 65535),
                n.setUint32(3, e % 4294967296);
            else {
                if (8 !== t)
                    throw new Error("EBML.typedArrayUtils.numberToByteArray: byte length must be less than or equal to 8");
                (n = new DataView(new ArrayBuffer(8))).setUint32(0, e / 4294967296 | 0),
                n.setUint32(4, e % 4294967296)
            }
            return new Uint8Array(n.buffer)
        }
        ,
        t.stringToByteArray = r((function(e) {
            return Uint8Array.from(Array.from(e).map((function(e) {
                return e.codePointAt(0)
            }
            )))
        }
        )),
        t.getNumberByteLength = i,
        t.int16Bit = r((function(e) {
            var t = new ArrayBuffer(2);
            return new DataView(t).setInt16(0, e),
            new Uint8Array(t)
        }
        )),
        t.float32bit = r((function(e) {
            var t = new ArrayBuffer(4);
            return new DataView(t).setFloat32(0, e),
            new Uint8Array(t)
        }
        )),
        t.dumpBytes = function(e) {
            return Array.from(new Uint8Array(e)).map((function(e) {
                return "0x" + e.toString(16)
            }
            )).join(", ")
        }
    }
    ,
    111317: function(e) {
        e.exports = function() {
            "use strict";
            class e {
                constructor(e=0, t=0) {
                    this.first = null,
                    this.items = Object.create(null),
                    this.last = null,
                    this.max = e,
                    this.size = 0,
                    this.ttl = t
                }
                has(e) {
                    return e in this.items
                }
                clear() {
                    return this.first = null,
                    this.items = Object.create(null),
                    this.last = null,
                    this.size = 0,
                    this
                }
                delete(e) {
                    if (this.has(e)) {
                        const t = this.items[e];
                        delete this.items[e],
                        this.size--,
                        null !== t.prev && (t.prev.next = t.next),
                        null !== t.next && (t.next.prev = t.prev),
                        this.first === t && (this.first = t.next),
                        this.last === t && (this.last = t.prev)
                    }
                    return this
                }
                evict() {
                    const e = this.first;
                    return delete this.items[e.key],
                    this.first = e.next,
                    this.first.prev = null,
                    this.size--,
                    this
                }
                get(e) {
                    let t;
                    if (this.has(e)) {
                        const n = this.items[e];
                        this.ttl > 0 && n.expiry <= (new Date).getTime() ? this.delete(e) : (t = n.value,
                        this.set(e, t, !0))
                    }
                    return t
                }
                keys() {
                    return Object.keys(this.items)
                }
                set(e, t, n=!1) {
                    let r;
                    if (n || this.has(e)) {
                        if (r = this.items[e],
                        r.value = t,
                        !1 === n && (r.expiry = this.ttl > 0 ? (new Date).getTime() + this.ttl : this.ttl),
                        this.last !== r) {
                            const e = this.last
                              , t = r.next
                              , n = r.prev;
                            this.first === r && (this.first = r.next),
                            r.next = null,
                            r.prev = this.last,
                            e.next = r,
                            null !== n && (n.next = t),
                            null !== t && (t.prev = n)
                        }
                    } else
                        this.max > 0 && this.size === this.max && this.evict(),
                        r = this.items[e] = {
                            expiry: this.ttl > 0 ? (new Date).getTime() + this.ttl : this.ttl,
                            key: e,
                            prev: this.last,
                            next: null,
                            value: t
                        },
                        1 == ++this.size ? this.first = r : this.last.next = r;
                    return this.last = r,
                    this
                }
            }
            return function(t=1e3, n=0) {
                if (isNaN(t) || t < 0)
                    throw new TypeError("Invalid max value");
                if (isNaN(n) || n < 0)
                    throw new TypeError("Invalid ttl value");
                return new e(t,n)
            }
        }()
    },
    196022: (e,t,n)=>{
        "use strict";
        n.d(t, {
            API_VERSION: ()=>s,
            VK_WEB_APP_ID: ()=>c,
            makeAuthAndApiGlobal: ()=>v
        });
        var r = n(570655)
          , i = n(470751)
          , o = n(170890)
          , a = n(19331)
          , s = "5.133"
          , c = 6287487
          , _ = !1
          , l = !1
          , u = !1
          , d = !1
          , p = "QbYic1K3lEV5kTGiqlq2"
          , h = function(e) {
            l || ((0,
            i.setLoginConfig)((0,
            r.__assign)({
                appId: c
            }, e)),
            l = !0)
        }
          , m = function(e, t, n, o) {
            return l ? (0,
            i.login)(e, t, n, o).then((function(e) {
                return d = Boolean(e.access_token),
                e
            }
            )).catch((function(e) {
                if (console.error("[VKJS][AUTH]:", e),
                "unauthorized" === e.error && "login_error" === e.type) {
                    var t = (0,
                    a.partConfigEnabled)("loginvk_unauthorized_force_logout");
                    if (console.error("[VKJS][AUTH]: logout " + (t ? "enabled" : "disabled") + " because ", "loginvk_unauthorized_force_logout = ", t),
                    t)
                        return (0,
                        i.removeLoginCache)(),
                        window.location.href = window.vk.logoutUrl,
                        new Promise((function() {}
                        ))
                }
                return (0,
                r.__assign)({
                    access_token: "",
                    error: !0
                }, e)
            }
            )) : Promise.reject("[VKJS][LOGIN]: login didn't init. Use setLoginConfig function")
        }
          , f = function(e) {
            _ ? (0,
            o.setApiConfig)((0,
            r.__assign)({}, e)) : ((0,
            o.setApiConfig)((0,
            r.__assign)({
                appId: c,
                version: s,
                onTokenExpired: function() {
                    return m("web_token", {}, {}, !0).then((function(e) {
                        return e.access_token || ""
                    }
                    ))
                }
            }, e)),
            _ = !0)
        }
          , g = function(e, t, n, i) {
            if (void 0 === i && (i = {}),
            !_)
                return Promise.reject("[VKJS][API]: api didn't init. Use setApiConfig function");
            if (!u)
                return m("web_token").then((function(a) {
                    u = !0,
                    f({
                        accessToken: a.access_token
                    });
                    var s = d ? t : (0,
                    r.__assign)({
                        client_secret: p
                    }, t);
                    return (0,
                    o.api)(e, s, n, i)
                }
                ));
            var a = d ? t : (0,
            r.__assign)({
                client_secret: p
            }, t);
            return (0,
            o.api)(e, a, n, i)
        }
          , v = function() {
            window.vkApi || (window.vkApi = {
                api: g,
                login: m,
                setLoginConfig: h,
                setApiConfig: f,
                removeLoginCache: i.removeLoginCache
            })
        }
    }
    ,
    189798: (e,t,n)=>{
        "use strict";
        n.d(t, {
            setLoginConfig: ()=>r,
            setApiConfig: ()=>i,
            api: ()=>o,
            login: ()=>a,
            removeLoginCache: ()=>s
        });
        var r = function(e) {
            return window.vkApi ? window.vkApi.setLoginConfig(e) : console.error("[VKJS]: setLoginConfig didn't allowed. Use makeAuthAndApiGlobal function")
        }
          , i = function(e) {
            return window.vkApi ? window.vkApi.setApiConfig(e) : console.error("[VKJS]: setApiConfig didn't allowed. Use makeAuthAndApiGlobal function")
        }
          , o = function(e, t, n, r) {
            return void 0 === r && (r = {}),
            window.vkApi ? window.vkApi.api(e, t, n, r) : Promise.reject("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function")
        }
          , a = function(e, t, n, r) {
            return window.vkApi ? window.vkApi.login(e, t, n, r) : Promise.reject("[VKJS]: login didn't allowed. Use makeAuthAndApiGlobal function")
        }
          , s = function(e, t) {
            return window.vkApi ? window.vkApi.removeLoginCache(e, t) : console.error("[VKJS]: removeLoginCache didn't allowed. Use makeAuthAndApiGlobal function")
        }
    }
    ,
    318941: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AudioHlsNode: ()=>l
        });
        var r = n(570655)
          , i = n(366792)
          , o = n(73665)
          , a = n(830648)
          , s = n(760847)
          , c = n(602227)
          , _ = n(26330)
          , l = function() {
            function e(e, t) {
                var n = this;
                this.fullyLoaded = !1,
                this.url = "",
                this.audioElement = new Audio,
                this.audioElement.crossOrigin = "anonymous",
                this.audioElement.preload = "auto",
                this.volume = e.volume,
                this.addEventListeners(e),
                t && this.setUrl(t).then((function() {
                    n.audioElement.load()
                }
                ));
                var r = new a.NetworkStatCollector;
                this.audioNetworkStatCollector = new a.AudioNetworkStatCollector(r)
            }
            return Object.defineProperty(e.prototype, "isFullyLoaded", {
                get: function() {
                    return this.fullyLoaded
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "error", {
                get: function() {
                    return this.audioElement.error || null
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "played", {
                get: function() {
                    return this.audioElement.played
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "src", {
                get: function() {
                    return this.url
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "hls", {
                get: function() {
                    return this.hlsInstance || null
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "duration", {
                get: function() {
                    return isFinite(this.audioElement.duration) ? this.audioElement.duration : 0
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "readyState", {
                get: function() {
                    return this.audioElement.readyState
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "currentTime", {
                get: function() {
                    return this.audioElement.currentTime
                },
                set: function(e) {
                    this.audioElement.currentTime = e
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "volume", {
                get: function() {
                    return this.audioElement.volume
                },
                set: function(e) {
                    this.audioElement.volume = e
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "playbackRate", {
                set: function(e) {
                    this.audioElement.playbackRate = e
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "currentProgress", {
                get: function() {
                    return isNaN(this.audioElement.duration) ? 0 : Math.max(0, Math.min(1, this.audioElement.currentTime / this.audioElement.duration))
                },
                enumerable: !1,
                configurable: !0
            }),
            Object.defineProperty(e.prototype, "currentBuffered", {
                get: function() {
                    return this.audioElement.buffered.length ? Math.min(1, this.audioElement.buffered.end(0) / this.audioElement.duration) : 0
                },
                enumerable: !1,
                configurable: !0
            }),
            e.prototype.play = function() {
                return (0,
                c.wrapAudioPlay)(this.audioElement).catch((function(e) {
                    switch (e.code) {
                    case e.NOT_SUPPORTED_ERR:
                    case e.ABORT_ERR:
                        break;
                    default:
                        throw e
                    }
                }
                ))
            }
            ,
            e.prototype.pause = function() {
                this.audioElement.pause()
            }
            ,
            e.prototype.addEventListeners = function(e) {
                var t = this;
                this.audioElement.addEventListener("pause", (function() {
                    return e.onPause()
                }
                )),
                this.audioElement.addEventListener("play", (function() {
                    return e.onPlay()
                }
                )),
                this.audioElement.addEventListener("progress", (function() {
                    if (e.onBufferUpdate(),
                    !t.hlsInstance) {
                        var n = t.audioElement.buffered;
                        n.length && Math.abs(n.end(n.length - 1) - t.audioElement.duration) < 1 && (t.fullyLoaded = !0)
                    }
                }
                )),
                this.audioElement.addEventListener("timeupdate", (function() {
                    e.onProgressUpdate && e.onProgressUpdate()
                }
                )),
                this.audioElement.addEventListener("ended", (function() {
                    e.onEnd && e.onEnd()
                }
                )),
                this.onFail = e.onFail || function() {}
                ,
                this.audioElement.addEventListener("error", (function() {
                    t.onFail()
                }
                )),
                this.audioElement.addEventListener("canplay", (function() {
                    e.onCanPlay && e.onCanPlay()
                }
                )),
                this.audioElement.addEventListener("durationchange", (function() {
                    e.onDurationChange && e.onDurationChange()
                }
                ))
            }
            ,
            e.isHlsUrl = function(e) {
                return (0,
                i.audioUnmaskSource)(e).includes(".m3u8")
            }
            ,
            e.prototype.setUrl = function(t) {
                var n = this
                  , r = (0,
                i.audioUnmaskSource)(t);
                return this.url = r,
                e.isHlsUrl(r) && !e.shouldUseNativeHls() && "function" == typeof window.MediaSource ? this.initHls(r).catch((function() {
                    return n.onFail()
                }
                )) : (this.hlsInstance && this.hlsInstance.destroy(),
                this.audioElement.src = r,
                this.audioElement.load(),
                Promise.resolve())
            }
            ,
            e.shouldUseNativeHls = function() {
                var e = (0,
                r.__read)(window.browser.version.split("."), 1)[0]
                  , t = parseInt(e);
                return window.browser.safari || window.browser.msie_edge && t > 11 && t < 78
            }
            ,
            e.prototype.initHls = function(t) {
                var n = this;
                return e.loadHls().then((function(e) {
                    var i = e.default;
                    return new Promise((function(e) {
                        var c = !1
                          , l = !!_.default.get("_audio_hls_debug");
                        n.hlsInstance && n.hlsInstance.destroy();
                        var u = new i({
                            debug: l,
                            maxBufferHole: 3,
                            nudgeOffset: .5,
                            nudgeMaxRetry: 5,
                            maxFragLookUpTolerance: .2
                        });
                        u.on(i.Events.BUFFER_EOS, (function() {
                            return n.fullyLoaded = !0
                        }
                        )),
                        u.on(i.Events.ERROR, (function(e, t) {
                            t.details === i.ErrorDetails.BUFFER_STALLED_ERROR && (c = !0),
                            (l || t.fatal) && console.log("audio hls error", e, t),
                            t.details === i.ErrorDetails.BUFFER_STALLED_ERROR && (u.stopLoad(),
                            u.startLoad()),
                            t.fatal && n.onFail({
                                type: t.type,
                                details: t.details,
                                url: t.frag && t.frag.url || t.context && t.context.url,
                                code: t.networkDetails ? t.networkDetails.status : 0
                            })
                        }
                        )),
                        u.on(i.Events.FRAG_BUFFERED, (function(e, t) {
                            var i = (0,
                            o.getCurrentAudio)()
                              , _ = {
                                owner_id: i.ownerId,
                                audio_id: i.id,
                                fragment_id: t.frag.sn.toString(),
                                fragment_duration: Math.ceil(1e3 * t.frag.duration).toString(),
                                time_to_first_byte: Math.ceil(t.stats.tfirst - t.stats.trequest).toString(),
                                time_to_first_frame: Math.ceil(t.stats.tload - t.stats.trequest).toString(),
                                buffering_time: Math.ceil(t.stats.tbuffered - t.stats.trequest).toString()
                            };
                            c && n.audioNetworkStatCollector.logEvent((0,
                            r.__assign)((0,
                            r.__assign)({}, _), {
                                event_type: a.AudioNetworkType.FRAGMENT_STALLED
                            }), s.default.getConnectionType(), s.default.getConnectionEffectiveType()),
                            c = !1,
                            n.audioNetworkStatCollector.logEvent((0,
                            r.__assign)((0,
                            r.__assign)({}, _), {
                                event_type: a.AudioNetworkType.FRAGMENT_LOADED
                            }), s.default.getConnectionType(), s.default.getConnectionEffectiveType())
                        }
                        )),
                        u.loadSource(t),
                        u.attachMedia(n.audioElement),
                        n.hlsInstance = u,
                        e()
                    }
                    ))
                }
                ))
            }
            ,
            e.loadHls = function() {
                return n.e(24817).then(n.t.bind(n, 867631, 23))
            }
            ,
            e
        }()
    }
    ,
    383611: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AudioMediaSession: ()=>_
        });
        var r = n(200134)
          , i = n(120290)
          , o = n(12733)
          , a = n(495283)
          , s = n(479957)
          , c = n(550519)
          , _ = function() {
            function e(e) {
                this.adaptedPlayer = e,
                this.handlePlay = this.handlePlay.bind(this),
                this.handlePlaylistChange = this.handlePlaylistChange.bind(this),
                this.play = this.play.bind(this),
                this.pause = this.pause.bind(this),
                this.previousTrack = this.previousTrack.bind(this),
                this.nextTrack = this.nextTrack.bind(this),
                this.seekBackward = this.seekBackward.bind(this),
                this.seekForward = this.seekForward.bind(this)
            }
            return e.prototype.init = function() {
                c.HAS_MEDIA_SESSION && (this.adaptedPlayer.subscribe(r.events.PLAY, this.handlePlay),
                this.adaptedPlayer.subscribe(r.events.PLAYLIST_CHANGED, this.handlePlaylistChange))
            }
            ,
            e.prototype.handlePlay = function() {
                if (c.HAS_MEDIA_SESSION) {
                    var e = this.adaptedPlayer.getCurrentAudio()
                      , t = (0,
                    i.asObject)(e);
                    if (t) {
                        var n = (0,
                        a.decodeHTMLEntities)(t.title + (t.subTitle ? " (" + t.subTitle + ")" : "")).replace(/<[^>]*>?/gm, "")
                          , r = (0,
                        a.decodeHTMLEntities)(t.performer || "").replace(/<[^>]*>?/gm, "")
                          , o = this.adaptedPlayer.getCurrentPlaylist()
                          , s = o ? (0,
                        a.decodeHTMLEntities)(o.getTitle && o.getTitle() || "").replace(/<[^>]*>?/gm, "") : ""
                          , _ = t.coverUrl_p || t.coverUrl_s
                          , l = _ ? [{
                            sizes: "160x160",
                            src: _
                        }] : [];
                        this.updateMediaSessionControls(),
                        (0,
                        c.updateMediaSessionMetadata)({
                            title: n,
                            artist: r,
                            album: s,
                            artwork: l
                        })
                    }
                }
            }
            ,
            e.prototype.handlePlaylistChange = function() {
                this.adaptedPlayer && !this.adaptedPlayer.getCurrentAudio() && (0,
                c.clear)()
            }
            ,
            e.prototype.updateMediaSessionControls = function() {
                var e;
                if (c.HAS_MEDIA_SESSION)
                    if (null === (e = this.adaptedPlayer.ads) || void 0 === e ? void 0 : e.isPlaying())
                        navigator.mediaSession.setActionHandler("play", this.play),
                        navigator.mediaSession.setActionHandler("pause", this.pause),
                        navigator.mediaSession.setActionHandler("seekbackward", null),
                        navigator.mediaSession.setActionHandler("seekforward", null),
                        navigator.mediaSession.setActionHandler("previoustrack", null),
                        navigator.mediaSession.setActionHandler("nexttrack", null);
                    else {
                        navigator.mediaSession.setActionHandler("play", this.play),
                        navigator.mediaSession.setActionHandler("pause", this.pause);
                        var t = this.adaptedPlayer.getCurrentPlaylist()
                          , n = this.adaptedPlayer.getCurrentPlaylistId()
                          , r = this.adaptedPlayer.getCurrentAudio();
                        if (this.adaptedPlayer.isPlaying() ? (navigator.mediaSession.setActionHandler("seekbackward", this.seekBackward),
                        navigator.mediaSession.setActionHandler("seekforward", this.seekForward)) : (navigator.mediaSession.setActionHandler("seekbackward", null),
                        navigator.mediaSession.setActionHandler("seekforward", null)),
                        n && (navigator.mediaSession.setActionHandler("nexttrack", this.nextTrack),
                        navigator.mediaSession.setActionHandler("previoustrack", this.previousTrack)),
                        t)
                            if (t && r && !(0,
                            o.isPodcast)(r)) {
                                var i = t.indexOfAudio(r)
                                  , a = t.getAudioAt(i - 1)
                                  , s = t.getAudioAt(i + 1);
                                a ? navigator.mediaSession.setActionHandler("previoustrack", this.previousTrack) : navigator.mediaSession.setActionHandler("previoustrack", null),
                                s ? navigator.mediaSession.setActionHandler("nexttrack", this.nextTrack) : navigator.mediaSession.setActionHandler("nexttrack", null)
                            } else
                                navigator.mediaSession.setActionHandler("previoustrack", null),
                                navigator.mediaSession.setActionHandler("nexttrack", null)
                    }
            }
            ,
            e.prototype.play = function() {
                this.adaptedPlayer.play(),
                (0,
                s.statlogsValueEvent)("global_media_controls", "audio_player", "play")
            }
            ,
            e.prototype.pause = function() {
                this.adaptedPlayer.pause(),
                (0,
                s.statlogsValueEvent)("global_media_controls", "audio_player", "pause")
            }
            ,
            e.prototype.previousTrack = function() {
                this.adaptedPlayer.prev(),
                (0,
                s.statlogsValueEvent)("global_media_controls", "audio_player", "previous_track")
            }
            ,
            e.prototype.nextTrack = function() {
                this.adaptedPlayer.next(),
                (0,
                s.statlogsValueEvent)("global_media_controls", "audio_player", "next_track")
            }
            ,
            e.prototype.seekBackward = function() {
                var e = (0,
                i.asObject)(this.adaptedPlayer.getCurrentAudio())
                  , t = e.getCurrentProgress() * e.duration()
                  , n = Math.max(0, (t - 10) / e.duration());
                n > 0 ? this.adaptedPlayer.seek(n) : this.adaptedPlayer.prev(),
                (0,
                s.statlogsValueEvent)("global_media_controls", "audio_player", "seek_backward")
            }
            ,
            e.prototype.seekForward = function() {
                var e = (0,
                i.asObject)(this.adaptedPlayer.getCurrentAudio())
                  , t = (this.adaptedPlayer.getCurrentProgress() || 0) * e.duration()
                  , n = Math.min(1, (t + 10) / e.duration());
                n < 1 ? this.adaptedPlayer.seek(n) : this.adaptedPlayer.next(),
                (0,
                s.statlogsValueEvent)("global_media_controls", "audio_player", "seek_forward")
            }
            ,
            e
        }()
    }
    ,
    767356: (e,t,n)=>{
        "use strict";
        n.d(t, {
            TaskName: ()=>r,
            AudioTaskManager: ()=>o
        });
        var r, i = n(804333);
        !function(e) {
            e.URL = "url",
            e.PLAYBACK_RATE = "playback_rate",
            e.DELAY = "delay",
            e.SEEK = "seek",
            e.PAUSE = "pause",
            e.PLAY = "play",
            e.VOL_SET = "vol_set",
            e.VOL_UP = "vol_up",
            e.VOL_DOWN = "vol_down"
        }(r || (r = {}));
        var o = function() {
            function e(e) {
                this.impl = e,
                this.taskIDCounter = 1,
                this.tasks = [],
                this.taskInProgress = null,
                this.taskAbort = null
            }
            return e.prototype.newTask = function(e, t) {
                var n, r, i = new Promise((function(e, t) {
                    n = e,
                    r = t
                }
                ));
                return this.tasks.push({
                    name: e,
                    fn: function() {
                        return t().then(n).catch(r)
                    },
                    id: e + "_" + this.taskIDCounter++
                }),
                this.doTasks(),
                i
            }
            ,
            e.prototype.clearAllTasks = function() {
                this.taskAbort = this.taskInProgress,
                this.taskInProgress = null,
                this.tasks = []
            }
            ,
            e.prototype.clearTask = function(e) {
                this.tasks = this.tasks || [],
                this.tasks = this.tasks.filter((function(t) {
                    return t.name !== e
                }
                ))
            }
            ,
            e.prototype.doTasks = function() {
                var e = this;
                if (!this.taskInProgress) {
                    var t = this.tasks.shift();
                    t && (this.taskInProgress = t.id,
                    this.ensureImplReady().then((function() {
                        return t.fn()
                    }
                    )).then((function() {
                        e.taskAbort !== t.id ? (e.taskInProgress = null,
                        e.doTasks()) : e.taskAbort = null
                    }
                    )))
                }
            }
            ,
            e.prototype.ensureImplReady = function() {
                var e = this;
                return new Promise((function(t) {
                    return e.impl.onReady(t)
                }
                ))
            }
            ,
            e.prototype.delay = function(e) {
                return this.newTask(r.DELAY, (function() {
                    return new Promise((function(t) {
                        return (0,
                        i.setWorkerTimeout)(t, e)
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.setUrl = function(e) {
                var t = this;
                return this.newTask(r.URL, (function() {
                    return new Promise((function(n) {
                        return t.impl.setUrl(e, n)
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.seekImmediate = function(e) {
                this.impl.seek(e)
            }
            ,
            e.prototype.seek = function(e) {
                var t = this;
                return this.clearTask(r.SEEK),
                this.newTask(r.SEEK, (function() {
                    return new Promise((function(n) {
                        t.seekImmediate(e),
                        n()
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.pause = function() {
                var e = this;
                return this.newTask(r.PAUSE, (function() {
                    return new Promise((function(t) {
                        e.impl.pause(),
                        t()
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.play = function() {
                var e = this;
                return window.browser.safari && this.impl.play(),
                this.newTask(r.PLAY, (function() {
                    return new Promise((function(t, n) {
                        e.impl.play().then(t).catch(n)
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.setVolume = function(e, t, n) {
                var i = this;
                if (void 0 === n && (n = null),
                t) {
                    var o = e ? r.VOL_UP : r.VOL_DOWN;
                    return this.newTask(o, (function() {
                        return new Promise((function(t) {
                            return i.impl.fadeVolume(e, n, (function() {
                                return t()
                            }
                            ))
                        }
                        ))
                    }
                    ))
                }
                return this.newTask(r.VOL_SET, (function() {
                    return new Promise((function(t) {
                        i.impl.setVolume(e),
                        t()
                    }
                    ))
                }
                ))
            }
            ,
            e.prototype.updatePlaybackRate = function(e) {
                var t = this;
                return this.newTask(r.PLAYBACK_RATE, (function() {
                    return new Promise((function(n) {
                        t.impl.setPlaybackRate(e),
                        n()
                    }
                    ))
                }
                ))
            }
            ,
            e
        }()
    }
    ,
    331811: (e,t,n)=>{
        "use strict";
        n.d(t, {
            EventBus: ()=>i
        });
        var r = n(570655)
          , i = function() {
            function e() {
                this.subscriptions = {}
            }
            return e.prototype.subscribe = function(e, t) {
                var n = this;
                return Array.isArray(e) && e.forEach((function(e) {
                    return n.subscribe(e, t)
                }
                )),
                this.subscriptions[e] || (this.subscriptions[e] = []),
                this.subscriptions[e].push(t),
                {
                    unsubscribe: function() {
                        return n.unsubscribe(e, t)
                    }
                }
            }
            ,
            e.prototype.unsubscribe = function(e, t) {
                if (this.subscriptions[e]) {
                    var n = this.subscriptions[e].indexOf(t);
                    n >= 0 && this.subscriptions[e].splice(n, 1)
                }
            }
            ,
            e.prototype.emit = function(e) {
                for (var t = this, n = [], i = 1; i < arguments.length; i++)
                    n[i - 1] = arguments[i];
                this.precheck && !this.precheck.apply(this, (0,
                r.__spreadArray)([e], (0,
                r.__read)(n))) || (this.onAnyCallBack && setTimeout((function() {
                    return t.onAnyCallBack.apply(t, (0,
                    r.__spreadArray)([e], (0,
                    r.__read)(n)))
                }
                )),
                this.subscriptions[e] && this.subscriptions[e].forEach((function(e) {
                    return setTimeout((function() {
                        return e.apply(void 0, (0,
                        r.__spreadArray)([], (0,
                        r.__read)(n)))
                    }
                    ))
                }
                )))
            }
            ,
            e
        }()
    }
    ,
    927313: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isClaimedAudio: ()=>o
        });
        var r = n(120290)
          , i = n(820587);
        function o(e) {
            return !!e && !!((e = (0,
            r.asObject)(e)).flags & i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT)
        }
    }
    ,
    772703: (e,t,n)=>{
        "use strict";
        n.d(t, {
            QueueListener: ()=>r
        });
        var r = function(e) {
            this.queueHandler = e
        }
    }
    ,
    143707: (e,t,n)=>{
        "use strict";
        function r(e) {
            var t = {};
            return e && e.length && e.filter((function(e) {
                return !!e
            }
            )).map((function(e) {
                return e.queues && e.queues[0]
            }
            )).forEach((function(e) {
                return t[e.type] = e
            }
            )),
            t
        }
        n.d(t, {
            unpackQueues: ()=>r
        })
    }
    ,
    801221: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logDonutEvent: ()=>a
        });
        var r = n(831683)
          , i = n(740517)
          , o = n(520820);
        function a(e, t) {
            var n = (0,
            o.parseJSON)(e)
              , a = n.type
              , s = n.type_property
              , c = n.params;
            s === i.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM ? r.donutStats.logEventAction({
                event_type: c.event_type,
                source: c.source,
                owner_id: c.owner_id
            }) : t && a === i.ProductionStatEventTypes.TYPE_NAVGO && function(e, t) {
                var n = t.params;
                if (t.typeProperty === i.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM) {
                    var o = n.owner_id
                      , a = n.track_code;
                    if (!n || "number" != typeof o || "string" != typeof a)
                        return;
                    r.donutStats.logEventDescriptionClick({
                        ownerId: o,
                        trackCode: a
                    })
                }
            }(0, {
                typeProperty: s,
                params: c
            })
        }
    }
    ,
    831683: (e,t,n)=>{
        "use strict";
        n.d(t, {
            donutStats: ()=>s
        });
        var r = n(570655)
          , i = n(214547)
          , o = n(740517)
          , a = n(309195)
          , s = new (function() {
            function e() {
                this.productionStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productionStatCollector),
                this.navStatCollector = new i.NavigationStatCollector(this.productionStatCollector)
            }
            return e.prototype.logEventAction = function(t) {
                return this.actionStatCollector.logEvent(e.createDonutActionStatEvent(t))
            }
            ,
            e.prototype.logEventActionView = function(e) {
                return this.logEventAction((0,
                r.__assign)((0,
                r.__assign)({}, e), {
                    event_type: a.DonutActionEventType.PAYMENT_FORM
                }))
            }
            ,
            e.prototype.logEventDescriptionClick = function(t) {
                this.navStatCollector.logEvent((0,
                r.__assign)((0,
                r.__assign)({}, e.createNavStatEventBase()), e.createDescriptionClickStatEvent(t)))
            }
            ,
            e.createDonutActionStatEvent = function(e) {
                var t;
                return (t = {
                    type: o.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM
                })[o.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM] = e,
                t
            }
            ,
            e.createNavStatEventBase = function() {
                return {
                    screen: "wall",
                    subtype: o.NavigationProductionStatEventTypes.GO
                }
            }
            ,
            e.createDescriptionClickStatEvent = function(t) {
                var n;
                return (n = {
                    item: e.processClickParamsToEventItem(t),
                    type: o.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM
                })[o.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM] = {},
                n
            }
            ,
            e.processClickParamsToEventItem = function(e) {
                return {
                    type: o.EventItemType.BROWSER,
                    owner_id: e.ownerId,
                    track_code: e.trackCode
                }
            }
            ,
            e
        }())
    }
    ,
    146934: (e,t,n)=>{
        "use strict";
        n.d(t, {
            TaskQueue: ()=>s
        });
        var r, i = n(570655), o = n(194795), a = n.n(o);
        !function(e) {
            e.EV_GC_START = "ev_gc_start",
            e.EV_GC_END = "ev_gc_end",
            e.EV_PAUSED = "ev_paused",
            e.EV_RESTARTED = "ev_restarted",
            e.EV_NEW_HANDLER = "ev_new_handler",
            e.EV_RM_HANDLER = "ev_rm_handler",
            e.EV_TASK_START = "ev_task_start"
        }(r || (r = {}));
        var s = function() {
            function e(e) {
                var t = this;
                void 0 === e && (e = function() {}
                ),
                this._errorHandler = e,
                this._timerInterval = 15,
                this._handlers = Object.create(null),
                this._emitter = new (a()),
                this._q = [],
                this.destroy = function() {
                    t.pause(),
                    clearInterval(t._gcTimer)
                }
                ,
                this.pause = function() {
                    t._timer && (clearTimeout(t._timer),
                    t._timer = void 0,
                    t._emitter.emit(r.EV_PAUSED))
                }
                ,
                this.restart = function() {
                    t._timer || (t._next(),
                    t._emitter.emit(r.EV_RESTARTED))
                }
                ,
                this.push = function(e) {
                    t._q.push(e),
                    t.restart()
                }
                ,
                this.setHandler = function(e, n, i) {
                    void 0 === i && (i = !1),
                    n.once = i,
                    t._handlers[e] = n,
                    t._emitter.emit(r.EV_NEW_HANDLER, e)
                }
                ,
                this.removeHandler = function(e) {
                    delete t._handlers[e],
                    t._emitter.emit(r.EV_RM_HANDLER, e)
                }
                ,
                this._next()
            }
            return Object.defineProperty(e.prototype, "events", {
                get: function() {
                    return this._emitter
                },
                enumerable: !1,
                configurable: !0
            }),
            e.migrate = function(t, n) {
                void 0 === n && (n = function() {}
                );
                var r = new e(n);
                return r.pause(),
                t && t.destroy && t._handlers && t._q && (t.destroy(),
                Object.keys(t._handlers).forEach((function(e) {
                    var n = t._handlers[e];
                    r.setHandler(e, n, n.once)
                }
                )),
                t._q.forEach((function(e) {
                    return r.push(e)
                }
                ))),
                r.restart(),
                r
            }
            ,
            e.prototype.setupGc = function(t) {
                this._gcTimer && clearInterval(this._gcTimer),
                this._gcTimer = setInterval(this._gcTask.bind(this), t || e._gcDefaultInterval)
            }
            ,
            e.prototype._next = function(e) {
                void 0 === e && (e = !1),
                this._timer = setTimeout(this._processNext.bind(this), e ? 0 : this._timerInterval)
            }
            ,
            e.prototype._gcTask = function() {
                this.pause(),
                this._emitter.emit(r.EV_GC_START);
                var e = this._q.filter((function(e) {
                    return e.postponed
                }
                ));
                this._q = this._q.filter((function(e) {
                    return !e.postponed
                }
                )),
                this._emitter.emit(r.EV_GC_END, e),
                this.restart()
            }
            ,
            e.prototype._processNext = function() {
                var e = this
                  , t = (0,
                i.__read)(this._q.splice(0, 1), 1)[0];
                if (t) {
                    var n, o = this._handlers[t.selector];
                    if ((null == o ? void 0 : o.once) && this.removeHandler(t.selector),
                    !o)
                        return t.postponed || (t.postponed = !0),
                        this._q.push(t),
                        void (this._timer && this._next());
                    this._emitter.emit(r.EV_TASK_START, t.selector),
                    window._tqVerbose && console.info("Running evbus task", t.selector);
                    try {
                        n = Promise.resolve(o(t))
                    } catch (e) {
                        n = Promise.reject(e)
                    }
                    n.then((function() {
                        e._next(!0)
                    }
                    ), (function(n) {
                        e._errorHandler && e._errorHandler(t, n),
                        e._next(!0)
                    }
                    ))
                } else
                    this.pause()
            }
            ,
            e._gcDefaultInterval = 5e3,
            e
        }()
    }
    ,
    182804: (e,t,n)=>{
        "use strict";
        n.d(t, {
            init: ()=>r.init,
            tq: ()=>r.tq,
            processExecData: ()=>i.processExecData
        });
        var r = n(70698)
          , i = n(542459)
    }
    ,
    70698: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isTQInitialized: ()=>l,
            init: ()=>u,
            tq: ()=>p,
            tqi: ()=>h,
            tqs: ()=>m
        });
        var r = n(146934)
          , i = n(542459)
          , o = n(66433)
          , a = function(e, t) {
            var n = {
                message: "Task execution error",
                data: {
                    taskName: e.selector,
                    type: void 0 === e.payload.dataAttrs ? "startup_task" : "interactive_task",
                    params: JSON.stringify(void 0 === e.payload.dataAttrs ? e.payload.data : e.payload.dataAttrs)
                }
            };
            (0,
            o.logError)(t, {
                environment: "task_queue",
                breadcrumb: n
            }),
            console.error(t)
        }
          , s = function() {
            if (!document.head)
                throw new Error("Document must be loaded before queue init");
            return document.head
        }
          , c = function(e) {
            document.addEventListener("DOMContentLoaded", e, {
                passive: !0
            }),
            "interactive" !== document.readyState && "complete" !== document.readyState || e()
        }
          , _ = function() {
            return c((function() {
                (0,
                i.unregisterGlobalTqHandlers)(document.body, s()._tqhl),
                s()._tqhl = (0,
                i.registerGlobalTqHandlers)(document.body)
            }
            ))
        }
          , l = function() {
            return !!s()._tq
        }
          , u = function() {
            var e = s();
            l() ? (e._tqi = r.TaskQueue.migrate(e._tqi, a),
            e._tqs = r.TaskQueue.migrate(e._tqs, a),
            _()) : function() {
                var e = s();
                e._tqs = new r.TaskQueue(a),
                e._tqi = new r.TaskQueue(a),
                _(),
                e._tq = {
                    setInteractiveHandler: function(t, n, r) {
                        return void 0 === r && (r = !1),
                        e._tqi.setHandler(t, n, r)
                    },
                    setStartupHandler: function(t, n, r) {
                        void 0 === r && (r = !1),
                        e._tqs.setHandler(t, n, r),
                        c((function() {
                            e._tqs.setupGc(),
                            e._tqs.restart()
                        }
                        ))
                    }
                },
                c((function() {
                    e._tqi.setupGc(),
                    (0,
                    i.initMutationObserver)(),
                    (0,
                    i.processTreeOfNodes)(document)
                }
                ))
            }()
        }
          , d = function(e) {
            return function() {
                var t = s();
                if (!t["_" + e])
                    throw new Error(e + " not initialized");
                return t["_" + e]
            }
        }
          , p = d("tq")
          , h = d("tqi")
          , m = d("tqs")
    }
    ,
    542459: (e,t,n)=>{
        "use strict";
        n.d(t, {
            processExecData: ()=>c,
            processTreeOfNodes: ()=>u,
            initMutationObserver: ()=>d,
            registerGlobalTqHandlers: ()=>p,
            unregisterGlobalTqHandlers: ()=>h
        });
        var r = n(570655)
          , i = n(70698)
          , o = {
            click: 1,
            mouseover: 1,
            mouseout: 1,
            keyup: 1,
            keydown: 1,
            change: 1,
            paste: 1
        }
          , a = ["focus", "mouseenter", "mouseleave"]
          , s = function(e) {
            return function(t) {
                var n;
                if (t.type === e && t.target && e && (n = t.target.nodeType === Node.TEXT_NODE ? t.target.parentNode : t.target,
                r = n,
                !Object.keys(r).some((function(e) {
                    return e.startsWith("_react") || e.startsWith("__react")
                }
                )) && n.dataset)) {
                    var r, o = n.dataset["task" + (e.toUpperCase()[0] + e.slice(1))];
                    if (!o) {
                        if ("click" !== t.type)
                            return;
                        var a = n.closest("[data-task-click]");
                        if (!a)
                            return;
                        n = a,
                        o = a.dataset["task" + (e.toUpperCase()[0] + e.slice(1))]
                    }
                    if (o) {
                        if (n.dataset.prevent && t instanceof MouseEvent && "A" === n.tagName) {
                            var s = n.hasAttribute("href")
                              , c = t.ctrlKey || t.metaKey;
                            if (s && c)
                                return
                        }
                        if ((0,
                        i.tqi)().push({
                            selector: o,
                            payload: {
                                target: n,
                                dataAttrs: n.dataset,
                                event: t
                            },
                            postponed: !1,
                            createTime: Date.now()
                        }),
                        n.dataset.prevent)
                            return 2 & Number(n.dataset.prevent) && t.stopPropagation(),
                            t.preventDefault(),
                            !1
                    }
                }
            }
        }
          , c = function(e, t) {
            var n = {};
            try {
                n = JSON.parse(e)
            } catch (t) {
                console.error("Failed to parse JSON: ", e)
            }
            for (var r in n)
                n.hasOwnProperty(r) && (0,
                i.tqs)().push({
                    selector: r,
                    payload: {
                        target: t,
                        data: n[r]
                    },
                    postponed: !1,
                    createTime: Date.now()
                })
        }
          , _ = function(e) {
            if (e.matches("[data-exec]")) {
                var t = e.dataset.exec || "{}";
                e.removeAttribute("data-exec"),
                c(t, e)
            }
        }
          , l = function(e) {
            var t, n, o, s = function(t) {
                var n = "data-task-" + t;
                if (e.hasAttribute(n)) {
                    var r = null !== (o = e.getAttribute(n)) && void 0 !== o ? o : "";
                    e.removeAttribute(n),
                    e.addEventListener(t, (function(t) {
                        var n = (0,
                        i.tqi)()._handlers[r];
                        Promise.resolve(null).then((function() {
                            return null == n ? void 0 : n({
                                selector: r,
                                payload: {
                                    dataAttrs: e.dataset,
                                    target: e,
                                    event: t
                                },
                                postponed: !1,
                                createTime: Date.now()
                            })
                        }
                        )).catch((function(e) {
                            return console.error(e)
                        }
                        ))
                    }
                    ), {
                        passive: !0
                    })
                }
            };
            try {
                for (var c = (0,
                r.__values)(a), _ = c.next(); !_.done; _ = c.next()) {
                    s(_.value)
                }
            } catch (e) {
                t = {
                    error: e
                }
            } finally {
                try {
                    _ && !_.done && (n = c.return) && n.call(c)
                } finally {
                    if (t)
                        throw t.error
                }
            }
        }
          , u = function(e) {
            var t, n, i, o, s, c;
            void 0 === e && (e = document);
            try {
                for (var u = (0,
                r.__values)(e.querySelectorAll("[data-exec]")), d = u.next(); !d.done; d = u.next()) {
                    ((v = d.value)instanceof HTMLElement || v instanceof SVGElement) && _(v)
                }
            } catch (e) {
                t = {
                    error: e
                }
            } finally {
                try {
                    d && !d.done && (n = u.return) && n.call(u)
                } finally {
                    if (t)
                        throw t.error
                }
            }
            try {
                for (var p = (0,
                r.__values)(a), h = p.next(); !h.done; h = p.next()) {
                    var m = h.value;
                    try {
                        for (var f = (s = void 0,
                        (0,
                        r.__values)(e.querySelectorAll("[data-task-" + m + "]"))), g = f.next(); !g.done; g = f.next()) {
                            var v;
                            ((v = g.value)instanceof HTMLElement || v instanceof SVGElement) && l(v)
                        }
                    } catch (e) {
                        s = {
                            error: e
                        }
                    } finally {
                        try {
                            g && !g.done && (c = f.return) && c.call(f)
                        } finally {
                            if (s)
                                throw s.error
                        }
                    }
                }
            } catch (e) {
                i = {
                    error: e
                }
            } finally {
                try {
                    h && !h.done && (o = p.return) && o.call(p)
                } finally {
                    if (i)
                        throw i.error
                }
            }
        }
          , d = function() {
            window._obs = new MutationObserver((function(e) {
                var t, n, i, o;
                try {
                    for (var a = (0,
                    r.__values)(e), s = a.next(); !s.done; s = a.next()) {
                        var c = s.value;
                        try {
                            for (var d = (i = void 0,
                            (0,
                            r.__values)(c.addedNodes)), p = d.next(); !p.done; p = d.next()) {
                                var h = p.value;
                                (h instanceof HTMLElement || h instanceof SVGElement) && (_(h),
                                l(h),
                                u(h))
                            }
                        } catch (e) {
                            i = {
                                error: e
                            }
                        } finally {
                            try {
                                p && !p.done && (o = d.return) && o.call(d)
                            } finally {
                                if (i)
                                    throw i.error
                            }
                        }
                    }
                } catch (e) {
                    t = {
                        error: e
                    }
                } finally {
                    try {
                        s && !s.done && (n = a.return) && n.call(a)
                    } finally {
                        if (t)
                            throw t.error
                    }
                }
            }
            )),
            window._obs.observe(document, {
                subtree: !0,
                childList: !0,
                attributes: !0
            })
        }
          , p = function(e) {
            var t = {};
            for (var n in o)
                if (o.hasOwnProperty(n)) {
                    var r = s(n);
                    e.addEventListener(n, r),
                    t[n] = r
                }
            return t
        }
          , h = function(e, t) {
            for (var n in t)
                t.hasOwnProperty(n) && e.removeEventListener(n, t[n])
        }
    }
    ,
    887294: (e,t,n)=>{
        "use strict";
        n.d(t, {
            post: ()=>a,
            plaingetCancelable: ()=>s
        });
        var r = n(570655)
          , i = n(668040)
          , o = n(638736);
        function a(e, t, n) {
            return t && (t.im_v = 3),
            new Promise((function(i, o) {
                window.ajax.post(e, t, {
                    timeout: n,
                    onDone: function() {
                        i.apply(null, [(0,
                        r.__spreadArray)([], (0,
                        r.__read)(arguments))])
                    },
                    onFail: function() {
                        return o.apply(null, (0,
                        r.__spreadArray)([], (0,
                        r.__read)(arguments))),
                        !0
                    }
                })
            }
            ))
        }
        function s(e, t, n) {
            void 0 === n && (n = {});
            var r = new XMLHttpRequest;
            return {
                request: new Promise((function(a, s) {
                    var c, _ = Date.now(), l = n.timeout || 60, u = (0,
                    i.toQueryString)(t);
                    r.onreadystatechange = function() {
                        if (4 == r.readyState) {
                            if (window.clearInterval(c),
                            (0,
                            o.processWaf)(r))
                                return;
                            r.status >= 200 && r.status < 300 ? a([r.responseText, r]) : s([r.responseText, r])
                        }
                    }
                    ;
                    try {
                        r.open("GET", e + "?" + u, !0)
                    } catch (e) {
                        return s([e, r])
                    }
                    r.send(),
                    c = window.setInterval((function() {
                        Date.now() - _ > 1e3 * l && (window.browser.safari && r.abort(),
                        s(["", {}]),
                        window.clearInterval(c))
                    }
                    ), 1e3)
                }
                )),
                cancel: function() {
                    r.abort()
                }
            }
        }
    }
    ,
    511417: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ColorSchemeMode: ()=>r,
            ColorSchemeName: ()=>i,
            ColorScheme: ()=>l,
            colorScheme: ()=>_
        });
        var r, i, o, a = n(376567), s = n(961540), c = n(479957);
        !function(e) {
            e.Light = "light",
            e.Dark = "dark",
            e.Auto = "auto"
        }(r || (r = {})),
        function(e) {
            e.Dark = "space_gray",
            e.Light = "bright_light",
            e.WebDark = "vkcom_dark",
            e.WebLight = "vkcom_light"
        }(i || (i = {})),
        function(e) {
            e.Dark = "#222222",
            e.Light = "#ffffff"
        }(o || (o = {}));
        var _, l = function() {
            function e() {
                this.currentMode = "",
                this.subscribers = [],
                this.initSubscribers = [],
                this.isExecuted = !1,
                this.isModeSavingAllowed = !0,
                this.isSchemeSavingAllowed = !0
            }
            return e.prototype.init = function(t) {
                var n = this;
                this.isExecuted || (this.schemesMap = t.schemesMap,
                this.setMode(t.mode),
                this.initSubscribers.forEach((function(e) {
                    e()
                }
                )),
                (0,
                c.statlogsValueEvent)("web_dark_theme", this.getMode(), this.getScheme(), Number(this.isDarkScheme())),
                e.isSchemesAutoSwitchingSupported() && (window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", (function(e) {
                    n.currentMode === r.Auto && n.setScheme(e.matches)
                }
                )),
                this.isExecuted = !0))
            }
            ,
            e.prototype.setScheme = function(t) {
                var n, r;
                e.isSchemesSupported() && (this.applyScheme(document.body, t ? i.Dark : i.Light),
                this.currentIsDark = t,
                null === (n = document.querySelector("meta[name=theme-color]")) || void 0 === n || n.setAttribute("content", t ? o.Dark : o.Light),
                null === (r = document.querySelector("meta[name=color-scheme]")) || void 0 === r || r.setAttribute("content", t ? "dark" : "light"),
                this.isSchemeSavingAllowed && (0,
                a.setCookie)("remixdark_color_scheme", Number(t), 365),
                this.subscribers.forEach((function(e) {
                    e()
                }
                )))
            }
            ,
            e.prototype.isDarkScheme = function() {
                return this.currentIsDark
            }
            ,
            e.prototype.getMode = function() {
                return this.currentMode
            }
            ,
            e.prototype.setMode = function(t) {
                this.currentMode = t;
                var n = !1;
                switch (t) {
                case r.Light:
                    n = !1;
                    break;
                case r.Dark:
                    n = !0;
                    break;
                case r.Auto:
                    if (e.isSchemesAutoSwitchingSupported())
                        n = window.matchMedia("(prefers-color-scheme: dark)").matches
                }
                this.setScheme(n),
                this.isModeSavingAllowed && (0,
                a.setCookie)("remixcolor_scheme_mode", t, 365)
            }
            ,
            e.prototype.getScheme = function() {
                return (0,
                s.isMvk)() ? this.getMVKScheme() : this.getWebScheme()
            }
            ,
            e.prototype.getMVKScheme = function() {
                return this.isDarkScheme() ? i.Dark : i.Light
            }
            ,
            e.prototype.getWebScheme = function() {
                return this.isDarkScheme() ? i.WebDark : i.WebLight
            }
            ,
            e.prototype.applyScheme = function(e, t) {
                var n, r = (null === (n = this.schemesMap) || void 0 === n ? void 0 : n[t]) || t;
                e.setAttribute("scheme", r)
            }
            ,
            e.prototype.subscribe = function(e) {
                var t = this;
                return this.subscribers.push(e),
                function() {
                    t.subscribers = t.subscribers.filter((function(t) {
                        return e !== t
                    }
                    ))
                }
            }
            ,
            e.prototype.onInit = function(e) {
                var t = this;
                return this.initSubscribers.push(e),
                function() {
                    t.initSubscribers = t.initSubscribers.filter((function(t) {
                        return e !== t
                    }
                    ))
                }
            }
            ,
            e.isSchemesSupported = function() {
                return (!(0,
                s.isMvk)() || window.isNewMail) && window.CSS && CSS.supports && CSS.supports("color", "var(--custom-property)")
            }
            ,
            e.isSchemesAutoSwitchingSupported = function() {
                return window.matchMedia && window.matchMedia("(prefers-color-scheme)").matches
            }
            ,
            e
        }();
        _ = window.colorScheme ? window.colorScheme : new l,
        window.colorScheme = _,
        window.isSchemesSupported = l.isSchemesSupported.bind(null)
    }
    ,
    638736: (e,t,n)=>{
        "use strict";
        n.d(t, {
            processWaf: ()=>l
        });
        var r = n(19331)
          , i = n(961540)
          , o = "X-WAF-Redirect";
        function a() {
            return (0,
            r.partConfigEnabled)((0,
            i.isMvk)() ? "mvk_waf_ajax_request_enabled" : "waf_ajax_request_enabled")
        }
        function s(e) {
            return void 0 === e && (e = ""),
            a() && "" !== e
        }
        var c = !1;
        function _() {
            c || (c = !0,
            location.reload())
        }
        function l(e) {
            if (!a())
                return !1;
            var t = !1;
            if (e instanceof XMLHttpRequest) {
                var n = void 0;
                try {
                    n = e.getResponseHeader(o)
                } catch (e) {}
                t = s(n || "")
            } else
                e && (t = function(e) {
                    return a() && 429 === e.status && "429.html" === e.source
                }(e));
            return t && _(),
            t
        }
    }
    ,
    153271: (e,t,n)=>{
        "use strict";
        function r(e) {
            return navigator.clipboard ? function(e) {
                return navigator.clipboard.writeText(e)
            }(e) : (i(e),
            Promise.resolve())
        }
        function i(e) {
            var t = document.createElement("input")
              , n = document.activeElement;
            t.value = e,
            document.body.appendChild(t),
            t.select(),
            document.execCommand("copy"),
            document.body.removeChild(t),
            n.focus()
        }
        n.d(t, {
            copyToClipboard: ()=>r,
            _copyWithFakeElement: ()=>i
        })
    }
    ,
    830104: (e,t,n)=>{
        "use strict";
        function r(e) {
            var t = document.createElement("div");
            return t.innerHTML = e,
            t.firstElementChild
        }
        function i(e) {
            if (e)
                for (; e.firstChild; )
                    e.removeChild(e.firstChild)
        }
        function o(e) {
            var t = e.getBoundingClientRect();
            return {
                left: t.left,
                top: t.top
            }
        }
        function a() {
            var e = document.documentElement;
            return {
                width: e.clientWidth,
                height: e.clientHeight
            }
        }
        function s(e) {
            var t = e.getBoundingClientRect()
              , n = t.width
              , r = t.height;
            return n && r ? {
                width: n,
                height: r
            } : {
                width: e.offsetWidth,
                height: e.offsetHeight
            }
        }
        n.d(t, {
            createElementFromHTML: ()=>r,
            emptyNode: ()=>i,
            getElementOffset: ()=>o,
            getViewportSize: ()=>a,
            getElementSize: ()=>s,
            getJsonDataValue: ()=>c,
            setGlobalCustomProperty: ()=>_,
            triggerAnimationClass: ()=>l,
            findChildOrSelf: ()=>u
        });
        var c = function(e, t) {
            var n = e.getAttribute(t);
            if (n)
                try {
                    return JSON.parse(n)
                } catch (e) {
                    return
                }
        }
          , _ = function(e, t) {
            document.documentElement.style.setProperty(e, t)
        }
          , l = function(e, t, n) {
            e.classList.add(t),
            setTimeout((function() {
                e.classList.remove(t)
            }
            ), n)
        };
        function u(e, t) {
            return e.matches(t) ? e : e.querySelector(t)
        }
    }
    ,
    721422: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logError: ()=>o,
            logEvalError: ()=>a,
            debugBufferLog: ()=>s
        });
        var r = n(436878)
          , i = n(209509);
        function o(e, t) {
            if (void 0 === t && (t = {}),
            null === window || void 0 === window ? void 0 : window.Raven) {
                var n = t.breadcrumb
                  , o = t.environment;
                n && window.Raven.captureBreadcrumb({
                    message: n.message,
                    category: i.customBreadcrumbCategory,
                    data: n.data
                }),
                o ? window.Raven.captureException(e, {
                    environment: o
                }) : window.Raven.captureException(e),
                (0,
                r.logError)(e, t)
            }
        }
        function a(e, t) {
            window.Raven && (t && t.length > 2e3 && (t = t.slice(0, 1e3) + "..." + t.slice(-1e3)),
            e.message += ": " + t,
            o(e))
        }
        function s(e) {
            return o(e, {
                environment: "debugLog"
            })
        }
    }
    ,
    678276: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isStuckError: ()=>m,
            pruneRequestFromStuckErrors: ()=>f
        });
        var r, i, o = n(570655), a = n(19331), s = n(743672), c = n(645611), _ = "mvk" === (null === (i = null === (r = window.vk) || void 0 === r ? void 0 : r.statsMeta) || void 0 === i ? void 0 : i.platform) && (0,
        a.partConfigEnabled)("mute_mvk_err_peaks"), l = n(111317), u = 10, d = _ && l(u), p = _ && l(u, 5e3), h = function(e) {
            var t = e.value
              , n = e.stacktrace
              , r = e.file
              , i = e.page;
            return [t, n.join(""), r, i].join("_")
        }, m = function(e) {
            if (!_ || !p || !d)
                return !1;
            var t = h(e)
              , n = (0,
            o.__read)([d.get(t) || 0, p.get(t) || 0], 2)
              , r = n[0]
              , i = n[1];
            return d.set(t, ++r),
            p.set(t, ++i),
            i >= u || r >= 50
        }, f = _ ? function(e) {
            var t, n, r = Date.now(), i = "jsErrorLogs", a = (0,
            s.getWebStatsStringValue)(i, e);
            if (((null === (t = a.match(new RegExp("},{","g"))) || void 0 === t ? void 0 : t.length) || 0) < u)
                return e;
            try {
                n = JSON.parse(a)
            } catch (e) {
                (0,
                c.logProcessingTime)(1, "dedupe-fail")
            }
            if (!n)
                return e;
            var _ = Object.values(n.reduce((function(e, t) {
                var n, r = h(t), i = e[r] || [];
                return (0,
                o.__assign)((0,
                o.__assign)({}, e), ((n = {})[r] = i.length < u ? i.concat(t) : i,
                n))
            }
            ), {}))
              , l = e.replace('"jsErrorLogs":' + a, '"jsErrorLogs":' + JSON.stringify([].concat.apply([], _)))
              , d = Date.now() - r;
            return d > 16 && (0,
            c.logProcessingTime)(d, "dedupe"),
            l
        }
        : function(e) {
            return e
        }
    }
    ,
    66433: (e,t,n)=>{
        "use strict";
        n.d(t, {
            prepareError: ()=>r.prepareError,
            getRavenXhrTransport: ()=>i.getRavenXhrTransport,
            logError: ()=>o.logError,
            debugBufferLog: ()=>o.debugBufferLog,
            logEvalError: ()=>o.logEvalError
        });
        var r = n(174146)
          , i = n(934707)
          , o = n(721422)
    }
    ,
    174146: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            var n = e.exception && e.exception.values[0] || {
                type: "Message",
                value: e.message + i(e),
                stacktrace: e.stacktrace || {
                    frames: []
                }
            };
            "Error" === n.type && n.value.startsWith("Non-Error exception captured with keys:") && (n.value += i(e)),
            !n.value && e.message && (n.value = e.message);
            var r = n.type
              , s = n.value
              , c = n.stacktrace
              , _ = window.location
              , l = _.origin
              , u = _.protocol
              , d = _.hostname
              , p = _.port
              , h = _.href;
            p = p ? ":" + p : "",
            l = l || u + "//" + d + p;
            var m = e.environment
              , f = e.transaction
              , g = e.breadcrumbs;
            return {
                id: e.event_id,
                module: m || t(f, c, s),
                type: r,
                value: s,
                file: f,
                breadcrumbs: o(g),
                stacktrace: a(c, l),
                page: h,
                release: window.vk.rv,
                time: window.vk.ts + Math.floor(((new Date).getTime() - window.vk.started) / 1e3)
            }
        }
        function i(e) {
            return e.extra && e.extra.__serialized__ ? "\n" + JSON.stringify(e.extra.__serialized__).slice(0, 500) : ""
        }
        function o(e) {
            if (!e || !e.values || 0 === e.values.length)
                return "";
            var t = e.values[0]
              , n = t.data
              , r = t.category
              , i = t.message;
            return "xhr" === r ? n.method + ":" + n.status_code + ":" + n.url : "custom" === r ? i + ":" + JSON.stringify(n) : ""
        }
        function a(e, t) {
            var n = [];
            return e.frames.forEach((function(e, r) {
                0 === r && (e.filename.includes("raven_logger.js") || e.filename.includes("raven.js")) || n.push(e.filename.replace(t, "") + ":" + e.lineno + ":" + e.colno + ":" + e.function)
            }
            )),
            n
        }
        n.d(t, {
            prepareError: ()=>r
        })
    }
    ,
    934707: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getRavenXhrTransport: ()=>o
        });
        var r = n(171516)
          , i = n(678276)
          , o = function(e) {
            return function(t) {
                var n = t.data
                  , o = t.onSuccess
                  , a = e(n);
                !(0,
                i.isStuckError)(a) && (0,
                r.saveJsErrorLogs)(a),
                o()
            }
        }
    }
    ,
    849464: (e,t,n)=>{
        "use strict";
        n.d(t, {
            NarrativeAnalyticEventType: ()=>r,
            NarrativeAnalyticNavScreen: ()=>i,
            sendNarrativeAnalytic: ()=>s
        });
        var r, i, o = n(479957), a = n(19331);
        function s(e, t, n) {
            var r;
            void 0 === n && (n = i.other);
            var s = (null == t ? void 0 : t.title) || void 0
              , c = (null == t ? void 0 : t.customCover) ? 0 : (null == t ? void 0 : t.coverStoryId) || 0
              , _ = (null == t ? void 0 : t.id) || 0
              , l = (null == t ? void 0 : t.ownerId) || 0
              , u = null === (r = null == t ? void 0 : t.stories) || void 0 === r ? void 0 : r.map((function(e) {
                return e.id
            }
            ))
              , d = {
                event_type: e,
                nav_screen: n,
                narrative_owner_id: l,
                narrative_id: _,
                narrative_title: s,
                story_ids: (null == u ? void 0 : u.length) ? u : void 0,
                cover_story_id: c
            };
            (0,
            o.statlogsValueEvent)("narrative_product_analytic", d),
            (0,
            a.partConfigEnabled)("narratives_web_analytic_debug") && console.log("-- narrative analytic", d)
        }
        !function(e) {
            e.clickToAddToNarrative = "click_to_add_to_narrative",
            e.addStoryToNarrative = "add_story_to_narrative",
            e.openNarrativeList = "open_narrative_list",
            e.close = "close",
            e.changeSort = "change_sort",
            e.publishNarrative = "publish_narrative",
            e.createNarrative = "create_narrative",
            e.deleteNarrative = "delete_narrative",
            e.clickToEditNarrative = "click_to_edit_narrative",
            e.editNarrative = "edit_narrative",
            e.addToBookmarks = "add_to_bookmarks",
            e.shareNarrative = "share_narrative",
            e.seeMore = "see_more",
            e.addToNarrativeFromActionSheet = "add_to_narrative_from_action_sheet"
        }(r || (r = {})),
        function(e) {
            e.storyArchive = "story_archive",
            e.storyViewer = "story_viewer",
            e.profile = "profile",
            e.feedBlock = "narratives_feed_block",
            e.club = "club",
            e.other = "other"
        }(i || (i = {}))
    }
    ,
    748293: (e,t,n)=>{
        "use strict";
        function r() {
            return location.hostname
        }
        n.d(t, {
            currentHostname: ()=>r
        })
    }
    ,
    291699: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isRelativeURL: ()=>c,
            isSameSubdomainHostname: ()=>_,
            isVKSiteURLSameSubdomainTarget: ()=>u,
            isVKSiteURLAnySubdomainTarget: ()=>d,
            isVKSiteURLForNav: ()=>h
        });
        var r = n(570655)
          , i = n(961540)
          , o = n(748293)
          , a = new RegExp("^(([a-zA-Z0-9\\.\\_\\-]+)\\.)?(" + i.VK_HOST_REGEX_UNSAFE.source + ")$");
        function s(e) {
            var t = e.match(a);
            if (t) {
                var n = (0,
                r.__read)(t, 4)
                  , i = n[2];
                return {
                    baseDomain: n[3],
                    subDomain: i
                }
            }
        }
        function c(e) {
            return !/^https?:\/\//i.test(e)
        }
        function _(e, t) {
            return !(!i.VK_DOMAIN_REGEX.test(e) || !i.VK_DOMAIN_REGEX.test(t)) && function(e, t) {
                var n, r, i = null === (n = s(e)) || void 0 === n ? void 0 : n.subDomain, o = null === (r = s(t)) || void 0 === r ? void 0 : r.subDomain;
                return i === o
            }(e, t)
        }
        function l(e, t) {
            var n = m(e);
            return !!n && (!(!t || !_(function() {
                var e = (0,
                o.currentHostname)()
                  , t = s(e);
                if (!t)
                    return e;
                return t.baseDomain
            }(), n.url.hostname)) || _((0,
            o.currentHostname)(), n.url.hostname))
        }
        function u(e, t) {
            return !!h(e) && l(e, t)
        }
        function d(e) {
            return h(e)
        }
        function p(e) {
            var t = function(e) {
                var t, n = m(e);
                if (n)
                    return null === (t = s(n.url.hostname)) || void 0 === t ? void 0 : t.baseDomain
            }(e);
            return void 0 !== t && i.VK_POSSIBLE_SITE_HOSTS.includes(t)
        }
        function h(e) {
            return p(e)
        }
        function m(e) {
            if (i.VK_URL_REGEX_STRICT.test(e))
                try {
                    return {
                        url: new URL(e)
                    }
                } catch (e) {
                    console.error(e)
                }
        }
    }
    ,
    160617: (e,t,n)=>{
        "use strict";
        n.d(t, {
            toMaybeVKSiteURLRelativeName: ()=>a,
            isVKSiteHostnameSameSubdomainForNav: ()=>_,
            stripVKSiteURLOrigin: ()=>l,
            maybeStripVKSiteURLOriginAnySubdomain: ()=>u,
            isVKSiteURLForNav: ()=>o.isVKSiteURLForNav
        });
        var r = n(961540)
          , i = n(748293)
          , o = n(291699);
        function a(e, t) {
            return c(e, "", t)
        }
        function s(e, t) {
            return c(e, "/", t)
        }
        function c(e, t, n) {
            void 0 === n && (n = {});
            var i = n.allowAnySubdomainAsCurrent
              , a = void 0 !== i && i
              , s = n.allowWebBaseDomainAsCurrent
              , c = void 0 !== s && s
              , _ = a ? (0,
            o.isVKSiteURLAnySubdomainTarget)(e) : (0,
            o.isVKSiteURLSameSubdomainTarget)(e, c);
            if (!((0,
            o.isRelativeURL)(e) || _))
                return e;
            var l = new RegExp("(" + r.VK_ORIGIN_PREFIX_REGEX.source + ")?/?");
            return e.replace(new RegExp(l), t)
        }
        function _(e) {
            return function(e) {
                return r.VK_DOMAIN_REGEX.test(e)
            }(e) && (0,
            o.isSameSubdomainHostname)((0,
            i.currentHostname)(), e)
        }
        function l(e) {
            return (0,
            o.isVKSiteURLForNav)(e) ? s(e, {
                allowWebBaseDomainAsCurrent: !0
            }) : e
        }
        function u(e) {
            if ((0,
            o.isVKSiteURLForNav)(e))
                return s(e, {
                    allowAnySubdomainAsCurrent: !0
                })
        }
    }
    ,
    520820: (e,t,n)=>{
        "use strict";
        n.d(t, {
            parseJSON: ()=>o
        });
        var r = n(66433)
          , i = n(209509);
        function o(e) {
            try {
                return JSON.parse(e)
            } catch (n) {
                var t = {
                    environment: "parseJsonError",
                    breadcrumb: {
                        message: "Uncaught json parse error",
                        data: {
                            json: e
                        },
                        category: i.customBreadcrumbCategory
                    }
                };
                return (0,
                r.logError)(n, t),
                {}
            }
        }
    }
    ,
    35779: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logQuestionError: ()=>i
        });
        var r = n(66433);
        function i(e, t) {
            if (t ? console.error(e, t) : console.error(e),
            e instanceof Error) {
                var n = new Error(i(e.message, t));
                return n.name = e.name,
                n.stack = e.stack,
                void (0,
                r.logError)(e)
            }
            function i(e, t) {
                return t ? t + ": " + e : e
            }
            "string" != typeof e ? e instanceof Object ? (0,
            r.logError)(new Error(i(JSON.stringify(e), t))) : e || !t || (0,
            r.logError)(new Error(t)) : (0,
            r.logError)(new Error(i(e, t)))
        }
    }
    ,
    637482: (e,t,n)=>{
        "use strict";
        n.d(t, {
            QuestionsStatCollector: ()=>c
        });
        var r = n(214547)
          , i = n(740517)
          , o = n(19331)
          , a = n(664260)
          , s = n(632010)
          , c = function() {
            function e() {
                this.productionStatCollector = new r.ProductionStatCollector,
                this.clickStatCollector = new r.ClickStatCollector(this.productionStatCollector)
            }
            return e.prototype.logClickEvent = function(e, t) {
                var n;
                void 0 === t && (t = {});
                var r = ((n = {
                    type: i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM
                })[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM] = {
                    type: e,
                    screen: t.navScreen || window.cur.module || ""
                },
                n);
                t.questionReceiverId && (r[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_receiver_id = t.questionReceiverId),
                t.questionAuthorId && (r[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_author_id = t.questionAuthorId),
                t.questionText && (r[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_text = t.questionText);
                var a = {
                    type: i.EventItemType.QUESTION,
                    id: t.questionId || 0
                };
                (0,
                o.partConfigEnabled)("profile_questions_analytic_debug") && console.log("--" + e, r, a),
                this.clickStatCollector.logEvent(r, a)
            }
            ,
            e.prototype.logOpeningEvent = function(e, t, n) {
                var r;
                switch (t) {
                case s.QuestionsBoxRef.STORY:
                    r = n === a.QuestionAnalyticBoxName.askQuestion ? a.QuestionAnalyticEventType.openAskQuestionFromStory : a.QuestionAnalyticEventType.openMyQuestionsFromStory;
                    break;
                case s.QuestionsBoxRef.SNIPPET:
                    r = n === a.QuestionAnalyticBoxName.askQuestion ? a.QuestionAnalyticEventType.openAskQuestionFromSnippet : a.QuestionAnalyticEventType.openMyQuestionsFromSnippet;
                    break;
                default:
                    r = n === a.QuestionAnalyticBoxName.askQuestion ? a.QuestionAnalyticEventType.openAskQuestionFromUrl : a.QuestionAnalyticEventType.openMyQuestionsFromUrl
                }
                var i = {
                    questionReceiverId: e
                };
                n === a.QuestionAnalyticBoxName.askQuestion && (i.questionAuthorId = window.vk.id),
                this.logClickEvent(r, i)
            }
            ,
            e
        }()
    }
    ,
    734234: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logQuestionsClickEvent: ()=>i,
            logQuestionsOpeningEvent: ()=>o
        });
        var r = new (n(637482).QuestionsStatCollector);
        function i(e, t) {
            void 0 === t && (t = {}),
            r.logClickEvent(e, t)
        }
        function o(e, t, n) {
            r.logOpeningEvent(e, t, n)
        }
    }
    ,
    664260: (e,t,n)=>{
        "use strict";
        n.d(t, {
            QuestionAnalyticEventType: ()=>r,
            QuestionAnalyticBoxName: ()=>i
        });
        var r, i;
        n(740517);
        !function(e) {
            e.clickToQuestion = "click_to_question",
            e.reply = "reply",
            e.replyAgain = "reply_again",
            e.sharing = "sharing",
            e.shareToStory = "share_to_story",
            e.shareToWall = "share_to_wall",
            e.shareToGroup = "share_to_group",
            e.shareToIm = "share_to_im",
            e.copyLink = "copy_link",
            e.openStory = "open_story",
            e.callFriends = "call_friends",
            e.openSettings = "open_settings",
            e.openProfile = "open_profile",
            e.block = "block",
            e.unblock = "unblock",
            e.deleteAllQuestions = "delete_all_questions",
            e.delete = "delete",
            e.cancelDelete = "cancel_delete",
            e.cancelDeleteAllAuthorQuestions = "cancel_delete_all_author_questions",
            e.cancelDeleteAllAnonymousQuestions = "cancel_delete_all_anonymous_questions",
            e.next = "next",
            e.close = "close",
            e.clickToSend = "click_to_send",
            e.sendQuestion = "send_question",
            e.cancelSendQuestion = "cancel_send_question",
            e.cancelWriteAnswer = "cancel_write_answer",
            e.closeMyQuestions = "close_my_questions",
            e.openMyQuestionsFromUrl = "open_my_questions_from_url",
            e.openAskQuestionFromUrl = "open_ask_question_from_url",
            e.openMyQuestionsFromSnippet = "open_my_questions_from_snippet",
            e.openAskQuestionFromSnippet = "open_ask_question_from_snippet",
            e.openMyQuestionsFromStory = "open_my_questions_from_story",
            e.openAskQuestionFromStory = "open_ask_question_from_story"
        }(r || (r = {})),
        function(e) {
            e[e.askQuestion = 0] = "askQuestion",
            e[e.myQuestions = 1] = "myQuestions"
        }(i || (i = {}))
    }
    ,
    695690: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            var n, r = t.timeout, i = t.onLoad, o = t.onError, a = document.createElement("script");
            function s() {
                a.readyState && "loaded" !== a.readyState && "complete" !== a.readyState || (_(),
                i && i())
            }
            function c() {
                _(),
                o && o()
            }
            function _() {
                clearTimeout(n),
                a.removeEventListener("load", s),
                a.removeEventListener("readystatechange", s),
                a.removeEventListener("error", c)
            }
            return a.addEventListener("load", s),
            a.addEventListener("readystatechange", s),
            a.addEventListener("error", c),
            a.src = e,
            document.head.appendChild(a),
            r && (n = setTimeout(c, r)),
            {
                destroy: function() {
                    _()
                }
            }
        }
        n.d(t, {
            loadScript: ()=>r
        })
    }
    ,
    209509: (e,t,n)=>{
        "use strict";
        n.d(t, {
            CustomSentryErrorTypes: ()=>r,
            errorEventNames: ()=>o,
            moduleDetectionConfig: ()=>a,
            commonIgnoreErrors: ()=>s,
            PROTECTED_MODULE_NAME_TAG: ()=>c,
            topErrorModuleName: ()=>_,
            customBreadcrumbCategory: ()=>l,
            anonymousName: ()=>u,
            nativeCode: ()=>d,
            extensionPrefixes: ()=>p,
            Error: ()=>h,
            TypeError: ()=>m
        });
        var r, i = n(130360);
        !function(e) {
            e.ERROR_OF_EXTENSION = "ErrorOfExtension",
            e.KNOWN_ISSUE = "KnownIssue"
        }(r || (r = {}));
        var o = {
            0: "common_type_error",
            1: "static_load_error",
            3: "ajax_bad_response",
            4: "ajax_error_code",
            5: "ajax_parse_error",
            6: "nav_go_script_error",
            7: "eval_box_script_error",
            8: "eval_frame_script_error",
            100: "root_al_server_error",
            101: "html_audio_load_error",
            102: "photo_upload_error",
            103: "show_box_script_error"
        }
          , a = {
            some: {
                videoplayer: function(e) {
                    return null == e ? void 0 : e.some((function(e) {
                        return "dist/videoplayer_v2" === e.module
                    }
                    ))
                }
            },
            includes: {
                im: "web/imn",
                messenger: "bundles/fastchat_reforged",
                audioplayer: "bundles/audioplayer",
                videoplayer: "dist/videoplayer",
                stories: "web/stories",
                notifier: "web/notifier",
                articles: "web/article",
                market: "web/market",
                calls: "web/calls"
            }
        }
          , s = [/^AbortError:/]
          , c = "__protectedModuleName"
          , _ = "genericVkError"
          , l = "custom"
          , u = (0,
        i.getFunctionName)(void 0)
          , d = "[native code]"
          , p = ["chrome", "moz", "safari", "safari-web"].map((function(e) {
            return e + "-extension://"
        }
        ))
          , h = "Error"
          , m = "TypeError"
    }
    ,
    436878: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logError: ()=>o
        });
        var r = n(82991)
          , i = n(209509);
        function o(e, t) {
            var n = void 0 === t ? {} : t
              , o = n.breadcrumb
              , a = n.environment
              , s = n.hasDummyStacktrace
              , c = (0,
            r.getGlobalObject)();
            if (null == c ? void 0 : c.Sentry)
                return s && "object" == typeof e && (null == e ? void 0 : e.stack) && delete e.stack,
                c.Sentry.captureException(e, (function(e) {
                    var t, n, r = a || (null === (n = c.cur) || void 0 === n ? void 0 : n.module);
                    return r && e.setTags(((t = {
                        module: r
                    })[i.PROTECTED_MODULE_NAME_TAG] = !0,
                    t)),
                    o && e.addBreadcrumb({
                        message: o.message,
                        category: i.customBreadcrumbCategory,
                        data: o.data
                    }),
                    e
                }
                ))
        }
    }
    ,
    961540: (e,t,n)=>{
        "use strict";
        n.d(t, {
            VK_POSSIBLE_SITE_HOSTS: ()=>o,
            VK_SITE_REGEX_SOURCE_UNSAFE: ()=>s,
            VK_HOST_REGEX_UNSAFE: ()=>c,
            VK_HOST_REGEX_GROUP_UNSAFE: ()=>_,
            VK_DOMAIN_REGEX: ()=>u,
            VK_ORIGIN_REGEX: ()=>d,
            VK_ORIGIN_REGEX_STRICT: ()=>p,
            VK_ORIGIN_PREFIX_REGEX: ()=>h,
            VK_URL_REGEX: ()=>m,
            VK_URL_REGEX_STRICT: ()=>f,
            isMvk: ()=>g,
            getHostName: ()=>v,
            getVideoDuration: ()=>E,
            noop: ()=>y,
            getAverageRGB: ()=>w,
            loadImage: ()=>b,
            loadImages: ()=>C,
            loadFontFace: ()=>T,
            loadFontFacePromise: ()=>D
        });
        var r = n(570655)
          , i = n(40906)
          , o = ["vk.com", "vk.ru", v()].filter((function(e, t, n) {
            return n.indexOf(e) === t
        }
        ))
          , a = o.concat(["vkontakte.ru", "vk.me", "userapi.com"])
          , s = (0,
        i.escapeRE)(v())
          , c = new RegExp("(" + a.map(i.escapeRE).join("|") + ")")
          , _ = new RegExp(a.map(i.escapeRE).join("|"))
          , l = (new RegExp("^" + c.source + "$"),
        new RegExp("([a-zA-Z0-9\\.\\_\\-]+\\.)?" + c.source))
          , u = new RegExp("^" + l.source + "$")
          , d = new RegExp("^(https?:\\/\\/)?" + l.source + "$")
          , p = new RegExp("^(https?:\\/\\/)" + l.source + "$")
          , h = new RegExp("^(https?:\\/\\/)" + l.source)
          , m = new RegExp("^(https?:\\/\\/)?" + l.source + "($|\\/(.*))")
          , f = new RegExp("^(https?:\\/\\/)" + l.source + "($|\\/(.*))");
        function g() {
            return !!window.isMVK
        }
        function v() {
            var e;
            return (null === (e = ("undefined" != typeof window ? window : "undefined" != typeof self ? self : {}).vk) || void 0 === e ? void 0 : e.__domain) || "vk.com"
        }
        function E(e) {
            return void 0 === e && (e = ""),
            new Promise((function(t, n) {
                var r = document.createElement("video");
                r.addEventListener("loadedmetadata", (function() {
                    return t(r.duration)
                }
                ), {
                    once: !0
                }),
                r.addEventListener("error", n, {
                    once: !0
                }),
                r.crossOrigin = "anonymous",
                r.preload = "metadata",
                r.src = e
            }
            ))
        }
        var y = function() {};
        function w(e, t, n, r, i) {
            void 0 === t && (t = 0),
            void 0 === n && (n = 0);
            var o, a = {
                r: 0,
                g: 0,
                b: 0
            };
            r = r || e.canvas.width,
            i = i || e.canvas.height;
            try {
                o = e.getImageData(t, n, r, i)
            } catch (e) {
                return a
            }
            for (var s = -4, c = 0; (s += 20) < o.data.length; )
                ++c,
                a.r += o.data[s],
                a.g += o.data[s + 1],
                a.b += o.data[s + 2];
            return a.r = ~~(a.r / c),
            a.g = ~~(a.g / c),
            a.b = ~~(a.b / c),
            a
        }
        function b(e) {
            return new Promise((function(t, n) {
                var r = new Image;
                r.crossOrigin = e.startsWith("data:") ? null : "Anonymous",
                r.onerror = function() {
                    return n(new Error("Failed to load image's URL: " + e))
                }
                ,
                r.onload = function() {
                    return t(r)
                }
                ,
                r.src = e
            }
            ))
        }
        var C = function(e) {
            return new Promise((function(t) {
                var n = e.map((function(e) {
                    return b(e)
                }
                ));
                Promise.all(n).then((function(e) {
                    return t(e)
                }
                )).catch((function() {}
                ))
            }
            ))
        };
        function T(e, t) {
            var n, r, i, o, a, s, c, _, l = {
                normal: "400",
                500: "500",
                600: "600",
                bold: "700"
            }, u = {
                tolerance: 2,
                delay: 100,
                glyphs: "",
                success: function() {},
                error: function() {},
                timeout: 5e3,
                weight: "400",
                style: "normal"
            }, d = {
                display: "block",
                "font-size": "48px",
                "line-height": "normal",
                "font-variant": "normal",
                "white-space": "nowrap",
                position: "absolute",
                visibility: "hidden",
                top: "-9999px",
                left: "-9999px",
                width: "auto",
                height: "auto",
                margin: "0",
                padding: "0"
            };
            function p(e) {
                var t = [];
                return each(e, (function(e, n) {
                    t.push(e + ":" + n)
                }
                )),
                t.join(";")
            }
            function h(e, t, n) {
                return Math.abs(e.width - t.offsetWidth) > n || Math.abs(e.height - t.offsetHeight) > n
            }
            function m() {
                o || (utilsNode.appendChild(a),
                o = !0,
                i = {
                    sansSerif: {
                        width: c.offsetWidth,
                        height: c.offsetHeight
                    },
                    serif: {
                        width: s.offsetWidth,
                        height: s.offsetHeight
                    }
                },
                browser.opera && !browser.chrome ? (c.style.fontFamily = '"' + e + '", sans-serif',
                s.style.fontFamily = '"' + e + '", serif') : (setStyle(c, "font-family", '"' + e + '", sans-serif'),
                setStyle(s, "font-family", '"' + e + '", serif'))),
                o && i && (h(i.sansSerif, c, t.tolerance) || h(i.serif, s, t.tolerance)) ? (re(a),
                t.success()) : (new Date).getTime() - r.getTime() > t.timeout ? (re(a),
                t.error()) : !o && "requestAnimationFrame"in window ? window.requestAnimationFrame(m) : window.setTimeout(m, t.delay)
            }
            for (var f in u)
                t.hasOwnProperty(f) || (t[f] = u[f]);
            d["font-weight"] = t.weight,
            d["font-style"] = t.style,
            !t.glyphs && "fonts"in document ? (t.timeout && (n = setTimeout((function() {
                t.error()
            }
            ), t.timeout)),
            function(n) {
                each(null === document || void 0 === document ? void 0 : document.fonts, (function(r) {
                    r.family.toLowerCase() === e.toLowerCase() && (l[r.weight] || r.weight) === "" + t.weight && r.style === t.style && r.load().then((function() {
                        t.success(),
                        clearTimeout(n)
                    }
                    ))
                }
                ))
            }(n)) : (_ = "AxmTYklsjo190QW" + t.glyphs,
            r = new Date,
            a = ce("div"),
            c = ce("div", {
                innerHTML: _
            }),
            s = ce("div", {
                innerHTML: _
            }),
            c.setAttribute("style", p(extend({
                "font-family": "sans-serif"
            }, d))),
            s.setAttribute("style", p(extend({
                "font-family": "serif"
            }, d))),
            a.appendChild(c),
            a.appendChild(s),
            m())
        }
        function D(e, t) {
            return new Promise((function(n, i) {
                T(e, (0,
                r.__assign)((0,
                r.__assign)({}, t), {
                    glyphs: "",
                    success: function() {
                        var e = function() {
                            n(),
                            (null == t ? void 0 : t.success) && t.success()
                        };
                        browser.safari ? setTimeout(e, 150) : e()
                    },
                    error: function() {
                        i(),
                        (null == t ? void 0 : t.error) && t.error()
                    }
                }))
            }
            ))
        }
    }
    ,
    522683: (e,t,n)=>{
        "use strict";
        n.d(t, {
            vkLocalStorage: ()=>l,
            vkSessionStorage: ()=>p,
            bestAvailableStorage: ()=>m
        });
        var r, i = function() {
            function e() {
                var e = this;
                this.data = {},
                this.getItem = function(t) {
                    return e.data.hasOwnProperty(t) ? e.data[t] : null
                }
                ,
                this.keys = function() {
                    return Object.keys(e.data)
                }
            }
            return e.prototype.setItem = function(e, t) {
                this.data[e] = String(t)
            }
            ,
            e.prototype.removeItem = function(e) {
                delete this.data[e]
            }
            ,
            e.prototype.clear = function() {
                this.data = {}
            }
            ,
            Object.defineProperty(e.prototype, "length", {
                get: function() {
                    return Object.keys(this.data).length
                },
                enumerable: !1,
                configurable: !0
            }),
            e.prototype.key = function(e) {
                return Object.keys(this.data)[e]
            }
            ,
            e
        }(), o = "vk-ls-dummy", a = Math.random().toString();
        function s(e) {
            var t = !1;
            try {
                var n = window[e];
                n.setItem(o, a),
                t = a === n.getItem(o),
                n.removeItem(o)
            } catch (e) {
                return !1
            }
            return t
        }
        function c() {
            return r || (r = s("localStorage") ? window.localStorage : new i)
        }
        var _, l = {
            setItem: function(e, t) {
                return c().setItem(e, t)
            },
            getItem: function(e) {
                return c().getItem(e)
            },
            removeItem: function(e) {
                return c().removeItem(e)
            },
            clear: function() {
                return c().clear()
            },
            length: function() {
                return c().length
            },
            key: function(e) {
                return c().key(e)
            },
            keys: function() {
                var e = c();
                return e instanceof i ? e.keys() : Object.keys(e)
            },
            getPrefixedKeys: function(e) {
                return l.keys().filter((function(t) {
                    return t.startsWith(e)
                }
                ))
            }
        };
        function u() {
            return _ || (_ = s("sessionStorage") ? window.sessionStorage : new i)
        }
        var d, p = {
            setItem: function(e, t) {
                return u().setItem(e, t)
            },
            getItem: function(e) {
                return u().getItem(e)
            },
            removeItem: function(e) {
                return u().removeItem(e)
            },
            clear: function() {
                return u().clear()
            },
            length: function() {
                return u().length
            },
            key: function(e) {
                return u().key(e)
            },
            keys: function() {
                var e = u();
                return e instanceof i ? e.keys() : Object.keys(e)
            },
            getPrefixedKeys: function(e) {
                return p.keys().filter((function(t) {
                    return t.startsWith(e)
                }
                ))
            }
        };
        function h() {
            return d || (d = s("localStorage") ? window.localStorage : s("sessionStorage") ? window.sessionStorage : new i)
        }
        var m = {
            setItem: function(e, t) {
                return h().setItem(e, t)
            },
            getItem: function(e) {
                return h().getItem(e)
            },
            removeItem: function(e) {
                return h().removeItem(e)
            },
            clear: function() {
                return h().clear()
            },
            length: function() {
                return h().length
            },
            key: function(e) {
                return h().key(e)
            },
            keys: function() {
                var e = h();
                return e instanceof i ? e.keys() : Object.keys(e)
            },
            getPrefixedKeys: function(e) {
                return m.keys().filter((function(t) {
                    return t.startsWith(e)
                }
                ))
            }
        }
    }
    ,
    404291: (e,t,n)=>{
        "use strict";
        n.d(t, {
            saveStats: ()=>v
        });
        var r, i = n(570655), o = n(743672), a = n(155695), s = n(645611), c = n(961540), _ = n(862110), l = n(678276), u = n(228200), d = 1e4, p = 0, h = function() {
            return p * d
        }, m = function() {
            return !(Date.now() - (0,
            o.getLastSendTime)() > 45e3 + h())
        }, f = function() {
            return r = void 0
        }, g = function() {
            !0 !== r && (clearTimeout(r),
            r = window.setTimeout((function() {
                var e = (0,
                o.getWebStatDataLs)();
                f(),
                e.length > o.emptyStatsDataLs.length && v(e)
            }
            ), Math.max(d, (0,
            o.getLastSendTime)() + 45e3 - Date.now() + h())))
        };
        function v(e, t) {
            var n = e.length >= s.MAX_BODY_SIZE
              , h = (null == t ? void 0 : t.force) || n;
            return !h && (r || m() || e.length <= o.emptyStatsDataLs.length) ? ((0,
            a.logWebStatsEvent)("WebStats delayed.", r),
            g()) : (r = !0,
            function(e, t) {
                var n = function(t) {
                    return setTimeout((function() {
                        return e()
                    }
                    ), t)
                };
                return (null == t ? void 0 : t.force) ? n(0) : window.requestIdleCallback((function() {
                    return n(d)
                }
                ), {
                    timeout: 5e3
                })
            }((function() {
                var e = (0,
                o.getWebStatDataLs)();
                if (h || !0 === r && !m() && e.length > o.emptyStatsDataLs.length)
                    return (0,
                    o.setLastSendTime)(),
                    function(e) {
                        var t = window.vk.wsTransport + "/web-stats/" + (window.vk.statsMeta.st ? "s" : "p")
                          , n = e.length > s.MAX_BODY_SIZE
                          , r = n ? (0,
                        u.getMaximumWebStats)(e) : e
                          , i = !1;
                        if (!r)
                            return f(),
                            (0,
                            o.clearLsData)();
                        var a = new XMLHttpRequest;
                        a.withCredentials = t.includes("tau." + (0,
                        c.getHostName)()),
                        a.onreadystatechange = function() {
                            if (a.readyState === XMLHttpRequest.DONE) {
                                var t = Date.now();
                                a.status < 500 && (n && 200 === a.status ? Object.keys((0,
                                o.getEmptyStatsData)()).forEach((function(e) {
                                    return (0,
                                    _.pullFromWebStats)(e, r)
                                }
                                )) : (0,
                                o.clearLsData)(),
                                p = 0,
                                i = !0),
                                (n || 400 === a.status) && (0,
                                s.logProcessingTime)(Date.now() - t, (n ? "prune" : "clean") + (400 === a.status ? "-fail" : ""), (e.length >>> 20) + "M " + (r.length >>> 20) + "M"),
                                f(),
                                g()
                            }
                        }
                        ,
                        a.onerror = function() {
                            return !i && (0,
                            o.clearLsData)()
                        }
                        ,
                        a.open("POST", t, !0),
                        a.setRequestHeader("Content-Type", "application/json;charset=UTF-8"),
                        a.send((0,
                        l.pruneRequestFromStuckErrors)((0,
                        s.appendStatsMeta)(++p, r)))
                    }(e);
                clearTimeout(Number(r)),
                f(),
                g()
            }
            ), (0,
            i.__assign)((0,
            i.__assign)({}, t), {
                force: h
            })))
        }
    }
    ,
    228200: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getMaximumWebStats: ()=>a
        });
        var r = n(570655)
          , i = n(743672)
          , o = n(645611)
          , a = function(e) {
            var t = Date.now()
              , n = function(e) {
                return "{" + (null == e ? void 0 : e.map((function(e) {
                    var t = (0,
                    r.__read)(e, 2);
                    return '"' + t[0] + '":' + t[1]
                }
                )).join(",")) + "}"
            }
              , a = (0,
            r.__read)(Object.keys((0,
            i.getEmptyStatsData)()).reduce((function(t, n) {
                var o = (0,
                i.getWebStatsStringValue)(n, e);
                return "[]" === o ? t : (0,
                r.__spreadArray)((0,
                r.__spreadArray)([], (0,
                r.__read)(t)), [[n, o]])
            }
            ), []).sort((function(e, t) {
                var n = (0,
                r.__read)(e, 2)[1];
                return (0,
                r.__read)(t, 2)[1].length - n.length
            }
            )).reduce((function(e, t) {
                var i = (0,
                r.__read)(e, 2)
                  , a = i[0]
                  , s = i[1]
                  , c = (0,
                r.__read)(t, 2)
                  , _ = c[0]
                  , l = c[1]
                  , u = [[_, l]];
                return l.length + n(a).length < o.MAX_BODY_SIZE ? [a.concat(u), s] : [a, s.concat(u)]
            }
            ), [[], []]), 2)
              , s = a[0]
              , c = a[1]
              , _ = n(s);
            if ((0,
            o.logProcessingTime)(Date.now() - t, "chunk"),
            Date.now() - t < 500 && c[0] && _.length < .1 * o.MAX_BODY_SIZE) {
                var l = Date.now();
                try {
                    var u = function(e, t) {
                        var n = (0,
                        r.__read)(t, 2)
                          , i = n[0]
                          , a = n[1]
                          , s = '{"' + i + '":[' + JSON.parse(a).reduce((function(t, n, r) {
                            return t.length < o.MAX_BODY_SIZE - e.length ? t + (0 === r ? "" : ",") + JSON.stringify(n) : t
                        }
                        ), "") + "]}";
                        return "{}" === e ? s : (0,
                        o.concatJSONS)(e, s) || e
                    }(_, c.reverse()[0]);
                    return (0,
                    o.logProcessingTime)(Date.now() - l, "batch"),
                    u
                } catch (e) {
                    return (0,
                    o.logProcessingTime)(Date.now() - l, "batch-fail"),
                    ""
                }
            }
            return _
        }
    }
    ,
    171516: (e,t,n)=>{
        "use strict";
        n.d(t, {
            saveJsErrorLogs: ()=>r.saveJsErrorLogs,
            saveStatlogEvents: ()=>r.saveStatlogEvents,
            saveNetworkStats: ()=>r.saveNetworkStats,
            saveCustomStats: ()=>r.saveCustomStats,
            saveProductionStats: ()=>r.saveProductionStats
        });
        var r = n(862110)
    }
    ,
    645611: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MAX_BODY_SIZE: ()=>s,
            concatJSONS: ()=>_,
            appendStatsMeta: ()=>l,
            makeWebStatsRequest: ()=>u,
            logProcessingTime: ()=>d
        });
        var r = n(570655)
          , i = n(479957)
          , o = n(678276)
          , a = n(961540)
          , s = 1.8 * Math.pow(10, 6)
          , c = function(e) {
            return e.startsWith("{") && e.endsWith("}")
        }
          , _ = function(e, t) {
            return [e, t].every(c) ? e.slice(0, -1) + "," + t.substring(1) : "{}"
        }
          , l = function(e, t) {
            var n = window.vk
              , i = n.id
              , o = n.statsMeta
              , a = o.st
              , s = o.platform
              , l = (0,
            r.__rest)(o, ["st", "platform"]);
            return _(JSON.stringify({
                id: i,
                st: a,
                platform: s,
                attempt: e,
                signTime: l.time,
                sign: l.hash
            }), c(t) ? t : "{}")
        }
          , u = function(e, t) {
            return e = e || window.vk.wsTransport + "/web-stats/" + (window.vk.statsMeta.st ? "s" : "p"),
            new Promise((function(n, r) {
                var i = new XMLHttpRequest;
                i.open("POST", e),
                e.includes("tau." + (0,
                a.getHostName)()) && (i.withCredentials = !0),
                i.onload = function() {
                    return this.status >= 200 && this.status < 300 ? n(i.response) : r({
                        status: this.status,
                        statusText: i.statusText
                    })
                }
                ,
                i.onerror = function() {
                    return r({
                        status: this.status,
                        statusText: i.statusText
                    })
                }
                ,
                i.setRequestHeader("Content-Type", "application/json;charset=UTF-8"),
                i.send((0,
                o.pruneRequestFromStuckErrors)("string" == typeof t ? t : JSON.stringify(t)))
            }
            ))
        };
        function d(e, t, n) {
            (0,
            i.statlogsValueEvent)("web_stats_batching_time", e, window.vk.statsMeta.platform, t, n)
        }
    }
    ,
    862110: (e,t,n)=>{
        "use strict";
        n.d(t, {
            pullFromWebStats: ()=>l,
            saveJsErrorLogs: ()=>d,
            saveStatlogEvents: ()=>p,
            saveProductionStats: ()=>h,
            saveNetworkStats: ()=>m,
            saveCustomStats: ()=>f,
            saveStoryViewBaseStats: ()=>g,
            saveStoryViewStats: ()=>v,
            saveWebPerfStats: ()=>E
        });
        var r = n(570655)
          , i = n(743672)
          , o = n(950455)
          , a = n(155695)
          , s = n(19331)
          , c = n(404291)
          , _ = n(522683)
          , l = function(e, t) {
            var n = (0,
            i.getWebStatsStringValue)(e, t);
            if ("[]" !== n) {
                var r = (0,
                i.getWebStatDataLs)().replace(n.slice(1, -1), "").replace(/\[\,/, "[");
                (0,
                i.writeLocked)((function() {
                    return _.vkLocalStorage.setItem(i.lsDataKey, r)
                }
                ))
            }
        }
          , u = function(e, t, n, r) {
            if ((0,
            s.partConfigEnabled)("batchify_web_stats")) {
                var l = function(e, t) {
                    var n = (0,
                    i.getWebStatsStringValue)(e);
                    return (0,
                    i.getWebStatDataLs)().replace('"' + e + '":' + n, '"' + e + '":' + n.replace(/]$/, ("[]" === n ? "" : ",") + JSON.stringify(t) + "]"))
                }(t, n);
                (0,
                i.writeLocked)((function() {
                    return _.vkLocalStorage.setItem(i.lsDataKey, l)
                }
                )),
                (0,
                c.saveStats)(l, r)
            } else
                (0,
                i.writeLocked)((function() {
                    var e = (0,
                    i.fetchDataFromLs)().webStatsData;
                    e[t].push(n),
                    (0,
                    o.saveStats)(e)
                }
                ));
            (0,
            a.logWebStatsEvent)(e, n)
        }
          , d = function(e) {
            return u("saveJsErrorLogs", "jsErrorLogs", e)
        }
          , p = function(e) {
            var t = e.name
              , n = e.value
              , i = e.keys
              , o = void 0 === i ? [] : i
              , a = (0,
            r.__spreadArray)([Math.round(Number(Date.now()) / 1e3), t, n], (0,
            r.__read)(o));
            return (0,
            s.partConfigEnabled)("web_stats_transport_debugger") && console.log("Data was transformed!"),
            u("saveStatlogEvents", "statlogEvents", a)
        }
          , h = function(e, t) {
            return u("saveProductionStats", "productionStats", e, t)
        }
          , m = function(e) {
            return u("saveNetworkStats", "networkStats", e)
        }
          , f = function(e) {
            return u("saveCustomStats", "customStats", e)
        }
          , g = function(e) {
            return u("saveStoryViewStats", "storyViewStats", e)
        }
          , v = function(e) {
            return g(e)
        }
          , E = function(e) {
            return u("saveWebPerfStats", "webPerfStats", e)
        }
    }
    ,
    155695: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logWebStatsEvent: ()=>i
        });
        var r = n(19331);
        function i(e, t) {
            (0,
            r.partConfigEnabled)("web_stats_transport_debugger") && console.log("[new transport debug] " + e, t)
        }
    }
    ,
    743672: (e,t,n)=>{
        "use strict";
        n.d(t, {
            lsDataKey: ()=>a,
            getEmptyStatsData: ()=>_,
            emptyStatsDataLs: ()=>l,
            writeLocked: ()=>u,
            getWebStatDataLs: ()=>d,
            serializeDataToLs: ()=>p,
            getWebStatsStringValue: ()=>h,
            fetchDataFromLs: ()=>m,
            clearLsData: ()=>f,
            setLastSendTime: ()=>g,
            getLastSendTime: ()=>v,
            getWebStatsItemsCount: ()=>E
        });
        var r = n(522683)
          , i = n(155695)
          , o = (0,
        n(961540).isMvk)() ? "mvk" : "web"
          , a = "XHR_STATS_TRANSPORT_DATA_" + o
          , s = "XHR_STATS_TRANSPORT_META_" + o
          , c = "XHR_STATS_TRANSPORT_DATA_LOCK_" + o
          , _ = function() {
            return {
                jsErrorLogs: [],
                statlogEvents: [],
                productionStats: [],
                storyViewStats: [],
                networkStats: [],
                customStats: [],
                webPerfStats: []
            }
        }
          , l = JSON.stringify(_());
        function u(e) {
            if ("locked" !== r.vkSessionStorage.getItem(c)) {
                (0,
                i.logWebStatsEvent)("writeLocked", "lock"),
                r.vkSessionStorage.setItem(c, "locked");
                try {
                    e()
                } catch (e) {}
                return (0,
                i.logWebStatsEvent)("writeLocked", "free"),
                void r.vkSessionStorage.setItem(c, "free")
            }
            setTimeout((function() {
                return u(e)
            }
            ), 100)
        }
        var d = function() {
            return r.vkLocalStorage.getItem(a) || l
        }
          , p = function(e) {
            return r.vkLocalStorage.setItem(a, JSON.stringify(e))
        }
          , h = function(e, t) {
            var n;
            void 0 === t && (t = d());
            var r, i = Object.keys(_()).filter((function(t) {
                return t !== e
            }
            )).join("|"), o = (null === (n = null == t ? void 0 : t.match(new RegExp('"' + e + '":(\\[.*?\\])(?:,"(' + i + ')":\\[|}$)'))) || void 0 === n ? void 0 : n[1]) || "";
            return (r = o).startsWith("[") && r.endsWith("]") ? o : "[]"
        };
        function m() {
            var e, t = !0;
            try {
                var n = d();
                if (!n)
                    throw new Error("empty data");
                e = _();
                var r = JSON.parse(n);
                Object.keys(e).forEach((function(n) {
                    Array.isArray(r[n]) && (t = !1,
                    e[n] = r[n])
                }
                ))
            } catch (t) {
                e = _()
            }
            return {
                webStatsData: e,
                isEmpty: t
            }
        }
        function f(e) {
            e && (0,
            i.logWebStatsEvent)("WebStats cleared. " + (e ? "Reason: LS is broken." : ""), e),
            u((function() {
                return r.vkLocalStorage.setItem(a, "")
            }
            ))
        }
        function g(e) {
            void 0 === e && (e = Number(new Date)),
            r.vkSessionStorage.setItem(s, e.toString())
        }
        function v() {
            return parseInt("" + (r.vkSessionStorage.getItem(s) || 0))
        }
        function E(e) {
            return Object.values(e).reduce((function(e, t) {
                return e += t.length
            }
            ), 0)
        }
    }
    ,
    950455: (e,t,n)=>{
        "use strict";
        n.d(t, {
            saveStats: ()=>p
        });
        var r, i = n(570655), o = n(743672), a = n(155695), s = n(19331), c = n(645611), _ = 6e4, l = 12e4, u = 1;
        function d(e) {
            return !!(0,
            s.partConfigEnabled)("web_stats_send_on_events_limit") && (1 === u && (0,
            o.getWebStatsItemsCount)(e) > 300)
        }
        function p(e) {
            var t = +new Date
              , n = (0,
            o.getLastSendTime)();
            0 === n && (n = t,
            (0,
            o.setLastSendTime)(n));
            var i, c = t - n, u = c / 1e3, p = d(e);
            (0,
            a.logWebStatsEvent)("saveStats", {
                nowMs: t,
                lastTransferTimeMs: n,
                timePassed: u + "s",
                statsData: e
            }),
            (0,
            s.partConfigEnabled)("web_stats_debounce") ? ((0,
            o.serializeDataToLs)(e),
            i = function(e, t) {
                return t ? 0 : 0 === e || e > _ ? 3e3 : l
            }(c, p),
            window.clearTimeout(r),
            r = window.setTimeout((function() {
                return (0,
                o.writeLocked)((function() {
                    var e = (0,
                    o.fetchDataFromLs)().webStatsData
                      , t = +new Date;
                    m(e),
                    (0,
                    o.clearLsData)(),
                    (0,
                    o.setLastSendTime)(t)
                }
                ))
            }
            ), i)) : c > _ || p ? (m(e),
            (0,
            o.clearLsData)(),
            (0,
            o.setLastSendTime)(t)) : ((0,
            o.serializeDataToLs)(e),
            window.setTimeout(h, l))
        }
        function h() {
            (0,
            o.writeLocked)((function() {
                var e = (0,
                o.fetchDataFromLs)()
                  , t = e.webStatsData;
                e.isEmpty || p(t)
            }
            ))
        }
        function m(e) {
            (0,
            a.logWebStatsEvent)("send", e);
            var t = window.vk
              , n = t.id
              , r = t.wsTransport
              , s = t.statsMeta
              , _ = r + (window.vk && window.vk.statsMeta && window.vk.statsMeta.st ? "/web-stats/s" : "/web-stats/p")
              , l = (0,
            i.__assign)((0,
            i.__assign)({}, e), {
                id: n,
                st: s.st,
                platform: s.platform,
                signTime: s.time,
                sign: s.hash,
                attempt: u
            });
            (0,
            c.makeWebStatsRequest)(_, l).then((function(e) {
                (0,
                a.logWebStatsEvent)("sendStats success", e),
                u = 1
            }
            )).catch((function(t) {
                return u++,
                (0,
                o.writeLocked)((function() {
                    (0,
                    a.logWebStatsEvent)("sendStats try", u),
                    p(e)
                }
                )),
                (0,
                a.logWebStatsEvent)("sendStats error", t),
                !0
            }
            )),
            (0,
            o.setLastSendTime)(+new Date)
        }
    }
    ,
    587077: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MarketItemsMapStats: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productionStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productionStatCollector),
                this.navigationStatCollector = new i.NavigationStatCollector(this.productionStatCollector)
            }
            return e.prototype.sendNavEvent = function(e) {
                var t, n = ((t = {
                    type: r.NavigationProductionStatEventTypes.TYPE_SERVICES_MAP_NAVGO,
                    screen: "uslugi",
                    subtype: r.NavigationProductionStatEventTypes.GO
                })[r.NavigationProductionStatEventTypes.TYPE_SERVICES_MAP_NAVGO] = e,
                t);
                this.navigationStatCollector.logEvent(n)
            }
            ,
            e.prototype.sendActionEvent = function(e) {
                var t, n = ((t = {
                    type: r.ActionProductionStatEventTypes.TYPE_SERVICES_MAP_ITEM
                })[r.ActionProductionStatEventTypes.TYPE_SERVICES_MAP_ITEM] = e,
                t);
                this.actionStatCollector.logEvent(n)
            }
            ,
            e
        }()
    }
    ,
    749410: (e,t,n)=>{
        "use strict";
        n.d(t, {
            WEB_VITALS_RAND_ENABLED_FOR: ()=>c,
            NAV_TIME_RAND_ENABLED_FOR: ()=>_,
            WEB_VITALS_THROTTLE_FOR: ()=>l,
            NAV_TIME_THROTTLE_FOR: ()=>u,
            MAX_THROTTLE_PERIOD: ()=>d,
            IGNORED_MODULES: ()=>p,
            getWebVitalsTimeOf: ()=>h
        });
        var r = n(570655)
          , i = (0,
        n(961540).isMvk)()
          , o = Object.entries((0,
        r.__assign)({
            apps: .5,
            game: .5,
            mini_app: .5,
            audio: .2,
            board: .5,
            feed: i ? .01 : .005,
            friends: .3,
            groups_list: .3,
            photos: .3,
            video: .2,
            wall: .1
        }, i ? {
            activation: .1,
            article_webview: .1,
            group: .05,
            "i-oauth": .05,
            join: .25,
            like: .5,
            login: .2,
            mail: .02,
            menu: .05,
            notifications: .3,
            recommended: .3,
            search: .4
        } : {
            ads: .5,
            groups: .1,
            im: .025,
            public: .07
        })).reduce((function(e, t) {
            var n, i, o = (0,
            r.__read)(t, 2), a = o[0], s = o[1];
            return {
                RAND_ENABLED_OF: (0,
                r.__assign)((0,
                r.__assign)({}, e.RAND_ENABLED_OF), (n = {},
                n[a] = s,
                n)),
                THROTTLE_PERIOD_OF: (0,
                r.__assign)((0,
                r.__assign)({}, e.THROTTLE_PERIOD_OF), (i = {},
                i[a] = 288e5,
                i))
            }
        }
        ), {
            RAND_ENABLED_OF: {},
            THROTTLE_PERIOD_OF: {}
        })
          , a = o.RAND_ENABLED_OF
          , s = o.THROTTLE_PERIOD_OF
          , c = (0,
        r.__assign)((0,
        r.__assign)((0,
        r.__assign)({}, a), i ? {
            payments: .2
        } : {}), {
            pages: i ? .02 : .5,
            profile: i ? .03 : .01
        })
          , _ = (0,
        r.__assign)((0,
        r.__assign)((0,
        r.__assign)({}, a), i ? {
            index: .05
        } : {
            groups_list: .15
        }), {
            audio: .15,
            bookmarks: .3,
            feed: .15,
            friends: .15,
            profile: .02,
            video: i ? .01 : .2
        })
          , l = (0,
        r.__assign)({}, s)
          , u = (0,
        r.__assign)({}, s)
          , d = Math.max.apply(Math, (0,
        r.__spreadArray)([], (0,
        r.__read)(Object.values(s))))
          , p = ["app", "docs", "wall_donut", "unknown", "invite", "wall_archive", "support", "helpdesk", "abuse", "noSpam", "sf"]
          , h = function(e, t) {
            var n = "poor" === e;
            return "perfect" === e && "CLS" !== t ? 16 : {
                FID: n ? 300 : 100,
                LCP: n ? 4e3 : 2500,
                CLS: n ? .25 : .1,
                TTFB: n ? 600 : 200,
                FCP: n ? 3e3 : 1800
            }[t]
        }
    }
    ,
    274181: (e,t,n)=>{
        "use strict";
        n.d(t, {
            metricOnCoolDown: ()=>d,
            updateMetricTimestamp: ()=>p,
            pruneMetricTimestamps: ()=>h,
            shouldBeMeasured: ()=>m
        });
        var r = n(522683)
          , i = n(749410)
          , o = n(19331)
          , a = n(961540)
          , s = n(649846)
          , c = (0,
        a.isMvk)() ? "MVK" : "WEB"
          , _ = "PERF_METRICS_TIMESTAMPS_" + c
          , l = s.navigationStat.getModule
          , u = function() {
            var e = {};
            try {
                e = JSON.parse(r.vkLocalStorage.getItem(_) || "{}")
            } catch (e) {}
            return e
        }
          , d = function(e, t) {
            var n, r = l();
            return ((null === (n = u()[r]) || void 0 === n ? void 0 : n[t]) || 0) + e[r] >= Date.now()
        }
          , p = function(e) {
            var t = l()
              , n = Date.now()
              , i = u();
            i[t] || (i[t] = {}),
            i[t][e] = n,
            i.updatedAt = n,
            r.vkLocalStorage.setItem(_, JSON.stringify(i))
        }
          , h = function() {
            return window.requestIdleCallback((function() {
                var e, t, n = ["WEB_VITALS_TIMESTAMPS_" + c, "NAV_DURATION_TIMESTAMPS_" + c], o = Number(null === (t = null === (e = r.vkLocalStorage.getItem(_)) || void 0 === e ? void 0 : e.match(/"updatedAt":([0-9]+)/)) || void 0 === t ? void 0 : t[1]);
                !isNaN(o) && Date.now() > o + i.MAX_THROTTLE_PERIOD && (r.vkLocalStorage.removeItem(_),
                n.forEach((function(e) {
                    return r.vkLocalStorage.removeItem(e)
                }
                )))
            }
            ), {
                timeout: 5e3
            })
        }
          , m = function(e) {
            var t = l()
              , n = e[t] || 1;
            return !i.IGNORED_MODULES.includes(t) && (0,
            o.randEnabled)(n)
        }
    }
    ,
    649846: (e,t,n)=>{
        "use strict";
        n.d(t, {
            NavigationProductionStatEventTypes: ()=>r.NavigationProductionStatEventTypes,
            navigationStat: ()=>o
        });
        var r = n(214547)
          , i = new r.ProductionStatCollector
          , o = new r.NavigationStatCollector(i)
    }
    ,
    208055: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AudioNetworkStatCollector: ()=>i
        });
        var r = n(962148)
          , i = function() {
            function e(e) {
                this.networkStatCollector = e
            }
            return e.prototype.logEvent = function(e, t, n) {
                var i, o = ((i = {
                    network_type: t,
                    network_effective_type: n,
                    type: r.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM
                })[r.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM] = e,
                i);
                this.networkStatCollector.logEvent(o)
            }
            ,
            e
        }()
    }
    ,
    830648: (e,t,n)=>{
        "use strict";
        n.d(t, {
            NetworkStatCollector: ()=>r.NetworkStatCollector,
            NetworkStatCollectorInstance: ()=>r.NetworkStatCollectorInstance,
            AudioNetworkStatCollector: ()=>i.AudioNetworkStatCollector,
            AudioNetworkType: ()=>o.AudioNetworkType
        });
        var r = n(639101)
          , i = n(208055)
          , o = n(962148)
    }
    ,
    816426: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ModuleNavigationStatMarks: ()=>c,
            ModuleNavigationStatCollector: ()=>_
        });
        var r = n(962148)
          , i = n(760847)
          , o = n(649846)
          , a = n(749410)
          , s = n(274181)
          , c = {
            web2: {
                PERF_MARK: "__navmark",
                PERF_MEASURE: "__navmeasure"
            },
            mvk: {
                PERF_MARK: "__navmark_mvk",
                PERF_MEASURE: "__navmeasure_mvk"
            }
        }
          , _ = function() {
            function e(e) {
                this.LS_ALREADY_PRUNED = !1,
                this.moduleNavigationStatCollector = e
            }
            return e.clearPerformanceMeasures = function(e) {
                var t = c[e]
                  , n = t.PERF_MARK
                  , r = t.PERF_MEASURE;
                "performance"in window && (window.performance.clearMeasures(r),
                window.performance.clearMarks(n))
            }
            ,
            e.prototype.logEvent = function() {
                var t, n, _, l, u, d = "mvk" === (null === (_ = null === (n = window.vk) || void 0 === n ? void 0 : n.statsMeta) || void 0 === _ ? void 0 : _.platform) ? "mvk" : "web2", p = i.default.getConnectionEffectiveType();
                try {
                    var h = c[d]
                      , m = h.PERF_MARK
                      , f = h.PERF_MEASURE;
                    window.performance.measure(f, m),
                    u = null === (l = window.performance.getEntriesByType("measure").find((function(e) {
                        return e.name === f
                    }
                    ))) || void 0 === l ? void 0 : l.duration
                } catch (e) {}
                if (e.clearPerformanceMeasures(d),
                u && (0,
                s.shouldBeMeasured)(a.NAV_TIME_RAND_ENABLED_FOR) && !(0,
                s.metricOnCoolDown)(a.NAV_TIME_THROTTLE_FOR, e.PERF_METRIC_NAME))
                    return (0,
                    s.updateMetricTimestamp)(e.PERF_METRIC_NAME),
                    this.moduleNavigationStatCollector.logEvent(((t = {
                        network_type: "UNKNOWN",
                        network_effective_type: p,
                        type: r.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM
                    })[r.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM] = {
                        module: o.navigationStat.getModule(),
                        value: Math.round(u).toString()
                    },
                    t));
                this.LS_ALREADY_PRUNED || (this.LS_ALREADY_PRUNED = !0,
                (0,
                s.pruneMetricTimestamps)())
            }
            ,
            e.PERF_METRIC_NAME = "NAV",
            e
        }()
    }
    ,
    639101: (e,t,n)=>{
        "use strict";
        n.d(t, {
            NetworkStatCollector: ()=>o,
            NetworkStatCollectorInstance: ()=>a
        });
        var r = n(66433)
          , i = n(171516)
          , o = function() {
            function e() {}
            return e.prototype.logEvent = function(e) {
                e.type && e[e.type] ? (0,
                i.saveNetworkStats)(e) : (0,
                r.logError)(new Error("NetworkStatCollector: invalid event."))
            }
            ,
            e
        }()
          , a = new o
    }
    ,
    962148: (e,t,n)=>{
        "use strict";
        var r, i;
        n.d(t, {
            NetworkStatEventTypes: ()=>r,
            AudioNetworkType: ()=>i
        }),
        function(e) {
            e.TYPE_NETWORK_AUDIO_ITEM = "type_network_audio_item",
            e.TYPE_MODULE_NAVIGATION_STATS_ITEM = "type_module_navigation_stats_item"
        }(r || (r = {})),
        function(e) {
            e.FRAGMENT_LOADED = "fragment_loaded",
            e.FRAGMENT_STALLED = "fragment_stalled"
        }(i || (i = {}))
    }
    ,
    379746: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ActionStatCollector: ()=>o
        });
        var r = n(570655)
          , i = n(740517)
          , o = function() {
            function e(e) {
                this.productionStatCollector = e
            }
            return e.prototype.logEvent = function(e, t) {
                var n, o = (0,
                r.__assign)((0,
                r.__assign)({}, this.productionStatCollector.getBaseEvent()), ((n = {
                    type: i.ProductionStatEventTypes.TYPE_ACTION
                })[i.ProductionStatEventTypes.TYPE_ACTION] = e,
                n));
                this.productionStatCollector.logEvent(o, t)
            }
            ,
            e
        }()
    }
    ,
    920353: (e,t,n)=>{
        "use strict";
        n.d(t, {
            AdMiniAppsEventStatsCollector: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t) {
                var n, i = {
                    mini_app_id: e,
                    event: t
                }, o = ((n = {
                    type: r.ActionProductionStatEventTypes.TYPE_AD_MINI_APPS_EVENT_ITEM
                })[r.ActionProductionStatEventTypes.TYPE_AD_MINI_APPS_EVENT_ITEM] = i,
                n);
                this.actionStatCollector.logEvent(o)
            }
            ,
            e
        }()
    }
    ,
    746991: (e,t,n)=>{
        "use strict";
        n.d(t, {
            BridgeEventStatsCollector: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t, n, i) {
                var o, a = {
                    webview_url: e,
                    mini_app_id: t,
                    event: n,
                    error: i
                }, s = ((o = {
                    type: r.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM
                })[r.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM] = a,
                o);
                this.actionStatCollector.logEvent(s)
            }
            ,
            e
        }()
    }
    ,
    410067: (e,t,n)=>{
        "use strict";
        n.d(t, {
            EasterEggsItemStatCollector: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t, n, i) {
                var o, a = {
                    egg_id: e,
                    egg_event_id: t,
                    position_id: n,
                    event_type: i
                }, s = ((o = {
                    type: r.ActionProductionStatEventTypes.TYPE_EASTER_EGGS_ITEM
                })[r.ActionProductionStatEventTypes.TYPE_EASTER_EGGS_ITEM] = a,
                o);
                this.actionStatCollector.logEvent(s)
            }
            ,
            e
        }()
    }
    ,
    787486: (e,t,n)=>{
        "use strict";
        n.d(t, {
            GamesJsSDKEventStatsCollector: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t) {
                var n, i = {
                    app_id: e,
                    event_name: t
                }, o = ((n = {
                    type: r.ActionProductionStatEventTypes.TYPE_GAMES_JS_SDK_ITEM
                })[r.ActionProductionStatEventTypes.TYPE_GAMES_JS_SDK_ITEM] = i,
                n);
                this.actionStatCollector.logEvent(o)
            }
            ,
            e
        }()
    }
    ,
    124896: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MarketingTransitionItemStatCollector: ()=>a
        });
        var r = n(740517)
          , i = n(214547)
          , o = n(376567)
          , a = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.actionStatCollector = new i.ActionStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t, n, i) {
                var a;
                void 0 === i && (i = "");
                var s = {
                    campaign: e,
                    source: n,
                    event: t,
                    unauth_id: (0,
                    o.getCookie)("remixstid")
                };
                i && (s.url = i);
                var c = ((a = {
                    type: r.ActionProductionStatEventTypes.TYPE_MARKETING_TRANSITION_ITEM
                })[r.ActionProductionStatEventTypes.TYPE_MARKETING_TRANSITION_ITEM] = s,
                a);
                this.actionStatCollector.logEvent(c)
            }
            ,
            e
        }()
    }
    ,
    230818: (e,t,n)=>{
        "use strict";
        n.d(t, {
            VkConnectNavigationCollector: ()=>a
        });
        var r = n(570655)
          , i = n(740517)
          , o = n(214547)
          , a = function() {
            function e() {
                this.lastNavEventId = 0,
                this.productionStatCollector = new o.ProductionStatCollector
            }
            return e.prototype.logEvent = function(e, t) {
                var n, o, a = this.productionStatCollector.getBaseEvent(), s = (0,
                r.__assign)((0,
                r.__assign)({}, a), ((n = {
                    screen: "main",
                    prev_nav_id: this.lastNavEventId,
                    prev_event_id: a.prev_id || 0,
                    type: i.ProductionStatEventTypes.TYPE_ACTION
                })[i.ProductionStatEventTypes.TYPE_ACTION] = ((o = {
                    type: i.ActionProductionStatEventTypes.TYPE_VK_CONNECT_NAVIGATION_ITEM
                })[i.ActionProductionStatEventTypes.TYPE_VK_CONNECT_NAVIGATION_ITEM] = e,
                o),
                n));
                this.lastNavEventId = s.id,
                this.productionStatCollector.logEvent(s, t)
            }
            ,
            e.prototype.logServiceNavigationOpen = function(e) {
                this.logEvent({
                    event_type: i.IVkConnectNavigationItemEventType.SERVICE_NAVIGATION_OPEN,
                    fields: e
                })
            }
            ,
            e.prototype.logServiceNavigationClose = function(e) {
                this.logEvent({
                    event_type: i.IVkConnectNavigationItemEventType.SERVICE_NAVIGATION_CLOSE,
                    fields: e
                })
            }
            ,
            e.prototype.logServiceNavigationClick = function(e, t, n) {
                this.logEvent({
                    event_type: i.IVkConnectNavigationItemEventType.SERVICE_NAVIGATION_CLICK,
                    fields: [{
                        name: e,
                        str_value: t,
                        int_value: n
                    }]
                })
            }
            ,
            e.prototype.logAccountActionsOpen = function(t) {
                var n = {
                    event_type: i.IVkConnectNavigationItemEventType.POPUP_OPEN
                };
                e.addFlowTypeIfFeatureExists(n, t),
                this.logEvent(n)
            }
            ,
            e.prototype.logAccountActionsClose = function(t) {
                var n = {
                    event_type: i.IVkConnectNavigationItemEventType.POPUP_CLOSE
                };
                e.addFlowTypeIfFeatureExists(n, t),
                this.logEvent(n)
            }
            ,
            e.prototype.logAccountActionsEnterLk = function(t, n) {
                void 0 === t && (t = "account_actions");
                var r = {
                    event_type: i.IVkConnectNavigationItemEventType.CLICK_ENTER_LK,
                    flow_service: t
                };
                e.addFlowTypeIfFeatureExists(r, n),
                this.logEvent(r)
            }
            ,
            e.prototype.logAccountActionsVkPay = function(e) {
                void 0 === e && (e = "account_actions"),
                this.logEvent({
                    event_type: i.IVkConnectNavigationItemEventType.CLICK_VK_PAY,
                    flow_service: e
                })
            }
            ,
            e.prototype.logAccountActionsVkCombo = function(e) {
                void 0 === e && (e = "account_actions"),
                this.logEvent({
                    event_type: i.IVkConnectNavigationItemEventType.CLICK_VK_COMBO,
                    flow_service: e
                })
            }
            ,
            e.addFlowTypeIfFeatureExists = function(e, t) {
                t && Object.assign(e, {
                    flow_type: t
                })
            }
            ,
            e
        }()
    }
    ,
    914443: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ClickStatCollector: ()=>o
        });
        var r = n(570655)
          , i = n(740517)
          , o = function() {
            function e(e) {
                this.productionStatCollector = e
            }
            return e.prototype.logEvent = function(e, t) {
                var n, o = (0,
                r.__assign)((0,
                r.__assign)({}, this.productionStatCollector.getBaseEvent()), ((n = {
                    type: i.ProductionStatEventTypes.TYPE_CLICK
                })[i.ProductionStatEventTypes.TYPE_CLICK] = (0,
                r.__assign)({
                    item: t
                }, e),
                n));
                this.productionStatCollector.logEvent(o)
            }
            ,
            e
        }()
    }
    ,
    145268: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ProfileActionButtonCollector: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.clickStatCollector = new i.ClickStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t) {
                var n, i = {
                    type: e
                }, o = ((n = {
                    type: r.ClickProductionStatEventTypes.TYPE_PROFILE_ACTION_BUTTON_ITEM
                })[r.ClickProductionStatEventTypes.TYPE_PROFILE_ACTION_BUTTON_ITEM] = i,
                n);
                this.clickStatCollector.logEvent(o, {
                    id: t,
                    type: r.EventItemType.MINI_APP
                })
            }
            ,
            e
        }()
    }
    ,
    271121: (e,t,n)=>{
        "use strict";
        n.d(t, {
            VkAppsActionMenuStatsCollector: ()=>o
        });
        var r = n(740517)
          , i = n(214547)
          , o = function() {
            function e() {
                this.productStatCollector = new i.ProductionStatCollector,
                this.clickStatCollector = new i.ClickStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t, n) {
                var i, o = {
                    type: n
                }, a = ((i = {
                    type: r.ClickProductionStatEventTypes.TYPE_MINI_APP_ITEM
                })[r.ClickProductionStatEventTypes.TYPE_MINI_APP_ITEM] = o,
                i), s = {
                    type: t,
                    id: e
                };
                this.clickStatCollector.logEvent(a, s)
            }
            ,
            e
        }()
    }
    ,
    309195: (e,t,n)=>{
        "use strict";
        var r, i;
        n.d(t, {
            DonutActionEventType: ()=>r,
            DonutActionEventScreen: ()=>i
        }),
        function(e) {
            e.PAYMENT_FORM = "payment_form",
            e.PAYMENT_FORM_CLICK_OFFER = "payment_form_click_offer",
            e.PAYMENT_FORM_CLICK_PAY = "payment_form_click_pay",
            e.PAYMENT_FORM_CLICK_CLOSE = "payment_form_click_close",
            e.PAYMENT_FORM_CHANGE_CLICK_CHANGE = "payment_form_change_click_change",
            e.CLICK_SHOW_MORE = "click_show_more",
            e.WIDGET_VIEW = "widget_view",
            e.DESCRIPTION_VIEW = "description_view"
        }(r || (r = {})),
        function(e) {
            e.PAYMENT_START = "payment_start",
            e.DATA_ACCESS = "data_access",
            e.RESULT_PAYMENT_SUCCESS_OK = "result_payment_success_ok",
            e.RESULT_PAYMENT_SUCCESS_WAITING = "result_payment_success_waiting",
            e.RESULT_PAYMENT_SUCCESS_WAITING_TIMEOUT = "result_payment_success_waiting_timeout",
            e.RESULT_RESUB_SUCCESS_WAITING = "result_resub_success_waiting",
            e.RESULT_RESUB_SUCCESS_WAITING_OK = "result_resub_success_waiting_ok",
            e.RESULT_PAYMENT_UNAVAILABLE = "result_payment_unavailable",
            e.RESULT_PAYMENT_CANCEL = "result_payment_cancel",
            e.RESULT_ERROR = "result_error",
            e.CHANGE_START = "change_start",
            e.RESULT_CHANGE_ERROR = "result_change_error",
            e.RESULT_CHANGE_SUCCESS_OK = "result_change_success_ok",
            e.RESULT_CHANGE_SUCCESS_WAITING = "result_change_success_waiting",
            e.RESULT_CHANGE_SUCCESS_WAITING_TIMEOUT = "result_change_success_waiting_timeout",
            e.RESULT_CHANGE_UNAVAILABLE = "result_change_unavailable",
            e.UNKNOWN = "donut_payment_screen_unknown"
        }(i || (i = {}))
    }
    ,
    214547: (e,t,n)=>{
        "use strict";
        n.d(t, {
            NavigationStatCollector: ()=>p.NavigationStatCollector,
            ProductionStatCollector: ()=>h.ProductionStatCollector,
            ActionStatCollector: ()=>m.ActionStatCollector,
            ClickStatCollector: ()=>f.ClickStatCollector,
            ViewStatCollector: ()=>g.ViewStatCollector,
            RegistrationItemStatCollector: ()=>v.RegistrationItemStatCollector,
            NavigationProductionStatEventTypes: ()=>E.NavigationProductionStatEventTypes,
            RegistrationFieldItemNames: ()=>E.RegistrationFieldItemNames,
            RegistrationItemEventTypes: ()=>E.RegistrationItemEventTypes,
            EventScreens: ()=>E.EventScreens,
            EventFieldValues: ()=>E.EventFieldValues,
            marketingTransitionItemStat: ()=>y,
            easterEggsItemStat: ()=>w,
            bridgeEventItemStat: ()=>b,
            adMiniAppsEventItemStat: ()=>C,
            miniAppsItemStats: ()=>T,
            vkConnectNavigationCollector: ()=>D,
            gamesJsSDKEventStatsCollector: ()=>A,
            marketItemsMapStats: ()=>S,
            profileActionButtonCollector: ()=>P
        });
        var r = n(124896)
          , i = n(746991)
          , o = n(410067)
          , a = n(271121)
          , s = n(210759)
          , c = n(230818)
          , _ = n(920353)
          , l = n(787486)
          , u = n(587077)
          , d = n(145268)
          , p = n(725623)
          , h = n(278964)
          , m = n(379746)
          , f = n(914443)
          , g = n(834404)
          , v = n(924293)
          , E = n(740517)
          , y = new r.MarketingTransitionItemStatCollector
          , w = new o.EasterEggsItemStatCollector
          , b = new i.BridgeEventStatsCollector
          , C = new _.AdMiniAppsEventStatsCollector
          , T = (new a.VkAppsActionMenuStatsCollector,
        new s.MiniAppsEventStatsCollector)
          , D = new c.VkConnectNavigationCollector
          , A = new l.GamesJsSDKEventStatsCollector
          , S = new u.MarketItemsMapStats
          , P = new d.ProfileActionButtonCollector
    }
    ,
    725623: (e,t,n)=>{
        "use strict";
        n.d(t, {
            NavigationStatCollector: ()=>s
        });
        var r = n(570655)
          , i = n(740517)
          , o = n(66433)
          , a = n(19331)
          , s = function() {
            function e(e) {
                this.ProductionStatCollector = e,
                this.tabId = this.ProductionStatCollector.getIntId() % 128
            }
            return e.prototype.logEvent = function(e) {
                var t, n = (0,
                r.__assign)((0,
                r.__assign)({}, this.ProductionStatCollector.getBaseEvent()), ((t = {
                    type: i.ProductionStatEventTypes.TYPE_NAVGO
                })[i.ProductionStatEventTypes.TYPE_NAVGO] = e,
                t));
                return this.ProductionStatCollector.logEvent(n),
                {
                    statEvent: n
                }
            }
            ,
            e.prototype.getEventTabOpen = function(e) {
                return {
                    subtype: i.NavigationProductionStatEventTypes.TAB_OPEN,
                    tab_id: this.tabId,
                    screen: e
                }
            }
            ,
            e.prototype.getEventMove = function(e, t) {
                var n, r, a = this.lastStatEvents, s = this.lastNavEvents;
                return a && s ? (s.subtype === i.NavigationProductionStatEventTypes.TAB_OPEN ? n = s.screen : (n = s.screen_to,
                r = s.screen),
                {
                    prev_navgo_id: a.id,
                    subtype: t,
                    screen: n,
                    screen_to: e,
                    screen_prev: r,
                    prev_navgo_timestamp: a.timestamp,
                    tab_id: this.tabId
                }) : ((0,
                o.logError)(new Error("NavigationStatCollector: previous event not found.")),
                null)
            }
            ,
            e.prototype.addStatEvent = function(e, t) {
                if (void 0 === t && (t = i.NavigationProductionStatEventTypes.GO),
                (0,
                a.partConfigEnabled)("navigation_timespent")) {
                    var n;
                    if (t === i.NavigationProductionStatEventTypes.TAB_OPEN)
                        n = this.getEventTabOpen(e);
                    else {
                        var r = this.getEventMove(e, t);
                        if (!r)
                            return;
                        n = r
                    }
                    var o = this.logEvent(n).statEvent;
                    this.lastStatEvents = o,
                    this.lastNavEvents = n
                }
            }
            ,
            e.prototype.getModule = function() {
                var e, t;
                return null !== (t = null === (e = window.cur) || void 0 === e ? void 0 : e.module) && void 0 !== t ? t : "unknown"
            }
            ,
            e
        }()
    }
    ,
    278964: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ProductionStatCollector: ()=>a
        });
        var r = n(66433)
          , i = n(22463)
          , o = n(171516)
          , a = function() {
            function e() {
                this.DEBUG = !1
            }
            return e.prototype.getCurrentTime = function(e) {
                void 0 === e && (e = !0);
                var t = Date.now().toString(10);
                return e ? t + "000" : t
            }
            ,
            e.prototype.getIntId = function() {
                return Math.floor(Math.random() * e.MAX_INT32)
            }
            ,
            e.prototype.logEvent = function(e, t) {
                this.DEBUG && (0,
                i.log)(e),
                e.type && e[e.type] ? ((0,
                o.saveProductionStats)(e, t),
                this.lastEvent = e) : (0,
                r.logError)(new Error("ProductionStatCollector: invalid event."))
            }
            ,
            e.prototype.getLastEvent = function() {
                return this.lastEvent
            }
            ,
            e.prototype.getBaseEvent = function() {
                var e;
                return {
                    id: this.getIntId(),
                    prev_id: null === (e = this.lastEvent) || void 0 === e ? void 0 : e.id,
                    timestamp: this.getCurrentTime(),
                    url: window.location.href
                }
            }
            ,
            e.MAX_INT32 = 2147483647,
            e
        }()
    }
    ,
    924293: (e,t,n)=>{
        "use strict";
        n.d(t, {
            RegistrationItemStatCollector: ()=>s
        });
        var r = n(570655)
          , i = n(740517)
          , o = n(19331)
          , a = n(376567)
          , s = function() {
            function e(e) {
                this.actionStatCollector = e,
                this.fields = {}
            }
            return e.prototype.logFieldInteraction = function(e, t, n) {
                void 0 === n && (n = !1),
                [i.RegistrationFieldItemNames.PASSWORD, i.RegistrationFieldItemNames.SMS_CODE, i.RegistrationFieldItemNames.RULES_ACCEPT].includes(e) && (t = t ? "1" : "0");
                var r = n ? "0" : this.actionStatCollector.productionStatCollector.getCurrentTime(!1)
                  , o = this.fields[e];
                o ? (o.value = t,
                o.end_interaction_time = r) : this.fields[e] = {
                    name: e,
                    value: t,
                    start_interaction_time: r,
                    end_interaction_time: r
                }
            }
            ,
            e.prototype.getFieldInteractions = function() {
                return Object.values(this.fields)
            }
            ,
            e.prototype.resetFieldInteractions = function() {
                var e, t;
                try {
                    for (var n = (0,
                    r.__values)(Object.getOwnPropertyNames(this.fields)), i = n.next(); !i.done; i = n.next()) {
                        var o = i.value;
                        delete this.fields[o]
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        i && !i.done && (t = n.return) && t.call(n)
                    } finally {
                        if (e)
                            throw e.error
                    }
                }
            }
            ,
            e.prototype.logEvent = function(e, t, n, r) {
                var s, c;
                if ((0,
                o.partConfigEnabled)("registration_item_stat")) {
                    var _ = {
                        event_type: e,
                        screen: t,
                        unauth_id: (0,
                        o.partConfigEnabled)("unauth_id_long_new_cookie_parse_in_registration") && null !== (c = (0,
                        a.getCookie)("remixstlid")) && void 0 !== c ? c : (0,
                        a.getCookie)("remixstid"),
                        sid: (0,
                        a.getCookie)("remixnreg_sid")
                    };
                    [i.RegistrationItemEventTypes.SCREEN_PROCEED, i.RegistrationItemEventTypes.SCREEN_SKIP, i.RegistrationItemEventTypes.SCREEN_RETURN, i.RegistrationItemEventTypes.INCORRECT_SMS_CODE].includes(e) && (_.screen_to = n,
                    _.fields = this.getFieldInteractions(),
                    this.resetFieldInteractions()),
                    e !== i.RegistrationItemEventTypes.SELECT_COUNTRY_DONE && e !== i.RegistrationItemEventTypes.PROCEED_OTHER_COUNTRY_CODE || !this.fields[i.RegistrationFieldItemNames.SELECT_COUNTRY_NAME] || (_.fields = this.getFieldInteractions().filter((function(e) {
                        return e.name === i.RegistrationFieldItemNames.SELECT_COUNTRY_NAME
                    }
                    )),
                    delete this.fields[i.RegistrationFieldItemNames.SELECT_COUNTRY_NAME]);
                    var l = ((s = {
                        type: i.ActionProductionStatEventTypes.TYPE_REGISTRATION_ITEM
                    })[i.ActionProductionStatEventTypes.TYPE_REGISTRATION_ITEM] = _,
                    s);
                    this.actionStatCollector.logEvent(l, r)
                }
            }
            ,
            e
        }()
    }
    ,
    740517: (e,t,n)=>{
        "use strict";
        var r, i, o, a, s, c, _, l, u, d, p, h, m, f, g, v, E, y, w, b, C, T, D, A, S, P;
        n.d(t, {
            EventScreens: ()=>r,
            EventFieldValues: ()=>i,
            ProductionStatEventTypes: ()=>o,
            NavigationProductionStatEventTypes: ()=>a,
            YoulaEventTypes: ()=>s,
            ActionProductionStatEventTypes: ()=>c,
            ClickProductionStatEventTypes: ()=>_,
            ViewProductionStatEventTypes: ()=>l,
            MarketEventTypes: ()=>d,
            EventItemType: ()=>h,
            RegistrationItemEventTypes: ()=>f,
            RegistrationFieldItemNames: ()=>g,
            MarketingTransitionItemCampaignType: ()=>v,
            MarketingTransitionItemEventType: ()=>E,
            GamesJsSDKEventNames: ()=>w,
            MyGamesCloudItemType: ()=>C,
            AlertInAppType: ()=>T,
            IEasterEggsItemEventType: ()=>D,
            IVkConnectNavigationItemEventType: ()=>A,
            ProfileActionButtonEventType: ()=>P
        }),
        function(e) {
            e.NOWHERE = "nowhere",
            e.OTHER = "other",
            e.START = "start",
            e.START_BOX = "start_box",
            e.START_PROCEED_AS = "start_proceed_as",
            e.REGISTRATION_COMPLETE = "registration_complete",
            e.REGISTRATION_COUNTRY = "registration_country",
            e.REGISTRATION_PHONE = "registration_phone",
            e.REGISTRATION_PHONE_VERIFY = "registration_phone_verify",
            e.REGISTRATION_PASSWORD = "registration_password",
            e.REGISTRATION_EDUCATION = "registration_education",
            e.REGISTRATION_EMAIL = "registration_email",
            e.REGISTRATION_NAME = "registration_name",
            e.REGISTRATION_INVITE_CONFIRM = "registration_invite_confirm",
            e.REGISTRATION_LIST_FRIENDS_FACEBOOK = "registration_list_friends_facebook",
            e.PHONE_2FA_VERIFY = "phone_2fa_verify",
            e.OAUTH_FB = "oauth_fb",
            e.FACEBOOK_REGISTRATION_FAILED = "facebook_registration_failed"
        }(r || (r = {})),
        function(e) {
            e.REGISTERED_VIA_FB = "1"
        }(i || (i = {})),
        function(e) {
            e.TYPE_NAVGO = "type_navgo",
            e.TYPE_ACTION = "type_action",
            e.TYPE_CLICK = "type_click",
            e.TYPE_VIEW = "type_view"
        }(o || (o = {})),
        function(e) {
            e.GO = "go",
            e.BACK = "back",
            e.TAB_OPEN = "tab_open"
        }(a || (a = {})),
        function(e) {
            e.TYPE_DONUT_DESCRIPTION_NAV_ITEM = "type_donut_description_nav_item",
            e.TYPE_MARKET_NAVGO = "type_market_navgo",
            e.TYPE_YOULA_SNIPPET_NAVGO = "type_youla_snippet_navgo",
            e.TYPE_STUDIO_NAVGO = "type_studio_navgo",
            e.TYPE_SERVICES_MAP_NAVGO = "type_services_map_navgo"
        }(a || (a = {})),
        function(e) {
            e.TYPE_YOULA_SNIPPET_ITEM = "type_youla_snippet_item",
            e.TYPE_YOULA_TRANSITION_TO_ITEM = "type_youla_transition_to_item",
            e.TYPE_YOULA_IM = "type_youla_im"
        }(s || (s = {})),
        function(e) {
            e.TYPE_REGISTRATION_ITEM = "type_registration_item",
            e.TYPE_MARKETING_TRANSITION_ITEM = "type_marketing_transition_item",
            e.TYPE_DONUT_PAYMENT_ITEM = "type_donut_payment_item",
            e.TYPE_CALL_ITEM = "type_voip_call_item",
            e.TYPE_BRIDGE_EVENT_ITEM = "type_bridge_event_item",
            e.TYPE_AD_MINI_APPS_EVENT_ITEM = "type_ad_mini_apps_event_item",
            e.TYPE_EASTER_EGGS_ITEM = "type_easter_eggs_item",
            e.TYPE_VK_CONNECT_NAVIGATION_ITEM = "type_vk_connect_navigation_item",
            e.TYPE_GAMES_JS_SDK_ITEM = "type_games_js_sdk_item",
            e.TYPE_SERVICES_MAP_ITEM = "type_services_map_item"
        }(c || (c = {})),
        function(e) {
            e.TYPE_MARKET_CLICK = "type_market_click",
            e.TYPE_WORKI_CLICK = "type_worki_click",
            e.TYPE_CATALOG_BANNER_ITEM = "type_catalog_banner_item",
            e.TYPE_MINI_APP_ITEM = "type_mini_app_item",
            e.TYPE_MESSAGING_CONTACT_RECOMMENDATIONS_ITEM = "type_messaging_contact_recommendations_item",
            e.TYPE_STUDIO_PERIOD_SELECT = "type_studio_period_select",
            e.TYPE_QUESTION_ITEM = "type_question_item",
            e.TYPE_PROFILE_ACTION_BUTTON_ITEM = "type_profile_action_button_item"
        }(_ || (_ = {})),
        function(e) {
            e.TYPE_CATALOG_BANNER_ITEM = "type_catalog_banner_item",
            e.TYPE_MARKET_VIEW = "type_market_view",
            e.TYPE_MINI_APPS_VIEW_ITEM = "type_mini_app_view_item"
        }(l || (l = {})),
        function(e) {
            e.MARKETPLACE = "marketplace",
            e.MARKETPLACE_BLOCK = "marketplace_block",
            e.MARKETPLACE_SEARCH = "marketplace_search"
        }(u || (u = {})),
        function(e) {
            e.TYPE_MARKET_ORDERS_ITEM = "type_market_orders_item",
            e.TYPE_MARKET_CARTS_ITEM = "type_market_carts_item",
            e.TYPE_MARKET_GOODS_ITEM = "type_market_item",
            e.TYPE_MARKET_MARKETPLACE_ITEM = "type_market_marketplace_item",
            e.TYPE_MARKET_ADD_ITEM_TO_BOOKMARKS = "type_market_add_item_to_bookmarks"
        }(d || (d = {})),
        function(e) {
            e.CATALOG_PROMO_BANNER_VIEWED = "catalog_promo_banner_viewed"
        }(p || (p = {})),
        function(e) {
            e.ARTICLE = "article",
            e.GROUP = "group",
            e.PHOTO = "photo",
            e.POST = "post",
            e.STORY = "story",
            e.USER = "user",
            e.BROWSER = "browser",
            e.NARRATIVE = "narrative",
            e.MINI_APP = "mini_app",
            e.GAME = "game",
            e.VIDEO = "video",
            e.MARKET_ITEM = "market_item",
            e.MARKET_ITEM_ALBUM = "market_item_album",
            e.MARKET_ORDER = "market_order",
            e.CATALOG_BANNER = "catalog_banner",
            e.AUDIO_FULLSCREEN_BANNER = "audio_fullscreen_banner",
            e.WORKI_SNIPPET = "worki_snippet",
            e.MINI_APPS_CATALOG_BANNER_VIEWED = "catalog_promo_banner_viewed",
            e.MINI_APPS_CATALOG_BANNER = "catalog_promo_banner",
            e.TYPE_MESSAGING_CONTACT_RECOMMENDATIONS_ITEM = "type_messaging_contact_recommendations_item",
            e.STUDIO = "studio",
            e.OPEN_CATALOG_ECO_MENU = "open_catalog_eco_menu",
            e.QUESTION = "question"
        }(h || (h = {})),
        function(e) {
            e.SWITCH_ITEM_VARIANT_1 = "switch_item_variant_1",
            e.SWITCH_ITEM_VARIANT_2 = "switch_item_variant_2",
            e.OPEN_WIKI = "open_wiki"
        }(m || (m = {})),
        function(e) {
            e.SCREEN_PROCEED = "screen_proceed",
            e.SCREEN_SKIP = "screen_skip",
            e.SCREEN_RETURN = "screen_return",
            e.COMMON_SERVER_ERROR = "common_server_error",
            e.RESEND_SMS_CODE = "resend_sms_code",
            e.RESEND_SMS_CODE_FAILED = "resend_sms_code_failed",
            e.INCORRECT_SMS_CODE = "incorrect_sms_code",
            e.INCORRECT_PASSWORD = "incorrect_password",
            e.INCORRECT_NAME = "incorrect_name",
            e.INCORRECT_CAPTCHA = "incorrect_captcha",
            e.INCORRECT_PHONE_NUMBER = "incorrect_phone_number",
            e.INCORRECT_BDAY = "incorrect_bday",
            e.INCORRECT_SEX = "incorrect_sex",
            e.INCORRECT_EMAIL = "incorrect_email",
            e.EXISTING_EMAIL = "existing_email",
            e.INCORRECT_EDUCATION = "incorrect_education",
            e.SUCCESS_2FA = "success_2fa",
            e.LOGIN_TAP = "login_tap",
            e.PASSWORD_TAP = "passw_tap",
            e.START_REG_TAP = "start_reg_tap",
            e.FIRST_COUNTRY = "first_country",
            e.FIRST_EDUCATION = "first_education",
            e.FIRST_EMAIL = "first_email",
            e.FIRST_FRIEND_ASK = "first_friend_ask",
            e.SELECT_COUNTRY = "select_country",
            e.SELECT_COUNTRY_DONE = "select_country_done",
            e.INPUT_NUMBER_INTERACTION = "input_number_interaction",
            e.INPUT_CODE_INTERACTION = "input_code_interaction",
            e.PROCEED_OTHER_COUNTRY_CODE = "proceed_other_country_code",
            e.INPUT_PHONE = "input_phone",
            e.INPUT_EMAIL = "input_email"
        }(f || (f = {})),
        function(e) {
            e.PHONE_COUNTRY = "phone_country",
            e.PHONE_NUMBER = "phone_number",
            e.COUNTRY = "country",
            e.CITY = "city",
            e.EMAIL = "email",
            e.UNIVERSITY = "university",
            e.FACULTY = "faculty",
            e.SCHOOL = "school",
            e.CHAIR = "chair",
            e.YEAR_FROM = "year_from",
            e.YEAR_TO = "year_to",
            e.CLASS = "class",
            e.EDU_FORM = "edu_form",
            e.EDU_STATUS = "edu_status",
            e.GRADUATION = "graduation",
            e.SPECIALIZATION = "specialization",
            e.RULES_ACCEPT = "rules_accept",
            e.SMS_CODE = "sms_code",
            e.FIRST_NAME = "first_name",
            e.LAST_NAME = "last_name",
            e.SEX = "sex",
            e.BDAY = "bday",
            e.PASSWORD = "password",
            e.FACEBOOK_REGISTRATION = "facebook_registration",
            e.FRIEND_ASK = "friend_ask",
            e.VERIFICATION_TYPE = "verification_type",
            e.SELECT_COUNTRY_NAME = "select_country_name"
        }(g || (g = {})),
        function(e) {
            e.UNAUTH_BOTTOM_BANNER = "unauth_bottom_banner",
            e.UNAUTH_ACTION_BOX = "unauth_action_box"
        }(v || (v = {})),
        function(e) {
            e.OPEN = "open",
            e.CLOSE = "close",
            e.CLICK_SIGN_UP = "click_sign_up",
            e.CLICK_SIGN_IN = "click_sign_in",
            e.CLICK_OPEN_IN_APP = "click_open_in_app"
        }(E || (E = {})),
        function(e) {
            e.LIKE = "like",
            e.SHARE = "share",
            e.MORE = "more"
        }(y || (y = {})),
        function(e) {
            e.INIT = "games_js_sdk_init"
        }(w || (w = {})),
        function(e) {
            e.ACTION_MENU_SHARE = "action_menu_share",
            e.ACTION_MENU_ADD_TO_FAVOURITES = "action_menu_add_to_favourites",
            e.ACTION_MENU_REMOVE_FROM_FAVOURITES = "action_menu_remove_from_favourites",
            e.ACTION_MENU_ENABLE_NOTIFICATIONS = "action_menu_enable_notifications",
            e.ACTION_MENU_DISABLE_NOTIFICATIONS = "action_menu_disable_notifications",
            e.ACTION_MENU_ALL_APPS = "action_menu_all_apps",
            e.ACTION_MENU_ALL_GAMES = "action_menu_all_games",
            e.ACTION_MENU_COPY = "action_menu_copy",
            e.ACTION_MENU_DELETE = "action_menu_delete",
            e.ACTION_MENU_RECOMMEND = "action_menu_recommend",
            e.ACTION_MENU_UNRECOMMEND = "action_menu_unrecommend"
        }(b || (b = {})),
        function(e) {
            e.CLICK_GAME_CARD = "cloud_games_game_click",
            e.CLICK_DOWNLOAD_GAME = "cloud_games_client_download",
            e.OPEN_SECTION = "cloud_games_section_open"
        }(C || (C = {})),
        function(e) {
            e.SHOW = "notifications_request_sent",
            e.CLOSE = "notifications_request_close",
            e.TIMEOUT_CLOSE = "notifications_request_timeout",
            e.SETTING_OPEN = "notifications_request_settings_open"
        }(T || (T = {})),
        function(e) {
            e.EGG_SHOW = "egg_show",
            e.POPUP_SHOW = "popup_show",
            e.POPUP_ACTION = "popup_action"
        }(D || (D = {})),
        function(e) {
            e.CLICK_ENTER_LK = "click_enter_lk",
            e.CLICK_VK_PAY = "click_vk_pay",
            e.CLICK_VK_COMBO = "click_vk_combo",
            e.POPUP_OPEN = "popup_open",
            e.POPUP_CLOSE = "popup_close",
            e.SERVICE_NAVIGATION_CLICK = "service_navigation_click",
            e.SERVICE_NAVIGATION_OPEN = "service_navigation_open",
            e.SERVICE_NAVIGATION_CLOSE = "service_navigation_close"
        }(A || (A = {})),
        function(e) {
            e.CLICK = "promo_banner_click"
        }(S || (S = {})),
        function(e) {
            e.LAUNCH_THIRD_PARTY_APP = "launch_third_party_app"
        }(P || (P = {}))
    }
    ,
    834404: (e,t,n)=>{
        "use strict";
        n.d(t, {
            ViewStatCollector: ()=>o
        });
        var r = n(570655)
          , i = n(740517)
          , o = function() {
            function e(e) {
                this.productionStatCollector = e
            }
            return e.prototype.logEvent = function(e, t) {
                var n, o = (0,
                r.__assign)((0,
                r.__assign)({}, this.productionStatCollector.getBaseEvent()), ((n = {
                    type: i.ProductionStatEventTypes.TYPE_VIEW
                })[i.ProductionStatEventTypes.TYPE_VIEW] = (0,
                r.__assign)({
                    item: t
                }, e),
                n));
                this.productionStatCollector.logEvent(o)
            }
            ,
            e
        }()
    }
    ,
    210759: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MiniAppsEventStatsCollector: ()=>a
        });
        var r = n(570655)
          , i = n(740517)
          , o = n(214547)
          , a = function() {
            function e() {
                this.productStatCollector = new o.ProductionStatCollector,
                this.viewStatCollector = new o.ViewStatCollector(this.productStatCollector)
            }
            return e.prototype.logEvent = function(e, t, n, o) {
                var a;
                void 0 === n && (n = ""),
                void 0 === o && (o = "");
                var s = (0,
                r.__assign)((0,
                r.__assign)({}, e), t)
                  , c = ((a = {
                    type: i.ViewProductionStatEventTypes.TYPE_MINI_APPS_VIEW_ITEM
                })[i.ViewProductionStatEventTypes.TYPE_MINI_APPS_VIEW_ITEM] = s,
                a.start_view = n,
                a.end_view = o,
                a);
                this.viewStatCollector.logEvent(c, e)
            }
            ,
            e
        }()
    }
    ,
    898966: (e,t,n)=>{
        "use strict";
        n.d(t, {
            QUESTION_MAX_LENGTH: ()=>r,
            MY_QUESTIONS_BOX_URL_PARAMETER: ()=>i,
            ASK_QUESTION_BOX_URL_PREFIX: ()=>o
        });
        var r = 80
          , i = "question"
          , o = "ask_question"
    }
    ,
    451888: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getQuestion: ()=>i,
            getQuestions: ()=>o,
            deleteQuestion: ()=>a,
            restoreQuestion: ()=>s,
            deleteFromAuthor: ()=>c,
            restoreAuthorQuestions: ()=>_,
            getUsers: ()=>l,
            banUser: ()=>u,
            unbanUser: ()=>d,
            reportQuestion: ()=>p
        });
        var r = n(189798);
        function i(e) {
            return (0,
            r.api)("questions.getById", {
                owner_id: window.vk.id,
                question_id: e,
                extended: 1,
                fields: "photo_50,photo_100,first_name_gen,last_name_gen,domain"
            })
        }
        function o(e, t) {
            return void 0 === e && (e = ""),
            void 0 === t && (t = 15),
            (0,
            r.api)("questions.get", {
                owner_id: window.vk.id,
                start_from: e,
                limit: t,
                extended: 1,
                fields: "photo_50,photo_100,first_name_gen,last_name_gen,domain"
            })
        }
        function a(e) {
            return (0,
            r.api)("questions.delete", {
                owner_id: window.vk.id,
                question_id: e
            })
        }
        function s(e) {
            return (0,
            r.api)("questions.restore", {
                owner_id: window.vk.id,
                question_id: e
            })
        }
        function c(e) {
            return (0,
            r.api)("questions.deleteFromAuthor", {
                owner_id: window.vk.id,
                question_id: e
            })
        }
        function _(e) {
            return (0,
            r.api)("questions.restoreFromAuthor", {
                owner_id: window.vk.id,
                question_id: e
            })
        }
        function l(e) {
            return (0,
            r.api)("users.get", {
                user_ids: e.join(","),
                fields: "photo_50,photo_100,can_ask_anonymous,can_ask_question,first_name_nom,first_name_dat,first_name_gen,last_name_gen,sex"
            })
        }
        function u(e) {
            return (0,
            r.api)("questions.authorBan", {
                owner_id: window.vk.id,
                question_id: e
            })
        }
        function d(e) {
            return (0,
            r.api)("questions.authorUnBan", {
                owner_id: window.vk.id,
                question_id: e
            })
        }
        function p(e) {
            return (0,
            r.api)("reports.add", {
                type: "profile_story_question",
                owner_id: window.vk.id,
                item_id: e
            })
        }
    }
    ,
    632010: (e,t,n)=>{
        "use strict";
        var r;
        n.d(t, {
            QuestionsBoxRef: ()=>r
        }),
        function(e) {
            e.SNIPPET = "snippet",
            e.URL = "url",
            e.STORY = "story"
        }(r || (r = {}))
    }
    ,
    859866: (e,t,n)=>{
        "use strict";
        n.d(t, {
            UnauthorizedSourceType: ()=>r
        });
        var r = {
            PHOTO: "photo",
            VIDEO: "video",
            AUDIO: "audio",
            COMMENTS: "comments"
        }
    }
    ,
    944568: (e,t,n)=>{
        "use strict";
        n.d(t, {
            hideCatalogBlock: ()=>a
        });
        var r = n(850167)
          , i = n(200134)
          , o = n(293680);
        function a(e, t) {
            o.ajax.post("/al_audio.php?act=hide_catalog_block", {
                block_id: e
            });
            var n = t.closest(".CatalogBlock__content");
            n && (0,
            r.getAudioPlayer)().notify(i.events.PLACEHOLDER_REMOVE, n.dataset.id)
        }
    }
    ,
    428163: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logout: ()=>i
        });
        var r = n(189798)
          , i = function(e, t) {
            (0,
            r.removeLoginCache)(e, t)
        }
    }
    ,
    448632: (e,t,n)=>{
        "use strict";
        n.d(t, {
            handleCaptcha: ()=>i
        });
        var r = n(654612)
          , i = function(e) {
            return new Promise((function(t) {
                var n = null
                  , i = {
                    imgSrc: e.captcha_img,
                    onSubmit: function(e, r) {
                        t({
                            captcha_sid: e,
                            captcha_key: r
                        }),
                        n && n.hide()
                    }
                };
                n = (0,
                r.showCaptchaBox)(e.captcha_sid, n, null, i)
            }
            ))
        }
    }
    ,
    70488: (e,t,n)=>{
        "use strict";
        n.d(t, {
            RegistrationFieldItemNames: ()=>r.RegistrationFieldItemNames,
            RegistrationItemEventTypes: ()=>r.RegistrationItemEventTypes,
            EventScreens: ()=>r.EventScreens,
            EventFieldValues: ()=>r.EventFieldValues,
            registrationItemStat: ()=>a
        });
        var r = n(214547)
          , i = new r.ProductionStatCollector
          , o = new r.ActionStatCollector(i)
          , a = new r.RegistrationItemStatCollector(o);
        try {
            window.stManager.done(window.jsc("web/action_stats.js"))
        } catch (e) {}
    }
    ,
    473009: (e,t,n)=>{
        "use strict";
        n.d(t, {
            init: ()=>a
        });
        var r = n(182804)
          , i = n(70698)
          , o = n(486125)
          , a = function() {
            var e = (0,
            i.isTQInitialized)();
            (0,
            r.init)(),
            e || ((0,
            i.tqi)().setHandler("Common/nav_go", (function(e) {
                var t, n;
                (null === (t = e.payload.event) || void 0 === t ? void 0 : t.target) && window.nav.go(e.payload.event.target, e.payload.event, JSON.parse((null === (n = e.payload.dataAttrs) || void 0 === n ? void 0 : n.options) || "{}"))
            }
            ), !1),
            (0,
            i.tqi)().setHandler("Common/cur_box_hide", (function() {
                var e;
                null === (e = (0,
                o.curBox)()) || void 0 === e || e.hide()
            }
            ), !1))
        }
    }
    ,
    483295: (e,t,n)=>{
        "use strict";
        function r() {
            for (var e = [], t = 0; t < arguments.length; t++)
                e[t] = arguments[t];
            var n = [];
            return e.forEach((function(e) {
                if (e)
                    switch (typeof e) {
                    case "string":
                        n.push(e);
                        break;
                    case "object":
                        Object.keys(e).forEach((function(t) {
                            e[t] && n.push(t)
                        }
                        ));
                        break;
                    default:
                        n.push("" + e)
                    }
            }
            )),
            n.join(" ")
        }
        n.d(t, {
            classNames: ()=>r
        })
    }
    ,
    255349: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initVKComboIndexPromo: ()=>o
        });
        var r = n(182804)
          , i = n(273271);
        function o() {
            (0,
            r.tq)().setInteractiveHandler("IndexComboPromo/register", (function(e) {
                var t = (e.payload.dataAttrs || {}).source;
                i.Unauthorized.showMoreBox(null, 0, t)
            }
            ))
        }
    }
    ,
    267394: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initJoinForm: ()=>p
        });
        var r = n(570655)
          , i = n(386409)
          , o = n(315544)
          , a = n(486125)
          , s = n(100416)
          , c = n(159121)
          , _ = n(570769)
          , l = n(70488)
          , u = n(124041)
          , d = "join_form_sex";
        function p(e, t) {
            var n, p = t.from, h = t.bdateMonths, m = t.bdateYears, f = t.proceedAs, g = t.fbApp, v = t.fbState, E = t.fbLocale, y = t.ref, w = t.values, b = void 0 === w ? {} : w, C = t.onSignInClick, T = t.onNotNowClick, D = window.cur.options || {}, A = D.bday || 0, S = D.bmonth || 0, P = D.byear || 0;
            n = "invite" === y ? l.EventScreens.REGISTRATION_INVITE_CONFIRM : f ? l.EventScreens.START_PROCEED_AS : "box" === y ? l.EventScreens.START_BOX : l.EventScreens.START,
            window.cur.eventScreen = n,
            l.registrationItemStat.logEvent(l.RegistrationItemEventTypes.SCREEN_PROCEED, l.EventScreens.NOWHERE, n, {
                force: !0
            });
            var O, I, M, R = e.querySelector(".JoinForm__error"), L = e.querySelector('.JoinForm__textInput[name="first_name"]'), k = e.querySelector('.JoinForm__textInput[name="last_name"]'), B = e.querySelector(".JoinForm__birthdateDayInput"), x = e.querySelector(".JoinForm__birthdateMonthInput"), N = e.querySelector(".JoinForm__birthdateYearInput"), U = e.querySelector(".JoinForm__sex"), W = e.querySelectorAll(".JoinForm__sexRadio"), F = e.querySelector(".JoinForm__birthdate"), K = e.querySelector(".JoinForm__submitButton"), V = e.querySelector(".JoinForm__facebookLogin"), H = e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button"), j = e.querySelector(".JoinForm__signIn"), G = e.querySelector(".JoinForm__notNowLink");
            if (L && k && K) {
                var q = function() {
                    if (!u.FlatButton.isLocked(K)) {
                        var e = {
                            fname: L.value.trim(),
                            lname: k.value.trim(),
                            bday: O.val(),
                            bmonth: I.val(),
                            byear: M.val(),
                            from: p,
                            frm: 1,
                            event_screen: n
                        };
                        (0,
                        o.isVisible)(U) && (e.sex = Number((0,
                        i.radioval)(d)) || 0),
                        window.tooltips && window.tooltips.hideAll();
                        var t = function(e, t) {
                            e && t && window.Index.showRegTT(e, t)
                        };
                        R && (R.innerHTML = ""),
                        window.ajax.post("join.php?act=start", e, {
                            onDone: function(e, n) {
                                switch (e) {
                                case "first_name":
                                    return t(L, n),
                                    void (0,
                                    i.notaBene)(L);
                                case "last_name":
                                    return t(k, n),
                                    void (0,
                                    i.notaBene)(k);
                                case "sex_row":
                                    return (0,
                                    o.show)(U),
                                    void t(U, n);
                                case "birthdate_row":
                                    return void t(F, n)
                                }
                                n && (0,
                                c.showMsg)(R, n, "error", !0)
                            },
                            showProgress: function() {
                                return u.FlatButton.lock(K)
                            },
                            hideProgress: function() {
                                return u.FlatButton.unlock(K)
                            }
                        })
                    }
                }
                  , $ = function() {
                    var e = Number(O.val()) || 0
                      , t = Number(I.val()) || 0
                      , n = Number(M.val()) || 0
                      , r = new Date(0);
                    e && r.setDate(e),
                    t && r.setMonth(t),
                    n && r.setFullYear(n),
                    l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY, r.getTime().toString())
                }
                  , Y = function() {
                    var e = window.cur;
                    e.isJoinFieldDirty || (l.registrationItemStat.logEvent(l.RegistrationItemEventTypes.START_REG_TAP, e.eventScreen, void 0, {
                        force: !0
                    }),
                    e.isJoinFieldDirty = !0)
                };
                if (l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME, L.value, !0),
                L.addEventListener("keyup", (function() {
                    Y(),
                    l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.FIRST_NAME, L.value)
                }
                )),
                l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME, k.value, !0),
                k.addEventListener("keyup", (function() {
                    Y(),
                    l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.LAST_NAME, k.value)
                }
                )),
                [L, k].forEach((function(e) {
                    (0,
                    s.placeholderInit)(e),
                    e.addEventListener("keydown", (function(e) {
                        10 !== e.keyCode && 13 !== e.keyCode || q()
                    }
                    ))
                }
                )),
                "index" !== y && requestAnimationFrame((function() {
                    return (0,
                    o.elfocus)(L)
                }
                )),
                l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.BDAY, "", !0),
                O = new window.Dropdown(B,(0,
                _.generateDays)(P, S),{
                    big_text: !0,
                    multiselect: !1,
                    zeroPlaceholder: !0,
                    selectedItems: A,
                    onChange: function() {
                        Y(),
                        $()
                    }
                }),
                I = new window.Dropdown(x,h,{
                    big_text: !0,
                    multiselect: !1,
                    zeroPlaceholder: !0,
                    selectedItems: S,
                    onChange: function(e) {
                        Y(),
                        $(),
                        (0,
                        _.updateDayDropdown)(M.val(), e, O, A)
                    }
                }),
                M = new window.Dropdown(N,m,{
                    big_text: !0,
                    multiselect: !1,
                    zeroPlaceholder: !0,
                    selectedItems: P,
                    onChange: function(e) {
                        Y(),
                        $(),
                        (0,
                        _.updateDayDropdown)(e, I.val(), O, A)
                    }
                }),
                window.radioBtns.join_form_sex = {
                    els: (0,
                    r.__spreadArray)([], (0,
                    r.__read)(W)),
                    val: 0
                },
                l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX, Number((0,
                i.radioval)(d)).toString(), !0),
                W.forEach((function(e) {
                    e.addEventListener("click", (function() {
                        var t = Number(e.dataset.sex);
                        (0,
                        i.radiobtn)(e, t, d),
                        Y(),
                        l.registrationItemStat.logFieldInteraction(l.RegistrationFieldItemNames.SEX, t.toString())
                    }
                    ))
                }
                )),
                void 0 !== b.sex) {
                    var z = b.sex
                      , X = e.querySelector('.JoinForm__sexRadio[data-sex="' + z + '"]');
                    X && X.click()
                }
                if (K.addEventListener("click", (function(e) {
                    e.preventDefault(),
                    q()
                }
                )),
                g) {
                    var Q = window.cur;
                    Q.fbApp = g,
                    Q.fbState = v,
                    Q.fbLocale = E,
                    window.Index.fbCheck(g, "", V)
                }
                null == H || H.addEventListener("click", (function(e) {
                    e.preventDefault(),
                    window.Index.fbJoin("", H)
                }
                )),
                j && C && j.addEventListener("click", C),
                G && T && G.addEventListener("click", T);
                var J = (0,
                a.curBox)();
                J && J.setOptions({
                    onClean: function() {
                        O && O.destroy(),
                        I && I.destroy(),
                        M && M.destroy()
                    }
                }),
                window.stManager.add([window.jsc("web/tooltips.js"), "tooltips.css"]).catch((function() {}
                ))
            }
        }
    }
    ,
    559367: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initJoinVKConnectButton: ()=>h,
            initJoinVKConnectForm: ()=>m,
            initVkIdForm: ()=>f
        });
        var r = n(988882)
          , i = n(214547)
          , o = n(70488)
          , a = n(386409)
          , s = n(124041)
          , c = n(100416)
          , _ = n(41650)
          , l = 7913379
          , u = i.EventScreens.START;
        function d(e) {
            var t = window.vk.apiConfigDomains
              , n = t.loginDomain
              , i = t.connectDomain;
            r.Config.init({
                appId: l,
                loginDomain: n,
                connectDomain: i,
                appSettings: {
                    external_device_id: e,
                    vkc_auth_action: "registration",
                    promo: "registration"
                }
            })
        }
        function p(e) {
            e && (u = i.EventScreens.START_PROCEED_AS),
            window.cur.eventScreen = u,
            o.registrationItemStat.logEvent(i.RegistrationItemEventTypes.SCREEN_PROCEED, i.EventScreens.NOWHERE, u, {
                force: !0
            })
        }
        function h(e, t) {
            var n = t.proceedAs;
            d(t.unauthId),
            p(n);
            var i = e.querySelector(".JoinForm__connectButton");
            if (i) {
                i.addEventListener("click", (function(e) {
                    var t;
                    e.preventDefault(),
                    t = location.protocol + "//" + location.host + "/join",
                    r.Connect.redirectAuth({
                        url: t
                    })
                }
                ))
            }
        }
        function m(e, t) {
            var n = t.proceedAs
              , l = t.unauthId
              , h = t.phonePrefix
              , m = t.hash
              , f = t.fbApp
              , g = t.fbState
              , v = t.fbLocale;
            d(l),
            p(n);
            var E = e.querySelector('.JoinForm__textInput[name="phone"]')
              , y = e.querySelector(".JoinForm__connectButton")
              , w = e.querySelector(".JoinForm__connectError")
              , b = e.querySelector(".JoinForm__form")
              , C = e.querySelector(".JoinForm__facebookLogin")
              , T = e.querySelector(".JoinForm__facebookLogin .FacebookLogin__button")
              , D = !1;
            if (E && y && w && b) {
                var A = function(e) {
                    (0,
                    a.notaBene)(E),
                    w && e && (w.innerHTML = e),
                    o.registrationItemStat.logEvent(i.RegistrationItemEventTypes.INCORRECT_PHONE_NUMBER, u, void 0, {
                        force: !0
                    })
                }
                  , S = function() {
                    s.FlatButton.isLocked(y) || (!function(e) {
                        var t = String(e).replace(/[^0-9]/g, "").length;
                        return t >= 10 && t <= 13
                    }(E.value.trim().replace(" ", "")) ? A((0,
                    _.getLang)("index_error_bad_phone")) : function(e, t, n) {
                        var i = e.hash;
                        window.ajax.post("join.php?act=connect", e, {
                            onDone: function(e, o) {
                                if ("error" === e)
                                    return A((0,
                                    _.getLang)("index_error_bad_phone")),
                                    void (0,
                                    a.notaBene)(n);
                                s.FlatButton.lock(t);
                                var c = {
                                    url: location.protocol + "//" + location.host + "/join",
                                    action: {
                                        name: "registration_with_phone",
                                        token: o,
                                        params: {
                                            csrf_hash: i
                                        }
                                    }
                                };
                                r.Connect.redirectAuth(c)
                            },
                            showProgress: function() {
                                return s.FlatButton.lock(t)
                            },
                            hideProgress: function() {
                                return s.FlatButton.unlock(t)
                            }
                        })
                    }({
                        phone: E.value.trim(),
                        hash: m
                    }, y, E))
                };
                if ((0,
                c.placeholderInit)(E),
                E.value = h,
                E.addEventListener("keyup", (function(e) {
                    "Enter" !== e.key && (w && w.innerHTML && (w.innerHTML = ""),
                    D || (o.registrationItemStat.logEvent(i.RegistrationItemEventTypes.START_REG_TAP, u, void 0, {
                        force: !0
                    }),
                    D = !0))
                }
                )),
                b.addEventListener("submit", (function(e) {
                    e.preventDefault(),
                    S()
                }
                )),
                y.addEventListener("click", (function(e) {
                    e.preventDefault(),
                    S()
                }
                )),
                f) {
                    var P = window.cur;
                    P.fbApp = f,
                    P.fbState = g,
                    P.fbLocale = v,
                    window.Index.fbCheck(f, "", C)
                }
                null == T || T.addEventListener("click", (function(e) {
                    e.preventDefault(),
                    window.Index.fbJoin("", T)
                }
                ))
            }
        }
        function f(e, t) {
            var n;
            !function() {
                var e = window.vk.apiConfigDomains
                  , t = e.loginDomain
                  , n = e.connectDomain;
                r.Config.init({
                    appId: l,
                    loginDomain: t,
                    connectDomain: n
                })
            }(),
            t && p(null !== (n = null == t ? void 0 : t.proceedAs) && void 0 !== n && n);
            var i = e.querySelector(".VkIdForm__signInButton")
              , o = e.querySelector(".VkIdForm__signUpButton");
            if (i && o) {
                i.addEventListener("click", (function(e) {
                    var n, i;
                    e.preventDefault(),
                    n = location.protocol + "//" + location.host,
                    i = {
                        url: (null == t ? void 0 : t.toFeed) ? n + "/feed" : n + "/login" + location.search,
                        action: {
                            name: "no_password_flow",
                            params: {
                                type: "sign_in"
                            }
                        }
                    },
                    r.Connect.redirectAuth(i)
                }
                )),
                o.addEventListener("click", (function(e) {
                    var t;
                    e.preventDefault(),
                    t = {
                        url: location.protocol + "//" + location.host + "/join" + location.search,
                        action: {
                            name: "no_password_flow",
                            params: {
                                type: "sign_up"
                            }
                        }
                    },
                    r.Connect.redirectAuth(t)
                }
                ))
            }
        }
    }
    ,
    570769: (e,t,n)=>{
        "use strict";
        n.d(t, {
            generateDays: ()=>o,
            updateDayDropdown: ()=>a
        });
        var r = n(659397)
          , i = n(786067);
        function o(e, t) {
            for (var n = [[0, (0,
            i.getLang)("index_sel_bday")]], o = (0,
            r.getLastDayOfMonth)(e, t), a = 1; a <= o; ++a)
                n.push([a, String(a)]);
            return n
        }
        function a(e, t, n, i) {
            Number(n.val()) > (0,
            r.getLastDayOfMonth)(e, t) && n.clear(),
            n.setData(o(e, t).slice(Number(i) ? 1 : 0))
        }
    }
    ,
    19834: (e,t,n)=>{
        "use strict";
        n.d(t, {
            replaceExtraHandler: ()=>s,
            _handleResponseExtraPayloads: ()=>c
        });
        var r = n(469687)
          , i = n(761508)
          , o = n(66433)
          , a = (0,
        r.makeSharedState)("ajax-extra-handlers", (function() {
            return new i.default
        }
        ), {})
          , s = function(e, t) {
            return a().removeAllListeners(e),
            function(e, t) {
                return a().addListener(e, t),
                function() {
                    a().removeListener(e, t)
                }
            }(e, t)
        }
          , c = function(e) {
            var t;
            null !== (t = e) && "object" == typeof t && Object.keys(e).forEach((function(t) {
                try {
                    r = t,
                    i = e[t],
                    a().emit(r, i)
                } catch (e) {
                    var n = {
                        message: "Extra response error",
                        data: {
                            extraKey: t
                        }
                    };
                    (0,
                    o.logError)(e, {
                        environment: "ajax_request",
                        breadcrumb: n
                    }),
                    console.error(e)
                }
                var r, i
            }
            ))
        }
    }
    ,
    553429: (e,t,n)=>{
        "use strict";
        n.d(t, {
            subscribeOnModuleEvaluated: ()=>o,
            unsubscribeOnModuleEvaluated: ()=>a,
            triggerSubscribersOnModuleEvaluated: ()=>s
        });
        var r = []
          , i = [];
        function o(e, t) {
            void 0 === t && (t = !1),
            "function" == typeof e && (t ? i.push(e) : r.push(e))
        }
        function a(e) {
            var t = r.indexOf(e)
              , n = i.indexOf(e);
            t >= 0 && r.splice(t, 1),
            n >= 0 && i.splice(n, 1)
        }
        function s() {
            r.forEach((function(e) {
                return e()
            }
            )),
            i.forEach((function(e) {
                return e()
            }
            )),
            i.splice(0, i.length)
        }
    }
    ,
    703797: (e,t,n)=>{
        "use strict";
        function r() {
            return window.vk.loginDomain
        }
        n.d(t, {
            getLoginDomain: ()=>r
        })
    }
    ,
    41650: (e,t,n)=>{
        "use strict";
        n.d(t, {
            getLang: ()=>a,
            default: ()=>s
        });
        var r = n(495283)
          , i = n(786067)
          , o = {};
        function a(e, t, n) {
            void 0 === t && (t = !1);
            var a = "number" == typeof t
              , s = t || a
              , c = e + (s ? ".raw" : "");
            if (void 0 === o[c]) {
                var _ = s ? (0,
                i.getLang)(e, "raw") : (0,
                i.getLang)(e);
                "string" == typeof _ ? o[c] = (0,
                r.decodeHTMLEntities)(_) : Array.isArray(_) ? o[c] = _.map(r.decodeHTMLEntities) : o[c] = "object" == typeof _ && null !== _ ? Object.keys(_).reduce((function(e, t) {
                    return e[t] = (0,
                    r.decodeHTMLEntities)(_[t]),
                    e
                }
                ), {}) : _
            }
            if (a) {
                var l = t;
                return (0,
                i.langNumeric)(l, o[c], n)
            }
            return o[c] || ""
        }
        const s = {
            getLang: a
        }
    }
    ,
    712439: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>c,
            unpackStore: ()=>_
        });
        var r = n(609720)
          , i = n(26330)
          , o = n(695724)
          , a = n(294378);
        function s(e, t) {
            if (!t)
                return i.default.get(e);
            i.default.set(e, t)
        }
        function c(e, t) {
            void 0 === e && (e = {}),
            void 0 === t && (t = {});
            var n = (0,
            r.debounce)(s, 300)
              , c = (0,
            o.extend)({}, e)
              , _ = []
              , l = [];
            return t.store && (c = i.default.get(t.key) || c),
            {
                get: function() {
                    return c
                },
                set: function(e) {
                    var r = this;
                    return e(c).then((function(e) {
                        return c = e,
                        t.store && n(t.key, e),
                        r.emit(),
                        r
                    }
                    )).catch(a.dummyCatch)
                },
                setState: function(e) {
                    var t = this;
                    return this.set((function(n) {
                        return n = (0,
                        o.extend)(n, e),
                        t.emit(),
                        Promise.resolve(n)
                    }
                    ))
                },
                stash: function() {
                    _.push(c),
                    c = (0,
                    o.extend)({}, e),
                    this.emit()
                },
                reset: function() {
                    c = (0,
                    o.extend)({}, e),
                    this.emit()
                },
                unmount: function() {
                    c = {},
                    e = !1,
                    l = []
                },
                pop: function() {
                    _.length > 0 && (c = _.pop(),
                    this.emit())
                },
                emit: function() {
                    var e = this;
                    l.length > 0 && l.forEach((function(t) {
                        return t(e)
                    }
                    ))
                },
                subscribe: function(e) {
                    l.includes(e) || l.push(e)
                },
                unsubscribe: function(e) {
                    l = l.filter((function(t) {
                        return t !== e
                    }
                    ))
                },
                mutate: function(e) {
                    e(c),
                    t.store && n(t.key, c),
                    this.emit()
                }
            }
        }
        function _(e) {
            return function(e) {
                return !!e.get
            }(e) ? e.get() : e
        }
    }
    ,
    528958: (e,t,n)=>{
        "use strict";
        n.d(t, {
            LoginBoxForm: ()=>s
        });
        var r = n(100416)
          , i = n(386409)
          , o = n(654612)
          , a = n(124041)
          , s = function() {
            function e(e) {
                this.rootEl = e,
                this.init()
            }
            return e.prototype.init = function() {
                var e = this.rootEl
                  , t = e.querySelector(".LoginBox__form");
                if (t) {
                    var n = e.querySelector(".LoginBox__formExpire")
                      , s = e.querySelector(".LoginBox__buttonSignIn")
                      , c = e.querySelector(".LoginBox__buttonSignUp")
                      , _ = e.querySelector('[name="email"]')
                      , l = e.querySelector('[name="pass"]')
                      , u = e.querySelector('[name="ul"]');
                    s && (_ && (0,
                    r.placeholderInit)(_),
                    l && (0,
                    r.placeholderInit)(l),
                    null == n || n.addEventListener("click", (function(e) {
                        e.preventDefault(),
                        (0,
                        i.checkbox)(n)
                    }
                    )),
                    l && l.addEventListener("input", (function() {
                        t.classList.toggle("LoginBox--showExpire", l.value.trim().length > 0)
                    }
                    )),
                    c && (c.onclick = function() {
                        return (0,
                        o.showBox)("join.php", {
                            act: "box",
                            from: window.nav.strLoc
                        }),
                        !1
                    }
                    ),
                    t.onsubmit = function() {
                        if (a.FlatButton.isLocked(s))
                            return !1;
                        var e = window.submitQuickLoginForm;
                        if (!e)
                            return !0;
                        var t = _ ? _.value.trim() : ""
                          , r = l ? l.value.trim() : ""
                          , o = Number((0,
                        i.isChecked)(n));
                        if (_ && !t)
                            return (0,
                            i.notaBene)(_),
                            !1;
                        if (!r)
                            return (0,
                            i.notaBene)(l),
                            !1;
                        var c = {
                            expire_input: o
                        };
                        return u && u.value && (c.ul = u.value),
                        e(t, r, {
                            prg: "login_button",
                            params: c
                        }),
                        a.FlatButton.lock(s),
                        !1
                    }
                    ,
                    requestAnimationFrame((function() {
                        var e;
                        null === (e = _ || l) || void 0 === e || e.focus()
                    }
                    )))
                }
            }
            ,
            e
        }()
    }
    ,
    699937: (e,t,n)=>{
        "use strict";
        n.d(t, {
            LoginRecentUsersGallery: ()=>i
        });
        var r = n(570655)
          , i = function() {
            function e(e) {
                this.containerEl = e,
                this.viewportEl = e.firstElementChild,
                this.layerEl = this.viewportEl.firstElementChild,
                this.initializeSlides()
            }
            return e.prototype.init = function() {
                this.setIndex(0)
            }
            ,
            e.prototype.initializeSlides = function() {
                var e;
                this.slides = (0,
                r.__spreadArray)([], (0,
                r.__read)(this.layerEl.children)).map((function(e, t) {
                    return {
                        coordX: t * e.offsetWidth,
                        width: e.offsetWidth,
                        el: e
                    }
                }
                )),
                this.viewportEl.style.width = (null === (e = this.slides[0]) || void 0 === e ? void 0 : e.width) + "px";
                var t = this.containerEl.offsetWidth
                  , n = this.viewportEl.offsetWidth;
                this.layerWidth = this.slides.reduce((function(e, t) {
                    return t.width + e
                }
                ), 0),
                this.min = n - (t - n) / 2 - this.layerWidth,
                this.max = 0
            }
            ,
            e.prototype.validateIndent = function(e) {
                var t = this.min
                  , n = this.max;
                return e < t ? t : e > n ? n : e
            }
            ,
            e.prototype.calculateIndent = function(e) {
                var t = this.slides
                  , n = t.length ? t[e] : null;
                if (n) {
                    var r = n.coordX;
                    return this.validateIndent(-1 * r)
                }
                return 0
            }
            ,
            e.prototype.render = function() {
                var e = this
                  , t = this.calculateIndent(this.currentIndex);
                requestAnimationFrame((function() {
                    e.layerEl.style.transform = "translateX(" + t + "px)"
                }
                )),
                (0,
                r.__spreadArray)([], (0,
                r.__read)(this.layerEl.children)).forEach((function(t, n) {
                    t.classList.toggle("LoginRecentUsersGallery__slide--prev2", n === e.currentIndex - 2),
                    t.classList.toggle("LoginRecentUsersGallery__slide--active", n === e.currentIndex),
                    t.classList.toggle("LoginRecentUsersGallery__slide--next2", n === e.currentIndex + 2)
                }
                ))
            }
            ,
            e.prototype.setRelativeIndex = function(e) {
                this.currentIndex = Math.max(0, Math.min(this.currentIndex + e, this.slides.length - 1)),
                this.onChange(this.currentIndex),
                this.render()
            }
            ,
            e.prototype.setIndex = function(e) {
                this.currentIndex = Math.max(0, Math.min(e, this.slides.length - 1)),
                this.onChange(this.currentIndex),
                this.render()
            }
            ,
            e
        }()
    }
    ,
    718253: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MARKET_ALIEXPRESS_APP_ID: ()=>r,
            MARKET_ALIEXPRESS_APP_NAME: ()=>i,
            MARKET_ALIEXPRESS_HOME_URL: ()=>o,
            MARKET_ALIEXPRESS_GROUP_ID: ()=>a,
            MARKET_YOULA_GROUP_ID: ()=>s,
            GROUP_ORDERS_COLUMNS_STORAGE_KEY: ()=>c,
            GROUP_ORDERS_DEFAULT_COLUMNS: ()=>_
        });
        var r = 6706576
          , i = "ae_app"
          , o = "https://aliexpress.com"
          , a = 36941068
          , s = 198582766
          , c = "GroupOrdersPageTableSettings"
          , _ = ["fullId", "date", "status", "userName", "deliveryOption", "totalPrice", "merchantComment", "colorTags"]
    }
    ,
    674402: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MARKET_EVENT_COUNTER_SECTION_ID: ()=>i,
            updateMarketMenuEventCounter: ()=>o
        });
        var r = n(364702)
          , i = "page_menu_group_market";
        function o(e, t) {
            var n = document.querySelector(e);
            n && r.PageActionCell.setCounter(n, t)
        }
    }
    ,
    179288: (e,t,n)=>{
        "use strict";
        n.d(t, {
            MENTION: ()=>a,
            MENTION_RAW: ()=>s,
            CONTROLLER: ()=>c,
            FAVORITES_ICON_URL: ()=>_,
            SENDING_ICON_TIMEOUT: ()=>l,
            ConvoListFolder: ()=>i,
            FOLDER_ALL: ()=>h,
            FOLDER_IMPORTANT: ()=>m,
            FOLDER_MARKED_UNREAD: ()=>f,
            FOLDER_MESSAGE_REQUEST: ()=>g,
            FOLDER_MESSAGE_REQUEST_REJECTED: ()=>v,
            FOLDER_UNREAD: ()=>E,
            FOLDER_UNRESPOND: ()=>y,
            FOLDER_PEER_TAGS: ()=>w,
            FOLDER_NOT_IMPORTANT_MESSAGE_REQUEST: ()=>b,
            FOLDER_BUSINESS_NOTIFY: ()=>C,
            FOLDER_ARCHIVE: ()=>T,
            FOLDER_MASKS: ()=>D,
            ConvoAction: ()=>d,
            FolderAction: ()=>p
        });
        var r, i, o = n(19331), a = /\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g, s = /(^|[\s.,:\'\";>\)\(])(\*|@)([A-Za-z0-9_\.]{2,32})\s*\((.+?)\)/g, c = "al_im.php", _ = "/images/icons/im_favorites_100.png", l = 2e3;
        !function(e) {
            e.ALL = "all",
            e.IMPORTANT = "important",
            e.MR = "mr",
            e.UNREAD = "unread",
            e.UNRESPOND = "unrespond",
            e.AD_TAG = "ad_tag",
            e.BUSINESS_NOTIFY = "business_notify",
            e.ARCHIVE = "archive",
            e.PEER_TAGS = "custom_tag"
        }(i || (i = {}));
        i.AD_TAG;
        var u, d, p, h = i.ALL, m = i.IMPORTANT, f = "marked_unread", g = i.MR, v = "mr_rejected", E = i.UNREAD, y = i.UNRESPOND, w = "custom_tag", b = "mr_not_important", C = i.BUSINESS_NOTIFY, T = i.ARCHIVE, D = ((r = {})[i.UNRESPOND] = 2,
        r[i.IMPORTANT] = 1,
        r[i.MR] = 256,
        r[i.BUSINESS_NOTIFY] = 8192,
        r[i.ARCHIVE] = 1 << 23,
        r[v] = 512,
        r[i.AD_TAG] = 32768,
        r[f] = 1 << 20,
        r);
        (0,
        o.partConfigEnabled)("test_folder_masks") && (D[b] = 1 << 22),
        function(e) {
            e.USER = "user",
            e.COMMUNITY = "community",
            e.CHAT = "chat",
            e.CHANNEL = "channel",
            e.MR = "mr",
            e.CHAT_MR = "chat_mr",
            e.EMAIL = "email",
            e.CONTACT = "contact",
            e.BUSINESS_NOTIFY = "business_notify"
        }(u || (u = {})),
        function(e) {
            e.SETTINGS = "settings",
            e.BLOCK = "block",
            e.CHAT_INVITE = "chat_invite",
            e.USER_INVITE = "user_invite",
            e.CREATE_CHAT = "create_chat",
            e.MEDIA = "media",
            e.SEARCH = "search",
            e.PIN_HIDE = "pin_hide",
            e.PIN_UNHIDE = "pin_unhide",
            e.UNPIN = "unpin",
            e.MUTE = "mute",
            e.UNMUTE = "unmute",
            e.CLEAR = "clear",
            e.LEAVE = "leave",
            e.RETURN = "return",
            e.BLOCK_COMMUNITY = "block_community",
            e.ALLOW_COMMUNITY = "allow_community",
            e.BLOCK_NOTIFY = "block_notify",
            e.CALL_AUDIO = "call_audio",
            e.CALL_VIDEO = "call_video",
            e.CALL_APP = "call_app",
            e.UNREAD = "unread",
            e.PIN_CONVO = "pin_convo",
            e.UNPIN_CONVO = "unpin_convo",
            e.CALL_BY_NAME = "call_by_name",
            e.ENABLE_BUSINESS_NOTIFY = "enable_business_notify",
            e.DISABLE_BUSINESS_NOTIFY = "disable_business_notify",
            e.BUSINESS_NOTIFY = "business_notify",
            e.ARCHIVE = "archive",
            e.UNARCHIVE = "unarchive",
            e.ADD_FRIEND = "add_friend"
        }(d || (d = {})),
        function(e) {
            e.SHOW = "show"
        }(p || (p = {}))
    }
    ,
    294378: (e,t,n)=>{
        "use strict";
        function r(e) {
            void 0 === e && (e = !1),
            console.trace(),
            e || window.alert("    lastMsg.    (Cmd + Option + I),   JS   (F8+cmd+\\)       .")
        }
        function i(e) {
            return console.error(e),
            Promise.reject(e)
        }
        n.d(t, {
            showDebugAlert: ()=>r,
            dummyCatch: ()=>i
        })
    }
    ,
    826542: (e,t,n)=>{
        "use strict";
        n.d(t, {
            addChatMembers: ()=>a,
            getConversations: ()=>s,
            renewHash: ()=>c,
            HintsSearchType: ()=>r,
            hints: ()=>_,
            ownerPhoto: ()=>l,
            multiStart: ()=>u,
            ownerPhotoSave: ()=>d,
            kickUser: ()=>p,
            pinConvo: ()=>h,
            unpinConvo: ()=>m,
            getRecommendedContacts: ()=>f,
            resetTopMessageCounter: ()=>g,
            toggleHideFolder: ()=>v,
            toggleHideFolderNotice: ()=>E,
            start: ()=>y
        });
        var r, i = n(887294), o = n(179288), a = function(e, t, n, r, a) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_add_chat_members",
                peer: e,
                new_peer: t.join(","),
                gid: n,
                hash: r,
                show_history: a ? 1 : 0
            })
        }, s = function(e, t, n, r, a) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_get_conversations",
                offset: a,
                count: r,
                filter: n,
                gid: t,
                hash: e
            })
        }, c = function(e, t) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_renew_hash",
                peers: e.join(","),
                gid: t
            })
        };
        !function(e) {
            e.FRIENDS = "friends",
            e.FRIENDS_AND_CONTACTS = "friends_and_contacts",
            e.ALL = "all"
        }(r || (r = {}));
        var _ = function(e, t, n, r) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_hints",
                str: e,
                gid: t,
                query: n,
                peerIds: r.join(",")
            })
        }
          , l = function(e, t) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_owner_photo",
                photo: e,
                peer: t
            })
        }
          , u = function(e, t, n, r, a, s, c) {
            return void 0 === s && (s = !1),
            void 0 === c && (c = !1),
            (0,
            i.post)(o.CONTROLLER, {
                act: "a_multi_start",
                hash: e,
                peers: t.join(","),
                title: n,
                flags: r,
                gid: a,
                is_community_chat: Number(s),
                is_donut_chat: Number(c)
            })
        }
          , d = function(e, t, n) {
            return (0,
            i.post)("al_page.php", {
                act: "owner_photo_save",
                peer: e,
                _query: t,
                gid: n
            })
        }
          , p = function(e, t, n, r) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_kick_user",
                chat: e,
                hash: n,
                mid: t,
                gid: r
            })
        }
          , h = function(e, t) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_pin_convo",
                peer_id: e,
                hash: t
            })
        }
          , m = function(e, t) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_unpin_convo",
                peer_id: e,
                hash: t
            })
        }
          , f = function() {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_recommend_contacts"
            })
        }
          , g = function() {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_reset_top_counter"
            })
        }
          , v = function(e, t, n, r) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_toggle_hide_folder",
                folder: e,
                hash: r,
                hide: t ? 1 : 0,
                reset: n ? 1 : 0
            })
        }
          , E = function(e, t, n) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_toggle_hide_folder_notice",
                notice: e,
                hide: t,
                hash: n
            })
        }
          , y = function(e, t, n, r, a, s) {
            return (0,
            i.post)(o.CONTROLLER, {
                act: "a_start",
                peer: e,
                msgid: t,
                history: Number(n),
                prevpeer: r,
                gid: a,
                block: s
            })
        }
    }
    ,
    754204: (e,t,n)=>{
        "use strict";
        n.d(t, {
            logImError: ()=>i,
            getErrorText: ()=>o
        });
        var r = n(66433);
        function i(e, t) {
            if (void 0 === t && (t = ""),
            console.error(e),
            window.Raven) {
                var n = function(e) {
                    (0,
                    r.logError)(e, {
                        environment: "im"
                    })
                };
                if (e instanceof Error) {
                    var i = new Error(o(e, t));
                    return i.name = e.name,
                    i.stack = e.stack,
                    n(i)
                }
                return n(new Error(o(e, t)))
            }
        }
        function o(e, t) {
            if (void 0 === t && (t = ""),
            e instanceof Error)
                return t ? t + ": " + e.message : e.message;
            if ("string" == typeof e || "number" == typeof e)
                return t ? t + ": " + e : "" + e;
            if (e && "api_error" === e.type) {
                var n = JSON.stringify(e.error);
                return t ? t + ": " + n : n
            }
            if (e instanceof Object) {
                n = "";
                try {
                    n = JSON.stringify(e)
                } catch (e) {
                    n = "Error data " + e
                }
                return t ? t + ": " + n : n
            }
            return t
        }
    }
    ,
    523459: (e,t,n)=>{
        "use strict";
        n.d(t, {
            showMyQuestionsBox: ()=>u,
            showAskQuestionBox: ()=>d
        });
        var r = n(570655)
          , i = n(315544)
          , o = n(486125)
          , a = n(451888)
          , s = n(35779)
          , c = n(19331)
          , _ = n(664260)
          , l = n(734234);
        function u(e) {
            var t;
            if ((0,
            c.partConfigEnabled)("profile_questions_enabled"))
                if (window.cur.viewAsBox)
                    window.cur.viewAsBox();
                else if (!(null === (t = window.MyQuestionsBox) || void 0 === t ? void 0 : t.isMounted())) {
                    (null == e ? void 0 : e.ref) && (0,
                    l.logQuestionsOpeningEvent)(window.vk.id, e.ref, _.QuestionAnalyticBoxName.myQuestions);
                    var n = document.querySelector("#box_layer_wrap")
                      , u = document.querySelector("#box_loader");
                    (0,
                    i.show)(n),
                    (0,
                    i.show)(u),
                    (0,
                    o.boxRefreshCoords)(u),
                    Promise.all([(0,
                    a.getQuestions)(), window.stManager.add([window.jsc("web/my_questions.js")]), new Promise((function(e, t) {
                        window.ajax.post("al_questions.php", {
                            act: "load_ask_my_questions_box_lang_keys"
                        }, {
                            onDone: function() {
                                e()
                            },
                            onFail: function() {
                                return t(),
                                !0
                            }
                        })
                    }
                    ))]).then((function(t) {
                        var o = (0,
                        r.__read)(t, 1)[0];
                        window.boxQueue.count() || (0,
                        i.hide)(n),
                        (0,
                        i.hide)(u),
                        window.MyQuestionsBox.init(o.count, o.items, o.profiles, o.next_from, {
                            onClose: null == e ? void 0 : e.onClose,
                            fromElement: null == e ? void 0 : e.fromElement
                        })
                    }
                    )).catch((function(e) {
                        (0,
                        i.hide)(n),
                        (0,
                        i.hide)(u),
                        (0,
                        s.logQuestionError)(e, "An error occurred while loading data for my_questions.js")
                    }
                    ))
                }
        }
        function d(e, t) {
            var n;
            if ((0,
            c.partConfigEnabled)("profile_questions_enabled"))
                if (e !== window.vk.id) {
                    if (window.cur.viewAsBox)
                        window.cur.viewAsBox();
                    else if (!(null === (n = window.AskQuestionBox) || void 0 === n ? void 0 : n.isMounted()))
                        if (e) {
                            (null == t ? void 0 : t.ref) && (0,
                            l.logQuestionsOpeningEvent)(e, t.ref, _.QuestionAnalyticBoxName.askQuestion);
                            var d = document.querySelector("#box_layer_wrap")
                              , p = document.querySelector("#box_loader");
                            (0,
                            i.show)(d),
                            (0,
                            i.show)(p),
                            (0,
                            o.boxRefreshCoords)(p),
                            Promise.all([(0,
                            a.getUsers)([e]), window.stManager.add([window.jsc("web/ask_question.js")]), new Promise((function(e, t) {
                                window.ajax.post("al_questions.php", {
                                    act: "load_ask_question_box_lang_keys"
                                }, {
                                    onDone: function() {
                                        e()
                                    },
                                    onFail: function() {
                                        return t(),
                                        !0
                                    }
                                })
                            }
                            ))]).then((function(e) {
                                var n = (0,
                                r.__read)(e, 1)[0];
                                (0,
                                i.hide)(d),
                                (0,
                                i.hide)(p);
                                var o = n[0];
                                o && window.AskQuestionBox.init(o, null == t ? void 0 : t.fromElement)
                            }
                            )).catch((function(e) {
                                (0,
                                i.hide)(d),
                                (0,
                                i.hide)(p),
                                (0,
                                s.logQuestionError)(e, "An error occurred while loading data for ask_question.js")
                            }
                            ))
                        } else
                            (0,
                            s.logQuestionError)("Empty toUserId has been passed to showAskQuestionBox")
                } else
                    u({
                        ref: null == t ? void 0 : t.ref,
                        fromElement: null == t ? void 0 : t.fromElement
                    })
        }
    }
    ,
    813981: (e,t,n)=>{
        "use strict";
        n.d(t, {
            initColorSchemeDropdowns: ()=>o
        });
        var r = n(570655)
          , i = n(511417);
        function o() {
            document.querySelectorAll(".SettingsColorSchemeDropdown").forEach((function(e) {
                !function(e) {
                    if (!e.dataset.inited) {
                        e.dataset.inited = "1";
                        var t = e.dataset.value
                          , n = JSON.parse(e.dataset.items || "[]");
                        i.ColorScheme.isSchemesAutoSwitchingSupported() || (t === i.ColorSchemeMode.Auto && (t = i.ColorSchemeMode.Light),
                        n = n.filter((function(e) {
                            return (0,
                            r.__read)(e, 1)[0] !== i.ColorSchemeMode.Auto
                        }
                        )));
                        var o = new window.InlineDropdown(e,{
                            selected: t,
                            items: n,
                            onSelect: function(t) {
                                i.colorScheme.setMode(t);
                                var n = e.dataset.hash;
                                window.ajax.post("al_settings.php?act=a_save_color_scheme_mode", {
                                    mode: t,
                                    hash: n
                                })
                            }
                        })
                          , a = i.colorScheme.subscribe((function() {
                            e && o ? o.val(i.colorScheme.getMode(), !0) : a()
                        }
                        ))
                    }
                }(e)
            }
            ))
        }
    }
    ,
    346549: (e,t,n)=>{
        "use strict";
        n.d(t, {
            createAppearanceModifier: ()=>i,
            createSizeModifier: ()=>o,
            createElement: ()=>a,
            setContent: ()=>s
        });
        var r = n(830104);
        function i(e) {
            return "FlatButton--" + e
        }
        function o(e) {
            return "FlatButton--size-" + e
        }
        function a(e, t) {
            var n = document.createElement(e);
            return t && (n.className = t),
            n
        }
        function s(e, t) {
            null != t && ((0,
            r.emptyNode)(e),
            "string" == typeof t ? e.innerHTML = t : e.appendChild(t))
        }
    }
    ,
    124041: (e,t,n)=>{
        "use strict";
        n.d(t, {
            FlatButton: ()=>l,
            FlatButtonAppearance: ()=>s.FlatButtonAppearance,
            FlatButtonSize: ()=>s.FlatButtonSize
        });
        var r = n(659397)
          , i = n(62816)
          , o = n(60804)
          , a = n(346549)
          , s = n(957047)
          , c = n(66342);
        function _(e) {
            return !!e && e.classList.contains("FlatButton--locked")
        }
        var l = {
            isFlatButton: function(e) {
                return Boolean(e && e.classList && e.classList.contains("FlatButton"))
            },
            lock: function(e) {
                if (e && !_(e)) {
                    var t = e.classList.contains((0,
                    a.createSizeModifier)(s.FlatButtonSize.L))
                      , n = t ? (0,
                    o.getIcon24Spinner)().icon : (0,
                    i.getIcon16Spinner)().icon
                      , c = (0,
                    a.createElement)("span", (0,
                    r.classNames)("FlatButton__spinner", {
                        "FlatButton__spinner--l": t
                    }));
                    c.innerHTML = n,
                    e.appendChild(c),
                    e.classList.add("FlatButton--locked")
                }
            },
            unlock: function(e) {
                var t;
                e && (null === (t = e.querySelector(".FlatButton__spinner")) || void 0 === t || t.remove(),
                e.classList.remove("FlatButton--locked"))
            },
            isLocked: _,
            isDisabled: function(e) {
                return !!e && e.classList.contains("FlatButton--disabled")
            },
            render: c.render,
            setDisabled: function(e, t) {
                void 0 === t && (t = !0),
                e && ("button" === e.tagName.toLowerCase() && (e.disabled = t),
                e.classList.toggle("FlatButton--disabled", t))
            },
            getAppearance: function(e) {
                if (e)
                    return Object.values(s.FlatButtonAppearance).find((function(t) {
                        return e.classList.contains((0,
                        a.createAppearanceModifier)(t))
                    }
                    ))
            },
            setAppearance: function(e, t) {
                e && Object.values(s.FlatButtonAppearance).forEach((function(n) {
                    e.classList.toggle((0,
                    a.createAppearanceModifier)(n), n === t)
                }
                ))
            },
            setSize: function(e, t) {
                e && Object.values(s.FlatButtonSize).forEach((function(n) {
                    e.classList.toggle((0,
                    a.createSizeModifier)(n), n === t)
                }
                ))
            },
            setLabel: function(e, t) {
                var n = e.querySelector(".FlatButton__in");
                if (n) {
                    var r = n.querySelector(".FlatButton__content");
                    r ? (0,
                    a.setContent)(r, t) : n.prepend((0,
                    c.renderContent)(t))
                }
            },
            setBefore: function(e, t) {
                var n = null == e ? void 0 : e.querySelector(".FlatButton__in");
                if (n) {
                    var r = e.querySelector(".FlatButton__before");
                    null != t ? r ? (0,
                    a.setContent)(r, t) : n.prepend((0,
                    c.renderBefore)(t)) : null == r || r.remove()
                }
            },
            setAfter: function(e, t) {
                var n = null == e ? void 0 : e.querySelector(".FlatButton__in");
                if (n) {
                    var r = e.querySelector(".FlatButton__after");
                    null != t ? r ? (0,
                    a.setContent)(r, t) : n.prepend((0,
                    c.renderAfter)(t)) : null == r || r.remove()
                }
            }
        }
    }
    ,
    66342: (e,t,n)=>{
        "use strict";
        n.d(t, {
            render: ()=>a,
            renderBefore: ()=>s,
            renderAfter: ()=>c,
            renderContent: ()=>_
        });
        var r = n(570655)
          , i = n(659397)
          , o = n(346549);
        function a(e) {
            var t, n = e.children, a = e.before, l = e.after, u = e.className, d = e.appearance, p = e.size, h = e.round, m = e.wide, f = e.flexWide, g = e.href, v = e.disabled, E = e.noPointerEventsForContent, y = e.restAttrs, w = void 0 === y ? {} : y, b = e.dangerousAttrbutesCode, C = (0,
            r.__assign)({}, w);
            g ? (t = document.createElement("a"),
            C.href = g) : (t = document.createElement("button"),
            C.type || (C.type = "button"));
            var T = t.tagName.toLowerCase()
              , D = !n && Boolean(l) !== Boolean(a);
            t.className = (0,
            i.classNames)("FlatButton", (0,
            o.createAppearanceModifier)(d), (0,
            o.createSizeModifier)(p), {
                "FlatButton--round": h,
                "FlatButton--wide": m,
                "FlatButton--flexWide": f,
                "FlatButton--disabled": v,
                "FlatButton--singleIcon": D
            }, u),
            Object.entries(C).forEach((function(e) {
                var n = (0,
                r.__read)(e, 2)
                  , i = n[0]
                  , o = n[1];
                null != o && t.setAttribute(i, String(o))
            }
            )),
            v && "button" === T && (t.disabled = !0);
            var A = (0,
            o.createElement)("span", (0,
            i.classNames)("FlatButton__in", {
                "FlatButton__in--noPointerEvents": E
            }));
            if (t.appendChild(A),
            a && A.appendChild(s(a)),
            n) {
                var S = _(n);
                A.appendChild(S)
            }
            if (l && A.appendChild(c(l)),
            b) {
                var P = document.createElement("div");
                P.innerHTML = "<div " + b + "></div>";
                var O = P.firstElementChild;
                if (!O)
                    return t;
                var I = O.attributes;
                Object.keys(I).forEach((function(e) {
                    var n = I[Number(e)]
                      , r = n.value;
                    null != r && t.setAttribute(n.name, r)
                }
                ))
            }
            return t
        }
        function s(e) {
            var t = (0,
            o.createElement)("span", "FlatButton__before");
            return (0,
            o.setContent)(t, e),
            t
        }
        function c(e) {
            var t = (0,
            o.createElement)("span", "FlatButton__after");
            return (0,
            o.setContent)(t, e),
            t
        }
        function _(e) {
            var t = (0,
            o.createElement)("span", "FlatButton__content");
            return (0,
            o.setContent)(t, e),
            t
        }
    }
    ,
    957047: (e,t,n)=>{
        "use strict";
        n.d(t, {
            FlatButtonAppearance: ()=>r,
            FlatButtonSize: ()=>i
        });
        var r = {
            PRIMARY: "primary",
            SECONDARY: "secondary",
            TERTIARY: "tertiary",
            POSITIVE: "positive",
            NEGATIVE: "negative",
            OVERLAY_PRIMARY: "overlay-primary",
            ACCENT_OUTLINE: "accent-outline"
        }
          , i = {
            S: "s",
            M: "m",
            L: "l"
        }
    }
    ,
    364702: (e,t,n)=>{
        "use strict";
        n.d(t, {
            PageActionCell: ()=>s
        });
        var r = n(315544)
          , i = n(62816);
        function o(e) {
            return null != e && e.classList.contains("PageActionCell")
        }
        var a = "PageActionCell--locked";
        var s = {
            isPageActionCell: o,
            isLocked: function(e) {
                return o(e) && e.classList.contains(a)
            },
            lock: function(e) {
                e && (e.classList.contains(a) || (e.lockTimeout && clearTimeout(e.lockTimeout),
                e.resetLockTimeout = !1,
                e.lockTimeout = window.setTimeout((function() {
                    if (!e.resetLockTimeout) {
                        var t = (0,
                        r.ce)("div", {
                            className: "PageActionCell__spinner"
                        });
                        t.innerHTML = (0,
                        i.getIcon16Spinner)().icon,
                        e.prepend(t),
                        e.classList.add(a)
                    }
                }
                ), 500)))
            },
            unlock: function(e) {
                if (e && (e.resetLockTimeout = !0,
                e.classList.contains(a))) {
                    e.classList.remove(a);
                    var t = e.querySelector(".PageActionCell__spinner");
                    t && t.remove()
                }
            },
            update: function(e, t) {
                var n = t.icon
                  , r = t.label
                  , i = t.counter
                  , o = e.querySelector(".PageActionCell__label");
                if (o && (o.innerHTML = r),
                void 0 !== n) {
                    var a = e.querySelector(".PageActionCell__icon");
                    a && (a.innerHTML = n)
                }
                if (void 0 !== i) {
                    var s = e.querySelector(".PageActionCell__counter");
                    s && (s.innerHTML = i)
                }
            },
            setDescription: function(e, t) {
                var n, r = e.querySelector(".PageActionCell__description");
                (r || t) && (r || ((r = document.createElement("span")).className = "PageActionCell__description",
                null === (n = e.querySelector(".PageActionCell__in")) || void 0 === n || n.append(r)),
                t ? r.innerHTML = t : r.remove(),
                e.classList.toggle("PageActionCell--with-desc", Boolean(t)))
            },
            getLabelElement: function(e) {
                return e.querySelector(".PageActionCell__label")
            },
            getCounter: function(e) {
                var t = e.querySelector(".PageActionCell__counter");
                return t && Number(t.innerHTML) || 0
            },
            setCounter: function(e, t) {
                var n = e.querySelector(".PageActionCell__counter");
                !n && t <= 0 || (n || ((n = document.createElement("div")).classList.add("PageActionCell__counter"),
                e.appendChild(n)),
                t <= 0 ? n.remove() : n.innerHTML = String(t))
            }
        }
    }
    ,
    576772: (e,t,n)=>{
        "use strict";
        n.d(t, {
            UnauthActionBox: ()=>u
        });
        var r = n(570655)
          , i = n(214547)
          , o = n(740517)
          , a = n(215949)
          , s = n(654612)
          , c = n(659397)
          , _ = n(468770)
          , l = n(267394);
        var u = {
            show: function(e, t) {
                var n = e.withForm
                  , u = new s.MessageBox({
                    title: "",
                    width: n ? 796 : 450,
                    hideButtons: !0,
                    containerClass: (0,
                    c.classNames)("UnauthActionBoxContainer", {
                        "UnauthActionBoxContainer--form": n
                    }),
                    onHide: function() {
                        t && t()
                    }
                });
                u.content(e.html),
                u.changed = !0;
                var d = u.bodyNode.querySelector(".UnauthActionBox__close")
                  , p = u.bodyNode.querySelector(".UnauthActionBox__join")
                  , h = u.bodyNode.querySelector(".UnauthActionBox__login")
                  , m = function(t) {
                    i.marketingTransitionItemStat.logEvent(o.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX, t, e.action, window.location.href)
                };
                null == d || d.addEventListener("click", (function() {
                    m(o.MarketingTransitionItemEventType.CLOSE),
                    u.hide()
                }
                )),
                null == p || p.addEventListener("click", (function() {
                    m(o.MarketingTransitionItemEventType.CLICK_SIGN_UP),
                    (0,
                    a.showJoinBox)()
                }
                )),
                null == h || h.addEventListener("click", (function() {
                    m(o.MarketingTransitionItemEventType.CLICK_SIGN_IN),
                    (0,
                    a.showQuickLoginBox)()
                }
                )),
                m(o.MarketingTransitionItemEventType.OPEN),
                u.show();
                var f = u.bodyNode.querySelector(".LoginCombinedBox")
                  , g = u.bodyNode.querySelector(".JoinForm")
                  , v = function(e) {
                    e.preventDefault(),
                    m(o.MarketingTransitionItemEventType.CLOSE),
                    u.hide()
                };
                return u.bodyNode.querySelectorAll(".LoginBox").forEach((function(e) {
                    (0,
                    _.initLoginBoxForm)(e)
                }
                )),
                u.bodyNode.querySelectorAll(".LoginBox__notNow").forEach((function(e) {
                    e.addEventListener("click", v)
                }
                )),
                u.bodyNode.querySelectorAll(".JoinForm__signIn, .LoginRecentBox__alternative").forEach((function(e) {
                    e.addEventListener("click", (function() {
                        m(o.MarketingTransitionItemEventType.CLICK_SIGN_IN)
                    }
                    ))
                }
                )),
                u.bodyNode.querySelectorAll(".LoginBox__buttonSignUp").forEach((function(e) {
                    e.addEventListener("click", (function() {
                        m(o.MarketingTransitionItemEventType.CLICK_SIGN_UP)
                    }
                    ))
                }
                )),
                f ? (0,
                _.initLoginCombinedBoxForm)(f, e.formOptions) : g && (0,
                l.initJoinForm)(g, (0,
                r.__assign)((0,
                r.__assign)({}, e.formOptions), {
                    onSignInClick: function() {
                        (0,
                        a.showQuickLoginBox)()
                    },
                    onNotNowClick: v,
                    ref: "box"
                })),
                requestAnimationFrame((function() {
                    return window.tooltips && window.tooltips.hideAll()
                }
                )),
                u
            }
        }
    }
    ,
    273271: (e,t,n)=>{
        "use strict";
        n.d(t, {
            isUnauthorizedMediaLayerBoxAvailable: ()=>s,
            UnauthorizedSourceType: ()=>a.UnauthorizedSourceType,
            Unauthorized: ()=>_
        });
        var r, i = n(576772), o = n(19331), a = n(859866);
        function s() {
            return !window.vk.id && !window.layers.visible && (0,
            o.partConfigEnabled)("unauthorized_media_layer_box") && !!document.querySelector(".PageBottomBanner--unauth")
        }
        var c = !1;
        var _ = {
            initScrollMoreBox: function(e) {
                var t, n = function() {
                    c = !1,
                    window.removeEventListener("scroll", r)
                };
                n(),
                r = function() {
                    var t;
                    c || ((null === (t = window.layers) || void 0 === t ? void 0 : t.visible) || window.cur.unauthScrollMoreBox || window.pageYOffset >= 2 * window.innerHeight && (c = !0,
                    i.UnauthActionBox.show(e)))
                }
                ,
                e.showOnLoad && (c = !0,
                i.UnauthActionBox.show(e)),
                window.addEventListener("scroll", r),
                null === (t = window.cur.beforeNavigateRequestHandlers) || void 0 === t || t.push((function() {
                    return n()
                }
                ))
            },
            showMoreBox: function(e, t, n, r) {
                e && e.preventDefault(),
                window.ajax.post("/al_index.php?act=a_unauthorized_box", {
                    action: "more",
                    owner_id: t,
                    source: n
                }, {
                    loader: !0,
                    onDone: function(e) {
                        e.unauth_action_box ? i.UnauthActionBox.show(e.unauth_action_box, r) : r && r()
                    }
                })
            }
        }
    }
    ,
    108046: (e,t,n)=>{
        "use strict";
        n.d(t, {
            idlizeCall: ()=>r
        });
        var r = function(e, t) {
            void 0 === t && (t = 1e3);
            var n = function() {
                setTimeout((function() {
                    return e()
                }
                ), t)
            };
            return "function" == typeof window.requestIdleCallback ? window.requestIdleCallback(n, {
                timeout: 5e3
            }) : n()
        }
    }
    ,
    173674: (e,t,n)=>{
        "use strict";
        n.d(t, {
            CallStatReachedType: ()=>p.CallStatReachedType,
            CallStatResult: ()=>p.CallStatResult,
            CallStatFailReason: ()=>p.CallStatFailReason,
            CallStatSource: ()=>p.CallStatSource,
            CallActionEventType: ()=>p.CallActionEventType,
            VIDEO_SLOTS_COUNT: ()=>h,
            NoiseCancellationTypes: ()=>_,
            VideoResolutionTypes: ()=>l,
            VIDEO_RESOLUTION_STORAGE_KEY: ()=>M,
            VK_HOST: ()=>R,
            LOCALSTORAGE_IS_CALLS_APP_DOWNLOADED: ()=>k,
            DESKTOP_CALLS_SCHEME: ()=>B,
            DESKTOP_CALLS_HOST: ()=>x,
            DESKTOP_CALLS_DOWNLOAD_PAGE: ()=>N,
            DESKTOP_CALLS_DOWNLOAD: ()=>U,
            CALLS_DESKTOP_APP_NOTIFICATION: ()=>W,
            DESKTOP_CALLS_FILENAME: ()=>F,
            VideoHeight: ()=>m,
            VideoWidth: ()=>f,
            ParticipantsManagementMode: ()=>g,
            MediaPermissionType: ()=>v,
            ErrorHandleType: ()=>E,
            CallErrorType: ()=>y,
            MediaError: ()=>w,
            FatalError: ()=>b,
            SearchResultType: ()=>C,
            Mode: ()=>T,
            E_ACTION: ()=>D,
            CallType: ()=>A,
            UIMode: ()=>S,
            NotificationType: ()=>P,
            SdkHandType: ()=>O,
            SdkErrorType: ()=>I,
            defaultNotificationLifeSpan: ()=>V,
            VOLUME_LEVEL_DETECTION: ()=>H,
            DEFAULT_AVATAR: ()=>j,
            DEFAULT_GROUP_CALL_PHOTO: ()=>G,
            HANGUP_DELAY: ()=>q,
            CLIENT_ERROR_UNKNOWN: ()=>$,
            SERVER_ERROR_UNKNOWN: ()=>Y,
            SERVER_ERROR_INVALID_REQUEST: ()=>z,
            SERVER_ERROR_FLOOD_CONTROL: ()=>X,
            SERVER_ERROR_INTERNAL: ()=>Q,
            SERVER_ERROR_OLD_RECEIVER_APP: ()=>J,
            SERVER_ERROR_PRIVACY: ()=>Z,
            SERVER_ERROR_BUSY: ()=>ee,
            SERVER_ERROR_REQUIRE_AUTH: ()=>te,
            SERVER_ERROR_MESSAGES_CALL_JOIN_NOT_ALLOWED: ()=>ne,
            SERVER_ERROR_MESSAGES_CALL_NOT_FOUND: ()=>re,
            SERVER_ERROR_MESSAGES_CALL_INVALID_JOIN_LINK: ()=>ie,
            SDK_ERROR_AUTH: ()=>oe,
            POPUP_SETTINGS: ()=>ae,
            POPUP_TRANSLATION: ()=>se,
            POPUP_TRANSLATION_START_COUNTDOWN: ()=>ce,
            POPUP_TRANSLATION_STOP: ()=>_e,
            POPUP_TRANSLATION_SHARE: ()=>le,
            POPUP_EXIT: ()=>ue,
            POPUP_UNMUTE_REQUEST: ()=>de,
            POPUP_UNMUTE_AUDIO_REQUEST: ()=>pe,
            POPUP_ADMIN_PIN_UNMUTE_REQUEST: ()=>he,
            POPUP_TRANSFER_ADMIN_RIGHTS: ()=>me,
            POPUP_VIRUTAL_BACKGROUND: ()=>fe,
            POPUP_UPLOAD_BACKGROUND_PHOTO: ()=>ge,
            POPUP_UPLOAD_BACKGROUND_ERROR: ()=>ve,
            POPUP_ON_CALL_HANGUP_BUSY: ()=>Ee,
            POPUP_ON_CALL_HANGUP_KILLED: ()=>ye,
            POPUP_ON_CALL_HANGUP_REMOVED: ()=>we,
            POPUP_ON_CALL_HANGUP_BANNED: ()=>be,
            POPUP_ON_CALL_SEND_LINK: ()=>Ce,
            POPUP_SHARE_PLANNED_CALL: ()=>Te,
            POPUP_PLAN_CALENDAR_EVENT: ()=>De,
            HANGUP_TYPE_BUSY: ()=>Ae,
            HANGUP_TYPE_CALLEE_IS_OFFLINE: ()=>Se,
            HANGUP_TYPE_CALLER_IS_BLOCKED: ()=>Pe,
            HANGUP_TYPE_CANCELED: ()=>Oe,
            HANGUP_TYPE_EXTERNAL_API_ERROR: ()=>Ie,
            HANGUP_TYPE_FAILED: ()=>Me,
            HANGUP_TYPE_HUNGUP: ()=>Re,
            HANGUP_TYPE_MISSED: ()=>Le,
            HANGUP_TYPE_NOT_FRIENDS: ()=>ke,
            HANGUP_TYPE_OLD_VERSION: ()=>Be,
            HANGUP_TYPE_REJECTED: ()=>xe,
            HANGUP_TYPE_REMOVED: ()=>Ne,
            HANGUP_TYPE_SERVICE_DISABLED: ()=>Ue,
            HANGUP_TYPE_UNKNOWN_ERROR: ()=>We,
            HANGUP_TYPE_UNSUPPORTED: ()=>Fe,
            FLAG_OUTBOUND: ()=>Ke,
            FLAG_DELETED: ()=>Ve,
            FLAG_SPAM: ()=>He,
            INCOMING_CALL: ()=>je,
            ADD_MESSAGE: ()=>Ge,
            CONVERSATION_UPDATED: ()=>qe,
            MAIL_CHAT_UPDATE_TYPE_CALL_IN_PROGRESS_CHANGED: ()=>$e,
            READ_INBOUND: ()=>Ye,
            SET_FLAGS: ()=>ze,
            EDIT_MESSAGE: ()=>Xe,
            REPLACE_MESSAGE: ()=>Qe,
            DELETE_DIALOG: ()=>Je,
            COUNT_OF_GROUP_MEMBERS_TO_LOAD: ()=>Ze,
            KickParticipantType: ()=>K,
            CHAT_PEER_ID_OFFSET: ()=>nt,
            EVideoEffectType: ()=>et,
            EVideoOptionType: ()=>tt,
            LS_KEYS: ()=>rt,
            VIRTUAL_BACKGROUND_BLUR_ID: ()=>it,
            CALL_HANGUP_MODAP_MAP: ()=>ot
        });
        var r, i, o, a, s, c, _, l, u = n(464380), d = n(761108), p = n(363035), h = 30;
        !function(e) {
            e.NEURAL = "NEURAL",
            e.SIMPLE = "SIMPLE",
            e.NONE = "NONE"
        }(_ || (_ = {})),
        function(e) {
            e.SD = "SD",
            e.HD = "HD",
            e.FHD = "FHD"
        }(l || (l = {}));
        var m, f, g, v, E, y, w, b, C, T, D, A, S, P, O, I, M = "calls_video_resolution", R = "vk.com", L = "https://" + R, k = "vkcalls:calls_app_downloaded", B = "vkcalls://", x = R, N = L + "/video-calls", U = ((r = {})[d.OS.WINDOWS] = "https://vkcalls-native-ac.vk-apps.com/latest/vk-calls.exe",
        r[d.OS.MAC] = "https://vkcalls-native-ac.vk-apps.com/latest/vk-calls.dmg",
        r[d.OS.LINUX] = {
            deb: (i = {},
            i[d.ARCH.X64] = "https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-amd64.deb",
            i[d.ARCH.X86] = "https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-i386.deb",
            i),
            rpm: (o = {},
            o[d.ARCH.X64] = "https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-x86_64.rpm",
            o[d.ARCH.X86] = "https://vkcalls-native-ac.vk-apps.com/latest/vk-calls-i686.rpm",
            o)
        },
        r), W = "calls_desktop_app_notification", F = ((a = {})[d.OS.WINDOWS] = "vk-calls.exe",
        a[d.OS.MAC] = "vk-calls.dmg",
        a[d.OS.LINUX] = {
            deb: (s = {},
            s[d.ARCH.X64] = "vk-calls-amd64.deb",
            s)
        },
        a);
        !function(e) {
            e[e.SD = 360] = "SD",
            e[e.HD = 720] = "HD",
            e[e.FHD = 1080] = "FHD"
        }(m || (m = {})),
        function(e) {
            e[e.SD = 640] = "SD",
            e[e.HD = 1280] = "HD",
            e[e.FHD = 1920] = "FHD"
        }(f || (f = {})),
        function(e) {
            e[e.SINGLE = 0] = "SINGLE",
            e[e.ALL = 1] = "ALL",
            e[e.SINGLE_AUDIO = 2] = "SINGLE_AUDIO",
            e[e.SINGLE_VIDEO = 3] = "SINGLE_VIDEO",
            e[e.ALL_AUDIO = 4] = "ALL_AUDIO",
            e[e.ALL_VIDEO = 5] = "ALL_VIDEO"
        }(g || (g = {})),
        function(e) {
            e[e.DENY = 0] = "DENY",
            e[e.ONCE = 1] = "ONCE",
            e[e.ALLOW = 1 / 0] = "ALLOW"
        }(v || (v = {})),
        function(e) {
            e[e.DECLINE = 0] = "DECLINE",
            e[e.PROCESS = 1] = "PROCESS",
            e[e.FATAL = 2] = "FATAL"
        }(E || (E = {})),
        function(e) {
            e.ALREADY_IN_CALL = "already_in_call",
            e.CANT_REACH_API = "cant_reach_api"
        }(y || (y = {})),
        function(e) {
            e.MIC_CAMERA_PERMISSION = "mic_camera",
            e.CAMERA_PERMISSION = "camera",
            e.MIC_PERMISSION = "mic",
            e.CAMERA_ACCESS = "cameralock",
            e.MIC_ACCESS = "miclock",
            e.MIC_NOT_FOUND = "nomic",
            e.SCREEN_PERMISSION = "screenpermission",
            e.SCREEN_ACCESS = "screenlock"
        }(w || (w = {})),
        function(e) {
            e.AUTH = "auth"
        }(b || (b = {})),
        function(e) {
            e[e.HEADER = 0] = "HEADER",
            e[e.CALL_ALL_IN_CHAT = 1] = "CALL_ALL_IN_CHAT",
            e[e.MEMBERS_MORE = 2] = "MEMBERS_MORE",
            e[e.FRIENDS_MORE = 3] = "FRIENDS_MORE",
            e[e.GROUP_MEMBERS_MORE = 4] = "GROUP_MEMBERS_MORE"
        }(C || (C = {})),
        function(e) {
            e[e.READY = 0] = "READY",
            e[e.CALL = 1] = "CALL",
            e[e.INCOMING = 2] = "INCOMING",
            e[e.JOIN = 3] = "JOIN",
            e[e.ERROR = 4] = "ERROR",
            e[e.FEEDBACK = 5] = "FEEDBACK",
            e[e.START = 6] = "START",
            e[e.CALL_BY = 7] = "CALL_BY",
            e[e.CREATE_CALL = 8] = "CREATE_CALL",
            e[e.BLOCK = 9] = "BLOCK"
        }(T || (T = {})),
        function(e) {
            e.LOAD_PEERS = "load_peer",
            e.CHANGE_MODE = "change_mode",
            e.CALL_STATE = "call_state",
            e.REMOVE_USER = "remove_user",
            e.TIME_START = "time_start",
            e.LOCAL_TIME_START = "local_time_start",
            e.HANGUP = "hangup",
            e.SET_CHAT_INFO = "set_chat_info",
            e.GROUP_CALL_SETUP = "group_call_setup",
            e.TOGGLE_POPUP = "toggle_popup",
            e.UPDATE_HASH = "update_hash",
            e.CHANGE_UI_MODE = "change_ui_mode",
            e.SET_ORATOR = "set_orator",
            e.TOGGLE_ORATOR_MODE = "toggle_orator_mode",
            e.TOGGLE_PARTICIPANTS_ASIDE = "toggle_participants_aside",
            e.SET_PINNED_PARTICIPANT = "set_pinned_participant",
            e.SET_ADMIN_PINNED_PARTICIPANT = "set_admin_pinned_participant",
            e.SET_SCREEN_SHARING_PINNED_PARTICIPANT = "set_screen_sharing_pinned_participant",
            e.MANAGEMENT = "management",
            e.CALL_NOTIFICATION = "call_notification",
            e.JOIN = "join",
            e.CALL_BY_NAME = "call_by_name",
            e.CREATE_CALL_BY_LINK = "create_call_by_link",
            e.ERROR = "error",
            e.CHANGE_PARTICIPANT_ROLES = "change_participant_roles",
            e.SET_SCREEN_SHARER = "set_screen_sharer",
            e.SET_FRIENDS = "set_friends",
            e.SET_GROUP_MEMBERS = "set_group_members",
            e.SET_FOUNDED_GROUP_MEMBERS = "set_group_members",
            e.SET_SPEAKERS = "set_speakers",
            e.UPDATE_PARTICIPANTS_BATCH = "update_participants_batch",
            e.SET_UNREAD_COUNT = "set_unread_count",
            e.SHOW_CAUTION_BOX = "show_caution_box",
            e.SHOW_LOADER = "show_loader",
            e.SET_TOOLTIP = "set_tooltip",
            e.SET_ENTRYPOINT = "set_entrypoint",
            e.MANUAL_ADD_PARTICIPANTS = "manual_add_participants",
            e.SET_TRANSLATION = "set_translation",
            e.UPDATE_ANON_SECRET = "update_anon_token",
            e.TOGGLE_PARTICIPANTS_MANAGEMENT = "toggle_participants_management",
            e.TOGGLE_PARTICIPANTS_KICK = "toggle_participants_kick",
            e.TOGGLE_ADMIN_ASSIGNMENT = "toggle_admin_assignment",
            e.SET_NOISE_CANCELLATION = "set_noise_cancellation",
            e.CHANGE_LOCAL_VIDEO_RESOLUTION = "change_local_video_resolution",
            e.SET_CONVERSATION_OPTIONS = "set_conversation_options",
            e.SET_PRIVACY_SETTINGS = "set_privacy_settings",
            e.UNBAN_PARTICIPANTS = "unban_participants",
            e.SET_GROUP = "set_group",
            e.SET_WAITING_HALL = "set_waiting_hall",
            e.SET_PUSH_TO_TALK_ENABLE = "set_push_to_talk_enable",
            e.SET_GRID_SCROLL_POSITION = "set_grid_scroll_position",
            e.SET_ORATOR_SCROLL_POSITION = "set_orator_scroll_position",
            e.SET_SHOW_DESKTOP_NOTIFICATION = "set_show_desktop_notification",
            e.SET_SHOW_WARNING_DESKTOP_NOTIFICATION = "set_show_warning_desktop_notification",
            e.SET_START_OPTIONS = "set_start_params",
            e.VB_SET_USER_PHOTOS = "vb_set_user_photos",
            e.VB_ADD_USER_PHOTO = "vb_add_user_photo",
            e.VB_REMOVE_USER_PHOTO = "vb_remove_user_photo",
            e.VB_SET_VIDEO_OPTIONS = "vb_set_video_options",
            e.SET_CALL_PERMISSIONS = "set_call_permissions",
            e.CLEAN_LAST_CALL_DATA = "clean_last_call_data",
            e.SET_LAST_CALL_DATA = "set_last_call_data",
            e.SET_LOCAL_DEVICE = "set_local_device",
            e.SET_PLANNED_CALENDAR_EVENT = "set_planned_calendar_event",
            e.TOGGLE_POPUP_CALENDAR_PLANNING = "toggle_popup_calendar_planning",
            e.SET_PLANNED_CALENDAR_EVENT_OWNER_OPTIONS = "set_planned_calendar_event_owner_options"
        }(D || (D = {})),
        function(e) {
            e.AUDIO = "audio",
            e.VIDEO = "video"
        }(A || (A = {})),
        function(e) {
            e.DEFAULT = "default",
            e.COLLAPSED = "collapsed",
            e.FULLSCREEN = "fullscreen"
        }(S || (S = {})),
        function(e) {
            e.SPEAKING_ON_MUTE = "SPEAKING_ON_MUTE",
            e.RAISED_HAND = "RAISED_HAND",
            e.SCREEN_SHARING_STARTED = "SCREEN_SHARING_STARTED",
            e.BAD_NETWORK_CONNECTION = "BAD_NETWORK_CONNECTION",
            e.BAD_NETWORK_CONNECTION_DISABLE_CAMERA = "BAD_NETWORK_CONNECTION_DISABLE_CAMERA",
            e.ADMIN_ROLE_GRANTED = "ADMIN_ROLE_GRANTED",
            e.USER_GRANTED_WITH_ADMIN_ROLE = "USER_GRANTED_WITH_ADMIN_ROLE",
            e.PINNED_BY_ADMIN = "PINNED_BY_ADMIN",
            e.USER_PINNED_BY_ADMIN = "USER_PINNED_BY_ADMIN",
            e.PUSH_TO_TALK = "PUSH_TO_TALK",
            e.CONNECTING = "CONNECTING",
            e.LINK_COPIED_TO_CLIPBOARD = "LINK_COPIED_TO_CLIPBOARD",
            e.ADMIN_MUTE = "ADMIN_MUTE",
            e.ADMIN_MUTE_AUDIO = "ADMIN_MUTE_AUDIO",
            e.ADMIN_MUTE_VIDEO = "ADMIN_MUTE_VIDEO",
            e.ADMIN_MUTE_PERMANENT = "ADMIN_MUTE_PERMANENT",
            e.ADMIN_MUTE_PERMANENT_AUDIO = "ADMIN_MUTE_PERMANENT_AUDIO",
            e.ADMIN_MUTE_PERMANENT_VIDEO = "ADMIN_MUTE_PERMANENT_VIDEO",
            e.ADMIN_UNMUTE_PERMANENT = "ADMIN_UNMUTE_PERMANENT",
            e.ADMIN_UNMUTE_PERMANENT_AUDIO = "ADMIN_UNMUTE_PERMANENT_AUDIO",
            e.ADMIN_UNMUTE_PERMANENT_VIDEO = "ADMIN_UNMUTE_PERMANENT_VIDEO"
        }(P || (P = {})),
        function(e) {
            e.LOWERED = "0",
            e.RAISED = "1"
        }(O || (O = {})),
        function(e) {
            e.NETWORK = "network_error",
            e.API = "api_error"
        }(I || (I = {}));
        var K, V = 5e3, H = .25, j = L + "/images/camera_400.png", G = L + "/images/call_convo_stub.png", q = 2, $ = -2, Y = 1, z = 8, X = 9, Q = 10, J = 923, Z = 928, ee = 948, te = 960, ne = 963, re = 951, ie = 954, oe = 401, ae = "settings", se = "translation", ce = "translation_start_countdown", _e = "translation_stop", le = "translation_stop_share", ue = "exit", de = "unmute_request", pe = "unmute_audio_request", he = "admin_pin_unmute_request", me = "transfer_admin_rights", fe = "virtual_background", ge = "virtual_upload_background_photo", ve = "virtual_upload_background_error", Ee = "on_call_hangup_busy", ye = "on_call_hangup_killed", we = "on_call_hangup_removed", be = "on_call_hangup_banned", Ce = "on_call_send_link", Te = "share_planned_call", De = "popup_plan_calendar_event", Ae = u.HangupType.BUSY, Se = u.HangupType.CALLEE_IS_OFFLINE, Pe = u.HangupType.CALLER_IS_BLOCKED, Oe = u.HangupType.CANCELED, Ie = u.HangupType.EXTERNAL_API_ERROR, Me = u.HangupType.FAILED, Re = u.HangupType.HUNGUP, Le = u.HangupType.MISSED, ke = u.HangupType.NOT_FRIENDS, Be = u.HangupType.OLD_VERSION, xe = u.HangupType.REJECTED, Ne = u.HangupType.REMOVED, Ue = u.HangupType.SERVICE_DISABLED, We = u.HangupType.UNKNOWN_ERROR, Fe = u.HangupType.UNSUPPORTED, Ke = 2, Ve = 128, He = 64, je = "incoming_call", Ge = "event_add_message", qe = "event_chat_updated", $e = 19, Ye = "event_read_inbound", ze = "event_set_flags", Xe = "event_edit_message", Qe = "event_replace_message", Je = "event_delete_dialog", Ze = 500;
        !function(e) {
            e[e.CALL = 0] = "CALL",
            e[e.WAITING_HALL = 1] = "WAITING_HALL"
        }(K || (K = {}));
        var et, tt, nt = 2e9;
        !function(e) {
            e.BACKGROUND = "calls_background",
            e.BLUR = "calls_blur",
            e.NONE = "calls_none",
            e.ADD = "calls_add"
        }(et || (et = {})),
        function(e) {
            e.IS_VIDEO_MIRRORED = "calls_is_video_mirrored"
        }(tt || (tt = {}));
        var rt = {
            VIRTUAL_BACKGROUND_EFFECT: "calls_virtual_background_effect",
            VIRTUAL_BACKGROUND_EFFECT_SELECTED_TS: "calls_virtual_background_effect_selected_ts",
            VIDEO_OPTIONS: "calls_video_options"
        }
          , it = -16
          , ot = ((c = {})[u.HangupType.BUSY] = Ee,
        c[u.HangupType.KILLED] = ye,
        c[u.HangupType.BANNED] = be,
        c[u.HangupType.REMOVED] = we,
        c)
    }
    ,
    761108: (e,t,n)=>{
        "use strict";
        n.d(t, {
            OS: ()=>i,
            ARCH: ()=>o,
            BROWSER: ()=>a,
            Platform: ()=>p,
            getBrowserInfo: ()=>h
        });
        var r, i, o, a, s = n(570655), c = n(489588);
        !function(e) {
            e.WINDOWS = "windows",
            e.MAC = "mac",
            e.ANDROID = "android",
            e.IOS = "ios",
            e.LINUX = "linux",
            e.UNKNOWN = "unknown"
        }(i || (i = {})),
        function(e) {
            e.X86 = "x86",
            e.X64 = "x64",
            e.ARM = "arm"
        }(o || (o = {})),
        function(e) {
            e.CHROME = "chrome",
            e.FIREFOX = "firefox",
            e.SAFARI = "safari",
            e.OPERA = "opera",
            e.YANDEX = "yandex",
            e.IE = "ie",
            e.EDGE = "edge"
        }(a || (a = {}));
        var _ = ((r = {})[i.ANDROID] = /Android/i,
        r[i.IOS] = /(iPhone|iPad|iPod)/i,
        r[i.WINDOWS] = /Win/i,
        r[i.IOS] = /(iPhone|iPad|iPod)/i,
        r[i.ANDROID] = /Android/i,
        r[i.MAC] = /(MacPPC|MacIntel|Mac_PowerPC|Macintosh|Mac OS X)/i,
        r[i.LINUX] = /(Linux|X11(?!.*CrOS))/i,
        r)
          , l = /(x86_64|x86-64|win64|x64;|amd64|wow64|x64_64)/i
          , u = /Mobile|mini|Fennec|Android|iP(ad|od|hone)|opera (mini|mobi)/i
          , d = new Map
          , p = {
            get OS() {
                var e, t;
                if (d.has("os"))
                    return d.get("os");
                var n = window.navigator.userAgent;
                try {
                    for (var r = (0,
                    s.__values)(Object.entries(_)), o = r.next(); !o.done; o = r.next()) {
                        var a = (0,
                        s.__read)(o.value, 2)
                          , c = a[0]
                          , l = a[1];
                        if (l && l.test(n))
                            return d.set("os", c),
                            c
                    }
                } catch (t) {
                    e = {
                        error: t
                    }
                } finally {
                    try {
                        o && !o.done && (t = r.return) && t.call(r)
                    } finally {
                        if (e)
                            throw e.error
                    }
                }
                return d.set("os", i.UNKNOWN),
                i.UNKNOWN
            },
            get ARCH() {
                if (d.has("arch"))
                    return d.get("arch");
                var e = window.navigator
                  , t = e.userAgent
                  , n = e.platform;
                return l.test(t) || "MacIntel" === n || "Linux x86_64" === n ? (d.set("arch", o.X64),
                o.X64) : /arm/i.test(t) ? (d.set("arch", o.ARM),
                o.ARM) : (d.set("arch", o.X86),
                o.X86)
            },
            get BROWSER() {
                return h().name.toLowerCase()
            },
            get isChromeBased() {
                return h().chromeBased
            },
            get isMobile() {
                if (d.has("isMobile"))
                    return d.get("isMobile");
                var e = window.navigator.appVersion
                  , t = u.test(e);
                return d.set("isMobile", t),
                t
            },
            get isIPad() {
                return c.isIPad || c.isIPadOS
            }
        };
        function h() {
            if (d.has("browserInfo"))
                return d.get("browserInfo");
            var e = function() {
                var e, t = !1, n = 0, r = window.navigator, i = r.userAgent, o = r.appName, s = r.appVersion, c = i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)([\d.]+)/i) || [];
                if (/trident/i.test(c[1]))
                    return e = /\brv[ :]+(\d+)([\d.]+)/g.exec(i),
                    {
                        name: a.IE,
                        version: e && e[1] || "Unknown",
                        fullVersion: e && e[1] ? "" + e[1] + (e[2] || "") : "Unknown",
                        chromeBased: t,
                        chromeVersion: n
                    };
                if ("Safari" === c[1]) {
                    if (e = i.match(/\bEdge\/(\d+)([\d.])+/))
                        return {
                            name: a.EDGE,
                            version: e[1] || "Unknown",
                            fullVersion: e[1] ? "" + e[1] + (e[2] || "") : "Unknown",
                            chromeBased: t,
                            chromeVersion: n
                        };
                    if (e = i.match(/\bCriOS\/(\d+)([\d.]+)/))
                        return {
                            name: a.CHROME,
                            version: e[1],
                            fullVersion: "" + e[1] + e[2],
                            chromeBased: !0,
                            chromeVersion: e[1]
                        };
                    if (e = i.match(/\bFxiOS\/(\d+)([\d.]+)/))
                        return {
                            name: a.FIREFOX,
                            version: e[1],
                            fullVersion: "" + e[1] + e[2],
                            chromeBased: t,
                            chromeVersion: n
                        };
                    if (e = i.match(/\bYaBrowser\/(\d+)([\d.]+)/))
                        return {
                            name: a.YANDEX,
                            version: e[1],
                            fullVersion: "" + e[1] + e[2],
                            chromeBased: t,
                            chromeVersion: n
                        };
                    if (e = i.match(/\bOPT\/(\d+)([\d.]+)/))
                        return {
                            name: a.OPERA,
                            version: e[1],
                            fullVersion: "" + e[1] + e[2],
                            chromeBased: t,
                            chromeVersion: n
                        }
                }
                if ("Chrome" === c[1]) {
                    if (n = Number(c[2]),
                    t = !0,
                    e = i.match(/\bOPR\/(\d+)([\d.]+)/))
                        return {
                            name: a.CHROME,
                            version: e[1] || "Unknown",
                            fullVersion: e[1] ? "" + e[1] + (e[2] || "") : "Unknown",
                            chromeBased: t,
                            chromeVersion: n
                        };
                    if (e = i.match(/\bYaBrowser\/(\d+)([\d.]+)/))
                        return {
                            name: a.YANDEX,
                            version: e[1] || "Unknown",
                            fullVersion: e[1] ? "" + e[1] + (e[2] || "") : "Unknown",
                            chromeBased: t,
                            chromeVersion: n
                        };
                    if (e = i.match(/\bEdge?\/(\d+)([\d.]+)/))
                        return {
                            name: a.EDGE,
                            version: e[1] || "Unknown",
                            fullVersion: e[1] ? "" + e[1] + (e[2] || "") : "Unknown",
                            chromeBased: t,
                            chromeVersion: n
                        };
                    if (void 0 !== window.opr && /^(.+\.)?ok.ru$/.test(window.location.host))
                        return {
                            name: a.OPERA,
                            version: "Hidden",
                            fullVersion: "Hidden",
                            chromeBased: t,
                            chromeVersion: n
                        }
                }
                return e = i.match(/version\/(\d+)([\d.]+)/i),
                {
                    name: c[2] ? c[1] : o,
                    version: e && e[1] || c[2] || s,
                    fullVersion: e && e[1] ? "" + e[1] + (e[2] || "") : c[2] ? "" + c[2] + (c[3] || "") : s,
                    chromeBased: t,
                    chromeVersion: n
                }
            }();
            return d.set("browserInfo", e),
            e
        }
    }
    ,
    363035: (e,t,n)=>{
        "use strict";
        var r, i, o, a, s, c;
        n.d(t, {
            CallStatReachedType: ()=>r,
            CallStatResult: ()=>i,
            CallStatFailReason: ()=>o,
            CallStatSource: ()=>a,
            CallActionEventType: ()=>s,
            CallStatMuteType: ()=>c
        }),
        function(e) {
            e.AUDIO = "ok_audio",
            e.AUDIO_TO_VIDEO = "ok_video",
            e.VIDEO = "ok_started_as_video",
            e.GROUP_AUDIO = "group_audio",
            e.GROUP_AUDIO_TO_VIDEO = "group_video",
            e.GROUP_VIDEO = "group_started_as_video"
        }(r || (r = {})),
        function(e) {
            e.SUCCESS = "success",
            e.FAIL = "fail"
        }(i || (i = {})),
        function(e) {
            e.REMOTE_NO_CONNECT = "push_not_delivered",
            e.REMOTE_FAILED_ACCEPT = "cant_connect",
            e.REMOTE_DECLINE = "declined_remote",
            e.LOCAL_DECLINE = "declined_local",
            e.REMOTE_TIMEOUT = "declined_timeout",
            e.REMOTE_BUSY = "busy",
            e.CONNECTION_LOST = "lost_connection"
        }(o || (o = {})),
        function(e) {
            e.CONVO_HEADER = "im_header",
            e.CONVO_SNIPPET = "im_message",
            e.CONVO_LIST = "im_create",
            e.CONVO_JOIN_SNIPPET = "im_join_message",
            e.CONVO_JOIN_HEADER = "im_join_header",
            e.CONVO_JOIN_BANNER = "im_join_header",
            e.FRIENDS_LIST = "friends_list",
            e.LINK_JOIN_SNIPPET = "join_deeplink",
            e.LINK_JOIN_PAGE = "join_deeplink",
            e.PROFILE = "profile",
            e.WIDGET = "im_widget",
            e.FAST_CHAT = "fast_chat",
            e.HISTORY = "history",
            e.HISTORY_FRIENDS_LIST = "history_friends_list",
            e.HISTORY_CREATE = "history_create",
            e.LINK = "link",
            e.STANDALONE = "standalone"
        }(a || (a = {})),
        function(e) {
            e.OUTGOING_CALL_STARTED_VIDEO = "OutgoingCallStartedVideo",
            e.OUTGOING_CALL_STARTED_AUDIO = "OutgoingCallStartedAudio",
            e.OUTGOING_CALL_ADD_PARTICIPANTS_SENT = "OutgoingCallAddParticipantsSent",
            e.OUTGOING_CALL_REMOTE_RINGING = "OutgoingCallRemoteRinging",
            e.OUTGOING_CALL_ACCEPTED_REMOTELY = "OutgoingCallAcceptedRemotely",
            e.OUTGOING_CALL_FAILED = "OutgoingCallFailed",
            e.OUTGOING_CALL_COMPLETED = "OutgoingCallCompleted",
            e.INCOMING_CALL_RECEIVED = "IncomingCallReceived",
            e.INCOMING_CALL_ACCEPTED = "IncomingCallAccepted",
            e.CALL_DECLINED_OR_HANGED_LOCALLY = "CallDeclinedOrHangedLocally",
            e.CALL_DECLINED_OR_HANGED_REMOTELY = "CallDeclinedOrHangedRemotely",
            e.CALL_CONNECTED = "CallConnected",
            e.CALL_DISCONNECTED = "CallDisconnected",
            e.VIDEO_ENABLED = "VideoEnabled",
            e.VIDEO_DISABLED = "VideoDisabled",
            e.RELAY_CONNECTION_ESTABLISHED = "RelayConnectionEstablished",
            e.USER_FEEDBACK_RECEIVED = "UserFeedbackReceived",
            e.SYSTEM_STAT = "SystemStat",
            e.GROUP_CALL_JOINED = "GroupCallJoined",
            e.HAND_RAISED = "HandRaised",
            e.HAND_LOWERED = "HandLowered",
            e.SCREEN_SHARING_STARTED = "ScreenSharingStarted",
            e.SCREEN_SHARING_STOPPED = "ScreenSharingStopped",
            e.ALL_MICS_DISABLED = "AllMicsDisabled",
            e.MIC_OFF_WHILE_TALKING_ALERT = "MicOffWhileTalkingAlert",
            e.MIC_OFF_WHILE_TALKING_ENABLE_CLICK = "MicOffWhileTalkingEnableClick",
            e.VIDEO_DISABLED_DUE_TO_BAD_CONNECTION_ALERT = "VideoDisabledDueToBadConnectionAlert",
            e.ALL_MICS_AND_VIDEO_DISABLED = "AllMicsAndVideoDisabled",
            e.USER_MICS_AND_VIDEO_DISABLED = "UserMicsAndVideoDisabled",
            e.ASK_ALL_TO_UNMUTE = "AskAllToUnmute",
            e.ASK_USER_TO_UNMUTE = "AskUserToUnmute",
            e.ASSIGN_ADMIN = "AssignAdmin",
            e.RETRIEVE_ADMIN = "RetrieveAdmin",
            e.ADMIN_PIN = "AdminPin",
            e.ADMIN_UNPIN = "AdminUnpin",
            e.VIRTUAL_BACKGROUND_SELECTED = "VirtualBackgroundSelected",
            e.VIRTUAL_BACKGROUND_DISABLED = "VirtualBackgroundDisabled",
            e.CUSTOM_VIRTUAL_BACKGROUND_SELECTED = "CustomVirtualBackgroundSelected",
            e.CUSTOM_VIRTUAL_BACKGROUND_ADDED = "CustomVirtualBackgroundAdded",
            e.CUSTOM_VIRTUAL_BACKGROUND_DELETED = "CustomVirtualBackgroundDeleted",
            e.CUSTOM_VIRTUAL_BACKGROUND_DISABLED = "CustomVirtualBackgroundDisabled",
            e.CALL_SCHEDULED = "CallScheduled",
            e.SCHEDULED_CALL_EDITED = "ScheduledCallEdited"
        }(s || (s = {})),
        function(e) {
            e[e.ONCE = 0] = "ONCE",
            e[e.PERMANENT = 1] = "PERMANENT"
        }(c || (c = {}))
    }
    ,
    545580: (e,t,n)=>{
        "use strict";
        n.d(t, {
            default: ()=>r
        });
        const r = (0,
        n(640447).adapterFactory)({
            window: "undefined" == typeof window ? void 0 : window
        })
    }
    ,
    640447: (e,t,n)=>{
        "use strict";
        n.d(t, {
            adapterFactory: ()=>l
        });
        var r = n(786643)
          , i = n(165070)
          , o = n(624854)
          , a = n(960057)
          , s = n(809080)
          , c = n(155938)
          , _ = n(548864);
        function l({window: e}={}, t={
            shimChrome: !0,
            shimFirefox: !0,
            shimEdge: !0,
            shimSafari: !0
        }) {
            const n = r.log
              , l = r.detectBrowser(e)
              , u = {
                browserDetails: l,
                commonShim: _,
                extractVersion: r.extractVersion,
                disableLog: r.disableLog,
                disableWarnings: r.disableWarnings
            };
            switch (l.browser) {
            case "chrome":
                if (!i || !i.shimPeerConnection || !t.shimChrome)
                    return n("Chrome shim is not included in this adapter release."),
                    u;
                if (null === l.version)
                    return n("Chrome shim can not determine version, not shimming."),
                    u;
                n("adapter.js shimming chrome."),
                u.browserShim = i,
                i.shimGetUserMedia(e),
                i.shimMediaStream(e),
                i.shimPeerConnection(e),
                i.shimOnTrack(e),
                i.shimAddTrackRemoveTrack(e),
                i.shimGetSendersWithDtmf(e),
                i.shimGetStats(e),
                i.shimSenderReceiverGetStats(e),
                i.fixNegotiationNeeded(e),
                _.shimRTCIceCandidate(e),
                _.shimConnectionState(e),
                _.shimMaxMessageSize(e),
                _.shimSendThrowTypeError(e),
                _.removeAllowExtmapMixed(e);
                break;
            case "firefox":
                if (!a || !a.shimPeerConnection || !t.shimFirefox)
                    return n("Firefox shim is not included in this adapter release."),
                    u;
                n("adapter.js shimming firefox."),
                u.browserShim = a,
                s.shimGetUserMedia(e),
                a.shimPeerConnection(e),
                a.shimOnTrack(e),
                a.shimRemoveStream(e),
                a.shimSenderGetStats(e),
                a.shimReceiverGetStats(e),
                a.shimRTCDataChannel(e),
                a.shimAddTransceiver(e),
                a.shimGetParameters(e),
                a.shimCreateOffer(e),
                a.shimCreateAnswer(e),
                _.shimRTCIceCandidate(e),
                _.shimConnectionState(e),
                _.shimMaxMessageSize(e),
                _.shimSendThrowTypeError(e);
                break;
            case "edge":
                if (!o || !o.shimPeerConnection || !t.shimEdge)
                    return n("MS edge shim is not included in this adapter release."),
                    u;
                n("adapter.js shimming edge."),
                u.browserShim = o,
                o.shimGetUserMedia(e),
                o.shimGetDisplayMedia(e),
                o.shimPeerConnection(e),
                o.shimReplaceTrack(e),
                _.shimMaxMessageSize(e),
                _.shimSendThrowTypeError(e);
                break;
            case "safari":
                if (!c || !t.shimSafari)
                    return n("Safari shim is not included in this adapter release."),
                    u;
                n("adapter.js shimming safari."),
                u.browserShim = c,
                c.shimRTCIceServerUrls(e),
                c.shimCreateOfferLegacy(e),
                c.shimCallbacksAPI(e),
                c.shimLocalStreamsAPI(e),
                c.shimRemoteStreamsAPI(e),
                c.shimTrackEventTransceiver(e),
                c.shimGetUserMedia(e),
                c.shimAudioContext(e),
                _.shimRTCIceCandidate(e),
                _.shimMaxMessageSize(e),
                _.shimSendThrowTypeError(e),
                _.removeAllowExtmapMixed(e);
                break;
            default:
                n("Unsupported browser!")
            }
            return u
        }
    }
    ,
    165070: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            shimGetUserMedia: ()=>i.shimGetUserMedia,
            shimGetDisplayMedia: ()=>o.shimGetDisplayMedia,
            shimMediaStream: ()=>a,
            shimOnTrack: ()=>s,
            shimGetSendersWithDtmf: ()=>c,
            shimGetStats: ()=>_,
            shimSenderReceiverGetStats: ()=>l,
            shimAddTrackRemoveTrackWithNative: ()=>u,
            shimAddTrackRemoveTrack: ()=>d,
            shimPeerConnection: ()=>p,
            fixNegotiationNeeded: ()=>h
        });
        var r = n(786643)
          , i = n(480009)
          , o = n(271533);
        function a(e) {
            e.MediaStream = e.MediaStream || e.webkitMediaStream
        }
        function s(e) {
            if ("object" == typeof e && e.RTCPeerConnection && !("ontrack"in e.RTCPeerConnection.prototype)) {
                Object.defineProperty(e.RTCPeerConnection.prototype, "ontrack", {
                    get() {
                        return this._ontrack
                    },
                    set(e) {
                        this._ontrack && this.removeEventListener("track", this._ontrack),
                        this.addEventListener("track", this._ontrack = e)
                    },
                    enumerable: !0,
                    configurable: !0
                });
                const t = e.RTCPeerConnection.prototype.setRemoteDescription;
                e.RTCPeerConnection.prototype.setRemoteDescription = function() {
                    return this._ontrackpoly || (this._ontrackpoly = t=>{
                        t.stream.addEventListener("addtrack", (n=>{
                            let r;
                            r = e.RTCPeerConnection.prototype.getReceivers ? this.getReceivers().find((e=>e.track && e.track.id === n.track.id)) : {
                                track: n.track
                            };
                            const i = new Event("track");
                            i.track = n.track,
                            i.receiver = r,
                            i.transceiver = {
                                receiver: r
                            },
                            i.streams = [t.stream],
                            this.dispatchEvent(i)
                        }
                        )),
                        t.stream.getTracks().forEach((n=>{
                            let r;
                            r = e.RTCPeerConnection.prototype.getReceivers ? this.getReceivers().find((e=>e.track && e.track.id === n.id)) : {
                                track: n
                            };
                            const i = new Event("track");
                            i.track = n,
                            i.receiver = r,
                            i.transceiver = {
                                receiver: r
                            },
                            i.streams = [t.stream],
                            this.dispatchEvent(i)
                        }
                        ))
                    }
                    ,
                    this.addEventListener("addstream", this._ontrackpoly)),
                    t.apply(this, arguments)
                }
            } else
                r.wrapPeerConnectionEvent(e, "track", (e=>(e.transceiver || Object.defineProperty(e, "transceiver", {
                    value: {
                        receiver: e.receiver
                    }
                }),
                e)))
        }
        function c(e) {
            if ("object" == typeof e && e.RTCPeerConnection && !("getSenders"in e.RTCPeerConnection.prototype) && "createDTMFSender"in e.RTCPeerConnection.prototype) {
                const t = function(e, t) {
                    return {
                        track: t,
                        get dtmf() {
                            return void 0 === this._dtmf && ("audio" === t.kind ? this._dtmf = e.createDTMFSender(t) : this._dtmf = null),
                            this._dtmf
                        },
                        _pc: e
                    }
                };
                if (!e.RTCPeerConnection.prototype.getSenders) {
                    e.RTCPeerConnection.prototype.getSenders = function() {
                        return this._senders = this._senders || [],
                        this._senders.slice()
                    }
                    ;
                    const n = e.RTCPeerConnection.prototype.addTrack;
                    e.RTCPeerConnection.prototype.addTrack = function(e, r) {
                        let i = n.apply(this, arguments);
                        return i || (i = t(this, e),
                        this._senders.push(i)),
                        i
                    }
                    ;
                    const r = e.RTCPeerConnection.prototype.removeTrack;
                    e.RTCPeerConnection.prototype.removeTrack = function(e) {
                        r.apply(this, arguments);
                        const t = this._senders.indexOf(e);
                        -1 !== t && this._senders.splice(t, 1)
                    }
                }
                const n = e.RTCPeerConnection.prototype.addStream;
                e.RTCPeerConnection.prototype.addStream = function(e) {
                    this._senders = this._senders || [],
                    n.apply(this, [e]),
                    e.getTracks().forEach((e=>{
                        this._senders.push(t(this, e))
                    }
                    ))
                }
                ;
                const r = e.RTCPeerConnection.prototype.removeStream;
                e.RTCPeerConnection.prototype.removeStream = function(e) {
                    this._senders = this._senders || [],
                    r.apply(this, [e]),
                    e.getTracks().forEach((e=>{
                        const t = this._senders.find((t=>t.track === e));
                        t && this._senders.splice(this._senders.indexOf(t), 1)
                    }
                    ))
                }
            } else if ("object" == typeof e && e.RTCPeerConnection && "getSenders"in e.RTCPeerConnection.prototype && "createDTMFSender"in e.RTCPeerConnection.prototype && e.RTCRtpSender && !("dtmf"in e.RTCRtpSender.prototype)) {
                const t = e.RTCPeerConnection.prototype.getSenders;
                e.RTCPeerConnection.prototype.getSenders = function() {
                    const e = t.apply(this, []);
                    return e.forEach((e=>e._pc = this)),
                    e
                }
                ,
                Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
                    get() {
                        return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = this._pc.createDTMFSender(this.track) : this._dtmf = null),
                        this._dtmf
                    }
                })
            }
        }
        function _(e) {
            if (!e.RTCPeerConnection)
                return;
            const t = e.RTCPeerConnection.prototype.getStats;
            e.RTCPeerConnection.prototype.getStats = function() {
                const [e,n,r] = arguments;
                if (arguments.length > 0 && "function" == typeof e)
                    return t.apply(this, arguments);
                if (0 === t.length && (0 === arguments.length || "function" != typeof e))
                    return t.apply(this, []);
                const i = function(e) {
                    const t = {};
                    return e.result().forEach((e=>{
                        const n = {
                            id: e.id,
                            timestamp: e.timestamp,
                            type: {
                                localcandidate: "local-candidate",
                                remotecandidate: "remote-candidate"
                            }[e.type] || e.type
                        };
                        e.names().forEach((t=>{
                            n[t] = e.stat(t)
                        }
                        )),
                        t[n.id] = n
                    }
                    )),
                    t
                }
                  , o = function(e) {
                    return new Map(Object.keys(e).map((t=>[t, e[t]])))
                };
                if (arguments.length >= 2) {
                    const r = function(e) {
                        n(o(i(e)))
                    };
                    return t.apply(this, [r, e])
                }
                return new Promise(((e,n)=>{
                    t.apply(this, [function(t) {
                        e(o(i(t)))
                    }
                    , n])
                }
                )).then(n, r)
            }
        }
        function l(e) {
            if (!("object" == typeof e && e.RTCPeerConnection && e.RTCRtpSender && e.RTCRtpReceiver))
                return;
            if (!("getStats"in e.RTCRtpSender.prototype)) {
                const t = e.RTCPeerConnection.prototype.getSenders;
                t && (e.RTCPeerConnection.prototype.getSenders = function() {
                    const e = t.apply(this, []);
                    return e.forEach((e=>e._pc = this)),
                    e
                }
                );
                const n = e.RTCPeerConnection.prototype.addTrack;
                n && (e.RTCPeerConnection.prototype.addTrack = function() {
                    const e = n.apply(this, arguments);
                    return e._pc = this,
                    e
                }
                ),
                e.RTCRtpSender.prototype.getStats = function() {
                    const e = this;
                    return this._pc.getStats().then((t=>r.filterStats(t, e.track, !0)))
                }
            }
            if (!("getStats"in e.RTCRtpReceiver.prototype)) {
                const t = e.RTCPeerConnection.prototype.getReceivers;
                t && (e.RTCPeerConnection.prototype.getReceivers = function() {
                    const e = t.apply(this, []);
                    return e.forEach((e=>e._pc = this)),
                    e
                }
                ),
                r.wrapPeerConnectionEvent(e, "track", (e=>(e.receiver._pc = e.srcElement,
                e))),
                e.RTCRtpReceiver.prototype.getStats = function() {
                    const e = this;
                    return this._pc.getStats().then((t=>r.filterStats(t, e.track, !1)))
                }
            }
            if (!("getStats"in e.RTCRtpSender.prototype) || !("getStats"in e.RTCRtpReceiver.prototype))
                return;
            const t = e.RTCPeerConnection.prototype.getStats;
            e.RTCPeerConnection.prototype.getStats = function() {
                if (arguments.length > 0 && arguments[0]instanceof e.MediaStreamTrack) {
                    const e = arguments[0];
                    let t, n, r;
                    return this.getSenders().forEach((n=>{
                        n.track === e && (t ? r = !0 : t = n)
                    }
                    )),
                    this.getReceivers().forEach((t=>(t.track === e && (n ? r = !0 : n = t),
                    t.track === e))),
                    r || t && n ? Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")) : t ? t.getStats() : n ? n.getStats() : Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))
                }
                return t.apply(this, arguments)
            }
        }
        function u(e) {
            e.RTCPeerConnection.prototype.getLocalStreams = function() {
                return this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))
            }
            ;
            const t = e.RTCPeerConnection.prototype.addTrack;
            e.RTCPeerConnection.prototype.addTrack = function(e, n) {
                if (!n)
                    return t.apply(this, arguments);
                this._shimmedLocalStreams = this._shimmedLocalStreams || {};
                const r = t.apply(this, arguments);
                return this._shimmedLocalStreams[n.id] ? -1 === this._shimmedLocalStreams[n.id].indexOf(r) && this._shimmedLocalStreams[n.id].push(r) : this._shimmedLocalStreams[n.id] = [n, r],
                r
            }
            ;
            const n = e.RTCPeerConnection.prototype.addStream;
            e.RTCPeerConnection.prototype.addStream = function(e) {
                this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                e.getTracks().forEach((e=>{
                    if (this.getSenders().find((t=>t.track === e)))
                        throw new DOMException("Track already exists.","InvalidAccessError")
                }
                ));
                const t = this.getSenders();
                n.apply(this, arguments);
                const r = this.getSenders().filter((e=>-1 === t.indexOf(e)));
                this._shimmedLocalStreams[e.id] = [e].concat(r)
            }
            ;
            const r = e.RTCPeerConnection.prototype.removeStream;
            e.RTCPeerConnection.prototype.removeStream = function(e) {
                return this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                delete this._shimmedLocalStreams[e.id],
                r.apply(this, arguments)
            }
            ;
            const i = e.RTCPeerConnection.prototype.removeTrack;
            e.RTCPeerConnection.prototype.removeTrack = function(e) {
                return this._shimmedLocalStreams = this._shimmedLocalStreams || {},
                e && Object.keys(this._shimmedLocalStreams).forEach((t=>{
                    const n = this._shimmedLocalStreams[t].indexOf(e);
                    -1 !== n && this._shimmedLocalStreams[t].splice(n, 1),
                    1 === this._shimmedLocalStreams[t].length && delete this._shimmedLocalStreams[t]
                }
                )),
                i.apply(this, arguments)
            }
        }
        function d(e) {
            if (!e.RTCPeerConnection)
                return;
            const t = r.detectBrowser(e);
            if (e.RTCPeerConnection.prototype.addTrack && t.version >= 65)
                return u(e);
            const n = e.RTCPeerConnection.prototype.getLocalStreams;
            e.RTCPeerConnection.prototype.getLocalStreams = function() {
                const e = n.apply(this);
                return this._reverseStreams = this._reverseStreams || {},
                e.map((e=>this._reverseStreams[e.id]))
            }
            ;
            const i = e.RTCPeerConnection.prototype.addStream;
            e.RTCPeerConnection.prototype.addStream = function(t) {
                if (this._streams = this._streams || {},
                this._reverseStreams = this._reverseStreams || {},
                t.getTracks().forEach((e=>{
                    if (this.getSenders().find((t=>t.track === e)))
                        throw new DOMException("Track already exists.","InvalidAccessError")
                }
                )),
                !this._reverseStreams[t.id]) {
                    const n = new e.MediaStream(t.getTracks());
                    this._streams[t.id] = n,
                    this._reverseStreams[n.id] = t,
                    t = n
                }
                i.apply(this, [t])
            }
            ;
            const o = e.RTCPeerConnection.prototype.removeStream;
            function a(e, t) {
                let n = t.sdp;
                return Object.keys(e._reverseStreams || []).forEach((t=>{
                    const r = e._reverseStreams[t]
                      , i = e._streams[r.id];
                    n = n.replace(new RegExp(i.id,"g"), r.id)
                }
                )),
                new RTCSessionDescription({
                    type: t.type,
                    sdp: n
                })
            }
            function s(e, t) {
                let n = t.sdp;
                return Object.keys(e._reverseStreams || []).forEach((t=>{
                    const r = e._reverseStreams[t]
                      , i = e._streams[r.id];
                    n = n.replace(new RegExp(r.id,"g"), i.id)
                }
                )),
                new RTCSessionDescription({
                    type: t.type,
                    sdp: n
                })
            }
            e.RTCPeerConnection.prototype.removeStream = function(e) {
                this._streams = this._streams || {},
                this._reverseStreams = this._reverseStreams || {},
                o.apply(this, [this._streams[e.id] || e]),
                delete this._reverseStreams[this._streams[e.id] ? this._streams[e.id].id : e.id],
                delete this._streams[e.id]
            }
            ,
            e.RTCPeerConnection.prototype.addTrack = function(t, n) {
                if ("closed" === this.signalingState)
                    throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");
                const r = [].slice.call(arguments, 1);
                if (1 !== r.length || !r[0].getTracks().find((e=>e === t)))
                    throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");
                const i = this.getSenders().find((e=>e.track === t));
                if (i)
                    throw new DOMException("Track already exists.","InvalidAccessError");
                this._streams = this._streams || {},
                this._reverseStreams = this._reverseStreams || {};
                const o = this._streams[n.id];
                if (o)
                    o.addTrack(t),
                    Promise.resolve().then((()=>{
                        this.dispatchEvent(new Event("negotiationneeded"))
                    }
                    ));
                else {
                    const r = new e.MediaStream([t]);
                    this._streams[n.id] = r,
                    this._reverseStreams[r.id] = n,
                    this.addStream(r)
                }
                return this.getSenders().find((e=>e.track === t))
            }
            ,
            ["createOffer", "createAnswer"].forEach((function(t) {
                const n = e.RTCPeerConnection.prototype[t]
                  , r = {
                    [t]() {
                        const e = arguments;
                        return arguments.length && "function" == typeof arguments[0] ? n.apply(this, [t=>{
                            const n = a(this, t);
                            e[0].apply(null, [n])
                        }
                        , t=>{
                            e[1] && e[1].apply(null, t)
                        }
                        , arguments[2]]) : n.apply(this, arguments).then((e=>a(this, e)))
                    }
                };
                e.RTCPeerConnection.prototype[t] = r[t]
            }
            ));
            const c = e.RTCPeerConnection.prototype.setLocalDescription;
            e.RTCPeerConnection.prototype.setLocalDescription = function() {
                return arguments.length && arguments[0].type ? (arguments[0] = s(this, arguments[0]),
                c.apply(this, arguments)) : c.apply(this, arguments)
            }
            ;
            const _ = Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype, "localDescription");
            Object.defineProperty(e.RTCPeerConnection.prototype, "localDescription", {
                get() {
                    const e = _.get.apply(this);
                    return "" === e.type ? e : a(this, e)
                }
            }),
            e.RTCPeerConnection.prototype.removeTrack = function(e) {
                if ("closed" === this.signalingState)
                    throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");
                if (!e._pc)
                    throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");
                if (!(e._pc === this))
                    throw new DOMException("Sender was not created by this connection.","InvalidAccessError");
                let t;
                this._streams = this._streams || {},
                Object.keys(this._streams).forEach((n=>{
                    this._streams[n].getTracks().find((t=>e.track === t)) && (t = this._streams[n])
                }
                )),
                t && (1 === t.getTracks().length ? this.removeStream(this._reverseStreams[t.id]) : t.removeTrack(e.track),
                this.dispatchEvent(new Event("negotiationneeded")))
            }
        }
        function p(e) {
            const t = r.detectBrowser(e);
            if (!e.RTCPeerConnection && e.webkitRTCPeerConnection && (e.RTCPeerConnection = e.webkitRTCPeerConnection),
            !e.RTCPeerConnection)
                return;
            const n = 0 === e.RTCPeerConnection.prototype.addIceCandidate.length;
            t.version < 53 && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach((function(t) {
                const n = e.RTCPeerConnection.prototype[t]
                  , r = {
                    [t]() {
                        return arguments[0] = new ("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]),
                        n.apply(this, arguments)
                    }
                };
                e.RTCPeerConnection.prototype[t] = r[t]
            }
            ));
            const i = e.RTCPeerConnection.prototype.addIceCandidate;
            e.RTCPeerConnection.prototype.addIceCandidate = function() {
                return n || arguments[0] ? t.version < 78 && arguments[0] && "" === arguments[0].candidate ? Promise.resolve() : i.apply(this, arguments) : (arguments[1] && arguments[1].apply(null),
                Promise.resolve())
            }
        }
        function h(e) {
            const t = r.detectBrowser(e);
            r.wrapPeerConnectionEvent(e, "negotiationneeded", (e=>{
                const n = e.target;
                if (!(t.version < 72 || n.getConfiguration && "plan-b" === n.getConfiguration().sdpSemantics) || "stable" === n.signalingState)
                    return e
            }
            ))
        }
    }
    ,
    271533: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            e.navigator.mediaDevices && "getDisplayMedia"in e.navigator.mediaDevices || e.navigator.mediaDevices && ("function" == typeof t ? e.navigator.mediaDevices.getDisplayMedia = function(n) {
                return t(n).then((t=>{
                    const r = n.video && n.video.width
                      , i = n.video && n.video.height
                      , o = n.video && n.video.frameRate;
                    return n.video = {
                        mandatory: {
                            chromeMediaSource: "desktop",
                            chromeMediaSourceId: t,
                            maxFrameRate: o || 3
                        }
                    },
                    r && (n.video.mandatory.maxWidth = r),
                    i && (n.video.mandatory.maxHeight = i),
                    e.navigator.mediaDevices.getUserMedia(n)
                }
                ))
            }
            : console.error("shimGetDisplayMedia: getSourceId argument is not a function"))
        }
        n.d(t, {
            shimGetDisplayMedia: ()=>r
        })
    }
    ,
    480009: (e,t,n)=>{
        "use strict";
        n.d(t, {
            shimGetUserMedia: ()=>o
        });
        var r = n(786643);
        const i = r.log;
        function o(e) {
            const t = e && e.navigator;
            if (!t.mediaDevices)
                return;
            const n = r.detectBrowser(e)
              , o = function(e) {
                if ("object" != typeof e || e.mandatory || e.optional)
                    return e;
                const t = {};
                return Object.keys(e).forEach((n=>{
                    if ("require" === n || "advanced" === n || "mediaSource" === n)
                        return;
                    const r = "object" == typeof e[n] ? e[n] : {
                        ideal: e[n]
                    };
                    void 0 !== r.exact && "number" == typeof r.exact && (r.min = r.max = r.exact);
                    const i = function(e, t) {
                        return e ? e + t.charAt(0).toUpperCase() + t.slice(1) : "deviceId" === t ? "sourceId" : t
                    };
                    if (void 0 !== r.ideal) {
                        t.optional = t.optional || [];
                        let e = {};
                        "number" == typeof r.ideal ? (e[i("min", n)] = r.ideal,
                        t.optional.push(e),
                        e = {},
                        e[i("max", n)] = r.ideal,
                        t.optional.push(e)) : (e[i("", n)] = r.ideal,
                        t.optional.push(e))
                    }
                    void 0 !== r.exact && "number" != typeof r.exact ? (t.mandatory = t.mandatory || {},
                    t.mandatory[i("", n)] = r.exact) : ["min", "max"].forEach((e=>{
                        void 0 !== r[e] && (t.mandatory = t.mandatory || {},
                        t.mandatory[i(e, n)] = r[e])
                    }
                    ))
                }
                )),
                e.advanced && (t.optional = (t.optional || []).concat(e.advanced)),
                t
            }
              , a = function(e, r) {
                if (n.version >= 61)
                    return r(e);
                if ((e = JSON.parse(JSON.stringify(e))) && "object" == typeof e.audio) {
                    const t = function(e, t, n) {
                        t in e && !(n in e) && (e[n] = e[t],
                        delete e[t])
                    };
                    t((e = JSON.parse(JSON.stringify(e))).audio, "autoGainControl", "googAutoGainControl"),
                    t(e.audio, "noiseSuppression", "googNoiseSuppression"),
                    e.audio = o(e.audio)
                }
                if (e && "object" == typeof e.video) {
                    let a = e.video.facingMode;
                    a = a && ("object" == typeof a ? a : {
                        ideal: a
                    });
                    const s = n.version < 66;
                    if (a && ("user" === a.exact || "environment" === a.exact || "user" === a.ideal || "environment" === a.ideal) && (!t.mediaDevices.getSupportedConstraints || !t.mediaDevices.getSupportedConstraints().facingMode || s)) {
                        let n;
                        if (delete e.video.facingMode,
                        "environment" === a.exact || "environment" === a.ideal ? n = ["back", "rear"] : "user" !== a.exact && "user" !== a.ideal || (n = ["front"]),
                        n)
                            return t.mediaDevices.enumerateDevices().then((t=>{
                                let s = (t = t.filter((e=>"videoinput" === e.kind))).find((e=>n.some((t=>e.label.toLowerCase().includes(t)))));
                                return !s && t.length && n.includes("back") && (s = t[t.length - 1]),
                                s && (e.video.deviceId = a.exact ? {
                                    exact: s.deviceId
                                } : {
                                    ideal: s.deviceId
                                }),
                                e.video = o(e.video),
                                i("chrome: " + JSON.stringify(e)),
                                r(e)
                            }
                            ))
                    }
                    e.video = o(e.video)
                }
                return i("chrome: " + JSON.stringify(e)),
                r(e)
            }
              , s = function(e) {
                return n.version >= 64 ? e : {
                    name: {
                        PermissionDeniedError: "NotAllowedError",
                        PermissionDismissedError: "NotAllowedError",
                        InvalidStateError: "NotAllowedError",
                        DevicesNotFoundError: "NotFoundError",
                        ConstraintNotSatisfiedError: "OverconstrainedError",
                        TrackStartError: "NotReadableError",
                        MediaDeviceFailedDueToShutdown: "NotAllowedError",
                        MediaDeviceKillSwitchOn: "NotAllowedError",
                        TabCaptureError: "AbortError",
                        ScreenCaptureError: "AbortError",
                        DeviceCaptureError: "AbortError"
                    }[e.name] || e.name,
                    message: e.message,
                    constraint: e.constraint || e.constraintName,
                    toString() {
                        return this.name + (this.message && ": ") + this.message
                    }
                }
            };
            if (t.getUserMedia = function(e, n, r) {
                a(e, (e=>{
                    t.webkitGetUserMedia(e, n, (e=>{
                        r && r(s(e))
                    }
                    ))
                }
                ))
            }
            .bind(t),
            t.mediaDevices.getUserMedia) {
                const e = t.mediaDevices.getUserMedia.bind(t.mediaDevices);
                t.mediaDevices.getUserMedia = function(t) {
                    return a(t, (t=>e(t).then((e=>{
                        if (t.audio && !e.getAudioTracks().length || t.video && !e.getVideoTracks().length)
                            throw e.getTracks().forEach((e=>{
                                e.stop()
                            }
                            )),
                            new DOMException("","NotFoundError");
                        return e
                    }
                    ), (e=>Promise.reject(s(e))))))
                }
            }
        }
    }
    ,
    548864: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            shimRTCIceCandidate: ()=>a,
            shimMaxMessageSize: ()=>s,
            shimSendThrowTypeError: ()=>c,
            shimConnectionState: ()=>_,
            removeAllowExtmapMixed: ()=>l
        });
        var r = n(857539)
          , i = n.n(r)
          , o = n(786643);
        function a(e) {
            if (!e.RTCIceCandidate || e.RTCIceCandidate && "foundation"in e.RTCIceCandidate.prototype)
                return;
            const t = e.RTCIceCandidate;
            e.RTCIceCandidate = function(e) {
                if ("object" == typeof e && e.candidate && 0 === e.candidate.indexOf("a=") && ((e = JSON.parse(JSON.stringify(e))).candidate = e.candidate.substr(2)),
                e.candidate && e.candidate.length) {
                    const n = new t(e)
                      , r = i().parseCandidate(e.candidate)
                      , o = Object.assign(n, r);
                    return o.toJSON = function() {
                        return {
                            candidate: o.candidate,
                            sdpMid: o.sdpMid,
                            sdpMLineIndex: o.sdpMLineIndex,
                            usernameFragment: o.usernameFragment
                        }
                    }
                    ,
                    o
                }
                return new t(e)
            }
            ,
            e.RTCIceCandidate.prototype = t.prototype,
            o.wrapPeerConnectionEvent(e, "icecandidate", (t=>(t.candidate && Object.defineProperty(t, "candidate", {
                value: new e.RTCIceCandidate(t.candidate),
                writable: "false"
            }),
            t)))
        }
        function s(e) {
            if (!e.RTCPeerConnection)
                return;
            const t = o.detectBrowser(e);
            "sctp"in e.RTCPeerConnection.prototype || Object.defineProperty(e.RTCPeerConnection.prototype, "sctp", {
                get() {
                    return void 0 === this._sctp ? null : this._sctp
                }
            });
            const n = function(e) {
                if (!e || !e.sdp)
                    return !1;
                const t = i().splitSections(e.sdp);
                return t.shift(),
                t.some((e=>{
                    const t = i().parseMLine(e);
                    return t && "application" === t.kind && -1 !== t.protocol.indexOf("SCTP")
                }
                ))
            }
              , r = function(e) {
                const t = e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
                if (null === t || t.length < 2)
                    return -1;
                const n = parseInt(t[1], 10);
                return n != n ? -1 : n
            }
              , a = function(e) {
                let n = 65536;
                return "firefox" === t.browser && (n = t.version < 57 ? -1 === e ? 16384 : 2147483637 : t.version < 60 ? 57 === t.version ? 65535 : 65536 : 2147483637),
                n
            }
              , s = function(e, n) {
                let r = 65536;
                "firefox" === t.browser && 57 === t.version && (r = 65535);
                const o = i().matchPrefix(e.sdp, "a=max-message-size:");
                return o.length > 0 ? r = parseInt(o[0].substr(19), 10) : "firefox" === t.browser && -1 !== n && (r = 2147483637),
                r
            }
              , c = e.RTCPeerConnection.prototype.setRemoteDescription;
            e.RTCPeerConnection.prototype.setRemoteDescription = function() {
                if (this._sctp = null,
                "chrome" === t.browser && t.version >= 76) {
                    const {sdpSemantics: e} = this.getConfiguration();
                    "plan-b" === e && Object.defineProperty(this, "sctp", {
                        get() {
                            return void 0 === this._sctp ? null : this._sctp
                        },
                        enumerable: !0,
                        configurable: !0
                    })
                }
                if (n(arguments[0])) {
                    const e = r(arguments[0])
                      , t = a(e)
                      , n = s(arguments[0], e);
                    let i;
                    i = 0 === t && 0 === n ? Number.POSITIVE_INFINITY : 0 === t || 0 === n ? Math.max(t, n) : Math.min(t, n);
                    const o = {};
                    Object.defineProperty(o, "maxMessageSize", {
                        get: ()=>i
                    }),
                    this._sctp = o
                }
                return c.apply(this, arguments)
            }
        }
        function c(e) {
            if (!e.RTCPeerConnection || !("createDataChannel"in e.RTCPeerConnection.prototype))
                return;
            function t(e, t) {
                const n = e.send;
                e.send = function() {
                    const r = arguments[0]
                      , i = r.length || r.size || r.byteLength;
                    if ("open" === e.readyState && t.sctp && i > t.sctp.maxMessageSize)
                        throw new TypeError("Message too large (can send a maximum of " + t.sctp.maxMessageSize + " bytes)");
                    return n.apply(e, arguments)
                }
            }
            const n = e.RTCPeerConnection.prototype.createDataChannel;
            e.RTCPeerConnection.prototype.createDataChannel = function() {
                const e = n.apply(this, arguments);
                return t(e, this),
                e
            }
            ,
            o.wrapPeerConnectionEvent(e, "datachannel", (e=>(t(e.channel, e.target),
            e)))
        }
        function _(e) {
            if (!e.RTCPeerConnection || "connectionState"in e.RTCPeerConnection.prototype)
                return;
            const t = e.RTCPeerConnection.prototype;
            Object.defineProperty(t, "connectionState", {
                get() {
                    return {
                        completed: "connected",
                        checking: "connecting"
                    }[this.iceConnectionState] || this.iceConnectionState
                },
                enumerable: !0,
                configurable: !0
            }),
            Object.defineProperty(t, "onconnectionstatechange", {
                get() {
                    return this._onconnectionstatechange || null
                },
                set(e) {
                    this._onconnectionstatechange && (this.removeEventListener("connectionstatechange", this._onconnectionstatechange),
                    delete this._onconnectionstatechange),
                    e && this.addEventListener("connectionstatechange", this._onconnectionstatechange = e)
                },
                enumerable: !0,
                configurable: !0
            }),
            ["setLocalDescription", "setRemoteDescription"].forEach((e=>{
                const n = t[e];
                t[e] = function() {
                    return this._connectionstatechangepoly || (this._connectionstatechangepoly = e=>{
                        const t = e.target;
                        if (t._lastConnectionState !== t.connectionState) {
                            t._lastConnectionState = t.connectionState;
                            const n = new Event("connectionstatechange",e);
                            t.dispatchEvent(n)
                        }
                        return e
                    }
                    ,
                    this.addEventListener("iceconnectionstatechange", this._connectionstatechangepoly)),
                    n.apply(this, arguments)
                }
            }
            ))
        }
        function l(e) {
            if (!e.RTCPeerConnection)
                return;
            const t = o.detectBrowser(e);
            if ("chrome" === t.browser && t.version >= 71)
                return;
            if ("safari" === t.browser && t.version >= 605)
                return;
            const n = e.RTCPeerConnection.prototype.setRemoteDescription;
            e.RTCPeerConnection.prototype.setRemoteDescription = function(e) {
                return e && e.sdp && -1 !== e.sdp.indexOf("\na=extmap-allow-mixed") && (e.sdp = e.sdp.split("\n").filter((e=>"a=extmap-allow-mixed" !== e.trim())).join("\n")),
                n.apply(this, arguments)
            }
        }
    }
    ,
    624854: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            shimGetUserMedia: ()=>s.shimGetUserMedia,
            shimGetDisplayMedia: ()=>c.shimGetDisplayMedia,
            shimPeerConnection: ()=>_,
            shimReplaceTrack: ()=>l
        });
        var r = n(786643)
          , i = n(860641)
          , o = n(762539)
          , a = n.n(o)
          , s = n(131169)
          , c = n(794155);
        function _(e) {
            const t = r.detectBrowser(e);
            if (e.RTCIceGatherer && (e.RTCIceCandidate || (e.RTCIceCandidate = function(e) {
                return e
            }
            ),
            e.RTCSessionDescription || (e.RTCSessionDescription = function(e) {
                return e
            }
            ),
            t.version < 15025)) {
                const t = Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype, "enabled");
                Object.defineProperty(e.MediaStreamTrack.prototype, "enabled", {
                    set(e) {
                        t.set.call(this, e);
                        const n = new Event("enabled");
                        n.enabled = e,
                        this.dispatchEvent(n)
                    }
                })
            }
            e.RTCRtpSender && !("dtmf"in e.RTCRtpSender.prototype) && Object.defineProperty(e.RTCRtpSender.prototype, "dtmf", {
                get() {
                    return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = new e.RTCDtmfSender(this) : "video" === this.track.kind && (this._dtmf = null)),
                    this._dtmf
                }
            }),
            e.RTCDtmfSender && !e.RTCDTMFSender && (e.RTCDTMFSender = e.RTCDtmfSender);
            const n = a()(e, t.version);
            e.RTCPeerConnection = function(e) {
                return e && e.iceServers && (e.iceServers = (0,
                i.filterIceServers)(e.iceServers, t.version),
                r.log("ICE servers after filtering:", e.iceServers)),
                new n(e)
            }
            ,
            e.RTCPeerConnection.prototype = n.prototype
        }
        function l(e) {
            e.RTCRtpSender && !("replaceTrack"in e.RTCRtpSender.prototype) && (e.RTCRtpSender.prototype.replaceTrack = e.RTCRtpSender.prototype.setTrack)
        }
    }
    ,
    860641: (e,t,n)=>{
        "use strict";
        n.d(t, {
            filterIceServers: ()=>i
        });
        var r = n(786643);
        function i(e, t) {
            let n = !1;
            return (e = JSON.parse(JSON.stringify(e))).filter((e=>{
                if (e && (e.urls || e.url)) {
                    let t = e.urls || e.url;
                    e.url && !e.urls && r.deprecated("RTCIceServer.url", "RTCIceServer.urls");
                    const i = "string" == typeof t;
                    return i && (t = [t]),
                    t = t.filter((e=>{
                        if (0 === e.indexOf("stun:"))
                            return !1;
                        const t = e.startsWith("turn") && !e.startsWith("turn:[") && e.includes("transport=udp");
                        return t && !n ? (n = !0,
                        !0) : t && !n
                    }
                    )),
                    delete e.url,
                    e.urls = i ? t[0] : t,
                    !!t.length
                }
            }
            ))
        }
    }
    ,
    794155: (e,t,n)=>{
        "use strict";
        function r(e) {
            "getDisplayMedia"in e.navigator && e.navigator.mediaDevices && (e.navigator.mediaDevices && "getDisplayMedia"in e.navigator.mediaDevices || (e.navigator.mediaDevices.getDisplayMedia = e.navigator.getDisplayMedia.bind(e.navigator)))
        }
        n.d(t, {
            shimGetDisplayMedia: ()=>r
        })
    }
    ,
    131169: (e,t,n)=>{
        "use strict";
        function r(e) {
            const t = e && e.navigator
              , n = t.mediaDevices.getUserMedia.bind(t.mediaDevices);
            t.mediaDevices.getUserMedia = function(e) {
                return n(e).catch((e=>Promise.reject(function(e) {
                    return {
                        name: {
                            PermissionDeniedError: "NotAllowedError"
                        }[e.name] || e.name,
                        message: e.message,
                        constraint: e.constraint,
                        toString() {
                            return this.name
                        }
                    }
                }(e))))
            }
        }
        n.d(t, {
            shimGetUserMedia: ()=>r
        })
    }
    ,
    960057: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            shimGetUserMedia: ()=>i.shimGetUserMedia,
            shimGetDisplayMedia: ()=>o.shimGetDisplayMedia,
            shimOnTrack: ()=>a,
            shimPeerConnection: ()=>s,
            shimSenderGetStats: ()=>c,
            shimReceiverGetStats: ()=>_,
            shimRemoveStream: ()=>l,
            shimRTCDataChannel: ()=>u,
            shimAddTransceiver: ()=>d,
            shimGetParameters: ()=>p,
            shimCreateOffer: ()=>h,
            shimCreateAnswer: ()=>m
        });
        var r = n(786643)
          , i = n(809080)
          , o = n(72365);
        function a(e) {
            "object" == typeof e && e.RTCTrackEvent && "receiver"in e.RTCTrackEvent.prototype && !("transceiver"in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
                get() {
                    return {
                        receiver: this.receiver
                    }
                }
            })
        }
        function s(e) {
            const t = r.detectBrowser(e);
            if ("object" != typeof e || !e.RTCPeerConnection && !e.mozRTCPeerConnection)
                return;
            if (!e.RTCPeerConnection && e.mozRTCPeerConnection && (e.RTCPeerConnection = e.mozRTCPeerConnection),
            t.version < 53 && ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach((function(t) {
                const n = e.RTCPeerConnection.prototype[t]
                  , r = {
                    [t]() {
                        return arguments[0] = new ("addIceCandidate" === t ? e.RTCIceCandidate : e.RTCSessionDescription)(arguments[0]),
                        n.apply(this, arguments)
                    }
                };
                e.RTCPeerConnection.prototype[t] = r[t]
            }
            )),
            t.version < 68) {
                const t = e.RTCPeerConnection.prototype.addIceCandidate;
                e.RTCPeerConnection.prototype.addIceCandidate = function() {
                    return arguments[0] ? arguments[0] && "" === arguments[0].candidate ? Promise.resolve() : t.apply(this, arguments) : (arguments[1] && arguments[1].apply(null),
                    Promise.resolve())
                }
            }
            const n = {
                inboundrtp: "inbound-rtp",
                outboundrtp: "outbound-rtp",
                candidatepair: "candidate-pair",
                localcandidate: "local-candidate",
                remotecandidate: "remote-candidate"
            }
              , i = e.RTCPeerConnection.prototype.getStats;
            e.RTCPeerConnection.prototype.getStats = function() {
                const [e,r,o] = arguments;
                return i.apply(this, [e || null]).then((e=>{
                    if (t.version < 53 && !r)
                        try {
                            e.forEach((e=>{
                                e.type = n[e.type] || e.type
                            }
                            ))
                        } catch (t) {
                            if ("TypeError" !== t.name)
                                throw t;
                            e.forEach(((t,r)=>{
                                e.set(r, Object.assign({}, t, {
                                    type: n[t.type] || t.type
                                }))
                            }
                            ))
                        }
                    return e
                }
                )).then(r, o)
            }
        }
        function c(e) {
            if ("object" != typeof e || !e.RTCPeerConnection || !e.RTCRtpSender)
                return;
            if (e.RTCRtpSender && "getStats"in e.RTCRtpSender.prototype)
                return;
            const t = e.RTCPeerConnection.prototype.getSenders;
            t && (e.RTCPeerConnection.prototype.getSenders = function() {
                const e = t.apply(this, []);
                return e.forEach((e=>e._pc = this)),
                e
            }
            );
            const n = e.RTCPeerConnection.prototype.addTrack;
            n && (e.RTCPeerConnection.prototype.addTrack = function() {
                const e = n.apply(this, arguments);
                return e._pc = this,
                e
            }
            ),
            e.RTCRtpSender.prototype.getStats = function() {
                return this.track ? this._pc.getStats(this.track) : Promise.resolve(new Map)
            }
        }
        function _(e) {
            if ("object" != typeof e || !e.RTCPeerConnection || !e.RTCRtpSender)
                return;
            if (e.RTCRtpSender && "getStats"in e.RTCRtpReceiver.prototype)
                return;
            const t = e.RTCPeerConnection.prototype.getReceivers;
            t && (e.RTCPeerConnection.prototype.getReceivers = function() {
                const e = t.apply(this, []);
                return e.forEach((e=>e._pc = this)),
                e
            }
            ),
            r.wrapPeerConnectionEvent(e, "track", (e=>(e.receiver._pc = e.srcElement,
            e))),
            e.RTCRtpReceiver.prototype.getStats = function() {
                return this._pc.getStats(this.track)
            }
        }
        function l(e) {
            e.RTCPeerConnection && !("removeStream"in e.RTCPeerConnection.prototype) && (e.RTCPeerConnection.prototype.removeStream = function(e) {
                r.deprecated("removeStream", "removeTrack"),
                this.getSenders().forEach((t=>{
                    t.track && e.getTracks().includes(t.track) && this.removeTrack(t)
                }
                ))
            }
            )
        }
        function u(e) {
            e.DataChannel && !e.RTCDataChannel && (e.RTCDataChannel = e.DataChannel)
        }
        function d(e) {
            if ("object" != typeof e || !e.RTCPeerConnection)
                return;
            const t = e.RTCPeerConnection.prototype.addTransceiver;
            t && (e.RTCPeerConnection.prototype.addTransceiver = function() {
                this.setParametersPromises = [];
                const e = arguments[1]
                  , n = e && "sendEncodings"in e;
                n && e.sendEncodings.forEach((e=>{
                    if ("rid"in e) {
                        if (!/^[a-z0-9]{0,16}$/i.test(e.rid))
                            throw new TypeError("Invalid RID value provided.")
                    }
                    if ("scaleResolutionDownBy"in e && !(parseFloat(e.scaleResolutionDownBy) >= 1))
                        throw new RangeError("scale_resolution_down_by must be >= 1.0");
                    if ("maxFramerate"in e && !(parseFloat(e.maxFramerate) >= 0))
                        throw new RangeError("max_framerate must be >= 0.0")
                }
                ));
                const r = t.apply(this, arguments);
                if (n) {
                    const {sender: t} = r
                      , n = t.getParameters();
                    (!("encodings"in n) || 1 === n.encodings.length && 0 === Object.keys(n.encodings[0]).length) && (n.encodings = e.sendEncodings,
                    t.sendEncodings = e.sendEncodings,
                    this.setParametersPromises.push(t.setParameters(n).then((()=>{
                        delete t.sendEncodings
                    }
                    )).catch((()=>{
                        delete t.sendEncodings
                    }
                    ))))
                }
                return r
            }
            )
        }
        function p(e) {
            if ("object" != typeof e || !e.RTCRtpSender)
                return;
            const t = e.RTCRtpSender.prototype.getParameters;
            t && (e.RTCRtpSender.prototype.getParameters = function() {
                const e = t.apply(this, arguments);
                return "encodings"in e || (e.encodings = [].concat(this.sendEncodings || [{}])),
                e
            }
            )
        }
        function h(e) {
            if ("object" != typeof e || !e.RTCPeerConnection)
                return;
            const t = e.RTCPeerConnection.prototype.createOffer;
            e.RTCPeerConnection.prototype.createOffer = function() {
                return this.setParametersPromises && this.setParametersPromises.length ? Promise.all(this.setParametersPromises).then((()=>t.apply(this, arguments))).finally((()=>{
                    this.setParametersPromises = []
                }
                )) : t.apply(this, arguments)
            }
        }
        function m(e) {
            if ("object" != typeof e || !e.RTCPeerConnection)
                return;
            const t = e.RTCPeerConnection.prototype.createAnswer;
            e.RTCPeerConnection.prototype.createAnswer = function() {
                return this.setParametersPromises && this.setParametersPromises.length ? Promise.all(this.setParametersPromises).then((()=>t.apply(this, arguments))).finally((()=>{
                    this.setParametersPromises = []
                }
                )) : t.apply(this, arguments)
            }
        }
    }
    ,
    72365: (e,t,n)=>{
        "use strict";
        function r(e, t) {
            e.navigator.mediaDevices && "getDisplayMedia"in e.navigator.mediaDevices || e.navigator.mediaDevices && (e.navigator.mediaDevices.getDisplayMedia = function(n) {
                if (!n || !n.video) {
                    const e = new DOMException("getDisplayMedia without video constraints is undefined");
                    return e.name = "NotFoundError",
                    e.code = 8,
                    Promise.reject(e)
                }
                return !0 === n.video ? n.video = {
                    mediaSource: t
                } : n.video.mediaSource = t,
                e.navigator.mediaDevices.getUserMedia(n)
            }
            )
        }
        n.d(t, {
            shimGetDisplayMedia: ()=>r
        })
    }
    ,
    809080: (e,t,n)=>{
        "use strict";
        n.d(t, {
            shimGetUserMedia: ()=>i
        });
        var r = n(786643);
        function i(e) {
            const t = r.detectBrowser(e)
              , n = e && e.navigator
              , i = e && e.MediaStreamTrack;
            if (n.getUserMedia = function(e, t, i) {
                r.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"),
                n.mediaDevices.getUserMedia(e).then(t, i)
            }
            ,
            !(t.version > 55 && "autoGainControl"in n.mediaDevices.getSupportedConstraints())) {
                const e = function(e, t, n) {
                    t in e && !(n in e) && (e[n] = e[t],
                    delete e[t])
                }
                  , t = n.mediaDevices.getUserMedia.bind(n.mediaDevices);
                if (n.mediaDevices.getUserMedia = function(n) {
                    return "object" == typeof n && "object" == typeof n.audio && (n = JSON.parse(JSON.stringify(n)),
                    e(n.audio, "autoGainControl", "mozAutoGainControl"),
                    e(n.audio, "noiseSuppression", "mozNoiseSuppression")),
                    t(n)
                }
                ,
                i && i.prototype.getSettings) {
                    const t = i.prototype.getSettings;
                    i.prototype.getSettings = function() {
                        const n = t.apply(this, arguments);
                        return e(n, "mozAutoGainControl", "autoGainControl"),
                        e(n, "mozNoiseSuppression", "noiseSuppression"),
                        n
                    }
                }
                if (i && i.prototype.applyConstraints) {
                    const t = i.prototype.applyConstraints;
                    i.prototype.applyConstraints = function(n) {
                        return "audio" === this.kind && "object" == typeof n && (n = JSON.parse(JSON.stringify(n)),
                        e(n, "autoGainControl", "mozAutoGainControl"),
                        e(n, "noiseSuppression", "mozNoiseSuppression")),
                        t.apply(this, [n])
                    }
                }
            }
        }
    }
    ,
    155938: (e,t,n)=>{
        "use strict";
        n.r(t),
        n.d(t, {
            shimLocalStreamsAPI: ()=>i,
            shimRemoteStreamsAPI: ()=>o,
            shimCallbacksAPI: ()=>a,
            shimGetUserMedia: ()=>s,
            shimConstraints: ()=>c,
            shimRTCIceServerUrls: ()=>_,
            shimTrackEventTransceiver: ()=>l,
            shimCreateOfferLegacy: ()=>u,
            shimAudioContext: ()=>d
        });
        var r = n(786643);
        function i(e) {
            if ("object" == typeof e && e.RTCPeerConnection) {
                if ("getLocalStreams"in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getLocalStreams = function() {
                    return this._localStreams || (this._localStreams = []),
                    this._localStreams
                }
                ),
                !("addStream"in e.RTCPeerConnection.prototype)) {
                    const t = e.RTCPeerConnection.prototype.addTrack;
                    e.RTCPeerConnection.prototype.addStream = function(e) {
                        this._localStreams || (this._localStreams = []),
                        this._localStreams.includes(e) || this._localStreams.push(e),
                        e.getAudioTracks().forEach((n=>t.call(this, n, e))),
                        e.getVideoTracks().forEach((n=>t.call(this, n, e)))
                    }
                    ,
                    e.RTCPeerConnection.prototype.addTrack = function(e, ...n) {
                        return n && n.forEach((e=>{
                            this._localStreams ? this._localStreams.includes(e) || this._localStreams.push(e) : this._localStreams = [e]
                        }
                        )),
                        t.apply(this, arguments)
                    }
                }
                "removeStream"in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.removeStream = function(e) {
                    this._localStreams || (this._localStreams = []);
                    const t = this._localStreams.indexOf(e);
                    if (-1 === t)
                        return;
                    this._localStreams.splice(t, 1);
                    const n = e.getTracks();
                    this.getSenders().forEach((e=>{
                        n.includes(e.track) && this.removeTrack(e)
                    }
                    ))
                }
                )
            }
        }
        function o(e) {
            if ("object" == typeof e && e.RTCPeerConnection && ("getRemoteStreams"in e.RTCPeerConnection.prototype || (e.RTCPeerConnection.prototype.getRemoteStreams = function() {
                return this._remoteStreams ? this._remoteStreams : []
            }
            ),
            !("onaddstream"in e.RTCPeerConnection.prototype))) {
                Object.defineProperty(e.RTCPeerConnection.prototype, "onaddstream", {
                    get() {
                        return this._onaddstream
                    },
                    set(e) {
                        this._onaddstream && (this.removeEventListener("addstream", this._onaddstream),
                        this.removeEventListener("track", this._onaddstreampoly)),
                        this.addEventListener("addstream", this._onaddstream = e),
                        this.addEventListener("track", this._onaddstreampoly = e=>{
                            e.streams.forEach((e=>{
                                if (this._remoteStreams || (this._remoteStreams = []),
                                this._remoteStreams.includes(e))
                                    return;
                                this._remoteStreams.push(e);
                                const t = new Event("addstream");
                                t.stream = e,
                                this.dispatchEvent(t)
                            }
                            ))
                        }
                        )
                    }
                });
                const t = e.RTCPeerConnection.prototype.setRemoteDescription;
                e.RTCPeerConnection.prototype.setRemoteDescription = function() {
                    const e = this;
                    return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(t) {
                        t.streams.forEach((t=>{
                            if (e._remoteStreams || (e._remoteStreams = []),
                            e._remoteStreams.indexOf(t) >= 0)
                                return;
                            e._remoteStreams.push(t);
                            const n = new Event("addstream");
                            n.stream = t,
                            e.dispatchEvent(n)
                        }
                        ))
                    }
                    ),
                    t.apply(e, arguments)
                }
            }
        }
        function a(e) {
            if ("object" != typeof e || !e.RTCPeerConnection)
                return;
            const t = e.RTCPeerConnection.prototype
              , n = t.createOffer
              , r = t.createAnswer
              , i = t.setLocalDescription
              , o = t.setRemoteDescription
              , a = t.addIceCandidate;
            t.createOffer = function(e, t) {
                const r = arguments.length >= 2 ? arguments[2] : arguments[0]
                  , i = n.apply(this, [r]);
                return t ? (i.then(e, t),
                Promise.resolve()) : i
            }
            ,
            t.createAnswer = function(e, t) {
                const n = arguments.length >= 2 ? arguments[2] : arguments[0]
                  , i = r.apply(this, [n]);
                return t ? (i.then(e, t),
                Promise.resolve()) : i
            }
            ;
            let s = function(e, t, n) {
                const r = i.apply(this, [e]);
                return n ? (r.then(t, n),
                Promise.resolve()) : r
            };
            t.setLocalDescription = s,
            s = function(e, t, n) {
                const r = o.apply(this, [e]);
                return n ? (r.then(t, n),
                Promise.resolve()) : r
            }
            ,
            t.setRemoteDescription = s,
            s = function(e, t, n) {
                const r = a.apply(this, [e]);
                return n ? (r.then(t, n),
                Promise.resolve()) : r
            }
            ,
            t.addIceCandidate = s
        }
        function s(e) {
            const t = e && e.navigator;
            if (t.mediaDevices && t.mediaDevices.getUserMedia) {
                const e = t.mediaDevices
                  , n = e.getUserMedia.bind(e);
                t.mediaDevices.getUserMedia = e=>n(c(e))
            }
            !t.getUserMedia && t.mediaDevices && t.mediaDevices.getUserMedia && (t.getUserMedia = function(e, n, r) {
                t.mediaDevices.getUserMedia(e).then(n, r)
            }
            .bind(t))
        }
        function c(e) {
            return e && void 0 !== e.video ? Object.assign({}, e, {
                video: r.compactObject(e.video)
            }) : e
        }
        function _(e) {
            if (!e.RTCPeerConnection)
                return;
            const t = e.RTCPeerConnection;
            e.RTCPeerConnection = function(e, n) {
                if (e && e.iceServers) {
                    const t = [];
                    for (let n = 0; n < e.iceServers.length; n++) {
                        let i = e.iceServers[n];
                        !i.hasOwnProperty("urls") && i.hasOwnProperty("url") ? (r.deprecated("RTCIceServer.url", "RTCIceServer.urls"),
                        i = JSON.parse(JSON.stringify(i)),
                        i.urls = i.url,
                        delete i.url,
                        t.push(i)) : t.push(e.iceServers[n])
                    }
                    e.iceServers = t
                }
                return new t(e,n)
            }
            ,
            e.RTCPeerConnection.prototype = t.prototype,
            "generateCertificate"in t && Object.defineProperty(e.RTCPeerConnection, "generateCertificate", {
                get: ()=>t.generateCertificate
            })
        }
        function l(e) {
            "object" == typeof e && e.RTCTrackEvent && "receiver"in e.RTCTrackEvent.prototype && !("transceiver"in e.RTCTrackEvent.prototype) && Object.defineProperty(e.RTCTrackEvent.prototype, "transceiver", {
                get() {
                    return {
                        receiver: this.receiver
                    }
                }
            })
        }
        function u(e) {
            const t = e.RTCPeerConnection.prototype.createOffer;
            e.RTCPeerConnection.prototype.createOffer = function(e) {
                if (e) {
                    void 0 !== e.offerToReceiveAudio && (e.offerToReceiveAudio = !!e.offerToReceiveAudio);
                    const t = this.getTransceivers().find((e=>"audio" === e.receiver.track.kind));
                    !1 === e.offerToReceiveAudio && t ? "sendrecv" === t.direction ? t.setDirection ? t.setDirection("sendonly") : t.direction = "sendonly" : "recvonly" === t.direction && (t.setDirection ? t.setDirection("inactive") : t.direction = "inactive") : !0 !== e.offerToReceiveAudio || t || this.addTransceiver("audio"),
                    void 0 !== e.offerToReceiveVideo && (e.offerToReceiveVideo = !!e.offerToReceiveVideo);
                    const n = this.getTransceivers().find((e=>"video" === e.receiver.track.kind));
                    !1 === e.offerToReceiveVideo && n ? "sendrecv" === n.direction ? n.setDirection ? n.setDirection("sendonly") : n.direction = "sendonly" : "recvonly" === n.direction && (n.setDirection ? n.setDirection("inactive") : n.direction = "inactive") : !0 !== e.offerToReceiveVideo || n || this.addTransceiver("video")
                }
                return t.apply(this, arguments)
            }
        }
        function d(e) {
            "object" != typeof e || e.AudioContext || (e.AudioContext = e.webkitAudioContext)
        }
    }
    ,
    786643: (e,t,n)=>{
        "use strict";
        n.d(t, {
            extractVersion: ()=>o,
            wrapPeerConnectionEvent: ()=>a,
            disableLog: ()=>s,
            disableWarnings: ()=>c,
            log: ()=>_,
            deprecated: ()=>l,
            detectBrowser: ()=>u,
            compactObject: ()=>p,
            filterStats: ()=>m
        });
        let r = !0
          , i = !0;
        function o(e, t, n) {
            const r = e.match(t);
            return r && r.length >= n && parseInt(r[n], 10)
        }
        function a(e, t, n) {
            if (!e.RTCPeerConnection)
                return;
            const r = e.RTCPeerConnection.prototype
              , i = r.addEventListener;
            r.addEventListener = function(e, r) {
                if (e !== t)
                    return i.apply(this, arguments);
                const o = e=>{
                    const t = n(e);
                    t && (r.handleEvent ? r.handleEvent(t) : r(t))
                }
                ;
                return this._eventMap = this._eventMap || {},
                this._eventMap[t] || (this._eventMap[t] = new Map),
                this._eventMap[t].set(r, o),
                i.apply(this, [e, o])
            }
            ;
            const o = r.removeEventListener;
            r.removeEventListener = function(e, n) {
                if (e !== t || !this._eventMap || !this._eventMap[t])
                    return o.apply(this, arguments);
                if (!this._eventMap[t].has(n))
                    return o.apply(this, arguments);
                const r = this._eventMap[t].get(n);
                return this._eventMap[t].delete(n),
                0 === this._eventMap[t].size && delete this._eventMap[t],
                0 === Object.keys(this._eventMap).length && delete this._eventMap,
                o.apply(this, [e, r])
            }
            ,
            Object.defineProperty(r, "on" + t, {
                get() {
                    return this["_on" + t]
                },
                set(e) {
                    this["_on" + t] && (this.removeEventListener(t, this["_on" + t]),
                    delete this["_on" + t]),
                    e && this.addEventListener(t, this["_on" + t] = e)
                },
                enumerable: !0,
                configurable: !0
            })
        }
        function s(e) {
            return "boolean" != typeof e ? new Error("Argument type: " + typeof e + ". Please use a boolean.") : (r = e,
            e ? "adapter.js logging disabled" : "adapter.js logging enabled")
        }
        function c(e) {
            return "boolean" != typeof e ? new Error("Argument type: " + typeof e + ". Please use a boolean.") : (i = !e,
            "adapter.js deprecation warnings " + (e ? "disabled" : "enabled"))
        }
        function _() {
            if ("object" == typeof window) {
                if (r)
                    return;
                "undefined" != typeof console && "function" == typeof console.log && console.log.apply(console, arguments)
            }
        }
        function l(e, t) {
            i && console.warn(e + " is deprecated, please use " + t + " instead.")
        }
        function u(e) {
            const t = {
                browser: null,
                version: null
            };
            if (void 0 === e || !e.navigator)
                return t.browser = "Not a browser.",
                t;
            const {navigator: n} = e;
            if (n.mozGetUserMedia)
                t.browser = "firefox",
                t.version = o(n.userAgent, /Firefox\/(\d+)\./, 1);
            else if (n.webkitGetUserMedia || !1 === e.isSecureContext && e.webkitRTCPeerConnection && !e.RTCIceGatherer)
                t.browser = "chrome",
                t.version = o(n.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
            else if (n.mediaDevices && n.userAgent.match(/Edge\/(\d+).(\d+)$/))
                t.browser = "edge",
                t.version = o(n.userAgent, /Edge\/(\d+).(\d+)$/, 2);
            else {
                if (!e.RTCPeerConnection || !n.userAgent.match(/AppleWebKit\/(\d+)\./))
                    return t.browser = "Not a supported browser.",
                    t;
                t.browser = "safari",
                t.version = o(n.userAgent, /AppleWebKit\/(\d+)\./, 1),
                t.supportsUnifiedPlan = e.RTCRtpTransceiver && "currentDirection"in e.RTCRtpTransceiver.prototype
            }
            return t
        }
        function d(e) {
            return "[object Object]" === Object.prototype.toString.call(e)
        }
        function p(e) {
            return d(e) ? Object.keys(e).reduce((function(t, n) {
                const r = d(e[n])
                  , i = r ? p(e[n]) : e[n]
                  , o = r && !Object.keys(i).length;
                return void 0 === i || o ? t : Object.assign(t, {
                    [n]: i
                })
            }
            ), {}) : e
        }
        function h(e, t, n) {
            t && !n.has(t.id) && (n.set(t.id, t),
            Object.keys(t).forEach((r=>{
                r.endsWith("Id") ? h(e, e.get(t[r]), n) : r.endsWith("Ids") && t[r].forEach((t=>{
                    h(e, e.get(t), n)
                }
                ))
            }
            )))
        }
        function m(e, t, n) {
            const r = n ? "outbound-rtp" : "inbound-rtp"
              , i = new Map;
            if (null === t)
                return i;
            const o = [];
            return e.forEach((e=>{
                "track" === e.type && e.trackIdentifier === t.id && o.push(e)
            }
            )),
            o.forEach((t=>{
                e.forEach((n=>{
                    n.type === r && n.trackId === t.id && h(e, n, i)
                }
                ))
            }
            )),
            i
        }
    }
}]);
try {
    stManager.done("dist/common.cffda4f88e8e8e0e2a8e.js")
} catch (e) {}
